{"version":3,"sources":["scripts/app-690e8ceb48.js"],"names":["$","ScratchPad","el","options","this","$el","init","enabled","_generate","prototype","support","canvas","document","createElement","ctx","getContext","css","$img","attr","position","width","height","$scratchpad","bindMobileEvents","mousedown","proxy","e","canvasOffset","offset","scratch","_scratchFunc","mousemove","mouseup","_setOptions","append","reset","_this","Math","ceil","innerWidth","innerHeight","devicePixelRatio","window","pixels","setAttribute","scale","hide","bg","charAt","fg","fillStyle","beginPath","rect","fill","show","Image","load","drawImage","clear","clearRect","enable","destroy","children","remove","removeData","opt","func","toUpperCase","substring","setBg","setFg","setCursor","cursor","event","pageX","floor","left","pageY","top","realtime","apply","_scratchPercent","hits","imageData","getImageData","i","ii","data","length","_scratchDown","globalCompositeOperation","lineJoin","lineCap","strokeStyle","color","lineWidth","size","arc","PI","closePath","moveTo","_scratchMove","lineTo","stroke","_scratchUp","fn","wScratchPad","value","get","extend","values","undefined","setOpt","getOpt","runOpt","push","each","defaults","scratchDown","scratchUp","scratchMove","on","touches","changedTouches","originalEvent","targetTouches","first","type","preventDefault","simulatedEvent","createEvent","initMouseEvent","screenX","screenY","clientX","clientY","target","dispatchEvent","jQuery","angular","module","countDown","leftsecond","parseInt","day","hour","minute","second","MainController","$scope","$http","$timeout","scratchCardStatus","wPopup","wxAPI","nAPI","$q","$filter","wLoading","DEBUG","$sce","dealUserInfo","userInfo","vm","myPageCash","truename","phone","user_truename","user_phone","setCardStyle","myIsAward","canvasbg","element","padding-top","myAwardName","dealScratchInfo","content","trustAsHtml","scratchInfo","background-color","background_color","share","title","name","desc","share_desc","imgUrl","share_img_url","link","location","href","getAward","myPopup","template","scope","buttons","text","onTap","then","res","console","log","scratchReward","getQueryString","myCashed","alert","errmsg","updateMyInfo","subTitle","scratchSavePersonInfo","id","updateTime","dtime","nowTime","Date","getTime","myStartTime","reg","RegExp","r","search","substr","match","unescape","setScratchCard","canvasfg","isstart","getResult","percent","getdata","isAward","allload","loadimg","url","resolve","reject","img","src","onload","awardurl","method","success","status","headers","config","awardName","error","myAwardGameOver","currActivityId","img1","img_url","img2","img3","all","isSubmitInfo","$inject","controller","filter","runBlock","$log","debug","run","routerConfig","$stateProvider","$urlRouterProvider","state","templateUrl","controllerAs","otherwise","constant","uri","wxdebug","$logProvider","debugEnabled","$templateCache","put"],"mappings":"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","file":"scripts/app-690e8ceb48.js","sourcesContent":["(function ($) {\n  'use strict';\n\n  function ScratchPad(el, options) {\n    this.$el = $(el);\n    this.options = options;\n\n    this.init = false;\n    this.enabled = true;\n\n    this._generate();\n  }\n\n  ScratchPad.prototype = {\n    _generate: function () {\n\n      // Throw message if canvas is not supported.\n      if (!$.support.canvas) {\n        this.$el.append('Canvas is not supported in this browser.');\n        return true;\n      }\n\n      // Setup canvas and context.\n      this.canvas = document.createElement('canvas');\n      this.ctx = this.canvas.getContext('2d');\n\n      // Make sure it's at least relative.\n      if (this.$el.css('position') === 'static') {\n        this.$el.css('position', 'relative');\n      }\n\n      this.$img = $('<img src=\"\"/>').attr('crossOrigin', '').css({position: 'absolute', width: '100%', height: '100%'});\n\n      // Make sure we sett style width height here for elastic stretch\n      // and better support for mobile if we are resizing the scratch pad.\n      this.$scratchpad = $(this.canvas).css({position: 'absolute', width: '100%', height: '100%'});\n      \n      this.$scratchpad.bindMobileEvents();\n\n      // Setup event handlers.\n      this.$scratchpad\n      .mousedown($.proxy(function (e) {\n\n        // If disabled we just return true which menas\n        // our our this.scratch will remain as false.\n        if (!this.enabled) {\n          return true;\n        }\n\n        this.canvasOffset = $(this.canvas).offset();\n        \n        this.scratch = true;\n        this._scratchFunc(e, 'Down');\n      }, this))\n      .mousemove($.proxy(function (e) {\n        if (this.scratch) {\n          this._scratchFunc(e, 'Move');\n        }\n      }, this))\n      .mouseup($.proxy(function (e) {\n        if (this.scratch) {\n          this.scratch = false;\n          this._scratchFunc(e, 'Up');\n        }\n      }, this));\n\n      // Run options\n      this._setOptions();\n\n      // Apepnd items\n      this.$el.append(this.$img).append(this.$scratchpad);\n\n      // Initialize and reset\n      this.init = true;\n      this.reset();\n    },\n\n    reset: function () {\n      var _this = this,\n          width = Math.ceil(this.$el.innerWidth()),\n          height = Math.ceil(this.$el.innerHeight()),\n          devicePixelRatio = window.devicePixelRatio || 1;\n\n      // Set number of pixels required for getting scratch percentage.\n      this.pixels = width * height;\n\n      // We'll do a hard reset for the height here in case\n      // we need to run this at differnt sizes.\n      this.$scratchpad.attr('width', width).attr('height', height);\n\n      this.canvas.setAttribute('width', width * devicePixelRatio);\n      this.canvas.setAttribute('height', height * devicePixelRatio);\n      this.ctx.scale(devicePixelRatio, devicePixelRatio);\n\n      this.pixels = width * devicePixelRatio * height * devicePixelRatio;\n\n      // Default to image hidden in case no bg or color is set.\n      this.$img.hide();\n\n      // Set bg.\n      if (this.options.bg) {\n        if (this.options.bg.charAt(0) === '#') {\n          this.$el.css('backgroundColor', this.options.bg);\n        }\n        else {\n          this.$el.css('backgroundColor', '');\n          this.$img.attr('src', this.options.bg);\n        }\n      }\n\n      // Set fg.\n      if (this.options.fg) {\n        if (this.options.fg.charAt(0) === '#') {\n          this.ctx.fillStyle = this.options.fg;\n          this.ctx.beginPath();\n          this.ctx.rect(0, 0, width, height);\n          this.ctx.fill();\n          this.$img.show();\n        }\n        else {\n          // Have to load image before we can use it.\n          $(new Image())\n          .attr('src', this.options.fg)\n          .load(function () {\n            _this.ctx.drawImage(this, 0, 0, width, height);\n            _this.$img.show();\n          });\n        }\n      }\n    },\n\n    clear: function () {\n      this.ctx.clearRect(0, 0, Math.ceil(this.$el.innerWidth()), Math.ceil(this.$el.innerHeight()));\n    },\n\n    enable: function (enabled) {\n      this.enabled = enabled === true ? true : false;\n    },\n\n    destroy: function () {\n      this.$el.children().remove();\n      $.removeData(this.$el, 'wScratchPad');\n    },\n\n    _setOptions: function () {\n      var opt, func;\n\n      for (opt in this.options) {\n        this.options[opt] = this.$el.attr('data-' + opt) || this.options[opt];\n        func = 'set' + opt.charAt(0).toUpperCase() + opt.substring(1);\n\n        if (this[func]) {\n          this[func](this.options[opt]);\n        }\n      }\n    },\n\n    setBg: function () {\n      if (this.init) {\n        this.reset();\n      }\n    },\n\n    setFg: function () {\n      this.setBg();\n    },\n\n    setCursor: function (cursor) {\n      this.$el.css('cursor', cursor);\n    },\n\n    _scratchFunc: function (e, event) {\n      e.pageX = Math.floor(e.pageX - this.canvasOffset.left);\n      e.pageY = Math.floor(e.pageY - this.canvasOffset.top);\n      \n      this['_scratch' + event](e);\n      \n      if (this.options.realtime || event === 'Up') {\n        if (this.options['scratch' + event]) {\n          this.options['scratch' + event].apply(this, [e, this._scratchPercent()]);\n        }\n      }\n    },\n\n    _scratchPercent: function() {\n      var hits = 0,\n          imageData = this.ctx.getImageData(0,0, this.canvas.width, this.canvas.height);\n      \n      for (var i=0, ii=imageData.data.length; i<ii; i=i+4) {\n        if (imageData.data[i] === 0 && imageData.data[i+1] === 0 && imageData.data[i+2] === 0 && imageData.data[i+3] === 0) {\n          hits++;\n        }\n      }\n      \n      return (hits / this.pixels) * 100;\n    },\n\n    _scratchDown: function (e) {\n      this.ctx.globalCompositeOperation = 'destination-out';\n      this.ctx.lineJoin = 'round';\n      this.ctx.lineCap = 'round';\n      this.ctx.strokeStyle = this.options.color;\n      this.ctx.lineWidth = this.options.size;\n      \n      //draw single dot in case of a click without a move\n      this.ctx.beginPath();\n      this.ctx.arc(e.pageX, e.pageY, this.options.size/2, 0, Math.PI*2, true);\n      this.ctx.closePath();\n      this.ctx.fill();\n      \n      //start the path for a drag\n      this.ctx.beginPath();\n      this.ctx.moveTo(e.pageX, e.pageY);\n    },\n    \n    _scratchMove: function (e) {\n      this.ctx.lineTo(e.pageX, e.pageY);\n      this.ctx.stroke();\n    },\n    \n    _scratchUp: function () {\n      this.ctx.closePath();\n    }\n  };\n\n  $.support.canvas = (document.createElement('canvas')).getContext;\n\n  $.fn.wScratchPad = function (options, value) {\n    function get() {\n      var wScratchPad = $.data(this, 'wScratchPad');\n\n      if (!wScratchPad) {\n        wScratchPad = new ScratchPad(this, $.extend(true, {}, options));\n        $.data(this, 'wScratchPad', wScratchPad);\n      }\n\n      return wScratchPad;\n    }\n\n    if (typeof options === 'string') {\n      var wScratchPad,\n          values = [],\n          func = (value !== undefined ? 'set' : 'get') + options.charAt(0).toUpperCase() + options.substring(1),\n\n          setOpt = function () {\n            if (wScratchPad.options[options]) { wScratchPad.options[options] = value; }\n            if (wScratchPad[func]) { wScratchPad[func].apply(wScratchPad, [value]); }\n          },\n\n          getOpt = function () {\n            if (wScratchPad[func]) { return wScratchPad[func].apply(wScratchPad, [value]); }\n            else if (wScratchPad.options[options]) { return wScratchPad.options[options]; }\n            else { return undefined; }\n          },\n\n          runOpt = function () {\n            wScratchPad = $.data(this, 'wScratchPad');\n\n            if (wScratchPad) {\n              if (wScratchPad[options]) { wScratchPad[options].apply(wScratchPad, [value]); }\n              else if (value !== undefined) { setOpt(); }\n              else {  values.push(getOpt()); }\n            }\n          };\n\n      this.each(runOpt);\n\n      return values.length ? (values.length === 1 ? values[0] : values) : this;\n    }\n\n    options = $.extend({}, $.fn.wScratchPad.defaults, options);\n\n    return this.each(get);\n  };\n\n  $.fn.wScratchPad.defaults = {\n    size        : 5,          // The size of the brush/scratch.\n    bg          : '#cacaca',  // Background (image path or hex color).\n    fg          : '#6699ff',  // Foreground (image path or hex color).\n    realtime    : true,       // Calculates percentage in realitime\n    scratchDown : null,       // Set scratchDown callback.\n    scratchUp   : null,       // Set scratchUp callback.\n    scratchMove : null,       // Set scratcMove callback.\n    cursor      : 'crosshair' // Set cursor.\n  };\n\n  $.fn.bindMobileEvents = function () {\n    $(this).on('touchstart touchmove touchend touchcancel', function (event) {\n      var touches = (event.changedTouches || event.originalEvent.targetTouches),\n          first = touches[0],\n          type = '';\n\n      switch (event.type) {\n      case 'touchstart':\n        type = 'mousedown';\n        break;\n      case 'touchmove':\n        type = 'mousemove';\n        event.preventDefault();\n        break;\n      case 'touchend':\n        type = 'mouseup';\n        break;\n      default:\n        return;\n      }\n\n      var simulatedEvent = document.createEvent('MouseEvent'); \n\n      simulatedEvent.initMouseEvent(\n        type, true, true, window, 1, \n        first.screenX, first.screenY, first.clientX, first.clientY, \n        false, false, false, false, 0/*left*/, null\n      );\n\n      first.target.dispatchEvent(simulatedEvent);\n    });\n  };\n})(jQuery);\n(function() {\n  'use strict';\n\n  angular\n    .module('scratchCard', ['ngAnimate', 'ngTouch', 'ngSanitize', 'ngMessages', 'ngAria', 'ui.router', 'clientapi']);\n\n})();\n\n(function() {\n  'use strict';\n  angular\n    .module('scratchCard')\n    .controller('MainController', MainController)\n    .filter(\"countDown\",countDown);\n\n    function countDown(){\n      return function(leftsecond){\n\n        var leftsecond=parseInt(leftsecond)/1000;\n        var day=Math.floor(leftsecond/(60*60*24));\n        var hour=Math.floor((leftsecond-day*24*60*60)/3600);\n        var minute=Math.floor((leftsecond-day*24*60*60-hour*3600)/60);\n        var second=Math.floor(leftsecond-day*24*60*60-hour*3600-minute*60);\n        if(day>0){\n          return day+\"天\";\n        }else{\n          if(hour<10){\n            hour=\"0\"+hour;\n          }\n          if(minute<10){\n            minute=\"0\"+minute;\n          }\n          if(second<10){\n            second=\"0\"+second;\n          }\n          return hour+\":\"+minute+\":\"+second;\n        }\n      }\n    }\n\n  /** @ngInject */\n  function MainController($scope,$http,$timeout,scratchCardStatus,wPopup,wxAPI,nAPI,$q,$filter,wLoading,DEBUG,$sce) {\n    //前景图加载完成前默认是隐藏刮刮卡  领奖按钮的\n    wLoading.show(\"加载中...\")\n    var vm = this;\n    //刮奖是否结束\n    vm.myAwardGameOver=scratchCardStatus.myAwardGameOver;\n    //刮奖开始时间\n    vm.myStartTime=(new Date(scratchCardStatus.myStartTime)).getTime();\n    //刮奖状态   undefined 未刮奖   false 已刮(未中奖)   true已刮(中奖)\n    vm.myIsAward=scratchCardStatus.myIsAward;\n    //中奖名称\n    vm.myAwardName=scratchCardStatus.myAwardName;\n    //是否领奖\n    vm.myCashed=scratchCardStatus.myCashed;\n    //领奖方式  1没按钮 2有按钮  3要提交信息\n    vm.myPageCash=0;\n    //当前时间\n    vm.nowTime=(new Date()).getTime()\n    //是否已经刮图   为false时可以调用抽奖接口\n    vm.isstart = false;\n    //刮奖前景图  就是被刮的那层\n    vm.canvasfg=\"assets/images/fg.png\";\n    //刮奖背景图\n    vm.canvasbg=\"#fff\";\n    //剩下百分比  自动清除前景图\n    vm.percent=55;\n    //领奖\n    vm.getAward=getAward;\n    //完善资料\n    vm.updateMyInfo=updateMyInfo;\n    //用户信息\n    vm.userInfo = {\n      user_truename: \"\",\n      user_phone: \"\"\n    };\n\n    vm.currActivityId = getQueryString(\"id\");\n\n    //活动已结束\n    if(vm.myAwardGameOver){\n      vm.isstart = true;\n      vm.canvasfg=\"\";\n      vm.myAwardName=\"对不起,活动已结束！\";\n    }else if(vm.nowTime<vm.myStartTime){\n      //活动未开始\n      $filter\n      updateTime();\n    }else if(typeof vm.myIsAward===\"boolean\"){\n      //已经刮过奖\n      setCardStyle()\n      //前景图为刮过一部分的图片\n      vm.canvasfg=\"assets/images/fg2.png\";\n      //刮图 时不调用抽奖接口\n      vm.isstart = true;\n      vm.percent=100\n    }\n\n    //获取抽奖相关信息\n    nAPI.scratchInfo(vm.currActivityId)\n    .then(function(data){\n      //处理信息\n      dealScratchInfo(data)\n      //预加载图片  头图加载完隐藏 loading提示\n      var img1=loadimg(data.img_url)\n      .then(function(){\n        wLoading.hide();\n      })\n      var img2=loadimg('assets/images/fg.png')\n      var img3=loadimg('assets/images/fg2.png')\n      return $q.all([img1,img2,img3])\n    })\n    .then(function(){\n      //前景图加载完 设置刮刮乐\n      setScratchCard();\n      //myPageCash===3 要求获取用户信息再领奖的话  此处检测用户信息\n      if(scratchCardStatus.myPageCash===3){\n        if(scratchCardStatus.isSubmitInfo){\n          return true;\n        }else{\n          return nAPI.userInfo();\n        }\n      }else{\n        return undefined;\n      }\n    })\n    .then(function(userInfo){\n      //处理用户信息 显示相关按钮\n      dealUserInfo(userInfo)\n    })\n    .catch(function(data){\n      // console.log('====',data)\n      if(DEBUG){vm.myPageCash=3;} //========================测试专用 请注释,但勿删========================\n      wPopup.alert(data.errmsg);\n    });\n\n\n    function dealUserInfo(userInfo){\n      if(typeof userInfo === 'undefined'){\n        //没有调用户信息接口 说明myPageCash!=3  那就直接设置默认myPageCash值\n        vm.myPageCash=scratchCardStatus.myPageCash;\n      }else if(typeof userInfo === 'boolean'&&userInfo){\n        //已填信息  直接显示领奖按钮\n        vm.myPageCash=2;\n      }else if(userInfo.truename||userInfo.phone){\n        //更新用户信息\n        vm.userInfo.user_truename=userInfo.truename;\n        vm.userInfo.user_phone=userInfo.phone;\n        //设置myPageCash\n        vm.myPageCash=scratchCardStatus.myPageCash;\n      }else{\n        vm.myPageCash=scratchCardStatus.myPageCash;\n      }\n    }\n\n\n    function setCardStyle(){\n      //是否中奖  bg为中奖背景图\n      if(vm.myIsAward){\n        vm.canvasbg=\"assets/images/bg.png\";\n        //由于bg 背景图的关系  调整奖品名字上下间距  字看起才居中\n        angular.element(\".maincanvas h2\").css({\"padding-top\":'16%'})\n      }else{\n        // bg2为未中奖背景图,上面有未中奖提示语，所以要清空vm.myAwardName   myAwardName原本是“谢谢参与”\n        vm.canvasbg=\"assets/images/bg2.png\";\n        //没中奖直接显示图片  不用设置奖项\n        vm.myAwardName=\"\";\n      }\n    }\n\n    function dealScratchInfo(data){\n      data.content = $sce.trustAsHtml(data.content);\n      vm.scratchInfo=data;\n      angular.element(\"body\").css({\"background-color\":data.background_color})\n      wxAPI.share({\n        title: data.name,\n        desc: data.share_desc,\n        imgUrl: data.share_img_url,\n        link: window.location.href,\n      })\n    }\n\n\n    function getAward(){\n      var myPopup = wPopup.show({\n        title: '请注意！',\n        template: '点击“领奖”即视为已领奖，将无法再到服务台领取奖品',\n        scope: $scope,\n        buttons: [{\n          text: '<b>领奖</b><br><span style=\"font-size:12px\">(客服专用,慎点!)</span>',\n          onTap: function(e) {\n            return true;\n          }\n        }, {\n          text: '<b>赶紧离开</b>',\n          type: 'button-assertive',\n        }]\n      });\n      //点直接领奖后 调用兑奖接口\n      myPopup.then(function(res) {\n        if(res){\n          console.log(nAPI)\n          nAPI.scratchReward(getQueryString(\"id\"))\n          .then(function(data){\n            // 更新领奖状态\n            vm.myCashed=true;\n          })\n          .catch(function(data){\n            console.log(data)\n            wPopup.alert(data.errmsg);\n          });\n        }\n      });\n    }\n\n    function updateMyInfo(){\n      $scope.userInfo=vm.userInfo;\n      var myPopup = wPopup.show({\n        template: '<input type=\"text\" ng-model=\"userInfo.user_truename\" placeholder=\"姓名\"><input type=\"tel\" ng-model=\"userInfo.user_phone\" placeholder=\"手机\">',\n        title: '请输入姓名跟手机',\n        subTitle: '录入信息即可领奖',\n        scope: $scope,\n        buttons: [{\n          text: '取消'\n        }, {\n          text: '<b>提交</b>',\n          type: 'button-assertive',\n          onTap: function(e) {\n            if (!$scope.userInfo.user_truename||!$scope.userInfo.user_phone) {\n              //don't allow the user to close unless he enters wifi password\n              console.log(e)\n              wPopup.alert('姓名或手机没有填写');\n              e.preventDefault();\n            } else {\n              return $scope.userInfo;\n            }\n          }\n        }]\n      });\n\n      myPopup.then(function(res) {\n        //更新用户信息\n        if (!res) return\n        // if(DEBUG){vm.myPageCash = 2;return;}//========================测试专用 请注释,但勿删======================\n        // nAPI.userUpdate(res)\n          nAPI.scratchSavePersonInfo({\n            id:getQueryString(\"id\"),\n            name:res.user_truename,\n            phone:res.user_phone,\n          })\n          .then(function(data) {\n            console.log('data',data)\n            //显示领奖按钮\n            vm.myPageCash = 2;\n          })\n          .catch(function(data) {\n            console.log(data)\n            wPopup.alert(data.errmsg);\n          })\n\n      })\n    }\n\n    function updateTime(){\n      if(vm.dtime<=1000) return;\n      vm.nowTime=(new Date()).getTime()\n      vm.dtime=vm.myStartTime-vm.nowTime;\n      $timeout(function(){\n        updateTime()\n      },1000)\n    }\n\n\n    //取url参数\n    function getQueryString(name) {\n      var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\");\n      var r = window.location.search.substr(1).match(reg);\n      if (r != null) return unescape(r[2]); return null;\n    }\n\n\n    function setScratchCard(){\n      angular.element('.maincanvas').css({\"height\":angular.element('.maincanvas').width()/2.8}).wScratchPad({\n        size: 20, // The size of the brush/scratch.\n        bg: vm.canvasbg, // Background (image path or hex color).\n        fg: vm.canvasfg, // Foreground (image path or hex color).\n        realtime: true, // Calculates percentage in realitime.\n        scratchUp: null, // Set scratchUp callback.\n        cursor: 'crosshair', // Set cursor.\n        scratchDown: function() {\n          if (vm.isstart) return\n          vm.isstart = true;\n          getResult();\n        },\n        scratchMove: function(e, percent) {\n          if (percent > vm.percent) {\n            this.clear();\n            //如果是即时刮奖的  刮完将更新页面的领奖按钮\n            if(vm.myIsAward===\"boolean\"){\n              return;\n            }else{\n              $timeout(function(data){\n                vm.myIsAward=vm.getdata.isAward;\n              })\n            }\n          }\n        }\n      });\n      //显示刮刮卡\n      vm.allload=true;\n    }\n\n    function loadimg(url){\n      return $q(function(resolve,reject){\n        var img = new Image();\n        img.src = url;\n        img.onload = function() { //图片下载完毕时异步调用callback函数。\n          resolve(img); // 将callback函数this指针切换为img。\n        };\n      })\n    }\n\n    function getResult(){\n      //获奖数据接口\n      vm.awardurl=\"/serv/awardapi.ashx?action=scratch&id=\"+getQueryString(\"id\")\n      if(DEBUG){\n        vm.awardurl=\"http://localhost:28241/serv/awardapi.ashx?action=scratch&id=\"+getQueryString(\"id\")//\"assets/main.json\"; //========================测试专用========================\n      }\n      $http({\n        method: 'get',\n        url: vm.awardurl\n      }).success(function(data, status, headers, config) {\n        vm.getdata=data;\n        vm.myAwardName=data.awardName;\n        // console.dir(data)\n        // setAward(data.awardName)\n      }).error(function(data, status, headers, config) {\n        vm.myAwardName=\"抽奖失败，请刷新后重新抽奖\";\n      })\n    }\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('scratchCard')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock($log) {\n\n    $log.debug('runBlock end');\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('scratchCard')\n    .config(routerConfig);\n\n  /** @ngInject */\n  function routerConfig($stateProvider, $urlRouterProvider) {\n    $stateProvider\n      .state('home', {\n        url: '/',\n        templateUrl: 'app/main/main.html',\n        controller: 'MainController',\n        controllerAs: 'main'\n      });\n\n    $urlRouterProvider.otherwise('/');\n  }\n\n})();\n\n/* global malarkey:false, moment:false */\n(function() {\n  'use strict';\n  angular\n    .module('scratchCard')\n    .constant('DEBUG',false)\n    .constant('CLIENTAPI_CONFIG', {\n      uri: \"http://localhost:28241/\",\n      debug: false,\n      wxdebug: false,\n    })\n    // 全部信息\n    // .constant('scratchCardStatus', {\n    //   myAwardGameOver:false,//刮奖是否结束\n    //   myStartTime: \"2016-12-27 00:43:20\",\n    //   myIsAward: undefined,\n    //   myAwardName: \"二等奖\", //中奖名称\n    //   myCashed: false, //是否领奖\n    //   isSubmitInfo:true,\n    //   myPageCash: 1, //1没按钮 2有按钮  3要提交信息\n    // })\n\n    //已结束\n    // .constant('scratchCardStatus', {\n    //   myAwardGameOver:true,//刮奖是否结束\n    // })\n\n    // //未刮奖\n    .constant('scratchCardStatus', {\n      myAwardGameOver:false,//刮奖是否结束\n      myStartTime: \"2015-11-26 17:35:00\",\n      myPageCash: 3, //1没按钮 2有按钮  3要提交信息\n    })\n\n    // 已刮奖 未中奖\n    // .constant('scratchCardStatus', {\n    //   myAwardGameOver:false,//刮奖是否结束\n    //   myStartTime: \"2015-11-26 10:00:00\",\n    //   myIsAward: false,\n    //   myAwardName: \"谢谢参与\", //中奖名称\n    //   myCashed: false, //是否领奖\n    //   myPageCash: 1, //1没按钮 2有按钮  3要提交信息\n    // })\n\n    // 已刮奖 中奖\n    // .constant('scratchCardStatus', {\n    //   myAwardGameOver:false,//刮奖是否结束\n    //   myStartTime: \"2015-11-26 10:00:00\",\n    //   myIsAward: true,\n    //   myAwardName: \"二等奖\", //中奖名称\n    //   myCashed: false, //是否领奖\n    //   isSubmitInfo:false,\n    //   myPageCash: 2, //1没按钮 2有按钮  3要提交信息\n    // })\n\n    //已刮奖 已领奖\n    // .constant('scratchCardStatus', {\n    //   myAwardGameOver:false,//刮奖是否结束\n    //   myStartTime: \"2015-11-26 10:00:00\",\n    //   myIsAward: true,\n    //   myAwardName: \"二等奖\", //中奖名称\n    //   myCashed: true, //是否领奖\n    //   myPageCash: 2, //1没按钮 2有按钮  3要提交信息\n    // })\n\n    ;\n\n\n})();\n(function() {\n  'use strict';\n\n  angular\n    .module('scratchCard')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n  }\n\n})();\n\nangular.module(\"scratchCard\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/main/main.html\",\"<div class=\\\"mainbox\\\" style=\\\"\\\"><img class=\\\"mainlogo\\\" ng-src=\\\"{{main.scratchInfo.img_url}}\\\" alt=\\\"\\\"><div class=\\\"maincanvas\\\" ng-class=\\\"{\\'showit\\':main.allload}\\\"><h2 ng-bind=\\\"main.myAwardName\\\" ng-class=\\\"{cashed:main.myCashed}\\\"></h2><div class=\\\"gamenotstart\\\" ng-if=\\\"main.dtime>1000\\\" ng-bind=\\\"main.dtime | countDown\\\"></div></div><span ng-if=\\\"main.myPageCash==2&&main.myIsAward&&!main.myCashed\\\" class=\\\"cashbtn\\\" ng-click=\\\"main.getAward()\\\">领奖(非客服勿点)</span> <span ng-if=\\\"main.myPageCash==3&&main.myIsAward&&!main.myCashed\\\" class=\\\"cashbtn giveinfobtn\\\" ng-click=\\\"main.updateMyInfo()\\\">完善资料后才可领奖</span><div class=\\\"article container\\\" ng-bind-html=\\\"main.scratchInfo.content\\\"></div></div>\");}]);"],"sourceRoot":"/source/"}