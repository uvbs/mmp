!function(t){"use strict";function a(a,s){this.$el=t(a),this.options=s,this.init=!1,this.enabled=!0,this._generate()}a.prototype={_generate:function(){return t.support.canvas?(this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),"static"===this.$el.css("position")&&this.$el.css("position","relative"),this.$img=t('<img src=""/>').attr("crossOrigin","").css({position:"absolute",width:"100%",height:"100%"}),this.$scratchpad=t(this.canvas).css({position:"absolute",width:"100%",height:"100%"}),this.$scratchpad.bindMobileEvents(),this.$scratchpad.mousedown(t.proxy(function(a){return this.enabled?(this.canvasOffset=t(this.canvas).offset(),this.scratch=!0,void this._scratchFunc(a,"Down")):!0},this)).mousemove(t.proxy(function(t){this.scratch&&this._scratchFunc(t,"Move")},this)).mouseup(t.proxy(function(t){this.scratch&&(this.scratch=!1,this._scratchFunc(t,"Up"))},this)),this._setOptions(),this.$el.append(this.$img).append(this.$scratchpad),this.init=!0,void this.reset()):(this.$el.append("Canvas is not supported in this browser."),!0)},reset:function(){var a=this,s=Math.ceil(this.$el.innerWidth()),i=Math.ceil(this.$el.innerHeight()),e=window.devicePixelRatio||1;this.pixels=s*i,this.$scratchpad.attr("width",s).attr("height",i),this.canvas.setAttribute("width",s*e),this.canvas.setAttribute("height",i*e),this.ctx.scale(e,e),this.pixels=s*e*i*e,this.$img.hide(),this.options.bg&&("#"===this.options.bg.charAt(0)?this.$el.css("backgroundColor",this.options.bg):(this.$el.css("backgroundColor",""),this.$img.attr("src",this.options.bg))),this.options.fg&&("#"===this.options.fg.charAt(0)?(this.ctx.fillStyle=this.options.fg,this.ctx.beginPath(),this.ctx.rect(0,0,s,i),this.ctx.fill(),this.$img.show()):t(new Image).attr("src",this.options.fg).load(function(){a.ctx.drawImage(this,0,0,s,i),a.$img.show()}))},clear:function(){this.ctx.clearRect(0,0,Math.ceil(this.$el.innerWidth()),Math.ceil(this.$el.innerHeight()))},enable:function(t){this.enabled=t===!0?!0:!1},destroy:function(){this.$el.children().remove(),t.removeData(this.$el,"wScratchPad")},_setOptions:function(){var t,a;for(t in this.options)this.options[t]=this.$el.attr("data-"+t)||this.options[t],a="set"+t.charAt(0).toUpperCase()+t.substring(1),this[a]&&this[a](this.options[t])},setBg:function(){this.init&&this.reset()},setFg:function(){this.setBg()},setCursor:function(t){this.$el.css("cursor",t)},_scratchFunc:function(t,a){t.pageX=Math.floor(t.pageX-this.canvasOffset.left),t.pageY=Math.floor(t.pageY-this.canvasOffset.top),this["_scratch"+a](t),(this.options.realtime||"Up"===a)&&this.options["scratch"+a]&&this.options["scratch"+a].apply(this,[t,this._scratchPercent()])},_scratchPercent:function(){for(var t=0,a=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),s=0,i=a.data.length;i>s;s+=4)0===a.data[s]&&0===a.data[s+1]&&0===a.data[s+2]&&0===a.data[s+3]&&t++;return t/this.pixels*100},_scratchDown:function(t){this.ctx.globalCompositeOperation="destination-out",this.ctx.lineJoin="round",this.ctx.lineCap="round",this.ctx.strokeStyle=this.options.color,this.ctx.lineWidth=this.options.size,this.ctx.beginPath(),this.ctx.arc(t.pageX,t.pageY,this.options.size/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(t.pageX,t.pageY)},_scratchMove:function(t){this.ctx.lineTo(t.pageX,t.pageY),this.ctx.stroke()},_scratchUp:function(){this.ctx.closePath()}},t.support.canvas=document.createElement("canvas").getContext,t.fn.wScratchPad=function(s,i){function e(){var i=t.data(this,"wScratchPad");return i||(i=new a(this,t.extend(!0,{},s)),t.data(this,"wScratchPad",i)),i}if("string"==typeof s){var n,c=[],o=(void 0!==i?"set":"get")+s.charAt(0).toUpperCase()+s.substring(1),r=function(){n.options[s]&&(n.options[s]=i),n[o]&&n[o].apply(n,[i])},h=function(){return n[o]?n[o].apply(n,[i]):n.options[s]?n.options[s]:void 0},u=function(){n=t.data(this,"wScratchPad"),n&&(n[s]?n[s].apply(n,[i]):void 0!==i?r():c.push(h()))};return this.each(u),c.length?1===c.length?c[0]:c:this}return s=t.extend({},t.fn.wScratchPad.defaults,s),this.each(e)},t.fn.wScratchPad.defaults={size:5,bg:"#cacaca",fg:"#6699ff",realtime:!0,scratchDown:null,scratchUp:null,scratchMove:null,cursor:"crosshair"},t.fn.bindMobileEvents=function(){t(this).on("touchstart touchmove touchend touchcancel",function(t){var a=t.changedTouches||t.originalEvent.targetTouches,s=a[0],i="";switch(t.type){case"touchstart":i="mousedown";break;case"touchmove":i="mousemove",t.preventDefault();break;case"touchend":i="mouseup";break;default:return}var e=document.createEvent("MouseEvent");e.initMouseEvent(i,!0,!0,window,1,s.screenX,s.screenY,s.clientX,s.clientY,!1,!1,!1,!1,0,null),s.target.dispatchEvent(e)})}}(jQuery),function(){"use strict";angular.module("scratchCard",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ui.router","clientapi"])}(),function(){"use strict";function t(t,a,s){function i(){o.dtime<=0||(o.nowTime=(new Date).getTime(),o.dtime=o.myStartTime-o.nowTime,a(function(){i()},1e3))}function e(t,a){o.myAwardName=t,"boolean"==typeof myCashed&&myCashed&&c(".maincanvas h2").css({"background-image":"url(/assets/images/cashed.png)"}),"string"==typeof a&&c(".maincanvas h2").css({"padding-top":a})}function n(t){var a=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),s=window.location.search.substr(1).match(a);return null!=s?unescape(s[2]):null}var c=angular.element,o=this;o.myAwardGameOver=s.myAwardGameOver,o.myStartTime=new Date(s.myStartTime).getTime(),o.myIsAward=s.myIsAward,o.myAwardName=s.myAwardName,o.myCashed=s.myCashed,o.myPageCash=s.myPageCash,o.nowTime=(new Date).getTime(),o.isstart=!1,o.canvasfg="/assets/images/fg.png",o.canvasbg="#fff",o.percent=90,o.myAwardGameOver?(o.isstart=!0,o.canvasfg="",o.myAwardName="对不起,活动已结束！"):o.nowTime<o.myStartTime&&i(),"boolean"==typeof o.myIsAward&&(o.canvasbg=o.myIsAward?"/assets/images/bg.png":"/assets/images/bg2.png",o.canvasfg="/assets/images/fg2.png",o.isstart=!0,o.percent=100);c(".maincanvas").css({height:c(".maincanvas").width()/2.8}).wScratchPad({size:20,bg:o.canvasbg,fg:o.canvasfg,realtime:!0,scratchUp:null,cursor:"crosshair",scratchDown:function(){o.isstart||(o.isstart=!0,location.host.match("localhost")||location.host.match("192.168.1")?o.awardurl="/assets/main.json":o.awardurl="/serv/awardapi.ashx?action=scratch&id="+n("id"),t({method:"get",url:o.awardurl}).success(function(t,a,s,i){o.getdata=t,o.myAwardName=t.awardName}).error(function(t,a,s,i){e("抽奖失败，请刷新后重新抽奖")}))},scratchMove:function(t,s){if(s>o.percent){if(this.clear(),"boolean"===o.myIsAward)return;a(function(){o.myIsAward=o.getdata.isAward})}}})}angular.module("scratchCard").controller("MainController",t),t.$inject=["$http","$timeout","scratchCardStatus"]}(),function(){"use strict";function t(t){t.debug("runBlock end")}angular.module("scratchCard").run(t),t.$inject=["$log"]}(),function(){"use strict";function t(t,a){t.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}),a.otherwise("/")}angular.module("scratchCard").config(t),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";angular.module("scratchCard").constant("scratchCardStatus",{myAwardGameOver:!1,myStartTime:"2015-11-26 17:35:00",myPageCash:3})}(),function(){"use strict";function t(t){t.debugEnabled(!0)}angular.module("scratchCard").config(t),t.$inject=["$logProvider"]}(),angular.module("scratchCard").run(["$templateCache",function(t){t.put("app/main/main.html",'<div class="mainbox" style=""><img class="mainlogo" src="/assets/images/logo.png" alt=""><div class="maincanvas"><h2 ng-bind="main.myAwardName"></h2><div class="gamenotstart" ng-if="main.dtime>0" ng-bind="main.dtime | date:\'HH:mm:ss\'"></div></div><span ng-if="main.myPageCash==2&&main.myIsAward" class="cashbtn">领奖(非客服勿点)</span> <span ng-if="main.myPageCash==3&&main.myIsAward" class="cashbtn">完善资料后才可领奖</span><div class="article container"><h2>活动简介</h2><p>Makapuu Point（玛卡普吾）位于夏威夷欧胡岛最东端，是岛上一个热门的远足、登高望远之地。海崖上耸立着一座灯塔Makapuu Point Lighthouse，该灯塔建于1909 ，并在1974年改造安装了一个世界上最大的自动化菲涅耳透鏡。通过1.3英里长的Makapuu Point Lighthouse Trail便可到达Makapuu Point的最顶端，该Trail为沥青路面，路况良好，也非常的平缓，所以难度系数较低，推着婴儿车爬山的人大有所在。 一路上除了可以欣赏到欧胡岛东部特殊的地质地貌外，在天气晴好能见度较高时，还可以远眺摩洛凯岛（Molokai）和拉奈岛（Lanai），它们均是夏威夷的主要岛屿。当然每年的十二月至次年五月，这里也是一个绝佳的观鲸地点。登顶之后，向风海岸（Windward Coast）极致美景也会尽收眼底。通往灯塔那段悬崖边的路是封闭的，不可前往。山顶上还有许多残留的碉堡等军事遗迹，这片土地也属于美国海岸警卫队所有。 在Makapuu Lighthouse Rd的尽头有一个停车场，不过通常情况车位都是满的，特别是在周末和节假日Makapuu Lighthouse Rd那几百米长的路两边也会停满的车，有时甚至连紧邻的Kalanianaole Hwy路两边也会停满的车。如果在Hwy路边停车一定要注意安全，经过的车辆车速都较快。</p></div></div>')}]);
//# sourceMappingURL=../maps/scripts/app-22e65bda91.js.map
