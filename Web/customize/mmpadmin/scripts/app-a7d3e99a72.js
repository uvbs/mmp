!function(){"use strict";angular.module("mmpadmin",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngStorage","ui.router","ui.bootstrap","ZAFW"],["$httpProvider",function(e){e.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8",e.defaults.headers.put["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8";var t=function(e){var a,o,s,i,l,r,n,d="";for(a in e)if(o=e[a],o instanceof Array)for(n=0;n<o.length;n++)l=o[n],s=a+"["+n+"]",r={},r[s]=l,d+=t(r)+"&";else if(o instanceof Object)for(i in o)l=o[i],s=a+"["+i+"]",r={},r[s]=l,d+=t(r)+"&";else void 0!==o&&null!==o&&(d+=encodeURIComponent(a)+"="+encodeURIComponent(o)+"&");return d.length?d.substr(0,d.length-1):d};e.defaults.transformRequest=[function(e){return angular.isObject(e)&&"[object File]"!==String(e)?t(e):e}]}])}(),function(){"use strict";function e(e,t,a,o,s){e.sortsData=[{name:"默认排序",type:""},{name:"按照时间降序",type:"time_desc"},{name:"按照时间升序",type:"time_asc"},{name:"按照排名降序",type:"rank_desc"},{name:"按照排名升序",type:"rank_asc"}];for(var i in e.sortsData)e.sortsData[i].type==t.sortID&&(e.sortType=e.sortsData[i]);if(e.statusData=[{name:"全部",type:""},{name:"审核中",type:0},{name:"审核通过",type:1},{name:"审核不通过",type:2}],""===t.statusID)e.statusType=e.statusData[0];else for(var i in e.statusData)e.statusData[i].type===parseInt(t.statusID)&&(e.statusType=e.statusData[i]);e.whichSortBtn=function(t){e.sort=""!=t.type?t.type:"",e.currentPage=1,e.voteListdata=[],s.go("index.voteObjList",{pageID:e.currentPage,sortID:e.sort})},e.whichStatusBtn=function(t){e.vote_object_status=""!==t.type?t.type:"",e.currentPage=1,e.voteListdata=[],s.go("index.voteObjList",{pageID:e.currentPage,statusID:e.vote_object_status})},e.voteID=t.voteID,o.getVoteObjList({vote_id:e.voteID,pageindex:1,pagesize:1,keyword:"",sort:"",vote_object_status:""},function(i){function l(){o.getVoteObjList({vote_id:e.voteID,pageindex:e.currentPage,pagesize:e.pagesize,keyword:e.keyword,sort:e.sort,vote_object_status:e.vote_object_status},function(t){e.voteListdata=t.returnObj.list,e.totals=t.returnObj.totalcount},function(e){console.log(e)})}function r(){o.deleteVoteObj({vote_object_ids:e.ids},function(t){if(console.log(t),0==t.errcode){var o="友情提示",s="删除成功";a(o,s),e.selectedall=!1,l()}else a(t.errcode,t.errmsg)},function(e){console.log(e)})}console.log(i),e.totals=i.returnObj.totalcount,e.currentPage=""==t.pageID||void 0==t.pageID?1:parseInt(t.pageID),e.keyword=""==t.keyID||void 0==t.keyID?"":t.keyID,console.log(t.sortID),e.sort=""==t.sortID||void 0==t.sortID?"":t.sortID,e.vote_object_status=""==t.statusID||void 0==t.statusID?"":parseInt(t.statusID),e.pagesize=10,e.voteListdata=[],l(),e.ctrlsearch=function(t){console.log(["点击回车",t]),console.log(e.keyword);var a=window.event?t.keyCode:t.which;13===a&&(e.currentPage=1,e.voteListdata=[],s.go("index.voteObjList",{pageID:e.currentPage,keyID:e.keyword}))},e.delallproductBtn=function(){if(""!=e.ids)e.ids=e.ids.substring(e.ids,e.ids.length-1),console.log(["$scope.ids",e.ids]),r();else{var t="友情提示",o="至少选择一个投票对象";a(t,o)}},e.delproductBtn=function(t){e.ids=t.vote_oject_id,r()},e.selectme=function(t){t.selected=!t.selected,console.log(t.selected);var a=!0;e.voteListdata.filter(function(e){e.selected||(a=!1)}),e.selectedall=a,t.selected?(e.ids+=t.vote_oject_id+",",console.log(e.ids)):(e.ids=e.ids.replace(t.vote_oject_id+",",""),console.log(e.ids))},e.selectedall=!1,e.ids="",e.checkedall=function(){e.selectedall=!e.selectedall,e.ids="",angular.forEach(e.voteListdata,function(t){t.selected=e.selectedall,e.selectedall?(e.ids+=t.vote_oject_id+",",console.log(["$scope.ids",e.ids])):(e.ids="",console.log(["$scope.ids",e.ids]))})},e.addcardcouponBtn=function(){e.isAddcard=!0,e.showPicDom=!0,$("#dealModal").modal("show"),e.addOneNav=e.addNavLists[0],pageData.navigation_link_type=e.addNavLists[0].navigation_link_type,pageData.navigation_img="",pageData.navigation_name="",pageData.navigation_link="",pageData.navigation_sort="",document.onclick=function(t){var a=t.srcElement?t.srcElement:t.target;a.className.match("modal")&&a.className.match("inmodal")&&e.$apply(function(){pageData.navigation_img="",e.showPicDom=!1})}}},function(e){}),e.pageChanged=function(){console.log(e.currentPage),s.go("index.voteObjList",{pageID:e.currentPage})}}e.$inject=["$scope","$stateParams","alertbox","mmpadminAPI","$state"],angular.module("mmpadmin").controller("voteObjListCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i){o.getVoteList({pageindex:1,pagesize:1,keyword:""},function(l){function r(){o.getVoteList({pageindex:e.currentPage,pagesize:e.pagesize,keyword:e.keyword},function(t){e.voteListdata=t.returnObj.list,e.totals=t.returnObj.totalcount},function(e){console.log(e)})}function n(){i("友情提示","您确定删除众筹商品吗？","确定删除","取消删除",function(){e.ids=e.ids.toString(),","==e.ids.substring(e.ids.length-1,e.ids.length)&&(e.ids=e.ids.substring(e.ids,e.ids.length-1)),o.deleteVote({vote_ids:e.ids},function(t){if(console.log(t),0==t.errcode){e.ids="";var o="友情提示",s="删除成功";a(o,s),r()}else a(t.errcode,t.errmsg)},function(e){console.log(e)})},function(){})}console.log(l),e.totals=l.returnObj.totalcount,e.currentPage=""==t.pageID||void 0==t.pageID?1:parseInt(t.pageID),e.keyword=""==t.keyID||void 0==t.keyID?"":t.keyID,e.pagesize=10,e.voteListdata=[],r(),e.emptyLogBtn=function(e){console.log(e),o.emptyVoteLog({vote_id:e},function(e){console.log(e),0==e.errcode?a("友情提示","清空日志成功"):a(e.errcode,e.errmsg)})},e.delallproductBtn=function(){if(""!=e.ids)console.log(["$scope.ids",e.ids]),n();else{var t="友情提示",o="请至少选择一个投票";a(t,o)}},e.ctrlsearch=function(t){console.log(["点击回车",t]),console.log(e.keyword);var a=window.event?t.keyCode:t.which;13===a&&(e.currentPage=1,e.voteListdata=[],s.go("index.voteList",{pageID:e.currentPage,keyID:e.keyword}))},e.delproductBtn=function(t){e.ids=t.vote_id,n()},e.selectme=function(t){t.selected=!t.selected,console.log(t.selected);var a=!0;e.voteListdata.filter(function(e){e.selected||(a=!1)}),e.selectedall=a,t.selected?(e.ids+=t.vote_id+",",console.log(e.ids)):(e.ids=e.ids.replace(t.vote_id+",",""),console.log(e.ids))},e.selectedall=!1,e.ids="",e.checkedall=function(){e.selectedall=!e.selectedall,e.ids="",angular.forEach(e.voteListdata,function(t){t.selected=e.selectedall,e.selectedall?(e.ids+=t.vote_id+",",console.log(["$scope.ids",e.ids])):(e.ids="",console.log(["$scope.ids",e.ids]))})}},function(e){console.log(e)}),e.pageChanged=function(){console.log(e.currentPage),s.go("index.productList",{pageID:e.currentPage})}}e.$inject=["$scope","$stateParams","alertbox","mmpadminAPI","$state","alertconformbox"],angular.module("mmpadmin").controller("voteListCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i){e.pageData={};o.getVoteObjDetail({vote_object_id:t.voteObjID},function(t){console.log(t),e.pageData=t.returnObj}),i(function(){e.pageData.head_img_url=0!=e.pageData.show_img_list.length?e.pageData.show_img_list[0]:""},500),e.editVoteObjFunc=function(){return""==e.pageData.vote_object_name?void a("友情提示","请输入名称"):""==e.pageData.show_img_list||0==e.pageData.show_img_list.length?void a("友情提示","请上传展示图片"):(console.log(e.pageData),void o.editVoteObj({data:angular.toJson(e.pageData)},function(e){console.log(e),0==e.errcode?(a("友情提示","修改投票对象信息成功"),history.go(-1)):a(e.errcode,e.errmsg)}))}}e.$inject=["$scope","$stateParams","alertbox","mmpadminAPI","$state","$interval"],angular.module("mmpadmin").controller("editVoteObjCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i,l){console.log(t.voteID),o.getVoteDetail({vote_id:t.voteID},function(s){console.log(s.returnObj),e.voteDetail=s.returnObj;var r=e.infoData={vote_id:t.voteID,vote_name:s.returnObj.vote_name,vote_summary:s.returnObj.vote_summary,vote_img_url:[s.returnObj.vote_img_url],vote_status:s.returnObj.vote_status,vote_stop_time:l("date")(s.returnObj.vote_stop_time,"yyyy-MM-dd HH:mm"),vote_bottom_content:""};$(".summernote").summernote({lang:"zh-CN",callbacks:{onChange:function(){var e=$(".summernote").summernote("code");r.vote_bottom_content=e},onImageUpload:function(e){console.log(["image upload:",e]),console.log(["files[0]:",e[0]]);var t=new XMLHttpRequest;t.open("POST",i.mainsiteurl+"/serv/api/common/file.ashx?action=add",!0);var a=new FormData;for(var o in e)a.append("file",e[o]);t.send(a),t.onreadystatechange=function(e){if(4==t.readyState&&200==t.status){console.log(["responseText",JSON.parse(t.responseText)]);for(var a=JSON.parse(t.responseText),o="",s=0;s<a.file_url_list.length;s++){o="<img src="+a.file_url_list[s]+">";var i=$(o);$(".summernote").summernote("insertNode",i[0])}}}}}}),$(".summernote").summernote("code",e.voteDetail.vote_bottom_content),e.addVoteBtn=function(){if(""==r.vote_name)return void a("友情提示","请输入投票名称");if(""==r.vote_summary)return void a("友情提示","请输入投票描述");if(""==r.vote_img_url||r.vote_img_url==[])return void a("友情提示","请上传投票缩略图");if(""==r.vote_stop_time)return void a("友情提示","请输入投票停止时间");$(".summernote").summernote("isEmpty");return""==r.vote_bottom_content?void a("友情提示","请输入投票详情"):(r.vote_status=parseInt(r.vote_status),r.vote_img_url=r.vote_img_url[0],r.vote_stop_time=new Date(r.vote_stop_time).getTime(),console.log(angular.toJson(r)),void o.editVotedetail({data:angular.toJson(r)},function(e){console.log(e),1==e.isSuccess?(a("友情提示","修改投票信息成功"),history.go(-1)):a("友情提示",e.errmsg)}))}})}e.$inject=["$scope","$stateParams","alertbox","mmpadminAPI","$state","$rootScope","$filter"],angular.module("mmpadmin").controller("editVoteCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i){var l=e.pageData={vote_id:o.voteID,show_img_list:[]};i(function(){l.head_img_url=0!=l.show_img_list.length?l.show_img_list[0]:""},500),e.submitProductFunc=function(){return""==l.vote_object_name?void t("友情提示","请输入名称"):""==l.show_img_list||0==l.show_img_list.length?void t("友情提示","请上传展示图片"):void a.addVoteObj({data:angular.toJson(l)},function(e){console.log(e),0==e.errcode?(t("友情提示","添加投票对象成功"),s.go("index.voteObjList",{voteID:o.voteID})):t(e.errcode,e.errmsg)})}}e.$inject=["$scope","alertbox","mmpadminAPI","$stateParams","$state","$interval"],angular.module("mmpadmin").controller("addVoteObjCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i){var l=e.infoData={vote_name:"",vote_summary:"",vote_img_url:"",vote_status:1,vote_stop_time:"",vote_bottom_content:""};$(".summernote").summernote({lang:"zh-CN",callbacks:{onInit:function(){var e=$(".summernote").summernote("code");l.vote_bottom_content=e},onChange:function(){var e=$(".summernote").summernote("code");l.vote_bottom_content=e},onImageUpload:function(e){console.log(["image upload:",e]),console.log(["files[0]:",e[0]]);var t=new XMLHttpRequest;t.open("POST",i.mainsiteurl+"/serv/api/common/file.ashx?action=add",!0);var a=new FormData;for(var o in e)a.append("file",e[o]);t.send(a),t.onreadystatechange=function(e){if(4==t.readyState&&200==t.status){console.log(["responseText",JSON.parse(t.responseText)]);for(var a=JSON.parse(t.responseText),o="",s=0;s<a.file_url_list.length;s++){o="<img src="+a.file_url_list[s]+">";var i=$(o);$(".summernote").summernote("insertNode",i[0])}}}}}}),e.addVoteBtn=function(){if(""==l.vote_name)return void a("友情提示","请输入投票名称");if(""==l.vote_summary)return void a("友情提示","请输入投票描述");if(""==l.vote_img_url||l.vote_img_url==[])return void a("友情提示","请上传投票缩略图");if(""==l.vote_stop_time)return void a("友情提示","请输入投票停止时间");$(".summernote").summernote("isEmpty");return""==l.vote_bottom_content?void a("友情提示","请输入投票详情"):(l.vote_status=parseInt(l.vote_status),l.vote_img_url=l.vote_img_url[0],l.vote_stop_time=new Date(l.vote_stop_time).getTime(),console.log(angular.toJson(l)),void o.addVote({data:angular.toJson(l)},function(e){console.log(e),1==e.isSuccess?(a("友情提示","添加投票信息成功"),history.go(-1)):a("友情提示",e.errmsg)}))}}e.$inject=["$scope","$stateParams","alertbox","mmpadminAPI","$state","$rootScope"],angular.module("mmpadmin").controller("addVoteCtrl",e)}(),function(){"use strict";function e(e,t,a,o){var s=e.pageFunc={},i=e.pageData={currentPage:1,pagesize:5,keyword:"",dataList:[],selectedall:!1,ids:""};s.getUserClassList=function(){t.getUserClassList({pageindex:i.currentPage,pagesize:i.pagesize,keyword:i.keyword},function(e){console.log(e),e&&(i.dataList=e.list,i.totalItems=e.totalcount),console.log("用户等级列表",i.dataList)},function(e){console.log(e)})},s.articleDelete=function(){o("友情提示","确定要删除吗？","确定","取消",function(){t.delUserClass({level_ids:i.ids},function(e){0==e.errcode?(console.log("删除成功",e),i.ids="",s.getUserClassList()):(console.log("删除失败",e),a("友情提示",e.errmsg))},function(e){console.log(e),a("友情提示",e.errmsg)})},function(){})},s.deleteSelectedBtn=function(){if(""!=i.ids)","==i.ids.substring(i.ids.length-1,i.ids.length)&&(i.ids=i.ids.substring(i.ids,i.ids.length-1)),console.log(["pageData.ids",i.ids]),s.articleDelete();else{var e="友情提示",t="请至少选择一条需要删除的记录！";a(e,t)}},s.deleteSingleBtn=function(e){i.ids=e.level_id,s.articleDelete()},s.selectRecord=function(e){e.selected=!e.selected,console.log(e.selected);var t=!0;i.dataList.filter(function(e){e.selected||(t=!1)}),i.selectedall=t,e.selected?(i.ids+=e.level_id+",",console.log(i.ids)):(i.ids=i.ids.replace(e.level_id+",",""),console.log(i.ids))},s.selectAll=function(){i.selectedall=!i.selectedall,i.ids="",angular.forEach(i.dataList,function(e){e.selected=i.selectedall,i.selectedall?(i.ids+=e.level_id+",",console.log(["pageData.ids",i.ids])):(i.ids="",console.log(["pageData.ids",i.ids]))})},s.ctrlSearch=function(e){console.log(["点击回车",e]),console.log(i.keyword);var t=window.event?e.keyCode:e.which;13===t&&(i.currentPage=1,i.dataList=[],s.getUserClassList())},s.pageChanged=function(){console.log(i.currentPage),s.getUserClassList()},s.init=function(){s.getUserClassList()},s.init()}e.$inject=["$scope","mmpadminAPI","alertbox","alertconformbox"],angular.module("mmpadmin").controller("userclasslistCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s){var i=e.pageFunc={},l=e.pageData={userClassId:s.userClassId,img:"",userClassJson:{level_id:"",level_number:0,level_icon:"",level_string:"",level_fromhistory_score:0,level_tohistory_score:0}};i.addUserClass=function(){l.userClassJson.level_icon=l.img[0],t.addUserClass({data:angular.toJson(l.userClassJson)},function(e){0==e.errcode?(a("友情提示","添加用户等级成功"),history.go(-1)):a("友情提示",e.errmsg)},function(e){a("友情提示",e.errmsg)})},i.updateUserClass=function(){l.userClassJson.level_id=l.userClassId,l.userClassJson.level_icon=l.img[0],t.updateUserClass({data:angular.toJson(l.userClassJson)},function(e){0==e.errcode?(a("友情提示","修改用户等级成功"),history.go(-1)):a("友情提示",e.errmsg)},function(e){a("友情提示",e.errmsg)})},i.getUserClassDetail=function(){t.getUserClassDetail({level_id:l.userClassId},function(e){e?(console.log("获取单个用户等级成功",e),l.userClassJson=e,l.img=[e.level_icon]):a("友情提示",e.errmsg)},function(e){a("友情提示",e.errmsg)})},i.init=function(){"add"!=l.userClassId&&i.getUserClassDetail()},i.init()}e.$inject=["$scope","mmpadminAPI","alertbox","$state","$stateParams"],angular.module("mmpadmin").controller("userclasseditCtrl",e)}(),function(){"use strict";function e(e,t,a,o){var s=e.pageFunc={},i=e.pageData={userClassId:t.userClassId,userClassJson:{level_id:"",level_number:0,level_icon:"",level_string:"",level_fromhistory_score:0,level_tohistory_score:0}};s.getUserClassDetail=function(){o.getUserClassDetail({level_id:i.userClassId},function(e){e?(console.log("获取单个用户等级成功",e),i.userClassJson=e):a("友情提示",e.errmsg)},function(e){a("友情提示",e.errmsg)})},s.init=function(){s.getUserClassDetail()},s.init()}e.$inject=["$scope","$stateParams","alertbox","mmpadminAPI"],angular.module("mmpadmin").controller("userclassdetailCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i,l,r){i.appointmentList({pageindex:1,pagesize:1},function(t){function o(){i.appointmentList({pageindex:e.currentPage,pagesize:e.pagesize},function(t){e.totals=t.result.totalcount,e.trystData=t.result.list},function(e){console.log(e)})}console.log(t),e.totals=t.result.totalcount,e.currentPage=""==a.pageID||void 0==a.pageID?1:parseInt(a.pageID),e.pagesize=10,o(),e.pageChanged=function(){console.log(e.currentPage),r.go("index.trystList",{pageID:e.currentPage})}})}e.$inject=["$scope","$rootScope","$stateParams","alertselectbox","alertbox","mmpadminAPI","$filter","$state"],angular.module("mmpadmin").controller("trystListCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i,l,r){i.appointmentDetail({activity_id:t.trystID},function(t){console.log(t),t.result.publish_user.imgs=[],t.result.publish_user.avatar.indexOf(",")?t.result.publish_user.avatar=t.result.publish_user.avatar.split(","):t.result.publish_user.avatar[0]=t.result.publish_user.avatar;for(var a in t.result.publish_user.avatar)""==t.result.publish_user.avatar[a]||null==t.result.publish_user.avatar[a]||t.result.publish_user.imgs.push(t.result.publish_user.avatar[a]);e.trystDetailInfo=t.result})}e.$inject=["$scope","$stateParams","$rootScope","alertselectbox","alertbox","mmpadminAPI","$filter","$state"],angular.module("mmpadmin").controller("trystDetailCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s){a.getAccountList({pageindex:1,pagesize:1},function(i){function l(){a.getAccountList({pageindex:e.currentPage,pagesize:e.pagesize,keyword:e.keyword},function(t){console.log(t),e.totals=t.returnObj.totalcount,e.raisepros=t.returnObj.list},function(e){console.log(e)})}function r(){a.enableAccount({autoids:e.ids},function(a){if(console.log(a),0==a.errcode){e.ids="",e.selectedall=!1;var o="友情提示",s="禁用账号成功";t(o,s),l()}else t(a.errcode,a.errmsg)},function(e){console.log(e)})}function n(){a.activeAccount({autoids:e.ids},function(a){if(console.log(a),0==a.errcode){e.ids="",e.selectedall=!1;var o="友情提示",s="启用账号成功";t(o,s),l()}else t(a.errcode,a.errmsg)},function(e){console.log(e)})}e.totals=i.returnObj.totalcount,e.currentPage=""==o.pageID||void 0==o.pageID?1:parseInt(o.pageID),e.keyword=""==o.keyID||void 0==o.keyID?"":o.keyID,e.pagesize=10,l(),e.enableAccountBtn=function(){if(""!=e.ids)e.ids=e.ids.substring(e.ids,e.ids.length-1),console.log(["$scope.ids",e.ids]),r();else{var a="友情提示",o="请至少选择一个账号";t(a,o)}},e.activeAccountBtn=function(){if(""!=e.ids)e.ids=e.ids.substring(e.ids,e.ids.length-1),console.log(["$scope.ids",e.ids]),n();else{var a="友情提示",o="请至少选择一个账号";t(a,o)}},e.selectme=function(t){t.selected=!t.selected,console.log(t.selected);var a=!0;e.raisepros.filter(function(e){e.selected||(a=!1)}),e.selectedall=a,t.selected?(e.ids+=t.autoid+",",console.log(e.ids)):(e.ids=e.ids.replace(t.autoid+",",""),console.log(e.ids))},e.selectedall=!1,e.ids="",e.checkedall=function(){e.selectedall=!e.selectedall,e.ids="",angular.forEach(e.raisepros,function(t){t.selected=e.selectedall,e.selectedall?(e.ids+=t.autoid+",",console.log(["$scope.ids",e.ids])):(e.ids="",console.log(["$scope.ids",e.ids]))})},e.ctrlsearch=function(t){console.log(["点击回车",t]),console.log(e.keyword);var a=window.event?t.keyCode:t.which;13===a&&(e.currentPage=1,e.raisepros=[],s.go("index.accountList",{pageID:e.currentPage,keyID:e.keyword}))};var d=e.pageData={};e.addCountBtn=function(){d.user_id="",d.user_pwd="",d.isdelete="true",d.isexport="true",d.wx_head_img_url="",d.true_name="",d.user_company="",d.user_phone="",d.user_postion="",d.user_vote_count="",e.showPicDom=!0,e.isAddcard=!0,$("#dealModal").modal({backdrop:"static",keyboard:!1})},e.editcardcouponBtn=function(t){e.showPicDom=!0,e.isAddcard=!1,$("#dealModal").modal({backdrop:"static",keyboard:!1}),console.log(t),d.autoid=t.autoid,d.user_id=t.user_id,d.user_pwd=t.user_pwd,d.user_phone=t.user_phone,d.wx_head_img_url=[t.wx_head_img_url],d.true_name=t.true_name,d.user_company=t.user_company,d.user_postion=t.user_postion,d.user_vote_count=t.user_vote_count},document.onclick=function(t){var a=t.srcElement?t.srcElement:t.target;a.className.match("modal")&&a.className.match("inmodal")&&e.$apply(function(){d.wx_head_img_url="",e.showPicDom=!1})},e.addCouponBtn=function(){return console.log(d),""==d.user_id?void t("友情提示","请输入用户名"):""==d.user_pwd?void t("友情提示","请输入用户密码"):void 0==d.isdelete&&e.isAddcard?void t("友情提示","请选择是否可以删除数据"):void 0==d.isexport&&e.isAddcard?void t("友情提示","请选择是否可以导出数据"):(void 0!=d.wx_head_img_url&&""!=d.wx_head_img_url&&(d.wx_head_img_url=d.wx_head_img_url[0]),void(1==e.isAddcard?a.addAccount({data:angular.toJson(d)},function(a){console.log(a),0==a.errcode?(e.showPicDom=!1,t("友情提示","添加会员成功"),$("#dealModal").modal("hide"),l()):t(a.errcode,a.errmsg)}):(console.log(d),a.editAccount({data:angular.toJson(d)},function(a){console.log(a),0==a.errcode?(e.showPicDom=!1,t("友情提示","修改会员成功"),$("#dealModal").modal("hide"),l()):t(a.errcode,a.errmsg)},function(e){}))))}},function(e){console.log(e)}),e.pageChanged=function(){console.log(e.currentPage),s.go("index.accountList",{pageID:e.currentPage})},e.clear=function(){$("#dealModal").modal("hide"),pageData.autoid="",pageData.user_id="",pageData.user_pwd="",pageData.user_phone="",pageData.wx_head_img_url="",pageData.true_name="",pageData.user_company="",pageData.user_postion="",pageData.user_vote_count=0}}e.$inject=["$scope","alertbox","mmpadminAPI","$stateParams","$state"],angular.module("mmpadmin").controller("accountListCtrl",e)}(),function(){"use strict";function e(){var e=this;e.info="这是商品编辑页面",e.date="",e.date2="",e.alert=function(){}}angular.module("mmpadmin").controller("shopInfoCtrl",e)}(),function(){"use strict";function e(e,t,a,o){function s(){a.winnerList({page:d.currentPage,rows:d.pagesize,LotteryId:d.LotteryId,UserId:d.UserId,AwardId:0==d.award.AutoID?"":d.award.AutoID},function(e){console.log(e),d.shakeList=e.rows,d.totalItems=e.total})}function i(e){angular.forEach(d.shakeList,function(t){e.LotteryID!=t.LotteryId&&t.selected&&(t.selected=!1,d.shakeData=[])}),e.selected=!e.selected,d.shakeData=1==e.selected?e:[],console.log("数据",d.shakeData),console.log("爱我",e.selected)}function l(){return d.shakeData.length==[]?void o("友情提示","请选择一条记录进行操作"):void a.markHasReceive({ids:d.shakeData.AutoID},function(e){1==e.Status&&o("友情提示","操作成功")})}function r(){window.open("/Serv/API/Admin/Lottery/WinningData/Export.ashx?LotteryID="+d.LotteryId)}function n(){console.log(d.currentPage),s()}var d=this;d.currentPage=1,d.pagesize=10,d.totalItems=0,d.LotteryId=e.shakeId,d.UserId="",d.shakeList=[],d.shakeData=[],console.log("获奖记录",t.winnerrecord),d.first={AutoId:0,PrizeName:"全部"},void 0!=t.winnerrecord&&(d.awards=t.winnerrecord.Awards),d.award="",d.getWinnerRecord=s,d.selectme=i,d.markHasReceive=l,d.exportWinnerRecord=r,d.pageChanged=n,d.awards.unshift(d.first),d.award=d.awards[0],s()}e.$inject=["$stateParams","$rootScope","mmpadminAPI","alertbox"],angular.module("mmpadmin").controller("WinnerRecordCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i,l){function r(){s.getShakeList({page:t.currentPage,rows:t.pagesize,LotteryName:t.prokeyword,LotteryType:t.LotteryType},function(e){console.log(e),t.shakeLists=e.rows,angular.forEach(t.shakeLists,function(e){null!=e.LotteryContent&&(e.LotteryContent=e.LotteryContent.replace(/；/g,";")),null!=e.StartTime&&e.StartTime.indexOf("Date")>=0&&(e.StartTime=e.StartTime.substring(6,e.StartTime.length-2)),null!=e.EndTime&&e.EndTime.indexOf("Date")>=0&&(e.EndTime=e.EndTime.substring(6,e.EndTime.length-2))}),t.totalItems=e.total})}t.currentPage=1,t.pagesize=10,t.prokeyword="",t.shakeData=[],t.resetNm="",t.LotteryType=o.lotteryType,"scratch"==t.LotteryType?(t.resetNm="刮奖",t.lotteryTypeNm="刮刮奖",t.type=1):"shake"==t.LotteryType&&(t.resetNm="摇奖",t.lotteryTypeNm="摇一摇",t.type=2),t.wxdomain=WEBSITE_CONFIG.weixin_bind_domain,r(),t.pageChanged=function(){console.log(t.currentPage),r()},t.editShakeBtn=function(e){if(e.length==[])return void i("友情提示","请选择一条记录进行操作");var t="/App/Lottery/WXLotteryEditV1.aspx?lotteryType=2&id="+e.LotteryID+"&backUrl="+encodeURIComponent("/customize/mmpadmin/index.aspx?hidemenu=1#/index/shakeList/shake");window.location.href=t},t.goToRecord=function(e){window.location.href="/App/Lottery/WXLotteryRecordsV1.aspx?id="+e.LotteryID+"&lotteryType=2&backUrl="+encodeURIComponent("/customize/mmpadmin/index.aspx?hidemenu=1#/index/shakeList/shake")},t.createQcodeBtn=function(e,a){$("#qCodeModal").modal("show");var o="",i=""!=t.wxdomain?t.wxdomain:window.location.host;1==a?o="http://"+i+"/App/Lottery/wap/ScratchV1.aspx?id"+e.LotteryID:2==a&&(o="mixblu.comeoncloud.net"==window.location.host?"http://"+i+"/customize/mixblu/?ngroute=/shakeCenter/"+e.LotteryID+"#/shakeCenter/"+e.LotteryID:"http://"+i+"/customize/shake/?ngroute=/shake/"+e.LotteryID+"#/shake/"+e.LotteryID),s.createQCode({code:o},function(e){t.qcodedata={qcode:e.result.qrcode_url,url:o}})},t.ctrlsearch=function(e){console.log(["点击回车",e]),console.log(t.prokeyword);var a=window.event?e.keyCode:e.which;13===a&&(t.currentPage=1,t.dataList=[],r())},t.delproductBtn=function(e){return e.length==[]?void i("友情提示","请选择一条记录进行操作"):void l("系统提示","确定删除选中？","确定","取消",function(){s.delShakeList({ids:e.LotteryID},function(e){1==e.Status?r():i("友情提示","data.Msg")})},function(){t.shakeData.selected=!1,t.shakeData=[]})},t.resetLottery=function(e){return e.length==[]?void i("友情提示","请选择一条记录进行操作"):void l("系统提示","确定重置所选活动（抽奖记录及中奖记录将会被清除）?","确定","取消",function(){s.resetLottery({ids:e.LotteryID},function(e){0==e.Status?r():i("友情提示",e.Msg)})},function(){t.shakeData.selected=!1,t.shakeData=[]})},t.selectme=function(e){t.shakeLists.filter(function(a){e.LotteryID!=a.LotteryID&&a.selected&&(a.selected=!1,t.shakeData=[])}),e.selected=!e.selected,t.shakeData=1==e.selected?e:[],console.log("数据",t.shakeData),console.log("爱我",e.selected)},t.showWinnerList=function(e){return e.length==[]?void i("友情提示","请选择一条记录进行操作"):void window.open("http://"+window.location.host+"/App/Lottery/LotteryRecordsRealTime.aspx?id="+e.LotteryID)},t.goToMonitor=function(e,t){if("uv"!=t){var a="/App/Monitor/EventDetails.aspx?aid="+e+"&uv="+t;top.addTab("摇一摇监测明细",a)}else{var a="/App/Monitor/EventDetails.aspx?aid="+e;top.addTab("摇一摇监测明细",a)}}}e.$inject=["$rootScope","$scope","$state","$stateParams","mmpadminAPI","alertbox","alertconformbox"],angular.module("mmpadmin").controller("shakeListCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i,l){function r(){s.getLottery({id:d.lotteryId},function(e){e.isSuccess?d.lotteryData=e.returnObj:alert(e.errmsg)})}function n(){}{var d=e.vm={lotteryId:l.shakeId,lotteryData:{}};e.vf={init:r,save:n}}r(),e.cpNums=0,e.ptnums=0,e.ptNums=0,e.cmNums=0;var c=t.radioData;console.log("$rootScope.editshakedatas",t.editshakedatas),e.buttonTypes=[],e.buttonType="",$(".content").summernote({lang:"zh-CN",callbacks:{onChange:function(){e.LotteryContent=$(".content").summernote("code")}}}),e.share_img_url=[t.editshakedatas.ShareImg],e.LotteryName=t.editshakedatas.LotteryName,e.auto_id=t.editshakedatas.LotteryID,e.LotteryContent=t.editshakedatas.LotteryContent,$(".content").summernote("code",t.editshakedatas.LotteryContent),e.sharedesc=t.editshakedatas.ShareDesc,e.ponits=t.editshakedatas.UsePoints,e.ToolbarButton=t.editshakedatas.ToolbarButton,e.start_time=o("date")(t.editshakedatas.StartTime,"yyyy-MM-dd HH:mm"),e.stop_time=o("date")(t.editshakedatas.EndTime,"yyyy-MM-dd HH:mm"),1==t.maxcount?e.numOne=t.editshakedatas.MaxCount:e.numTwo=t.editshakedatas.MaxCount,e.awards=t.editshakedatas.Awards,s.getCoupons({action:"list",pageindex:1,pagesize:10},function(t){e.coupons=t.list,e.showcoupon=t.list[0];for(var a=0;a<e.awards.length;a++)if(2==e.awards[a].AwardsType)for(var o=0;o<e.coupons.length;o++)e.coupons[o].cardcoupon_id==e.awards[a].Value&&(e.awards[a].prizeContent=e.coupons[o].cardcoupon_name,e.showcoupon=t.list[o-1],console.log(o),console.log(e.showcoupon));console.log(t)},function(e){console.log(e)}),e.selectPeople=function(){c.select=0},e.selectDay=function(){c.select=1},e.addawardBtn=function(){var t=[],a={PrizeName:"",PrizeCount:"",Probability:"",Img:"",AwardsType:1,Value:"",Description:"",prizeContent:0};0==e.awards.length?(t.push(a),e.awards=e.awards.concat(t)):e.checkPrizeNotNull(e.awards[e.awards.length-1],e.awards.length-1)&&(t.push(a),e.awards=e.awards.concat(t),e.selectwhich(e.awards.length-1)),console.log(e.awards)},e.checkPrizeNotNull=function(e,t){return void 0==e?!0:""==e.PrizeName?(i("友情提示","奖品名称不能为空"),$("#prizeName_"+t).focus(),!1):""==e.Description?(i("友情提示","请填写奖品描述"),$("#desc_"+t).focus(),!1):""==e.PrizeCount||isNaN(e.PrizeCount)?(i("友情提示","奖品数量不能为空"),1==c.activetype?$("#ptnums_"+t).focus():2==c.activetype?$("#cpNums_"+t).focus():0==c.activetype&&$("#cmNums_"+t).focus(),!1):!0},e.delmeslef=function(t){$(".prizetype").css("display","none"),e.awards.splice(t,1),0==t?$(".prizetype").css("display","none"):e.selectwhich(t-1)},e.selectwhich=function(t){for(var o=-1,s=$(".ulSelect").children(),i=0;i<s.length;i++)if($(s[i]).hasClass("Select")){o=i;break}if(!(o>=0&&o!=t)||e.checkPrizeNotNull(e.awards[o],o)){if($(".ulSelect .Select").removeClass("Select"),$(".ulSelect tr:nth-child("+(t+1)+")").addClass("Select"),$(".ulSelect tr:nth-child("+(t+1)+")").css("color","#000"),$(".ulSelect tr:nth-child("+(t+1)+")").siblings().css("background-color","#fff"),$(".ulSelect tr:nth-child("+(t+1)+")").css("background","#1ab394"),$(".prizetype").css("display","block"),$(".prizetype").css("background","#1ab394"),0==t)$(".prizetype").css("top","36px");else if(1==t)$(".prizetype").css("top","92px");else{$(".prizetype").css("top",56*(t+1)-20+"px")}if(e.showaddwardalone=!0,e.inDex=t,e.checktype=function(){console.log("奖项类型",c.activetype),e.awards[e.inDex].AwardsType=c.activetype},e.whichcp=function(t){e.couponid=t.cardcoupon_id,e.awards[e.inDex].Value=e.couponid,e.awards[e.inDex].prizeContent=t.cardcoupon_name},c.activetype=e.awards[t].AwardsType,2==c.activetype)for(var l in e.coupons)e.coupons[l].cardcoupon_id==e.awards[t].Value&&(e.showcoupon=e.coupons[l]);e.cpNums=parseInt(e.awards[t].PrizeCount),e.ptnums=parseInt(e.awards[t].PrizeCount),e.ptNums=parseInt(e.awards[t].Value),e.cmNums=parseInt(e.awards[t].PrizeCount),a(function(){$(".ulSelect tr:nth-child("+(t+1)+")").addClass("Select"),$(".ulSelect tr:nth-child("+(t+1)+")").css("color","#000"),$(".ulSelect tr:nth-child("+(t+1)+")").siblings().css("background-color","#fff"),$(".ulSelect tr:nth-child("+(t+1)+")").css("background","#1ab394")},100)}},e.ctrladd=function(){if(console.log(e.awards.length),e.awards.length>=1){var t=e.inDex;2==c.activetype?(e.awards[t].PrizeCount=parseInt(e.cpNums),e.awards[t].Img="",e.awards[t].AwardsType=2,e.awards[t].Value=e.couponid):1==c.activetype?(e.awards[t].PrizeCount=parseInt(e.ptnums),e.awards[t].Img="",e.awards[t].AwardsType=1,e.awards[t].Value=parseInt(e.ptNums)):(e.awards[t].PrizeCount=parseInt(e.cmNums),e.awards[t].Img="",e.awards[t].AwardsType=0,e.awards[t].Value="",console.log(e.awards[t]))}},e.editshakeBtn=function(){if(e.checkIsNull()){e.share_img_url=e.share_img_url[0];var a="";"无"!=e.buttonType.name&&(a=e.buttonType.name);var o={ThumbnailsPath:e.share_img_url,LotteryName:e.LotteryName,LotteryContent:e.LotteryContent,LotteryType:t.editshakedatas.LotteryType,Status:c.active,MaxCount:e.count,LimitType:c.select,WinLimitType:c.allow,IsGetPrizeFromMobile:c.receiveway,ToolbarButton:a,UsePoints:e.ponits,StartTime:e.start_time,ShareImg:e.share_img_url,ShareDesc:e.sharedesc,EndTime:e.stop_time,Awards:e.awards};o=angular.toJson(o),console.log(o),s.editShake({AutoID:e.auto_id,JsonData:o},function(e){if(console.log(e),1==e.Status){var t="友情提示",a="编辑活动成功";i(t,a),setTimeout(function(){history.go(-1)},1e3)}else i("友情提示",e.Msg)})}},e.checkIsNull=function(){return e.count=0==c.select?e.numOne:e.numTwo,""==e.LotteryName||void 0==e.LotteryName?(i("友情提示","请填写活动名称"),$("#shakename").focus(),!1):""==e.sharedesc||void 0==e.sharedesc?(i("友情提示","请填写描述"),$("#describe").focus(),!1):""==e.share_img_url||e.share_img_url==[]||void 0==e.share_img_url?(i("友情提示","请上传图片"),a(function(){document.body.scrollTop=$("#shakeimg").offset().top},2e3),!1):""==e.LotteryContent||void 0==e.LotteryContent?(i("友情提示","请填写介绍"),a(function(){document.body.scrollTop=$("#shakecontent").offset().top},2e3),!1):""==e.start_time||void 0==e.start_time?(i("友情提示","请选择开始时间"),$("#timestart").focus(),!1):""==e.stop_time||void 0==e.stop_time?(i("友情提示","请选择结束时间"),$("#timeend").focus(),!1):e.start_time>e.stop_time?(i("友情提示","开始时间不能大于结束时间"),
$("#timestart").focus(),!1):""==e.count||void 0==e.count?(i("友情提示","参与次数不能为空"),$("#joincount").focus(),!1):e.awards.length>0&&0==e.checkPrizeNotNull(e.awards[e.awards.length-1],e.awards.length-1)?!1:!0},e.getNavChoose=function(){s.getNavChoose(function(a){if(console.log(a),a.status){var o={id:0,name:"无"};if(e.buttonTypes.push(o),a.result&&a.result.length){for(var s=0;s<a.result.length;s++){var i={id:s+1,name:a.result[s]};e.buttonTypes.push(i)}for(var s=0;s<e.buttonTypes.length;s++){if(e.buttonTypes[s].name==t.editshakedatas.ToolbarButton)return void(e.buttonType=e.buttonTypes[s]);e.buttonType=e.buttonTypes[0]}}}},function(e){})},e.getNavChoose()}e.$inject=["$scope","$rootScope","$timeout","$filter","mmpadminAPI","alertbox","$stateParams"],angular.module("mmpadmin").controller("shakeEditCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i,l){var r=t.radioData;console.log(t.editshakedatas),e.buttonTypes=[],e.buttonType="",$(".content").summernote({lang:"zh-CN",onChange:function(){e.LotteryContent=$(".content").code()}}),e.share_img_url=[t.editshakedatas.ShareImg],e.LotteryName=t.editshakedatas.LotteryName,e.auto_id=t.editshakedatas.LotteryID,e.LotteryContent=t.editshakedatas.LotteryContent,$(".content").code(t.editshakedatas.LotteryContent),e.sharedesc=t.editshakedatas.ShareDesc,e.ponits=t.editshakedatas.UsePoints,e.ToolbarButton=t.editshakedatas.ToolbarButton,e.start_time=l("date")(t.editshakedatas.StartTime,"yyyy-MM-dd HH:mm"),e.stop_time=l("date")(t.editshakedatas.EndTime,"yyyy-MM-dd HH:mm"),1==t.maxcount?e.numOne=t.editshakedatas.MaxCount:e.numTwo=t.editshakedatas.MaxCount,e.awards=t.editshakedatas.Awards,a.getCoupons({action:"list",pageindex:1,pagesize:10},function(t){e.coupons=t.list,e.showcoupon=t.list[0];for(var a=0;a<e.awards.length;a++)if(2==e.awards[a].AwardsType)for(var o=0;o<e.coupons.length;o++)e.coupons[o].cardcoupon_id==e.awards[a].Value&&(e.showcoupon=t.list[o-1],console.log(o),console.log(e.showcoupon));console.log(t)},function(e){console.log(e)}),e.selectPeople=function(){r.select=0},e.selectDay=function(){r.select=1},e.addawardBtn=function(){var t=[],a={PrizeName:"",PrizeCount:"",Probability:"",Img:"",AwardsType:1,Value:"",Description:""};t.push(a),e.awards=e.awards.concat(t),console.log(e.awards)},e.delmeslef=function(t){e.awards.splice(t,1)},e.selectwhich=function(t){if($(".ulSelect tr:nth-child("+(t+1)+")").css("background","#1ab394"),$(".ulSelect tr:nth-child("+(t+1)+")").css("color","#000"),$(".ulSelect tr:nth-child("+(t+1)+")").siblings().css("background-color","#fff"),e.showaddwardalone=!0,e.inDex=t,e.checktype=function(){console.log(r.activetype),e.awards[e.inDex].AwardsType=r.activetype},e.whichcp=function(t){e.couponid=t.cardcoupon_id,e.awards[e.inDex].Value=e.couponid},r.activetype=e.awards[t].AwardsType,2==r.activetype)for(var a in e.coupons)e.coupons[a].cardcoupon_id==e.awards[t].Value&&(e.showcoupon=e.coupons[a]);e.cpNums=e.awards[t].PrizeCount,e.ptnums=e.awards[t].PrizeCount,e.ptNums=e.awards[t].Value,e.cmNums=e.awards[t].PrizeCount},e.ctrladd=function(){if(console.log(e.awards.length),e.awards.length>=1){var t=e.inDex;2==r.activetype?(e.awards[t].PrizeCount=parseInt(e.cpNums),e.awards[t].Img="",e.awards[t].AwardsType=2,e.awards[t].Value=e.couponid):1==r.activetype?(e.awards[t].PrizeCount=parseInt(e.ptnums),e.awards[t].Img="",e.awards[t].AwardsType=1,e.awards[t].Value=parseInt(e.ptNums)):(e.awards[t].PrizeCount=parseInt(e.cmNums),e.awards[t].Img="",e.awards[t].AwardsType=0,e.awards[t].Value="",console.log(e.awards[t]))}},e.editshakeBtn=function(){if(""==e.share_img_url||e.share_img_url==[])return void s("友情提示","请上传文章图片");e.share_img_url=e.share_img_url[0],e.count=0==r.select?e.numOne:e.numTwo;var t="";"无"!=e.buttonType.name&&(t=e.buttonType.name);var o={ThumbnailsPath:"",LotteryName:e.LotteryName,LotteryContent:e.LotteryContent,Status:r.active,MaxCount:e.count,LimitType:r.select,WinLimitType:r.allow,IsGetPrizeFromMobile:r.receiveway,ToolbarButton:t,UsePoints:e.ponits,StartTime:e.start_time,ShareImg:e.share_img_url,ShareDesc:e.sharedesc,EndTime:e.stop_time,Awards:e.awards};o=angular.toJson(o),console.log(o),a.editShake({AutoID:e.auto_id,JsonData:o},function(e){if(console.log(e),1==e.Status){var t="友情提示",a="编辑活动成功";s(t,a),setTimeout(function(){history.go(-1)},1e3)}})},e.getNavChoose=function(){a.getNavChoose(function(a){if(console.log(a),a.status){var o={id:0,name:"无"};if(e.buttonTypes.push(o),a.result&&a.result.length){for(var s=0;s<a.result.length;s++){var i={id:s+1,name:a.result[s]};e.buttonTypes.push(i)}for(var s=0;s<e.buttonTypes.length;s++){if(e.buttonTypes[s].name==t.editshakedatas.ToolbarButton)return void(e.buttonType=e.buttonTypes[s]);e.buttonType=e.buttonTypes[0]}}}},function(e){})},e.getNavChoose()}e.$inject=["$scope","$rootScope","mmpadminAPI","$http","alertbox","$state","$filter"],angular.module("mmpadmin").controller("NewShakeEditCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i){function l(){i.delpro("/admin/mall/promotionproduct.ashx",{action:"delete",product_ids:e.ids},function(e){if(console.log(e),0==e.errcode){var t="友情提示",a="删除成功";s(t,a),getpromotionproduct()}else s(e.errcode,e.errmsg)},function(e){console.log(e)})}i.promotionproduct("/admin/mall/promotionproduct.ashx",{action:"list",pageindex:1,pagesize:1,keyword:"",promotion_start_timestamp:"",promotion_stop_timestamp:""},function(t){function r(){i.promotionproduct("/admin/mall/promotionproduct.ashx",{action:"list",pageindex:e.currentPage,pagesize:e.pagesize,keyword:e.prokeyword,promotion_start_timestamp:e.promotion_start_timestamp,promotion_stop_timestamp:e.promotion_stop_timestamp},function(t){console.log(t),e.promotiondatas=t.list,e.totalItems=t.totalcount,e.selectedall=!1},function(e){})}console.log(t),e.totalItems=t.totalcount,e.currentPage=""==o.pageID||void 0==o.pageID?1:parseInt(o.pageID),e.prokeyword=""==o.keyID||void 0==o.keyID?"":o.keyID,e.pagesize=10,e.promotion_start_timestamp="",e.promotion_stop_timestamp="",e.promotiondatas=[],r(),e.selectme=function(t){t.selected=!t.selected,console.log(t.selected);var a=!0;e.promotiondatas.filter(function(e){e.selected||(a=!1)}),e.selectedall=a,t.selected?(e.ids+=t.product_id+",",console.log(e.ids)):(e.ids=e.ids.replace(t.product_id+",",""),console.log(e.ids))},e.selectedall=!1,e.ids="",e.checkedall=function(){e.selectedall=!e.selectedall,e.ids="",angular.forEach(e.promotiondatas,function(t){t.selected=e.selectedall,e.selectedall?(e.ids+=t.product_id+",",console.log(["$scope.ids",e.ids])):(e.ids=[],console.log(["$scope.ids",e.ids]))})},e.delallpromotionBtn=function(){if(""!=e.ids)e.ids=e.ids.substring(e.ids,e.ids.length-1),console.log(["$scope.ids",e.ids]),l();else{var t="友情提示",a="请至少选择一件产品";s(t,a)}},e.categoryBtn=function(){if(void 0==e.start_time||void 0==e.stop_time){var t="友情提示",a="请选择您要查询的起止时间";s(t,a)}else{var o=e.start_time,i=e.stop_time,l=new Date(o.replace(/-/g,"/"));e.promotion_start_timestamp=l.getTime().toString();var n=new Date(i.replace(/-/g,"/"));e.promotion_stop_timestamp=n.getTime().toString(),r()}},e.ctrlsearch=function(t){console.log(["点击回车",t]);var o=window.event?t.keyCode:t.which;13===o&&(e.currentPage=1,e.promotiondatas=[],a.go("index.saleList",{pageID:e.currentPage,keyID:e.prokeyword}))}},function(e){console.log(e)}),e.pageChanged=function(){console.log(e.saleList),a.go("index.saleList",{pageID:e.currentPage})},e.editpromotionBtn=function(e){t.aftershowimg=!0,t.showeditBtn=!0,t.showaddBtn=!1,a.go("index.salelimitEdit",{saleId:e.product_id}),t.hasseletdata=e},e.delpromotionBtn=function(t){console.log(t.product_id),e.ids=t.product_id,l()}}e.$inject=["$scope","$rootScope","$state","$stateParams","alertbox","mmpadminAPI"],angular.module("mmpadmin").controller("saleListCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i,l){function r(){s.addeditpromotion("/admin/mall/promotionproduct.ashx",{action:e.action,product_id:t.hasseletdata.product_id,promotion_price:e.promotion_price,promotion_count:e.promotion_count,promotion_start_timestamp:e.new_start_time,promotion_stop_timestamp:e.new_stop_time},function(a){if(0==a.errcode){if(console.log(e.action),"update"==e.action){var s="友情提示",i="更新特卖商品信息成功";o(s,i)}else if("add"==e.action){var s="友情提示",i="添加特卖商品成功";o(s,i)}setTimeout(function(){l.go("index.saleList")},1e3),t.hasseletdata="",e.promotion_price="",e.promotion_count="",e.start_time="",e.stop_time="",t.aftershowimg=!1}else{var s="友情提示",i="添加特卖商品失败，请检查价格、数量、时间是否填写正确";o(s,i)}},function(e){console.log(e)})}void 0!=t.hasseletdata&&(e.promotion_price=t.hasseletdata.promotion_price,e.promotion_count=t.hasseletdata.promotion_count,e.start_time=i("date")(t.hasseletdata.promotion_start_timestamp,"yyyy-MM-dd hh:mm"),e.stop_time=i("date")(t.hasseletdata.promotion_stop_timestamp,"yyyy-MM-dd hh:mm")),console.log(t.hasseletdata),e.openselectBtn=function(){a()},e.addpromotionBtn=function(){if(void 0==e.start_time||void 0==e.stop_time||e.promotion_price<.01||e.promotion_count>t.hasseletdata.totalcount){var a="友情提示",s="请检查相关信息是否填写完整或有误";o(a,s)}else{var i=e.start_time,l=e.stop_time,n=new Date(i.replace(/-/g,"/"));e.new_start_time=n.getTime().toString();var d=new Date(l.replace(/-/g,"/"));e.new_stop_time=d.getTime().toString(),e.action="add",r()}},e.editpromotionBtn=function(){if(void 0==e.start_time||void 0==e.stop_time||e.promotion_price<.01||e.promotion_count>t.hasseletdata.totalcount){var a="友情提示",s="请检查相关信息是否填写完整或有误";o(a,s)}else{var i=e.start_time,l=e.stop_time,n=new Date(i.replace(/-/g,"/"));e.new_start_time=n.getTime().toString();var d=new Date(l.replace(/-/g,"/"));e.new_stop_time=d.getTime().toString(),e.action="update",r()}}}e.$inject=["$scope","$rootScope","alertselectbox","alertbox","mmpadminAPI","$filter","$state"],angular.module("mmpadmin").controller("salelimitEditCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i){e.getraiselist({pageindex:1,pagesize:1},function(l){function r(){e.getraiselist({pageindex:t.currentPage,pagesize:t.pagesize},function(e){console.log("获取众筹商品列表成功",e),t.totals=e.totalcount,t.raisepros=e.list},function(e){console.log(e)})}function n(){i("友情提示","您确定删除众筹商品吗？","确定删除","取消删除",function(){t.ids=t.ids.toString(),","==t.ids.substring(t.ids.length-1,t.ids.length)&&(t.ids=t.ids.substring(t.ids,t.ids.length-1)),e.delraisepro({crowdfund_ids:t.ids},function(e){if(console.log(e),0==e.errcode){t.ids="",t.selectedall=!1;var a="友情提示",o="删除成功";s(a,o),r()}else s(e.errcode,e.errmsg)},function(e){console.log(e)})},function(){})}console.log("获取众筹商品列表成功",l),t.totals=l.totalcount,t.currentPage=""==a.pageID||void 0==a.pageID?1:parseInt(a.pageID),t.pagesize=10,r(),t.delallraiseproBtn=function(){if(""!=t.ids)console.log(["$scope.ids",t.ids]),n();else{var e="友情提示",a="请至少选择一件产品";s(e,a)}},t.wxdomain=WEBSITE_CONFIG.weixin_bind_domain,t.delraiseproBtn=function(e){t.ids=e.crowdfund_id,n()},t.pageChanged=function(){console.log(t.currentPage),o.go("index.raiselist",{pageID:t.currentPage})},t.selectme=function(e){e.selected=!e.selected,console.log(e.selected);var a=!0;t.raisepros.filter(function(e){e.selected||(a=!1)}),t.selectedall=a,e.selected?(t.ids+=e.crowdfund_id+",",console.log(t.ids)):(t.ids=t.ids.replace(e.crowdfund_id+",",""),console.log(t.ids))},t.selectedall=!1,t.ids="",t.checkedall=function(){t.selectedall=!t.selectedall,t.ids="",angular.forEach(t.raisepros,function(e){e.selected=t.selectedall,t.selectedall?(t.ids+=e.crowdfund_id+",",console.log(["$scope.ids",t.ids])):(t.ids="",console.log(["$scope.ids",t.ids]))})},t.goToOtherPage=function(e){window.location.href=1==e?"/customize/mmpadmin/index.aspx?hidemenu=1#/index/classify":"/customize/mmpadmin/index.aspx?hidemenu=1#/index/raiseorderList//"},t.createQcodeBtn=function(a){$("#qCodeModal").modal("show");var o=""!=t.wxdomain?t.wxdomain:window.location.host,s="http://"+o+"/app/crowdfund/m/?v#/raiseprodetail/"+a;e.createQCode({code:s},function(e){t.qcodedata={qcode:e.result.qrcode_url,url:s}})}},function(e){console.log(e)})}e.$inject=["mmpadminAPI","$scope","$stateParams","$state","alertbox","alertconformbox"],angular.module("mmpadmin").controller("raiselistCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i){var l=e.pageFunc={},r=e.pageData={raiseId:t.raiseId,raiseJson:{crowdfund_id:0,crowdfund_type:1,crowdfund_title:"",crowdfund_img_url:"",crowdfund_amount:"",crowdfund_intro:"",crowdfund_originator:"",crowdfund_stoptime:"",item_list:[{item_id:0,item_amount:5,item_desc:"选项11",item_productname:"选项11"}]},itemList:[],item:{item_id:0,item_amount:"",item_desc:"",item_order_count:0,item_productname:""},isEditPro:!1,itemId:0,crowdFundType:{id:0,name:"产品众筹"},crowdFundTypes:[{id:0,name:"产品众筹"},{id:1,name:"股权众筹"},{id:2,name:"公益众筹"}]};$(".content").summernote({lang:"zh-CN",callbacks:{onInit:function(){r.raiseJson.crowdfund_intro=$(".content").summernote("code")},onChange:function(){r.raiseJson.crowdfund_intro=$(".content").summernote("code")},onImageUpload:function(e){console.log(["image upload:",e]),console.log(["files[0]:",e[0]]);var t=new XMLHttpRequest;t.open("POST",i.mainsiteurl+"/serv/api/common/file.ashx?action=add",!0);var a=new FormData;for(var o in e)a.append("file",e[o]);t.send(a),t.onreadystatechange=function(e){if(4==t.readyState&&200==t.status){console.log(["responseText",JSON.parse(t.responseText)]);for(var a=JSON.parse(t.responseText),o="",s=0;s<a.file_url_list.length;s++){o="<img src="+a.file_url_list[s]+">";var i=$(o);$(".content").summernote("insertNode",i[0])}}}}}}),l.showAddRaisePro=function(){r.item={item_id:0,item_amount:"",item_desc:"",item_order_count:0,item_productname:""},$("#dealModal").modal({backdrop:"static",keyboard:!1})},l.delmeslef=function(e,t){0==t.item_order_count?r.itemList.splice(e,1):alert("该赞助项目不能删除")},l.editPro=function(e){r.item=e,r.isEditPro=!0,$("#dealModal").modal({backdrop:"static",keyboard:!1})},l.filterSameId=function(e,t){if(t&&t.length>0){for(var a=0;a<t.length;a++)e==t[a].item_id&&(e++,l.filterSameId(e,t));r.item.item_id=e}},l.addPro=function(){if(l.checkItem())if(r.isEditPro){for(var e=0;e<r.itemList.length;e++)if(r.item.item_id==r.itemList[e].item_id)return r.itemList[e]=r.item,r.isEditPro=!1,void $("#dealModal").modal("hide");console.log(r.itemList)}else l.filterSameId(r.itemId,r.itemList),r.itemList=r.itemList.concat(r.item),r.item={item_id:0,item_amount:"",item_desc:"",item_order_count:0,item_productname:""},console.log(r.itemList),$("#dealModal").modal("hide")},l.addRaise=function(){if(r.raiseJson.crowdfund_type=r.crowdFundType.id,r.itemList&&r.itemList.length>0)for(var e=0;e<r.itemList.length;e++)r.itemList[e].item_id=0;r.raiseJson.item_list=r.itemList,r.raiseJson.crowdfund_img_url&&r.raiseJson.crowdfund_img_url.length>0&&"string"!=typeof r.raiseJson.crowdfund_img_url&&(r.raiseJson.crowdfund_img_url=r.raiseJson.crowdfund_img_url[0]),r.raiseJson.crowdfund_amount=parseInt(r.raiseJson.crowdfund_amount),r.raiseJson.crowdfund_stoptime_tmp=r.raiseJson.crowdfund_stoptime,r.raiseJson.crowdfund_stoptime=new Date(r.raiseJson.crowdfund_stoptime).getTime(),l.checkIsNull()?s.addRaise({data:angular.toJson(r.raiseJson)},function(e){0==e.errcode?(alert("添加众筹活动成功"),a.go("index.raiselist")):alert(e.errmsg)},function(e){alert(e.errmsg)}):(r.raiseJson.crowdfund_stoptime=r.raiseJson.crowdfund_stoptime_tmp,r.raiseJson.crowdfund_img_url&&(r.raiseJson.crowdfund_img_url=[r.raiseJson.crowdfund_img_url]))},l.updateRaise=function(){if(r.raiseJson.crowdfund_type=r.crowdFundType.id,r.itemList&&r.itemList.length>0)for(var e=0;e<r.itemList.length;e++)0==r.itemList[e].item_order_count&&(r.itemList[e].item_id=0);r.raiseJson.item_list=r.itemList,r.raiseJson.crowdfund_img_url&&r.raiseJson.crowdfund_img_url.length>0&&"string"!=typeof r.raiseJson.crowdfund_img_url&&(r.raiseJson.crowdfund_img_url=r.raiseJson.crowdfund_img_url[0]),r.raiseJson.crowdfund_amount=parseInt(r.raiseJson.crowdfund_amount),r.raiseJson.crowdfund_stoptime_tmp=r.raiseJson.crowdfund_stoptime,r.raiseJson.crowdfund_stoptime=new Date(r.raiseJson.crowdfund_stoptime).getTime(),l.checkIsNull()?s.updateRaise({data:angular.toJson(r.raiseJson)},function(e){0==e.errcode?(alert("修改众筹活动成功"),history.go(-1)):alert(e.errmsg)},function(e){alert(e.errmsg)}):(r.raiseJson.crowdfund_stoptime=r.raiseJson.crowdfund_stoptime_tmp,r.raiseJson.crowdfund_img_url&&(r.raiseJson.crowdfund_img_url=[r.raiseJson.crowdfund_img_url]))},l.getRaiseDetail=function(){s.getRaiseDetail({crowdfund_id:r.raiseId},function(e){if(e){console.log("获取众筹活动详情成功",e),r.raiseJson.crowdfund_id=e.crowdfund_id,r.raiseJson.crowdfund_type=e.crowdfund_type;for(var t=0;t<r.crowdFundTypes.length;t++)r.raiseJson.crowdfund_type==r.crowdFundTypes[t].id&&(r.crowdFundType=r.crowdFundTypes[t]);r.raiseJson.crowdfund_title=e.crowdfund_title,r.raiseJson.crowdfund_intro=e.crowdfund_intro,$(".content").summernote("code",r.raiseJson.crowdfund_intro),r.raiseJson.crowdfund_originator=e.crowdfund_originator,r.raiseJson.crowdfund_img_url=[e.crowdfund_img_url],r.raiseJson.crowdfund_amount=e.crowdfund_amount,r.raiseJson.crowdfund_stoptime=o("date")(e.crowdfund_stoptime,"yyyy-MM-dd HH:mm"),r.itemList=e.item_list}else console.log("获取众筹活动详情失败",e.errmsg)},function(e){console.log("请求获取众筹活动详情失败",e.errmsg)})},l.checkIsNull=function(){return""==r.raiseJson.crowdfund_title?(alert("众筹活动名称不能为空"),!1):""==r.raiseJson.crowdfund_img_url?(alert("众筹大图不能为空"),!1):""==r.raiseJson.crowdfund_amount||isNaN(r.raiseJson.crowdfund_amount)?(alert("众筹金额不能为空或者格式错误"),!1):""==r.raiseJson.crowdfund_originator?(alert("发起人不能为空"),!1):""==r.raiseJson.crowdfund_intro?(alert("众筹介绍不能为空"),!1):""==r.raiseJson.crowdfund_stoptime||isNaN(r.raiseJson.crowdfund_stoptime)?(alert("结束时间不能为空或者格式错误"),!1):r.raiseJson.item_list?0==r.raiseJson.item_list.length?(alert("请添加赞助项目"),!1):!0:(alert("请添加赞助项目"),!1)},l.checkItem=function(){return""==r.item.item_productname?(alert("标题不能为空"),!1):""==r.item.item_amount?(alert("价格不能为空"),!1):""==r.item.item_desc?(alert("简介不能为空"),!1):!0},l.clear=function(){$("#dealModal").modal("hide"),r.item={item_id:0,item_amount:"",item_desc:"",item_order_count:0,item_productname:""}},l.init=function(){"add"==r.raiseId?(r.raiseJson.crowdfund_id=0,r.crowdFundType=r.crowdFundTypes[0]):l.getRaiseDetail()},l.init()}e.$inject=["$scope","$stateParams","$state","$filter","mmpadminAPI","$rootScope"],angular.module("mmpadmin").controller("raiseeditCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s){e.getraiseprodetail({crowdfund_id:a.raiseID},function(e){console.log(e),t.raiseprodetail=e},function(e){console.log(e)})}e.$inject=["mmpadminAPI","$scope","$stateParams","$state","alertbox"],angular.module("mmpadmin").controller("raisedetailCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s){function i(){e.gettags("/admin/mall/tag.ashx",{action:"list",pageindex:t.currentPage,pagesize:t.pagesize},function(e){t.tags=e.list,t.totalItems=e.totalcount,console.log(e)})}function l(){e.addtag("/admin/mall/tag.ashx",{action:"add",tag_name:t.tag_name},function(e){if(console.log(e),0==e.errcode){t.tag_name="";var o="友情提示",s="添加标签成功";a(o,s),i()}},function(e){console.log(e)})}function r(o){e.edittag("/admin/mall/tag.ashx",{action:"update",tag_id:o.tag_id,tag_name:o.tag_editname},function(e){if(console.log(e),0==e.errcode){t.tag_name="";var o="友情提示",s="修改标签信息成功";a(o,s),i()}},function(e){console.log(e)})}function n(){o("友情提示","您确定删除标签吗？","确定删除","取消删除",function(){t.ids=t.ids.toString(),","==t.ids.substring(t.ids.length-1,t.ids.length)&&(t.ids=t.ids.substring(t.ids,t.ids.length-1)),e.deltag("/admin/mall/tag.ashx",{action:"delete",tag_ids:t.ids},function(e){if(console.log(e),0==e.errcode){t.ids="";var o="友情提示",s="删除标签成功";t.selectedall=!1,a(o,s),i()}},function(e){console.log(e)})},function(){})}var d=this;d.creationDate="这是商品分类页",t.currentPage=1,t.pagesize=10,i(),t.addintagsBtn=function(){if(t.tag_name=s.trim(t.tag_name),console.log(t.tag_name),t.tag_name)l();else{var e="友情提示",o="请输入您要添加的标签";a(e,o)}},t.edittagBtn=function(e){e.isshow=!0},t.ensureBtn=function(e){if(e.tag_editname=s.trim(e.tag_editname),e.tag_editname)r(e);else{var t="友情提示",o="请输入您要修改的标签名称或取消";a(t,o)}},t.quiteditBtn=function(e){e.isshow=!1},t.selectme=function(e){e.selected=!e.selected;var a=!0;t.tags.filter(function(e){e.selected||(a=!1)}),t.selectedall=a,e.selected?t.ids+=e.tag_id+",":t.ids=t.ids.replace(e.tag_id+",","")},t.selectedall=!1,t.ids="",t.checkedall=function(){t.selectedall=!t.selectedall,angular.forEach(t.tags,function(e){e.selected=t.selectedall,e.selected?(t.ids+=e.tag_id+",",console.log(t.ids)):(t.ids="",console.log(t.ids))})},t.deltagBtn=function(e){t.ids=e.tag_id,n()},t.delalltagsBtn=function(){if(""!=t.ids)n();else{var e="友情提示",o="请至少选择一个要删除的标签";a(e,o)}},t.pageChanged=function(){console.log(t.currentPage),i()}}e.$inject=["mmpadminAPI","$scope","alertbox","alertconformbox","commService"],angular.module("mmpadmin").controller("productTagCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i,l){function r(){d()}function n(){window.history.go(-1)}function d(){var e={pageindex:c.pageindex,pagesize:c.pagesize,product_id:c.product_id,product_name:c.product_name},t=layer.load();o.getProductStockList(e,function(e){layer.close(t),c.productStockList=e.result.list,c.totals=e.result.totalcount},function(e){layer.close(t),console.log(e)})}{var c=e.vm={pageindex:1,pagesize:10,product_id:t.product_id,product_name:"",productStockList:[],totals:0};e.vf={pageChanged:r,goBackToList:n}}d(),console.log(["vm.product_id",c.product_id]),console.log(c.productStockList)}e.$inject=["$scope","$stateParams","$state","mmpadminAPI","alertbox","alertconformbox","commService"],angular.module("mmpadmin").controller("productStockRecordCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i,l){function r(){o.getcategorys({pageindex:e.currentPage,pagesize:e.pagesize,type:e.product_type,keyword:""},function(t){e.categorys=l.productCatePreSort(t.list),e.totalItems=e.categorys.length},function(e){})}function n(){i("友情提示","您确定删除分类吗？","确定删除","取消删除",function(){var e=d();o.deleteCategory({category_ids:e},function(e){if(console.log(e),0==e.errcode){var t="友情提示",a="删除成功";s(t,a),r()}else s(e.errcode,e.errmsg)},function(e){console.log(e)})},function(){})}function d(){for(var t=[],a=0;a<e.categorys.length;a++)e.categorys[a].selected&&t.push(e.categorys[a].category_id);return t.join(",")}var c=this;c.creationDate="这是商品分类页",e.currentPage=1,e.pagesize=1e5,e.categorys=[],e.totalItems=0,e.selectAll=!1,e.product_type=void 0==t.type?"":t.type,e.$watch("selectAll",function(){for(var t=0;t<e.categorys.length;t++)e.categorys[t].selected=e.selectAll}),r(),e.addProductSort=function(){e.product_type?a.go("index.addProductSort",{type:e.product_type}):a.go("index.addProductSortMall")},e.editProductSort=function(t){e.product_type?a.go("index.editProductSort",{sortID:t,type:e.product_type}):a.go("index.editProductSortMall",{sortID:t})},e.delallproductBtn=function(){if(""!=d())n();else{var e="友情提示",t="请至少选择一件产品";s(e,t)}},e.setSortBtn=function(){if(""!=d())$("#setSortModal").modal({backdrop:"static",keyboard:!1});else{var e="友情提示",t="请至少选择一个分类";s(e,t)}},e.hideSortModal=function(){$("#setSortModal").modal("hide")},e.batchUpdateCate=function(){var t=d();return""===e.setSortValue?void alert("请输入要设置的序号"):isNaN(e.setSortValue)?void alert("请输入数字"):void o.editCategorySort({ids:t,sort:e.setSortValue},function(t){r(),e.hideSortModal()},function(e){})},e.delproductBtn=function(t){e.ids=t.category_id;for(var a=0;a<e.categorys.length;a++)t.category_id==e.categorys[a].category_id&&(e.categorys[a].selected=!0);n()},e.selectme=function(e){e.selected=!e.selected},e.pageChanged=function(){console.log(e.currentPage),r()}}e.$inject=["$scope","$stateParams","$state","mmpadminAPI","alertbox","alertconformbox","commService"],angular.module("mmpadmin").controller("productSortCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s){e.propertyId=s.property_id;var i=function(a){t.getSKUValue({action:"list",property_id:a},function(t){e.propertyValuesData=t.list,console.log(["获取某个规格所有值成功",t])},function(e){console.log(["获取某个规格所有值失败",e])})};i(e.propertyId),e.property_value_name="",e.addPropertyValueBtn=function(){return""==e.property_value_name?void a("友情提示","请输入规格值"):void t.addSKUValue({property_id:e.propertyId,property_value_name:e.property_value_name},function(t){console.log(["添加规格的值成功",t]),0==t.errcode?a("友情提示","添加规格的值成功"):a("友情提示",t.errmsg),e.property_value_name="",i(e.propertyId)},function(e){a("友情提示",e.errmsg),console.log(["添加规格失败",e])})},e.editPropertyValueBtn=function(t){angular.forEach(e.propertyListData,function(e,t){e.show=!1}),t.show=!0,t.property_value_editname=t.property_value_name},e.delPropertyValueBtn=function(a){o("友情提示","您确定删除规格的值吗？","确定删除","取消删除",function(){t.delSKUValue({property_value_id:a.property_value_id},function(t){console.log(["删除规格的值成功",t]),i(e.propertyId)},function(e){console.log(["删除规格的值失败",e])})},function(){})},e.ensureBtn=function(o){return""==o.property_value_editname?void a("友情提示","请输入规格值"):void t.updateSKUValue({property_id:e.propertyId,property_value_id:o.property_value_id,property_value_name:o.property_value_editname},function(t){console.log(["更新规格成功",t]),i(e.propertyId)},function(e){console.log(["更新规格失败",e])})},e.quiteditBtn=function(e){e.show=!1}}e.$inject=["$scope","mmpadminAPI","alertbox","alertconformbox","$stateParams"],angular.module("mmpadmin").controller("productPropertyValueCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s){var i=function(){t.getAllSKU({action:"list"},function(t){e.propertyListData=t.list,console.log(["获取商品规格列表成功",t])},function(e){console.log(["获取商品规格列表失败",e])})};i(),e.property_name="",e.addPropertyBtn=function(){return""==e.property_name?void a("友情提示","请输入规格名称"):void t.addSKU({property_name:e.property_name},function(t){console.log(["添加规格成功",t]),0==t.errcode?a("友情提示","添加商品规格成功"):a("友情提示",t.errmsg),e.property_name="",i()},function(e){a("友情提示",e.errmsg),console.log(["添加规格失败",e])})},e.editPropertyBtn=function(t){angular.forEach(e.propertyListData,function(e,t){e.show=!1}),t.show=!0,t.property_editname=t.property_name},e.delPropertyBtn=function(e){o("友情提示","您确定删除规格吗？","确定删除","取消删除",function(){t.delSKU({property_id:e.property_id},function(e){console.log(["删除规格成功",e]),i()},function(e){console.log(["删除规格失败",e])})},function(){})},e.ensureBtn=function(e){return""==e.property_editname?void a("友情提示","请输入规格名称"):void t.updateSKU({property_id:e.property_id,property_name:e.property_editname},function(e){console.log(["更新规格成功",e]),i()},function(e){console.log(["更新规格失败",e])})},e.quiteditBtn=function(e){e.show=!1},e.showDetail=function(e){s.go("index.productPropertyValue",{property_id:e.property_id})}}e.$inject=["$scope","mmpadminAPI","alertbox","alertconformbox","$state"],angular.module("mmpadmin").controller("productPropertyCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i,l,r,n,d,c){function p(){"undefined"==typeof Le?(Le=e.vm=s.productListVM={groupBuyRuleList:null,pagesize:10,prodcutsdatas:[],categorys:[],category:null,sort:"",currentPage:1,prokeyword:"",category_id:"",is_onsale:"",product_type:$e,is_group_buy:0,is_appointment:"",totals:0,groupBuyDataList:[],groupBuyRuleCheckedAll:!1,setRuleProduct:null,access_level:0,TitleName:"商品列表",isCourse:!1,limit_type:"1",choicecategorys:[],choicecategory:null,tagsData:{},isJikuWifi:!1,addboxshow:!0,chooseDate:"",dateList:[],showData:[],typeTitle:"",isShowBuyTime:WEBSITE_CONFIG.is_enable_limit_product_buy_time,is_open_group:WEBSITE_CONFIG.is_open_group,is_threshold:!1,isShowPv:!0,hasGroupRight:!1,isUpdate:0,weixinBindDomain:WEBSITE_CONFIG.weixin_bind_domain,closePageSize:5,closeCurrentPage:1,closeTotals:0,currTimeType:1,timeList:[],timeObj:{singleTime:"",timeMultiStart:"",timeMultiEnd:""},single:{},tag_type:"0",freightTemplates:[],freightTemplate:null,pagesizes:[10,50,100,200,500,1e3],supplierListData:[],isGroupType:"0",isRadio:!1,currentSupplier:{},isShowSupplier:!1,isOnlyUpdateStock:!1,cates:[{text:"新房",value:"NewHouse"},{text:"二手房",value:"SecondHandHouse"}],roomValue:{},keywordMsg:"",ex19:""},Ae?(Le.is_threshold=!0,Le.pagesize=Le.is_threshold?1e4:10,Le.currentPage=1,z()):(z(),C(),Le.currTimeType=1)):(0!=Le.isUpdate&&z(),C()),ye(),x(),e.$watch("vm.groupBuyRuleCheckedAll",function(){for(var e=0;e<Le.groupBuyDataList.length;e++)Le.groupBuyDataList[e].selected=Le.groupBuyRuleCheckedAll}),Le.isJikuWifi=-1!=window.location.href.indexOf("jikuwifi.comeoncloud.net")?!0:!1,d.checkPms("PMS_SUPPLIER",function(){Le.isShowSupplier=!0},function(){Le.isShowSupplier=!1}),d.checkPms("PMS_ONLYUPDATEPRODUCTSTOCK",function(){Le.isOnlyUpdateStock=!0},function(){Le.isOnlyUpdateStock=!1})}function u(e,t){if(e.length>0)for(var a=0;a<e.length;a++)if(t.date==e[a].date)return!0;return!1}function m(){Le.product_type?i.go("index.productEditor",{type:Le.product_type}):i.go("index.productEditorMall")}function g(e){i.go("index.productDetail",{productId:e,type:Le.product_type})}function v(){if(Le.currTimeType=parseInt(Le.currTimeType),1==Le.currTimeType){if(""==Le.timeObj.singleTime)return void l("友情提示","请选择时间");var e={id:0,date:Le.timeObj.singleTime.replace(/-/g,"/"),selected:!1};if(new Date(e.date+" 23:59:59")<new Date)return void l("友情提示","请选择今天之后的日期");Be.isHasSame(Le.timeList,e)||Le.timeList.push(e),Le.timeObj.singleTime=""}else{if(""==Le.timeObj.timeMultiStart||""==Le.timeObj.timeMultiEnd)return void l("友情提示","请选择时间");var e=new Date(Le.timeObj.timeMultiEnd).getTime()-new Date(Le.timeObj.timeMultiStart).getTime();if(0>e)return void l("友情提示","结束时间不能小于开始时间！");for(var t=0;e/36e5/24+1>t;t++){var a=new Date(Le.timeObj.timeMultiStart),o=new Date(a.setDate(a.getDate()+t)),s={id:0,date:o.format("yyyy/MM/dd"),selected:!1};if(new Date(new Date(Le.timeObj.timeMultiStart).format("yyyy/MM/dd")+" 23:59:59")<new Date)return void l("友情提示","请选择今天之后的日期开始");Be.isHasSame(Le.timeList,s)||Le.timeList.push(s)}Le.timeObj.timeMultiStart="",Le.timeObj.timeMultiEnd=""}h()}function h(){for(var e=Le.timeList,t=1;t<e.length;t++)if(new Date(e[t].date)>new Date(e[t-1].date)){for(var a=e[t],o=t;o>0&&new Date(a.date)>new Date(e[o-1].date);)e[o]=e[o-1],o--;e[o]=a}}function b(e){Le.timeList.splice(e,1),h()}function f(){if(Le.timeList.length>0)for(var e=Le.timeList.length-1;e>=0;e--)Le.timeList[e].selected&&Le.timeList.splice(e,1);h()}function y(e){window.open(e)}function _(e,t){window.location.href="uv"!=t?"/App/monitor/ProductEventDetails.aspx?pid="+e+"&pv="+t+"&type="+Le.product_type:"/App/monitor/ProductEventDetails.aspx?pid="+e+"&type="+Le.product_type}function x(){r.getMarketingCenterRight(function(e){if(e.status)for(var t=0;t<e.result.length;t++)"Pms_MarketingCenter_GroupBuy"==e.result[t]&&(Le.hasGroupRight=!0);else l("友情提示",e.msg)},function(e){l("友情提示","请求出错")})}function w(e,t,a){var o="保存成功";"category_id"==t&&(o="设置成功");var s={action:"updatefield",product_ids:e,field:t,value:a};r.updateProductField(s,function(e){0==e.errcode?(l("友情提示",o),"category_id"==t&&W()):l("友情提示",e.errmsg)},function(e){l("友情提示",e.errmsg)})}function k(t,a){if(1==t){Le.single=a,Le.single.type=t,Le.timeList=[];for(var o=a.limit_buy_time.split(","),s=0;s<o.length;s++){var i={id:0,date:o[s],selected:!1};Le.timeList.push(i)}h(),$("#setProductBuyTimeModal").modal({backdrop:"static",keyboard:!1})}else if(Le.single.type=t,Le.timeList=[],""!=e.ids)e.ids=e.ids.substring(e.ids,e.ids.length-1),e.value=0,console.log("商品id",e.ids),$("#setProductBuyTimeModal").modal({backdrop:"static",keyboard:!1});else{var r="友情提示",n="请至少选择一件产品";l(r,n)}}function D(e,t){Le.showData=[],Le.typeTitle=t,Le.showData=e.split(","),$("#showModal").modal()}function I(e,t){if(e.length>0)for(var a=0;a<e.length;a++)if(t==e[a])return!0;return!1}function T(){for(var t=0;t<Le.timeList.length;t++)I(Le.dateList,Le.timeList[t].date)||Le.dateList.push(Le.timeList[t].date);var a="";a=1==Le.single.type?Le.single.product_id:e.ids;var o=Le.dateList.toString(),s=layer.load();r.setProductBuyTime({action:"UpdateBuyTime",times:o,pids:a},function(e){layer.close(s),e.status?(l("友情提示","设置关闭购买日期成功"),S()):l("友情提示",e.msg)},function(e){layer.close(s),l("友情提示",e.msg)})}function S(){Le.dateList=[],Le.chooseDate="",e.ids="",Le.currTimeType=1,Le.closeTimeSelectAll=!1,z(),$("#setProductBuyTimeModal").modal("hide")}function P(){if(console.log(Le.chooseDate),
Le.dateList.length>0){for(var e=!1,t=0;t<Le.dateList.length;t++)if(Le.dateList[t]==Le.chooseDate){e=!0;break}e?(Le.chooseDate="",l("友情提示","不能添加相同日期")):Le.dateList.push(Le.chooseDate)}else Le.dateList.push(Le.chooseDate);Le.chooseDate="",Le.addboxshow=!Le.addboxshow,console.log("添加",Le.dateList)}function L(e){Le.dateList.splice(e,1),console.log("删除",Le.dateList)}function C(){r.getcategorysQ({type:Le.product_type}).then(function(e){var t={category_id:"",category_name:"全部分类"};if(e.list.unshift(t),Le.categorys=d.productCatePreSort(e.list),Le.choicecategorys=Le.categorys,""!=Le.category_id)for(var a in Le.categorys)Le.categorys[a].category_id==Le.category_id&&(Le.category=Le.categorys[a]);else Le.category=Le.categorys[0];Le.choicecategory=Le.choicecategorys[0]})}function A(){Le.currentPage=1,Le.category_id=Le.category.category_id,z()}function B(){Le.currentPage=1,Le.ex19=Le.roomValue.value,z()}function z(){var t={action:"list",pageindex:Le.currentPage,pagesize:Le.pagesize,keyword:Le.prokeyword,category_id:Le.category_id,is_onsale:Le.is_onsale,sort:Le.sort,type:Le.product_type,ex19:Le.ex19};Le.is_group_buy&&(t.is_group_buy=1),t.is_appointment=Le.is_appointment?"1":"",t.is_threshold=Le.is_threshold?"1":"";var a=layer.load();r.productlist("/admin/mall/product.ashx",t,function(t){layer.close(a),Le.prodcutsdatas=t.list,Le.totals=t.totalcount,e.ids=""},function(e){layer.close(a),console.log(e)})}function E(){return e.ids?e.ids.substring(0,e.ids.length-1):""}function R(e){for(var t=0;t<Le.groupBuyDataList.length;t++)Le.groupBuyDataList[t].selected=e.rule_id==Le.groupBuyDataList[t].rule_id?!0:!1}function M(){for(var e=[],t=0;t<Le.groupBuyDataList.length;t++)Le.groupBuyDataList[t].selected&&e.push(Le.groupBuyDataList[t].rule_id);return e.join(",")}function N(){var e=M();"0"==Le.isGroupType?r.setProductGroupBuyRule({product_id:Le.setRuleProduct.product_id,rule_ids:e}).then(function(e){e.status?(alert("参团设置成功"),J(),z()):alert("参团设置失败："+e.msg)}):r.sysOpenGroup({product_id:Le.setRuleProduct.product_id,rule_ids:e}).then(function(e){0==e.errcode?(alert("开团成功"),J(),z()):alert("开团失败")})}function F(){n("友情提示","您确定删除商品吗？","确定删除","取消删除",function(){e.ids=e.ids.toString(),","==e.ids.substring(e.ids.length-1,e.ids.length)&&(e.ids=e.ids.substring(e.ids,e.ids.length-1)),r.delpro("/admin/mall/product.ashx",{action:"delete",product_ids:e.ids},function(t){if(console.log(t),0==t.errcode){e.ids="";var a="友情提示",o="删除成功";l(a,o),z()}else l(t.errcode,t.errmsg)},function(e){console.log(e)})},function(){})}function O(){r.isonsale("/admin/mall/product.ashx",{action:"updatefield",product_ids:e.ids,field:"is_onsale",value:e.value},function(t){console.log(t),0==t.errcode&&(z(),e.selectedall=!1)},function(e){console.log(e)})}function j(){Le.currentPage=1,z()}function U(){Le.pagesize=Le.is_threshold?1e4:10,Le.currentPage=1,z()}function V(){Le.currentPage=1,z()}function H(e,t){Le.setRuleProduct=e,Le.isGroupType=t,Le.isRadio="0"==t?!0:!1,Ce.modal({backdrop:"static",keyboard:!1}),Le.groupBuyRuleCheckedAll=!1,r.groupBuyRuleList().then(function(e){Le.groupBuyDataList=e.result.list;for(var t=Le.setRuleProduct.group_buy_rule_list,a=0;a<Le.groupBuyDataList.length;a++)for(var o=0;o<t.length;o++)if(Le.groupBuyDataList[a].rule_id==t[o].rule_id){Le.groupBuyDataList[a].selected=!0;break}})}function J(){Ce.modal("hide")}function q(){Le.limit_type="1",e.ids="",z(),Le.choicecategory=Le.choicecategorys[0];for(var t=0;t<Le.tagsData.length;t++)Le.tagsData[t].select="0";$("#setAccessModal").modal("hide")}function W(){e.ids="",z(),Le.choicecategory=Le.choicecategorys[0],$("#setCategoryModal").modal("hide")}function G(){e.ids="",z();for(var t=0;t<Le.tagsData.length;t++)Le.tagsData[t].selected=!1;$("#setTagModal").modal("hide")}function X(){e.ids="",Le.sort="",z(),$("#setSortModal").modal("hide")}function Q(){e.ids="",Le.freightTemplate=Le.freightTemplates[0],z(),$("#setFreightTemplateModal").modal("hide")}function Z(){e.ids="",Le.currentSupplier=Le.supplierListData[0],z(),$("#setSupplierModal").modal("hide")}function K(){console.log(Le.currentPage),z()}function Y(){Le.sort="price_desc"==Le.sort?"price_asc":"price_desc",Le.currentPage=1,Le.prodcutsdatas=[],z()}function ee(){Le.sort="sales_volume"==Le.sort?"sales_asc":"sales_volume",Le.currentPage=1,Le.prodcutsdatas=[],z()}function te(){Le.sort="pv",Le.currentPage=1,Le.prodcutsdatas=[],z()}function ae(){Le.sort="uv_desc",Le.currentPage=1,Le.prodcutsdatas=[],z()}function oe(){if(""!=e.ids)e.ids=e.ids.substring(e.ids,e.ids.length-1),e.value=1,O();else{var t="友情提示",a="请至少选择一件产品";l(t,a)}}function se(){if(""!=e.ids)e.ids=e.ids.substring(e.ids,e.ids.length-1),e.value=0,O();else{var t="友情提示",a="请至少选择一件产品";l(t,a)}}function ie(){if(""!=e.ids)e.ids=e.ids.substring(e.ids,e.ids.length-1),e.value=0,$("#setAccessModal").modal({backdrop:"static",keyboard:!1});else{var t="友情提示",a="请至少选择一件产品";l(t,a)}}function le(){if(""!=e.ids)e.ids=e.ids.substring(e.ids,e.ids.length-1),e.value=0,$("#setCategoryModal").modal({backdrop:"static",keyboard:!1});else{var t="友情提示",a="请至少选择一件产品";l(t,a)}}function re(){if(console.log(e.ids),""!=e.ids)e.ids=e.ids.substring(e.ids,e.ids.length-1),$("#setTagModal").modal({backdrop:"static",keyboard:!1});else{var t="友情提示",a="请至少选择一件产品";l(t,a)}}function ne(){if(""!=e.ids)e.ids=e.ids.substring(e.ids,e.ids.length-1),$("#setSortModal").modal({backdrop:"static",keyboard:!1});else{var t="友情提示",a="请至少选择一件产品";l(t,a)}}function de(){if(""!=e.ids){var t={action:"list"};r.freightTemplateList(t,function(e){var t={freight_template_id:"",freight_template_name:"全部运费模块"};e.list.unshift(t),Le.freightTemplates=e.list,Le.freightTemplate=Le.freightTemplates[0]}),e.ids=e.ids.substring(e.ids,e.ids.length-1),$("#setFreightTemplateModal").modal({backdrop:"static",keyboard:!1})}else{var a="友情提示",o="请至少选择一件产品";l(a,o)}}function ce(){if(""!=e.ids)r.getSupplierList({pageindex:1,pagesize:1e3,keyword:""},function(e){Le.supplierListData=[];var t={name:"无",value:""};Le.supplierListData.push(t);for(var a=0;a<e.rows.length;a++){var o={name:e.rows[a].company_name,value:e.rows[a].user_id};Le.supplierListData.push(o)}Le.currentSupplier=Le.supplierListData[0],console.log(["vm.supplierListData",Le.supplierListData])},function(e){}),e.ids=e.ids.substring(e.ids,e.ids.length-1),$("#setSupplierModal").modal({backdrop:"static",keyboard:!1});else{var t="友情提示",a="请至少选择一件产品";l(t,a)}}function pe(){var t="";if("1"==Le.limit_type)t=e.ids,ue(t);else if("2"==Le.limit_type)t=Le.choicecategory.category_id,me(t);else if("3"==Le.limit_type){for(var a=0;a<Le.tagsData.length;a++)"1"==Le.tagsData[a].select&&(t+=Le.tagsData[a].tag_id+",");t=t.substring(0,t.length-1),me(t)}}function ue(t){r.setAccessLevel({action:"setAccessLevel",pid:t,access_level:Le.access_level}).then(function(t){if(t.status){l("友情提示","批量设置商品访问等级成功"),Le.limit_type="1",e.ids="";for(var a=0;a<Le.tagsData.length;a++)Le.tagsData[a].select="0";$("#setAccessModal").modal("hide"),z()}else l("友情提示",t.msg)})}function me(t){r.setAccessLevel({action:"setAccessLevelByCategory",category_id:t,access_level:Le.access_level}).then(function(t){if(t.status){l("友情提示","批量设置商品访问等级成功"),Le.limit_type="1",e.ids="";for(var a=0;a<Le.tagsData.length;a++)Le.tagsData[a].select="0";$("#setAccessModal").modal("hide"),z()}else l("友情提示",t.msg)})}function ge(){if(""!=e.ids)console.log(["$scope.ids",e.ids]),F();else{var t="友情提示",a="请至少选择一件产品";l(t,a)}}function ve(e){Le.is_onsale=isNaN(parseInt(e))?"":parseInt(e),Le.currentPage=1,z()}function he(e){console.log(["点击回车",e]),console.log(Le.prokeyword);var t=window.event?e.keyCode:e.which;13===t&&(Le.currentPage=1,z())}function be(){Le.currentPage=1,z()}function fe(t){e.ids=t.product_id,F()}function ye(){r.gettags("/admin/mall/tag.ashx",{action:"list",pageindex:1,pagesize:1e3},function(e){Le.tagsData=e.list,console.log(["获得商品标签成功",e])},function(e){console.log(["获得商品标签请求失败",e])})}function _e(e){e.selected="undefined"==typeof e.selected?!0:!e.selected}function xe(){for(var t=[],a=0;a<Le.tagsData.length;a++)1==Le.tagsData[a].selected&&t.push(Le.tagsData[a].tag_name);var o="";o="0"==Le.tag_type?"UpdateProductTagByAdd":"1"==Le.tag_type?"UpdateProductTagByDelete":"UpdateProductTag",r.batchSetTags({action:o,pids:e.ids,tags:t.join(",")},function(t){if(t.status){l("友情提示","批量设置商品标签成功"),Le.tag_type="0",e.ids="";for(var a=0;a<Le.tagsData.length;a++)Le.tagsData[a].selected=!1;$("#setTagModal").modal("hide"),z()}else l("友情提示",t.msg)},function(e){console.log(["获得商品标签请求失败",e])})}function we(){r.batchSetSort({action:"BatchSetSort",pids:e.ids,sort:Le.sort},function(t){t.status?(l("友情提示","批量设置商品排序成功"),e.ids="",Le.sort=0,$("#setSortModal").modal("hide"),z()):l("友情提示",t.msg)},function(e){console.log(["批量设置商品排序请求失败",e])})}function ke(t,a,o){var s={action:"UpdateField",product_ids:t,value:o,field:a};r.updateProductField(s,function(t){0==t.errcode?(l("友情提示","批量设置运费模块完成"),e.ids="",$("#setFreightTemplateModal").modal("hide"),z()):l("友情提示",t.msg)},function(e){console.log(["批量设置运费模块请求失败",e])})}function De(){var t={action:"UpdateField",product_ids:e.ids,value:Le.currentSupplier.value,field:"supplier_userid"};r.updateProductField(t,function(t){0==t.errcode?(l("友情提示","批量设置供应商完成"),e.ids="",$("#setSupplierModal").modal("hide"),z()):l("友情提示",t.msg)},function(e){console.log(["批量设置运费模块请求失败",e])})}function Ie(){console.log(Le.pagesize),z()}function Te(e){$("#qCodeModal").modal("show");var t="",a=""!=Le.weixinBindDomain?Le.weixinBindDomain:window.location.host;t=-1!=window.location.href.indexOf("jikuwifi.comeoncloud.net")?"http://"+window.location.host+"/customize/jikuwifi/?v=1.0&ngroute="+encodeURIComponent("/jikuProductDetail?id="+e.product_id)+"#/jikuProductDetail?id="+e.product_id:-1!=window.location.href.indexOf("mixblu.comeoncloud.net")?"http://"+a+"/customize/mixblu/index.aspx?v=1.0&ngroute=/productDetail/"+e.product_id+"#/productDetail/"+e.product_id:"Course"==Le.product_type?"http://"+a+"/customize/YouZheng/Course/Detail.aspx?id="+e.product_id:"Houses"==Le.product_type?"http://"+a+"/customize/shop/index.aspx?v=1.0&ngroute=/housesDetail/"+e.product_id+"#/housesDetail/"+e.product_id:"http://"+a+"/customize/shop/index.aspx?v=1.0&ngroute=/productDetail/"+e.product_id+"#/productDetail/"+e.product_id,r.createQCode({code:t},function(e){Le.qcodedata={qcode:e.result.qrcode_url,url:t}})}function Se(e){0!=e.record_product_count&&i.go("index.productStockRecord",{product_id:e.product_id})}function Pe(){n("友情提示","您确定导出商品吗？","确定","取消",function(){var e={keyword:Le.prokeyword,category_id:Le.category_id,is_onsale:Le.is_onsale,sort:Le.sort};e.is_group_buy=Le.is_group_buy?1:"",e.is_appointment=Le.is_appointment?"1":"",e.is_threshold=Le.is_threshold?"1":"",window.open(t.mainsiteurl+"/serv/api/admin/mall/exportproduct.ashx?keyword="+e.keyword+"&category_id="+e.category_id+"&is_onsale="+e.is_onsale+"&sort="+e.sort+"&is_group_buy="+e.is_group_buy+"&is_appointment="+e.is_appointment+"&is_threshold="+e.is_threshold)},function(){})}var Le=e.vm=s.productListVM,Ce=$("#setGroupRuleModal"),$e=void 0==a.type?"":a.type,Ae="";"stockcount"==$e&&(Ae=$e,$e=""),"undefined"!=typeof Le&&$e!=Le.product_type&&(Le=void 0);var Be=e.vf={init:p,isGroupBuyCheck:j,showGroupBuyModal:H,hideGroupBuyModal:J,hideAccessModal:q,hideTagModal:G,hideSortModal:X,hideFreightTemplateModal:Q,hideSupplierModal:Z,hideBuyTimeModal:S,pageChanged:K,sortByPrice:Y,sortByPv:te,sortBySaleCount:ee,sortByWxRead:ae,pushUpBtn:oe,pullDownBtn:se,setAccessBtn:ie,setAccessLevel:pe,setProductBuyTimeBtn:k,showModelBtn:D,setProductBuyTime:T,delallproductBtn:ge,delproductBtn:fe,whichStatuBtn:ve,ctrlsearch:he,search:be,changeSelectCate:A,getSelectIds:E,submitSetGroupBuyRule:N,gettags:ye,setProductAccessByPid:ue,setProductAccessByCategoryId:me,createQcodeBtn:Te,addDates:P,delChoosedDate:L,updateProductField:w,hideCategoryModal:W,setCategoryBtn:le,setTagBtn:re,setSortBtn:ne,setFreightTemplateBtn:de,setSupplierUserBtn:ce,getGroupRight:x,goToMonitor:_,goToOtherPage:y,selectTag:_e,setTags:xe,batchSort:we,batchSetFreightTemplate:ke,selectValue:Ie,isHasSame:u,addTimeFunc:v,delSingleTime:b,delMultiTime:f,addProduct:m,editProduct:g,isAppointmentCheck:V,toHrefStock:Se,ruleRadio:R,isThresholdCheck:U,showExportProduct:Pe,batchSetSupplier:De,changeRoomType:B};p(),Le.keywordMsg="输入您要搜索的商品","Course"==Le.product_type?(Le.TitleName="课程列表",Le.keywordMsg="输入您要搜索的课程",Le.isCourse=!1):"Houses"==Le.product_type?(Le.TitleName="楼盘列表",Le.keywordMsg="输入您要搜索的楼盘",Le.roomValue=Le.cates[0]):Le.isCourse=!0,e.$watch("vm.closeTimeSelectAll",function(e,t,a){for(var o=0;o<Le.timeList.length;o++)Le.timeList[o].selected=Le.closeTimeSelectAll}),e.selectme=function(t){t.selected=!t.selected,console.log(t.selected);var a=!0;Le.prodcutsdatas.filter(function(e){e.selected||(a=!1)}),e.selectedall=a,t.selected?(e.ids+=t.product_id+",",console.log(e.ids)):(e.ids=e.ids.replace(t.product_id+",",""),console.log(e.ids))},e.selectedall=!1,e.ids="",e.checkedall=function(){e.selectedall=!e.selectedall,e.ids="",angular.forEach(Le.prodcutsdatas,function(t){t.selected=e.selectedall,e.selectedall?(e.ids+=t.product_id+",",console.log(["$scope.ids",e.ids])):(e.ids="",console.log(["$scope.ids",e.ids]))})}}e.$inject=["$scope","$rootScope","$stateParams","$q","$sessionStorage","$state","alertbox","mmpadminAPI","alertconformbox","commService","$location"],angular.module("mmpadmin").controller("productListCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i,l,r,n,d,c,p,u,m,g){function v(e){d.getProvinces(function(t){for(var a=0;a<t.list.length;a++)t.list[a].code==e&&(y.currProvince=t.list[a]),y.provinceList.push(t.list[a]);console.log("vm.provinceList",y.provinceList)},function(){console.log("请求省份失败")})}function h(e,t){if(e)d.getCities({province_code:e},function(e){y.cityList=y.cityList.concat(e.list);for(var a=0;a<y.cityList.length;a++)y.cityList[a].code==t&&(y.currCity=y.cityList[a]);console.log("vm.cityList",y.cityList)},function(){console.log("请求城市失败")});else{if(y.cityList.splice(1,y.cityList.length-1),y.currCity=y.cityList[0],y.districtList.splice(1,y.districtList.length-1),y.currDistrict=y.districtList[0],!y.currProvince.code)return;d.getCities({province_code:y.currProvince.code},function(e){y.cityList=y.cityList.concat(e.list),console.log("vm.cityList",y.cityList)},function(){console.log("请求城市失败")})}}function b(e,t){if(e)d.getDistricts({city_code:e},function(e){y.districtList=y.districtList.concat(e.list);for(var a=0;a<y.districtList.length;a++)y.districtList[a].code==t&&(y.currDistrict=y.districtList[a])},function(){console.log("请求地区失败")});else{if(y.districtList.splice(1,y.districtList.length-1),y.currDistrict=y.districtList[0],!y.currCity.code)return;d.getDistricts({city_code:y.currCity.code},function(e){y.districtList=y.districtList.concat(e.list);for(var a=0;a<y.districtList.length;a++)y.districtList[a].code==t&&(y.currDistrict=y.districtList[a]);console.log("vm.districtList",y.districtList)},function(){console.log("请求地区失败")})}}function f(){(new tt.RV).set(/^\d+$/,"请输入非负整数").add("productscore"),(new tt.RV).set(/^\d{0,8}\.{0,1}(\d{1,2})?$/,"请输入正数，最多两位小数").add("productPrice","productQuotePrice")}t.product_type=void 0==l.type?"":l.type;{var y=t.vm={product_desc_temp:"",editor:"",productType:t.product_type,provinceList:[{name:"选择省份",code:""}],currProvince:null,cityList:[{name:"选择城市",code:""}],currCity:null,districtList:[{name:"选择地区",code:""}],currDistrict:null,tBuilds:[{text:"选择楼盘类型",value:""},{text:"现房",value:"现房"},{text:"期房",value:"期房"}],cates:[{text:"选择楼盘分类",value:""},{text:"新房",value:"NewHouse"},{text:"二手房",value:"SecondHandHouse"}],roomTypes:[{text:"选择房型",value:""},{text:"一室",value:"一室"},{text:"二室",value:"二室"},{text:"三室",value:"三室"},{text:"四室",value:"四室"},{text:"五室",value:"五室"},{text:"五室以上",value:"五室以上"}]};t.vf={getProvinces:v,getCitys:h,getDistricts:b}}t.ADMIN_CONFIG=p,t.isshowsku=p.productEditor.sku,t.tagArray=[],t.tabArray=[],t.contentArray=[],t.productId=l.productId,t.hasScoreShop=!1,t.isShowSupplier=!1,t.categoryData={category:{}},t.tagData={tag:{}},t.productList=[],t.productEditorData={category_id:"",have_property_list:[],img_url:"",is_onsale:1,price:0,product_code:"",product_desc:"",product_id:0,product_summary:"",product_title:"",quote_price:0,show_img_list:[],skus:[],sort:0,tags:"",totalcount:0,freight_template_id:0,access_level:0,price_config_list:[],is_need_name_phone:!0,tab_ex_title1:"",tab_ex_title2:"",tab_ex_title3:"",tab_ex_title4:"",tab_ex_title5:"",tab_ex_content1:"",tab_ex_content2:"",tab_ex_content3:"",tab_ex_content4:"",tab_ex_content5:"",relation_product_id:"",type:y.productType,is_appointment:"0",appointment_start_time:"",appointment_end_time:"",appointment_delivery_time:"",supplier_userid:"",address:"",province:"",province_code:"",city:"",city_code:"",district:"",district_code:"",ex1:"",ex2:"",ex3:"",ex4:"",ex5:"",ex6:"",ex7:"",ex8:0,ex9:"",ex10:"",ex11:"",ex12:0,ex13:0,ex14:0,ex15:"",ex16:"",ex17:"",ex18:"",ex19:""},t.keywordP="",t.currentPage=1,t.pagesize=10,t.articleCurrPage=1,t.articleCurrPage=1,t.articlePageSize=10,t.totalItems=0,t.articleKeyWord="",t.category_id="",t.articleList=[],t.articleCategorys=[],t.articleCategory={},t.currEditObj={},t.index=0,t.extextList=[{ex_field:"ex_article_id_1",ex_article_title:"ex_article_title_1",key:"扩展内容1",value_id:0,value_title:"请选择一篇文章",isShow:!1},{ex_field:"ex_article_id_2",ex_article_title:"ex_article_title_2",key:"扩展内容2",value_id:0,value_title:"请选择一篇文章",isShow:!1},{ex_field:"ex_article_id_3",ex_article_title:"ex_article_title_3",key:"扩展内容3",value_id:0,value_title:"请选择一篇文章",isShow:!1},{ex_field:"ex_article_id_4",ex_article_title:"ex_article_title_4",key:"扩展内容4",value_id:0,value_title:"请选择一篇文章",isShow:!1},{ex_field:"ex_article_id_5",ex_article_title:"ex_article_title_5",key:"扩展内容5",value_id:0,value_title:"请选择一篇文章",isShow:!1}],t.articleInfo={},t.configLength=0,t.timePageSize=5,t.timeCurrentPage=1,t.timeTotalItems=0,t.currTimeType=1,t.timeList=[],t.timeObj={singleTime:"",singlePrice:0,timeMultiStart:"",timeMultiEnd:"",timeMultiPrice:0},t.week=LADatePicker.config.week,t.dataList=[],t.isJikuWifi=!1,t.categoryP_id="",t.tabTitleName="",t.init=function(){$(window).scroll(function(){var e=$("body"),t=$(".ke-container"),a=$(".ke-container .ke-toolbar"),o=e.get(0).scrollTop,s=t.offset().top,i=o-s;0>i&&(i=0),a.css({position:"relative",top:i+"px"})}),t.isJikuWifi=-1!=window.location.href.indexOf("jikuwifi.comeoncloud.net")?!0:!1;var e={id:0,dayList:[],year:2016,month:3,date:new Date,selectDate:{},hasBeforeToday:!1};t.dataList.timeList=t.timeList,t.dataList.calendar=e,t.getArticleList(),t.getArticleCategory(),t.getExtendConfig(),t.getcanaddproducts(),t.getSupplierList(),t.productId?(t.getProductDetail(),t.getProductByPids()):(t.getcategory(),t.getSupplierList(),t.gettags(),t.getFreightTemplate(),t.isJikuWifi&&y.editor.html(t.productEditorData.product_desc),window.location.href.indexOf("//mixblu.")>0&&y.editor.html($("#mixBluCnt").html()),t.showSelect(t.dataList)),f(),u.checkPms("PMS_SCORESHOP",function(){t.hasScoreShop=!0,t.isJikuWifi&&(t.hasScoreShop=!1)},function(){t.hasScoreShop=!1}),u.checkPms("PMS_SUPPLIER",function(){t.isShowSupplier=!0},function(){t.isShowSupplier=!1}),"Houses"==y.productType&&(t.productId||(y.currProvince=y.provinceList[0],y.currCity=y.cityList[0],y.currDistrict=y.districtList[0],v()))},t.isHasSame=function(e,t){if(e.length>0)for(var a=0;a<e.length;a++)if(t.date==e[a].date)return t.price!=e[a].price&&(e[a].price=t.price),!0;return!1},t.addTimeFunc=function(){if(t.currTimeType=parseInt(t.currTimeType),1==t.currTimeType){if(""==t.timeObj.singleTime)return void c("友情提示","请选择时间");var e={id:0,date:t.timeObj.singleTime.replace(/-/g,"/"),price:t.timeObj.singlePrice};if(new Date(e.date+" 23:59:59")<new Date)return void c("友情提示","请选择今天之后的日期");if(e.price<=0||void 0==e.price)return void c("友情提示","价格不能为0");t.isHasSame(t.timeList,e)||t.timeList.push(e),t.setItemDateList(t.dataList,new Date(t.timeObj.singleTime).getFullYear(),new Date(t.timeObj.singleTime).getMonth()+1),t.timeObj.singleTime="",t.timeObj.singlePrice=0}else{if(""==t.timeObj.timeMultiStart||""==t.timeObj.timeMultiEnd)return void c("友情提示","请选择时间");var e=new Date(t.timeObj.timeMultiEnd).getTime()-new Date(t.timeObj.timeMultiStart).getTime();if(0>e)return void c("友情提示","结束时间不能小于开始时间！");for(var a=0;e/36e5/24+1>a;a++){var o=new Date(t.timeObj.timeMultiStart),s=new Date(o.setDate(o.getDate()+a)),i={id:0,date:s.format("yyyy/MM/dd"),price:t.timeObj.timeMultiPrice};if(new Date(new Date(t.timeObj.timeMultiStart).format("yyyy/MM/dd")+" 23:59:59")<new Date)return void c("友情提示","请选择今天之后的日期开始");if(i.price<=0||void 0==i.price)return void c("友情提示","价格不能为0");t.isHasSame(t.timeList,i)||t.timeList.push(i)}t.setItemDateList(t.dataList,new Date(t.timeObj.timeMultiStart).getFullYear(),new Date(t.timeObj.timeMultiStart).getMonth()+1),t.timeObj.timeMultiStart="",t.timeObj.timeMultiEnd="",t.timeObj.timeMultiPrice=0}},t.showArticleFrame=function(e){$("#pddealModal").modal("show"),t.index=e},t.checkedtab="",t.showTabFrame=function(){return t.tabArray.length>3?void alert("添加TAB上限"):(t.tabTitleName="",void $("#tabViewModal").modal("show"))},t.delTabFrame=function(e){t.tabArray.splice(e,1),t.contentArray.splice(e,1),y.editor.html(t.productEditorData.product_desc),t.checkedtab="",console.log(["tabArray",t.tabArray]),console.log(["contentArray",t.contentArray])},t.btnCencel=function(){$("#tabViewModal").modal("hide")},t.btnConfirm=function(){return""==t.tabTitleName?void alert("请输入TAB标题"):t.tabArray.indexOf(t.tabTitleName)>-1?void alert("不能添加重复的TAB标题"):(t.tabArray.push(t.tabTitleName),t.contentArray.push("默认内容"),console.log(t.tabArray),void $("#tabViewModal").modal("hide"))},t.UpdateBgColor=function(e){t.checkedtab!=e&&(t.checkedtab=e);var a=t.tabArray.indexOf(e);a>-1&&y.editor.html(t.contentArray[a])},t.UpdateBgColordef=function(){t.checkedtab="",y.editor.html(t.productEditorData.product_desc)},t.openRecommendProduct=function(){$("#recommendProductModal").modal("show")},t.selectedall=!1,t.prods=[],t.ids="",t.checkedall=function(){t.selectedall=!t.selectedall,t.ids="",angular.forEach(t.productlistdatas,function(e){if(e.selected=t.selectedall,t.selectedall){t.ids+=e.product_id+",";var a=t.prods.indexOf(e);-1==a&&t.prods.push(e)}else t.ids="",t.prods=[]})},t.selectme=function(e){e.selected=!e.selected,console.log(e.selected);var a=!0;if(t.productlistdatas.filter(function(e){e.selected||(a=!1)}),t.selectedall=a,e.selected)t.ids+=e.product_id+",",t.prods.push(e);else{t.ids=t.ids.replace(e.product_id+",","");for(var o=t.prods.length-1;o>=0;o--)t.prods[o].product_id==e.product_id&&t.prods.splice(o,1)}},t.delProduct=function(e){t.prods.splice(e,1)},t.getArticleList=function(){d.getArticleList({pageindex:t.articleCurrPage,pagesize:t.articlePageSize,keyword:t.articleKeyWord,article_tags:"",category_id:void 0==t.articleCategory.category_id?"":t.articleCategory.category_id},function(e){console.log("文章列表",e),e.isSuccess?(t.totalItems=e.returnObj.totalcount,t.articleList=e.returnObj.list):console.log("文章列表失败",e)},function(e){console.log("文章列表请求失败",e)})},t.whichArticleCategory=function(e){console.log(e),t.category_id=""!=e.category_id?e.category_id:"",t.articleCurrPage=1,t.articleList=[],t.getArticleList()},t.getArticleCategory=function(){d.getArticleAssort({pageindex:1,pagesize:1e3,keyword:""},function(e){console.log("文章分类列表",e);var a={category_id:"",category_name:"全部文章"};e?(e.list.unshift(a),t.articleCategorys=e.list,t.articleCategory=t.articleCategorys[0]):console.log("文章分类列表失败",e)})},t.closeArticleFrame=function(e){t.extextList[t.index].value_id=e.article_id,t.extextList[t.index].value_title=e.article_name,$("#pddealModal").modal("hide")},t.clearArticle=function(e){t.extextList[e].value_id=0,t.extextList[e].value_title="请选择一篇文章"},t.articlePageChanged=function(){console.log("第"+t.articleCurrPage+"页"),t.getArticleList()},t.articleCtrlSearch=function(e){console.log(["点击回车",e]),console.log(t.articleKeyWord);var a=window.event?e.keyCode:e.which;13===a&&(t.articleCurrPage=1,t.articleList=[],t.getArticleList())},t.getExtendConfig=function(){d.getExtendConfig(function(e){if(e.status){if(e.result.product_ex_content&&e.result.product_ex_content.length>0){t.configLength=e.result.product_ex_content.length;for(var a=0;a<e.result.product_ex_content.length;a++)"ex_article_title_1"==e.result.product_ex_content[a].ex_field&&(t.extextList[0].key=e.result.product_ex_content[a].ex_article_title,t.extextList[0].isShow=!0),"ex_article_title_2"==e.result.product_ex_content[a].ex_field&&(t.extextList[1].key=e.result.product_ex_content[a].ex_article_title,t.extextList[1].isShow=!0),"ex_article_title_3"==e.result.product_ex_content[a].ex_field&&(t.extextList[2].key=e.result.product_ex_content[a].ex_article_title,t.extextList[2].isShow=!0),"ex_article_title_4"==e.result.product_ex_content[a].ex_field&&(t.extextList[3].key=e.result.product_ex_content[a].ex_article_title,t.extextList[3].isShow=!0),"ex_article_title_5"==e.result.product_ex_content[a].ex_field&&(t.extextList[4].key=e.result.product_ex_content[a].ex_article_title,t.extextList[4].isShow=!0)}}else console.log("获取失败",e)},function(e){console.log("请求获取失败",e)})},t.getProductDetail=function(){d.productDetail({action:"get",product_id:t.productId},function(e){console.log(["获取商品详情成功",e]),t.productEditorData=e,e.ex8&&(t.productEditorData.ex8=parseFloat(e.ex8)),e.ex12&&(t.productEditorData.ex12=parseFloat(e.ex12)),e.ex13&&(t.productEditorData.ex13=parseFloat(e.ex13)),e.ex14&&(t.productEditorData.ex14=parseFloat(e.ex14)),t.tagArray=e.tags?e.tags.split(","):[],e.relation_product_id&&d.getProductByPids({action:"ListByPids",pids:e.relation_product_id},function(e){t.prods=e.list;for(var a=0;a<e.list.length;a++)t.ids+=e.list[a].product_id+","},function(e){console.log(["获取推荐商品列表请求失败",e])}),null!=t.productEditorData.ex_article_id_1&&(t.extextList[0].value_id=t.productEditorData.ex_article_id_1,t.extextList[0].value_title=t.productEditorData.ex_article_title_1),null!=t.productEditorData.ex_article_id_2&&(t.extextList[1].value_id=t.productEditorData.ex_article_id_2,t.extextList[1].value_title=t.productEditorData.ex_article_title_2),null!=t.productEditorData.ex_article_id_3&&(t.extextList[2].value_id=t.productEditorData.ex_article_id_3,t.extextList[2].value_title=t.productEditorData.ex_article_title_3),null!=t.productEditorData.ex_article_id_4&&(t.extextList[3].value_id=t.productEditorData.ex_article_id_4,t.extextList[3].value_title=t.productEditorData.ex_article_title_4),null!=t.productEditorData.ex_article_id_5&&(t.extextList[4].value_id=t.productEditorData.ex_article_id_5,t.extextList[4].value_title=t.productEditorData.ex_article_title_5),t.productEditorData.is_cashpay_only=1==t.productEditorData.is_cashpay_only?!0:!1,t.productEditorData.is_need_name_phone=1==t.productEditorData.is_need_name_phone?!0:!1,null!=t.productEditorData.tab_ex_title1&&""!=t.productEditorData.tab_ex_title1&&(t.tabArray.push(t.productEditorData.tab_ex_title1),t.contentArray.push(t.productEditorData.tab_ex_content1)),null!=t.productEditorData.tab_ex_title2&&""!=t.productEditorData.tab_ex_title2&&(t.tabArray.push(t.productEditorData.tab_ex_title2),t.contentArray.push(t.productEditorData.tab_ex_content2)),null!=t.productEditorData.tab_ex_title3&&""!=t.productEditorData.tab_ex_title3&&(t.tabArray.push(t.productEditorData.tab_ex_title3),t.contentArray.push(t.productEditorData.tab_ex_content3)),null!=t.productEditorData.tab_ex_title4&&""!=t.productEditorData.tab_ex_title4&&(t.tabArray.push(t.productEditorData.tab_ex_title4),t.contentArray.push(t.productEditorData.tab_ex_content4)),t.getcategory(),t.getSupplierList(),t.gettags(),t.getFreightTemplate(),""!=t.productEditorData.product_desc&&(y.editor.html(t.productEditorData.product_desc),setTimeout(function(){var e=y.editor.edit.doc.body.scrollHeight;y.editor.edit.setHeight(e)},1e3)),t.timeList=angular.fromJson(angular.toJson(t.productEditorData.price_config_list)),t.dataList.timeList=t.timeList,t.showSelect(t.dataList),"Houses"==y.productType&&(v(t.productEditorData.province_code),h(t.productEditorData.province_code,t.productEditorData.city_code),b(t.productEditorData.city_code,t.productEditorData.district_code))},function(e){console.log(["获取商品详情请求失败",e])})},t.getProductByPids=function(){},(window.location.href.indexOf("//mixblu.")>0||window.location.href.indexOf("//mixblu2.")>0)&&y.editor.html($("#mixBluCnt").html()),t.openTagBox=function(){a.open({animation:!1,templateUrl:"app/components/productTagBox/productTagBox.html",controller:"productTagCtrl",size:"lg",resolve:{items:function(){return t.items}}})},t.openUpLoadImg=function(){a.open({animation:!1,templateUrl:"app/components/upLoadImgs/upLoadImgs.html",controller:"productEditorCtrl",size:"lg",resolve:{items:function(){return t.items}}})},t.upLoadImg=function(){console.log("imgSrcs",imgSrcs),imgSrcs&&n(function(e){for(var t in e)$("#inputImage").parent().before("<label title='Upload image file' for='"+t+"' class='btn-default uploadImg'><img src='"+e[t]+"' id='"+t+"' class='uploadImg'></label>")})},t.submitImg=function(){d.upLoadFileImg("/common/file.ashx",{action:"add"},function(e){console.log(["上传成功",e])},function(e){console.log(["上传请求失败",e])})},t.getcategory=function(){d.getcategorys({pageindex:1,pagesize:1e3,type:y.productType,keyword:""},function(e){if(console.log(["categoryData",e]),t.categoryData=u.productCatePreSort(e.list),t.currentCategory=[],t.productId)for(var a in t.categoryData)t.categoryData[a].category_id===parseInt(t.productEditorData.category_id)&&(t.currentCategory=t.categoryData[a]);console.log(["获得商品分类成功",e])},function(e){console.log(["获得商品分类请求失败",e])})},t.getSupplierList=function(){d.getSupplierList({pageindex:1,pagesize:1e3,keyword:""},function(e){t.supplierListData=[];for(var a=0;a<e.rows.length;a++){var o={name:e.rows[a].company_name,value:e.rows[a].user_id};t.supplierListData.push(o)}if(console.log(["供应商",t.supplierListData]),t.currentSupplier=[],t.productId)for(var a=0;a<t.supplierListData.length;a++)t.supplierListData[a].value==t.productEditorData.supplier_userid&&(t.currentSupplier=t.supplierListData[a])},function(e){})},t.refeshTagBtn=function(){t.gettags()},t.gettags=function(){var e="";y.productType&&(e=y.productType),d.gettags("/admin/mall/tag.ashx",{action:"list",pageindex:1,pagesize:1e4,tag_type:e},function(e){t.tagsData=e.list,angular.forEach(t.tagsData,function(e,a){if(e.select=0,t.productId)for(var o in t.tagArray)t.tagArray[o]==e.tag_name&&(e.select=1)}),console.log(["获得商品标签成功",e])},function(e){console.log(["获得商品标签请求失败",e])})},t.getFreightTemplate=function(){d.freightTemplateList({action:"list"},function(e){if(console.log(["freightTemplateList",e]),t.freightTemplateData=e.list,t.currentFreightTemplate=[],t.productId)for(var a in t.freightTemplateData)t.freightTemplateData[a].freight_template_id===parseInt(t.productEditorData.freight_template_id)&&(t.currentFreightTemplate=t.freightTemplateData[a]);console.log(["获得运费模板成功",e])},function(e){console.log(["获得运费模板失败",e])})},t.getNewField=function(){0!=t.extextList[0].value_id&&(t.productEditorData.ex_article_id_1=t.extextList[0].value_id,t.productEditorData.ex_article_title_1=t.extextList[0].value_title),0!=t.extextList[1].value_id&&(t.productEditorData.ex_article_id_2=t.extextList[1].value_id,t.productEditorData.ex_article_title_2=t.extextList[1].value_title),0!=t.extextList[2].value_id&&(t.productEditorData.ex_article_id_3=t.extextList[2].value_id,t.productEditorData.ex_article_title_3=t.extextList[2].value_title),0!=t.extextList[3].value_id&&(t.productEditorData.ex_article_id_4=t.extextList[3].value_id,t.productEditorData.ex_article_title_4=t.extextList[3].value_title),0!=t.extextList[4].value_id&&(t.productEditorData.ex_article_id_5=t.extextList[4].value_id,t.productEditorData.ex_article_title_5=t.extextList[4].value_title)},t.submitProductFunc=function(){t.productEditorData.tags="";var a="";angular.forEach(t.tagsData,function(e,t){1===e.select&&(a+=e.tag_name+",")});for(var o="",s=0;s<t.prods.length;s++)o+=t.prods[s].product_id+",";t.productEditorData.relation_product_id=o.substring(0,o.length-1),a.length>1&&(a=a.substr(0,a.length-1),t.productEditorData.tags=a),t.productEditorData.is_cashpay_only=t.productEditorData.is_cashpay_only?1:0,
t.productEditorData.is_need_name_phone=t.productEditorData.is_need_name_phone?1:0,t.productEditorData.score=u.strToInt(t.productEditorData.score),t.productEditorData.price=u.strToFloat(t.productEditorData.price),t.productEditorData.category_id=0,t.currentCategory&&(t.productEditorData.category_id=t.currentCategory.category_id),t.currentSupplier?(t.productEditorData.supplier_userid=t.currentSupplier.value,console.log("updatesupplier"+t.currentSupplier.value)):t.productEditorData.supplier_userid="",t.productEditorData.freight_template_id=0,t.currentFreightTemplate&&"undefined"!=typeof t.currentFreightTemplate.freight_template_id&&(t.productEditorData.freight_template_id=t.currentFreightTemplate.freight_template_id),t.getNewField(),t.productEditorData.price_config_list=t.timeList,t.productEditorData.tab_ex_title1="",t.productEditorData.tab_ex_title2="",t.productEditorData.tab_ex_title3="",t.productEditorData.tab_ex_title4="",t.productEditorData.tab_ex_title5="",t.productEditorData.tab_ex_content1="",t.productEditorData.tab_ex_content2="",t.productEditorData.tab_ex_content3="",t.productEditorData.tab_ex_content4="",t.productEditorData.tab_ex_content5="";for(var l=0;l<t.tabArray.length;l++)0==l?(t.productEditorData.tab_ex_title1=t.tabArray[l],t.productEditorData.tab_ex_content1=t.contentArray[l]):1==l?(t.productEditorData.tab_ex_title2=t.tabArray[l],t.productEditorData.tab_ex_content2=t.contentArray[l]):2==l?(t.productEditorData.tab_ex_title3=t.tabArray[l],t.productEditorData.tab_ex_content3=t.contentArray[l]):3==l&&(t.productEditorData.tab_ex_title4=t.tabArray[l],t.productEditorData.tab_ex_content4=t.contentArray[l]);t.productEditorData.base_price=u.numberNullProc(t.productEditorData.base_price),t.productEditorData.weight=u.numberNullProc(t.productEditorData.weight),t.productEditorData.weight<0&&(t.productEditorData.weight=0);for(var l=0;l<t.productEditorData.skus.length;l++)t.productEditorData.skus[l].base_price=u.numberNullProc(t.productEditorData.skus[l].base_price),t.productEditorData.skus[l].weight=u.numberNullProc(t.productEditorData.skus[l].weight),t.productEditorData.skus[l].weight<0&&(t.productEditorData.skus[l].weight=0);"Houses"==y.productType&&(y.currProvince.code&&(t.productEditorData.province=y.currProvince.name,t.productEditorData.province_code=y.currProvince.code),y.currCity.code&&(t.productEditorData.city=y.currCity.name,t.productEditorData.city_code=y.currCity.code),y.currDistrict.code&&(t.productEditorData.district=y.currDistrict.name,t.productEditorData.district_code=y.currDistrict.code));var n=JSON.stringify(t.productEditorData);console.log(n),t.checkIsRequired()&&(t.productId?d.submitProduct({action:"update",data:n},function(t){if(0===t.errcode)"undefined"!=typeof i.productListVM&&i.productListVM.isUpdate++,e.product_times=0,e.product_isback=!0,y.productType?r.go("index.productList",{type:y.productType}):r.go("index.productList");else{console.log(["编辑商品失败",t]);var a="友情提示";c(a,t.errmsg)}},function(e){console.log(["编辑商品请求失败",e])}):d.submitProduct({action:"add",data:n},function(e){if(0===e.errcode)i.$reset(),y.productType?r.go("index.productList",{type:y.productType}):r.go("index.productList");else{console.log(["创建商品失败",e]);var t="友情提示";c(t,e.errmsg)}},function(e){console.log(["创建商品请求失败",e])}))},d.getcategorys({pageindex:1,pagesize:1e3,keyword:"",type:""},function(e){var a={category_id:"",category_name:"全部商品"};e.list.unshift(a),t.categorys=e.list,t.categoryP=t.categorys[0]},function(e){console.log("商品分类",e)}),t.ctrlsearchP=function(e){var a=window.event?e.keyCode:e.which;13===a&&(t.currentPage=1,t.productlistdatas=[],t.getcanaddproducts())},t.checkIsRequired=function(){if(!tt.validateForm("productEditForm"))return!1;if(""==t.productEditorData.product_title)return c("友情提示","请输入商品名称"),$("#productTitle").focus(),!1;if("Houses"==y.productType){if(!t.productEditorData.address)return c("友情提示","请输入地址"),$("#productAddress").focus(),!1;if(""==t.productEditorData.price)return c("友情提示","请输入售价"),$("#price").focus(),!1}else if(!t.productEditorData.price&&!t.productEditorData.score)return $("#price").focus(),c("友情提示","商品价格和积分必填一项"),!1;return""==t.productEditorData.quote_price?($("#quotePrice").focus(),c("友情提示","请输入商品原价"),!1):0==t.productEditorData.show_img_list.length?(c("友情提示","请上传商品图片"),o(function(){document.body.scrollTop=$("#pictureupload").offset().top},2e3),!1):(""==t.productEditorData.rebate_price_rate&&(t.productEditorData.rebate_price_rate=0),""==t.productEditorData.rebate_score_rate&&(t.productEditorData.rebate_score_rate=0),!0)},t.whichcateP=function(e){t.categoryP_id="全部商品"!=e.prop_name?e.category_id:"",t.currentPage=1,t.productlistdatas=[],t.getcanaddproducts()},t.getcanaddproducts=function(){d.productlist("/admin/mall/product.ashx",{action:"list",pageindex:t.currentPage,pagesize:t.pagesize,is_onsale:1,keyword:t.keywordP,category_id:t.categoryP_id},function(e){console.log(["获取商品列表成功",e]),t.productlistdatas=e.list,t.totalItems=e.totalcount,t.pageindexs=Math.ceil(t.totalItems/t.pagesize)},function(e){console.log(["获取商品列表请求失败",e])})},t.pageChanged=function(){console.log(t.currentPage),t.getcanaddproducts()},t.selectProBtn=function(){$("#dealModal").modal("show"),t.selectMeBtn=function(e){$("#dealModal").modal("hide"),t.productEditorData.relation_product_id=e.product_id}},t.clearBtn=function(){t.productEditorData.relation_product_id=""},t.getArticleDetail=function(e){d.getArticleInfo({article_id:e},function(e){console.log("文章预览详情",e),t.articleInfo=e})},t.openProductView=function(e){$("#productViewModal").modal("show"),t.getArticleDetail(e)},t.mouseleave=function(){$("#productViewModal").modal("hide")},t.showSelect=function(e){0==e.calendar.dayList.length&&(t.setItemDateList(e,e.calendar.date.getFullYear(),e.calendar.date.getMonth()+1),console.log("item.calendar.dayList",e.calendar.dayList))},t.selectDate=function(e,t){t&&(t.isBeforeToday()||(t.isCheck=!t.isCheck,e.calendar.selectDate.day=t.getDate()))},t.toNextMonth=function(e){t.toMonth(e,1)},t.toPreMonth=function(e){e.calendar.selectDate.day="",e.calendar.hasBeforeToday||t.toMonth(e,-1)},t.toMonth=function(e,a){e.calendar.selectDate.day="",LADatePicker.dateAdd("m",a,e.calendar.date),t.setItemDateList(e,e.calendar.date.getFullYear(),e.calendar.date.getMonth()+1)},t.setItemDateList=function(e,a,o){e.calendar.year=a,e.calendar.month=o,e.calendar.dayList=LADatePicker.createDayArr(e.calendar.year,e.calendar.month),e.calendar.hasBeforeToday=LADatePicker.hasBeforeToday(e.calendar.dayList);for(var s=0;s<e.calendar.dayList.length;s++)for(var i=0;i<e.calendar.dayList[s].length;i++)if(0!=e.calendar.dayList[s][i]){var l=e.calendar.dayList[s][i].year+"/"+e.calendar.dayList[s][i].month+"/"+e.calendar.dayList[s][i].day,r=new Date(l).format("yyyy/MM/dd");if(void 0!=t.dataList.timeList&&t.dataList.timeList.length>0)for(var n=0;n<t.dataList.timeList.length;n++)if(r==t.dataList.timeList[n].date){e.calendar.dayList[s][i].price=t.dataList.timeList[n].price;break}e.calendar.dayList[s][i].showbtn=!1}},t.delPrice=function(){for(var e=t.dataList.calendar.dayList,a=0;a<e.length;a++)for(var o=0;o<e[a].length;o++)if(0!=e[a][o]){var s=e[a][o].year+"/"+e[a][o].month+"/"+e[a][o].day,i=new Date(s).format("yyyy/MM/dd");if(void 0!=t.dataList.timeList&&t.dataList.timeList.length>0)for(var l=0;l<t.dataList.timeList.length;l++)if(i==t.dataList.timeList[l].date&&e[a][o].isCheck){t.dataList.timeList.splice(l,1);break}}LADatePicker.clearCheck(t.dataList.calendar.dayList),t.timeList=t.dataList.timeList,t.timeList.length>0?t.setItemDateList(t.dataList,(new Date).getFullYear(),(new Date).getMonth()+1):t.setItemDateList(t.dataList,t.dataList.calendar.date.getFullYear(),t.dataList.calendar.date.getMonth()+1)},t.dbClickFunc=function(e){e.showbtn=!0},t.saveBtn=function(e){if(e.showbtn){var a=e.year+"/"+e.month+"/"+e.day,o=new Date(a).format("yyyy/MM/dd"),a={id:0,date:o,price:e.price};t.isHasSame(t.timeList,a)||t.timeList.push(a),t.dataList.timeList=t.timeList,t.setItemDateList(t.dataList,e.year,e.month)}},t.cancelBtn=function(e){e.showbtn=!1},e.product_times=0,e.product_isback=!1,t.goBackToList=function(){e.product_times>0?m("友情提示","您有更改的内容未保存，确认离开？","确认","取消",function(){e.product_times=0,e.product_isback=!0,history.go(-1)},function(){}):(e.product_times=0,e.product_isback=!0,history.go(-1))},window.onbeforeunload=function(){window.location.href.indexOf("index/productEditor")>=0&&e.product_times>0&&(event.returnValue="您有更改的内容未保存，确认离开？")},window.onbeforeunload(),t.$watch("dataList.timeList",function(a,o,s){var i=t.timeList,l=t.productEditorData.price_config_list;if(i.length!=l.length&&e.product_times++,0==e.product_times)for(var r=0;r<i.length;r++)for(var n=0;n<l.length;n++)i[r].date==l[n].date&&i[r].price!=l[n].price&&e.product_times++},!0),y.editor=KindEditor.create("#txtEditor",{uploadJson:e.mainsiteurl+"/kindeditor-4.1.10/asp.net/upload_json_ChangeName.ashx",items:["source","|","fontsize","forecolor","hilitecolor","|","undo","redo","|","bold","italic","underline","removeformat","|","justifyleft","justifycenter","justifyright","|","video","image","multiimage","link","unlink","lineheight","|","baidumap","|","cleardoc"],extraFileUploadParams:{userID:WEBSITE_CONFIG.curr_user_id},filterMode:!1,imageUploadLimit:100,width:"100%",minHeight:"600px",cssData:"img{ max-width: 100%;}",cssPath:[e.mainsiteurl+"/customize/shop/styles/vendor-c433b2fdc9.css",e.mainsiteurl+"/customize/shop/styles/app-7993f4b789.css"],afterChange:function(){var e=t.tabArray.indexOf(t.checkedtab);e>-1?t.contentArray[e]=this.html():t.productEditorData.product_desc=this.html(),y.product_desc_temp=g.trustAsHtml(this.html())}}),t.init()}e.$inject=["$rootScope","$scope","$modal","$timeout","$http","$sessionStorage","$stateParams","$state","checklocalimg","mmpadminAPI","alertbox","ADMIN_CONFIG","commService","alertconformbox","$sce"],angular.module("mmpadmin").controller("productEditorCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i,l,r,n,d){function c(){B.isSonghe=t.isSonghe,p(),u()}function p(){t.allArea?(B.provincesData=angular.fromJson(t.allArea),B.first?A():B.first=!0):i.getAllArea(function(e){console.log(["获取省市区列表成功",e]),t.allArea=angular.toJson(e),B.provincesData=e,B.first?A():B.first=!0},function(e){console.log(["获取省市区列表失败",e])})}function u(){B.id?i.getOneFreightTemplate({freight_template_id:B.id},function(e){console.log(["获取模板信息成功",e]),B.freightTemplate=e,B.first?A():B.first=!0},function(e){console.log(["获取模板信息失败",e])}):B.first?A():B.first=!0}function m(e){e.showCity=1}function g(e){e.showCity=0}function v(e){e.showDistrict=1}function h(e){e.showDistrict=0}function b(e,t,a){if(1==a.districtSelected)e.proviceSelected=0,t.citySelected=0,a.districtSelected=0;else{a.districtSelected=1;for(var o=0,s=0;s<t.children.length;s++)if(0===t.children[s].districtSelected){o++;break}if(o>0)return;t.citySelected=1;for(var i=0,s=0;s<e.children.length;s++)if(0===e.children[s].citySelected){i++;break}0===i&&(e.proviceSelected=1)}}function f(e,t){if(1==t.citySelected)e.proviceSelected=0,t.citySelected=0,angular.forEach(t.children,function(e){1==e.addshow&&(e.districtSelected=0)});else{t.citySelected=1;for(var a=0,o=0;o<e.children.length;o++)if(0===e.children[o].citySelected){a++;break}0===a&&(e.proviceSelected=1),angular.forEach(t.children,function(e){1==e.addshow&&(e.districtSelected=1)})}}function y(e){1==e.proviceSelected?(e.proviceSelected=0,angular.forEach(e.children,function(e){1==e.addshow&&(e.citySelected=0),angular.forEach(e.children,function(e){1==e.addshow&&(e.districtSelected=0)})})):(e.proviceSelected=1,angular.forEach(e.children,function(e){1==e.addshow&&(e.citySelected=1),angular.forEach(e.children,function(e){1==e.addshow&&(e.districtSelected=1)})}))}function _(){angular.forEach(B.curProvincesData,function(e,t){var a={code:e.code,name:e.name,parent_code:e.parent_code,type:e.type,children:[],showCity:e.showCity,proviceSelected:e.proviceSelected,addshow:e.addshow,edit:e.edit,alreadyAddShow:e.alreadyAddShow,children_codes:e.children_codes},o=!1;angular.forEach(B.curValuationRule.provincesData,function(t,s){t.code==e.code&&(o=!0,a=t)});var s=!1;angular.forEach(e.children,function(t,o){var i={code:t.code,name:t.name,parent_code:t.parent_code,type:t.type,children:[],showDistrict:t.showDistrict,citySelected:t.citySelected,addshow:t.addshow,edit:t.edit,alreadyAddShow:t.alreadyAddShow,children_codes:t.children_codes},l=!1;angular.forEach(a.children,function(e,a){e.code==t.code&&(l=!0,i=e)});var r=!1;angular.forEach(t.children,function(o,s){var l={code:o.code,name:o.name,parent_code:o.parent_code,type:o.type,districtSelected:o.districtSelected,addshow:o.addshow,edit:o.edit,alreadyAddShow:o.alreadyAddShow,children_codes:o.children_codes};1==o.districtSelected&&(o.addshow=0,e.alreadyAddShow=t.alreadyAddShow=o.alreadyAddShow=1,l.addshow=0,a.alreadyAddShow=i.alreadyAddShow=l.alreadyAddShow=1,i.children.push(l),r=!0),o.districtSelected=0}),1==t.citySelected?(t.addshow=0,i.addshow=0,e.alreadyAddShow=t.alreadyAddShow=1,a.alreadyAddShow=i.alreadyAddShow=1,l||(a.children.push(i),s=!0)):r&&!l&&(a.children.push(i),s=!0),t.citySelected=0}),1==e.proviceSelected?(e.addshow=0,e.alreadyAddShow=1,a.addshow=0,a.alreadyAddShow=1,o||B.curValuationRule.provincesData.push(a)):s&&!o&&B.curValuationRule.provincesData.push(a),e.proviceSelected=0})}function x(e,t){var a=[];a.push(e.code),angular.forEach(e.children,function(e,t){a.push(e.code),angular.forEach(e.children,function(e,t){a.push(e.code)})}),angular.forEach(B.curProvincesData,function(t,o){t.code==e.code&&(angular.forEach(t.children,function(e){a.indexOf(e.code)>=0&&(angular.forEach(e.children,function(e){a.indexOf(e.code)>=0&&(e.addshow=1,e.alreadyAddShow=0)}),e.addshow=1,e.alreadyAddShow=0)}),t.addshow=1,t.alreadyAddShow=0)}),B.curValuationRule.provincesData.splice(t,1),console.log("proviceItem",e)}function w(e){for(var t=0,a=0;a<e.length;a++)if(1==e[a].alreadyAddShow){t=1;break}return t}function k(e,t,a){var o=[];o.push(t.code),angular.forEach(t.children,function(e,t){o.push(e.code)}),angular.forEach(B.curProvincesData,function(a,s){return a.code==e.code?(angular.forEach(a.children,function(e){return e.code==t.code?(angular.forEach(e.children,function(e){o.indexOf(e.code)>=0&&(e.addshow=1,e.alreadyAddShow=0)}),e.addshow=1,e.alreadyAddShow=0,!1):void 0}),a.addshow=1,!1):void 0}),e.children.splice(a,1),e.alreadyAddShow=w(e.children)}function D(e,t,a,o){angular.forEach(B.curProvincesData,function(o,s){return o.code==e.code?(angular.forEach(o.children,function(e){return e.code==t.code?(angular.forEach(e.children,function(e){e.code==a.code&&(e.addshow=1,e.alreadyAddShow=0)}),e.addshow=1,!1):void 0}),o.addshow=1,!1):void 0}),t.children.splice(o,1),t.alreadyAddShow=w(t.children),e.alreadyAddShow=w(e.children)}function I(){if(console.log(B.curValuationRule.provincesData),0==B.curValuationRule.provincesData.length)return r("友情提示","请选择区域"),!1;var e=[],t=[],a=[];angular.forEach(B.freightTemplate.valuation_rules,function(e,t){t!=B.index&&(a=a.concat(e.area_code_list))});for(var o=0;o<B.curValuationRule.provincesData.length;o++)if(B.curValuationRule.provincesData[o].showCity=0,0==B.curValuationRule.provincesData[o].addshow){for(var s=!1,i=0;i<B.curValuationRule.provincesData[o].children_codes.length;i++)if(a.indexOf(B.curValuationRule.provincesData[o].children_codes[i])>=0){s=!0;break}if(s){if(B.curValuationRule.provincesData[o].children)for(var l=0;l<B.curValuationRule.provincesData[o].children.length;l++)if(B.curValuationRule.provincesData[o].children[l].showDistrict=0,0==B.curValuationRule.provincesData[o].children[l].addshow){for(var n=!1,d=0;d<B.curValuationRule.provincesData[o].children[l].children_codes.length;d++)if(a.indexOf(B.curValuationRule.provincesData[o].children[l].children_codes[d])>=0){n=!0;break}if(n){if(B.curValuationRule.provincesData[o].children[l].children){for(var c=[],p=0;p<B.curValuationRule.provincesData[o].children[l].children.length;p++)a.indexOf(B.curValuationRule.provincesData[o].children[l].children[p].code)<0&&(e.push(B.curValuationRule.provincesData[o].children[l].children[p].code),c.push(B.curValuationRule.provincesData[o].children[l].children[p].name));c.length>0&&t.push(B.curValuationRule.provincesData[o].children[l].name+"（"+c.join(",")+"）")}}else e.push(B.curValuationRule.provincesData[o].children[l].code),t.push(B.curValuationRule.provincesData[o].children[l].name)}else if(B.curValuationRule.provincesData[o].children[l].children){for(var c=[],p=0;p<B.curValuationRule.provincesData[o].children[l].children.length;p++)0==B.curValuationRule.provincesData[o].children[l].children[p].addshow&&(e.push(B.curValuationRule.provincesData[o].children[l].children[p].code),c.push(B.curValuationRule.provincesData[o].children[l].children[p].name));c.length>0&&t.push(B.curValuationRule.provincesData[o].children[l].name+"（"+c.join(",")+"）")}}else e.push(B.curValuationRule.provincesData[o].code),t.push(B.curValuationRule.provincesData[o].name)}else if(B.curValuationRule.provincesData[o].children)for(var l=0;l<B.curValuationRule.provincesData[o].children.length;l++)if(B.curValuationRule.provincesData[o].children[l].showDistrict=0,0==B.curValuationRule.provincesData[o].children[l].addshow){for(var n=!1,d=0;d<B.curValuationRule.provincesData[o].children[l].children_codes.length;d++)if(a.indexOf(B.curValuationRule.provincesData[o].children[l].children_codes[d])>=0){n=!0;break}if(n){if(B.curValuationRule.provincesData[o].children[l].children){for(var c=[],p=0;p<B.curValuationRule.provincesData[o].children[l].children.length;p++)a.indexOf(B.curValuationRule.provincesData[o].children[l].children[p].code)<0&&(e.push(B.curValuationRule.provincesData[o].children[l].children[p].code),c.push(B.curValuationRule.provincesData[o].children[l].children[p].name));c.length>0&&t.push(B.curValuationRule.provincesData[o].children[l].name+"（"+c.join(",")+"）")}}else e.push(B.curValuationRule.provincesData[o].children[l].code),t.push(B.curValuationRule.provincesData[o].children[l].name)}else if(B.curValuationRule.provincesData[o].children[l].children){for(var c=[],p=0;p<B.curValuationRule.provincesData[o].children[l].children.length;p++)0==B.curValuationRule.provincesData[o].children[l].children[p].addshow&&(e.push(B.curValuationRule.provincesData[o].children[l].children[p].code),c.push(B.curValuationRule.provincesData[o].children[l].children[p].name));c.length>0&&t.push(B.curValuationRule.provincesData[o].children[l].name+"（"+c.join(",")+"）")}B.provincesData=B.curProvincesData,B.curValuationRule.area_code_list=e,B.curValuationRule.area_name_list=t,B.curValuationRule.areaNames=t.join("、"),-1==B.index?B.freightTemplate.valuation_rules.push(B.curValuationRule):B.freightTemplate.valuation_rules[B.index]=B.curValuationRule,B.index=-1,console.log(["一个运费模板",B.freightTemplate]),$("#myModal4").modal("hide")}function T(){B.index=-1,B.curProvincesData=[],B.curValuationRule={}}function S(e){var t=[];angular.forEach(B.freightTemplate.valuation_rules[e].provincesData,function(e,a){t.push(e.code),angular.forEach(e.children,function(e,a){t.push(e.code),angular.forEach(e.children,function(e,a){t.push(e.code)})})}),angular.forEach(B.provincesData,function(e,a){t.indexOf(e.code)>=0&&(angular.forEach(e.children,function(e){t.indexOf(e.code)>=0&&(angular.forEach(e.children,function(e){t.indexOf(e.code)>=0&&(e.addshow=1,e.alreadyAddShow=0)}),e.addshow=1,e.alreadyAddShow=0)}),e.addshow=1,e.alreadyAddShow=0)}),B.freightTemplate.valuation_rules.splice(e,1)}function P(e,t){B.curProvincesData=angular.fromJson(angular.toJson(B.provincesData)),B.curValuationRule=angular.fromJson(angular.toJson(e)),console.log(B.curValuationRule),B.index=t,$("#myModal4").modal({backdrop:"static",keyboard:!1})}function L(){var e={freight_template_id:B.freightTemplate.freight_template_id,freight_template_name:B.freightTemplate.freight_template_name,is_enable:1,valuation_rules:[],calc_type:B.freightTemplate.calc_type,freight_limit_type:B.freightTemplate.freight_limit_type,freight_free_limit:B.freightTemplate.freight_free_limit};angular.forEach(B.freightTemplate.valuation_rules,function(t,a){var o={area_code_list:t.area_code_list,initial_product_count:t.initial_product_count,initial_amount:t.initial_amount,add_product_count:t.add_product_count,add_amount:t.add_amount};e.valuation_rules.push(o)});var t=JSON.stringify(e);B.id?i.editFreightTemplate({data:t},function(e){if(console.log(["编辑运费模板成功",e]),0===e.errcode)n.go("index.freightTemplate");else{var t="友情提示";r(t,e.errmsg)}},function(e){console.log(["编辑运费模板失败",e])}):i.addFreightTemplate({data:t},function(e){if(console.log(["提交运费模板成功",e]),0===e.errcode)n.go("index.freightTemplate");else{var t="友情提示";r(t,e.errmsg)}},function(e){console.log(["提交运费模板失败",e])})}function C(){B.curValuationRule={rule_id:0,area_code_list:[],initial_product_count:1,initial_amount:0,add_product_count:0,add_amount:0,areaNames:"",provincesData:[]},B.curProvincesData=angular.fromJson(angular.toJson(B.provincesData)),B.index=-1,$("#myModal4").modal({backdrop:"static",keyboard:!1})}function A(){angular.forEach(B.provincesData,function(e,t){e.showCity=0,e.proviceSelected=0,e.addshow=1,e.edit=0,e.children_codes=[],angular.forEach(e.children,function(t,a){t.showDistrict=0,t.citySelected=0,t.addshow=1,t.edit=0,t.children_codes=[],e.children_codes.push(t.code),angular.forEach(t.children,function(a,o){a.districtSelected=0,a.addshow=1,a.edit=0,e.children_codes.push(a.code),t.children_codes.push(a.code),e.alreadyAddShow=0,t.alreadyAddShow=0,a.alreadyAddShow=0})})}),B.provincesJson=angular.toJson(B.provincesData);var e=[];angular.forEach(B.freightTemplate.valuation_rules,function(t,a){e=e.concat(t.area_code_list)});var t=0;angular.forEach(B.freightTemplate.valuation_rules,function(a,o){a.provincesData=[];var s=[];angular.forEach(B.provincesData,function(t,o){if(e.indexOf(t.code)>=0&&a.area_code_list.indexOf(t.code)<0){for(var i=!1,l=0;l<a.area_code_list.length;l++)if(t.children_codes.indexOf(a.area_code_list[l])>=0){i=!0;break}if(!i)return}var r={code:t.code,name:t.name,parent_code:t.parent_code,type:t.type,children:[],showCity:t.showCity,proviceSelected:t.proviceSelected,addshow:1,edit:t.edit,alreadyAddShow:0,children_codes:t.children_codes};a.area_code_list.indexOf(t.code)>=0&&(t.addshow=0,r.addshow=0,t.alreadyAddShow=1,r.alreadyAddShow=1,s.push(t.name)),angular.forEach(t.children,function(o,i){if(e.indexOf(o.code)>=0&&a.area_code_list.indexOf(o.code)<0){for(var l=!1,n=0;n<a.area_code_list.length;n++)if(o.children_codes.indexOf(a.area_code_list[n])>=0){l=!0;break}if(!l)return}var d={code:o.code,name:o.name,parent_code:o.parent_code,type:o.type,children:[],showDistrict:o.showDistrict,citySelected:o.citySelected,addshow:1,edit:o.edit,alreadyAddShow:0,children_codes:o.children_codes};0==r.addshow?(o.addshow=0,d.addshow=0,t.alreadyAddShow=o.alreadyAddShow=1,r.alreadyAddShow=d.alreadyAddShow=1):a.area_code_list.indexOf(o.code)>=0&&(o.addshow=0,d.addshow=0,t.alreadyAddShow=o.alreadyAddShow=1,r.alreadyAddShow=d.alreadyAddShow=1);var c=[];angular.forEach(o.children,function(s,i){if(!(e.indexOf(s.code)>=0&&a.area_code_list.indexOf(s.code)<0)){var l={code:s.code,name:s.name,parent_code:s.parent_code,type:s.type,districtSelected:s.districtSelected,addshow:1,edit:s.edit,alreadyAddShow:0,children_codes:s.children_codes};0==d.addshow?(s.addshow=0,l.addshow=0,t.alreadyAddShow=o.alreadyAddShow=s.alreadyAddShow=1,r.alreadyAddShow=d.alreadyAddShow=l.alreadyAddShow=1):a.area_code_list.indexOf(s.code)>=0&&(s.addshow=0,l.addshow=0,t.alreadyAddShow=o.alreadyAddShow=s.alreadyAddShow=1,r.alreadyAddShow=d.alreadyAddShow=l.alreadyAddShow=1,c.push(s.name)),1==l.alreadyAddShow&&d.children.push(l)}}),c.length>0?s.push(o.name+"（"+c.join(",")+"）"):a.area_code_list.indexOf(o.code)>=0&&s.push(o.name),1==d.alreadyAddShow&&r.children.push(d)}),1==r.alreadyAddShow&&a.provincesData.push(r)}),a.areaNames=s.join("、"),t++}),console.log(B.provincesData),console.log(B.freightTemplate.valuation_rules)}{var B=e.vm={index:-1,id:l.freightTemplateId,first:!1,freightTemplate:{freight_template_id:0,freight_template_name:"",is_enable:1,valuation_rules:[],calc_type:"count",freight_limit_type:0},rules_area_codes:[],provincesData:[],provincesJson:"",curProvincesData:[],isSonghe:"",curValuationRule:[]};e.vf={showCities:m,hideCities:g,selectProvince:y,showDistrict:v,hideDistrict:h,selectCity:f,selectDistrict:b,deleteSelectedProvince:x,deleteSelectedCity:k,deleteSelectedDistrict:D,delArea:S,editArea:P,addarea:_,showRegionDialog:C,addValuationRuleArea:I,colseAreaWindow:T,saveFreightTemplate:L}}c()}e.$inject=["$scope","$rootScope","$modal","$http","checklocalimg","mmpadminAPI","$stateParams","alertbox","$state","$timeout"],angular.module("mmpadmin").controller("freightTemplateEditorCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i,l,r,n,d,c){e.freightTemplateListData=[],l.freightTemplateList({action:"list"},function(t){console.log(["获取运费模板列表成功",t]),angular.forEach(t.list,function(e,t){e.last_modiffty_date=new Date(e.last_modiffty_date)}),e.freightTemplateListData=t.list},function(e){console.log(["获取运费模板列表失败",e])}),a(function(){t.allArea||l.getAllArea(function(e){console.log(["获取省市区列表成功",e]),t.allArea=angular.toJson(e)},function(e){console.log(["获取省市区列表失败",e])})}),e.delFreightTemplateFunc=function(t,a){c("友情提示","您确定删除运费模板吗？","确定删除","取消删除",function(){l.delFreightTemplate({freight_template_id:t},function(e){console.log(["删除运费模板成功",e])},function(e){console.log(["删除运费模板失败",e])}),e.freightTemplateListData.splice(a,1)},function(){})}}e.$inject=["$scope","$rootScope","$timeout","$modal","$http","checklocalimg","mmpadminAPI","$stateParams","alertbox","$state","alertconformbox"],angular.module("mmpadmin").controller("freightTemplateCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s){t.product_type="undefined"==a.type?"":a.type;var i=t.categorydata={category_name:"",category_id:a.sortID,category_description:"",category_img_url:"",type:""};e.getCategoryInfoQ({category_id:i.category_id}).then(function(a){return angular.extend(i,a),t.category_img_url=[i.category_img_url],e.getcategorysQ({type:t.product_type})}).then(function(e){var a={category_id:0,category_name:"无"};e.list.unshift(a),t.categorys=[];for(var o=!1,s=0;s<e.list.length;s++){var l=e.list[s];l.category_parent_id||l.category_id==i.category_id||t.categorys.push(l),l.category_parent_id==i.category_id&&(o=!0)}o&&(t.categorys=[{category_id:0,category_name:"当前分类已经是父分类"}])}),t.editcategoryBtn=function(){return t.category_img_url&&(i.category_img_url=t.category_img_url[0]),""==i.category_name?void s("友情提示","请输入要添加的分类名称"):(console.log(i),void e.editCategory({data:angular.toJson(i)},function(e){console.log(e),0==e.errcode?(s("友情提示","更改分类成功"),t.product_type?o.go("index.productSort",{type:t.product_type}):o.go("index.productSortMall")):s("错误提示",e.errmsg)}))}}e.$inject=["mmpadminAPI","$scope","$stateParams","$state","alertbox"],angular.module("mmpadmin").controller("editProductSortCtrl",e)}(),function(){"use strict";function e(e,t){function a(){e.getArticleInfo({article_id:t.articleID},function(e){console.log("文章预览详情",e),o.articleInfo=e})}var o=this;o.articleInfo={},o.getArticleDetail=a,a()}e.$inject=["mmpadminAPI","$stateParams"],angular.module("mmpadmin").controller("articleViewCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s){t.product_type=void 0==a.type?"":a.type;var i=t.categorydata={category_name:"",category_description:"",category_parent_id:0,category_img_url:"",type:""};e.getcategorys({pageindex:1,pagesize:1e4,type:t.product_type,keyword:""},function(e){var a={category_id:"",category_name:"无"};console.log(e),e.list.unshift(a),t.categorys=e.list,t.categorys=[];for(var o=0;o<e.list.length;o++){var s=e.list[o];s.category_parent_id||t.categorys.push(s)}t.boxdata=t.categorys[0]},function(e){console.log("商品分类",e)}),t.whichcategory=function(e){console.log(e),i.category_parent_id=""==e.category_id?0:e.category_id},t.addcategoryBtn=function(){return i.category_img_url&&(i.category_img_url=i.category_img_url[0]),""==i.category_name?void s("友情提示","请输入要添加的分类名称"):(t.product_type&&(i.type=t.product_type),console.log(angular.toJson(i)),void e.addCategory({data:angular.toJson(i)},function(e){console.log(e),0==e.errcode&&(s("友情提示","添加分类成功"),t.product_type?o.go("index.productSort",{type:t.product_type}):o.go("index.productSortMall"))}))}}e.$inject=["mmpadminAPI","$scope","$stateParams","$state","alertbox"],angular.module("mmpadmin").controller("addProductSortCtrl",e)}(),function(){"use strict";function e(e,t,a,o){e.getraiseOrders({pageindex:1,pagesize:1},function(s){t.totalItems=s.totalcount,t.currentPage=""==a.pageID||void 0==a.pageID?1:parseInt(a.pageID),t.order_status=""==a.statuID||void 0==a.statuID?"":a.statuID,t.seletID=a.statuID,t.pagesize=10,e.getraiseOrders({pageindex:t.currentPage,pagesize:t.pagesize,order_status:t.order_status},function(e){console.log(["众筹订单列表",e]),t.raiseorderDatas=e.list,t.totalItems=e.totalcount}),t.pageChanged=function(){o.go("index.raiseorderList",{pageID:t.currentPage})}})}e.$inject=["mmpadminAPI","$scope","$stateParams","$state"],angular.module("mmpadmin").controller("raiseorderListCtrl",e)}(),function(){"use strict";function e(e,t,a,o){function s(){var t={pageindex:1,pagesize:1e3};a.getExpressList(t,function(t){t&&(console.log("快递列表",t),e.expressCompanys=e.expressCompanys.concat(e.addexpressCompany),e.expressCompanys=e.expressCompanys.concat(t.list))},function(e){console.log(e)})}function i(){a.getraiseorderdetail({order_id:t.orderID},function(t){if(console.log(["获取众筹订单详情成功",t]),e.orderdata=t,t.express_company_name?(e.logisticsInfo={express_number:e.orderdata.express_number},e.expressCompanys=[],a.getExpressList({pageindex:1,pagesize:1e3},function(t){e.expressCompanys=e.expressCompanys.concat(e.addexpressCompany),e.expressCompanys=e.expressCompanys.concat(t.list);for(var a in e.expressCompanys)e.orderdata.express_company_name==e.expressCompanys[a].express_company_name&&(e.expressCompany=e.expressCompanys[a])},function(e){console.log(e)})):a.getExpressList({pageindex:1,pagesize:1e3},function(t){e.expressCompanys=e.expressCompanys.concat(e.addexpressCompany),e.expressCompanys=e.expressCompanys.concat(t.list),e.expressCompany=e.expressCompanys[0]},function(e){console.log(e)}),t.order_status)for(var o in e.orderStatus)t.order_status==e.orderStatus[o].name&&(e.statuName.name=e.orderStatus[o])})}e.orderStatus=[{name:"待付款"},{name:"待发货"},{name:"已发货"},{name:"已取消"}],e.statuName={},e.expressCompanys=[],e.addexpressCompany={express_company_id:0,express_company_name:"请选择物流公司"},s(),e.raiseorderid=t.orderID,e.logisticsInfo={express_company_name:"",express_number:""},i(),e.submitExpressBtn=function(){return 0==e.expressCompany.express_company_id?void o("友情提示","请选择快递公司"):(e.logisticsInfo.express_company_name=e.expressCompany.express_company_name,e.logisticsInfo.express_company_code=e.expressCompany.express_company_code,""==e.logisticsInfo.express_number?void o("友情提示","请输入物流单号"):void a.submitExpressInfo({order_id:e.raiseorderid,express_company_code:e.logisticsInfo.express_company_code,express_company_name:e.logisticsInfo.express_company_name,express_number:e.logisticsInfo.express_number},function(e){console.log(["提交物流信息成功",e]),0==e.errcode?(o("友情提示","发货成功"),i()):o("错误代码："+e.errcode,"错误信息："+e.errmsg)},function(e){console.log(["提交物流信息失败",e])}))},e.updateSatusBtn=function(){return void 0==e.statuName.name||null==e.statuName.name?void o("友情提示","请选择订单状态"):(e.statu=e.statuName.name.name,void a.updateStatus({order_id:e.raiseorderid,order_status:e.statu},function(e){console.log(e),0==e.errcode?(o("友情提示","更新订单状态成功"),i()):o("错误代码："+e.errcode,"错误信息："+e.errmsg)},function(e){console.log(e)}))}}e.$inject=["$scope","$stateParams","mmpadminAPI","alertbox"],angular.module("mmpadmin").controller("raiseorderDetailCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i,l,r){function n(){l.getorderdetail({order_id:u.order_id},function(e){console.log("订单详情",e),u.orderdata=e,u.orderdata.product_list[0].selected=!0,u.selectProduct=u.orderdata.product_list[0],0==u.orderdata.order_type?(u.orderdata.ex9="微信商城",u.selectProduct.ex5=u.selectProduct.show_property,
u.pay_type=u.orderdata.pay_type):1==u.orderdata.order_type?(u.orderdata.ex9="微信商城",u.selectProduct.ex5=u.selectProduct.show_property,u.pay_type=u.orderdata.pay_type):2==u.orderdata.order_type?(u.orderdata.ex9="微信商城",u.selectProduct.ex5=u.selectProduct.show_property,u.pay_type=u.orderdata.pay_type):8==u.orderdata.order_type&&"True"==u.orderdata.ex5&&(u.pay_type="在线支付")},function(e){console.log(e)})}function d(e){for(var t=0;t<u.orderdata.product_list.length;t++)u.orderdata.product_list[t].selected=u.orderdata.product_list[t].order_detail_id==e.order_detail_id?!0:!1;u.selectProduct=e}function c(){$("#wrapPrintBody").print({iframe:!0})}function p(){n()}console.log(a.orderID);{var u=e.vm={ADMIN_CONFIG:r,order_id:a.orderID,orderdata:[],pay_type:"",selectProduct:{}};e.vf={getOrderdetail:n,printOrder:c,selectBtn:d}}p()}e.$inject=["$scope","$sessionStorage","$stateParams","$state","alertbox","alertconformbox","mmpadminAPI","ADMIN_CONFIG"],angular.module("mmpadmin").controller("orderPreviewCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i,l,r,n,d){function c(){if("undefined"==typeof pe){pe=o.vm=a.orderListVm={totalItems:0,currentPage:1,pagesize:10,orderDatas:[],statuDatas:[],alertStatuses:[],categorys:[{type_name:"商城订单",order_type:0},{type_name:"团购订单",order_type:2}],oneNav:"",order_type:"",order_status:"",keyword:"",groupBuy:{},groupBuys:[{id:-1,order_status:"全部",order_type:2},{id:0,order_status:"拼团中",order_type:2},{id:1,order_status:"拼团成功",order_type:2},{id:2,order_status:"拼团失败",order_type:2},{id:3,order_status:"退货退款",order_type:3}],alertGroupBuys:[{id:0,order_status:"拼团中",order_type:2},{id:1,order_status:"拼团成功",order_type:2},{id:2,order_status:"拼团失败",order_type:2}],hasUnRead:!1,tagCurrentPage:1,tagPagesize:10,tagTotalItems:0,tags:[],selectedTags:[],userTagKeyWord:"",userCurrentPage:1,userPagesize:10,userTotalItems:0,users:[],selectedUsers:[],userKeyWord:"",distributionUsers:[],distributionUserCurrentPage:1,distributionUserPagesize:10,distributionUserTotalItems:0,selectedDistributionUsers:[],distributionUserKeyWord:"",isHuadaojia:!1,isLoadSupList:!1,start:"",end:"",isUpdate:0,orderStatus:"",orderStatuses:[],keys:[{id:0,name:"订单号"},{id:1,name:"商品名称"},{id:3,name:"收货人姓名"},{id:4,name:"收货人电话"},{id:5,name:"下单人姓名"},{id:6,name:"下单人电话"},{id:7,name:"微信昵称"}],key:"",key_type:"",orderSelecteds:[],batchSetOrderStatuses:[],GroupBuysType:"",supplierListData:[],currentSupplier:{},supplierListDataExport:[],currentSupplierExport:{},sortValue:0,channelListData:[],currentChannel:{},isShowSupplier:!1,isDistribution:!1,pareOrderStatus:s.orderStatus,pareOrderType:s.orderType,userAutoId:s.userAutoId,isSonghe:!0,isShowbatchUpdateExpressResult:!1,batchUpdateExpressResult:""};var i=window.location.href;e.isSonghe||(pe.isSonghe=!1,pe.categorys.push({type_name:"礼品订单",order_type:1})),i.match("youzhengjia.com")&&pe.categorys.push({type_name:"课程订单",order_type:7}),(i.match("huadaojia")||i.match("localhost"))&&(pe.categorys.push({type_name:"外部订单",order_type:8}),pe.isHuadaojia=!0),pe.oneNav=pe.pareOrderType?pe.categorys[pe.pareOrderType]:pe.categorys[0],pe.key=pe.keys[0],pe.order_type=0;for(var l in pe.alertGroupBuys)pe.alertGroupBuys[l].select=0;Q(),pe.pareOrderType&&(pe.order_type=parseInt(pe.pareOrderType)),pe.pareOrderStatus&&(pe.order_status=pe.pareOrderStatus),K()}else 0!=pe.isUpdate&&K();ue.orderHasNewInterval=t(function(){W()},1e4,0),y(),de(),ce(),n.checkPms("PMS_SUPPLIER",function(){pe.isShowSupplier=!0},function(){pe.isShowSupplier=!1}),n.checkPms("OnlineDistribution",function(){pe.isDistribution=!0},function(){pe.isDistribution=!1})}function p(){$("#exportOrder").modal("hide"),pe.isLoadSupList=!1}function u(){$("#exportOrder").modal({backdrop:"static",keyboard:!1}),pe.isLoadSupList=!0}function m(){$("#dlgDistributionUser").modal("hide")}function g(){$("#dlgDistributionUser").modal({backdrop:"static",keyboard:!1}),P()}function v(e){2==pe.oneNav.order_type?pe.alertGroupBuys[e].select=1==pe.alertGroupBuys[e].select?0:1:pe.alertStatuses[e].select=1==pe.alertStatuses[e].select?0:1}function h(){0==pe.sortValue?pe.sortValue=1:1==pe.sortValue?pe.sortValue=2:2==pe.sortValue&&(pe.sortValue=1),K()}function b(){J(pe.tags),pe.userTagKeyWord="",pe.tagsCheckedAll=!1,$("#tagsChoose").modal("hide")}function f(){pe.tagCurrentPage=1,y(),$("#tagsChoose").modal({backdrop:"static",keyboard:!1})}function y(){var e=layer.load();l.getUserTag({pageindex:pe.tagCurrentPage,pagesize:pe.tagPagesize,keyword:pe.userTagKeyWord},function(t){layer.close(e),pe.tags=t.returnObj.list,pe.tagTotalItems=t.returnObj.totalcount,console.log(t),console.log(["获取会员标签列表成功",pe.users])},function(t){layer.close(e),console.log(["获取会员标签列表失败",t])})}function _(){pe.tagsCheckedAll=!1,console.log(pe.tagCurrentPage),y()}function x(){for(var e=0;e<pe.tags.length;e++)pe.tags[e].selected&&(w(pe.tags[e].tag_id)||pe.selectedTags.push(pe.tags[e]));J(pe.tags),$("#tagsChoose").modal("hide")}function w(e){var t=!1;if(pe.selectedTags.length>0)for(var a=0;a<pe.selectedTags.length;a++)e==pe.selectedTags[a].tag_id&&(t=!0);return t}function k(){pe.tagCurrentPage=1,pe.tags=[],y()}function D(){J(pe.users),pe.userKeyWord="",pe.userCheckedAll=!1,$("#userChoose").modal("hide")}function I(){pe.userCurrentPage=1,T(),$("#userChoose").modal({backdrop:"static",keyboard:!1})}function T(){var e=layer.load();l.getUserList({pageindex:pe.userCurrentPage,pagesize:pe.userPagesize,keyword:pe.userKeyWord},function(t){layer.close(e);for(var a=0;a<t.returnObj.list.length;a++)t.returnObj.list[a].show_name=""==t.returnObj.list[a].true_name||null==t.returnObj.list[a].true_name?""==t.returnObj.list[a].wx_nick_name||null==t.returnObj.list[a].wx_nick_name?""==t.returnObj.list[a].user_phone||null==t.returnObj.list[a].user_phone?t.returnObj.list[a].user_id:t.returnObj.list[a].user_phone:t.returnObj.list[a].wx_nick_name:t.returnObj.list[a].true_name;pe.users=t.returnObj.list,pe.userTotalItems=t.returnObj.totalcount,console.log(["获取会员列表成功",pe.users])},function(t){layer.close(e),console.log(["获取会员列表失败",t])})}function S(){pe.userCheckedAll=!1,console.log(pe.userCurrentPage),T()}function P(){var e=layer.load();l.getDistributionUserList({pageindex:pe.distributionUserCurrentPage,pagesize:pe.distributionUserPagesize,keyword:pe.distributionUserKeyWord},function(t){layer.close(e),pe.distributionUsers=t.rows,pe.distributionUserTotalItems=t.total},function(t){layer.close(e)})}function L(){P()}function C(){pe.userCurrentPage=1,pe.users=[],T()}function A(){pe.distributionUserCurrentPage=1,pe.distributionUsers=[],P()}function B(){pe.selectedUsers=[];for(var e=0;e<pe.users.length;e++)pe.users[e].selected&&(E(pe.users[e].user_id)||pe.selectedUsers.push(pe.users[e]));J(pe.users),pe.userKeyWord="",$("#userChoose").modal("hide")}function z(){pe.selectedDistributionUsers=[];for(var e=0;e<pe.distributionUsers.length;e++)pe.distributionUsers[e].selected&&pe.selectedDistributionUsers.push(pe.distributionUsers[e]);pe.distributionUserKeyWord="",$("#dlgDistributionUser").modal("hide"),K()}function E(e){var t=!1;if(pe.selectedUsers.length>0)for(var a=0;a<pe.selectedUsers.length;a++)e==pe.selectedUsers[a].user_id&&(t=!0);return t}function R(){pe.orderSelecteds=[];for(var e=0;e<pe.orderDatas.length;e++)pe.orderDatas[e].selected&&pe.orderSelecteds.push(pe.orderDatas[e].order_id)}function M(){return ue.getSelectIds(),0==pe.orderSelecteds.length?(r("友情提示","请至少选择一个订单"),!1):!0}function N(){return ue.checkSelectIds()?void $("#orderSelect").modal({backdrop:"static",keyboard:!1}):!1}function F(){$("#dlgBatchUpdateExpress").modal({backdrop:"static",keyboard:!1})}function O(){pe.isShowbatchUpdateExpressResult=!1,pe.batchUpdateExpressResult="",$("#dlgBatchUpdateExpress").modal("hide")}function j(){var e=document.getElementById("fileBatchUpdateExpress").files[0],t=new FormData;t.append("file",e),pe.isShowbatchUpdateExpressResult=!0,pe.batchUpdateExpressResult="处理中,请稍候...",d({method:"POST",url:"/serv/api/admin/mall/order.ashx?action=batchupdateexpress",data:t,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){pe.batchUpdateExpressResult=1==e.status?"总数:"+e.result.total_count+",成功数量:"+e.result.success_count+",失败数量:"+e.result.fail_count+",消息:"+e.msg:"批量发货失败："+e.msg}).error(function(e){pe.batchUpdateExpressResult="上传失败,请重试"})}function U(){$("#orderSelect").modal("hide")}function V(){if("请选择订单状态"==pe.orderStatus.name)return void r("友情提示","请选择订单状态");var e={action:"updatebatch",order_ids:pe.orderSelecteds.toString(),order_status:pe.orderStatus.order_status};l.multiUpdateOrderStatus(e,function(e){if(0==e.errcode){r("友情提示","批量更新成功"),pe.orderSelecteds=[],pe.orderStatus=pe.orderStatuses[0],pe.orderSelectedAll=!1;for(var t=0;t<pe.orderDatas.length;t++)pe.orderDatas[t].selected=!1;K(),$("#orderSelect").modal("hide")}else r("友情提示",e.errmsg)},function(e){r("友情提示",e.errmsg)})}function H(){if(!ue.checkSelectIds())return!1;var e={action:"UpdateGroupBuyStatus",order_id:pe.orderSelecteds.toString(),groupbuy_status:1};alert(e.order_id),l.updateGroupBuyStatus(e,function(e){alert("设置成功"),K()},function(e){})}function J(e){for(var t=0;t<e.length;t++)e[t].selected=!1}function q(e,t){t.splice(e,1)}function W(){l.getOrderIsNew(function(e){e.status&&(pe.hasUnRead=e.result.malll.is_have_unread_refund_order)},function(e){})}function G(){l.setOrderIsRead(function(e){e.status?pe.hasUnRead=!1:r("友情提示",e.msg)},function(e){r("友情提示",e.msg)})}function X(e){var t="会员管理",a="/App/Cation/UserManage.aspx?aid="+e;top.addTab(t,a)}function Q(){l.getStatus({action:"list"},function(e){pe.alertStatuses=angular.fromJson(angular.toJson(e.list));var t={order_status:"请选择订单状态",order_status_id:""};pe.orderStatuses=angular.fromJson(angular.toJson(e.list)),pe.orderStatuses.unshift(t),pe.orderStatus=pe.orderStatuses[0],pe.batchSetOrderStatuses=[];for(var a=0;a<pe.orderStatuses.length;a++)"已发货"==pe.orderStatuses[a].order_status&&pe.orderStatuses.splice(a,1),"已取消"!=pe.orderStatuses[a].order_status&&"交易成功"!=pe.orderStatuses[a].order_status&&"退款退货"!=pe.orderStatuses[a].order_status&&pe.batchSetOrderStatuses.push(pe.orderStatuses[a]);var o={order_status:"全部",order_status_id:""};pe.statuDatas=angular.fromJson(angular.toJson(e.list)),pe.statuDatas.unshift(o),pe.statuDatas[0].iselected=!0;for(var a=0;a<pe.alertStatuses.length;a++)pe.alertStatuses[a].select=0,"全部"==pe.alertStatuses[a].order_status&&pe.alertStatuses.splice(0,1);if(pe.pareOrderStatus){pe.order_status=pe.pareOrderStatus;for(var s in pe.statuDatas)pe.statuDatas[s].iselected=!1,-1!=pe.order_status.indexOf(pe.statuDatas[s].order_status)&&(pe.statuDatas[s].iselected=!0)}console.log(["获取订单状态数据成功",e])},function(e){console.log(e)})}function Z(){if(pe.start>pe.end)return void r("友情提示","开始时间不能大于结束时间");var t=[],a=[],o=[];if(2==pe.oneNav.order_type)for(var s=0;s<pe.alertGroupBuys.length;s++)1==pe.alertGroupBuys[s].select&&t.push(pe.alertGroupBuys[s].order_status);else for(var s=0;s<pe.alertStatuses.length;s++)1==pe.alertStatuses[s].select&&t.push(pe.alertStatuses[s].order_status);for(var s=0;s<pe.selectedUsers.length;s++)a.push(pe.selectedUsers[s].autoid);for(var s=0;s<pe.selectedTags.length;s++)o.push(pe.selectedTags[s].tag_name);var i="";pe.currentSupplierExport&&void 0!=pe.currentSupplierExport.value&&(i=pe.currentSupplierExport.value),window.open(e.mainsiteurl+"/serv/api/admin/mall/exportorder.ashx?status="+t.toString()+"&from_date="+pe.start+"&to_date="+pe.end+"&user_aids="+a.toString()+"&user_tags="+o.toString()+"&order_type="+pe.oneNav.order_type+"&supplier_userid="+i),$("#exportOrder").modal("hide")}function K(){var e="";e=2==pe.order_type?-1==pe.groupBuy.id?"":pe.groupBuy.id:"";var t="";pe.currentSupplier&&void 0!=pe.currentSupplier.value&&(t=pe.currentSupplier.value);var a="";pe.currentChannel&&void 0!=pe.currentChannel.value&&(a=pe.currentChannel.value);var o="";if(pe.selectedDistributionUsers.length>0)for(var s=0;s<pe.selectedDistributionUsers.length;s++)o+=pe.selectedDistributionUsers[s].UserID,s<pe.selectedDistributionUsers.length-1&&(o+=",");l.getOrders({action:"list",pageindex:pe.currentPage,pagesize:pe.pagesize,keyword:pe.keyword,order_status:pe.order_status,order_type:pe.order_type,group_buy_status:e,supplier_userid:t,channel_user_id:a,distribution_owner:o,group_buy_type:pe.GroupBuysType,key_type:pe.key_type,column_sort:pe.sortValue,user_auto_id:pe.userAutoId},function(t){if(console.log(["获取订单列表成功",t]),pe.totalItems=t.totalcount,3==e)for(var a=0;a<t.list.length;a++)t.list[a].group_buy_info.group_buy_status=e;pe.orderDatas=t.list},function(e){console.log(["获取订单列表成功",e]),console.log(e)})}function Y(){console.log("分页",pe.currentPage),K()}function ee(e){if(pe.currentPage=1,pe.orderDatas=[],void 0==e.order_type){pe.order_status=e.order_status,console.log(["vm.order_status",pe.order_status]);for(var t in pe.statuDatas)pe.statuDatas[t].iselected=!1,-1!=pe.order_status.indexOf(pe.statuDatas[t].order_status)&&(pe.statuDatas[t].iselected=!0,console.log("z",t));"全部"==pe.order_status&&(pe.order_status="")}else for(var a in pe.groupBuys)pe.groupBuys[a].iselected=!1,e.id==pe.groupBuys[a].id&&(pe.groupBuys[a].iselected=!0,pe.groupBuy=pe.groupBuys[a]);K(),"退款退货"==pe.order_status&&G()}function te(e){console.log(["点击回车",e]),console.log(pe.keyword);var t=window.event?e.keyCode:e.which;13===t&&(pe.currentPage=1,pe.orderDatas=[],pe.key_type=pe.key.id,K())}function ae(){pe.currentPage=1,pe.orderDatas=[],pe.key_type=pe.key.id,K()}function oe(e){pe.key_type=e.id}function se(e){console.log(e),pe.order_type=""!==e.order_type?e.order_type:"";for(var t in pe.categorys)pe.order_type==pe.categorys[t].order_type&&(pe.oneNav=pe.categorys[t]);if(2!=e.order_type)pe.isGroupBuyType=!1,Q();else{pe.isGroupBuyType=!0;for(var t in pe.groupBuys)pe.groupBuys[t].iselected=!1;pe.groupBuys[0].iselected=!0}pe.order_status="",pe.currentPage=1,pe.orderDatas=[],console.log(pe.order_type),K()}function ie(e){console.log(["value",e]),pe.currentPage=1,pe.orderDatas=[],pe.order_type=2,pe.GroupBuysType=e?e:"",K()}function le(){pe.currentPage=1,pe.orderDatas=[],K()}function re(){pe.currentPage=1,pe.orderDatas=[],K()}function ne(){pe.currentPage=1,pe.orderDatas=[],K()}function de(){l.getSupplierList({pageindex:1,pagesize:1e3,keyword:""},function(e){pe.supplierListDataExport=[],pe.supplierListData=[];var t={name:"全部",value:""},a={name:"无商户",value:"none"};pe.supplierListData.push(t),pe.supplierListData.push(a),pe.supplierListDataExport.push(t),pe.supplierListDataExport.push(a);for(var o=0;o<e.rows.length;o++){var s={name:e.rows[o].company_name,value:e.rows[o].user_id};pe.supplierListData.push(s),pe.supplierListDataExport.push(s);var i="<option value='"+s.value+"'>"+s.name+"</option>";$(".supplierSelect").append(i)}pe.currentSupplier=pe.supplierListData[0],pe.currentSupplierExport=pe.supplierListDataExport[0],$(".supplierSelect").chosen({no_results_text:"没有找到",allow_single_deselect:!0,width:"250px"}),$(".supplierSelect").chosen().change(function(){var e={};e.value=$(this).val(),e.name=$(this).find("option:selected").text(),pe.currentSupplier=e,pe.currentSupplierExport=e,pe.isLoadSupList||K()})},function(e){})}function ce(){l.channelList("/Handler/App/CationHandler.ashx",{action:"QueryChannel"},function(e){pe.channelListData=[];var t={name:"全部渠道",value:""};pe.channelListData.push(t);for(var a=0;a<e.rows.length;a++){var o={name:e.rows[a].ChannelName,value:e.rows[a].UserID};pe.channelListData.push(o)}pe.currentChannel=pe.channelListData[0]},function(e){})}var pe=o.vm=a.orderListVm,ue=o.vf={getOrderStatus:Q,getOrderList:K,pageChanged:Y,selectmeBtn:ee,ctrlsearch:te,search:ae,whichcategory:se,whichSupplier:le,whichChannel:re,selectallBtn:ne,goToBackState:X,getOrderExcel:Z,getOrderIsNew:W,setOrderIsRead:G,hideExportOrder:p,showExportOrder:u,selectOrder:v,hideTagsChoose:b,showTagsChoose:f,getTagsList:y,tagPageChanged:_,choosedTags:x,ctrlUserTagSearch:k,hideUserChoose:D,showUserChoose:I,getUserList:T,userPageChanged:S,choosedUser:B,ctrlUserSearch:C,clearSelected:J,delChoosed:q,showOrderSetDia:N,showBatchUpdateExpressDia:F,hideBatchUpdateExpressDia:O,batchUpdateExpress:j,hideOrderSetDia:U,multiUpdateOrderStatus:V,updateGroupbuySuccess:H,getSelectIds:R,checkSelectIds:M,whichkey:oe,groupOrderByType:ie,payTimeSort:h,showDistributionUser:g,hideDistributionUser:m,distributionUserPageChanged:L,getDistributionUserList:P,ctrlDistributionUserSearch:A,choosedDistributionUser:z,init:c};c(),o.$watch("vm.tagsCheckedAll",function(){for(var e=0;e<pe.tags.length;e++)pe.tags[e].selected=pe.tagsCheckedAll}),o.$watch("vm.userCheckedAll",function(){for(var e=0;e<pe.users.length;e++)pe.users[e].selected=pe.userCheckedAll}),o.$watch("vm.orderSelectedAll",function(){for(var e=0;e<pe.orderDatas.length;e++)pe.orderDatas[e].selected=pe.orderSelectedAll})}e.$inject=["$rootScope","$interval","$sessionStorage","$scope","$stateParams","$state","mmpadminAPI","alertbox","commService","$http"],angular.module("mmpadmin").controller("orderListCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i,l,r){function n(e){if($("#dealModal").modal("show"),I.editOrder=e,e.express_company_name)for(var t in I.expressCompanys)e.express_company_name==I.expressCompanys[t].express_company_name&&(console.log(t),I.editOrderEcName=I.expressCompanys[t]);else I.editOrderEcName=I.expressCompanys[0];if(I.editOrderEcNum=e.express_number?e.express_number:"",e.order_status)for(var a in I.orderStatuses)e.order_status==I.orderStatuses[a].name&&(I.editOrderStatus=I.orderStatuses[a])}function d(){var e={order_id:I.editOrder.order_id,express_company_code:I.editOrderEcName.express_company_code,express_company_name:I.editOrderEcName.express_company_name,express_number:I.editOrderEcNum};l.orderDelivery(e,function(e){0==e.errcode?(s("友情提示","发货成功！"),g()):s("友情提示",e.errmsg)},function(e){s("友情提示",e.errmsg)})}function c(){if(0==I.editOrderStatus.id)return void s("友情提示","请选择订单状态");var e={order_id:I.editOrder.order_id,order_status:I.editOrderStatus.name};l.updateOrderStatus(e,function(e){0==e.errcode?(s("友情提示","更新订单状态成功"),g()):s("错误代码："+e.errcode,"错误信息："+e.errmsg)},function(e){s("错误代码："+e.errcode,"错误信息："+e.errmsg)})}function p(){var e={order_id:I.order_id,remark:I.remark};return I.remark.length>50?void s("友情提示","备注在50字以内"):void l.updateRemark(e,function(e){0==e.errcode?s("友情提示","保存成功"):s("友情提示",e.errmsg)},function(e){s("友情提示",e.errmsg)})}function u(e){var t={order_id:e.order_id,remark:e.ex21};return t.remark.length>50?void s("友情提示","备注在50字以内"):void l.updateRemark(t,function(e){0==e.errcode?s("友情提示","保存成功"):s("友情提示",e.errmsg)},function(e){s("友情提示",e.errmsg)})}function m(){var e={order_id:I.editOrder.order_id,order_status:I.editDistributeStatus.id};l.updateDistributeStatus(e,function(e){0==e.errcode?(s("友情提示","更新分销订单状态成功"),g()):s("错误代码："+e.errcode,"错误信息："+e.errmsg)},function(e){s("错误代码："+e.errcode,"错误信息："+e.errmsg)})}function g(){l.getorderdetail({order_id:I.order_id},function(e){if(console.log("订单详情",e),I.childrenData=2!=e.order_type?null==e.child_order_list?[]:e.child_order_list:null==e.group_buy_child_order_list?[]:e.group_buy_child_order_list,I.remark=e.ex21,I.rname=e.custom_rname,I.orderdata=e,e.express_number&&(I.express_number=e.express_number),e.order_status)for(var t in I.orderStatuses)e.order_status==I.orderStatuses[t].name&&(I.orderStatus=I.orderStatuses[t]);if(e.distribution_offline_status)for(var t in I.distributeStatuses)e.distribution_offline_status==I.distributeStatuses[t].id&&(I.distributeStatuse=I.distributeStatuses[t]);I.orderdata.express_company_name&&l.getExpressList({pageindex:1,pagesize:1e4},function(e){I.expressCompanys=I.expressCompanys.concat(I.expressCompany),I.expressCompanys=I.expressCompanys.concat(e.list);for(var t in I.expressCompanys)I.orderdata.express_company_name==I.expressCompanys[t].express_company_name&&(console.log(t),I.expressCompany=I.expressCompanys[t])},function(e){});for(var t in I.orderdata.product_list)I.orderdata.product_list[t].subtotalprice=I.orderdata.product_list[t].count*I.orderdata.product_list[t].price,I.orderdata.product_list[t].subtotalscore=I.orderdata.product_list[t].count*I.orderdata.product_list[t].score},function(e){console.log(e)})}function v(){var e={order_id:I.order_id,express_company_code:I.expressCompany.express_company_code,express_company_name:I.expressCompany.express_company_name,express_number:I.express_number};l.orderDelivery(e,function(e){0==e.errcode?g():s("友情提示",e.errmsg)},function(e){s("友情提示",e.errmsg)})}function h(){if(0==I.orderStatus.id)return void s("友情提示","请选择订单状态");var e={order_id:I.order_id,order_status:I.orderStatus.name};l.updateOrderStatus(e,function(e){0==e.errcode?(s(e.errmsg),"undefined"!=typeof a.orderListVm&&a.orderListVm.isUpdate++,g()):s("错误代码："+e.errcode,"错误信息："+e.errmsg)},function(e){s("错误代码："+e.errcode,"错误信息："+e.errmsg)})}function b(){var e={order_id:I.order_id,order_status:I.distributeStatuse.id};l.updateDistributeStatus(e,function(e){0==e.errcode?(s("友情提示","更新分销订单状态成功"),g()):s("错误代码："+e.errcode,"错误信息："+e.errmsg)},function(e){s("错误代码："+e.errcode,"错误信息："+e.errmsg)})}function f(){var e={pageindex:1,pagesize:1e3};l.getExpressList(e,function(e){e&&(I.expressCompanys=I.expressCompanys.concat(I.expressCompany),I.expressCompanys=I.expressCompanys.concat(e.list),I.expressCompany=I.expressCompanys[0],I.editOrderEcName=I.expressCompanys[0])},function(e){console.log(e)})}function y(){var t="";angular.forEach(e.childrenData,function(e,a){t+=e.order_id+","}),t&&(t=t.slice(0,t.length-1)),l.exportOrder({oids:t},function(t){l.getAllSKU({action:"list"},function(t){e.propertyListData=t.list,console.log(["获取商品规格列表成功",t])},function(e){console.log(["获取商品规格列表失败",e])})},function(e){})}function _(t){if(e.ids="",2==t){if(e.ids=I.order_numbers_id,""==I.order_numbers_id)return void s("系统提示","请选择退货退款的团员")}else e.ids=I.order_id;i("友情提示","您确定要退货退款吗？","确定","取消",function(){l.groupReturnrefund({action:"transfers",order_ids:e.ids},function(t){0==t.errcode?(s("友情提示","退货退款成功"),e.ids="",I.order_numbers_id=""):(s("友情提示",t.errmsg),e.ids="",I.order_numbers_id="")},function(t){s("友情提示",t.errmsg),e.ids="",I.order_numbers_id=""})},function(){})}function x(){e.selectedall=!e.selectedall,I.order_numbers_id="",angular.forEach(I.childrenData,function(t){t.selected=e.selectedall,e.selectedall?(I.order_numbers_id+=t.order_id+",",console.log(["vm.order_id",I.order_numbers_id])):(I.order_numbers_id="",console.log(["vm.order_id",I.order_numbers_id]))})}function w(t){t.selected=!t.selected;var a=!0;I.childrenData.filter(function(e){e.selected||(a=!1)}),e.selectedall=a,t.selected?(I.order_numbers_id+=t.order_id+",",console.log(I.order_numbers_id)):(I.order_numbers_id=I.order_numbers_id.replace(t.order_id+",",""),console.log(I.order_numbers_id))}function k(e){o.go("index.productDetail",{productId:e.product_id,type:""})}function D(){I.orderStatus=I.orderStatuses[0],I.distributeStatuse=I.distributeStatuses[0],g(),f(),I.isJikuWifi=-1!=window.location.href.indexOf("jikuwifi.comeoncloud.net")?!0:!1}console.log(t.orderID);{var I=e.vm={ADMIN_CONFIG:r,order_id:t.orderID,order_numbers_id:"",orderdata:[],expressCompany:{express_company_id:0,express_company_name:"请选择物流公司"},expressCompanys:[],orderStatus:"",orderStatuses:[{id:0,name:"请选择订单状态"},{id:1,name:"待付款"},{id:2,name:"待发货"},{id:3,name:"已发货"}],distributeStatuse:"",distributeStatuses:[{id:0,name:"未付款"},{id:1,name:"已付款"},{id:2,name:"已收货"},{id:3,name:"已审核"}],express_number:"",editOrder:{},editOrderEcName:{},editOrderEcNum:"",editOrderStatus:{},editDistributeStatus:{},isJikuWifi:!1,remark:"",rname:""};e.vf={getOrderdetail:g,orderDelivery:v,updateStatus:h,updateDistributeStatus:b,getExpressList:f,exportOrders:y,editChildBtn:n,deliveryBtn:d,updateRemark:p,updateStatusBtn:c,updateDistributeStatusBtn:m,refundHead:_,checkedall:x,gotoProductDetail:k,selectme:w,updateRemarkChild:u}}D()}e.$inject=["$scope","$stateParams","$sessionStorage","$state","alertbox","alertconformbox","mmpadminAPI","ADMIN_CONFIG"],angular.module("mmpadmin").controller("orderDetailCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i,l){i.getpromotionData({action:"list",pageindex:1,pagesize:1},function(t){function a(){i.getpromotionData({action:"list",pageindex:e.currentPage,pagesize:e.pagesize},function(t){console.log(t),e.promotiondatas=t.list,e.totalItems=t.totalcount,e.selectedall=!1},function(e){})}function r(){l("友情提示","您确定删除众筹商品吗？","确定删除","取消删除",function(){e.ids=e.ids.toString(),","==e.ids.substring(e.ids.length-1,e.ids.length)&&(e.ids=e.ids.substring(e.ids,e.ids.length-1)),i.addpromotionName({action:"delete",promotion_activity_ids:e.ids},function(t){if(console.log(t),0==t.errcode){e.ids="";var o="友情提示",i="删除成功";s(o,i),a()}else s(t.errcode,t.errmsg)},function(e){console.log(e)})},function(){})}console.log(t),e.totalItems=t.totalcount,e.currentPage=""==o.pageID||void 0==o.pageID?1:parseInt(o.pageID),e.pagesize=10,e.promotiondatas=[],a(),e.selectme=function(t){t.selected=!t.selected,console.log(t.selected);var a=!0;e.promotiondatas.filter(function(e){e.selected||(a=!1)}),e.selectedall=a,t.selected?(e.ids+=t.promotion_activity_id+",",console.log(e.ids)):(e.ids=e.ids.replace(t.promotion_activity_id+",",""),console.log(e.ids))},e.wxdomain=WEBSITE_CONFIG.weixin_bind_domain,e.ids="",e.checkedall=function(){e.selectedall=!e.selectedall,e.ids="",angular.forEach(e.promotiondatas,function(t){t.selected=e.selectedall,e.selectedall?(e.ids+=t.promotion_activity_id+",",console.log(["$scope.ids",e.ids])):(e.ids=[],console.log(["$scope.ids",e.ids]))})},e.delallpromotionBtn=function(){if(""!=e.ids)console.log(["$scope.ids",e.ids]),r();else{var t="友情提示",a="请至少选择一件产品";s(t,a)}},e.ctrleditSort=function(e,t){console.log(["点击回车",e]);var o=window.event?e.keyCode:e.which;13===o&&(console.log(t.editsort),t.promotion_activity_sort=t.editsort,i.addpromotionName({action:"update",data:JSON.stringify(t)},function(e){console.log(e),0==e.errcode&&a()},function(e){console.log(e)}))},e.delpromotionBtn=function(t){console.log(t.promotion_activity_id),e.ids=t.promotion_activity_id,r()}},function(e){console.log(e)}),e.pageChanged=function(){console.log(e.saleList),a.go("index.saleList",{pageID:e.currentPage})},e.addproductBtn=function(e){a.go("index.addsaleproduct",{proID:e.promotion_activity_id})},e.editpromotionBtn=function(e){a.go("index.addsalename",{saleID:e.promotion_activity_id}),t.editproductData=e},e.createQcodeBtn=function(t,a){$("#qCodeModal").modal("show");var o=""!=e.wxdomain?e.wxdomain:window.location.host,s="http://"+o+"/customize/shop/?v=1.0#/saleList";i.createQCode({code:s},function(t){e.qcodedata={qcode:t.result.qrcode_url,url:s}})}}e.$inject=["$scope","$rootScope","$state","$stateParams","alertbox","mmpadminAPI","alertconformbox"],angular.module("mmpadmin").controller("newsaleListCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i,l,r,n){function d(){h.selectedall=!h.selectedall,h.ids="",angular.forEach(e.hasSelectDatas,function(e){e.selected=h.selectedall,h.selectedall?(h.ids+=e.product_id+",",console.log(["$scope.ids",h.ids])):(h.ids="",console.log(["$scope.ids",h.ids]))})}function c(t){t.selected=!t.selected;var a=!0;e.hasSelectDatas.filter(function(e){e.selected||(a=!1)}),h.selectedall=a,t.selected?(h.ids+=t.product_id+",",console.log(h.ids)):(h.ids=h.ids.replace(t.product_id+",",""),console.log(h.ids))}function p(e){i("友情提示","您确定取消此商品参加活动吗？","确定","取消",function(){l.delpromotionPro({action:"delete",promotion_activity_id:o.proID,product_id:e.product_id},function(e){console.log(["取消参加成功",e]),0==e.errcode&&m()},function(e){console.log(["取消参加失败",e])})},function(){})}function u(){return h.ids?void i("友情提示","您确定批量取消商品参加活动吗","确定","取消",function(){h.ids=h.ids.toString(),","==h.ids.substring(h.ids.length-1,h.ids.length)&&(h.ids=h.ids.substring(h.ids,h.ids.length-1)),l.delpromotionPro({action:"delete",promotion_activity_id:o.proID,product_id:h.ids},function(e){console.log(["取消参加成功",e]),0==e.errcode&&(h.ids="",m())},function(e){console.log(["取消参加失败",e])})},function(){}):void alert("请选择商品")}function m(){l.getpromotionPro({action:"list",pageindex:1,pagesize:999,promotion_activity_id:o.proID},function(t){console.log(t),e.hasSelectDatas=t.list,e.selectNums=t.totalcount},function(e){console.log(e)})}function g(){l.productlist("/admin/mall/product.ashx",{action:"list",pageindex:e.currentPage,pagesize:e.pagesize,keyword:e.keyword,category_id:e.category_id,is_onsale:1},function(t){console.log(t),e.totals=t.totalcount,angular.forEach(t.list,function(t){for(var a=0;a<e.hasSelectDatas.length;a++)t.product_id==e.hasSelectDatas[a].product_id&&(t.is_promotion_product=1)}),e.productDatas=t.list},function(e){console.log(e)})}function v(){r.cancel(stop)}e.selectNums=0,e.hasSelectDatas=[];{var h=e.vm={selectedall:!1,ids:""};e.vf={selectme:c,checkedall:d,notinsaleBtn:p,betchNoActivity:u}}m(),e.currentPage=1,e.pagesize=10,e.keyword="",e.category_id="",g(),e.pageChanged=function(){function t(){window.scrollTo(0,0)}console.log(e.currentPage),e.productDates=[],g();r(t,1);0==document.documentElement.scrollTop&&r(v,2)},l.getcategorys({pageindex:1,pagesize:9999},function(t){var a={category_id:"",category_name:"全部商品"};t.list.unshift(a),e.categorys=t.list,e.category=e.categorys[0]},function(e){console.log(e)}),e.whichcategory=function(t){console.log(t.category_id),e.currentPage=1,e.category_id=t.category_id,e.productDates=[],g()},e.ctrlsearch=function(t){console.log(["点击回车",t]),console.log(e.keyword);var a=window.event?t.keyCode:t.which;13===a&&(console.log("我回车了"),e.currentPage=1,e.productDates=[],g())},e.choosemeBtn=function(e){l.addpromotionPro({action:"add",promotion_activity_id:o.proID,product_ids:e.product_id},function(t){console.log(["添加商品成功",t]),0==t.errcode&&(e.is_promotion_product=1,m())},function(e){console.log(["添加商品请求失败",e])})},e.showhaselect=!1,e.hasselectedBtn=function(){e.showhaselect=!0},e.selectedBtn=function(){e.showhaselect=!1,g()},e.editsaleBtn=function(e,a){e.edit=!1,console.log(e),console.log(a),l.getpromotionDetail({action:"get",product_id:e.product_id},function(t){console.log(["获取商品详情成功",t]),e.have_property_list=t.have_property_list,e.skus=t.skus},function(e){console.log(["获取商品详情失败",e])});var o=n(function(){1==t.editshowend&&(e.edit=!0,n.cancel(o))},100)},e.savesaleBtn=function(a){console.log(["VVVVVVVVVVVVVVV",t.editSkus]),e.editskusData=[];for(var o=0,i=0;i<t.editSkus.length;i++){if((""==t.editSkus[i].promotion_price||void 0==t.editSkus[i].promotion_price)&&(t.editSkus[i].promotion_price=0),(""==t.editSkus[i].promotion_count||void 0==t.editSkus[i].promotion_count)&&(t.editSkus[i].promotion_count=0),(""==t.editSkus[i].promotion_sale_count||void 0==t.editSkus[i].promotion_sale_count)&&(t.editSkus[i].promotion_sale_count=0),t.editSkus[i].promotion_sale_count>a.skus[i].count)return void s("友情提示","特卖总数量不能大于商品总数量");e.editskusData.push({sku_id:t.editSkus[i].sku_id,promotion_price:t.editSkus[i].promotion_price,promotion_count:parseInt(t.editSkus[i].promotion_count),promotion_sale_count:parseInt(t.editSkus[i].promotion_sale_count)}),console.log(["TTTTTTTTTTTTTTTTT",e.editskusData]),o+=parseInt(t.editSkus[i].promotion_count)}console.log(e.editskusData),e.editlastData={product_id:a.product_id,skus:e.editskusData};var r=JSON.stringify(e.editlastData);l.editpromotionDetail({action:"update",data:r},function(e){console.log("编辑特卖商品成功"),0==e.errcode?(layer.msg("编辑成功"),a.totalcount=o,a.edit=!1):alert(e.errmsg)},function(e){console.log("编辑特卖商品失败")})},e.autoSetData=function(e,a){for(var o=0;o<t.editSkus.length;o++)(""==t.editSkus[o].promotion_count||"0"==t.editSkus[o].promotion_count||void 0==t.editSkus[o].promotion_count)&&(t.editSkus[o].promotion_count=t.editSkus[o].count),(""==t.editSkus[o].promotion_sale_count||"0"==t.editSkus[o].promotion_sale_count||void 0==t.editSkus[o].promotion_sale_count)&&(t.editSkus[o].promotion_sale_count=t.editSkus[o].count)}}e.$inject=["$scope","$rootScope","$state","$stateParams","alertbox","alertconformbox","mmpadminAPI","$timeout","$interval"],angular.module("mmpadmin").controller("addsaleproductCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i,l){console.log(o.saleID),console.log(a.editproductData),""!=o.saleID?(e.showadd=!1,e.addpromotionData=a.editproductData,e.addpromotionData.promotion_activity_image=[a.editproductData.promotion_activity_image],
e.addpromotionData.promotion_activity_start_time=l("date")(a.editproductData.promotion_activity_start_time,"yyyy-MM-dd HH:mm"),e.addpromotionData.promotion_activity_stop_time=l("date")(a.editproductData.promotion_activity_stop_time,"yyyy-MM-dd HH:mm")):(e.showadd=!0,e.addpromotionData={promotion_activity_id:0,promotion_activity_name:"",promotion_activity_summary:"",promotion_activity_image:"",promotion_activity_start_time:"",promotion_activity_stop_time:"",promotion_activity_sort:""}),e.openTagBox=function(){$modal.open({animation:!1,templateUrl:"app/components/productTagBox/productTagBox.html",controller:"productTagCtrl",size:"lg",resolve:{items:function(){return e.items}}})},e.openUpLoadImg=function(){$modal.open({animation:!1,templateUrl:"app/components/upLoadImgs/upLoadImgs.html",controller:"productEditorCtrl",size:"lg",resolve:{items:function(){return e.items}}})},e.upLoadImg=function(){checklocalimg(function(e){for(var t in e)$("#inputImage").parent().before("<label title='Upload image file' for='"+t+"' class='btn-default uploadImg'><img src='"+e[t]+"' id='"+t+"' class='uploadImg'></label>")})},e.submitImg=function(){i.upLoadFileImg("/common/file.ashx",{action:"add"},function(e){console.log(["上传成功",e])},function(e){console.log(["上传请求失败",e])})},e.addpromotionBtn=function(){""!=e.addpromotionData.promotion_activity_image&&(e.addpromotionData.promotion_activity_image=e.addpromotionData.promotion_activity_image.join("")),e.addpromotionData.promotion_activity_start_time=new Date(e.addpromotionData.promotion_activity_start_time.replace(/-/g,"/")).getTime().toString(),e.addpromotionData.promotion_activity_stop_time=new Date(e.addpromotionData.promotion_activity_stop_time.replace(/-/g,"/")).getTime().toString();var a=JSON.stringify(e.addpromotionData);i.addpromotionName({action:"add",data:a},function(e){if(console.log(e),0==e.errcode){var a="友情提示",o="添加特卖活动成功";s(a,o),t.go("index.newsaleList")}},function(e){console.log(e)})},e.editsaveBtn=function(){""!=e.addpromotionData.promotion_activity_image&&(e.addpromotionData.promotion_activity_image=e.addpromotionData.promotion_activity_image.join("")),e.addpromotionData.promotion_activity_start_time=new Date(e.addpromotionData.promotion_activity_start_time.replace(/-/g,"/")).getTime().toString(),e.addpromotionData.promotion_activity_stop_time=new Date(e.addpromotionData.promotion_activity_stop_time.replace(/-/g,"/")).getTime().toString();var a=JSON.stringify(e.addpromotionData);i.addpromotionName({action:"update",data:a},function(e){if(console.log(e),0==e.errcode){var a="友情提示",o="编辑特卖活动成功";s(a,o),t.go("index.newsaleList")}},function(e){console.log(e)})}}e.$inject=["$scope","$state","$rootScope","$stateParams","alertbox","mmpadminAPI","$filter"],angular.module("mmpadmin").controller("addsalenameCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i,l){function r(){i.productlist("/admin/mall/product.ashx",{action:"list",pageindex:e.currentPage,pagesize:e.pagesize,keyword:e.keyword,category_id:e.category_id},function(t){console.log(t),e.totals=t.totalcount,angular.forEach(t.list,function(t){for(var a in e.hasSelectDatas)t.product_id==e.hasSelectDatas[a].product_id&&(t.is_promotion_product=1)}),e.productDatas=t.list},function(e){console.log(e)})}e.firstPage=!1,e.nextPage=!0,e.nextStep=function(){e.firstPage=!1,e.nextPage=!0},e.preStep=function(){e.firstPage=!0,e.nextPage=!1},e.currentPage=1,e.pagesize=10,e.keyword="",e.category_id="",r(),e.selectNums=0,e.hasSelectDatas=[],e.choosemeBtn=function(t){console.log(t),t.is_promotion_product=1,i.productDetail({action:"get",product_id:t.product_id},function(e){console.log(["获取商品详情成功",e]),t.skuData=e},function(e){console.log(["获取商品详情请求失败",e])}),e.hasSelectDatas.push(t),e.selectNums=e.hasSelectDatas.length,console.log(e.hasSelectDatas)},e.pageChanged=function(){function t(){window.scrollTo(0,0)}function a(){l.cancel(o)}console.log(e.currentPage),e.productDates=[],r();var o=l(t,1);0==document.documentElement.scrollTop&&l(a,2)},i.getcategorys({pageindex:1,pagesize:9999},function(t){var a={category_id:"",category_name:"全部商品"};t.list.unshift(a),e.categorys=t.list,e.category=e.categorys[0]},function(e){console.log(e)}),e.whichcategory=function(t){console.log(t.category_id),e.currentPage=1,e.category_id=t.category_id,e.productDates=[],r()},e.ctrlsearch=function(t){console.log(["点击回车",t]),console.log(e.keyword);var a=window.event?t.keyCode:t.which;13===a&&(console.log("我回车了"),e.currentPage=1,e.productDates=[],r())},e.showhaselect=!1,e.productEditorDatas=[],e.hasselectedBtn=function(){e.showhaselect=!0,console.log(e.showhaselect)},e.selectedBtn=function(){e.showhaselect=!1,r(),console.log(e.showhaselect)},e.editsaleBtn=function(e){e.edit=!0,console.log(e)},e.savesaleBtn=function(e){console.log(e.salePrice),e.edit=!1},e.notinsaleBtn=function(t,a){console.log(a),e.hasSelectDatas.splice(a,1),e.selectNums=e.hasSelectDatas.length}}e.$inject=["$scope","$rootScope","$state","$stateParams","alertbox","mmpadminAPI","$timeout"],angular.module("mmpadmin").controller("addsalelimitCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s){function i(){r(),t.$watch("vm.checkedAll",function(){for(var e=0;e<u.dataList.length;e++)u.dataList[e].selected=u.checkedAll})}function l(){for(var e=[],t=0;t<u.dataList.length;t++)u.dataList[t].selected&&e.push(u.dataList[t].rule_id);return e.join(",")}function r(){e.groupBuyRuleList().then(function(e){u.dataList=e.result.list})}function n(e,t){u.modalAction=e,u.modalData="add"==e?{}:t,m.modal({backdrop:"static",keyboard:!1})}function d(){m.modal("hide")}function c(){var t="add"==u.modalAction?e.addGroupBuyRule:e.editGroupBuyRule;t(u.modalData).then(function(e){console.log("submit",e),e.status?(r(),alert(("add"==u.modalAction?"添加":"编辑")+"成功"),m.modal("hide")):alert(e.msg)})}function p(){var t=l();return t?void confirmBox("确定删除选定数据？",function(){e.deleteGroupBuyRule({rule_ids:t}).then(function(e){e.status?(alert("删除成功"),r()):alert(e.msg)})}):void alert("请至少选择一项")}{var u=t.vm={dataList:[],modalData:{},modalAction:"",checkedAll:!1},m=$("#groupRuleModal");t.vf={init:i,showModal:n,hideModal:d,submit:c,deleteRule:p}}i()}e.$inject=["mmpadminAPI","$scope","$state","alertbox","alertconformbox"],angular.module("mmpadmin").controller("groupBuyRuleListCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i){a.getUserTag({pageindex:1,pagesize:1},function(s){function l(){a.getUserTag({pageindex:e.currentPage,pagesize:e.pagesize,keyword:e.keyword},function(t){console.log(t),e.totals=t.returnObj.totalcount,e.raisepros=t.returnObj.list},function(e){console.log(e)})}function r(){i("友情提示","您确定删除众筹商品吗？","确定删除","取消删除",function(){e.ids=e.ids.toString(),","==e.ids.substring(e.ids.length-1,e.ids.length)&&(e.ids=e.ids.substring(e.ids,e.ids.length-1)),a.delUserTag({tag_ids:e.ids},function(a){if(console.log(a),0==a.errcode){e.ids="",e.selectedall=!1;var o="友情提示",s="删除成功";t(o,s),l()}else t(a.errcode,a.errmsg)},function(e){console.log(e)})},function(){})}e.totals=s.returnObj.totalcount,e.currentPage=""==o.pageID||void 0==o.pageID?1:parseInt(o.pageID),e.keyword=""==o.keyID||void 0==o.keyID?"":o.keyID,e.pagesize=10,l(),e.delallraiseproBtn=function(){if(""!=e.ids)console.log(["$scope.ids",e.ids]),r();else{var a="友情提示",o="请至少选择一件产品";t(a,o)}},e.delraiseproBtn=function(t){e.ids=t.tag_id,r()},e.selectme=function(t){t.selected=!t.selected,console.log(t.selected);var a=!0;e.raisepros.filter(function(e){e.selected||(a=!1)}),e.selectedall=a,t.selected?(e.ids+=t.tag_id+",",console.log(e.ids)):(e.ids=e.ids.replace(t.tag_id+",",""),console.log(e.ids))},e.selectedall=!1,e.ids="",e.checkedall=function(){e.selectedall=!e.selectedall,e.ids="",angular.forEach(e.raisepros,function(t){t.selected=e.selectedall,e.selectedall?(e.ids+=t.tag_id+",",console.log(["$scope.ids",e.ids])):(e.ids="",console.log(["$scope.ids",e.ids]))})};var n=e.pageData={};e.addcardcouponBtn=function(){n.tag_name="",n.access_level="",e.isAddcard=!0,$("#dealModal").modal({backdrop:"static",keyboard:!1})},e.editcardcouponBtn=function(t){e.isAddcard=!1,$("#dealModal").modal({backdrop:"static",keyboard:!1}),console.log(t),n.tag_id=t.tag_id,n.tag_name=t.tag_name,n.access_level=t.access_level},e.addCouponBtn=function(){return""==n.tag_name?void t("友情提示","请输入标签名称"):isNaN(n.access_level)?void t("友情提示","请输入正确的等级"):(""==n.access_level&&(n.access_level=0),void(1==e.isAddcard?a.addUserTag({data:angular.toJson(n)},function(a){console.log(a),0==a.errcode&&(e.showPicDom=!1,t("友情提示","添加标签成功"),$("#dealModal").modal("hide"),l())}):a.editUserTag({data:angular.toJson(n)},function(a){console.log(a),0==a.errcode&&(e.showPicDom=!1,t("友情提示","修改标签成功"),$("#dealModal").modal("hide"),l())},function(e){})))}},function(e){console.log(e)}),e.pageChanged=function(){console.log(e.currentPage),s.go("index.userTagList",{pageID:e.currentPage})},e.clear=function(){$("#dealModal").modal("hide"),pageData.tag_id="",pageData.tag_name="",pageData.access_level=""}}e.$inject=["$scope","alertbox","mmpadminAPI","$stateParams","$state","alertconformbox"],angular.module("mmpadmin").controller("userTagListCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s){var i=e.pageData={autoid:"",wx_nick_name:"",true_name:"",user_phone:"",user_company:"",user_email:"",user_position:"",available_vote_count:"",total_score:""};e.editInfoData={},a.getUserList({pageindex:1,pagesize:1,keyword:"",tag_names:"",distribution:"",user_name:"",name_wxname:""},function(l){function r(){a.getUserList({pageindex:e.currentPage,pagesize:e.pagesize,keyword:e.keyword,tag_names:e.tagsName,distribution:e.isDist,user_name:e.user_name,name_wxname:e.name_wxname},function(t){e.totals=t.returnObj.totalcount,e.raisepros=t.returnObj.list},function(e){console.log(e)})}console.log(l),e.totals=l.returnObj.totalcount,e.currentPage=""==o.pageID||void 0==o.pageID?1:parseInt(o.pageID),e.keyword=""==o.keyID||void 0==o.keyID?"":o.keyID,e.tagsName=""==o.tagID||void 0==o.tagID?"":o.tagID,e.isDist=""==o.disID||void 0==o.disID?"":o.disID,e.user_name=""==o.nameID||void 0==o.nameID?"":o.nameID,e.name_wxname=""==o.wxNameID||void 0==o.wxNameID?"":o.wxNameID,e.pagesize=10,r(),e.setUserLevelBtn=function(o){$("#setLevelModal").modal("show"),e.setLevelBtn=function(){return e.levelNum=parseInt(e.levelNum),isNaN(e.levelNum)?void t("友情提示","请输入正确的等级"):(console.log(o),void a.setUserLevel({autoid:o.autoid,user_access_level:e.levelNum},function(e){console.log(e),0==e.errcode?(t("友情提示","设置访问等级成功"),$("#setLevelModal").modal("hide"),r()):t(e.errcode,e.errmsg)}))}},a.getUserTag({pageindex:1,pagesize:100,keyword:""},function(t){console.log(t),e.tagsData=t.returnObj.list},function(e){console.log(e)}),e.addUserTagBtn=function(){if(""==e.ids){var o="友情提示",s="请至少选择一个会员";return void t(o,s)}e.ids=e.ids.substring(e.ids,e.ids.length-1),console.log(["$scope.ids",e.ids]),$("#setUserTag").modal("show"),e.tag_ids="",e.allTagBtn=function(){e.allTagSelect=!e.allTagSelect,e.tag_ids="",angular.forEach(e.tagsData,function(t){t.selected=e.allTagSelect,e.allTagSelect?(e.tag_ids+=t.tag_name+",",console.log(["$scope.tag_ids",e.tag_ids])):(e.tag_ids="",console.log(["$scope.tag_ids",e.tag_ids]))})},e.oneTagBtn=function(t){console.log(t),t.selected=!t.selected,console.log(t.selected);var a=!0;e.tagsData.filter(function(e){e.selected||(a=!1)}),e.allTagSelect=a,t.selected?(e.tag_ids+=t.tag_name+",",console.log(e.tag_ids)):(e.tag_ids=e.tag_ids.replace(t.tag_name+",",""),console.log(e.tag_ids))},e.setTagBtn=function(){e.tag_ids=e.tag_ids.substring(e.tag_ids,e.tag_ids.length-1),a.setUserTag({autoids:e.ids,tag_names:e.tag_ids},function(a){console.log(a),0==a.errcode?(t("友情提示","设置标签成功"),$("#setUserTag").modal("hide"),angular.forEach(e.tagsData,function(e){e.selected=!1}),e.allTagSelect=!1,e.selectedall=!1,r()):t("友情提示",a.errmsg)})}},e.selectedall=!1,e.ids="",e.checkedall=function(){e.selectedall=!e.selectedall,e.ids="",angular.forEach(e.raisepros,function(t){t.selected=e.selectedall,e.selectedall?(e.ids+=t.autoid+",",console.log(["$scope.ids",e.ids])):(e.ids="",console.log(["$scope.ids",e.ids]))})},e.selectme=function(t){console.log(t),t.selected=!t.selected,console.log(t.selected);var a=!0;e.raisepros.filter(function(e){e.selected||(a=!1)}),e.selectedall=a,t.selected?(e.ids+=t.autoid+",",console.log(e.ids)):(e.ids=e.ids.replace(t.autoid+",",""),console.log(e.ids))},e.ctrlsearch=function(t){console.log(["点击回车",t]),console.log(e.keyword);var a=window.event?t.keyCode:t.which;13===a&&(e.currentPage=1,e.raisepros=[],s.go("index.userList",{pageID:e.currentPage,keyID:e.keyword}))},e.filterBtn=function(t){e.currentPage=1,"all"==t?s.go("index.userList",{pageID:e.currentPage,keyword:e.keyword,tagID:e.tagsName,disID:"",nameID:"",wxNameID:""}):"name"==t?s.go("index.userList",{pageID:e.currentPage,keyword:e.keyword,tagID:e.tagsName,disID:"",nameID:2,wxNameID:""}):"wxname"==t?s.go("index.userList",{pageID:e.currentPage,keyword:e.keyword,tagID:e.tagsName,disID:"",nameID:"",wxNameID:3}):"dist"==t&&s.go("index.userList",{pageID:e.currentPage,keyword:e.keyword,tagID:e.tagsName,disID:1,nameID:"",wxNameID:""})},e.addUserScoreBtn=function(o){$("#addScoreModal").modal("show"),e.addScoreBtn=function(){return console.log(e.addScore),""==e.addScore||void 0==e.addScore?void t("友情提示","请输入要添加的积分数量"):void a.addUserScore({autoid:o.autoid,total_score:e.addScore},function(a){console.log(a),0==a.errcode?(r(),t("友情提示","添加积分成功"),$("#addScoreModal").modal("hide"),e.addScore=""):t("友情提示",a.errmsg)})}},e.editUserInfoBtn=function(o){$("#userInfoModal").modal("show"),e.editInfoData.autoid=o.autoid,i.wx_nick_name=o.wx_nick_name,i.true_name=o.true_name,i.user_phone=o.user_phone,i.user_company=o.user_company,i.user_email=o.user_email,i.user_position=o.user_position,i.available_vote_count=o.available_vote_count,i.total_score=o.total_score,e.editInfoBtn=function(){null!=i.wx_nick_name&&""!=i.wx_nick_name&&(e.editInfoData.wx_nick_name=i.wx_nick_name),null!=i.true_name&&""!=i.true_name&&(e.editInfoData.true_name=i.true_name),null!=i.user_phone&&""!=i.user_phone&&(e.editInfoData.user_phone=i.user_phone),null!=i.user_company&&""!=i.user_company&&(e.editInfoData.user_company=i.user_company),null!=i.user_email&&""!=i.user_email&&(e.editInfoData.user_email=i.user_email),null!=i.user_position&&""!=i.user_position&&(e.editInfoData.user_position=i.user_position),null!=i.available_vote_count&&""!=i.available_vote_count&&(e.editInfoData.available_vote_count=i.available_vote_count),null!=i.total_score&&""!=i.total_score&&(e.editInfoData.total_score=i.total_score),a.editUserInfo({data:angular.toJson(e.editInfoData)},function(e){console.log(e),0==e.errcode?(r(),t("友情提示","修改用户信息成功"),$("#userInfoModal").modal("hide")):t("友情提示",e.errmsg)})}},e.pageChanged=function(){console.log(e.currentPage),s.go("index.userList",{pageID:e.currentPage})}},function(e){console.log(e)})}e.$inject=["$scope","alertbox","mmpadminAPI","$stateParams","$state"],angular.module("mmpadmin").controller("userListCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s){e.updateNum=!1,a.getFollowerList({pageindex:1,pagesize:1,keyword:""},function(i){function l(){a.getFollowerList({pageindex:e.currentPage,pagesize:e.pagesize,keyword:e.keyword},function(t){e.totals=t.returnObj.totalcount,e.raisepros=t.returnObj.list,0==t.errcode&&1==e.updateNum?(s("友情提示","更新粉丝数量成功"),0==e.updateNum):0!=t.errcode&&s("友情提示",t.returnValue)},function(e){console.log(e)})}console.log(i),e.totals=i.returnObj.totalcount,e.currentPage=""==o.pageID||void 0==o.pageID?1:parseInt(o.pageID),e.keyword=""==o.keyID||void 0==o.keyID?"":o.keyID,e.pagesize=10,l(),e.ctrlsearch=function(a){console.log(["点击回车",a]),console.log(e.keyword);var o=window.event?a.keyCode:a.which;13===o&&(e.currentPage=1,e.raisepros=[],t.go("index.followerList",{pageID:e.currentPage,keyID:e.keyword}))},e.updateFollowerBtn=function(o){"num"===o?(e.updateNum=!0,l(),console.log(o)):(console.log(o),a.updateFans({},function(a){console.log(a),1==a.isSuccess&&(s("友情提示",a.returnValue),t.go("index.followerList",{pageID:e.currentPage,keyID:e.keyword}))}))},e.pageChanged=function(){console.log(e.currentPage),t.go("index.followerList",{pageID:e.currentPage})}},function(e){console.log(e)})}e.$inject=["$scope","$state","mmpadminAPI","$stateParams","alertbox"],angular.module("mmpadmin").controller("followerListCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i){e.getConfigList({pageindex:1,pagesize:1},function(o){function l(){e.getConfigList({pageindex:t.currentPage,pagesize:t.pagesize},function(e){console.log(e),t.configListData=e.result.list,t.totals=e.result.totalcount},function(e){console.log(e)})}function r(){i("友情提示","您确定删除自定义配置吗？","确定删除","取消删除",function(){t.ids=t.ids.toString(),","==t.ids.substring(t.ids.length-1,t.ids.length)&&(t.ids=t.ids.substring(t.ids,t.ids.length-1)),e.delConfig({ids:t.ids},function(e){if(console.log(e),0==e.code){t.ids="";var a="友情提示",o="删除成功";s(a,o),l(),t.selectedall=!1}else s(e.code,e.msg)},function(e){console.log(e)})},function(){})}console.log(o),t.totals=o.result.totalcount,t.currentPage=""==a.pageID||void 0==a.pageID?1:parseInt(a.pageID),t.pagesize=10,t.configListData=[],l(),t.delConfigBtn=function(e){t.ids=e.id,r()},t.delallconfigBtn=function(){if(""!=t.ids)console.log(["$scope.ids",t.ids]),r();else{var e="友情提示",a="请至少选择一个自定义";s(e,a)}},t.selectedall=!1,t.ids="",t.checkedall=function(){t.selectedall=!t.selectedall,t.ids="",angular.forEach(t.configListData,function(e){e.selected=t.selectedall,t.selectedall?(t.ids+=e.id+",",console.log(["$scope.ids",t.ids])):(t.ids="",console.log(["$scope.ids",t.ids]))})},t.selectme=function(e){e.selected=!e.selected,console.log(e.selected);var a=!0;t.configListData.filter(function(e){e.selected||(a=!1)}),t.selectedall=a,e.selected?(t.ids+=e.id+",",console.log(t.ids)):(t.ids=t.ids.replace(e.id+",",""),console.log(t.ids))};var n=t.pageData={key:"",value:""};t.addTopConfigBtn=function(){t.isAddcard=!0,$("#dealModal").modal({backdrop:"static",keyboard:!1}),n.key="",n.value=""},t.editConfigBtn=function(e){t.isAddcard=!1,$("#dealModal").modal({backdrop:"static",keyboard:!1}),n.id=e.id,n.key=e.key,n.value=e.value},t.addConfigBtn=function(){return""==n.key?void s("友情提示","请输入自定义key"):""==n.value?void s("友情提示","请输入自定义value"):void(1==t.isAddcard?e.addConfig({key:n.key,value:n.value},function(e){console.log(e),0==e.code&&(s("友情提示","添加自定义配置成功"),$("#dealModal").modal("hide"),l())},function(e){console.log(e)}):e.editConfig({id:n.id,key:n.key,value:n.value},function(e){0==e.code&&(s("友情提示","修改自定义配置成功"),$("#dealModal").modal("hide"),l())}))}},function(e){}),t.pageChanged=function(){console.log(t.currentPage),o.go("index.configList",{pageID:t.currentPage})},t.clear=function(){$("#dealModal").modal("hide"),pageData.key="",pageData.value=""}}e.$inject=["mmpadminAPI","$scope","$stateParams","$state","alertbox","alertconformbox"],angular.module("mmpadmin").controller("configListCtrl",e)}(),function(){"use strict";function e(){return{templateUrl:"app/components/productTagBox/productTagBox.html",link:function(){}}}angular.module("mmpadmin").directive("productTagBox",e)}(),function(){"use strict";function e(){return{restrict:"E",replace:!0,scope:{minHeight:"@"},templateUrl:"app/components/backTop/backTop.html",link:function(e,t,a){t.click(function(){jQuery("html,body").animate({scrollTop:0},200)}).hover(function(){jQuery(this).addClass("hover")},function(){jQuery(this).removeClass("hover")}),e.minHeight=e.minHeight?e.minHeight:800,jQuery(window).scroll(function(){var t=jQuery(window).scrollTop();t>e.minHeight?jQuery("#gotoTop").fadeIn(100):jQuery("#gotoTop").fadeOut(200)})}}}angular.module("mmpadmin").directive("backTop",e)}(),angular.module("mmpadmin").controller("alertselectboxCtrl",["$scope","$rootScope","mmpadminAPI","$state","$modalInstance",function(e,t,a,o,s){function i(){a.productlist("/admin/mall/product.ashx",{action:"list",pageindex:e.currentPage,pagesize:e.pagesize,is_onsale:e.is_onsale,is_promotion_product:e.is_promotion_product},function(t){console.log(["获取商品列表成功",t]),e.productlistdatas=t.list,e.totalItems=t.totalcount,e.pageindexs=Math.ceil(e.totalItems/e.pagesize)},function(e){console.log(["获取商品列表请求失败",e])})}e.currentPage=1,e.pagesize=10,e.is_onsale=1,e.is_promotion_product=0,i(),e.pageChanged=function(){console.log(e.currentPage),i()},e.seletproduct=function(e){s.close(),t.hasseletdata=e,t.aftershowimg=!0,t.showeditBtn=!1,t.showaddBtn=!0},e.refresh=function(){e.currentPage=1,i()},e.addproduct=function(){s.close(),o.go("index.productEditor")}}]).factory("alertselectbox",["$modal",function(e){return function(){e.open({animation:!0,templateUrl:"app/components/alertselectbox/alertselectbox.html",controller:"alertselectboxCtrl",size:"lg",resolve:{}})}}]),angular.module("mmpadmin").controller("alertconformboxCtrl",["$scope","$modalInstance","alertdata",function(e,t,a){e.alertdata=a,e.ok=function(){a.callback(),t.close()},e.cancel=function(){a.cancel(),t.close()}}]).factory("alertconformbox",["$modal",function(e){return function(t,a,o,s,i,l){e.open({animation:!0,templateUrl:"app/components/alertconformbox/alertconformbox.html",controller:"alertconformboxCtrl",size:"sm",resolve:{alertdata:function(){return{title:t,concent:a,again:o,back:s,callback:i,cancel:l}}}})}}]),angular.module("mmpadmin").controller("alertboxCtrl",["$scope","$modalInstance","alertdata",function(e,t,a){e.alertdata=a,e.ok=function(){t.close()}}]).factory("alertbox",["$modal",function(e){return function(e,t){layer.msg(t)}}]),function(){"use strict";function e(e,t,a,o,s,i){e.getcompanylist({pageindex:1,pagesize:1},function(l){function r(){e.getcompanylist({pageindex:t.currentPage,pagesize:t.pagesize},function(e){console.log("获取众筹商品列表成功",e),t.totals=e.totalcount,t.companyDates=e.list},function(e){console.log(e)})}function n(){i("友情提示","您确定删除众筹商品吗？","确定删除","取消删除",function(){t.ids=t.ids.toString(),","==t.ids.substring(t.ids.length-1,t.ids.length)&&(t.ids=t.ids.substring(t.ids,t.ids.length-1)),e.delcompany({company_ids:t.ids},function(e){if(console.log(e),0==e.errcode){t.ids="",t.selectedall=!1;var a="友情提示",o="删除成功";s(a,o),r()}else s(e.errcode,e.errmsg)},function(e){console.log(e)})},function(){})}console.log("获取众筹商品列表成功",l),t.totals=l.totalcount,t.currentPage=""==a.pageID||void 0==a.pageID?1:parseInt(a.pageID),t.pagesize=10,r(),t.delallcompanyBtn=function(){if(""!=t.ids)console.log(["$scope.ids",t.ids]),n();else{var e="友情提示",a="请至少选择一件产品";s(e,a)}},t.delcompanyBtn=function(e){t.ids=e.company_id,n()},t.pageChanged=function(){console.log(t.currentPage),o.go("index.companylist",{pageID:t.currentPage})},t.selectme=function(e){e.selected=!e.selected,console.log(e.selected);var a=!0;t.companyDates.filter(function(e){e.selected||(a=!1)}),t.selectedall=a,e.selected?(t.ids+=e.company_id+",",console.log(t.ids)):(t.ids=t.ids.replace(e.company_id+",",""),console.log(t.ids))},t.selectedall=!1,t.ids="",t.checkedall=function(){t.selectedall=!t.selectedall,t.ids="",angular.forEach(t.companyDates,function(e){e.selected=t.selectedall,t.selectedall?(t.ids+=e.company_id+",",console.log(["$scope.ids",t.ids])):(t.ids="",console.log(["$scope.ids",t.ids]))})}},function(e){console.log(e)})}e.$inject=["mmpadminAPI","$scope","$stateParams","$state","alertbox","alertconformbox"],angular.module("mmpadmin").controller("companylistCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i){var l=t.companydata={company_id:a.companyID,company_logo:"",company_name:"",company_tel:"",comoany_introduction:"",company_natrue:"",company_director:"",company_websiteurl:""};console.log(a.companyID),e.getcompanyinfo({company_id:a.companyID},function(e){console.log(e),t.company=e,t.company_logo=[e.company_logo],l.company_name=e.company_name,l.company_tel=e.company_tel,l.company_natrue=e.company_natrue,l.company_director=e.company_director,l.company_websiteurl=e.company_websiteurl,$(".summernote").summernote({lang:"zh-CN",callbacks:{onInit:function(){console.log(t.companydata),l.comoany_introduction=t.company.comoany_introduction},onChange:function(){var e=$(".summernote").summernote("code");l.comoany_introduction=e},onImageUpload:function(e){console.log(["image upload:",e]),console.log(["files[0]:",e[0]]);var t=new XMLHttpRequest;t.open("POST",i.mainsiteurl+"/serv/api/common/file.ashx?action=add",!0);var a=new FormData;for(var o in e)a.append("file",e[o]);t.send(a),t.onreadystatechange=function(e){if(4==t.readyState&&200==t.status){console.log(["responseText",JSON.parse(t.responseText)]);for(var a=JSON.parse(t.responseText),o="",s=0;s<a.file_url_list.length;s++){o="<img src="+a.file_url_list[s]+">";var i=$(o);$(".summernote").summernote("insertNode",i[0])}}}}}}),$(".summernote").summernote("code",t.company.comoany_introduction)}),t.editcompanyBtn=function(){return t.company_logo&&(l.company_logo=t.company_logo[0]),""==t.companydata.company_name?void s("友情提示","请输入企业名称"):""==t.companydata.company_logo?void s("友情提示","请上传企业logo"):""==t.companydata.comoany_introduction?void s("友情提示","请输入企业简介"):""==t.companydata.company_tel?void s("友情提示","请输入企业电话"):(console.log(l),void e.updatecompanyinfo({data:angular.toJson(l)},function(e){console.log(e),0==e.errcode&&(s("友情提示","更改企业信息成功"),history.go(-1))}))}}e.$inject=["mmpadminAPI","$scope","$stateParams","$state","alertbox","$rootScope"],angular.module("mmpadmin").controller("companyeditCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s){e.getcompanyinfo({company_id:a.companyID},function(e){console.log(e),t.companydata=e})}e.$inject=["mmpadminAPI","$scope","$stateParams","$state","alertbox"],angular.module("mmpadmin").controller("companydetailCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i){var l=t.companydata={company_id:0,company_logo:"",company_name:"",company_tel:"",comoany_introduction:"",company_natrue:"",company_director:"",company_websiteurl:""};$(".summernote").summernote({lang:"zh-CN",callbacks:{onInit:function(){var e=$(".summernote").summernote("code");l.comoany_introduction=e},onChange:function(){var e=$(".summernote").summernote("code");l.comoany_introduction=e},onImageUpload:function(e){console.log(["image upload:",e]),console.log(["files[0]:",e[0]]);var t=new XMLHttpRequest;t.open("POST",i.mainsiteurl+"/serv/api/common/file.ashx?action=add",!0);var a=new FormData;for(var o in e)a.append("file",e[o]);t.send(a),t.onreadystatechange=function(e){if(4==t.readyState&&200==t.status){console.log(["responseText",JSON.parse(t.responseText)]);for(var a=JSON.parse(t.responseText),o="",s=0;s<a.file_url_list.length;s++){o="<img src="+a.file_url_list[s]+">";var i=$(o);$(".summernote").summernote("insertNode",i[0])}}}}}}),t.addcompanyBtn=function(){return l.company_logo&&(l.company_logo=l.company_logo[0]),""==l.company_name?void s("友情提示","请输入企业名称"):""==l.company_logo?void s("友情提示","请上传企业logo"):""==l.comoany_introduction?void s("友情提示","请输入企业简介"):""==l.company_tel?void s("友情提示","请输入企业电话"):(console.log(angular.toJson(l)),void e.addcompany({data:angular.toJson(l)},function(e){console.log(e),0==e.errcode&&(s("友情提示","添加企业成功"),o.go("index.companylist"))}))}}e.$inject=["mmpadminAPI","$scope","$stateParams","$state","alertbox","$rootScope"],angular.module("mmpadmin").controller("companyaddCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s){a.sendCoupon({cardcoupon_id:t.cardID,pageindex:1,pagesize:1},function(o){console.log(o),e.totals=o.totalcount,e.currentPage=""==t.pageID||void 0==t.pageID?1:parseInt(t.pageID),e.pagesize=10,e.navListData=[],a.sendCoupon({pageindex:e.currentPage,pagesize:e.pagesize,cardcoupon_id:t.cardID},function(t){console.log(t),e.navListData=t.list,e.totals=t.totalcount},function(e){console.log(e)})},function(e){}),e.pageChanged=function(){console.log(e.currentPage),s.go("index.sendCardHistory",{pageID:e.currentPage})}}e.$inject=["$scope","$stateParams","mmpadminAPI","alertbox","$state"],angular.module("mmpadmin").controller("sendCardHistoryCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i,l){function r(){e.productlist("/admin/mall/product.ashx",{action:"list",pageindex:t.currentPageP,pagesize:t.pagesizeP,is_onsale:1,keyword:t.keywordP,category_id:t.categoryP_id},function(e){console.log(["获取商品列表成功",e]),t.productlistdatas=e.list,t.totalItems=e.totalcount,t.pageindexs=Math.ceil(t.totalItems/t.pagesizeP)},function(e){console.log(["获取商品列表请求失败",e])})}function n(){e.gettags("/admin/mall/tag.ashx",{action:"list",pageindex:1,pagesize:100},function(e){t.tagsData=e.list,console.log(["获得商品标签成功",e])},function(e){console.log(["获得商品标签请求失败",e])})}t.wxdomain=WEBSITE_CONFIG.weixin_bind_domain,e.cardCouponList({pageindex:1,pagesize:1,cardcoupon_type:""},function(l){function r(){e.cardCouponList({pageindex:t.currentPage,pagesize:t.pagesize,cardcoupon_type:t.cardcoupon_type},function(e){console.log(e),t.cardCoupons=e.list,t.totals=e.totalcount},function(e){console.log(e)})}function n(){e.getUserList({pageindex:t.pageindexM,pagesize:t.pagesizeM,keyword:t.keywordM},function(e){t.memberListData=e.returnObj.list;var a=e.returnObj.totalcount;t.totalPageM=Math.ceil(a/t.pagesizeM),console.log(["获取会员列表成功",t.memberListData])},function(e){console.log(["获取会员列表失败",e])})}function d(){i("友情提示","您确定删除卡券吗？","确定删除","取消删除",function(){t.ids=t.ids.toString(),","==t.ids.substring(t.ids.length-1,t.ids.length)&&(t.ids=t.ids.substring(t.ids,t.ids.length-1)),e.deleteCoupon({cardcoupon_ids:t.ids},function(e){if(console.log(e),0==e.errcode){t.ids="";var a="友情提示",o="删除成功";s(a,o),r(),t.selectedall=!1}else s(e.errcode,e.errmsg)},function(e){console.log(e)})},function(){})}function c(){var a={page:t.pageindexStore,rows:t.pagesizeStore,cate_id:0,keyword:t.keywordStore};e.storeList(a,function(e){t.storeList=e.result.list,t.totalPageStore=Math.ceil(e.result.totalcount/t.pagesizeStore),t.totalCountStore=e.result.totalcount},function(e){})}if(console.log(l),t.totals=l.totalcount,t.currentPage=""==a.pageID||void 0==a.pageID?1:parseInt(a.pageID),t.cardcoupon_type=""===a.typeID||void 0===a.typeID?"":parseInt(a.typeID),t.categorys=[{cardcoupon_name:"全部",cardcoupon_type:""},{cardcoupon_name:"折扣券",cardcoupon_type:0},{cardcoupon_name:"现金券",cardcoupon_type:1},{cardcoupon_name:"免邮券",cardcoupon_type:2},{cardcoupon_name:"满减券",cardcoupon_type:3},{cardcoupon_name:"满送券",cardcoupon_type:4}],""!=a.typeID)for(var p in t.categorys)t.categorys[p].cardcoupon_type==a.typeID&&(t.category=t.categorys[p]);else t.category=t.categorys[0];t.whichcategory=function(e){t.cardcoupon_type=""!==e.cardcoupon_type?e.cardcoupon_type:"",t.currentPage=1,t.cardCoupons=[],o.go("index.cardList",{pageID:t.currentPage,typeID:t.cardcoupon_type})},t.pagesize=10,t.cardCoupons=[],r(),t.sendCard={send_type:""},t.storeList=[],t.pageindexM=1,t.pagesizeM=10,t.keywordM="",t.pageindexStore=1,t.pagesizeStore=10,t.totalPageStore=0,t.totalCountStore=0,t.keywordStore="",n(),t.showMembers=function(){$("#memberdealModal").modal("show")},t.memberpageChanged=function(){console.log(t.pageindexM),n()},t.ctrlsearchM=function(e){var a=window.event?e.keyCode:e.which;13===a&&(t.pageindexM=1,t.memberListData=[],n())},t.ctrlsearchStore=function(e){var a=window.event?e.keyCode:e.which;13===a&&(t.pageindexStore=1,t.storeList=[],c())},t.storePageChanged=function(){console.log(["pageindexStore",t.pageindexStore]),c()},t.selectMeBtnM=function(e){console.log(["member",e]),$("#memberdealModal").modal("hide"),t.sendCard.img=e.wx_head_img_url,t.sendCard.nick_name=e.wx_nick_name,t.sendCard.true_name=e.true_name,t.sendCard.id=e.user_id,t.sendCard.mtags="",angular.forEach(t.memberTags,function(e,t){e.select=0})},e.getUserTag({pageindex:1,pagesize:100},function(e){t.memberTags=e.returnObj.list,console.log(["获取会员所有标签成功",t.memberTags]),angular.forEach(t.memberTags,function(e,t){e.select=0})},function(e){console.log("获取会员所有标签成功失败")}),t.selectTag=function(e){t.memberTags[e].select=1==t.memberTags[e].select?0:1},t.giveCardcouponBtn=function(a){var o=new Date;return new Date(a.valid_to).getTime()<o.getTime()&&"1"!=a.expire_time_type?void s("友情提示","该卡券已过期"):($("#giveDealModal").modal("show"),void(t.giveCouponBtn=function(){if(t.sendCard.mtags="",angular.forEach(t.memberTags,function(e,a){1==e.select&&(t.sendCard.mtags+=e.tag_name+",")}),t.sendCard.mtags&&(t.sendCard.mtags=t.sendCard.mtags.slice(0,t.sendCard.mtags.length-1)),
"0"==t.sendCard.send_type){if(t.sendCard.mtags="",angular.forEach(t.memberTags,function(e,t){e.select=0}),""==t.sendCard.id||void 0==t.sendCard.id)return void s("友情提示","请选择接受卡券的人");e.giveCouponById({cardcoupon_id:a.cardcoupon_id,id:t.sendCard.id},function(e){console.log(e),0==e.errcode||1==e.status?(s("友情提示","发放优惠券成功"),$("#giveDealModal").modal("hide"),t.sendCard.send_type="",t.sendCard.mtags="",angular.forEach(t.memberTags,function(e,t){e.select=0}),t.sendCard.id="",t.sendCard.img="",t.sendCard.nick_name="",t.sendCard.true_name=""):s("友情提示",e.msg)})}else{if(t.sendCard.id="",t.sendCard.img="",t.sendCard.nick_name="",t.sendCard.true_name="",""==t.sendCard.mtags)return void s("友情提示","请选择接受卡券的用户标签组");e.giveCouponByTag({cardcoupon_id:a.cardcoupon_id,tags:t.sendCard.mtags},function(e){console.log(e),0==e.errcode||0==e.status?(s("友情提示","发放优惠券成功"),$("#giveDealModal").modal("hide"),t.sendCard.send_type="",t.sendCard.mtags="",angular.forEach(t.memberTags,function(e,t){e.select=0}),t.sendCard.id="",t.sendCard.img="",t.sendCard.nick_name="",t.sendCard.true_name=""):s("友情提示",e.errmsg)})}}))},t.createQcodeBtn=function(a){$("#qCodeModal").modal("show");var o=""!=t.wxdomain?t.wxdomain:window.location.host;if(-1!=window.location.host.indexOf("mixblu"))var s="http://"+o+"/customize/shop/?ngroute=getcoupon/"+a.cardcoupon_id+"#/getcoupon/"+a.cardcoupon_id;else if(-1!=window.location.host.indexOf("jikuwifi"))var s="http://"+o+"/customize/jikuwifi/?ngroute=getcoupon/"+a.cardcoupon_id+"#/getcoupon/"+a.cardcoupon_id;else var s="http://"+o+"/customize/shop/?ngroute=getcoupon/"+a.cardcoupon_id+"#/getcoupon/"+a.cardcoupon_id;e.createQCode({code:s},function(e){t.qcodedata={qcode:e.result.qrcode_url,url:s,weixin_card_id:""}})},t.createQcodeWeixinBtn=function(e){t.qcodedata={qcode:e.weixin_qrcode_url,url:e.weixin_qrcode_url,weixin_card_id:e.weixin_card_id},$("#qCodeModal").modal("show")},t.delCardcouponBtn=function(e){t.ids=e.cardcoupon_id,d()},t.delallcardcouponBtn=function(){if(""!=t.ids)console.log(["$scope.ids",t.ids]),d();else{var e="友情提示",a="请至少选择一个卡券";s(e,a)}},t.selectedall=!1,t.ids="",t.checkedall=function(){t.selectedall=!t.selectedall,t.ids="",angular.forEach(t.cardCoupons,function(e){e.selected=t.selectedall,t.selectedall?(t.ids+=e.cardcoupon_id+",",console.log(["$scope.ids",t.ids])):(t.ids="",console.log(["$scope.ids",t.ids]))})},t.selectme=function(e){e.selected=!e.selected,console.log(e.selected);var a=!0;t.cardCoupons.filter(function(e){e.selected||(a=!1)}),t.selectedall=a,e.selected?(t.ids+=e.cardcoupon_id+",",console.log(t.ids)):(t.ids=t.ids.replace(e.cardcoupon_id+",",""),console.log(t.ids))},t.selectMeBtnStore=function(e){e.selected=!e.selected,e.selected?u.store_ids+=e.id+",":u.store_ids=u.store_ids.replace(e.id+",",""),u.store_ids=u.store_ids.replace("undefined",""),u.store_names="";for(var a=0;a<t.storeList.length;a++)t.storeList[a].selected&&(u.store_names+=t.storeList[a].title+" ");console.log(["pageData.store_names",u.store_names])};var u=t.pageData={cardcoupon_id:0,cardcoupon_name:"",cardcoupon_type:"",product_id:"",discount:"",deductible_amount:"",freefreight_amount:"",buckle_amount:"",buckle_sub_amount:"",valid_from:"",valid_to:"",limit_type:"",product_tags:"",logo_url:"",store_ids:"",store_names:""};t.addCategorys=[{cardcoupon_name:"折扣券   (直接以折扣价购物)",cardcoupon_type:0},{cardcoupon_name:"现金券   (购物时直接抵扣现金)",cardcoupon_type:1},{cardcoupon_name:"免邮券   (购物时直接抵扣邮费)",cardcoupon_type:2},{cardcoupon_name:"满减券   (购物满一定金额后可以直接抵扣现金)",cardcoupon_type:3},{cardcoupon_name:"满送券(购物满一定金额后赠送指定金额)",cardcoupon_type:4}],t.addCategory=t.addCategorys[0],u.cardcoupon_type=t.addCategorys[0].cardcoupon_type,t.changeCategory=function(e){console.log(e),u.cardcoupon_type=e.cardcoupon_type,console.log(u.cardcoupon_type)},t.addcardcouponBtn=function(){t.isAddcard=!0,$("#dealModal").modal({backdrop:"static",keyboard:!1}),t.addCategory=t.addCategorys[0],u.cardcoupon_type=t.addCategorys[0].cardcoupon_type,u.cardcoupon_name="",u.product_id="",u.discount="",u.deductible_amount="",u.freefreight_amount="",u.buckle_amount="",u.max_count="",u.buckle_sub_amount="",u.valid_from="",u.valid_to="",u.limit_type="",u.product_tags="",u.user_get_limit_type="",u.expire_time_type="",u.expire_day="3",u.is_subscribe_give=!1,u.full_give="",u.is_can_use_shop=!0,u.is_can_use_groupbuy=!0,u.is_can_use_groupbuy_member=!1,angular.forEach(t.tagsData,function(e,t){e.select=0}),t.productEditorData="",u.logo_url="",u.store_ids="",u.store_names=""},t.editcardcouponBtn=function(a){t.isAddcard=!1,console.log(["boxdata",a]),$("#dealModal").modal({backdrop:"static",keyboard:!1});for(var o in t.addCategorys)a.cardcoupon_type===t.addCategorys[o].cardcoupon_type&&(t.addCategory=t.addCategorys[o],u.cardcoupon_type=t.addCategorys[o].cardcoupon_type);if(t.productEditorData="",u.cardcoupon_id=a.cardcoupon_id,u.cardcoupon_name=a.cardcoupon_name,u.limit_type=a.limit_type,null==a.limit_type&&(u.limit_type=""),0==a.product_id?u.product_id="":(u.product_id=a.product_id,e.productDetail({action:"get",product_id:u.product_id},function(e){console.log(["获取商品详情成功",e]),t.productEditorData=e},function(e){console.log(["获取商品详情请求失败",e])})),u.discount=0==a.discount?"":a.discount,u.deductible_amount=0==a.deductible_amount?"":a.deductible_amount,u.freefreight_amount=0==a.freefreight_amount?"":a.freefreight_amount,u.buckle_amount=0==a.buckle_amount?"":a.buckle_amount,u.buckle_sub_amount=0==a.buckle_sub_amount?"":a.buckle_sub_amount,u.valid_from=0==a.valid_from?"":a.valid_from.replace(/\//g,"-"),u.valid_to=0==a.valid_to?"":a.valid_to.replace(/\//g,"-"),u.max_count=0==a.max_count||""==a.max_count?0:a.max_count,angular.forEach(t.tagsData,function(e,t){e.select=0}),u.product_tags=a.product_tags,u.user_get_limit_type=a.user_get_limit_type,null==u.user_get_limit_type&&(u.user_get_limit_type=""),u.expire_time_type=a.expire_time_type,null==u.expire_time_type&&(u.expire_time_type=""),u.expire_day=a.expire_day,null==u.expire_day&&(u.expire_day=""),u.bind_channel_name=a.bind_channel_name,u.bind_channel_userid=a.bind_channel_userid,u.is_subscribe_give=1==a.is_subscribe_give,u.full_give=a.full_give,u.is_can_use_shop=1==a.is_can_use_shop,u.is_can_use_groupbuy=1==a.is_can_use_groupbuy,u.is_can_use_groupbuy_member=1==a.is_can_use_groupbuy_member,u.store_ids=a.store_ids,u.logo_url=[a.logo_url],u.store_names=a.store_names,a.product_tags){var s=a.product_tags.split(",");angular.forEach(t.tagsData,function(e,t){for(var a in s)e.tag_name==s[a]&&(e.select=1)})}},t.selectProBtn=function(){$("#pddealModal").modal("show"),t.selectMeBtn=function(a){$("#pddealModal").modal("hide"),u.product_id=a.product_id,e.productDetail({action:"get",product_id:u.product_id},function(e){console.log(["获取商品详情成功",e]),t.productEditorData=e},function(e){console.log(["获取商品详情请求失败",e])})}},t.selectChannel=function(){$("#dlgChannelList").modal("show"),e.channelList("/Handler/App/CationHandler.ashx",{action:"QueryChannel"},function(e){t.channelList=e.rows},function(e){})},t.selectStore=function(){$("#dlgStoreList").modal("show"),c()},t.confirmSelectStore=function(){$("#dlgStoreList").modal("hide")},t.selectChannelConfirm=function(e){$("#dlgChannelList").modal("hide"),u.bind_channel_userid=e.UserID,u.bind_channel_name=e.ChannelName,console.log(u.bind_channel_name)},t.selectNotChannel=function(e){u.bind_channel_userid="",u.bind_channel_name="无"},t.selectNotStore=function(){u.store_names="",u.store_ids=""},t.addCouponBtn=function(){if(""==u.cardcoupon_name)return void s("友情提示","请输入优惠券名称");if(""==u.discount&&0===u.cardcoupon_type)return void s("友情提示","请输入折扣");if(""==u.deductible_amount&&1===u.cardcoupon_type)return void s("友情提示","请输入抵扣");if(""==u.freefreight_amount&&2===u.cardcoupon_type&&(u.freefreight_amount=0),""==u.buckle_amount&&3===u.cardcoupon_type||""==u.buckle_sub_amount&&3===u.cardcoupon_type)return void s("友情提示","请检查满减信息输入是否有误");if(3===u.cardcoupon_type&&u.buckle_amount<u.buckle_sub_amount)return void s("友情提示","满金额要大于减金额");if(4===u.cardcoupon_type&&(""==u.buckle_amount||""==u.buckle_amount))return void s("友情提示","请输入满金额,赠送金额");if(4===u.cardcoupon_type&&u.buckle_amount<u.buckle_sub_amount)return void s("友情提示","满金额要大于赠送金额");if(""==u.product_id&&(u.product_id=0),0===u.cardcoupon_type&&(u.deductible_amount=0,u.freefreight_amount=0,u.buckle_amount=0,u.buckle_sub_amount=0),1===u.cardcoupon_type&&(u.discount=0,u.freefreight_amount=0,u.buckle_amount=0,u.buckle_sub_amount=0),2===u.cardcoupon_type&&(u.discount=0,u.deductible_amount=0,u.buckle_amount=0,u.buckle_sub_amount=0),3===u.cardcoupon_type&&(u.discount=0,u.deductible_amount=0,u.freefreight_amount=0),u.product_tags="",angular.forEach(t.tagsData,function(e,t){1==e.select&&(u.product_tags+=e.tag_name+",")}),u.product_tags&&(u.product_tags=u.product_tags.slice(0,u.product_tags.length-1)),"0"==u.limit_type){if(u.product_tags="",angular.forEach(t.tagsData,function(e,t){e.select=0}),""==u.product_id&&0==u.product_id)return void s("友情提示","请选择优惠商品")}else if("1"==u.limit_type){if(u.product_id=0,t.productEditorData="",""==u.product_tags)return void s("友情提示","请选择优惠标签")}else u.product_tags="",angular.forEach(t.tagsData,function(e,t){e.select=0}),u.product_id=0,t.productEditorData="";if(u.valid_from)if(u.valid_to){if(new Date(u.valid_from.replace(/-/g,"/")).getTime()>=new Date(u.valid_to.replace(/-/g,"/")).getTime()&&""==u.expire_time_type)return void s("友情提示","结束时间要大于起始时间");u.valid_from=new Date(u.valid_from.replace(/-/g,"/")).getTime(),u.valid_to=new Date(u.valid_to.replace(/-/g,"/")).getTime()}else u.valid_to=0;else u.valid_from=0;u.valid_to||(u.valid_to=0),console.log(angular.toJson(u)),u.is_can_use_shop=u.is_can_use_shop?1:0,u.is_can_use_groupbuy=u.is_can_use_groupbuy?1:0,u.is_can_use_groupbuy_member=u.is_can_use_groupbuy_member?1:0,u.is_subscribe_give=u.is_subscribe_give?1:0,u.logo_url=u.logo_url[0],console.log(["总数据",u]),1==t.isAddcard?e.addCoupon({data:angular.toJson(u)},function(e){console.log(e),0==e.errcode||0==e.code?(s("友情提示","添加优惠券成功"),$("#dealModal").modal("hide"),r()):(s("友情提示",e.errmsg),u.valid_from="",u.valid_to="")}):e.editCoupon({data:angular.toJson(u)},function(e){console.log(e),0==e.errcode||0==e.code?(s("友情提示","修改优惠券成功"),$("#dealModal").modal("hide"),r()):(s("友情提示",e.errmsg),u.valid_from="",u.valid_to="")})}},function(e){}),t.pageChanged=function(){console.log(t.currentPage),o.go("index.cardList",{pageID:t.currentPage})},t.keywordP="",t.categoryP_id="",t.currentPageP=1,t.pagesizeP=10,r(),t.pdpageChanged=function(){console.log(t.currentPageP),r()},n(),e.getcategorys({pageindex:1,pagesize:1e3},function(e){var a={category_id:"",category_name:"全部商品"};e.list.unshift(a),t.categorysP=e.list,t.categoryP=t.categorysP[0]},function(e){console.log("商品分类",e)}),t.whichcateP=function(e){t.categoryP_id="全部商品"!=e.prop_name?e.category_id:"",t.currentPageP=1,t.productlistdatas=[],r()},t.ctrlsearchP=function(e){var a=window.event?e.keyCode:e.which;13===a&&(t.currentPageP=1,t.productlistdatas=[],r())},t.clear=function(){$("#dealModal").modal("hide"),t.pageData.cardcoupon_id=0,t.pageData.cardcoupon_name="",t.pageData.cardcoupon_type="",t.pageData.product_id="",t.pageData.discount="",t.pageData.deductible_amount="",t.pageData.freefreight_amount="",t.pageData.buckle_amount="",t.pageData.buckle_sub_amount="",t.pageData.valid_from="",t.pageData.valid_to="",t.pageData.limit_type="",t.pageData.product_tags="",t.pageData.user_get_limit_type="",t.pageData.is_can_use_shop=!0,t.pageData.is_can_use_groupbuy=!1,t.pageData.expire_time_type="",t.pageData.expire_day="3"},t.showSetHexiaoCode=function(){$("#wrapSetHexiaoCode").modal("show")},t.setHexiaoCode=function(){$("#wrapSetHexiaoCode").modal("hide")},t.setHexiaoCodeCancel=function(){$("#wrapSetHexiaoCode").modal("hide")},t.cardcouponType=[{cardcoupon_name:"全部",cardcoupon_type:""},{cardcoupon_name:"折扣券",cardcoupon_type:0},{cardcoupon_name:"现金券",cardcoupon_type:1},{cardcoupon_name:"免邮券",cardcoupon_type:2},{cardcoupon_name:"满减券",cardcoupon_type:3},{cardcoupon_name:"满送券",cardcoupon_type:4}]}e.$inject=["mmpadminAPI","$scope","$stateParams","$state","alertbox","alertconformbox","$location"],angular.module("mmpadmin").controller("cardListCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i){var l=e.pageData={article_id:t.articleID,article_name:"",article_img_url:"",article_context:"",article_tags:"",article_status:0,article_sort:"",article_pv:"",article_share_total_count:""};a.getArticleInfo({article_id:t.articleID},function(t){console.log(t),e.articleInfo=t,l.article_name=t.article_name,l.article_img_url=[t.article_img_url],l.article_tags=t.article_tags,l.article_summary=t.article_summary,l.article_sort=t.article_sort,l.article_pv=t.article_pv,l.article_share_total_count=t.article_share_total_count,$(".summernote").summernote({lang:"zh-CN",callbacks:{onInit:function(){console.log(e.pageData),l.article_context=e.articleInfo.article_context},onChange:function(){var e=$(".summernote").summernote("code");l.article_context=e},onImageUpload:function(e){console.log(["image upload:",e]),console.log(["files[0]:",e[0]]);var t=new XMLHttpRequest;t.open("POST",i.mainsiteurl+"/serv/api/common/file.ashx?action=add",!0);var a=new FormData;for(var o in e)a.append("file",e[o]);t.send(a),t.onreadystatechange=function(e){if(4==t.readyState&&200==t.status){console.log(["responseText",JSON.parse(t.responseText)]);for(var a=JSON.parse(t.responseText),o="",s=0;s<a.file_url_list.length;s++){o="<img src="+a.file_url_list[s]+">";var i=$(o);$(".summernote").summernote("insertNode",i[0])}}}}}}),$(".summernote").summernote("code",e.articleInfo.article_context),e.activeStatus=[{article_name:"显示",article_ishide:0},{article_name:"隐藏",article_ishide:1}];for(var s in e.activeStatus)e.activeStatus[s].article_ishide==e.articleInfo.article_ishide&&(e.oneStatu=e.activeStatus[s]);e.whichStatu=function(e){console.log(e),l.article_status=e.article_status},a.getArticleAssort({pageindex:1,pagesize:1e3,keyword:""},function(t){var a={category_id:0,category_name:"选择文章分类"};t.list.unshift(a),e.categorys=t.list,e.oneNav=e.categorys[0];for(var o in e.categorys)e.categorys[o].category_id==t.category_id&&(e.oneNav=e.categorys[o])}),e.whichcategory=function(e){console.log(e),l.category_id=e.category_id},e.addActivetyBtn=function(){if(""==l.article_name)return void o("友情提示","请输入文章名称");if(""==l.article_img_url||l.article_img_url==[])return void o("友情提示","请上传文章图片");if(""==l.article_tags)return void o("友情提示","请输入文章标签");""==l.article_sort&&(l.article_sort=0),""==l.article_pv&&(l.article_pv=0),""==l.article_share_total_count&&(l.article_share_total_count=0);$(".summernote").summernote("isEmpty");return""==l.article_context?void o("友情提示","请输入文章详情"):(l.article_img_url=l.article_img_url[0],console.log(angular.toJson(l)),void a.editArticleInfo({data:angular.toJson(l)},function(e){console.log(e),0==e.errcode&&(history.go(-1),o("友情提示","修改文章成功"))}))}})}e.$inject=["$scope","$stateParams","mmpadminAPI","alertbox","$state","$rootScope"],angular.module("mmpadmin").controller("editArticleCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i,l){var r=this;r.ADMIN_CONFIG=i,a.getArticleList({pageindex:1,pagesize:1,keyword:"",article_tags:"",category_id:""},function(i){function r(){console.log(e.currentPage),e.selectedall=!1,e.ids="",a.getArticleList({pageindex:e.currentPage,pagesize:e.pagesize,keyword:e.keyword,article_tags:e.article_tags,category_id:e.category_id},function(t){console.log(t),e.navListData=t.returnObj.list},function(e){console.log(e)})}function n(){l("友情提示","您确定删除众筹商品吗？","确定删除","取消删除",function(){e.ids=e.ids.toString(),","==e.ids.substring(e.ids.length-1,e.ids.length)&&(e.ids=e.ids.substring(e.ids,e.ids.length-1)),a.deleteArticle({article_ids:e.ids},function(t){if(console.log(t),0==t.errcode){e.ids="";var a="友情提示",s="删除成功";o(a,s),r(),e.selectedall=!1}else o(t.errcode,t.errmsg)},function(e){console.log(e)})},function(){})}console.log(i),e.totals=i.returnObj.totalcount,e.currentPage=""==t.pageID||void 0==t.pageID?1:parseInt(t.pageID),e.category_id=""===t.typeID||void 0===t.typeID?"":t.typeID,e.keyword=""===t.kewID||void 0===t.kewID?"":t.kewID,e.article_tags=""===t.descID||void 0===t.descID?"":t.descID,e.showLevel=!0,e.moreSetLevelBtn=function(t){if(""==e.ids){var s="友情提示",i="请至少选择一个要设置的活动";return void o(s,i)}e.ids=e.ids.substring(e.ids,e.ids.length-1),$("#giveDealModal").modal("show"),"level"==t?e.showLevel=!0:(e.showLevel=!1,e.setNav=e.categorys[0],e.setCate=function(t){e.set_cate_id=""!=t.category_id?t.category_id:""}),e.setLevelBtn=function(){if("level"==t){if(e.levelNum=parseInt(e.levelNum),isNaN(e.levelNum))return void o("友情提示","请输入正确的等级");a.setArticleLevel({activity_ids:e.ids,access_level:e.levelNum},function(e){console.log(e),0==e.errcode?(o("友情提示","设置访问等级成功"),$("#giveDealModal").modal("hide"),r()):o(e.errcode,e.errmsg)})}else a.setArticleCateID({activity_ids:e.ids,category_id:e.set_cate_id},function(e){console.log(e),0==e.errcode?(o("友情提示","设置文章分类成功"),$("#giveDealModal").modal("hide"),r()):o(e.errcode,e.errmsg)})}},a.getArticleAssort({pageindex:1,pagesize:1e3,keyword:""},function(a){var o={category_id:"",category_name:"全部文章"};a.list.unshift(o),e.categorys=a.list,e.setNav=e.categorys[0];for(var s in e.categorys)t.typeID==e.categorys[s].category_id&&(e.oneNav=e.categorys[s])}),e.whichcategory=function(t){console.log(t),e.category_id=""!=t.category_id?t.category_id:"",e.currentPage=1,e.navListData=[],s.go("index.articleList",{pageID:e.currentPage,kewID:e.keyword,typeID:e.category_id,descID:e.article_tags})},e.pagesize=10,e.navListData=[],r(),e.ctrlsearch=function(t){console.log(["点击回车",t]),console.log(e.keyword);var a=window.event?t.keyCode:t.which;13===a&&(e.currentPage=1,e.navListData=[],s.go("index.articleList",{pageID:e.currentPage,kewID:e.keyword,typeID:e.category_id,descID:e.article_tags}))},e.delNavBtn=function(t){e.ids=t.article_id,n()},e.delallNavBtn=function(){if(""!=e.ids)console.log(["$scope.ids",e.ids]),n();else{var t="友情提示",a="请至少选择一个文章分类";o(t,a)}},e.selectedall=!1,e.ids="",e.checkedall=function(){e.selectedall=!e.selectedall,e.ids="",angular.forEach(e.navListData,function(t){t.selected=e.selectedall,e.selectedall?(e.ids+=t.article_id+",",console.log(["$scope.ids",e.ids])):(e.ids="",console.log(["$scope.ids",e.ids]))})},e.selectme=function(t){t.selected=!t.selected,console.log(t.selected);var a=!0;e.navListData.filter(function(e){e.selected||(a=!1)}),e.selectedall=a,t.selected?(e.ids+=t.article_id+",",console.log(e.ids)):(e.ids=e.ids.replace(t.article_id+",",""),console.log(e.ids))}},function(e){}),e.pageChanged=function(){console.log(e.currentPage),s.go("index.articleList",{pageID:e.currentPage})}}e.$inject=["$scope","$stateParams","mmpadminAPI","alertbox","$state","ADMIN_CONFIG","alertconformbox"],angular.module("mmpadmin").controller("articleListCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i){a.getArticleAssort({pageindex:1,pagesize:1e4,keyword:""},function(l){function r(){a.getArticleAssort({pageindex:e.currentPage,pagesize:e.pagesize,keyword:e.keyword},function(t){console.log(t),e.navListData=t.list,e.totals=t.totalcount},function(e){console.log(e)})}function n(){i("友情提示","您确定删除众筹商品吗？","确定删除","取消删除",function(){e.ids=e.ids.toString(),","==e.ids.substring(e.ids.length-1,e.ids.length)&&(e.ids=e.ids.substring(e.ids,e.ids.length-1)),a.delArticleAssort({category_ids:e.ids},function(t){if(console.log(t),0==t.errcode){e.ids="";var a="友情提示",s="删除成功";o(a,s),r(),e.selectedall=!1}else o(t.errcode,t.errmsg)},function(e){console.log(e)})},function(){})}e.totals=l.totalcount;var d={category_name:"父级分类",category_id:0};l.list.unshift(d),e.addNavLists=l.list,e.addOneNav=e.addNavLists[0],e.currentPage=""==t.pageID||void 0==t.pageID?1:parseInt(t.pageID),e.keyword=""===t.typeID||void 0===t.typeID?"":t.typeID,e.pagesize=10,e.navListData=[],r(),e.ctrlsearch=function(t){console.log(["点击回车",t]),console.log(e.keyword);var a=window.event?t.keyCode:t.which;13===a&&(e.currentPage=1,e.navListData=[],s.go("index.articleAssort",{pageID:e.currentPage,typeID:e.keyword}))},e.delNavBtn=function(t){e.ids=t.category_id,n()},e.delallNavBtn=function(){if(""!=e.ids)console.log(["$scope.ids",e.ids]),n();else{var t="友情提示",a="请至少选择一个文章分类";o(t,a)}},e.selectedall=!1,e.ids="",e.checkedall=function(){e.selectedall=!e.selectedall,e.ids="",angular.forEach(e.navListData,function(t){t.selected=e.selectedall,e.selectedall?(e.ids+=t.category_id+",",console.log(["$scope.ids",e.ids])):(e.ids="",console.log(["$scope.ids",e.ids]))})},e.selectme=function(t){t.selected=!t.selected,console.log(t.selected);var a=!0;e.navListData.filter(function(e){e.selected||(a=!1)}),e.selectedall=a,t.selected?(e.ids+=t.category_id+",",console.log(e.ids)):(e.ids=e.ids.replace(t.category_id+",",""),console.log(e.ids))},e.changeCategory=function(e){console.log(e),c.category_parent_id=e.category_id};var c=e.pageData={category_name:"",category_summary:"",category_sort:"",category_systype:0,category_img_url:"",category_parent_id:0};e.addcardcouponBtn=function(){e.addOneNav=e.addNavLists[0],c.category_parent_id=e.addNavLists[0].category_id,e.isAddcard=!0,e.showPicDom=!0,$("#dealModal").modal({backdrop:"static",keyboard:!1}),c.category_name="",c.category_summary="",c.category_sort="",c.category_img_url=[],document.onclick=function(t){console.log(t.srcElement.className);var a=t.srcElement?t.srcElement:t.target;a.className.match("modal")&&a.className.match("inmodal")&&e.$apply(function(){c.category_img_url="",e.showPicDom=!1})}},e.editcardcouponBtn=function(t){for(var a in e.addNavLists)t.category_parent_id==e.addNavLists[a].category_id&&(e.addOneNav=e.addNavLists[a]);console.log(t),e.isAddcard=!1,c.category_img_url=[t.category_img_url],c.category_img_url&&(e.showPicDom=!0),$("#dealModal").modal({backdrop:"static",keyboard:!1}),console.log(c.category_img_url),c.category_name=t.category_name,c.category_summary=t.category_summary,c.category_sort=t.category_sort,c.category_id=t.category_id,document.onclick=function(t){console.log(t.srcElement.className);var a=t.srcElement?t.srcElement:t.target;a.className.match("modal")&&a.className.match("inmodal")&&e.$apply(function(){c.category_img_url="",e.showPicDom=!1})}},e.addCouponBtn=function(){return""==c.category_name?void o("友情提示","请输入文章分类的名称"):(c.category_img_url&&(c.category_img_url=c.category_img_url[0]),""==c.category_sort&&(c.category_sort=0),console.log(angular.toJson(c)),void(1==e.isAddcard?a.addArticleAssort({data:angular.toJson(c)},function(t){0==t.errcode&&(e.showPicDom=!1,o("友情提示","添加文章分类成功"),$("#dealModal").modal("hide"),r())}):a.editArticleAssort({data:angular.toJson(c)},function(t){0==t.errcode&&(e.showPicDom=!1,o("友情提示","修改文章分类成功"),$("#dealModal").modal("hide"),r())},function(e){})))}}),e.pageChanged=function(){console.log(e.currentPage),s.go("index.articleAssort",{pageID:e.currentPage})},e.clear=function(){$("#dealModal").modal("hide"),pageData.category_name="",pageData.category_summary="",pageData.category_sort="",pageData.category_systype=0,pageData.category_img_url="",pageData.category_parent_id=0}}e.$inject=["$scope","$stateParams","mmpadminAPI","alertbox","$state","alertconformbox"],angular.module("mmpadmin").controller("articleAssortCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i){var l=e.pageData={article_name:"",article_img_url:"",article_context:"",article_summary:"",article_tags:"",article_ishide:0,article_sort:"",article_pv:"",article_share_total_count:""};e.activeStatus=[{article_name:"显示",article_ishide:0},{article_name:"隐藏",article_ishide:1}],e.oneStatu=e.activeStatus[0],l.article_ishide=e.activeStatus[0].article_ishide,a.getArticleAssort({pageindex:1,pagesize:1e3,keyword:""},function(t){var a={category_id:0,category_name:"选择文章分类"};t.list.unshift(a),e.categorys=t.list,e.oneNav=e.categorys[0],l.category_id=e.categorys[0].category_id}),e.whichcategory=function(e){console.log(e),l.category_id=e.category_id},e.whichStatu=function(e){console.log(e),l.article_status=e.article_status},$(".summernote").summernote({lang:"zh-CN",callbacks:{onInit:function(){var e=$(".summernote").summernote("code");l.article_context=e},onChange:function(){var e=$(".summernote").summernote("code");l.article_context=e},onImageUpload:function(e){console.log(["image upload:",e]),console.log(["files[0]:",e[0]]);var t=new XMLHttpRequest;t.open("POST",i.mainsiteurl+"/serv/api/common/file.ashx?action=add",!0);var a=new FormData;for(var o in e)a.append("file",e[o]);t.send(a),t.onreadystatechange=function(e){if(4==t.readyState&&200==t.status){console.log(["responseText",JSON.parse(t.responseText)]);for(var a=JSON.parse(t.responseText),o="",s=0;s<a.file_url_list.length;s++){o="<img src="+a.file_url_list[s]+">";var i=$(o);$(".summernote").summernote("insertNode",i[0])}}}}}}),e.addActivetyBtn=function(){if(""==l.article_name)return void o("友情提示","请输入文章名称");if(""==l.article_img_url||l.article_img_url==[])return void o("友情提示","请上传文章图片");if(""==l.article_tags)return void o("友情提示","请输入文章标签");""==l.article_sort&&(l.article_sort=0),""==l.article_pv&&(l.article_pv=0),""==l.article_share_total_count&&(l.article_share_total_count=0);$(".summernote").summernote("isEmpty");return""==l.article_context?void o("友情提示","请输入文章详情"):(l.article_img_url=l.article_img_url[0],console.log(angular.toJson(l)),void a.addedArticle({data:angular.toJson(l)},function(e){console.log(e),0==e.errcode&&(s.go("index.articleList"),o("友情提示","添加文章成功"))}))}}e.$inject=["$scope","$stateParams","mmpadminAPI","alertbox","$state","$rootScope"],angular.module("mmpadmin").controller("addArticleCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i){function l(){var t="";1==n.is_pc&&(t="1"),a.getAllAdsList({is_pc:t},function(t){console.log(t),e.navListData=t.list})}function r(o){var s="您确定删除该幻灯片吗";2==o&&(s="您确定删除该类幻灯片吗"),i("友情提示",s,"确定删除","取消删除",function(){e.ids=e.ids.toString(),","==e.ids.substring(e.ids.length-1,e.ids.length)&&(e.ids=e.ids.substring(e.ids,e.ids.length-1)),a.delAd({slide_ids:e.ids},function(a){console.log(a),0==a.errcode?(e.ids="",t("友情提示","删除幻灯片成功"),l()):t(a.errcode,a.errmsg)})},function(){})}var n=e.pageData={is_pc:o.ispc,isShowAdd:!0},d=window.location.href;d.match("meifan.comeoncloud.net")&&(n.isShowAdd=!1),l(),e.delNavBtn=function(t){e.ids="",console.log(t),angular.forEach(t.datalist,function(t){console.log(t),e.ids+=t.slide_id+","}),console.log(e.ids),r(2)},e.delMeBtn=function(t){console.log(t),e.ids=t.slide_id,r(1)},e.isPcCheck=function(){var t="";n.is_pc&&(t="1"),a.getAllAdsList({is_pc:t},function(t){e.navListData=t.list})}}e.$inject=["$scope","alertbox","mmpadminAPI","$stateParams","$state","alertconformbox"],angular.module("mmpadmin").controller("newAdListCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s){var i=e.pageFunc={},l=e.pageData={raiseJson:{slide_type:o.typeID,is_pc:1==o.ispc?1:0,datalist:[{img_url:"",link:"",link_text:"",slide_sort:0}]},itemList:[],item:{img_url:"",link:"",link_text:"",slide_sort:"",slide_id:""},editItem:{img_url:"",link:"",link_text:"",slide_sort:"",slide_id:""},show_img_url:"",show_img_datalist:[],is_pc:1==o.ispc?1:0};a.getAdDetail({slide_type:o.typeID},function(e){l.itemList=e.datalist,l.is_pc=e.is_pc,window.sessionStorage.setItem("sessionAds",JSON.stringify(l.itemList))}),i.delmeslef=function(e,t){l.itemList.splice(e,1),window.sessionStorage.setItem("sessionAds",JSON.stringify(l.itemList))},i.editPro=function(t,a){e.showeditBtn=!0,e.showaddBtn=!1,e.sessionAds=JSON.parse(window.sessionStorage.getItem("sessionAds")),e.editIndex=t,l.editItem=a,l.show_img_url=[a.img_url],e.showPicDom=!0,$("#dealModal").modal({backdrop:"static",keyboard:!1}),document.onclick=function(t){var a=t.srcElement?t.srcElement:t.target;a.className.match("modal")&&a.className.match("inmodal")&&(e.$apply(function(){l.show_img_url="",e.showPicDom=!1}),l.itemList[e.editIndex]=e.sessionAds[e.editIndex])}},i.editbtnFunc=function(){return""==l.editItem.link_text?void t("友情提示","请输入幻灯片标题"):""==l.show_img_url||l.show_img_url==[]?void t("友情提示","请上传幻灯片图片"):((""==l.editItem.slide_sort||void 0==l.editItem.slide_sort)&&(l.editItem.slide_sort=0),l.editItem.img_url=l.show_img_url[0],l.show_img_datalist.length>0&&(l.editItem.width=l.show_img_datalist[0].width,l.editItem.height=l.show_img_datalist[0].height),l.itemList[e.editIndex]=l.editItem,window.sessionStorage.setItem("sessionAds",JSON.stringify(l.itemList)),l.show_img_url="",l.show_img_datalist=[],e.showPicDom=!1,$("#dealModal").modal("hide"),void console.log(l.itemList))},i.addRaise=function(){l.raiseJson.datalist=l.itemList,l.raiseJson.is_pc=l.is_pc,console.log(l.raiseJson),a.editAdDetail({data:angular.toJson(l.raiseJson)},function(e){console.log(e),0==e.errcode?(window.sessionStorage.removeItem("sessionAds"),t("友情提示","修改幻灯片成功"),history.go(-1)):t("友情提示",e.errmsg)},function(e){t("友情提示",e.errmsg)})},i.showAddRaisePro=function(){e.showPicDom=!0,e.showeditBtn=!1,e.showaddBtn=!0,e.sessionAds=JSON.parse(window.sessionStorage.getItem("sessionAds")),l.editItem={slide_id:0,img_url:"",link:"",link_text:"",slide_sort:0,width:0,height:0},l.show_img_url="",l.show_img_datalist=[],$("#dealModal").modal({backdrop:"static",keyboard:!1})},i.addbtnFunc=function(){return""==l.editItem.link_text?void t("友情提示","请输入幻灯片标题"):"undefined"==typeof l.show_img_datalist?void t("友情提示","请上传幻灯片图片"):""==l.show_img_datalist[0].url||l.show_img_datalist==[]?void t("友情提示","请上传幻灯片图片"):(l.editItem.img_url=l.show_img_datalist[0].url,l.editItem.width=l.show_img_datalist[0].width,l.editItem.height=l.show_img_datalist[0].height,l.itemList[e.sessionAds.length]=l.editItem,window.sessionStorage.setItem("sessionAds",JSON.stringify(l.itemList)),l.show_img_url="",l.show_img_datalist=[],e.showPicDom=!1,$("#dealModal").modal("hide"),void console.log(l.itemList))},i.clear=function(){$("#dealModal").modal("hide")}}e.$inject=["$scope","alertbox","mmpadminAPI","$stateParams","$state"],angular.module("mmpadmin").controller("editAdCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s){var i=e.pageFunc={},l=e.pageData={raiseJson:{list:[{slide_type:"",is_pc:1==o.ispc?1:0,datalist:[{img_url:"",link:"",link_text:"",link_sort:0,width:0,height:0}]}]},itemList:[],item:{slide_type:"",is_pc:1==o.ispc?1:0,datalist:[{img_url:"",link:"",link_text:"",link_sort:0,width:0,height:0}]},is_pc:1==o.ispc?1:0};i.delmeslef=function(e,t){l.itemList.splice(e,1)},i.editPro=function(t,a){e.sessionAds=JSON.parse(window.sessionStorage.getItem("sessionAds")),e.editIndex=t,l.item=a,l.item.datalist[0].img_url=[a.datalist[0].img_url],e.showPicDom=!0,l.isEditPro=!0,$("#dealModal").modal({backdrop:"static",keyboard:!1}),document.onclick=function(t){var a=t.srcElement?t.srcElement:t.target;a.className.match("modal")&&a.className.match("inmodal")&&(e.$apply(function(){l.item.datalist[0].img_url=l.item.datalist[0].img_url[0],e.showPicDom=!1}),l.itemList[e.editIndex]=e.sessionAds[e.editIndex])}},i.showAddRaisePro=function(){e.showPicDom=!0,l.isEditPro=!1,l.item={slide_type:"",is_pc:l.is_pc,datalist:[{img_url:"",link:"",link_text:"",link_sort:0,width:0,height:0}]},$("#dealModal").modal({backdrop:"static",keyboard:!1})},i.addPro=function(){return""==l.item.datalist[0].link_text?void t("友情提示","请输入幻灯片标题"):""==l.item.slide_type?void t("友情提示","请输入幻灯片类型(自定义)"):""==l.item.datalist[0].data[0].url||l.item.datalist[0].data==[]?void t("友情提示","请上传幻灯片图片"):(l.item.datalist[0].img_url=l.item.datalist[0].data[0].url,l.item.datalist[0].width=l.item.datalist[0].data[0].width,l.item.datalist[0].height=l.item.datalist[0].data[0].height,console.log(l.item),l.isEditPro?l.itemList[e.editIndex]=l.item:l.itemList=l.itemList.concat(l.item),window.sessionStorage.setItem("sessionAds",JSON.stringify(l.itemList)),e.showPicDom=!1,void $("#dealModal").modal("hide"))},i.addRaise=function(){l.raiseJson.list=l.itemList,a.addAdBatch({data:angular.toJson(l.raiseJson)},function(e){console.log(e),0==e.errcode?(window.sessionStorage.removeItem("sessionAds"),t("友情提示","添加幻灯片成功"),history.go(-1)):t("友情提示",e.errmsg)},function(e){t("友情提示",e.errmsg)})},i.clear=function(){$("#dealModal").modal("hide"),l.isEditPro?l.item.datalist[0].img_url=l.item.datalist[0].img_url[0]:(l.item.datalist[0].img_url="",l.item.datalist[0].link="",
l.item.datalist[0].link_text="",l.item.datalist[0].width=0,l.item.datalist[0].height=0,l.item.slide_type="")}}e.$inject=["$scope","alertbox","mmpadminAPI","$stateParams","$state"],angular.module("mmpadmin").controller("addAdCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i,l){function r(){a.getFieldList({activity_id:t.activeID},function(t){console.log(t),e.fieldListData=t.returnObj.list})}function n(){a.deleteField({activity_id:t.activeID,field_index:e.ids},function(e){if(console.log(e),0==e.errcode){var t="友情提示",a="删除字段成功";o(t,a),r()}else o(e.errcode,e.errmsg)},function(e){console.log(e)})}e.fieldListData=[],r(),e.addcardcouponBtn=function(){var a=e.pageData={activity_id:t.activeID,field_name:"",field_null:0};e.isAddcard=!0,$("#dealModal").modal({backdrop:"static",keyboard:!1}),document.onclick=function(e){console.log(e.srcElement.className);var t=e.srcElement?e.srcElement:e.target;t.className.match("modal")&&t.className.match("inmodal")&&(a.field_name="")}},e.editcardcouponBtn=function(a){e.pageData={activity_id:t.activeID,field_name:a.field_name,field_null:a.field_null,field_index:a.field_index.slice(1)};console.log(a),e.isAddcard=!1,$("#dealModal").modal({backdrop:"static",keyboard:!1}),document.onclick=function(e){console.log(e.srcElement.className);var t=e.srcElement?e.srcElement:e.target;t.className.match("modal")&&t.className.match("inmodal")}},e.addCouponBtn=function(){return""==e.pageData.field_name?void o("友情提示","请输入字段名称"):(console.log(angular.toJson(e.pageData)),void(1==e.isAddcard?a.addField({data:angular.toJson(e.pageData)},function(e){0==e.errcode?(o("友情提示","添加字段成功"),$("#dealModal").modal("hide"),r()):o(e.errcode,e.errmsg)}):a.editField({data:angular.toJson(e.pageData)},function(e){console.log(e),0==e.errcode?(o("友情提示","修改字段成功"),$("#dealModal").modal("hide"),r()):o(e.errcode,e.errmsg)},function(e){})))},e.clear=function(){$("#dealModal").modal("hide"),pageData.field_name="",pageData.field_null=0},e.delNavBtn=function(t){e.ids=t.field_index.slice(1),n()}}e.$inject=["$scope","$stateParams","mmpadminAPI","alertbox","$state","$rootScope","$filter"],angular.module("mmpadmin").controller("fieldListCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i,l){var r=e.pageData={activity_name:"",activity_address:"",activity_start_time:"",activity_stop_time:"",activity_img_url:"",activity_content:""};console.log(t.activeID),a.getActivityInfo({activity_id:t.activeID},function(t){console.log(t),e.activeInfo=t,r.activity_id=t.activity_id,r.activity_name=t.activity_name,r.activity_address=t.activity_address,r.activity_img_url=[t.activity_img_url],r.activity_start_time=l("date")(t.activity_start_time,"yyyy-MM-dd HH:mm"),r.activity_stop_time=l("date")(t.activity_stop_time,"yyyy-MM-dd HH:mm"),e.activeStatus=[{activity_name:"进行中",activity_status:0},{activity_name:"已结束",activity_status:1},{activity_name:"已满员",activity_status:2}];for(var s in e.activeStatus)t.activity_status==e.activeStatus[s].activity_status&&(e.oneStatu=e.activeStatus[s],r.activity_status=e.activeStatus[s].activity_status);a.getActivityAssort({pageindex:1,pagesize:1e3,keyword:""},function(t){var a={category_id:0,category_name:"请选择活动分类"};t.list.unshift(a),e.categorys=t.list,e.oneNav=e.categorys[0],r.category_id=e.categorys[0].category_id;for(var o in e.categorys)e.activeInfo.category_name==e.categorys[o].category_name&&(e.oneNav=e.categorys[o],r.category_id=e.categorys[o].category_id)}),r.activity_score=t.activity_score,r.activity_max_signup_count=t.activity_max_signup_count,r.activity_summary=t.activity_summary,e.whichcategory=function(e){r.category_id=e.category_id},e.whichStatu=function(e){r.activity_status=e.activity_status},$(".summernote").summernote({lang:"zh-CN",callbacks:{onInit:function(){console.log(e.pageData),r.activity_content=e.activeInfo.activity_content},onChange:function(){var e=$(".summernote").summernote("code");r.activity_content=e},onImageUpload:function(e){console.log(["image upload:",e]),console.log(["files[0]:",e[0]]);var t=new XMLHttpRequest;t.open("POST",i.mainsiteurl+"/serv/api/common/file.ashx?action=add",!0);var a=new FormData;for(var o in e)a.append("file",e[o]);t.send(a),t.onreadystatechange=function(e){if(4==t.readyState&&200==t.status){console.log(["responseText",JSON.parse(t.responseText)]);for(var a=JSON.parse(t.responseText),o="",s=0;s<a.file_url_list.length;s++){o="<img src="+a.file_url_list[s]+">";var i=$(o);$(".summernote").summernote("insertNode",i[0])}}}}}}),$(".summernote").summernote("code",e.activeInfo.activity_content),e.editActivetyBtn=function(){if(""==r.activity_name)return void o("友情提示","请输入活动名称");if(""==r.activity_address)return void o("友情提示","请输入活动地址");if(""==r.activity_img_url||r.activity_img_url==[])return void o("友情提示","请上传活动图片");if(""==r.activity_start_time)return void o("友情提示","请输入活动开始时间");if(""==r.activity_stop_time)return void o("友情提示","请输入活动结束时间");$(".summernote").summernote("isEmpty");return""==r.activity_content?void o("友情提示","请输入活动详情"):(r.activity_img_url=r.activity_img_url[0],r.activity_start_time=new Date(r.activity_start_time).getTime(),r.activity_stop_time=new Date(r.activity_stop_time).getTime(),console.log(angular.toJson(r)),void a.editedActivity({data:angular.toJson(r)},function(e){console.log(e),0==e.errcode&&(history.go(-1),o("友情提示","修改活动成功"))}))}})}e.$inject=["$scope","$stateParams","mmpadminAPI","alertbox","$state","$rootScope","$filter"],angular.module("mmpadmin").controller("editActivetyCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i){var l=e.pageData={activity_name:"",activity_address:"",activity_start_time:"",activity_stop_time:"",activity_img_url:"",activity_content:""};e.activeStatus=[{activity_name:"进行中",activity_status:0},{activity_name:"已结束",activity_status:1},{activity_name:"已满员",activity_status:2}],e.oneStatu=e.activeStatus[0],l.activity_status=e.activeStatus[0].activity_status,a.getActivityAssort({pageindex:1,pagesize:1e3,keyword:""},function(t){var a={category_id:0,category_name:"请选择活动分类"};t.list.unshift(a),e.categorys=t.list,e.oneNav=e.categorys[0],l.category_id=e.categorys[0].category_id}),e.whichcategory=function(e){l.category_id=e.category_id},e.whichStatu=function(e){l.activity_status=e.activity_status},$(".summernote").summernote({lang:"zh-CN",callbacks:{onInit:function(){var e=$(".summernote").summernote("code");l.activity_content=e},onChange:function(){var e=$(".summernote").summernote("code");l.activity_content=e},onImageUpload:function(e){console.log(["image upload:",e]),console.log(["files[0]:",e[0]]);var t=new XMLHttpRequest;t.open("POST",i.mainsiteurl+"/serv/api/common/file.ashx?action=add",!0);var a=new FormData;for(var o in e)a.append("file",e[o]);t.send(a),t.onreadystatechange=function(e){if(4==t.readyState&&200==t.status){console.log(["responseText",JSON.parse(t.responseText)]);for(var a=JSON.parse(t.responseText),o="",s=0;s<a.file_url_list.length;s++){o="<img src="+a.file_url_list[s]+">";var i=$(o);$(".summernote").summernote("insertNode",i[0])}}}}}}),e.addActivetyBtn=function(){if(""==l.activity_name)return void o("友情提示","请输入活动名称");if(""==l.activity_address)return void o("友情提示","请输入活动地址");if(""==l.activity_img_url||l.activity_img_url==[])return void o("友情提示","请上传活动图片");if(""==l.activity_start_time)return void o("友情提示","请输入活动开始时间");if(""==l.activity_stop_time)return void o("友情提示","请输入活动结束时间");$(".summernote").summernote("isEmpty");return""==l.activity_content?void o("友情提示","请输入活动详情"):(l.activity_img_url=l.activity_img_url[0],console.log(l.activity_start_time),l.activity_start_time=new Date(l.activity_start_time).getTime(),l.activity_stop_time=new Date(l.activity_stop_time).getTime(),console.log(angular.toJson(l)),void a.addedActivity({data:angular.toJson(l)},function(e){console.log(e),0==e.errcode&&(s.go("index.activityList"),o("友情提示","添加活动成功"))}))}}e.$inject=["$scope","$stateParams","mmpadminAPI","alertbox","$state","$rootScope"],angular.module("mmpadmin").controller("addActivetyCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i){a.getActivityList({pageindex:1,pagesize:1,keyword:"",activity_sort:"",category_id:""},function(l){function r(){e.selectedall=!1,e.ids="",a.getActivityList({pageindex:e.currentPage,pagesize:e.pagesize,keyword:e.keyword,activity_sort:e.activity_sort,category_id:e.category_id},function(t){console.log(t),e.navListData=t.list,e.totals=t.totalcount},function(e){console.log(e)})}function n(){i("友情提示","您确定删除众筹商品吗？","确定删除","取消删除",function(){e.ids=e.ids.toString(),","==e.ids.substring(e.ids.length-1,e.ids.length)&&(e.ids=e.ids.substring(e.ids,e.ids.length-1)),a.deleteActivity({activity_ids:e.ids},function(t){if(console.log(t),0==t.errcode){e.ids="";var a="友情提示",s="删除成功";o(a,s),r(),e.selectedall=!1}else o(t.errcode,t.errmsg)},function(e){console.log(e)})},function(){})}console.log(l),e.totals=l.totalcount,e.currentPage=""==t.pageID||void 0==t.pageID?1:parseInt(t.pageID),e.category_id=""===t.typeID||void 0===t.typeID?"":t.typeID,e.keyword=""===t.kewID||void 0===t.kewID?"":t.kewID,e.activity_sort=""===t.descID||void 0===t.descID?"":t.descID,e.showLevel=!0,e.moreSetLevelBtn=function(t){if(""==e.ids){var s="友情提示",i="请至少选择一个要设置的活动";return void o(s,i)}e.ids=e.ids.substring(e.ids,e.ids.length-1),$("#giveDealModal").modal("show"),"level"==t?e.showLevel=!0:(e.showLevel=!1,e.setNav=e.categorys[0],e.setCate=function(t){e.set_cate_id=""!=t.category_id?t.category_id:""}),e.setLevelBtn=function(){if("level"==t){if(e.levelNum=parseInt(e.levelNum),isNaN(e.levelNum))return void o("友情提示","请输入正确的等级");a.setActivtyLevel({activity_ids:e.ids,access_level:e.levelNum},function(e){console.log(e),0==e.errcode?(o("友情提示","设置访问等级成功"),$("#giveDealModal").modal("hide"),r()):o(e.errcode,e.errmsg)})}else a.setActivtyCateID({activity_ids:e.ids,category_id:e.set_cate_id},function(e){console.log(e),0==e.errcode?(o("友情提示","设置活动分类成功"),$("#giveDealModal").modal("hide"),r()):o(e.errcode,e.errmsg)})}},a.getActivityAssort({pageindex:1,pagesize:1e3,keyword:""},function(a){var o={category_id:"",category_name:"全部"};a.list.unshift(o),e.categorys=a.list,e.setNav=e.categorys[0];for(var s in e.categorys)t.typeID==e.categorys[s].category_id&&(e.oneNav=e.categorys[s])}),e.whichcategory=function(t){console.log(t),e.category_id=""!=t.category_id?t.category_id:"",e.currentPage=1,e.navListData=[],s.go("index.activityList",{pageID:e.currentPage,kewID:e.keyword,typeID:e.category_id,descID:e.activity_sort})},e.descAsTimeBtn=function(){"activity_start_time"!=e.activity_sort&&(e.activity_sort="activity_start_time",e.currentPage=1,e.navListData=[],s.go("index.activityList",{pageID:e.currentPage,kewID:e.keyword,typeID:e.category_id,descID:e.activity_sort}))},e.descAsAddNumBtn=function(){"activity_signcount"!=e.activity_sort&&(e.activity_sort="activity_signcount",e.currentPage=1,e.navListData=[],s.go("index.activityList",{pageID:e.currentPage,kewID:e.keyword,typeID:e.category_id,descID:e.activity_sort}))},e.pagesize=10,e.navListData=[],r(),e.ctrlsearch=function(t){console.log(["点击回车",t]),console.log(e.keyword);var a=window.event?t.keyCode:t.which;13===a&&(e.currentPage=1,e.navListData=[],s.go("index.activityList",{pageID:e.currentPage,kewID:e.keyword,typeID:e.category_id,descID:e.activity_sort}))},e.delNavBtn=function(t){e.ids=t.activity_id,n()},e.delallNavBtn=function(){if(""!=e.ids)console.log(["$scope.ids",e.ids]),n();else{var t="友情提示",a="请至少选择一个活动";o(t,a)}},e.selectedall=!1,e.ids="",e.checkedall=function(){e.selectedall=!e.selectedall,e.ids="",angular.forEach(e.navListData,function(t){t.selected=e.selectedall,e.selectedall?(e.ids+=t.activity_id+",",console.log(["$scope.ids",e.ids])):(e.ids="",console.log(["$scope.ids",e.ids]))})},e.selectme=function(t){t.selected=!t.selected,console.log(t.selected);var a=!0;e.navListData.filter(function(e){e.selected||(a=!1)}),e.selectedall=a,t.selected?(e.ids+=t.activity_id+",",console.log(e.ids)):(e.ids=e.ids.replace(t.activity_id+",",""),console.log(e.ids))}},function(e){}),e.pageChanged=function(){console.log(e.currentPage),s.go("index.activityList",{pageID:e.currentPage})}}e.$inject=["$scope","$stateParams","mmpadminAPI","alertbox","$state","alertconformbox"],angular.module("mmpadmin").controller("activityListCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i){a.getActivityAssort({pageindex:1,pagesize:1,keyword:""},function(l){function r(){a.getActivityAssort({pageindex:e.currentPage,pagesize:e.pagesize,keyword:e.keyword},function(t){console.log(t),e.navListData=t.list,e.totals=t.totalcount},function(e){console.log(e)})}function n(){i("友情提示","您确定删除活动分类吗？","确定删除","取消删除",function(){e.ids=e.ids.toString(),","==e.ids.substring(e.ids.length-1,e.ids.length)&&(e.ids=e.ids.substring(e.ids,e.ids.length-1)),a.delActivityAssort({category_ids:e.ids},function(t){if(console.log(t),0==t.errcode){var a="友情提示",s="删除成功";o(a,s),r(),e.selectedall=!1}else o(t.errcode,t.errmsg)},function(e){console.log(e)})},function(){})}e.totals=l.totalcount,e.currentPage=""==t.pageID||void 0==t.pageID?1:parseInt(t.pageID),e.keyword=""===t.typeID||void 0===t.typeID?"":t.typeID,e.pagesize=10,e.navListData=[],r(),e.ctrlsearch=function(t){console.log(["点击回车",t]),console.log(e.keyword);var a=window.event?t.keyCode:t.which;13===a&&(e.currentPage=1,e.navListData=[],s.go("index.activityAssort",{pageID:e.currentPage,typeID:e.keyword}))},e.delNavBtn=function(t){e.ids=t.category_id,n()},e.delallNavBtn=function(){if(""!=e.ids)console.log(["$scope.ids",e.ids]),n();else{var t="友情提示",a="请至少选择一个活动分类";o(t,a)}},e.selectedall=!1,e.ids="",e.checkedall=function(){e.selectedall=!e.selectedall,e.ids="",angular.forEach(e.navListData,function(t){t.selected=e.selectedall,e.selectedall?(e.ids+=t.category_id+",",console.log(["$scope.ids",e.ids])):(e.ids="",console.log(["$scope.ids",e.ids]))})},e.selectme=function(t){t.selected=!t.selected,console.log(t.selected);var a=!0;e.navListData.filter(function(e){e.selected||(a=!1)}),e.selectedall=a,t.selected?(e.ids+=t.category_id+",",console.log(e.ids)):(e.ids=e.ids.replace(t.category_id+",",""),console.log(e.ids))};var d=e.pageData={category_name:"",category_summary:"",category_sort:"",category_systype:0,category_img_url:"",category_parent_id:0};e.addcardcouponBtn=function(){e.isAddcard=!0,e.showPicDom=!0,$("#dealModal").modal({backdrop:"static",keyboard:!1}),d.category_name="",d.category_summary="",d.category_sort="",d.category_img_url=[],document.onclick=function(t){console.log(t.srcElement.className);var a=t.srcElement?t.srcElement:t.target;a.className.match("modal")&&a.className.match("inmodal")&&e.$apply(function(){d.category_img_url="",e.showPicDom=!1})}},e.editcardcouponBtn=function(t){console.log(t),e.isAddcard=!1,d.category_img_url=[t.category_img_url],d.category_img_url&&(e.showPicDom=!0),$("#dealModal").modal({backdrop:"static",keyboard:!1}),console.log(d.category_img_url),d.category_name=t.category_name,d.category_summary=t.category_summary,d.category_sort=t.category_sort,d.category_id=t.category_id,document.onclick=function(t){console.log(t.srcElement.className);var a=t.srcElement?t.srcElement:t.target;a.className.match("modal")&&a.className.match("inmodal")&&e.$apply(function(){d.category_img_url="",e.showPicDom=!1})}},e.addCouponBtn=function(){return""==d.category_name?void o("友情提示","请输入活动分类的名称"):(d.category_img_url&&(d.category_img_url=d.category_img_url[0]),""==d.category_sort&&(d.category_sort=0),console.log(angular.toJson(d)),void(1==e.isAddcard?a.addActivityAssort({data:angular.toJson(d)},function(t){0==t.errcode&&(e.showPicDom=!1,o("友情提示","添加活动分类成功"),$("#dealModal").modal({backdrop:"static",keyboard:!1}),r())}):a.editActivityAssort({data:angular.toJson(d)},function(t){0==t.errcode&&(e.showPicDom=!1,o("友情提示","修改活动分类成功"),$("#dealModal").modal({backdrop:"static",keyboard:!1}),r())},function(e){})))}}),e.pageChanged=function(){console.log(e.currentPage),s.go("index.activityAssort",{pageID:e.currentPage})},e.clear=function(){$("#dealModal").modal("hide"),pageDate.category_name="",pageDate.category_summary="",pageDate.category_sort="",pageDate.category_systype=0,pageDate.category_img_url="",pageDate.category_parent_id=0}}e.$inject=["$scope","$stateParams","mmpadminAPI","alertbox","$state","alertconformbox"],angular.module("mmpadmin").controller("activityAssortCtrl",e)}(),function(){"use strict";function e(e,t){var a=this;a.info="这是商品编辑页面",a.date="",a.date2="",a.imagedate=[t.mainsiteurl+"/FileUpload/hf/20150824/image/5dac178f-e0b7-4d1d-9a3d-b43c70aa40b6.jpg",t.mainsiteurl+"/FileUpload/hf/20150824/image/0e1078a3-6e6a-45ad-97ab-3b7f39c68111.jpg",t.mainsiteurl+"/FileUpload/hf/20150824/image/ab7df37c-8436-4e76-92f9-c341d0ca8a5e.jpg",t.mainsiteurl+"/FileUpload/hf/20150824/image/36dcb56d-a72b-4e63-97f9-10bd2492a855.jpg",t.mainsiteurl+"/FileUpload/hf/20150824/image/3e42b609-1104-4d1a-a9e1-45cf161170ba.jpg"],a.change=function(){a.imagedate.shift()},a.skudata=[{property:{property_id:3,property_name:"啦啦"},property_value_list:[{property_value_id:3,property_value_name:"分类1"},{property_value_id:4,property_value_name:"分类2"}]},{property:{property_id:1,property_name:"尺码"},property_value_list:[{property_value_id:1,property_value_name:"S"},{property_value_id:2,property_value_name:"L"}]},{property:{property_id:2,property_name:"颜色"},property_value_list:[{property_value_id:6,property_value_name:" 马其色"},{property_value_id:271,property_value_name:"粉红"},{property_value_id:271,property_value_name:"绿色"}]}],a.skudata2=[{sku_id:313366,properties:[{property_id:3,property_name:"啦啦",property_value_id:1,property_value_name:"分类1"},{property_id:1,property_name:"尺码",property_value_id:1,property_value_name:"S"},{property_id:2,property_name:"颜色",property_value_id:6,property_value_name:"马其色"}],show_properties:"尺码:S;颜色:马其色",price:10,count:20},{sku_id:313366,properties:[{property_id:3,property_name:"啦啦",property_value_id:1,property_value_name:"分类1"},{property_id:1,property_name:"尺码",property_value_id:1,property_value_name:"S"},{property_id:2,property_name:"颜色",property_value_id:271,property_value_name:"粉红"}],show_properties:"尺码:S;颜色:粉红",price:10,count:20},{sku_id:313366,properties:[{property_id:3,property_name:"啦啦",property_value_id:1,property_value_name:"分类1"},{property_id:1,property_name:"尺码",property_value_id:1,property_value_name:"L"},{property_id:2,property_name:"颜色",property_value_id:6,property_value_name:"马其色"}],show_properties:"尺码:S;颜色:马其色",price:10,count:20},{sku_id:313366,properties:[{property_id:3,property_name:"啦啦",property_value_id:1,property_value_name:"分类1"},{property_id:1,property_name:"尺码",property_value_id:1,property_value_name:"L"},{property_id:2,property_name:"颜色",property_value_id:271,property_value_name:"粉红"}],show_properties:"尺码:S;颜色:粉红",price:10,count:20},{sku_id:313367,properties:[{property_id:3,property_name:"啦啦",property_value_id:1,property_value_name:"分类2"},{property_id:1,property_name:"尺码",property_value_id:1,property_value_name:"S"},{property_id:2,property_name:"颜色",property_value_id:6,property_value_name:"马其色"}],show_properties:"尺码:S;颜色:马其色",price:10,count:20},{sku_id:313368,properties:[{property_id:3,property_name:"啦啦",property_value_id:1,property_value_name:"分类2"},{property_id:1,property_name:"尺码",property_value_id:1,property_value_name:"S"},{property_id:2,property_name:"颜色",property_value_id:271,property_value_name:"粉红"}],show_properties:"尺码:S;颜色:粉红",price:10,count:20},{sku_id:313369,properties:[{property_id:3,property_name:"啦啦",property_value_id:1,property_value_name:"分类2"},{property_id:1,property_name:"尺码",property_value_id:1,property_value_name:"L"},{property_id:2,property_name:"颜色",property_value_id:6,property_value_name:"马其色"}],show_properties:"尺码:S;颜色:马其色",price:10,count:20},{sku_id:313370,properties:[{property_id:3,property_name:"啦啦",property_value_id:1,property_value_name:"分类2"},{property_id:1,property_name:"尺码",property_value_id:1,property_value_name:"L"},{property_id:2,property_name:"颜色",property_value_id:271,property_value_name:"粉红"}],show_properties:"尺码:S;颜色:粉红",price:10,count:20}]}e.$inject=["$http","$rootScope"],angular.module("mmpadmin").controller("zafwViewCtrl",e)}(),function(){"use strict";angular.module("ZAFW",["ngAnimate","ngCookies","ngTouch","ngSanitize","ui.router","ui.bootstrap"])}(),function(){"use strict";function e(e){function t(t,a,o){t.deletefun=function(){var a=e(o.dletefun);a(t)},t.boxPosition={start:[null,null],current:[0,0],end:[0,0]},t.boxStartMove=function(e){t.boxPosition.start[0]=e.clientX,t.boxPosition.start[1]=e.clientY},t.boxMoving=function(e){if(t.boxPosition.start[0]||t.boxPosition.start[1]){var o=e.currentTarget.offsetParent,s=o.offsetParent,i=e.clientX-t.boxPosition.start[0],l=e.clientY-t.boxPosition.start[1];o.offsetLeft+i>=0&&o.offsetLeft+i<=s.offsetWidth-o.offsetWidth&&(t.boxPosition.current[0]=e.clientX),o.offsetTop+l>=0&&o.offsetTop+l<=s.offsetHeight-o.offsetHeight&&(t.boxPosition.current[1]=e.clientY),i=t.boxPosition.current[0]-t.boxPosition.start[0],l=t.boxPosition.current[1]-t.boxPosition.start[1],$(s).css({border:"1px dashed rgba(255, 107, 0, 0.83)"}),a.find(".imgbox").css({transform:"translate("+i+"px,"+l+"px)",transition:"0s","z-index":"99"}),t.boxPosition.end[0]=i,t.boxPosition.end[1]=l}},t.boxEndMove=function(s){if(t.boxPosition.start[0]||t.boxPosition.start[1]){var i=s.currentTarget.offsetParent,l=i.offsetParent;if(t.boxPosition.start[0]=null,t.boxPosition.start[1]=null,$(l).css({border:"none"}),"mouseleave"===s.type||Math.abs(t.boxPosition.end[0])<i.offsetWidth/2&&Math.abs(t.boxPosition.end[1])<i.offsetHeight/2)console.log("归回原位"),a.find(".imgbox").css({transform:"translate(0px,0px)",transition:"0.5s","z-index":"0"});else if("mouseup"===s.type){console.log("img换位");var r=e(o.changefun),n=parseInt((l.offsetWidth-30)/(i.offsetWidth+6)),d=Math.round(t.boxPosition.end[0]/i.offsetWidth),c=Math.round(t.boxPosition.end[1]/i.offsetHeight);d>=n&&(d=n-1);var p=d+c*n;r(t,{moveNum:p}),a.find(".imgbox").css({transform:"translate(0px,0px)",transition:"0s","z-index":"0"})}}}}return{restrict:"E",templateUrl:"app/ZAFW/uploadImg/imgBox.html",link:t}}function t(e,t,a){function o(t,o,s,i){function l(a,o,s){console.log("choseimgcontroller"),a.imgfiledata=[],a.uploadimg=function(){function l(e,o){return"undefined"==typeof t.datalist&&(t.datalist=[]),"undefined"==typeof t.imgurls&&(t.imgurls=[]),0!=o.errcode?(s("上传失败",o.errmsg),void layer.close(c)):(t.datalist[e]={url:o.file_url_list[0],height:o.other_info_list[0].height,width:o.other_info_list[0].width},t.imgurls[e]=o.file_url_list[0],void(a.responseCount>=a.imgfiledata.length&&(layer.close(c),r())))}function r(){console.log("link_scope.imgurls",t.imgurls),i.$setViewValue(t.imgurls),o.close()}function n(e){layer.close(c),s("上传失败","网络连接异常")}if(0==a.imgfiledata.length)return void s("系统提示","请先选择一张图片");var d=e.mainsiteurl+"/serv/api/common/file.ashx?action=add";(1===t.ispcweb||"1"===t.ispcweb)&&(d+="&maxWidth=0");var c=layer.load(1,{shade:[.2,"#000"]}),p=t.imgurls.length;a.responseCount=0;for(var u=0;u<a.imgfiledata.length;u++){console.log("$scope.imgfiledata",a.imgfiledata[u].file);var m=new FormData,g=new XMLHttpRequest;g.fileIndex=p+u,g.open("POST",d,!0),m.append("file",a.imgfiledata[u].file),g.send(m),g.onreadystatechange=function(e){4==this.readyState&&(a.responseCount++,console.log(a.responseCount),200==this.status?l(this.fileIndex,JSON.parse(this.responseText)):n(this.responseText))}}},a.cancel=function(){o.close()}}l.$inject=["$scope","$modalInstance","alertbox"],setInterval(function(){t.imgurls="object"==typeof i.$modelValue?i.$modelValue:[],t.$apply()},1e3),t.deleteimg=function(e){t.imgurls.splice(e,1)},t.changeimg=function(e,a){var o=e+a;0>o&&(o=0),o>=t.imgurls.length&&(o=t.imgurls.length-1);var s=t.imgurls.splice(e,1);t.imgurls.splice(o,0,s[0])},t.choseimg=function(){a.open({animation:!0,templateUrl:"app/ZAFW/uploadImg/choseImg.modal.html",controller:l,size:"lg",resolve:{}})}}return{scope:{datalist:"=?datalist",ispcweb:"=?ispcweb"},require:"?ngModel",restrict:"E",templateUrl:"app/ZAFW/uploadImg/uploadImg.html",link:o}}t.$inject=["$rootScope","$timeout","$modal"],e.$inject=["$parse"],angular.module("ZAFW").directive("zafwUploadImg",t).directive("zafwImgBox",e)}(),function(){"use strict";function e(){function e(e,t,a,o){function s(t){function a(t){var a=new FileReader;a.readAsDataURL(t),a.onload=function(a){e.imgdata.push({file:t,url:a.target.result}),s()}}function s(){i++,i>=l&&(console.log("设置"),o.$setViewValue(e.imgdata),e.$apply())}for(var i=0,l=t.target.files.length,r=0;l>r;r++)a(t.target.files[r])}console.log(t.find(".zafwUploadImg")),e.imgdata=[],e.idName="zafwUploadImg"+1e4*Math.random(),t.find(".zafwUploadImg")[0].addEventListener("change",function(e){s(e)},!1)}e.$inject=["$scope","iElm","iAttrs","ngModel"];var t={restrict:"E",templateUrl:"app/ZAFW/uploadImg/choseImg.html",require:"?ngModel",link:e};return t}angular.module("ZAFW").directive("zafwChoseImg",e)}(),function(){"use strict";function e(){return{scope:{},restrict:"E",template:"<div  ng-transclude></div>",transclude:!0,link:function(e,t,a,o){}}}function t(e,t,a){return{require:"ngModel",restrict:"E",templateUrl:"app/ZAFW/sku/checkSku.html",link:function(a,o,s,i){function l(){1>n?(n=1,t.getAllSKU({action:"list"},function(e){console.log(["skuList",e]),a.skuPropertyList=e.list,n=2,r()},function(e){console.log(["获取所有商品规格请求失败",e])})):n>1&&(console.log(["skuList2",a.skuPropertyList]),r())}function r(){a.checkskuOrigin=i.$viewValue;for(var t in a.checkskuOrigin)for(var o in a.skuPropertyList)angular.equals(a.checkskuOrigin[t].property,a.skuPropertyList[o])&&(a.checkskuOrigin[t].property=a.skuPropertyList[o]);console.log(["checksku",a.checkskuOrigin]),e(function(){a.$broadcast("checkSkuDataReady")})}a.checkskuOrigin=[],a.skuPropertyList=[];var n=0;i.$render=function(){l()},a.selectSkuProperty=function(e){console.log(e),a.checkskuOrigin[e].property_value_list=[],a.$broadcast("renderSku")},a.addSkuProperty=function(){a.checkskuOrigin.push({property:{property_id:"",property_name:""},property_value_list:[]})},a.deleteSkuProperty=function(e){var t=a.checkskuOrigin.splice(e,1);t[0].property_value_list.length>0&&a.$broadcast("renderSku")},a.addSkuPropertyValue=function(e,t){for(var o=0;o<t.length;o++)a.checkskuOrigin[e].property_value_list.push(t[o]);a.$broadcast("renderSku")},a.deleteSkuPropertyValue=function(e,t){e.property_value_list.splice(t,1),a.$broadcast("renderSku")}}}}t.$inject=["$timeout","mmpadminAPI","alertbox"],angular.module("ZAFW").directive("zafwSkuBox",e).directive("zafwCheckSku",t)}(),function(){"use strict";function e(e,i,l){return{require:"ngModel",restrict:"E",templateUrl:"app/ZAFW/sku/setSkuT.html",link:function(r,n,d,c){function p(e,t,a){if(t>=r.checksku.length-1)return!0;var o=u(t,a),s=e/o;return parseInt(s)===s?!0:!1}function u(e,t){for(var a=t[t.length-1].property_value_list.length,o=t.length-2-e;o>=1;o--)a*=t[o].property_value_list.length;return a}r.checksku=[],r.istdfirst=function(e,t){return t<r.checksku.length-1&&!p(e,t,r.checksku)?!1:!0},r.rownum=function(e,t){return t<r.checksku.length-1&&p(e,t,r.checksku)?u(t,r.checksku):1},r.$on("checkSkuDataReady",function(){e(function(){if(r.checksku=angular.copy(r.checkskuOrigin),r.setsku=c.$viewValue,r.checksku){2==r.checksku.length&&r.setsku.sort(firstBy(function(e){return e.properties[0].property_value_id}).thenBy(function(e){return e.properties[1].property_value_id})),3==r.checksku.length&&r.setsku.sort(firstBy(function(e){return e.properties[0].property_value_id}).thenBy(function(e){return e.properties[1].property_value_id}).thenBy(function(e){return e.properties[2].property_value_id})),4==r.checksku.length&&r.setsku.sort(firstBy(function(e){return e.properties[0].property_value_id}).thenBy(function(e){return e.properties[1].property_value_id}).thenBy(function(e){return e.properties[2].property_value_id}).thenBy(function(e){return e.properties[3].property_value_id})),5==r.checksku.length&&r.setsku.sort(firstBy(function(e){return e.properties[0].property_value_id}).thenBy(function(e){return e.properties[1].property_value_id}).thenBy(function(e){return e.properties[2].property_value_id}).thenBy(function(e){return e.properties[3].property_value_id}).thenBy(function(e){return e.properties[4].property_value_id})),6==r.checksku.length&&r.setsku.sort(firstBy(function(e){return e.properties[0].property_value_id}).thenBy(function(e){return e.properties[1].property_value_id}).thenBy(function(e){return e.properties[2].property_value_id}).thenBy(function(e){return e.properties[3].property_value_id}).thenBy(function(e){return e.properties[4].property_value_id}).thenBy(function(e){return e.properties[5].property_value_id})),console.log(["end",r.setsku]);var e=l(function(){void 0!=r.setsku&&(i.editshowend=!0,l.cancel(e),i.editSkus=r.setsku)},100)}},1e3)}),r.$on("renderSku",function(){var e=s(a(r.checkskuOrigin));r.setsku=t(r.checkskuOrigin)===t(r.checksku)?o(e,r.setsku):e,r.checksku=a(r.checkskuOrigin),c.$setViewValue(r.setsku)})}}}function t(e){for(var t=0,a=0;a<e.length;a++)e[a].property_value_list.length>0&&t++;return t}function a(e){for(var t=[],a=0;a<e.length;a++)e[a].property_value_list.length>0&&t.push(e[a]);return t}function o(e,t){for(var a=0;a<e.length;a++)for(var o=0;o<t.length;o++){for(var s=!0,i=0;i<e[a].properties.length;i++)if(!s||e[a].properties[i].property_value_id!==t[o].properties[i].property_value_id){s=!1;break}s&&(console.log("alltrue"),e[a].sku_id=t[o].sku_id,e[a].price=t[o].price,e[a].count=t[o].count,e[a].sku_sn=t[o].sku_sn,e[a].ex_questionnaire_id=t[o].ex_questionnaire_id,e[a].skuimg=t[o].skuimg)}return e}function s(e){if(e.length<1)return[];for(var t=[],a=[],o=1,s=0;s<e.length;s++)e[s].property_value_list.length>0&&(o*=e[s].property_value_list.length,a.push(0));for(var i=0;o>i;i++){t[i]={sku_id:0,properties:[],show_properties:"",price:0,count:0,ex_questionnaire_id:"",skuimg:""};for(var l=0;l<e.length;l++){var r=e[l],n=a[l],d={property_id:r.property.property_id,property_name:r.property.property_name,property_value_id:r.property_value_list[n].property_value_id,property_value_name:r.property_value_list[n].property_value_name};if(t[i].show_properties=t[i].show_properties+r.property.property_name+":"+r.property_value_list[n].property_value_name+";",t[i].properties.push(d),l===e.length-1)for(var c=e.length-1;c>=0;c--){if(a[c]!==e[c].property_value_list.length-1){a[c]++;break}a[c]=0}}}return t}e.$inject=["$timeout","$rootScope","$interval"],angular.module("ZAFW").directive("zafwSetSkuT",e)}(),function(){"use strict";function e(e,s,i,l){return{require:"ngModel",restrict:"E",templateUrl:"app/ZAFW/sku/setSku.html",link:function(s,r,n,d){function c(e){if(e){b.currSku=e,b.skus=[],b.hasSpec=[],b.hasSpec.push({text:"全部",value:"-1",selected:!1});for(var t=0;t<s.checksku.length;t++)b.hasSpec.push({text:s.checksku[t].property.property_name,id:s.checksku[t].property.property_id,selected:!1,pvid:""});b.skus.push({column:"price",text:"售价",value:e.price,specs:p(b.hasSpec)},{column:"base_price",text:"基础价",value:e.base_price,specs:p(b.hasSpec)},{column:"count",text:"库存",value:e.count,specs:p(b.hasSpec)},{column:"weight",text:"重量",value:e.weight,specs:p(b.hasSpec)},{column:"sku_sn",text:"编码",value:e.sku_sn,specs:p(b.hasSpec)},{column:"skuimg",text:"图片",value:e.skuimg,specs:p(b.hasSpec)}),console.log("vm.skus",b.skus),console.log("$scope.setsku",s.setsku),$("#skuModal").modal("show")}}function p(e,t){var t=t||[];for(var a in e)e.hasOwnProperty(a)&&("object"==typeof e[a]?(t[a]=e[a].constructor===Array?[]:{},p(e[a],t[a])):t[a]=e[a]);return t}function u(e){e.selected=!e.selected;for(var t=0;t<b.currSku.properties.length;t++)b.currSku.properties[t].property_id==e.id&&(e.pvid=b.currSku.properties[t].property_value_id)}function m(){$("#skuModal").modal("hide")}function g(){for(var e=0;e<b.skus.length;e++){for(var t,a,o=!1,i=0;i<b.skus[e].specs.length;i++)b.skus[e].specs[i].selected&&(t=b.skus[e].specs[i].id,a=b.skus[e].specs[i].pvid,o=!0);if(o)for(var l=b.skus[e].column,r=0;r<s.setsku.length;r++)if(t>0)for(var n=0;n<s.setsku[r].properties.length;n++)s.setsku[r].properties[n].property_id==t&&s.setsku[r].properties[n].property_value_id==a&&(s.setsku[r][l]=b.currSku[l]);else s.setsku[r][l]=b.currSku[l];

}$("#skuModal").modal("hide")}function v(e,t,a){if(t>=s.checksku.length-1)return!0;var o=h(t,a),i=e/o;return parseInt(i)===i?!0:!1}function h(e,t){for(var a=t[t.length-1].property_value_list.length,o=t.length-2-e;o>=1;o--)a*=t[o].property_value_list.length;return a}s.checksku=[],s.questionList=[],s.questionnaire_name="",s.page=1,s.rows=10,s.totalItems=0,s.isShow=l.type;var b=(s.vf={synchronouSku:c,stuCencel:m,stuConfirm:g,selectBox:u},s.vm={skus:[],currSku:{},hasSpec:[]});s.istdfirst=function(e,t){return t<s.checksku.length-1&&!v(e,t,s.checksku)?!1:!0},s.FileInputChange=function(t){var a=$(t),o=parseInt($(t).attr("data-index"));$.ajaxFileUpload({url:e.mainsiteurl+"/serv/api/common/file.ashx?action=Add",secureuri:!1,fileElement:a,dataType:"json",success:function(e){0==e.errcode?(s.setsku[o].skuimg=e.file_url_list[0],$('.tdimg img[data-index="'+o+'"]').attr("src",e.file_url_list[0])):alert(e.errmsg)}})},s.SelQuestion=function(e){$("#questionModal").modal("show"),s.index=e,s.GetQuestion()},s.questionPageChanged=function(){console.log("第"+s.page+"页"),s.GetQuestion()},s.GetQuestion=function(){i.GetQuestionnaireList({page:s.page,rows:s.rows,questionnaire_name:s.questionnaire_name,type:"2"},function(e){console.log("试卷列表",e),e.isSuccess?(s.totalItems=e.returnObj.totalcount,s.questionList=e.returnObj.list):console.log("请求试卷列表失败",e)},function(e){console.log("请求试卷列表请求失败",e)})},s.delSkuImg=function(e){s.setsku[e].skuimg="",$('.tdimg img[data-index="'+e+'"]').attr("src","")},s.questionCtrlSearch=function(e){console.log(["点击回车",e]),console.log(s.questionnaire_name);var t=window.event?e.keyCode:e.which;13===t&&(s.page=1,s.questionList=[],s.GetQuestion())},s.closeQuestionFrame=function(e){console.log(["question",e]);for(var t=0;t<s.setsku.length;t++)if(s.setsku[t].ex_questionnaire_id==e.id)return void alert("已经绑定,请重新选择");s.setsku[s.index].ex_questionnaire_id=e.id,$("#questionModal").modal("hide")},s.rownum=function(e,t){return t<s.checksku.length-1&&v(e,t,s.checksku)?h(t,s.checksku):1},s.$on("checkSkuDataReady",function(){s.checksku=angular.copy(s.checkskuOrigin),s.setsku=d.$viewValue,2==s.checksku.length&&s.setsku.sort(firstBy(function(e){return e.properties[0].property_value_id}).thenBy(function(e){return e.properties[1].property_value_id})),3==s.checksku.length&&s.setsku.sort(firstBy(function(e){return e.properties[0].property_value_id}).thenBy(function(e){return e.properties[1].property_value_id}).thenBy(function(e){return e.properties[2].property_value_id})),4==s.checksku.length&&s.setsku.sort(firstBy(function(e){return e.properties[0].property_value_id}).thenBy(function(e){return e.properties[1].property_value_id}).thenBy(function(e){return e.properties[2].property_value_id}).thenBy(function(e){return e.properties[3].property_value_id})),5==s.checksku.length&&s.setsku.sort(firstBy(function(e){return e.properties[0].property_value_id}).thenBy(function(e){return e.properties[1].property_value_id}).thenBy(function(e){return e.properties[2].property_value_id}).thenBy(function(e){return e.properties[3].property_value_id}).thenBy(function(e){return e.properties[4].property_value_id})),6==s.checksku.length&&s.setsku.sort(firstBy(function(e){return e.properties[0].property_value_id}).thenBy(function(e){return e.properties[1].property_value_id}).thenBy(function(e){return e.properties[2].property_value_id}).thenBy(function(e){return e.properties[3].property_value_id}).thenBy(function(e){return e.properties[4].property_value_id}).thenBy(function(e){return e.properties[5].property_value_id})),console.log(["end",s.setsku])}),s.$on("renderSku",function(){var e=o(t(s.checkskuOrigin));s.setsku=a(e,s.setsku,s.$parent.$parent.$parent.productEditorData.price),s.checksku=t(s.checkskuOrigin),d.$setViewValue(s.setsku)})}}}function t(e){for(var t=[],a=0;a<e.length;a++)e[a].property_value_list.length>0&&t.push(e[a]);return t}function a(e,t,a){if(1==e.length&&0==t.length)return e[0].price=a,e[0].sku_sn="",e[0].ex_questionnaire_id="",e[0].skuimg="",e[0].base_price=0,e[0].weight=0,e;var o=0,s="",i=0,l=0,r=0;t.length>0&&(o=t[0].price,s=$.trim(t[0].sku_sn),i=$.trim(t[0].ex_questionnaire_id),l=t[0].base_price,r=t[0].weight);for(var n=0;n<e.length;n++){for(var d=!0,c=0;c<t.length;c++){var p=!0,u=e[n].properties.length;e[n].properties.length>t[c].properties.length&&(u=t[n].properties.length);for(var m=0;u>m;m++)if(e[n].properties[m].property_value_id!=t[c].properties[m].property_value_id){p=!1;break}if(p){e[n].sku_id=t[c].sku_id,e[n].price=0==t[c].price?o:t[c].price,e[n].count=t[c].count,e[n].sku_sn=""!=$.trim(t[c].sku_sn)?$.trim(t[c].sku_sn):s,e[n].ex_questionnaire_id=$.trim(t[c].ex_questionnaire_id),e[n].skuimg=""==t[c].skuimg?"":t[c].skuimg,e[n].base_price=t[c].base_price,e[n].weight=t[c].weight,d=!1;break}}d&&(e[n-1]&&0!=e[n-1].price&&""!=$.trim(e[n-1].sku_sn)?(e[n].price=e[n-1].price,e[n].sku_sn=$.trim(e[n-1].sku_sn),e[n].base_price=e[n-1].base_price,e[n].weight=e[n-1].weight):(e[n].price=o,e[n].sku_sn=s,e[n].base_price=l,e[n].weight=r))}return e}function o(e){if(e.length<1)return[];for(var t=[],a=[],o=1,s=0;s<e.length;s++)e[s].property_value_list.length>0&&(o*=e[s].property_value_list.length,a.push(0));for(var i=0;o>i;i++){t[i]={sku_id:0,properties:[],show_properties:"",price:0,count:0,ex_questionnaire_id:"",skuimg:""};for(var l=0;l<e.length;l++){var r=e[l],n=a[l],d={property_id:r.property.property_id,property_name:r.property.property_name,property_value_id:r.property_value_list[n].property_value_id,property_value_name:r.property_value_list[n].property_value_name};if(t[i].show_properties=t[i].show_properties+r.property.property_name+":"+r.property_value_list[n].property_value_name+";",t[i].properties.push(d),l===e.length-1)for(var c=e.length-1;c>=0;c--){if(a[c]!==e[c].property_value_list.length-1){a[c]++;break}a[c]=0}}}return t}e.$inject=["$rootScope","$timeout","mmpadminAPI","$stateParams"],angular.module("ZAFW").directive("zafwSetSku",e)}(),function(){"use strict";function e(e,t){function a(a,o,s){function i(){a.menushow=!1,a.searchworld=""}function l(){a.menushow=!0}function r(){a.addboxshow=!0}function n(){a.addboxshow=!1}var d=e(s.property),c=d(a),p=e(s.addPropertyValue);a.skuvalue=[],a.addboxshow=!1,a.menushow=!1,a.searchworld="",a.addPropertyValue=function(e){if(!e.checked){var t={};t.property_value_id=e.property_value_id,t.property_value_name=e.property_value_name,i(),n(),p(a,{propertyValue:[t]})}},a.addStorePropertyValue=function(e){console.log(["$scope.searchworld",a.searchworld]),console.log(["propertydata.property.property_id",c.property.property_id]),t.addproductpropertyvalue({property_id:c.property.property_id,property_value_name:a.searchworld},function(e){console.log(["添加属性值成功",e]),i()},function(e){console.log(["添加属性值失败",e])})},a.showaddbox=function(){r()},a.clearaddbox=function(){i(),n()},a.showmenu=function(){t.getSKUValue({action:"list",property_id:c.property.property_id},function(e){angular.forEach(e.list,function(e,t){angular.forEach(c.property_value_list,function(t,a){return e.checked!==!0?e.property_value_id===t.property_value_id||e.property_value_name===t.property_value_name?void(e.checked=!0):void(e.checked=!1):void 0})}),a.skuvalue=e.list,console.log(["$scope.skuvalue",a.skuvalue]),l()},function(e){})}}return{restrict:"E",templateUrl:"app/ZAFW/sku/addSkuPropertyValue.html",link:a}}function t(){function e(e,t,a){}return{restrict:"E",templateUrl:"app/ZAFW/sku/addSkuProperty.html",link:e}}e.$inject=["$parse","mmpadminAPI"],angular.module("ZAFW").directive("zafwAddSkuPropertyValue",e).directive("zafwAddSkuProperty",t)}(),function(){"use strict";function e(){function e(e,t,a,o,s,i){function l(e){var t=window.location.href,a=t.indexOf(e+"=");if(-1==a)return"";var o=t.slice(e.length+a+1,e.length+a+2),s=o.indexOf("&");return-1!=s&&(o=o.slice(0,s)),o}var r=this;r.number=10;var n=l("hidemenu");a.hidemenu=n&&$("0"!=n)&&0!=n?!0:!1,console.log(["$rootScope.hidemenu",a.hidemenu]);var d="navBarSHYG.json";location.hostname.match("localhost")||location.hostname.match("192.168.")||location.hostname.match("dev1")||location.hostname.match("comeoncloud.comeoncloud")?d="navBar.json":location.hostname.match("mixblu")?d="navBarMixblu.json":location.hostname.match("shanghuiyigou")||location.hostname.match("dev2")?d="navBarSHYG.json":(location.hostname.match("dev3")||location.hostname.match("jikuwifi"))&&(d="navBarJKWF.json"),t.get("assets/data/"+d).success(function(t){e.catalogTree=t,console.log(["$scope.catalogTree",e.catalogTree])}).error(function(e){}),e.logout=function(){s.logout(function(e){"ok"==e.errmsg?(i("友情提示","登出成功"),o.go("login")):i("友情提示",e.errcode)},function(e){i("友情提示",e.errcode)})}}e.$inject=["$scope","$http","$rootScope","$state","mmpadminAPI","alertbox"];var t={restrict:"AE",templateUrl:"app/ZAFW/navBar/navBar.html",controller:e,controllerAs:"nb",bindToController:!0};return t}function t(e){return{restrict:"A",link:function(t,a,o){t.$last===!0&&e(function(){t.$emit("ngRepeatFinished")})}}}function a(e){function t(t,a){t.$on("ngRepeatFinished",function(t){e(function(){a.metisMenu()})})}var a={restrict:"A",link:t};return a}function o(e){return{restrict:"EA",template:'<a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="" ng-click="minimalize()"><i class="fa fa-bars"></i></a>',link:function(t,a,o,s){t.minimalize=function(){angular.element("body").toggleClass("mini-navbar"),!angular.element("body").hasClass("mini-navbar")||angular.element("body").hasClass("body-small")?(angular.element("#side-menu").hide(),e(function(){angular.element("#side-menu").fadeIn(500)},100)):angular.element("#side-menu").removeAttr("style")}}}}t.$inject=["$timeout"],a.$inject=["$timeout"],o.$inject=["$timeout"],angular.module("ZAFW").directive("navBar",e).directive("onFinishRenderFilters",t).directive("sideNavigation",a).directive("minimalizaSidebar",o)}(),function(){"use strict";function e(){var e={restrict:"A",link:function(e,t,a,o){var s={autoclose:!0,todayBtn:!0,language:"cn",todayHighlight:!0};$(t).datetimepicker(s)}};return e}function t(){var e={restrict:"A",link:function(e,t,a,o){var s={autoclose:!0,todayBtn:!0,language:"cn",todayHighlight:!0,format:"yyyy-mm-dd"};$(t).datepicker(s)}};return e}function a(){var e={restrict:"A",link:function(e,t,a,o){var s={autoclose:!0,todayBtn:!0,language:"cn",todayHighlight:!0,inputs:t.children("input").toArray(),format:"yyyy-mm-dd"};$(t).datepicker(s)}};return e}var o={days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","星期日"],daysShort:["日","一","二","三","四","五","六","日"],daysMin:["日","一","二","三","四","五","六","七"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],meridiem:["上午","下午"],suffix:["","","",""],today:"今天"};$.fn.datetimepicker.dates.cn=o,$.fn.datepicker.dates.cn=o,angular.module("ZAFW").directive("zafwDatepacker",t).directive("zafwDatepackerRange",a).directive("zafwDatepackerTime",e)}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"app/ZAFW/common/topnavbar.html",link:function(e,t,a,o){}}}angular.module("ZAFW").directive("zafwTopNavBar",e)}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"app/ZAFW/common/footer.html",link:function(e,t,a,o){}}}angular.module("ZAFW").directive("zafwFooter",e)}(),function(){"use strict";function e(e,t,a,o,s){var i=e.pageData={autoid:"",wx_nick_name:"",true_name:"",user_phone:"",user_company:"",user_email:"",user_position:"",available_vote_count:"",total_score:""};e.editInfoData={},a.getUserList({pageindex:1,pagesize:1,keyword:"",tag_names:"",distribution:"",user_name:"",name_wxname:""},function(l){function r(){a.getUserList({pageindex:e.currentPage,pagesize:e.pagesize,keyword:e.keyword,tag_names:e.tagsName,distribution:e.isDist,user_name:e.user_name,name_wxname:e.name_wxname},function(t){e.totals=t.returnObj.totalcount,e.raisepros=t.returnObj.list},function(e){console.log(e)})}console.log(l),e.totals=l.returnObj.totalcount,e.currentPage=""==o.pageID||void 0==o.pageID?1:parseInt(o.pageID),e.keyword=""==o.keyID||void 0==o.keyID?"":o.keyID,e.tagsName=""==o.tagID||void 0==o.tagID?"":o.tagID,e.tagsName=""==o.tagID||void 0==o.tagID?"":o.tagID,e.isDist=""==o.disID||void 0==o.disID?"":o.disID,e.user_name=""==o.nameID||void 0==o.nameID?"":o.nameID,e.name_wxname=""==o.wxNameID||void 0==o.wxNameID?"":o.wxNameID,e.pagesize=10,r(),e.setUserLevelBtn=function(o){$("#setLevelModal").modal("show"),e.setLevelBtn=function(){return e.levelNum=parseInt(e.levelNum),isNaN(e.levelNum)?void t("友情提示","请输入正确的等级"):(console.log(o),void a.setUserLevel({autoid:o.autoid,user_access_level:e.levelNum},function(e){console.log(e),0==e.errcode?(t("友情提示","设置访问等级成功"),$("#setLevelModal").modal("hide"),r()):t(e.errcode,e.errmsg)}))}},a.getUserTag({pageindex:1,pagesize:100,keyword:""},function(t){console.log(t),e.tagsData=t.returnObj.list},function(e){console.log(e)}),e.addUserTagBtn=function(){if(""==e.ids){var o="友情提示",s="请至少选择一个会员";return void t(o,s)}e.ids=e.ids.substring(e.ids,e.ids.length-1),console.log(["$scope.ids",e.ids]),$("#setUserTag").modal("show"),e.tag_ids="",e.allTagBtn=function(){e.allTagSelect=!e.allTagSelect,e.tag_ids="",angular.forEach(e.tagsData,function(t){t.selected=e.allTagSelect,e.allTagSelect?(e.tag_ids+=t.tag_name+",",console.log(["$scope.tag_ids",e.tag_ids])):(e.tag_ids="",console.log(["$scope.tag_ids",e.tag_ids]))})},e.oneTagBtn=function(t){console.log(t),t.selected=!t.selected,console.log(t.selected);var a=!0;e.tagsData.filter(function(e){e.selected||(a=!1)}),e.allTagSelect=a,t.selected?(e.tag_ids+=t.tag_name+",",console.log(e.tag_ids)):(e.tag_ids=e.tag_ids.replace(t.tag_name+",",""),console.log(e.tag_ids))},e.setTagBtn=function(){e.tag_ids=e.tag_ids.substring(e.tag_ids,e.tag_ids.length-1),a.setUserTag({autoids:e.ids,tag_names:e.tag_ids},function(a){console.log(a),0==a.errcode?(t("友情提示","设置标签成功"),$("#setUserTag").modal("hide"),angular.forEach(e.tagsData,function(e){e.selected=!1}),e.allTagSelect=!1,e.selectedall=!1,r()):t("友情提示",a.errmsg)})}},e.selectedall=!1,e.ids="",e.checkedall=function(){e.selectedall=!e.selectedall,e.ids="",angular.forEach(e.raisepros,function(t){t.selected=e.selectedall,e.selectedall?(e.ids+=t.autoid+",",console.log(["$scope.ids",e.ids])):(e.ids="",console.log(["$scope.ids",e.ids]))})},e.selectme=function(t){console.log(t),t.selected=!t.selected,console.log(t.selected);var a=!0;e.raisepros.filter(function(e){e.selected||(a=!1)}),e.selectedall=a,t.selected?(e.ids+=t.autoid+",",console.log(e.ids)):(e.ids=e.ids.replace(t.autoid+",",""),console.log(e.ids))},e.ctrlsearch=function(t){console.log(["点击回车",t]),console.log(e.keyword);var a=window.event?t.keyCode:t.which;13===a&&(e.currentPage=1,e.raisepros=[],s.go("index.userList",{pageID:e.currentPage,keyID:e.keyword}))},e.filterBtn=function(t){e.currentPage=1,"all"==t?s.go("index.userList",{pageID:e.currentPage,keyword:e.keyword,tagID:e.tagsName,disID:"",nameID:"",wxNameID:""}):"name"==t?s.go("index.userList",{pageID:e.currentPage,keyword:e.keyword,tagID:e.tagsName,disID:"",nameID:2,wxNameID:""}):"wxname"==t?s.go("index.userList",{pageID:e.currentPage,keyword:e.keyword,tagID:e.tagsName,disID:"",nameID:"",wxNameID:3}):"dist"==t&&s.go("index.userList",{pageID:e.currentPage,keyword:e.keyword,tagID:e.tagsName,disID:1,nameID:"",wxNameID:""})},e.addUserScoreBtn=function(o){$("#addScoreModal").modal("show"),e.addScoreBtn=function(){return console.log(e.addScore),""==e.addScore||void 0==e.addScore?void t("友情提示","请输入要添加的积分数量"):void a.addUserScore({autoid:o.autoid,total_score:e.addScore},function(a){console.log(a),0==a.errcode?(r(),t("友情提示","添加积分成功"),$("#addScoreModal").modal("hide"),e.addScore=""):t("友情提示",a.errmsg)})}},e.editUserInfoBtn=function(o){$("#userInfoModal").modal("show"),e.editInfoData.autoid=o.autoid,i.wx_nick_name=o.wx_nick_name,i.true_name=o.true_name,i.user_phone=o.user_phone,i.user_company=o.user_company,i.user_email=o.user_email,i.user_position=o.user_position,i.available_vote_count=o.available_vote_count,i.total_score=o.total_score,e.editInfoBtn=function(){null!=i.wx_nick_name&&""!=i.wx_nick_name&&(e.editInfoData.wx_nick_name=i.wx_nick_name),null!=i.true_name&&""!=i.true_name&&(e.editInfoData.true_name=i.true_name),null!=i.user_phone&&""!=i.user_phone&&(e.editInfoData.user_phone=i.user_phone),null!=i.user_company&&""!=i.user_company&&(e.editInfoData.user_company=i.user_company),null!=i.user_email&&""!=i.user_email&&(e.editInfoData.user_email=i.user_email),null!=i.user_position&&""!=i.user_position&&(e.editInfoData.user_position=i.user_position),null!=i.available_vote_count&&""!=i.available_vote_count&&(e.editInfoData.available_vote_count=i.available_vote_count),null!=i.total_score&&""!=i.total_score&&(e.editInfoData.total_score=i.total_score),a.editUserInfo({data:angular.toJson(e.editInfoData)},function(e){console.log(e),0==e.errcode?(r(),t("友情提示","修改用户信息成功"),$("#userInfoModal").modal("hide")):t("友情提示",e.errmsg)})}},e.pageChanged=function(){console.log(e.currentPage),s.go("index.NWYXuserList",{pageID:e.currentPage})}},function(e){console.log(e)})}e.$inject=["$scope","alertbox","mmpadminAPI","$stateParams","$state"],angular.module("mmpadmin").controller("NWYXuserListCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s){a.getUserInfo({autoid:o.userID},function(t){console.log(t),e.userInfo=t.returnObj})}e.$inject=["$scope","alertbox","mmpadminAPI","$stateParams","$state"],angular.module("mmpadmin").controller("NWYXuserDetailCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i){t.cpNums=0,t.ptnums=0,t.ptNums=0,t.cmNums=0,t.buttonTypes=[],t.buttonType="",t.lotteryType=a.lotteryType,s.getCoupons({action:"list",pageindex:1,pagesize:10},function(e){t.showcoupon=e.list[0],t.coupons=e.list,t.couponid=e.list[0].cardcoupon_id,console.log(e)},function(e){console.log(e)}),$(".content").summernote({lang:"zh-CN",callbacks:{onChange:function(){t.LotteryContent=$(".content").summernote("code")}}}),t.awards=[],t.addawardBtn=function(){var e=[],a={PrizeName:"",PrizeCount:0,Probability:0,Img:"",AwardsType:1,Value:0,Description:"",prizeContent:0};0==t.awards.length?(e.push(a),t.awards=t.awards.concat(e)):t.checkPrizeNotNull(t.awards[t.awards.length-1],t.awards.length-1)&&(e.push(a),t.awards=t.awards.concat(e),t.selectwhich(t.awards.length-1)),console.log(t.awards)},t.checkPrizeNotNull=function(e,t){return void 0==e?!0:""==e.PrizeName?(i("友情提示","奖品名称不能为空"),$("#prizeName_"+t).focus(),!1):""==e.Description?(i("友情提示","请填写奖品描述"),$("#desc_"+t).focus(),!1):""==e.PrizeCount||isNaN(e.PrizeCount)?(i("友情提示","奖品数量不能为空"),1==l.activetype?$("#ptnums_"+t).focus():2==l.activetype?$("#cpNums_"+t).focus():0==l.activetype&&$("#cmNums_"+t).focus(),!1):!0},t.selectPeople=function(){l.select=0},t.selectDay=function(){l.select=1},t.selectwhich=function(e){for(var a=-1,s=$(".ulSelect").children(),i=0;i<s.length;i++)if($(s[i]).hasClass("Select")){a=i;break}if(!(a>=0&&a!=e)||t.checkPrizeNotNull(t.awards[a],a)){if($(".ulSelect .Select").removeClass("Select"),$(".ulSelect tr:nth-child("+(e+1)+")").addClass("Select"),$(".ulSelect tr:nth-child("+(e+1)+")").css("color","#000"),$(".ulSelect tr:nth-child("+(e+1)+")").siblings().css("background-color","#fff"),$(".ulSelect tr:nth-child("+(e+1)+")").css("background","#1ab394"),$("#prizeName_"+(e+1)).focus(),$(".prizetype").css("display","block"),$(".prizetype").css("background","#1ab394"),0==e)$(".prizetype").css("top","36px");else if(1==e)$(".prizetype").css("top","92px");else{$(".prizetype").css("top",56*(e+1)-20+"px")}if(t.showaddwardalone=!0,t.inDex=e,t.checktype=function(){console.log(l.activetype),t.awards[t.inDex].AwardsType=l.activetype},t.whichcp=function(e){t.couponid=e.cardcoupon_id,t.awards[t.inDex].Value=t.couponid,t.awards[t.inDex].prizeContent=e.cardcoupon_name},l.activetype=t.awards[e].AwardsType,2==l.activetype)for(var r in t.coupons)t.coupons[r].cardcoupon_id==t.awards[e].Value&&(t.showcoupon=t.coupons[r]);t.cpNums=parseInt(t.awards[e].PrizeCount),t.ptnums=parseInt(t.awards[e].PrizeCount),t.ptNums=parseInt(t.awards[e].Value),t.cmNums=parseInt(t.awards[e].PrizeCount),o(function(){$(".ulSelect tr:nth-child("+(e+1)+")").addClass("Select"),$(".ulSelect tr:nth-child("+(e+1)+")").css("color","#000"),$(".ulSelect tr:nth-child("+(e+1)+")").siblings().css("background-color","#fff"),$(".ulSelect tr:nth-child("+(e+1)+")").css("background","#1ab394"),$("#prizeName_"+(e+1)).focus()},100)}},t.ctrladd=function(){if(console.log(t.awards.length),t.awards.length>=1){var e=t.inDex;2==l.activetype?(t.awards[e].PrizeCount=parseInt(t.cpNums),t.awards[e].Img="",t.awards[e].AwardsType=2,console.log(t.couponid),console.log(e),t.awards[e].Value=t.couponid):1==l.activetype?(t.awards[e].PrizeCount=parseInt(t.ptnums),t.awards[e].Img="",t.awards[e].AwardsType=1,t.awards[e].Value=parseInt(t.ptNums)):(t.awards[e].PrizeCount=parseInt(t.cmNums),t.awards[e].Img="",t.awards[e].AwardsType=0,t.awards[e].Value="",console.log(t.awards[e]))}},t.delmeslef=function(e){$(".prizetype").css("display","none"),t.awards.splice(e,1),0==e?$(".prizetype").css("display","none"):t.selectwhich(e-1)};var l=t.radioData={active:1,select:0,allow:0,receiveway:1,activetype:1};l.activetype=0==t.awards.length?4:1,t.addshakeBtn=function(){if(t.checkIsNull()){t.share_img_url=t.share_img_url[0];var e="";"无"!=t.buttonType.name&&(e=t.buttonType.name);var a={ThumbnailsPath:t.share_img_url,LotteryName:t.LotteryName,LotteryContent:t.LotteryContent,LotteryType:t.lotteryType,Status:l.active,MaxCount:t.count,LimitType:l.select,WinLimitType:l.allow,IsGetPrizeFromMobile:l.receiveway,ToolbarButton:e,UsePoints:t.ponits,StartTime:t.start_time,ShareImg:t.share_img_url,ShareDesc:t.sharedesc,EndTime:t.stop_time,Awards:t.awards};a=angular.toJson(a),console.log(a),s.addShake({JsonData:a},function(e){if(console.log(e),1==e.Status){var t="友情提示",a="添加活动成功";i(t,a),setTimeout(function(){history.go(-1)},1e3)}else i("友情提示",e.Msg)})}},t.checkIsNull=function(){return t.count=0==l.select?t.numOne:t.numTwo,""==t.LotteryName||void 0==t.LotteryName?(i("友情提示","请填写活动名称"),$("#shakename").focus(),!1):""==t.sharedesc||void 0==t.sharedesc?(i("友情提示","请填写描述"),$("#describe").focus(),!1):""==t.share_img_url||t.share_img_url==[]||void 0==t.share_img_url?(i("友情提示","请上传图片"),o(function(){document.body.scrollTop=$("#shakeimg").offset().top},2e3),!1):""==t.LotteryContent||void 0==t.LotteryContent?(i("友情提示","请填写介绍"),o(function(){document.body.scrollTop=$("#shakecontent").offset().top},2e3),!1):""==t.start_time||void 0==t.start_time?(i("友情提示","请选择开始时间"),$("#timestart").focus(),!1):""==t.stop_time||void 0==t.stop_time?(i("友情提示","请选择结束时间"),$("#timeend").focus(),!1):t.start_time>t.stop_time?(i("友情提示","开始时间不能大于结束时间"),$("#timestart").focus(),!1):""==t.count||void 0==t.count?(i("友情提示","参与次数不能为空"),0==l.select?$("#everyone").focus():$("#everyday").focus(),!1):t.awards.length>0&&0==t.checkPrizeNotNull(t.awards[t.awards.length-1],t.awards.length-1)?!1:!0},t.getNavChoose=function(){s.getNavChoose(function(e){if(console.log(e),e.status){var a={id:0,name:"无"};if(t.buttonTypes.push(a),e.result&&e.result.length){for(var o=0;o<e.result.length;o++){var s={id:o+1,name:e.result[o]};t.buttonTypes.push(s)}t.buttonType=t.buttonTypes[0]}}},function(e){})},t.getNavChoose()}e.$inject=["$rootScope","$scope","$stateParams","$timeout","mmpadminAPI","alertbox"],angular.module("mmpadmin").controller("addshakeCtrl",e)}(),function(){"use strict";function e(e,t,a){a.getScoreSetInfo({},function(t){console.log(t),e.scoreInfo=t},function(e){}),e.editScoreInfoBtn=function(){console.log(e.scoreInfo.order_amount),(void 0==e.scoreInfo.order_amount||void 0==e.scoreInfo.order_score||void 0==e.scoreInfo.exchange_score||void 0==e.scoreInfo.exchange_amount)&&t("友情提示","请检查配置信息填写完整性"),a.editScoreSetInfo({order_amount:e.scoreInfo.order_amount,order_score:e.scoreInfo.order_score,exchange_score:e.scoreInfo.exchange_score,exchange_amount:e.scoreInfo.exchange_amount},function(e){if(console.log(e),0==e.errcode){var a="友情提示",o="修改积分配置信息成功";t(a,o)}else t(e.errcode,e.errmsg)})}}e.$inject=["$scope","alertbox","mmpadminAPI"],angular.module("mmpadmin").controller("scoreSetInfoCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i){function l(){a.getRefundinfo({order_detail_id:t.detailID},function(t){e.refundinfo=t,console.log(t)},function(e){})}console.log(t.orderID),console.log(t.detailID);var r=e.vm={expressCompanys:[],expressCompany:"",oddnumbers:"",pmsTransfersAudit:!1};i.checkPms("PMS_TRANSFERSAUDIT",function(){r.pmsTransfersAudit=!0},function(){r.pmsTransfersAudit=!1}),a.getorderdetail({order_id:t.orderID},function(a){console.log(a),e.orderdata=a;for(var o in e.orderdata.product_list)e.orderdata.product_list[o].order_detail_id==t.detailID&&(e.orderdata.product_listOne=[e.orderdata.product_list[o]])},function(e){console.log(e)}),l(),a.getRefundnotes({order_detail_id:t.detailID},function(t){console.log(t),e.refundlogs=t.list,e.buyreturntimes=[];for(var a in e.refundlogs)"同意退款申请"==e.refundlogs[a].title?e.refundtime=e.refundlogs[a].time:"拒绝退款申请"==e.refundlogs[a].title?e.refundtime=e.refundlogs[a].time:"已经发货"==e.refundlogs[a].title?(e.buyreturntimes.push(e.refundlogs[a]),e.hasreturntime=e.buyreturntimes[0].time):"确认收货并退款"==e.refundlogs[a].title?e.actionreturntime=e.refundlogs[a].time:"关闭退款申请"==e.refundlogs[a].title&&(e.actionreturntime=e.refundlogs[a].time)},function(e){}),e.agreerefund=function(){$("#dealModal").modal("show"),e.agreetext=!0},e.dealRefund=function(){$("#dealModal").modal("show"),e.agreetext=!1},e.readexpressNumber=function(){$("#expressNumberModal").modal("show");var e={pageindex:1,pagesize:1e3};a.getExpressList(e,function(e){if(e){var t={express_company_id:"",express_company_name:"请选择物流公司"};e.list.unshift(t),r.expressCompanys=e.list,r.expressCompany=r.expressCompanys[0]}},function(e){console.log(e)})},e.agreepaymoney=function(){$("#dealModal").modal("show"),e.showgetrefund=!0},e.dealpaymoney=function(){$("#dealModal").modal("show"),e.showgetrefund=!1},e.startrefundBtn=function(){console.log(e.agreerefundAdd),a.agreeRefund({order_detail_id:t.detailID,refund_address:e.agreerefundAdd},function(e){console.log(e),0==e.errcode&&l()},function(e){console.log(e)})},e.refuserefundBtn=function(){console.log(e.refuserefundDes),a.refuseRefund({order_detail_id:t.detailID,refuse_reason:e.refuserefundDes},function(e){console.log(e),0==e.errcode?l():s("友情提示",e.errmsg)},function(e){console.log(e)})},e.requiregetrefundBtn=function(){a.agreeConfirmgoods({order_detail_id:t.detailID},function(e){console.log(e),0==e.errcode?l():s("友情提示",e.errmsg)},function(e){console.log(e)})},e.refusegetrefundBtn=function(){a.refuseConfirmgoods({order_detail_id:t.detailID},function(e){console.log(e),0==e.errcode?l():s("友情提示",e.errmsg)},function(e){console.log(e)})},e.conformreturnmoneyBtn=function(){a.agreeConfirmgoods({order_detail_id:t.detailID},function(e){console.log(e),0==e.errcode?l():s("友情提示",e.errmsg)},function(e){console.log(e)})},e.refusereturnmoneyBtn=function(){a.refuseRefund({order_detail_id:t.detailID,refuse_reason:e.refuserefundDes},function(e){console.log(e),0==e.errcode?l():s("友情提示",e.errmsg)},function(e){console.log(e)})},e.conformNumberBtn=function(){a.subitNumberBtn({action:"submitexpressinfo",order_detail_id:t.detailID,express_company_name:r.expressCompany.express_company_name,express_number:r.oddnumbers},function(e){0==e.errcode?l():s("友情提示",e.msg)},function(e){console.log(e)})}}e.$inject=["$scope","$stateParams","mmpadminAPI","$sce","alertbox","commService"],angular.module("mmpadmin").controller("refundCtrl",e)}(),function(){"use strict";function e(e,t,a){a.getPaySetInfo({},function(o){console.log(o),e.payInfo=o,e.editPayInfoBtn=function(){console.log(angular.toJson(e.payInfo)),a.editPaySetInfo({data:angular.toJson(e.payInfo)},function(e){if(console.log(e),0==e.errcode){var a="友情提示",o="修改支付配置信息成功";t(a,o)}else t(e.errcode,e.errmsg)})}},function(e){})}e.$inject=["$scope","alertbox","mmpadminAPI"],angular.module("mmpadmin").controller("paySetInfoCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i){a.getNavList({pageindex:1,pagesize:1,navigation_link_type:""},function(l){function r(){a.getNavList({pageindex:e.currentPage,pagesize:e.pagesize,navigation_link_type:e.navigation_link_type},function(t){console.log(t),e.navListData=t.list,e.totals=t.totalcount},function(e){console.log(e)})}function n(){i("友情提示","您确定删除幻灯片吗？","确定删除","取消删除",function(){e.ids=e.ids.toString(),","==e.ids.substring(e.ids.length-1,e.ids.length)&&(e.ids=e.ids.substring(e.ids,e.ids.length-1)),a.deleteNav({navigation_ids:e.ids},function(a){if(console.log(a),0==a.errcode){e.ids="";var o="友情提示",s="删除成功";t(o,s),r(),e.selectedall=!1}else t(a.errcode,a.errmsg)},function(e){console.log(e)})},function(){})}if(console.log(l),e.totals=l.totalcount,e.currentPage=""==o.pageID||void 0==o.pageID?1:parseInt(o.pageID),e.navigation_link_type=""===o.typeID||void 0===o.typeID?"":o.typeID,e.navLists=[{navigation_link_name:"全部",navigation_link_type:""},{navigation_link_name:"左侧导航",navigation_link_type:"left"},{navigation_link_name:"顶部导航",navigation_link_type:"top"},{navigation_link_name:"底部导航",navigation_link_type:"bottom"}],""!=o.typeID)for(var d in e.navLists)e.navLists[d].navigation_link_type==o.typeID&&(e.oneNav=e.navLists[d]);else e.oneNav=e.navLists[0];e.whichcategory=function(t){e.navigation_link_type=""!=t.navigation_link_type?t.navigation_link_type:"",e.currentPage=1,e.navListData=[],s.go("index.navList",{pageID:e.currentPage,typeID:e.navigation_link_type})},e.pagesize=10,e.navListData=[],r(),e.delNavBtn=function(t){e.ids=t.navigation_id,n()},e.delallNavBtn=function(){if(""!=e.ids)console.log(["$scope.ids",e.ids]),n();else{var a="友情提示",o="请至少选择一个导航";t(a,o)}},e.selectedall=!1,e.ids="",e.checkedall=function(){e.selectedall=!e.selectedall,e.ids="",angular.forEach(e.navListData,function(t){t.selected=e.selectedall,e.selectedall?(e.ids+=t.navigation_id+",",console.log(["$scope.ids",e.ids])):(e.ids="",console.log(["$scope.ids",e.ids]))})},e.selectme=function(t){t.selected=!t.selected,console.log(t.selected);var a=!0;e.navListData.filter(function(e){e.selected||(a=!1)}),e.selectedall=a,t.selected?(e.ids+=t.navigation_id+",",console.log(e.ids)):(e.ids=e.ids.replace(t.navigation_id+",",""),console.log(e.ids))};var c=e.pageData={pre_id:0,navigation_img:"",navigation_name:"",navigation_link:"",navigation_link_type:"",navigation_sort:""};e.addNavLists=[{navigation_link_name:"左侧导航",navigation_link_type:"left"},{navigation_link_name:"顶部导航",navigation_link_type:"top"},{navigation_link_name:"底部导航",navigation_link_type:"bottom"},{navigation_link_name:"自定义导航",navigation_link_type:"oem"}],e.addOneNav=e.addNavLists[0],c.navigation_link_type=e.addNavLists[0].navigation_link_type,e.changeCategory=function(t){"oem"==t.navigation_link_type?(e.showOemAdd=!0,c.navigation_link_type=""):(e.showOemAdd=!1,c.navigation_link_type=t.navigation_link_type)},e.addcardcouponBtn=function(){e.isAddcard=!0,e.showPicDom=!0,$("#dealModal").modal({backdrop:"static",keyboard:!1}),e.addOneNav=e.addNavLists[0],c.navigation_link_type=e.addNavLists[0].navigation_link_type,c.navigation_img="",c.navigation_name="",c.navigation_link="",c.navigation_sort="",document.onclick=function(t){var a=t.srcElement?t.srcElement:t.target;a.className.match("modal")&&a.className.match("inmodal")&&e.$apply(function(){c.navigation_img="",e.showPicDom=!1})}},e.editcardcouponBtn=function(t){e.isAddcard=!1,c.navigation_img=[t.navigation_img],c.navigation_img&&(e.showPicDom=!0),$("#dealModal").modal({backdrop:"static",keyboard:!1});for(var a in e.addNavLists)t.navigation_link_type==e.addNavLists[a].navigation_link_type?(e.addOneNav=e.addNavLists[a],c.navigation_link_type=e.addNavLists[a].navigation_link_type):(e.addOneNav=e.addNavLists[3],c.navigation_link_type=t.navigation_link_type,e.showOemAdd=!0);console.log(c.navigation_img),c.navigation_id=t.navigation_id,c.navigation_name=t.navigation_name,c.navigation_link=t.navigation_link,c.navigation_sort=t.navigation_sort,document.onclick=function(t){var a=t.srcElement?t.srcElement:t.target;a.className.match("modal")&&a.className.match("inmodal")&&e.$apply(function(){
c.navigation_img="",e.showPicDom=!1})}},e.addCouponBtn=function(){return""==c.navigation_name?void t("友情提示","请输入导航名称"):""==c.navigation_link?void t("友情提示","请输入导航链接"):""==c.navigation_img?void t("友情提示","请上传导航图片"):(c.navigation_img=c.navigation_img[0],""==c.navigation_sort&&(c.navigation_sort=0),void(1==e.isAddcard?a.addNav({data:encodeURIComponent(angular.toJson(c))},function(a){0==a.errcode&&(e.showPicDom=!1,t("友情提示","添加导航成功"),$("#dealModal").modal("hide"),r())}):a.editNav({data:encodeURIComponent(angular.toJson(c))},function(a){0==a.errcode&&(e.showPicDom=!1,t("友情提示","修改导航成功"),$("#dealModal").modal("hide"),r()),console.log(a)},function(e){})))}},function(e){}),e.pageChanged=function(){console.log(e.currentPage),s.go("index.navList",{pageID:e.currentPage})},e.clear=function(){$("#dealModal").modal("hide"),pageData.navigation_link_type=e.addNavLists[0].navigation_link_type,pageData.navigation_img="",pageData.navigation_name="",pageData.navigation_link="",pageData.navigation_sort=""}}e.$inject=["$scope","alertbox","mmpadminAPI","$stateParams","$state","alertconformbox"],angular.module("mmpadmin").controller("navListCtrl",e)}(),function(){"use strict";function e(e,t,a,o){function s(){n.isHideCustomize=window.location.href.match("localhost")||window.location.href.match("songhedev.comeoncloud.net")||o.isSonghe?!0:!1,l()}function i(e,t,a){a&&top.addTab(e,t)}function l(){t.getMarketingCenterRight(function(e){e.status?(n.keyList=e.result,r()):a("友情提示",e.msg)},function(e){a("友情提示",e.msg)})}function r(){for(var e=0;e<n.keyList.length;e++)"Pms_MarketingCenter_Coupons"==n.keyList[e]?n.rights.coupon=!0:"Pms_MarketingCenter_GroupBuy"==n.keyList[e]?n.rights.groupbuy=!0:"Pms_MarketingCenter_CrownFunding"==n.keyList[e]?n.rights.crownfunding=!0:"Pms_MarketingCenter_TimeLimit"==n.keyList[e]?n.rights.timelimit=!0:"Pms_MarketingCenter_Scratch"==n.keyList[e]?n.rights.scratch=!0:"Pms_MarketingCenter_Shake"==n.keyList[e]?n.rights.shake=!0:"Pms_MarketingCenter_GreetCard"==n.keyList[e]?n.rights.greetingcard=!0:"Pms_MarketingCenter_Game"==n.keyList[e]?n.rights.game=!0:"Pms_MarketingCenter_MicroShow"==n.keyList[e]?n.rights.microshow=!0:"Pms_MarketingCenter_Questionnaire"==n.keyList[e]?n.rights.questionnaire=!0:"Pms_MarketingCenter_Answer"==n.keyList[e]?n.rights.answer=!0:"Pms_MarketingCenter_VotingTopics"==n.keyList[e]?n.rights.votingtopics=!0:"Pms_MarketingCenter_VotingRank"==n.keyList[e]?n.rights.votingrank=!0:"Pms_MarketingCenter_Topics"==n.keyList[e]?n.rights.topics=!0:"Pms_MarketingCenter_MicroMonitoring"==n.keyList[e]?n.rights.micromonitoring=!0:"Pms_MarketingCenter_Forward"==n.keyList[e]?n.rights.forward=!0:"Pms_MarketingCenter_ForwardFans"==n.keyList[e]?n.rights.fans=!0:"Pms_MarketingCenter_DistributionProject"==n.keyList[e]?n.rights.business=!0:"Pms_MarketingCenter_LBSSignIn"==n.keyList[e]&&(n.rights.sign=!0)}{var n=e.vm={keyList:[],rights:{coupon:!1,groupbuy:!1,crownfunding:!1,timelimit:!1,scratch:!1,shake:!1,greetingcard:!1,game:!1,microshow:!1,questionnaire:!1,answer:!1,votingtopics:!1,votingrank:!1,topics:!1,micromonitoring:!1,forward:!1,fans:!1,business:!1,sign:!1},isHideCustomize:!0};e.vf={goToPage:i,getMarketingCenterRight:l,checkIsHasRight:r,init:s}}s()}e.$inject=["$scope","mmpadminAPI","alertbox","$rootScope"],angular.module("mmpadmin").controller("marketingCenterCtrl",e)}(),function(){"use strict";function e(e,t,a){e.userinfo={username:"",password:""},e.userlogin=function(){a.login("/user/login.ashx",e.userinfo,function(e){0===e.errcode?(console.log(["登录成功",e]),t.go("index.productList")):alert(e.errmsg)},function(e){console.log("登录失败")})},e.userlogout=function(){a.logout(function(e){alert("退出成功")},function(e){alert("退出出错")})}}e.$inject=["$scope","$state","mmpadminAPI"],angular.module("mmpadmin").controller("loginCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s,i){function l(){var e=document.getElementById("lineChartOne").getContext("2d"),t=document.getElementById("lineChartTwo").getContext("2d");C.myChartOne=new Chart(e),C.myChartTwo=new Chart(t),p(),u(),m(),g(),v(),P(),C.chartSelect=C.chartSelects[0],o(function(){C.rightHeight=$("#chartHeight").height()},200),i.islogin("",function(e){e.islogin&&(C.userInfo=e,7==C.userInfo.userType?C.isHide=!0:7!=C.userInfo.userType&&(C.isShow=!0))})}function r(){"one"==C.chartSelect.id?(C.myChartOne.Line(C.lineData,C.lineOptions),$("#lineChartOne").css("display","block"),$("#lineChartTwo").css("display","none"),C.rightHeight=$("#chartHeight").height()):(C.myChartTwo.Line(C.lineData,C.lineOptions),$("#lineChartOne").css("display","none"),$("#lineChartTwo").css("display","block"),C.rightHeight=$("#chartHeight").height())}function n(e){C.currIndex=e,c()}function d(){console.log(C.chartSelect.id),c()}function c(){C.baseLineData.labels="one"==C.chartSelect.id?C.dashboard.day_list_7:C.dashboard.day_list,C.baseLineData.datasets[0].label="新增访问量",C.baseLineData.datasets[0].data="one"==C.chartSelect.id?C.dashboard.visit_num_list_7:C.dashboard.visit_num_list,C.baseLineData.datasets[1].label="新增订单数",C.baseLineData.datasets[1].data="one"==C.chartSelect.id?C.dashboard.order_num_list_7:C.dashboard.order_num_list,C.baseLineData.datasets[2].label="注册用户",C.baseLineData.datasets[2].data="one"==C.chartSelect.id?C.dashboard.member_num_list_7:C.dashboard.member_num_list,C.baseLineData.datasets[3].label="新增访客",C.baseLineData.datasets[3].data="one"==C.chartSelect.id?C.dashboard.uv_num_list_7:C.dashboard.uv_num_list,C.baseLineData.datasets[4].label="公众号粉丝",C.baseLineData.datasets[4].data="one"==C.chartSelect.id?C.dashboard.fans_num_list_7:C.dashboard.fans_num_list;var e=angular.copy(C.baseLineData.datasets);C.lineData.labels=C.baseLineData.labels,C.lineData.datasets=[];for(var t=0;t<e.length;t++)t!=C.currIndex&&C.lineData.datasets.push(e[t]);C.lineData.datasets.push(e[C.currIndex]),console.log(C.lineData.datasets),r()}function p(){i.getDashboardData(function(e){if(e.result.day_list&&e.result.day_list.length>0)for(var t=0;t<e.result.day_list.length;t++)e.result.day_list[t]=a("date")(new Date(e.result.day_list[t]).getTime(),"MM-dd");e.result.day_list_7=e.result.day_list.slice(0,7).reverse(),e.result.visit_num_list_7=e.result.visit_num_list.slice(0,7).reverse(),e.result.order_num_list_7=e.result.order_num_list.slice(0,7).reverse(),e.result.member_num_list_7=e.result.member_num_list.slice(0,7).reverse(),e.result.uv_num_list_7=e.result.uv_num_list.slice(0,7).reverse(),e.result.fans_num_list_7=e.result.fans_num_list.slice(0,7).reverse(),e.result.day_list=e.result.day_list.reverse(),e.result.visit_num_list=e.result.visit_num_list.reverse(),e.result.order_num_list=e.result.order_num_list.reverse(),e.result.member_num_list=e.result.member_num_list.reverse(),e.result.uv_num_list=e.result.uv_num_list.reverse(),e.result.fans_num_list=e.result.fans_num_list.reverse(),C.dashboard=e.result,console.log(C.dashboard),c()},function(e){})}function u(){i.getUserAction({show_all:1},function(e){e.status?e.result&&e.result.length>0&&(C.userActions=e.result,C.userAction=C.userActions[0]):s("友情提示",e.msg)},function(e){s("友情提示",e.msg)})}function m(){i.getUserAccount({show_all:1,show_website_owner:1},function(e){e.status?e.result&&e.result.length>0&&(C.userAccounts=e.result,C.userAccount=C.userAccounts[0]):s("友情提示",e.msg)},function(e){s("友情提示",e.msg)})}function g(){i.getUserActionList({page:C.currentPage,rows:C.pagesize,user_id:void 0==C.userAccount.value?"":C.userAccount.value,action:void 0==C.userAction.value?"":C.userAction.value},function(e){if(C.totalItems=e.total,e.rows&&e.rows.length>0){for(var t=0;t<e.rows.length;t++){var a=e.rows[t].time;e.rows[t].time=a.substring(a.indexOf("(")+1,a.indexOf(")"))}C.userActionLists=e.rows}},function(e){s("友情提示",e.msg)})}function v(){i.getProductThreshold(function(e){e.status&&(C.taskCenter=e.result)})}function h(){console.log(C.currentPage),g()}function b(){C.currentPage=1,C.pagesize=10,C.totalItems=0,C.userActionLists=[],g()}function f(e){var t="";"/App/Cation/UserManage.aspx"==e?(t="会员管理",-1!=window.location.href.indexOf("jikuwifi.comeoncloud.net")||top.addTab(t,e)):"/customize/mmpadmin/index.aspx?hidemenu=1#/index/orderList"==e&&(t="订单管理",top.addTab(t,e))}function y(){var e="商品库存告急列表",t="/customize/mmpadmin/index.aspx?hidemenu=1#/index/productList/stockcount///";top.addTab(e,t)}function _(e,t){var a="订单管理",o="/customize/mmpadmin/index.aspx?hidemenu=1#/index/orderList?orderType="+e+"&orderStatus="+t;top.addTab(a,o)}function x(){var e="供应商渠道结算",t="/Admin/Mall/Settlement/SupplierChannel/SettlementList.aspx";top.addTab(e,t)}function w(e){var t="访问量明细";top.addTab(t,e)}function k(e){var t="会员管理";top.addTab(t,e)}function D(e){var t="访客明细管理";top.addTab(t,e)}function I(e,t){top.addTab(e,t)}function T(){$("#smsModal").modal("show")}function S(){if(!C.website.sms_remind_value)return void s("友情提示","请输入提醒值");if(!C.website.sms_remind_phones)return void s("友情提示","请输入提醒手机");if(!C.website.sms_remind_frequency.id)return void s("友情提示","请选择提醒频率");var e={sms_remind_value:C.website.sms_remind_value,sms_remind_phones:C.website.sms_remind_phones,sms_remind_frequency:C.website.sms_remind_frequency.id};i.updateSmsAccount(e,function(e){e.status?s("友情提示",e.msg):s("友情提示",e.msg)},function(e){s("友情提示",e.msg)})}function P(){i.getWebsiteInfo({},function(e){if(e.status){C.website=e.result;for(var t=0;t<C.noticeTimes.length;t++)C.noticeTimes[t].id==e.result.sms_remind_frequency&&(C.website.sms_remind_frequency=C.noticeTimes[t]);C.sms_account=e.result.sms_account,C.website.sms_is_open||(C.sms_account="未开通")}})}function L(){var e=""!=C.weixinBindDomain?C.weixinBindDomain:window.location.host;"sandbox.comeoncloud.net"!=e&&(e="comeoncloud.comeoncloud.net");var t="http://"+e+"/customize/shop/WxSmsPay.aspx?userid="+C.website.websiteowner;i.createQCode({code:t},function(e){C.qcodedata={qcode:e.result.qrcode_url,url:t}}),$("#qCodeModal").modal("show")}{var C=e.vm={currIndex:0,chartNum:0,myChart:{},userAction:{},userActions:[],userAccount:{},userAccounts:[],userInfo:{},qcodedata:{},weixinBindDomain:WEBSITE_CONFIG.weixin_bind_domain,sms_account:"",currentPage:1,pagesize:10,totalItems:0,userActionLists:[],website:{},noticeTimes:[{id:"0",name:"每天提醒一次"}],notice:"",chartSelect:{},chartSelects:[{id:"one",name:"最近7天"},{id:"two",name:"最近30天"}],taskCenter:{},isShow:!1,isHide:!1,rightHeight:0};e.vf={getDashboardData:p,showChart:r,selectTab:n,selectChart:d,getUserAction:u,getUserAccount:m,getUserActionList:g,pageChanged:h,userAccountChange:b,goToRelatedPage:f,goToBrowserPage:w,goToMemberPage:k,goToUVPage:D,gotoTabPage:I,gotoProductStock:v,setAccountNotice:T,setSmsAccount:S,rechargeQRCode:L,gotoOrderList:_,gotoSettlementList:x,gotoProductList:y}}C.website.sms_remind_frequency=C.noticeTimes[0],C.baseLineData={labels:["January","February","March","April","May","June","July"],datasets:[{label:"新增访问量",fillColor:"rgba(153,194,249,0.5)",strokeColor:"rgba(153,194,249,0.7)",pointColor:"rgba(153,194,249,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(26,179,148,1)",data:[12,32,133,42,42,54,32]},{label:"新增订单数",fillColor:"rgba(249,218,141,0.5)",strokeColor:"rgba(249,218,141,0.7)",pointColor:"rgba(249,218,141,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(26,179,148,1)",data:[48,48,60,39,56,37,30]},{label:"注册用户",fillColor:"rgba(243, 200, 169,0.5)",strokeColor:"rgba(243, 200, 169,1)",pointColor:"rgba(243, 200, 169,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:[65,59,40,51,36,25,40]},{label:"新增访客",fillColor:"rgba(200,235,160,0.5)",strokeColor:"rgba(200,235,160,1)",pointColor:"rgba(200,235,160,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:[65,59,40,51,36,25,40]},{label:"公众号粉丝",fillColor:"rgba(192, 226, 210,0.5)",strokeColor:"rgba(192, 226, 210,1)",pointColor:"rgba(192, 226, 210,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:[65,59,40,51,36,25,40]}]},C.lineData=angular.copy(C.baseLineData),C.lineOptions={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,showScale:!0,responsive:!0,multiTooltipTemplate:"<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>"},l()}e.$inject=["$scope","$state","$filter","$timeout","alertbox","mmpadminAPI"],angular.module("mmpadmin").controller("hometablepageCtrl",e)}(),function(){"use strict";function e(e,t,a,o){var s=e.pageFunc={},i=e.pageData={currentPage:1,pagesize:1e4,keyword:"",dataList:[],selectedall:!1,ids:"",dataJson:{express_company_id:"add",express_company_name:"",express_company_code:""}};s.getExpressList=function(){var e={pageindex:i.currentPage,pagesize:i.pagesize,keyword:i.keyword};o.getExpressList(e,function(e){e&&(console.log("快递列表",e),i.dataList=e.list,i.totalItems=e.totalcount)},function(e){console.log(e)})},s.delExpress=function(){t("友情提示","确定要删除吗？","确定","取消",function(){o.delExpress({express_company_ids:i.ids},function(e){0==e.errcode?(console.log("删除成功",e),i.ids="",s.getExpressList()):(console.log("删除失败",e),a("友情提示",e.errmsg))},function(e){console.log(e),a("友情提示",e.errmsg)})},function(){})},s.deleteSelectedBtn=function(){if(""!=i.ids)","==i.ids.substring(i.ids.length-1,i.ids.length)&&(i.ids=i.ids.substring(i.ids,i.ids.length-1)),console.log(["pageData.ids",i.ids]),s.delExpress();else{var e="友情提示",t="请至少选择一条需要删除的记录！";a(e,t)}},s.deleteSingleBtn=function(e){i.ids=e.express_company_id,s.delExpress()},s.selectRecord=function(e){e.selected=!e.selected,console.log(e.selected);var t=!0;i.dataList.filter(function(e){e.selected||(t=!1)}),i.selectedall=t,e.selected?(i.ids+=e.express_company_id+",",console.log(i.ids)):(i.ids=i.ids.replace(e.express_company_id+",",""),console.log(i.ids))},s.selectAll=function(){i.selectedall=!i.selectedall,i.ids="",angular.forEach(i.dataList,function(e){e.selected=i.selectedall,i.selectedall?(i.ids+=e.express_company_id+",",console.log(["pageData.ids",i.ids])):(i.ids="",console.log(["pageData.ids",i.ids]))})},s.ctrlSearch=function(e){console.log(["点击回车",e]),console.log(i.keyword);var t=window.event?e.keyCode:e.which;13===t&&(i.currentPage=1,i.dataList=[],s.getExpressList())},s.search=function(e){i.currentPage=1,i.dataList=[],s.getExpressList()},s.pageChanged=function(){console.log(i.currentPage),s.getExpressList()},s.updateExpress=function(){return""==i.dataJson.express_company_code?void a("友情提示","快递编码不能为空"):""==i.dataJson.express_company_name?void a("友情提示","快递名称不能为空"):void o.updateExpress({data:angular.toJson(i.dataJson)},function(e){0==e.errcode?(s.getExpressList(),i.dataJson={express_company_id:"add",express_company_name:"",express_company_code:""},$("#dealModal").modal("hide"),a("友情提示","修改保存成功")):a("友情提示",e.errmsg)},function(e){console.log(e),a("友情提示",e.errmsg)})},s.showAddExpress=function(e){"add"!=e&&(i.dataJson=e),$("#dealModal").modal({backdrop:"static",keyboard:!1})},s.addExpress=function(){return""==i.dataJson.express_company_code?void a("友情提示","快递编码不能为空"):""==i.dataJson.express_company_name?void a("友情提示","快递名称不能为空"):void o.addExpress({data:angular.toJson(i.dataJson)},function(e){0==e.errcode?($("#dealModal").modal("hide"),s.getExpressList(),i.dataJson={express_company_id:"add",express_company_name:"",express_company_code:""}):a("友情提示",e.errmsg)},function(e){a("友情提示",e.errmsg)})},s.clear=function(){$("#dealModal").modal("hide"),i.dataJson={express_company_id:"add",express_company_name:"",express_company_code:""}},s.init=function(){s.getExpressList()},s.init()}e.$inject=["$scope","alertconformbox","alertbox","mmpadminAPI"],angular.module("mmpadmin").controller("expressCtrl",e)}(),function(){"use strict";function e(e,t,a,o){function s(e,t){var a=_o+e;if("object"==typeof t){a+="?";for(var o in t)a+=o+"="+t[o]+"&";a=a.slice(0,a.length-1)}return a}function i(e,t){var a=xo+e;if("object"==typeof t){a+="?";for(var o in t)a+=o+"="+t[o]+"&";a=a.slice(0,a.length-1)}return a}function l(e,t){var a=_o+e;if("object"==typeof t){a+="?";for(var o in t)a+=o+"="+encodeURIComponent(t[o])+"&"}return a+"callback=JSON_CALLBACK"}function r(e,a,o){t.get(e).success(function(e,t,o,s){a(e,t,o,s)}).error(function(e,t,a,s){o&&o(e,t,a,s)})}function n(e,a,o,s){var i=_o+e;t.post(i,a).success(function(e,t,a,s){o(e,t,a,s)}).error(function(e,t,a,o){"function"==typeof s&&s(e,t,a,o)})}function d(e,a,o,s){var i=xo+e;t.post(i,a).success(function(e,t,a,s){o(e,t,a,s)}).error(function(e,t,a,o){"function"==typeof s&&s(e,t,a,o)})}function c(e,a,o){t.jsonp(e).success(function(e,t,o,s){a(e,t,o,s)}).error(function(e,t,a,s){o&&o(e,t,a,s)})}function p(e,t,a,o){var s=e,i={username:t.username,password:t.password};wo.get(wo.apiurl(s,i),a,o)}function u(e,t){var a="/user/loginout.ashx",o="";wo.get(wo.apiurl(a,o),e,t)}function m(t,a,o){var s=e.mainsiteurl+"/serv/pubapi.ashx?action=islogin";wo.get(s,a,o)}function g(e,t,a,o){var s=e,i={action:t.action,pageindex:1,pagesize:10,keyword:"",category_id:"",sort:"",is_onsale:"",is_promotion_product:""};angular.extend(i,t),wo.get(wo.apiurl(s,i),a,o)}function v(e,t,a,o){var s=e,i={action:t.action,product_id:t.product_id,promotion_price:t.promotion_price,promotion_count:t.promotion_count,promotion_start_timestamp:t.promotion_start_timestamp,promotion_stop_timestamp:t.promotion_stop_timestamp};wo.get(wo.apiurl(s,i),a,o)}function h(e,t,a,o){var s=e,i={action:t.action,product_ids:t.product_ids};wo.get(wo.apiurl(s,i),a,o)}function b(e,t,a,o){var s=e,i={action:t.action,pageindex:"number"==typeof t.pageindex?t.pageindex:1,pagesize:"number"==typeof t.pagesize?t.pagesize:10,keyword:"string"==typeof t.keyword?t.keyword:"",promotion_start_timestamp:"string"==typeof t.promotion_start_timestamp?t.promotion_start_timestamp:"",promotion_stop_timestamp:"string"==typeof t.promotion_stop_timestamp?t.promotion_stop_timestamp:""};wo.get(wo.apiurl(s,i),a,o)}function f(e,t,a,o){var s=e,i={action:t.action};wo.get(wo.apiurl(s,i),a,o)}function y(e,t,a){var o="/admin/mall/category/list.ashx",s={pageindex:"number"==typeof e.pageindex?e.pageindex:1,pagesize:"number"==typeof e.pagesize?e.pagesize:10,keyword:e.keyword,type:e.type};wo.get(wo.apiurl(o,s),t,a)}function _(e){var t="/admin/mall/category/list.ashx",a={pageindex:1,pagesize:1e4,type:e.type};return angular.extend(a,e),o(function(e,o){wo.get(wo.apiurl(t,a),e,o)})}function x(e,t,a){var o="/admin/mall/category/delete.ashx",s={category_ids:e.category_ids};wo.get(wo.apiurl(o,s),t,a)}function w(e,t,a){var o="/admin/mall/category/add.ashx",s={data:e.data};wo.get(wo.apiurl(o,s),t,a)}function k(e,t,a){var o="/admin/mall/category/update.ashx",s={data:e.data};wo.get(wo.apiurl(o,s),t,a)}function D(e,t,a){var o="/admin/mall/category/UpdateSort.ashx";wo.post(o,e,t,a)}function I(e,t,a){var o="/admin/mall/category/get.ashx",s={category_id:e.category_id};wo.get(wo.apiurl(o,s),t,a)}function T(e){var t="/admin/mall/category/get.ashx";return o(function(a,o){wo.get(wo.apiurl(t,e),a,o)})}function S(e,t,a,o){var s=e,i={action:t.action,pageindex:"number"==typeof t.pageindex?t.pageindex:1,pagesize:"number"==typeof t.pagesize?t.pagesize:10};angular.extend(i,t),wo.get(wo.apiurl(s,i),a,o)}function P(e,t,a,o){var s=e,i={action:t.action,tag_name:t.tag_name};wo.get(wo.apiurl(s,i),a,o)}function L(e,t,a,o){var s=e,i={action:t.action,tag_id:t.tag_id,tag_name:t.tag_name};wo.get(wo.apiurl(s,i),a,o)}function C(e,t,a,o){var s=e,i={action:t.action,tag_ids:t.tag_ids};wo.get(wo.apiurl(s,i),a,o)}function $(e,t,a,o){var s=e,i={action:t.action,product_ids:t.product_ids,field:t.field,value:t.value};wo.get(wo.apiurl(s,i),a,o)}function A(e,t,a){var o="/admin/mall/productproperty.ashx",s={action:"add",property_name:e.property_name};wo.get(wo.apiurl(o,s),t,a)}function B(e,t,a){var o="/admin/mall/productproperty.ashx",s={action:"update",property_id:e.property_id,property_name:e.property_name};wo.get(wo.apiurl(o,s),t,a)}function z(e,t,a){var o="/admin/mall/productproperty.ashx",s={action:"delete",property_id:e.property_id};wo.get(wo.apiurl(o,s),t,a)}function E(e,t,a){var o="/admin/mall/productproperty.ashx",s={action:e.action};wo.get(wo.apiurl(o,s),t,a)}function R(e,t,a){var o="/admin/mall/productpropertyvalue.ashx",s={action:"add",property_id:e.property_id,property_value_name:e.property_value_name};wo.get(wo.apiurl(o,s),t,a)}function M(e,t,a){var o="/admin/mall/productpropertyvalue.ashx",s={action:"update",property_id:e.property_id,property_value_id:e.property_value_id,property_value_name:e.property_value_name};wo.get(wo.apiurl(o,s),t,a)}function N(e,t,a){var o="/admin/mall/productpropertyvalue.ashx",s={action:"delete",property_value_id:e.property_value_id};wo.get(wo.apiurl(o,s),t,a)}function F(e,t,a){var o="/admin/mall/productpropertyvalue.ashx",s={action:e.action,property_id:e.property_id};wo.get(wo.apiurl(o,s),t,a)}function O(e,t,a){var o="/admin/mall/product.ashx",s={action:e.action,data:e.data};wo.post(o,s,t,a)}function j(e,t,a){var o="/admin/mall/product.ashx",s={action:e.action,product_id:e.product_id};wo.post(o,s,t,a)}function U(e,t,a){var o="/admin/mall/cardcoupon.ashx",s={action:e.action,pageindex:"number"==typeof e.pageindex?e.pageindex:1,pagesize:"number"==typeof e.pagesize?e.pagesize:10};wo.post(o,s,t,a)}function V(e,t,a){var o="/admin/mall/orderstatus.ashx",s={action:e.action};wo.get(wo.apiurl(o,s),t,a)}function H(e,t,a){var o="/admin/mall/order.ashx",s={action:e.action,pageindex:"number"==typeof e.pageindex?e.pageindex:1,pagesize:"number"==typeof e.pagesize?e.pagesize:10,keyword:"string"==typeof e.keyword?e.keyword:"",order_status:"string"==typeof e.order_status?e.order_status:"",order_type:"number"==typeof e.order_type?e.order_type:"",group_buy_status:"number"==typeof e.group_buy_status?e.group_buy_status:"",gift_order_type:"number"==typeof e.gift_order_type?e.gift_order_type:"",supplier_userid:e.supplier_userid,channel_user_id:e.channel_user_id,distribution_owner:e.distribution_owner,group_buy_type:"string"==typeof e.group_buy_type?e.group_buy_type:"",key_type:"number"==typeof e.key_type?e.key_type:"",column_sort:"number"==typeof e.column_sort?e.column_sort:""};wo.get(wo.apiurl(o,s),t,a)}function J(e,t,a){var o="/admin/mall/order.ashx",s={action:"updateexpress",order_id:e.order_id,express_company_code:e.express_company_code,express_company_name:e.express_company_name,express_number:e.express_number};wo.get(wo.apiurl(o,s),t,a)}function q(e,t,a){var o="/admin/mall/order.ashx",s={action:"update",order_id:e.order_id,order_status:e.order_status};wo.post(o,s,t,a)}function W(e,t,a){var o="/admin/mall/order.ashx",s={action:"UpdateRemark",order_id:e.order_id,remark:e.remark};wo.post(o,s,t,a)}function G(e,t,a){var o="/admin/mall/order.ashx",s={action:"updatedistributionoffline",order_id:e.order_id,order_status:e.order_status};wo.post(o,s,t,a)}function X(e,t,a){var o="/admin/mall/order.ashx",s={action:"get",order_id:e.order_id};wo.post(o,s,t,a)}function Q(e,t,a){var o="/admin/crowdfund/order.ashx",s={action:"list",pageindex:"number"==typeof e.pageindex?e.pageindex:1,pagesize:"number"==typeof e.pagesize?e.pagesize:10,order_status:"string"==typeof e.order_status?e.order_status:""};wo.get(wo.apiurl(o,s),t,a)}function Z(e,t,a){var o="/admin/crowdfund/order.ashx",s={action:"get",order_id:e.order_id};wo.post(o,s,t,a)}function K(e,t,a){var o="/admin/crowdfund/order.ashx",s={action:"UpdateDelivery",order_id:e.order_id,express_company_code:e.express_company_code,express_company_name:e.express_company_name,express_number:e.express_number};wo.post(o,s,t,a)}function Y(e,t,a){var o="/admin/crowdfund/order.ashx",s={action:"UpdateOrderStatus",order_id:e.order_id,order_status:e.order_status};wo.post(o,s,t,a)}function ee(e,t,a){var o="/admin/mall/freighttemplate.ashx",s={action:e.action};wo.get(wo.apiurl(o,s),t,a)}function te(e,t){var a="/mall/area.ashx",o={action:"provinces"};wo.get(wo.apiurl(a,o),e,t)}function ae(e,t,a){var o="/mall/area.ashx",s={action:"cities",province_code:e.province_code};wo.get(wo.apiurl(o,s),t,a)}function oe(e,t,a){var o="/mall/area.ashx",s={action:"districts",city_code:e.city_code};wo.get(wo.apiurl(o,s),t,a)}function se(e,t){var a="/mall/area.ashx",o={action:"All"};wo.get(wo.apiurl(a,o),e,t)}function ie(e,t,a){var o="/admin/mall/promotionactivity.ashx",s={action:e.action,data:e.data,promotion_activity_ids:e.promotion_activity_ids};wo.get(wo.apiurl(o,s),t,a)}function le(e,t,a){var o="/admin/mall/promotionactivity.ashx",s={action:e.action,data:e.data,pageindex:"number"==typeof e.pageindex?e.pageindex:1,pagesize:"number"==typeof e.pagesize?e.pagesize:10};wo.get(wo.apiurl(o,s),t,a)}function re(e,t,a){var o="/admin/mall/promotionactivityproduct.ashx",s={action:e.action,pageindex:e.pageindex,pagesize:e.pagesize,promotion_activity_id:e.promotion_activity_id};wo.get(wo.apiurl(o,s),t,a)}function ne(e,t,a){var o="/admin/mall/promotionactivityproduct.ashx",s={action:e.action,promotion_activity_id:e.promotion_activity_id,product_ids:e.product_ids};wo.get(wo.apiurl(o,s),t,a)}function de(e,t,a){var o="/admin/mall/promotionactivityproduct.ashx",s={action:e.action,promotion_activity_id:e.promotion_activity_id,product_id:e.product_id};wo.get(wo.apiurl(o,s),t,a)}function ce(e,t,a){var o="/admin/mall/promotionactivityproduct.ashx",s={action:e.action,product_id:e.product_id};wo.get(wo.apiurl(o,s),t,a)}function pe(e,t,a){var o="/admin/mall/promotionactivityproduct.ashx",s={action:e.action,data:e.data};wo.post(o,s,t,a)}function ue(e,t,a){var o="/admin/mall/freighttemplate.ashx",s={action:"add",data:e.data};wo.post(o,s,t,a)}function me(e,t,a){var o="/admin/mall/freighttemplate.ashx",s={action:"delete",freight_template_id:e.freight_template_id};wo.get(wo.apiurl(o,s),t,a)}function ge(e,t,a){var o="/admin/mall/freighttemplate.ashx",s={action:"get",freight_template_id:e.freight_template_id};wo.get(wo.apiurl(o,s),t,a)}function ve(e,t,a){var o="/admin/mall/freighttemplate.ashx",s={action:"update",data:e.data};wo.post(o,s,t,a)}function he(e,t,a){var o="/admin/mall/refund.ashx",s={action:"get",order_detail_id:e.order_detail_id};wo.post(o,s,t,a)}function be(e,t,a){var o="/admin/mall/refund.ashx",s={action:"log",order_detail_id:e.order_detail_id};wo.post(o,s,t,a)}function fe(e,t,a){var o="/admin/mall/refund.ashx",s={action:"agreeandsubmitrefundaddress",order_detail_id:e.order_detail_id,refund_address:e.refund_address};wo.post(o,s,t,a)}function ye(e,t,a){var o="/admin/mall/refund.ashx",s={action:"refuseapply",order_detail_id:e.order_detail_id,refuse_reason:e.refuse_reason};wo.post(o,s,t,a)}function _e(e,t,a){var o="/admin/mall/refund.ashx",s={action:"refusereceiptconfirm",order_detail_id:e.order_detail_id};wo.post(o,s,t,a)}function xe(e,t,a){var o="/admin/mall/refund.ashx",s={action:"receiptconfirm",order_detail_id:e.order_detail_id};wo.post(o,s,t,a)}function we(e,t,a){var o="/admin/mall/productpropertyvalue.ashx",s={action:"add",property_id:e.property_id,property_value_name:e.property_value_name};wo.post(o,s,t,a)}function ke(e,t,a){var o="/admin/crowdfund/crowdfund.ashx",s={action:"list",pageindex:"number"==typeof e.pageindex?e.pageindex:1,pagesize:"number"==typeof e.pagesize?e.pagesize:10,keyword:"string"==typeof e.keyword?e.keyword:"",crowdfund_type:"string"==typeof e.crowdfund_type?e.crowdfund_type:""};wo.post(o,s,t,a)}function De(e,t,a){var o="/admin/crowdfund/crowdfund.ashx",s={action:"delete",crowdfund_ids:e.crowdfund_ids};wo.post(o,s,t,a)}function Ie(e,t,a){var o="/admin/crowdfund/crowdfund.ashx",s={action:"get",crowdfund_id:e.crowdfund_id};wo.post(o,s,t,a)}function Te(e,t,a){var o="/admin/company/company.ashx",s={action:"list",pageindex:"number"==typeof e.pageindex?e.pageindex:1,pagesize:"number"==typeof e.pagesize?e.pagesize:10,keyword:"string"==typeof e.keyword?e.keyword:""};wo.get(wo.apiurl(o,s),t,a)}function Se(e,t,a){var o="/admin/company/company.ashx",s={action:"delete",company_ids:e.company_ids};wo.post(o,s,t,a)}function Pe(e,t,a){var o="/admin/company/company.ashx",s={action:"add",data:e.data};wo.post(o,s,t,a)}function Le(e,t,a){var o="/admin/company/company.ashx",s={action:"get",company_id:e.company_id};wo.post(o,s,t,a)}function Ce(e,t,a){var o="/admin/company/company.ashx",s={action:"update",data:e.data};wo.post(o,s,t,a)}function $e(e,t,a){var o="/admin/crowdfund/crowdfund.ashx",s={action:"add",data:e.data};wo.post(o,s,t,a)}function Ae(e,t,a){var o="/admin/crowdfund/crowdfund.ashx",s={action:"get",crowdfund_id:e.crowdfund_id};wo.get(wo.apiurl(o,s),t,a)}function Be(e,t,a){var o="/admin/crowdfund/crowdfund.ashx",s={action:"update",data:e.data};wo.post(o,s,t,a)}function ze(e,t,a){var o="/admin/user/level/list.ashx";wo.get(wo.apiurl(o,e),t,a)}function Ee(e,t,a){var o="/admin/user/level/get.ashx";wo.get(wo.apiurl(o,e),t,a)}function Re(e,t,a){var o="/admin/user/level/add.ashx";wo.post(o,e,t,a)}function Me(e,t,a){var o="/admin/user/level/update.ashx";wo.post(o,e,t,a)}function Ne(e,t,a){var o="/admin/user/level/delete.ashx";wo.get(wo.apiurl(o,e),t,a)}function Fe(e,t,a){var o="/admin/crowdfund/Category/list.ashx";wo.get(wo.apiurl(o,e),t,a)}function Oe(e,t,a){var o="/admin/crowdfund/Category/add.ashx";wo.post(o,e,t,a)}function je(e,t,a){var o="/admin/crowdfund/Category/update.ashx";wo.post(o,e,t,a)}function Ue(e,t,a){var o="/admin/crowdfund/Category/delete.ashx";wo.get(wo.apiurl(o,e),t,a)}function Ve(e,t,a){var o="/admin/express/add.ashx";wo.post(o,e,t,a)}function He(e,t,a){var o="/admin/express/update.ashx";wo.post(o,e,t,a)}function Je(e,t,a){var o="/admin/express/delete.ashx";wo.get(wo.apiurl(o,e),t,a)}function qe(e,t,a){var o="/admin/express/list.ashx";wo.get(wo.apiurl(o,e),t,a)}function We(e,t,a){var o="/admin/mall/cardcoupon.ashx",s={action:"list",pageindex:"number"==typeof e.pageindex?e.pageindex:1,pagesize:"number"==typeof e.pagesize?e.pagesize:10,cardcoupon_type:"number"==typeof e.cardcoupon_type?e.cardcoupon_type:""};wo.get(wo.apiurl(o,s),t,a)}function Ge(e,t,a){var o="/admin/mall/cardcoupon.ashx",s={action:"delete",cardcoupon_ids:e.cardcoupon_ids};wo.get(wo.apiurl(o,s),t,a)}function Xe(e,t,a){var o="/admin/mall/cardcoupon.ashx",s={action:"add",data:e.data};wo.get(wo.apiurl(o,s),t,a)}function Qe(e,t,a){var o="/admin/mall/cardcoupon.ashx",s={action:"update",data:e.data};wo.get(wo.apiurl(o,s),t,a)}function Ze(e,t,a){var o="/admin/mall/cardcoupon.ashx",s={action:"sendbyuserids",cardcoupon_id:e.cardcoupon_id,user_ids:e.id};wo.get(wo.apiurl(o,s),t,a)}function Ke(e,t,a){var o="/admin/mall/cardcoupon.ashx",s={action:"sendbyuserids",cardcoupon_id:e.cardcoupon_id,user_ids:e.phone};wo.get(wo.apiurl(o,s),t,a)}function Ke(e,t,a){var o="/admin/mall/cardcoupon.ashx",s={action:"sendbyusertags",cardcoupon_id:e.cardcoupon_id,tags:e.tags};wo.get(wo.apiurl(o,s),t,a)}function Ye(e,t,a){var o="/admin/mall/cardcoupon.ashx",s={action:"sendrecordlist",cardcoupon_id:e.cardcoupon_id,pageindex:"number"==typeof e.pageindex?e.pageindex:1,pagesize:"number"==typeof e.pagesize?e.pagesize:10};wo.get(wo.apiurl(o,s),t,a)}function et(e,t,a){var o="/admin/payconfig/get.ashx",s={};wo.get(wo.apiurl(o,s),t,a)}function tt(e,t,a){var o="/admin/payconfig/update.ashx",s={data:e.data};wo.get(wo.apiurl(o,s),t,a)}function at(e,t,a){var o="/admin/mall/score/get.ashx",s={};wo.get(wo.apiurl(o,s),t,a)}function ot(e,t,a){var o="/admin/mall/score/update.ashx",s={order_amount:"number"==typeof e.order_amount?e.order_amount:0,order_score:"number"==typeof e.order_score?e.order_score:0,exchange_amount:"number"==typeof e.exchange_amount?e.exchange_amount:0,exchange_score:"number"==typeof e.exchange_score?e.exchange_score:0};wo.get(wo.apiurl(o,s),t,a)}function st(e,t,a){var o="/admin/mall/navigation/list.ashx",s={pageindex:"number"==typeof e.pageindex?e.pageindex:1,pagesize:"number"==typeof e.pagesize?e.pagesize:10,navigation_link_type:"string"==typeof e.navigation_link_type?e.navigation_link_type:""};wo.get(wo.apiurl(o,s),t,a)}function it(e,t,a){var o="/admin/mall/navigation/delete.ashx",s={navigation_ids:e.navigation_ids};wo.get(wo.apiurl(o,s),t,a)}function lt(e,t,a){var o="/admin/mall/navigation/add.ashx",s={data:e.data
};wo.get(wo.apiurl(o,s),t,a)}function rt(e,t,a){var o="/admin/mall/navigation/update.ashx",s={data:e.data};wo.get(wo.apiurl(o,s),t,a)}function nt(e,t,a){var o="/admin/mall/slide/list.ashx",s={pageindex:"number"==typeof e.pageindex?e.pageindex:1,pagesize:"number"==typeof e.pagesize?e.pagesize:10,keyword:"string"==typeof e.keyword?e.keyword:""};wo.get(wo.apiurl(o,s),t,a)}function dt(e,t,a){var o="/admin/mall/slide/listall.ashx",s=e;wo.get(wo.apiurl(o,s),t,a)}function ct(e,t,a){var o="/admin/mall/slide/getbytype.ashx",s={slide_type:e.slide_type};wo.get(wo.apiurl(o,s),t,a)}function pt(e,t,a){var o="/admin/mall/slide/updatebytype.ashx",s={data:e.data};wo.post(o,s,t,a)}function ut(e,t,a){var o="/admin/mall/slide/delete.ashx",s={slide_ids:e.slide_ids};wo.get(wo.apiurl(o,s),t,a)}function mt(e,t,a){var o="/admin/mall/slide/add.ashx",s={data:e.data};wo.get(wo.apiurl(o,s),t,a)}function gt(e,t,a){var o="/admin/mall/slide/update.ashx",s={data:e.data};wo.get(wo.apiurl(o,s),t,a)}function vt(e,t,a){var o="/admin/activity/category/list.ashx",s={pageindex:"number"==typeof e.pageindex?e.pageindex:1,pagesize:"number"==typeof e.pagesize?e.pagesize:10,keyword:"string"==typeof e.keyword?e.keyword:""};wo.get(wo.apiurl(o,s),t,a)}function ht(e,t,a){var o="/admin/activity/category/delete.ashx",s={category_ids:e.category_ids};wo.get(wo.apiurl(o,s),t,a)}function bt(e,t,a){var o="/admin/activity/category/add.ashx",s={data:e.data};wo.get(wo.apiurl(o,s),t,a)}function ft(e,t,a){var o="/admin/activity/category/update.ashx",s={data:e.data};wo.get(wo.apiurl(o,s),t,a)}function yt(e,t,a){var o="/admin/activity/list.ashx",s={pageindex:"number"==typeof e.pageindex?e.pageindex:1,pagesize:"number"==typeof e.pagesize?e.pagesize:10,keyword:"string"==typeof e.keyword?e.keyword:"",activity_sort:"string"==typeof e.activity_sort?e.activity_sort:"",category_id:"string"==typeof e.category_id?e.category_id:""};wo.get(wo.apiurl(o,s),t,a)}function _t(e,t,a){var o="/admin/activity/delete.ashx",s={activity_ids:e.activity_ids};wo.get(wo.apiurl(o,s),t,a)}function xt(e,t,a){var o="/admin/activity/add.ashx",s={data:e.data};wo.post(o,s,t,a)}function wt(e,t,a){var o="/admin/activity/update.ashx",s={data:e.data};wo.post(o,s,t,a)}function kt(e,t,a){var o="/admin/activity/get.ashx",s={activity_id:e.activity_id};wo.get(wo.apiurl(o,s),t,a)}function Dt(e,t,a){var o="/admin/article/category/list.ashx",s={pageindex:"number"==typeof e.pageindex?e.pageindex:1,pagesize:"number"==typeof e.pagesize?e.pagesize:10,keyword:"string"==typeof e.keyword?e.keyword:""};wo.get(wo.apiurl(o,s),t,a)}function It(e,t,a){var o="/admin/article/category/delete.ashx",s={category_ids:e.category_ids};wo.get(wo.apiurl(o,s),t,a)}function Tt(e,t,a){var o="/admin/article/category/add.ashx",s={data:e.data};wo.get(wo.apiurl(o,s),t,a)}function St(e,t,a){var o="/admin/article/category/update.ashx",s={data:e.data};wo.get(wo.apiurl(o,s),t,a)}function Pt(e,t,a){var o="/admin/article/list.ashx",s={pageindex:"number"==typeof e.pageindex?e.pageindex:1,pagesize:"number"==typeof e.pagesize?e.pagesize:10,keyword:"string"==typeof e.keyword?e.keyword:"",article_tags:e.article_tags,category_id:e.category_id};wo.get(wo.apiurl(o,s),t,a)}function Lt(e,t,a){var o="/admin/article/delete.ashx",s={article_ids:e.article_ids};wo.get(wo.apiurl(o,s),t,a)}function Ct(e,t,a){var o="/admin/article/add.ashx",s={data:e.data};wo.post(o,s,t,a)}function $t(e,t,a){var o="/admin/article/get.ashx",s={article_id:e.article_id};wo.get(wo.apiurl(o,s),t,a)}function At(e,t,a){var o="/admin/article/update.ashx",s={data:e.data};wo.post(o,s,t,a)}function Bt(e,t,a){var o="/admin/mall/slide/addbatch.ashx",s={data:e.data};wo.post(o,s,t,a)}function zt(e,t,a){var o="/admin/user/followers/list.ashx",s={pageindex:"number"==typeof e.pageindex?e.pageindex:1,pagesize:"number"==typeof e.pagesize?e.pagesize:10,keyword:"string"==typeof e.keyword?e.keyword:""};wo.get(wo.apiurl(o,s),t,a)}function Et(e,t,a){var o="/admin/user/followers/updatefanscount.ashx",s={};wo.get(wo.apiurl(o,s),t,a)}function Rt(e,t,a){var o="/admin/user/list.ashx",s={pageindex:"number"==typeof e.pageindex?e.pageindex:1,pagesize:"number"==typeof e.pagesize?e.pagesize:10,keyword:"string"==typeof e.keyword?e.keyword:"",tag_names:"string"==typeof e.tag_names?e.tag_names:"",distribution:"string"==typeof e.distribution?e.distribution:"",user_name:"string"==typeof e.user_name?e.user_name:"",name_wxname:"string"==typeof e.name_wxname?e.name_wxname:""};wo.get(wo.apiurl(o,s),t,a)}function Mt(e,t,a){var o="/Handler/App/CationHandler.ashx",s={action:"QueryWebsiteUserDistributionOnLine",page:"number"==typeof e.pageindex?e.pageindex:1,rows:"number"==typeof e.pagesize?e.pagesize:10,keyword:"string"==typeof e.keyword?e.keyword:"",AddSystemUser:"1"};wo.get(wo.other_apiurl(o,s),t,a)}function Nt(e,t,a){var o="/admin/user/AddScore.ashx",s={autoid:"number"==typeof e.autoid?e.autoid:0,total_score:"number"==typeof e.total_score?e.total_score:0};wo.get(wo.apiurl(o,s),t,a)}function Ft(e,t,a){var o="/admin/user/update.ashx",s={data:e.data};wo.get(wo.apiurl(o,s),t,a)}function Ot(e,t,a){var o="/admin/vote/list.ashx",s={pageindex:"number"==typeof e.pageindex?e.pageindex:1,pagesize:"number"==typeof e.pagesize?e.pagesize:10,keyword:"string"==typeof e.keyword?e.keyword:""};wo.get(wo.apiurl(o,s),t,a)}function jt(e,t,a){var o="/admin/vote/delete.ashx",s={vote_ids:e.vote_ids};wo.get(wo.apiurl(o,s),t,a)}function Ut(e,t,a){var o="/admin/vote/add.ashx",s={data:e.data};wo.post(o,s,t,a)}function Vt(e,t,a){var o="/admin/vote/get.ashx",s={vote_id:e.vote_id};wo.get(wo.apiurl(o,s),t,a)}function Ht(e,t,a){var o="/admin/vote/update.ashx",s={data:e.data};wo.post(o,s,t,a)}function Jt(e,t,a){var o="/admin/vote/voteobject/list.ashx",s={vote_id:e.vote_id,pageindex:"number"==typeof e.pageindex?e.pageindex:1,pagesize:"number"==typeof e.pagesize?e.pagesize:10,keyword:"string"==typeof e.keyword?e.keyword:"",sort:"string"==typeof e.sort?e.sort:"",vote_object_status:"number"==typeof e.vote_object_status?e.vote_object_status:""};wo.get(wo.apiurl(o,s),t,a)}function qt(e,t,a){var o="/admin/vote/voteobject/delete.ashx",s={vote_object_ids:e.vote_object_ids};wo.get(wo.apiurl(o,s),t,a)}function Wt(e,t,a){var o="/admin/vote/deletelog.ashx",s={vote_id:e.vote_id};wo.get(wo.apiurl(o,s),t,a)}function Gt(e,t,a){var o="/admin/vote/voteobject/get.ashx",s={vote_object_id:e.vote_object_id};wo.get(wo.apiurl(o,s),t,a)}function Xt(e,t,a){var o="/admin/vote/voteobject/add.ashx",s={data:e.data};wo.post(o,s,t,a)}function Qt(e,t,a){var o="/admin/vote/voteobject/update.ashx",s={data:e.data};wo.post(o,s,t,a)}function Zt(e,t,a){var o="/admin/activity/fieldmap/list.ashx",s={activity_id:e.activity_id};wo.get(wo.apiurl(o,s),t,a)}function Kt(e,t,a){var o="/admin/activity/fieldmap/delete.ashx",s={activity_id:e.activity_id,field_index:e.field_index};wo.get(wo.apiurl(o,s),t,a)}function Yt(e,t,a){var o="/admin/activity/fieldmap/add.ashx",s={data:e.data};wo.post(o,s,t,a)}function ea(e,t,a){var o="/admin/activity/fieldmap/update.ashx",s={data:e.data};wo.get(wo.apiurl(o,s),t,a)}function ta(e,t,a){var o="/admin/activity/setaccesslevel.ashx",s={activity_ids:e.activity_ids,access_level:"number"==typeof e.access_level?e.access_level:0};wo.get(wo.apiurl(o,s),t,a)}function aa(e,t,a){var o="/admin/activity/setcategory.ashx",s={activity_ids:e.activity_ids,category_id:"number"==typeof e.category_id?e.category_id:0};wo.get(wo.apiurl(o,s),t,a)}function oa(e,t,a){var o="/admin/article/setaccesslevel.ashx",s={activity_ids:e.activity_ids,access_level:"number"==typeof e.access_level?e.access_level:0};wo.get(wo.apiurl(o,s),t,a)}function sa(e,t,a){var o="/admin/article/SetCategory.ashx",s={activity_ids:e.activity_ids,category_id:"number"==typeof e.category_id?e.category_id:0};wo.get(wo.apiurl(o,s),t,a)}function ia(e,t,a){var o="/admin/user/membertag/list.ashx",s={pageindex:"number"==typeof e.pageindex?e.pageindex:1,pagesize:"number"==typeof e.pagesize?e.pagesize:10,keyword:"string"==typeof e.keyword?e.keyword:""};wo.get(wo.apiurl(o,s),t,a)}function la(e,t,a){var o="/admin/user/membertag/get.ashx",s={tag_id:e.tag_id};wo.get(wo.apiurl(o,s),t,a)}function ra(e,t,a){var o="/admin/user/membertag/add.ashx",s={data:e.data};wo.post(o,s,t,a)}function na(e,t,a){var o="/admin/user/membertag/update.ashx",s={data:e.data};wo.post(o,s,t,a)}function da(e,t,a){var o="/admin/user/membertag/delete.ashx",s={tag_ids:e.tag_ids};wo.post(o,s,t,a)}function ca(e,t,a){var o="/admin/user/settag.ashx",s={autoids:e.autoids,tag_names:e.tag_names};wo.post(o,s,t,a)}function pa(e,t,a){var o="/admin/user/setlevel.ashx",s={autoid:e.autoid,user_access_level:e.user_access_level};wo.post(o,s,t,a)}function ua(e,t,a){var o="/admin/mall/slide/delete.ashx",s={slide_ids:e.slide_ids};wo.post(o,s,t,a)}function ma(e,t,a){var o="/admin/user/account/list.ashx",s={pageindex:"number"==typeof e.pageindex?e.pageindex:1,pagesize:"number"==typeof e.pagesize?e.pagesize:10,keyword:"string"==typeof e.keyword?e.keyword:""};wo.get(wo.apiurl(o,s),t,a)}function ga(e,t,a){var o="/admin/user/account/enableaccount.ashx",s={autoids:e.autoids};wo.get(wo.apiurl(o,s),t,a)}function va(e,t,a){var o="/admin/user/account/disableaccount.ashx",s={autoids:e.autoids};wo.get(wo.apiurl(o,s),t,a)}function ha(e,t,a){var o="/admin/user/account/add.ashx",s={data:e.data};wo.post(o,s,t,a)}function ba(e,t,a){var o="/admin/user/account/update.ashx",s={data:e.data};wo.post(o,s,t,a)}function fa(e,t,a){var o="/admin/appointment/list.ashx",s={pageindex:"number"==typeof e.pageindex?e.pageindex:1,pagesize:"number"==typeof e.pagesize?e.pagesize:10};wo.post(o,s,t,a)}function ya(e,t,a){var o="/admin/appointment/get.ashx",s={activity_id:e.activity_id};wo.post(o,s,t,a)}function _a(e,t,a){var o="/admin/user/get.ashx",s={autoid:e.autoid};wo.post(o,s,t,a)}function xa(e,t,a){var o="/common/qrcode.ashx",s={code:e.code};wo.post(o,s,t,a)}function wa(e,t,a){var o="/admin/mall/config/keyvalue/list.ashx",s={pageindex:"number"==typeof e.pageindex?e.pageindex:1,pagesize:"number"==typeof e.pagesize?e.pagesize:10};wo.post(o,s,t,a)}function ka(e,t,a){var o="/admin/mall/config/keyvalue/add.ashx",s={key:e.key,value:e.value};wo.post(o,s,t,a)}function Da(e,t,a){var o="/admin/mall/config/keyvalue/get.ashx",s={id:e.id};wo.post(o,s,t,a)}function Ia(e,t,a){var o="/admin/mall/config/keyvalue/update.ashx",s={id:e.id,key:e.key,value:e.value};wo.post(o,s,t,a)}function Ta(e,t,a){var o="/admin/mall/config/keyvalue/delete.ashx",s={ids:e.ids};wo.post(o,s,t,a)}function Sa(e,t,a){var o="/Admin/Lottery/Get.ashx",s={};angular.extend(s,e),wo.post(o,s,t,a)}function Pa(e,t,a){var o="/Admin/Lottery/Add.ashx",s={};angular.extend(s,e),wo.post(o,s,t,a)}function La(e,t,a){var o="/Admin/Lottery/Update.ashx",s={};angular.extend(s,e),wo.post(o,s,t,a)}function Ca(e,t,a){var o="/Handler/App/CationHandler.ashx",s={action:"QueryWXLotteryV1",page:e.page?e.page:1,rows:e.rows?e.rows:10,LotteryName:e.LotteryName,LotteryType:e.LotteryType};wo.other_post(o,s,t,a)}function $a(e,t,a){var o="/Handler/App/CationHandler.ashx",s={action:"AddWXLotteryV1",JsonData:e.JsonData};wo.other_post(o,s,t,a)}function Aa(e,t,a){var o="/Handler/App/CationHandler.ashx",s={action:"EditWXLotteryV1",AutoID:e.AutoID,JsonData:e.JsonData};wo.other_post(o,s,t,a)}function Ba(e,t,a){var o="/Handler/App/CationHandler.ashx",s={action:"DeleteWXLotteryV1",ids:e.ids};wo.other_post(o,s,t,a)}function za(e,t,a){var o="/Handler/App/CationHandler.ashx",s={action:"ResetWXLotteryV1",ids:e.ids};wo.other_post(o,s,t,a)}function Ea(e,t,a){var o="/Handler/App/CationHandler.ashx",s={action:"QueryWXLotteryRecordV1",page:e.page?e.page:1,rows:e.rows?e.rows:10,UserId:e.UserId,LotteryId:e.LotteryId,AwardId:e.AwardId};wo.other_post(o,s,t,a)}function Ra(e,t,a){var o="/Handler/App/CationHandler.ashx",s={action:"UpdateIsGetPrize",ids:e.ids};wo.other_post(o,s,t,a)}function Ma(e,t){var a="/serv/api/admin/companywebsite/toolbar/grouplist.ashx",o={action:""};wo.other_post(a,o,e,t)}function Na(e,t,a){var o="/Handler/App/CationHandler.ashx",s={Action:"ExportOrder",oids:e.oids};wo.get(wo.other_apiurl(o,s),t,a)}function Fa(e){var t="/serv/api/admin/mall/groupbuyrule/list.ashx",a={};return angular.extend(a,e),o(function(e,o){wo.get(wo.other_apiurl(t,a),e,o)})}function Oa(e){var t="/serv/api/admin/mall/groupbuyrule/add.ashx",a={};return angular.extend(a,e),o(function(e,o){wo.get(wo.other_apiurl(t,a),e,o)})}function ja(e){var t="/serv/api/admin/mall/groupbuyrule/update.ashx",a={};return angular.extend(a,e),o(function(e,o){wo.get(wo.other_apiurl(t,a),e,o)})}function Ua(e){var t="/serv/api/admin/mall/groupbuyrule/delete.ashx",a={};return angular.extend(a,e),o(function(e,o){wo.get(wo.other_apiurl(t,a),e,o)})}function Va(e){var t="/serv/api/admin/mall/groupbuyrule/updateproductrule.ashx",a={};return angular.extend(a,e),o(function(e,o){wo.get(wo.other_apiurl(t,a),e,o)})}function Ha(e){var t="/serv/api/admin/mall/order.ashx",a={action:"OpenGroup"};return a=angular.extend(a,e),o(function(e,o){wo.get(wo.other_apiurl(t,a),e,o)})}function Ja(e){var t="/serv/api/admin/mall/groupbuyrule/get.ashx",a={};return angular.extend(a,e),o(function(e,o){wo.get(wo.other_apiurl(t,a),e,o)})}function qa(e,t){var a="/admin/systemconfig/get.ashx",o={};wo.get(wo.apiurl(a,o),e,t)}function Wa(e){var t="/serv/api/admin/mall/product.ashx",a={};return angular.extend(a,e),o(function(e,o){wo.get(wo.other_apiurl(t,a),e,o)})}function Ga(e,t){var a="/admin/dashboard/get.ashx",o={};wo.get(wo.apiurl(a,o),e,t)}function Xa(e,t,a){var o="/admin/log/selectactionlist.ashx",s={show_all:e.show_all};wo.get(wo.apiurl(o,s),t,a)}function Qa(e,t,a){var o="/admin/account/selectlist.ashx",s={show_all:e.show_all,show_website_owner:e.show_website_owner};wo.get(wo.apiurl(o,s),t,a)}function Za(e,t,a){var o="/admin/log/list.ashx",s={page:e.page,rows:e.rows,user_id:e.user_id,action:e.action};wo.get(wo.apiurl(o,s),t,a)}function Ka(e,t,a){var o="/admin/mall/product.ashx",s={action:e.action,times:e.times,pids:e.pids};wo.get(wo.apiurl(o,s),t,a)}function Ya(e,t){var a="/admin/Permission/Get.ashx",o={};wo.get(wo.apiurl(a,o),e,t)}function eo(e,t){var a="/admin/Permission/Get.ashx",o={};wo.get(wo.apiurl(a,o),e,t)}function to(e,t){var a="/admin/config/get.ashx",o={};wo.get(wo.apiurl(a,o),e,t)}function ao(e,t){var a="/admin/mall/updateishaveunreadrefundorder.ashx",o={};wo.get(wo.apiurl(a,o),e,t)}function oo(e,t,a){var o="/admin/mall/product.ashx",s={action:e.action,product_ids:e.product_ids,value:e.value,field:e.field};wo.post(o,s,t,a)}function so(e,t,a){var o="/admin/mall/order.ashx",s={action:e.action,order_ids:e.order_ids,order_status:e.order_status};wo.post(o,s,t,a)}function io(e,t,a){var o="/admin/mall/product.ashx",s={action:e.action,pids:e.pids,tags:e.tags};wo.post(o,s,t,a)}function lo(e,t,a){var o="/admin/mall/sort.ashx",s={action:e.action,pids:e.pids,sort:e.sort};wo.post(o,s,t,a)}function ro(e,t,a){var o="/admin/mall/refund.ashx",s={action:e.action,order_detail_id:e.order_detail_id,express_company_name:e.express_company_name,express_number:e.express_number};wo.get(wo.apiurl(o,s),t,a)}function no(e,t,a){var o="/admin/mall/refund.ashx",s={action:e.action,order_ids:e.order_ids};wo.post(o,s,t,a)}function co(e,t,a){var o="/admin/mall/Order.ashx";wo.post(o,e,t,a)}function po(e,t,a,o){var s="/Handler/App/CationHandler.ashx",i={action:"QueryChannel"};wo.other_post(s,i,a,o)}function uo(e,t,a){var o="/admin/outlets/list.ashx";wo.post(o,e,t,a)}function mo(e,t,a){var o="/admin/Question/list.ashx";wo.post(o,e,t,a)}function go(e,t,a){var o="/admin/mall/product.ashx";wo.post(o,e,t,a)}function vo(e,t,a){var o="/admin/mall/stock/list.ashx";wo.post(o,e,t,a)}function ho(e,t){var a="/admin/mall/product.ashx",o={action:"GetProductThresholdCount"};wo.post(a,o,e,t)}function bo(e,t,a){var o="/admin/user/supplier/list.ashx";wo.post(o,e,t,a)}function fo(e,t,a){var o="/admin/website/update.ashx";wo.post(o,e,t,a)}function yo(e,t,a){var o="/admin/website/get.ashx";wo.post(o,e,t,a)}location.hostname.match("localhost")||location.hostname.match("192.168.")||(e.mainsiteurl=location.origin);var _o=e.mainsiteurl+"/serv/api",xo=e.mainsiteurl,wo={apiurl:s,other_apiurl:i,jsonpurl:l,get:r,post:n,other_post:d,jsonp:c,login:p,logout:u,islogin:m,productlist:g,addeditpromotion:v,delpro:h,promotionproduct:b,upLoadFileImg:f,addSKU:A,updateSKU:B,delSKU:z,getAllSKU:E,addSKUValue:R,updateSKUValue:M,delSKUValue:N,getSKUValue:F,getcategorys:y,getcategorysQ:_,deleteCategory:x,addCategory:w,editCategory:k,editCategorySort:D,getCategoryInfo:I,getCategoryInfoQ:T,gettags:S,addtag:P,edittag:L,deltag:C,isonsale:$,submitProduct:O,productDetail:j,getCoupons:U,freightTemplateList:ee,getStatus:V,getOrders:H,orderDelivery:J,updateOrderStatus:q,updateRemark:W,updateDistributeStatus:G,getorderdetail:X,getraiseOrders:Q,getraiseorderdetail:Z,submitExpressInfo:K,subitNumberBtn:ro,updateStatus:Y,getProvinces:te,getCities:ae,getDistricts:oe,getAllArea:se,addpromotionName:ie,getpromotionPro:re,getpromotionData:le,addpromotionPro:ne,delpromotionPro:de,getpromotionDetail:ce,editpromotionDetail:pe,addFreightTemplate:ue,delFreightTemplate:me,getOneFreightTemplate:ge,editFreightTemplate:ve,getRefundinfo:he,getRefundnotes:be,agreeRefund:fe,refuseRefund:ye,refuseConfirmgoods:_e,agreeConfirmgoods:xe,addproductpropertyvalue:we,getraiselist:ke,delraisepro:De,getraiseprodetail:Ie,getcompanylist:Te,delcompany:Se,addcompany:Pe,getcompanyinfo:Le,updatecompanyinfo:Ce,addRaise:$e,getRaiseDetail:Ae,updateRaise:Be,addUserClass:Re,getUserClassList:ze,getUserClassDetail:Ee,updateUserClass:Me,delUserClass:Ne,getClassifyList:Fe,addClassify:Oe,updateClassify:je,delClassify:Ue,addExpress:Ve,updateExpress:He,delExpress:Je,getExpressList:qe,cardCouponList:We,deleteCoupon:Ge,addCoupon:Xe,editCoupon:Qe,giveCouponById:Ze,giveCouponByTag:Ke,sendCoupon:Ye,getPaySetInfo:et,editPaySetInfo:tt,getScoreSetInfo:at,editScoreSetInfo:ot,getNavList:st,deleteNav:it,addNav:lt,editNav:rt,getAdsList:nt,getAllAdsList:dt,getAdDetail:ct,editAdDetail:pt,deleteAd:ut,addAd:mt,editAd:gt,getActivityAssort:vt,delActivityAssort:ht,addActivityAssort:bt,editActivityAssort:ft,getActivityList:yt,deleteActivity:_t,addedActivity:xt,editedActivity:wt,getActivityInfo:kt,getArticleAssort:Dt,delArticleAssort:It,addArticleAssort:Tt,editArticleAssort:St,getArticleList:Pt,deleteArticle:Lt,addedArticle:Ct,getArticleInfo:$t,editArticleInfo:At,addAdBatch:Bt,getFollowerList:zt,updateFans:Et,getUserList:Rt,getDistributionUserList:Mt,addUserScore:Nt,editUserInfo:Ft,getVoteList:Ot,deleteVote:jt,addVote:Ut,getVoteDetail:Vt,editVotedetail:Ht,getVoteObjList:Jt,deleteVoteObj:qt,emptyVoteLog:Wt,getVoteObjDetail:Gt,addVoteObj:Xt,editVoteObj:Qt,getFieldList:Zt,deleteField:Kt,addField:Yt,editField:ea,setActivtyLevel:ta,setActivtyCateID:aa,setArticleLevel:oa,setArticleCateID:sa,getUserTag:ia,getTagInfo:la,addUserTag:ra,editUserTag:na,delUserTag:da,setUserTag:ca,setUserLevel:pa,delAd:ua,getAccountList:ma,activeAccount:ga,enableAccount:va,addAccount:ha,editAccount:ba,appointmentList:fa,appointmentDetail:ya,getUserInfo:_a,createQCode:xa,getConfigList:wa,addConfig:ka,getConfig:Da,editConfig:Ia,delConfig:Ta,getLottery:Sa,addLottery:Pa,updateLottery:La,getShakeList:Ca,addShake:$a,editShake:Aa,delShakeList:Ba,resetLottery:za,winnerList:Ea,markHasReceive:Ra,getNavChoose:Ma,exportOrder:Na,groupBuyRuleList:Fa,addGroupBuyRule:Oa,setProductGroupBuyRule:Va,sysOpenGroup:Ha,deleteGroupBuyRule:Ua,editGroupBuyRule:ja,getGroupBuyRule:Ja,getExtendConfig:qa,setAccessLevel:Wa,getDashboardData:Ga,getUserAction:Xa,getUserAccount:Qa,getUserActionList:Za,setProductBuyTime:Ka,getMarketingCenterRight:Ya,getWebsitePermission:eo,getOrderIsNew:to,setOrderIsRead:ao,updateProductField:oo,multiUpdateOrderStatus:so,batchSetTags:io,batchSetSort:lo,groupReturnrefund:no,updateGroupBuyStatus:co,channelList:po,storeList:uo,GetQuestionnaireList:mo,getProductByPids:go,getProductStockList:vo,getProductThreshold:ho,updateSmsAccount:fo,getWebsiteInfo:yo,getSupplierList:bo};return wo}e.$inject=["$rootScope","$http","$timeout","$q"],angular.module("mmpadmin").factory("mmpadminAPI",e)}(),function(){"use strict";function e(){return function(e){function t(o){a.removeEventListener("change",t,!1),console.log(o.target.files.length),console.log(["evt.target.files",o.target.files]);for(var s=[],i=0;i<o.target.files.length;i++)o.target.files[i].type.match("image.*")&&s.push(o.target.files[i]);for(var l=s.length,r=[],i=0;i<s.length;i++){var n=new FileReader;n.readAsDataURL(s[i]),n.onload=function(t){console.log(["reader 选择的图片加载完成"]),console.log(t.target.result),r.push(t.target.result),r.length==l&&e(r)}}}var a;document.getElementById("fileImg")?a=document.getElementById("fileImg"):(a=document.createElement("input"),a.id="fileImg",a.type="file",a.multiple="multiple",document.body.appendChild(a)),a.addEventListener("change",t,!1),a.click()}}function t(e,t){function a(e){for(var t=[],a=0;a<e.length;a++){var o=e[a];if(!o.category_parent_id&&(t.push(o),o.category_id))for(var s=0;s<e.length;s++){var i=e[s];i.category_parent_id==o.category_id&&(i.category_name="　　└"+i.category_name,t.push(i))}}return t}function o(e){return e.replace(/(^\s*)|(\s*$)/g,"")}function s(e){return"undefined"==typeof e&&(e=0),(isNaN(e)||!e)&&(e=0),e}function i(e){return parseInt(s(e))}function l(e){return parseFloat(s(e))}function r(a,o){"undefined"==typeof e.WebsitePermission&&(e.WebsitePermission=null),e.WebsitePermission?a():t.getMarketingCenterRight(function(t){t.status?(e.WebsitePermission=t.result,a()):(e.WebsitePermission=null,o())},function(t){e.WebsitePermission=null,o()})}function n(t,a,o){r(function(){for(var s=e.WebsitePermission,i=0;i<s.length;i++)if(s[i]==t)return void a();o()},function(){o()})}return{productCatePreSort:a,trim:o,numberNullProc:s,strToInt:i,strToFloat:l,checkPms:n}}t.$inject=["$rootScope","mmpadminAPI"],angular.module("mmpadmin").factory("checklocalimg",e).factory("commService",t)}(),function(){"use strict";function e(e,t,a,o){var s=e.pageFunc={},i=e.pageData={currentPage:1,pagesize:5,keyword:"",dataList:[],selectedall:!1,ids:"",dataJson:{category_id:"add",category_name:""},category_name:"",category_id:0};s.getClassifyList=function(){var e={pageindex:i.currentPage,pagesize:i.pagesize,keyword:i.keyword};o.getClassifyList(e,function(e){e&&(console.log("分类列表",e),i.dataList=e.list,i.totalItems=e.totalcount)},function(e){console.log(e)})},s.delClassify=function(){t("友情提示","确定要删除吗？","确定","取消",function(){o.delClassify({cotegroy_ids:i.ids},function(e){0==e.errcode?(console.log("删除成功",e),i.ids="",s.getClassifyList()):(console.log("删除失败",e),a("友情提示",e.errmsg))},function(e){console.log(e),a("友情提示",e.errmsg)})},function(){})},s.deleteSelectedBtn=function(){if(""!=i.ids)","==i.ids.substring(i.ids.length-1,i.ids.length)&&(i.ids=i.ids.substring(i.ids,i.ids.length-1)),console.log(["pageData.ids",i.ids]),s.delClassify();else{var e="友情提示",t="请至少选择一条需要删除的记录！";a(e,t)}},s.deleteSingleBtn=function(e){i.ids=e.category_id,s.delClassify()},s.selectRecord=function(e){e.selected=!e.selected,console.log(e.selected);var t=!0;i.dataList.filter(function(e){e.selected||(t=!1)}),i.selectedall=t,e.selected?(i.ids+=e.category_id+",",console.log(i.ids)):(i.ids=i.ids.replace(e.category_id+",",""),console.log(i.ids))},s.selectAll=function(){i.selectedall=!i.selectedall,i.ids="",angular.forEach(i.dataList,function(e){e.selected=i.selectedall,i.selectedall?(i.ids+=e.category_id+",",console.log(["pageData.ids",i.ids])):(i.ids="",console.log(["pageData.ids",i.ids]))})},s.ctrlSearch=function(e){console.log(["点击回车",e]),console.log(i.keyword);var t=window.event?e.keyCode:e.which;13===t&&(i.currentPage=1,i.dataList=[],s.getClassifyList())},s.pageChanged=function(){console.log(i.currentPage),s.getClassifyList()},s.updateClassify=function(){return""==i.category_name?void a("友情提示","分类名称不能为空"):(i.dataJson.category_id=i.category_id,i.dataJson.category_name=i.category_name,void o.updateClassify({data:angular.toJson(i.dataJson)},function(e){0==e.errcode?($("#dealModal").modal("hide"),a("友情提示","修改保存成功"),s.getClassifyList(),i.dataJson={category_id:"add",category_name:""}):a("友情提示",e.errmsg)},function(e){console.log(e),a("友情提示",e.errmsg)}))},s.showAddClassify=function(e){"add"!=e?(i.category_name=e.category_name,i.category_id=e.category_id):(i.category_name="",i.category_id="add"),$("#dealModal").modal({backdrop:"static",keyboard:!1})},s.addClassify=function(){i.dataJson.category_name=i.category_name,o.addClassify({data:angular.toJson(i.dataJson)},function(e){0==e.errcode?($("#dealModal").modal("hide"),s.getClassifyList(),i.dataJson={category_id:"add",category_name:""}):a("友情提示",e.errmsg)},function(e){a("友情提示",e.errmsg)})},s.clear=function(){$("#dealModal").modal("hide")},s.init=function(){s.getClassifyList()},s.init()}e.$inject=["$scope","alertconformbox","alertbox","mmpadminAPI"],angular.module("mmpadmin").controller("classifyCtrl",e)}(),function(){"use strict";function e(e,t,a,o,s){a.getAdsList({pageindex:1,pagesize:1,keyword:""},function(i){function l(){a.getAdsList({pageindex:e.currentPage,pagesize:e.pagesize,keyword:e.keyword},function(t){console.log(t),e.navListData=t.list,e.totals=t.totalcount},function(e){console.log(e)})}function r(){a.deleteAd({slide_ids:e.ids},function(a){if(console.log(a),0==a.errcode){var o="友情提示",s="删除成功";t(o,s),l(),e.selectedall=!1}else t(a.errcode,a.errmsg)},function(e){console.log(e)})}console.log(i),e.totals=i.totalcount,e.currentPage=""==o.pageID||void 0==o.pageID?1:parseInt(o.pageID),e.keyword=""===o.typeID||void 0===o.typeID?"":o.typeID,e.pagesize=10,e.navListData=[],l(),e.delNavBtn=function(t){e.ids=t.slide_id,r()},e.delallNavBtn=function(){if(""!=e.ids)e.ids=e.ids.substring(e.ids,e.ids.length-1),console.log(["$scope.ids",e.ids]),r();else{var a="友情提示",o="请至少选择一个幻灯片";t(a,o)}},e.selectedall=!1,e.ids="",e.checkedall=function(){e.selectedall=!e.selectedall,e.ids="",angular.forEach(e.navListData,function(t){t.selected=e.selectedall,e.selectedall?(e.ids+=t.slide_id+",",console.log(["$scope.ids",e.ids])):(e.ids="",console.log(["$scope.ids",e.ids]))})},e.selectme=function(t){t.selected=!t.selected,console.log(t.selected);var a=!0;e.navListData.filter(function(e){e.selected||(a=!1)}),e.selectedall=a,t.selected?(e.ids+=t.slide_id+",",console.log(e.ids)):(e.ids=e.ids.replace(t.slide_id+",",""),console.log(e.ids))},e.ctrlsearch=function(t){console.log(["点击回车",t]),console.log(e.keyword);var a=window.event?t.keyCode:t.which;13===a&&(e.currentPage=1,e.navListData=[],s.go("index.adList",{pageID:e.currentPage,typeID:e.keyword}))};var n=e.pageData={img_url:"",link:"",link_text:"",slide_type:"",slide_sort:0,isShowAdd:!0};e.addNavLists=[{slide_name:"滑动图片1",slide_type:"slide1"},{slide_name:"滑动图片2",slide_type:"slide2"},{slide_name:"滑动图片3",slide_type:"slide3"},{slide_name:"滑动图片4",slide_type:"slide4"},{slide_name:"滑动图片5",slide_type:"slide5"},{slide_name:"滑动图片6",slide_type:"slide6"},{slide_name:"滑动图片7",slide_type:"slide7"},{slide_name:"滑动图片8",slide_type:"slide8"},{slide_name:"滑动图片9",slide_type:"slide9"},{slide_name:"滑动图片10",slide_type:"slide10"},{slide_name:"滑动图片11",slide_type:"slide11"},{slide_name:"滑动图片22",slide_type:"slide12"},{slide_name:"滑动图片13",slide_type:"slide13"},{slide_name:"滑动图片14",slide_type:"slide14"},{slide_name:"滑动图片15",slide_type:"slide15"},{slide_name:"滑动图片16",slide_type:"slide16"},{slide_name:"滑动图片17",slide_type:"slide17"},{slide_name:"滑动图片18",slide_type:"slide18"},{slide_name:"滑动图片19",slide_type:"slide19"},{slide_name:"滑动图片20",slide_type:"slide20"},{slide_name:"限时特卖",slide_type:"promotion"},{slide_name:"顶部幻灯片1",slide_type:"pagetop1"}],e.addOneNav=e.addNavLists[0],n.slide_type=e.addNavLists[0].slide_type,e.changeCategory=function(e){console.log(e),n.slide_type=e.slide_type},e.addcardcouponBtn=function(){e.isAddcard=!0,e.showPicDom=!0,$("#dealModal").modal({backdrop:"static",keyboard:!1}),e.addOneNav=e.addNavLists[0],n.slide_type=e.addNavLists[0].slide_type,n.img_url=[],n.link="",n.link_text="",n.slide_sort="",document.onclick=function(t){console.log(t.srcElement.className);var a=t.srcElement?t.srcElement:t.target;a.className.match("modal")&&a.className.match("inmodal")&&e.$apply(function(){n.img_url="",e.showPicDom=!1})}},e.editcardcouponBtn=function(t){console.log(t),e.isAddcard=!1,n.img_url=[t.img_url],n.img_url&&(e.showPicDom=!0),$("#dealModal").modal({backdrop:"static",keyboard:!1});for(var a in e.addNavLists){if(t.slide_type==e.addNavLists[a].slide_type){e.addOneNav=e.addNavLists[a],n.slide_type=e.addNavLists[a].slide_type,e.showOemType=!1;break}e.showOemType=!0,n.slide_type=t.slide_type,console.log(n.slide_type)}console.log(n.img_url),n.slide_id=t.slide_id,n.link=t.link,n.link_text=t.link_text,n.slide_sort=t.slide_sort,document.onclick=function(t){console.log(t.srcElement.className);var a=t.srcElement?t.srcElement:t.target;a.className.match("modal")&&a.className.match("inmodal")&&e.$apply(function(){n.img_url="",e.showPicDom=!1})}},e.addCouponBtn=function(){return""==n.link_text?void t("友情提示","请输入幻灯片名称"):""==n.link?void t("友情提示","请输入幻灯片链接"):""==n.img_url?void t("友情提示","请上传幻灯片图片"):(n.img_url=n.img_url[0],""==n.slide_sort&&(n.slide_sort=0),console.log(angular.toJson(n)),console.log(encodeURIComponent(angular.toJson(n))),void(1==e.isAddcard?a.addAd({data:encodeURIComponent(angular.toJson(n))},function(a){console.log(a),0==a.errcode&&(e.showPicDom=!1,t("友情提示","添加幻灯片成功"),$("#dealModal").modal("hide"),l())}):a.editAd({data:encodeURIComponent(angular.toJson(n))},function(a){console.log(a),0==a.errcode&&(e.showPicDom=!1,t("友情提示","修改幻灯片成功"),$("#dealModal").modal("hide"),l())},function(e){})))}},function(e){}),e.pageChanged=function(){console.log(e.currentPage),s.go("index.adList",{pageID:e.currentPage})},e.clear=function(){$("#dealModal").modal("hide"),pageData.img_url="",pageData.link="",pageData.link_text="",pageData.slide_type="",pageData.slide_sort=0}}e.$inject=["$scope","alertbox","mmpadminAPI","$stateParams","$state"],angular.module("mmpadmin").controller("adListCtrl",e)}(),function(){"use strict";$(document).ready(function(){function e(){var e=$("body > #wrapper").height()-61;$(".sidebard-panel").css("min-height",e+"px");var t=$("nav.navbar-default").height(),a=$("#page-wrapper").height();t>a&&$("#page-wrapper").css("min-height",t+"px"),a>t&&$("#page-wrapper").css("min-height",$(window).height()+"px"),$("body").hasClass("fixed-nav")&&$("#page-wrapper").css("min-height",$(window).height()-60+"px")}$(window).bind("load resize scroll",function(){$("body").hasClass("body-small")||e()}),setTimeout(function(){e()})}),$(function(){$(window).bind("load resize",function(){$(this).width()<769?$("body").addClass("body-small"):$("body").removeClass("body-small")})})}(),function(){"use strict";function e(e,t,a,o,s,i,l,r){var n=window.location.href;t.isSonghe=n.match("songhe")?!0:!1,o.$reset(),window.alert=function(e){s("系统提示",e)},window.confirmBox=function(e,t,a){i("系统提示",e,"确定","取消",function(){"function"==typeof t&&t()},function(){"function"==typeof a&&a()})},l.islogin("",function(e){0==e.islogin&&(window.location.href.indexOf("hidemenu")>=0?top.loaction.href="/login":a.go("login")),r.checkPms("run",function(){},function(){})}),e.debug("runBlock end"),t.$on("$stateChangeStart",function(e,a,o,s,l){"index.productDetail"==s.name&&(t.product_times>0?(e.preventDefault(),i("友情提示","您有更改的内容未保存，确认离开？","确认","取消",function(){t.product_times=0,history.go(-1)},function(){})):t.product_isback||history.go(-1))}),$(function(){var e=$(document);e.on("mouseover",".lbTip",function(){var e=$(this),t=e.data("tip-msg");t&&layer.tips(t,this,{tips:[2,"#1ab394"],closeBtn:[2,!0],time:1e4})})})}e.$inject=["$log","$rootScope","$state","$sessionStorage","alertbox","alertconformbox","mmpadminAPI","commService"],angular.module("mmpadmin").run(e)}(),function(){"use strict";function e(e,t){e.state("home1",{url:"/",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}).state("index",{url:"/index",templateUrl:"app/ZAFW/common/content.html"}).state("login",{url:"/login",templateUrl:"app/login/login.html",controller:"loginCtrl"}).state("index.hometablepage",{url:"/hometablepage",templateUrl:"app/hometablepage/hometablepage.html",
controller:"hometablepageCtrl"}).state("index.productList",{url:"/productList/:type/:keyID/:cateID/:statuID",templateUrl:"app/product/productList/productList.html",controller:"productListCtrl"}).state("index.productEditorMall",{url:"/productEditor",templateUrl:"app/product/productEditor/productEditor.html",controller:"productEditorCtrl"}).state("index.productEditor",{url:"/productEditor/:type",templateUrl:"app/product/productEditor/productEditor.html",controller:"productEditorCtrl"}).state("index.productDetail",{url:"/productEditor/:productId/:type",templateUrl:"app/product/productEditor/productEditor.html",controller:"productEditorCtrl",controllerAs:"productEditor"}).state("index.articleView",{url:"/articleView/:articleID",templateUrl:"app/product/articleView/articleView.html",controller:"articleViewCtrl",controllerAs:"vm"}).state("index.productSortMall",{url:"/productSort",templateUrl:"app/product/productSort/productSort.html",controller:"productSortCtrl",controllerAs:"productSort"}).state("index.productSort",{url:"/productSort/:type",templateUrl:"app/product/productSort/productSort.html",controller:"productSortCtrl",controllerAs:"productSort"}).state("index.addProductSort",{url:"/addProductSort/:type",templateUrl:"app/product/addProductSort/addProductSort.html",controller:"addProductSortCtrl",controllerAs:"addProductSort"}).state("index.addProductSortMall",{url:"/addProductSort",templateUrl:"app/product/addProductSort/addProductSort.html",controller:"addProductSortCtrl",controllerAs:"addProductSort"}).state("index.editProductSort",{url:"/editProductSort/:sortID/:type",templateUrl:"app/product/editProductSort/editProductSort.html",controller:"editProductSortCtrl"}).state("index.editProductSortMall",{url:"/editProductSort/:sortID",templateUrl:"app/product/editProductSort/editProductSort.html",controller:"editProductSortCtrl"}).state("index.productTag",{url:"/productTag",templateUrl:"app/product/productTag/productTag.html",controller:"productTagCtrl",controllerAs:"productTag"}).state("index.productProperty",{url:"/productProperty",templateUrl:"app/product/productProperty/productProperty.html",controller:"productPropertyCtrl",controllerAs:"productProperty"}).state("index.productPropertyValue",{url:"/productPropertyValue/:property_id",templateUrl:"app/product/productPropertyValue/productPropertyValue.html",controller:"productPropertyValueCtrl",controllerAs:"productPropertyValue"}).state("index.productStockRecord",{url:"/productStockRecord/:product_id",templateUrl:"app/product/productStockRecord/productStockRecord.html",controller:"productStockRecordCtrl"}).state("index.saleList",{url:"/saleList/:pageID/:keyID",templateUrl:"app/salelimit/salelimitList/saleList.html",controller:"saleListCtrl",controllerAs:"saleList"}).state("index.salelimitEdit",{url:"/salelimitEdit/:saleId",templateUrl:"app/salelimit/salelimitEdit/salelimitEdit.html",controller:"salelimitEditCtrl",controllerAs:"salelimitEdit"}).state("index.newsaleList",{url:"/newsaleList/:pageID",templateUrl:"app/newsalelimit/salelimitList/saleList.html",controller:"newsaleListCtrl",controllerAs:"newsaleList"}).state("index.addsalename",{url:"/addsalename/:saleID",templateUrl:"app/newsalelimit/addsalename/addsalename.html",controller:"addsalenameCtrl",controllerAs:"addsalename"}).state("index.addsaleproduct",{url:"/addsaleproduct/:proID",templateUrl:"app/newsalelimit/addsaleproduct/addsaleproduct.html",controller:"addsaleproductCtrl",controllerAs:"addsaleproduct"}).state("index.shakeList",{url:"/shakeList/:lotteryType",templateUrl:"app/shake/shakeList/shakeList.html",controller:"shakeListCtrl",controllerAs:"shakeList"}).state("index.shakeEdit",{url:"/shakeEdit/:shakeId",templateUrl:"app/shake/shakeEdit/shakeEdit.html",controller:"shakeEditCtrl",controllerAs:"shakeEdit"}).state("index.newShakeEdit",{url:"/newShakeEdit/:shakeId",templateUrl:"app/shake/shakeEdit/newShakeEdit.html",controller:"NewShakeEditCtrl",controllerAs:"newShakeEdit"}).state("index.addshake",{url:"/addshake/:lotteryType",templateUrl:"app/shake/addshake.html",controller:"addshakeCtrl",controllerAs:"addshake"}).state("index.winnerrecord",{url:"/winnerrecord/:shakeId",templateUrl:"app/shake/winnerRecord/winnerRecord.html",controller:"WinnerRecordCtrl",controllerAs:"winnerRecord"}).state("index.marketingcenter",{url:"/marketingcenter",templateUrl:"app/marketingCenter/marketingCenter.html",controller:"marketingCenterCtrl"}).state("index.orderList",{url:"/orderList?orderType&orderStatus&userAutoId",templateUrl:"app/order/orderList/orderList.html",controller:"orderListCtrl"}).state("index.orderDetail",{url:"/orderDetail/:orderID",templateUrl:"app/order/orderDetail/orderDetail.html",controller:"orderDetailCtrl"}).state("index.orderPreview",{url:"/orderPreview/:orderID",templateUrl:"app/order/orderPreview/orderPreview.html",controller:"orderPreviewCtrl"}).state("index.raiseorderList",{url:"/raiseorderList/:pageID/:statuID",templateUrl:"app/order/raiseorderList/raiseorderList.html",controller:"raiseorderListCtrl",controllerAs:"raiseorderList"}).state("index.raiseorderDetail",{url:"/raiseorderDetail/:orderID",templateUrl:"app/order/raiseorderDetail/raiseorderDetail.html",controller:"raiseorderDetailCtrl",controllerAs:"raiseorderDetail"}).state("index.shopInfo",{url:"/shopInfo",templateUrl:"app/shop/shopInfo/shopInfo.html",controller:"shopInfoCtrl",controllerAs:"shopInfo"}).state("index.zafwView",{url:"/zafwView",templateUrl:"app/ZAFW/zafwView/zafwView.html",controller:"zafwViewCtrl",controllerAs:"zafwView"}).state("index.freightTemplate",{url:"/freightTemplate",templateUrl:"app/product/freightTemplate/freightTemplate.html",controller:"freightTemplateCtrl",controllerAs:"freightTemplate"}).state("index.freightTemplateEditor",{url:"/freightTemplateEditor",templateUrl:"app/product/freightTemplateEditor/freightTemplateEditor.html",controller:"freightTemplateEditorCtrl",controllerAs:"freightTemplateEditor"}).state("index.freightTemplateEdit",{url:"/freightTemplateEditor/:freightTemplateId",templateUrl:"app/product/freightTemplateEditor/freightTemplateEditor.html",controller:"freightTemplateEditorCtrl",controllerAs:"freightTemplateEditor"}).state("index.refund",{url:"/refund/:orderID/:detailID",templateUrl:"app/refund/refund.html",controller:"refundCtrl",controllerAs:"refund"}).state("index.raiselist",{url:"/raiselist/:pageID",templateUrl:"app/raise/raiselist/raiselist.html",controller:"raiselistCtrl",controllerAs:"raiselist"}).state("index.raiseedit",{url:"/raiseedit/:raiseId",templateUrl:"app/raise/raiseedit/raiseedit.html",controller:"raiseeditCtrl",controllerAs:"raiseedit"}).state("index.raisedetail",{url:"/raisedetail/:raiseID",templateUrl:"app/raise/raisedetail/raisedetail.html",controller:"raisedetailCtrl",controllerAs:"raisedetail"}).state("index.companylist",{url:"/companylist/:pageID",templateUrl:"app/company/companylist/companylist.html",controller:"companylistCtrl",controllerAs:"companylist"}).state("index.companydetail",{url:"/companydetail/:companyID",templateUrl:"app/company/companydetail/companydetail.html",controller:"companydetailCtrl",controllerAs:"companydetail"}).state("index.companyadd",{url:"/companyadd",templateUrl:"app/company/companyadd/companyadd.html",controller:"companyaddCtrl",controllerAs:"companyadd"}).state("index.companyedit",{url:"/companyedit/:companyID",templateUrl:"app/company/companyedit/companyedit.html",controller:"companyeditCtrl",controllerAs:"companyedit"}).state("index.userclasslist",{url:"/userclasslist",templateUrl:"app/userclass/userclasslist/userclasslist.html",controller:"userclasslistCtrl",controllerAs:"userclasslist"}).state("index.userclassedit",{url:"/userclassedit/:userClassId",templateUrl:"app/userclass/userclassedit/userclassedit.html",controller:"userclasseditCtrl",controllerAs:"userclassedit"}).state("index.userclassdetail",{url:"/userclassdetail/:userClassId",templateUrl:"app/userclass/userclassdetail/userclassdetail.html",controller:"userclassdetailCtrl",controllerAs:"userclassdetail"}).state("index.classify",{url:"/classify",templateUrl:"app/classify/classify.html",controller:"classifyCtrl",controllerAs:"classify"}).state("index.express",{url:"/express",templateUrl:"app/express/express.html",controller:"expressCtrl",controllerAs:"express"}).state("index.cardList",{url:"/cardList/:pageID/:typeID",templateUrl:"app/cardCoupon/cardList/cardList.html",controller:"cardListCtrl",controllerAs:"cardList"}).state("index.sendCardHistory",{url:"/sendCardHistory/:cardID/:pageID",templateUrl:"app/cardCoupon/sendCardHistory/sendCardHistory.html",controller:"sendCardHistoryCtrl",controllerAs:"sendCardHistory"}).state("index.navList",{url:"/navList/:pageID/:typeID",templateUrl:"app/navList/navList.html",controller:"navListCtrl",controllerAs:"navList"}).state("index.paySetInfo",{url:"/paySetInfo",templateUrl:"app/paySetInfo/paySetInfo.html",controller:"paySetInfoCtrl",controllerAs:"paySetInfo"}).state("index.scoreSetInfo",{url:"/scoreSetInfo",templateUrl:"app/scoreSetInfo/scoreSetInfo.html",controller:"scoreSetInfoCtrl",controllerAs:"scoreSetInfo"}).state("index.adList",{url:"/adList/:pageID/:typeID",templateUrl:"app/adList/adList.html",controller:"adListCtrl",controllerAs:"adList"}).state("index.newAdList",{url:"/newAdList",templateUrl:"app/adList/newAdList/newAdList.html",controller:"newAdListCtrl",controllerAs:"newAdList"}).state("index.addAd",{url:"/addAd/",templateUrl:"app/adList/addAd/addAd.html",controller:"addAdCtrl",controllerAs:"addAd"}).state("index.editAd",{url:"/editAd/:typeID",templateUrl:"app/adList/editAd/editAd.html",controller:"editAdCtrl",controllerAs:"editAd"}).state("index.newAdListSplitPc",{url:"/newAdList/:ispc",templateUrl:"app/adList/newAdList/newAdList.html",controller:"newAdListCtrl",controllerAs:"newAdList"}).state("index.addAdSplitPc",{url:"/addAd/:ispc",templateUrl:"app/adList/addAd/addAd.html",controller:"addAdCtrl",controllerAs:"addAd"}).state("index.editAdSplitPc",{url:"/editAd/:typeID/:ispc",templateUrl:"app/adList/editAd/editAd.html",controller:"editAdCtrl",controllerAs:"editAd"}).state("index.activityAssort",{url:"/activityAssort/:pageID/:typeID",templateUrl:"app/activity/activityAssort/activityAssort.html",controller:"activityAssortCtrl",controllerAs:"activityAssort"}).state("index.activityList",{url:"/activityList/:pageID/:typeID/:kewID/:descID",templateUrl:"app/activity/activityList/activityList.html",controller:"activityListCtrl",controllerAs:"activityList"}).state("index.addActivety",{url:"/addActivety",templateUrl:"app/activity/addActivety/addActivety.html",controller:"addActivetyCtrl",controllerAs:"addActivety"}).state("index.editActivety",{url:"/editActivety/:activeID",templateUrl:"app/activity/editActivety/editActivety.html",controller:"editActivetyCtrl",controllerAs:"editActivety"}).state("index.fieldList",{url:"/fieldList/:activeID",templateUrl:"app/activity/fieldList/fieldList.html",controller:"fieldListCtrl",controllerAs:"fieldList"}).state("index.articleAssort",{url:"/articleAssort/:pageID/:typeID",templateUrl:"app/article/articleAssort/articleAssort.html",controller:"articleAssortCtrl",controllerAs:"articleAssort"}).state("index.articleList",{url:"/articleList/:pageID/:typeID/:kewID/:descID",templateUrl:"app/article/articleList/articleList.html",controller:"articleListCtrl",controllerAs:"articleList"}).state("index.addArticle",{url:"/addArticle/:activeID",templateUrl:"app/article/addArticle/addArticle.html",controller:"addArticleCtrl",controllerAs:"addArticle"}).state("index.editArticle",{url:"/editArticle/:articleID",templateUrl:"app/article/editArticle/editArticle.html",controller:"editArticleCtrl",controllerAs:"editArticle"}).state("index.followerList",{url:"/followerList/:pageID/:keyID",templateUrl:"app/customManage/followerList/followerList.html",controller:"followerListCtrl",controllerAs:"followerList"}).state("index.userList",{url:"/userList/:pageID/:keyID/:tagID/:disID/:nameID/:wxNameID",templateUrl:"app/customManage/userList/userList.html",controller:"userListCtrl",controllerAs:"userList"}).state("index.voteList",{url:"/voteList/:pageID/:keyID",templateUrl:"app/vote/voteList/voteList.html",controller:"voteListCtrl",controllerAs:"voteList"}).state("index.addVote",{url:"/addVote",templateUrl:"app/vote/addVote/addVote.html",controller:"addVoteCtrl",controllerAs:"addVote"}).state("index.editVote",{url:"/editVote/:voteID",templateUrl:"app/vote/editVote/editVote.html",controller:"editVoteCtrl",controllerAs:"editVote"}).state("index.voteObjList",{url:"/voteObjList/:voteID/:pageID/:keyID/:sortID/:statusID",templateUrl:"app/vote/voteObjList/voteObjList.html",controller:"voteObjListCtrl",controllerAs:"voteObjList"}).state("index.addVoteObj",{url:"/addVoteObj/:voteID",templateUrl:"app/vote/addVoteObj/addVoteObj.html",controller:"addVoteObjCtrl",controllerAs:"addVoteObj"}).state("index.editVoteObj",{url:"/editVoteObj/:voteObjID",templateUrl:"app/vote/editVoteObj/editVoteObj.html",controller:"editVoteObjCtrl",controllerAs:"editVoteObj"}).state("index.userTagList",{url:"/userTagList/:pageID/:keyID",templateUrl:"app/customManage/userTagList/userTagList.html",controller:"userTagListCtrl",controllerAs:"userTagList"}).state("index.accountList",{url:"/accountList/:pageID/:keyID",templateUrl:"app/systemManage/accountList/accountList.html",controller:"accountListCtrl",controllerAs:"accountList"}).state("index.trystList",{url:"/trystList/:pageID",templateUrl:"app/tryst/trystList/trystList.html",controller:"trystListCtrl",controllerAs:"trystList"}).state("index.trystDetail",{url:"/trystDetail/:trystID",templateUrl:"app/tryst/trystDetail/trystDetail.html",controller:"trystDetailCtrl",controllerAs:"trystDetail"}).state("index.NWYXuserList",{url:"/NWYXuserList/:pageID/:keyID/:tagID/:disID/:nameID/:wxNameID",templateUrl:"app/NWYXuser/NWYXuserList/NWYXuserList.html",controller:"NWYXuserListCtrl",controllerAs:"NWYXuserList"}).state("index.NWYXuserDetail",{url:"/NWYXuserDetail/:userID",templateUrl:"app/NWYXuser/NWYXuserDetail/NWYXuserDetail.html",controller:"NWYXuserDetailCtrl",controllerAs:"NWYXuserDetail"}).state("index.configList",{url:"/configList/:pageID",templateUrl:"app/config/configList/configList.html",controller:"configListCtrl",controllerAs:"configList"}).state("index.groupBuyRuleList",{url:"/groupBuyRuleList",templateUrl:"app/groupBuyRule/list/groupBuyRuleList.html",controller:"groupBuyRuleListCtrl"}),t.otherwise("/index/hometablepage")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("mmpadmin").config(e)}(),function(){"use strict";angular.module("mmpadmin").constant("malarkey",malarkey).constant("toastr",toastr).constant("ADMIN_CONFIG",ADMIN_CONFIG).constant("moment",moment)}(),function(){"use strict";function e(e,t){e.debugEnabled(!0),t.options.timeOut=3e3,t.options.positionClass="toast-top-right",t.options.preventDuplicates=!0,t.options.progressBar=!0}e.$inject=["$logProvider","toastr"],angular.module("mmpadmin").config(e)}(),angular.module("mmpadmin").run(["$templateCache",function(e){e.put("app/adList/adList.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>幻灯片列表</h2><ol class="breadcrumb"><li><a>幻灯片</a></li><li><a>列表</a></li><li class="active"><strong>幻灯片列表</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>幻灯片列表</h5></div><div class="ibox-content"><div class=""><a class="btn btn-primary" ui-sref="index.addAd">添加</a><a class="btn btn-danger" ng-click="delallNavBtn()">删除</a></div><div class="row"><div class="col-sm-6"></div><div class="col-sm-6"><div id="editable_filter" class="dataTables_filter floatR">搜索: <label><input type="search" class="form-control input-sm" placeholder="输入您要搜索的幻灯片" aria-controls="editable" ng-model="keyword" ng-keyup="ctrlsearch($event)"></label></div></div></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th class="center">幻灯片文字</th><th class="center">幻灯片ID</th><th class="center">幻灯片类型</th><th class="center">幻灯片连接</th><th class="center">幻灯片图片</th><th class="center">幻灯片排序</th><th class="center">编辑</th></tr></thead><tbody><tr class="gradeX" ng-repeat="boxdata in navListData"><td class="center">{{boxdata.link_text}}</td><td class="center">{{boxdata.slide_id}}</td><td class="center">{{boxdata.slide_type}}</td><td class="center">{{boxdata.link}}</td><td class="center"><img ng-src="{{boxdata.img_url}}" alt="" style="width:60px;height:60px;float: left"></td><td class="center">{{boxdata.slide_sort}}</td><td class="center"><button class="btn btn-primary col-sm-5" ng-click="editcardcouponBtn(boxdata)">编辑</button> <button class="btn btn-danger col-sm-5 col-sm-offset-2" ng-click="delNavBtn(boxdata)">删除</button></td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totals}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totals" items-per-page="pagesize" max-size="6" ng-model="currentPage" class="pagination-sm" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" style="float:right;"></pagination></div></div></div></div></div></div></div></div><div class="modal inmodal" id="dealModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4 ng-if="isAddcard">添加幻灯片</h4><h4 ng-if="!isAddcard">修改幻灯片</h4></div><div class="modal-body modalBody"><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 链接文字：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入幻灯片链接文字" ng-model="pageData.link_text"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 幻灯片链接：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入幻灯片的链接" ng-model="pageData.link"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 幻灯片类型：</label><div class="col-sm-9" ng-if="!showOemType"><select class="form-control" ng-model="addOneNav" ng-options="addOneNav.slide_name for addOneNav in addNavLists" ng-change="changeCategory(addOneNav)"></select></div><div class="col-sm-9" ng-if="showOemType"><input type="text" class="form-control mBottom10" placeholder="请输入幻灯片的类型" ng-model="pageData.slide_type"></div></div><div class="form-group overFlow" ng-if="showPicDom"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 幻灯片图片：</label><div class="col-sm-9"><zafw-upload-img ng-model="pageData.img_url"></zafw-upload-img></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label">幻灯片排序：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="数值越大越靠前" ng-model="pageData.slide_sort"></div></div></div><div class="modal-footer center"><button class="col-sm-offset-2 btn btn-primary" ng-click="addCouponBtn()">保存</button> <button class="col-sm-offset-2 btn btn-primary" ng-click="clear()">取消</button></div></div></div></div>'),e.put("app/classify/classify.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>分类列表</h2><ol class="breadcrumb"><li><a>分类管理</a></li><li class="active"><strong>分类列表</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>分类列表</h5></div><div class="ibox-content"><div class="row"><div class="col-sm-6"><a class="btn btn-primary" ng-click="pageFunc.showAddClassify(\'add\')">添加</a> <a class="btn btn-danger" ng-click="pageFunc.deleteSelectedBtn()">批量删除</a></div><div class="col-sm-6"></div></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th style="width:20px;text-align: center;"><input type="checkbox" value="checked" class="input-mini" ng-checked="pageData.selectedall" ng-click="pageFunc.selectAll()"></th><th class="center">分类编号</th><th class="center">分类名称</th><th class="center">操作</th></tr></thead><tbody><tr class="gradeX" ng-repeat="item in pageData.dataList"><td style="text-align: center;"><input type="checkbox" value="checked" class="input-mini" ng-checked="item.selected" ng-click="pageFunc.selectRecord(item)"></td><td class="center">{{item.category_id}}</td><td class="center">{{item.category_name}}</td><td class="center"><button class="btn btn-primary center col-sm-4" ng-click="pageFunc.showAddClassify(item)">修改</button> <button class="btn btn-danger center col-sm-3 col-sm-offset-1" ng-click="pageFunc.deleteSingleBtn(item)">删除</button></td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pageData.pagesize*pageData.currentPage-pageData.pagesize}} - {{pageData.pagesize*pageData.currentPage}} 总计{{pageData.totalItems}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="pageData.totalItems" ng-model="pageData.currentPage" class="pagination-sm" items-per-page="pageData.pagesize" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageFunc.pageChanged()" style="float:right;" max-size="6"></pagination></div></div></div></div></div></div></div></div><div class="modal inmodal" id="dealModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>添加分类</h4></div><div class="modal-body modalBody"><div class="form-group mBottom10"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 分类名称：</label><div class="col-sm-9"><input type="text" class="form-control" name="productTitle" placeholder="分类名称" ng-model="pageData.category_name" required="" ng-minlength="1" ng-maxlength="100" ng-blur="productTitleErr={error:myForm.productTitle.$dirty&&myForm.productTitle.$invalid,errmsg:\'请填写分类名称\'}" ng-focus="productTitleErr={error:null,errmsg:null}"></div></div></div><div class="modal-footer center"><button class="col-sm-offset-2 btn btn-primary" ng-if="pageData.category_id==\'add\'" ng-click="pageFunc.addClassify()">添加</button> <button class="col-sm-offset-2 btn btn-primary" ng-if="pageData.category_id!=\'add\'" ng-click="pageFunc.updateClassify()">修改</button> <button class="col-sm-offset-2 btn btn-primary" ng-click="pageFunc.clear()">取消</button></div></div></div></div>'),e.put("app/express/express.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>快递列表</h2><ol class="breadcrumb"><li><a>快递管理</a></li><li class="active"><strong>快递列表</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>快递列表</h5></div><div class="ibox-content"><div class="row"><div class="col-sm-6"><a class="btn btn-primary" ng-click="pageFunc.showAddExpress(\'add\')">添加</a></div><div class="col-sm-6"><div id="editable_filter" class="dataTables_filter floatR">搜索： <label><input type="search" class="form-control input-sm" placeholder="请输入要搜索的名称" aria-controls="editable" ng-model="pageData.keyword" ng-keyup="pageFunc.ctrlSearch($event)"></label> <i class="iconfont icon-sousuo btnSearch" ng-click="pageFunc.search()"></i></div></div></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th style="width:20px;text-align: center;"><input type="checkbox" value="checked" class="input-mini" ng-checked="pageData.selectedall" ng-click="pageFunc.selectAll()"></th><th class="center">快递公司代码</th><th class="center">快递公司名称</th></tr></thead><tbody><tr class="gradeX" ng-repeat="item in pageData.dataList"><td style="text-align: center;"><input type="checkbox" value="checked" class="input-mini" ng-checked="item.selected" ng-click="pageFunc.selectRecord(item)"></td><td class="center">{{item.express_company_code}}</td><td class="center">{{item.express_company_name}}</td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pageData.pagesize*pageData.currentPage-pageData.pagesize}} - {{pageData.pagesize*pageData.currentPage}} 总计{{pageData.totalItems}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="pageData.totalItems" ng-model="pageData.currentPage" class="pagination-sm" items-per-page="pageData.pagesize" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageFunc.pageChanged()" style="float:right;" max-size="6"></pagination></div></div></div></div></div></div></div></div><div class="modal inmodal" id="dealModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>添加快递公司</h4></div><div class="modal-body modalBody"><div class="form-group"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 快递公司名称：</label><div class="col-sm-9"><input type="text" class="form-control" style="margin-bottom: 20px;" name="productTitle" placeholder="快递公司名称" ng-model="pageData.dataJson.express_company_name" required="" ng-minlength="1" ng-maxlength="100" ng-blur="productTitleErr={error:myForm.productTitle.$dirty&&myForm.productTitle.$invalid,errmsg:\'请填写快递公司名称\'}" ng-focus="productTitleErr={error:null,errmsg:null}"></div></div><div class="form-group"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 快递公司代码：</label><div class="col-sm-9"><input type="text" class="form-control" name="productTitle" placeholder="快递公司代码" ng-model="pageData.dataJson.express_company_code" required="" ng-minlength="1" ng-maxlength="100" ng-blur="productTitleErr={error:myForm.productTitle.$dirty&&myForm.productTitle.$invalid,errmsg:\'请填写快递公司代码\'}" ng-focus="productTitleErr={error:null,errmsg:null}"></div></div></div><div class="modal-footer center"><button class="col-sm-offset-2 btn btn-primary" ng-if="pageData.dataJson.express_company_id==\'add\'" ng-click="pageFunc.addExpress()">添加</button> <button class="col-sm-offset-2 btn btn-primary" ng-if="pageData.dataJson.express_company_id!=\'add\'" ng-click="pageFunc.updateExpress()">修改</button> <button class="col-sm-offset-2 btn btn-primary" ng-click="pageFunc.clear()">取消</button></div></div></div></div>'),e.put("app/hometablepage/hometablepage.html",'<div class="wrapper wrapper-content marginTp10 wrapDashbord"><div class="warp-sms" ng-show="vm.isShow"><div class="sms-content"><span>短信余额：</span> <span ng-bind="vm.sms_account"></span> <a ng-show="vm.website.sms_is_open" ng-click="vf.rechargeQRCode()">[充值]</a> <a ng-show="vm.website.sms_is_open" ng-click="vf.setAccountNotice()">[设置余额提醒]</a></div></div><div class="wrapStatistic" ng-show="vm.isShow"><table width="100%"><tr><td width="20%"><div style="padding-right: 5px;"><div class="item-header bgactive" style="margin-left: 10px;"><div class="active-ico" style="background: url(\'http://files.comeoncloud.net/img/ico/login.png\') no-repeat center;"></div><span class="text"><i class="iconfont icon-zhuanjiaku"></i> <span>访问量</span></span> <span ng-click="vf.gotoTabPage(\'访问量明细\',\'/App/Monitor/PVEventDetails.aspx\')" class="num" ng-bind="vm.dashboard.visit_total">0</span><div class="triangle" style="left: 47%;"></div></div><div class="item-main" style="margin-left: 10px;"><ul class="item-title"><li>昨天</li><li>近7天</li><li>近30天</li></ul><ul class="item-value"><li><label style="cursor: pointer;" id="activeDay" ng-bind="vm.dashboard.visit_num_lastday" ng-click="vf.goToBrowserPage(\'/App/Monitor/PVEventDetails.aspx?date=day\')">0</label></li><li><label style="cursor: pointer;" id="activeWeek" ng-bind="vm.dashboard.visit_num_lastweek" ng-click="vf.goToBrowserPage(\'/App/Monitor/PVEventDetails.aspx?date=week\')">0</label></li><li><label style="cursor: pointer;" id="activeMonth" ng-bind="vm.dashboard.visit_num_lastmonth" ng-click="vf.goToBrowserPage(\'/App/Monitor/PVEventDetails.aspx?date=month\')">0</label></li></ul></div></div></td><td width="20%"><div style="padding: 5px;"><div class="item-header bgoppor"><div class="active-ico" style="background: url(\'http://files.comeoncloud.net/img/ico/custom.png\') no-repeat center;"></div><span class="text"><i class="iconfont icon-zhuanjiaku"></i> <span>访客量</span></span> <span ng-click="vf.gotoTabPage(\'访客量明细\',\'/App/Monitor/UVEventDetails.aspx\')" class="num" ng-bind="vm.dashboard.uv_total">0</span><div class="triangle" style="left: 47%;"></div></div><div class="item-main"><ul class="item-title"><li>昨天</li><li>近7天</li><li>近30天</li></ul><ul class="item-value"><li><label style="cursor: pointer;" ng-click="vf.goToUVPage(\'/App/Monitor/UVEventDetails.aspx?date=day\')" id="activeDay" ng-bind="vm.dashboard.uv_num_lastday">0</label></li><li><label style="cursor: pointer;" ng-click="vf.goToUVPage(\'/App/Monitor/UVEventDetails.aspx?date=week\')" id="activeWeek" ng-bind="vm.dashboard.uv_num_lastweek">0</label></li><li><label style="cursor: pointer;" ng-click="vf.goToUVPage(\'/App/Monitor/UVEventDetails.aspx?date=month\')" id="activeMonth" ng-bind="vm.dashboard.uv_num_lastmonth">0</label></li></ul></div></div></td><td width="20%"><div style="padding: 5px;"><div class="item-header bgfans"><div class="active-ico" style="background: url(\'http://files.comeoncloud.net/img/ico/fans.png\') no-repeat center;"></div><span class="text"><i class="iconfont icon-shangchengicon08"></i> <span>公众号粉丝</span></span> <span ng-click="vf.gotoTabPage(\'会员管理\',\'/App/Cation/UserManage.aspx?mapping_type=1&page=fans\')" class="num" ng-bind="vm.dashboard.fans_total">0</span><div class="triangle" style="left: 47%;"></div></div><div class="item-main"><ul class="item-title"><li>昨天</li><li>近7天</li><li>近30天</li></ul><ul class="item-value"><li><label style="cursor: pointer;" ng-click="vf.goToMemberPage(\'/App/Cation/UserManage.aspx?mapping_type=1&page=fans&date=day\')" id="activeDay" ng-bind="vm.dashboard.fans_num_lastday">0</label></li><li><label style="cursor: pointer;" ng-click="vf.goToMemberPage(\'/App/Cation/UserManage.aspx?mapping_type=1&page=fans&date=week\')" id="activeWeek" ng-bind="vm.dashboard.fans_num_lastweek">0</label></li><li><label style="cursor: pointer;" ng-click="vf.goToMemberPage(\'/App/Cation/UserManage.aspx?mapping_type=1&page=fans&date=month\')" id="activeMonth" ng-bind="vm.dashboard.fans_num_lastmonth">0</label></li></ul></div></div></td><td width="20%"><div style="padding: 5px;"><div class="item-header bgtruename"><div class="active-ico" style="background: url(\'http://files.comeoncloud.net/img/ico/tuser.png\') no-repeat center;"></div><span class="text"><i class="iconfont icon-shangchengicon08"></i> <span>注册用户</span></span> <span ng-click="vf.gotoTabPage(\'会员管理\',\'/App/Cation/UserManage.aspx?mapping_type=1&page=truename\')" class="num" ng-bind="vm.dashboard.member_total">0</span><div class="triangle" style="left: 47%;"></div></div><div class="item-main"><ul class="item-title"><li>昨天</li><li>近7天</li><li>近30天</li></ul><ul class="item-value"><li><label style="cursor: pointer;" ng-click="vf.goToMemberPage(\'/App/Cation/UserManage.aspx?mapping_type=1&page=truename&date=day\')" id="activeDay" ng-bind="vm.dashboard.member_num_lastday">0</label></li><li><label style="cursor: pointer;" ng-click="vf.goToMemberPage(\'/App/Cation/UserManage.aspx?mapping_type=1&page=truename&date=week\')" id="activeWeek" ng-bind="vm.dashboard.member_num_lastweek">0</label></li><li><label style="cursor: pointer;" ng-click="vf.goToMemberPage(\'/App/Cation/UserManage.aspx?mapping_type=1&page=truename&date=month\')" id="activeMonth" ng-bind="vm.dashboard.member_num_lastmonth">0</label></li></ul></div></div></td><td width="20%"><div style="padding: 5px;"><div class="item-header bgcustom"><div class="active-ico" style="background: url(\'http://files.comeoncloud.net/img/ico/order.png\') no-repeat center;"></div><span class="text"><i class="iconfont icon-shangchengicon13"></i> <span>订单数</span></span> <span ng-click="vf.gotoTabPage(\'订单列表\',\'/customize/mmpadmin/index.aspx?hidemenu=1#/index/orderList\')" class="num" ng-bind="vm.dashboard.order_total">0</span><div class="triangle" style="left: 47%;"></div></div><div class="item-main"><ul class="item-title"><li>昨天</li><li>近7天</li><li>近30天</li></ul><ul class="item-value"><li><label style="cursor: pointer;" ng-click="vf.goToRelatedPage(\'/customize/mmpadmin/index.aspx?hidemenu=1#/index/orderList\')" id="activeDay" ng-bind="vm.dashboard.order_num_lastday">0</label></li><li><label style="cursor: pointer;" ng-click="vf.goToRelatedPage(\'/customize/mmpadmin/index.aspx?hidemenu=1#/index/orderList\')" id="activeWeek" ng-bind="vm.dashboard.order_num_lastweek">0</label></li><li><label style="cursor: pointer;" ng-click="vf.goToRelatedPage(\'/customize/mmpadmin/index.aspx?hidemenu=1#/index/orderList\')" id="activeMonth" ng-bind="vm.dashboard.order_num_lastmonth">0</label></li></ul></div></div></td></tr></table></div><div class="row" ng-show="vm.isShow"><div class="col-xs-9"><div id="chartHeight" class="ibox float-e-margins" style="padding-left: 10px;padding-top: 10px;"><div class="ibox-content"><div class="row"><div class="col-xs-9 m-b-xs"><div data-toggle="buttons" class="btn-group"><label class="btn btn-sm btn-white" ng-class="{\'active bgactive colorFFF\':vm.currIndex==0}" ng-click="vf.selectTab(0)"><input type="radio" id="option4" name="options"> 新增访问量</label> <label class="btn btn-sm btn-white" ng-class="{\'active bgoppor colorFFF\':vm.currIndex==3}" ng-click="vf.selectTab(3)"><input type="radio" id="option7" name="options"> 新增访客</label> <label class="btn btn-sm btn-white" ng-class="{\'active bgfans colorFFF\':vm.currIndex==4}" ng-click="vf.selectTab(4)"><input type="radio" id="option8" name="options"> 公众号粉丝</label> <label class="btn btn-sm btn-white" ng-class="{\'active bgtruename colorFFF\':vm.currIndex==2}" ng-click="vf.selectTab(2)"><input type="radio" id="option6" name="options"> 注册用户</label> <label class="btn btn-sm btn-white" ng-class="{\'active bgcustom colorFFF\':vm.currIndex==1}" ng-click="vf.selectTab(1)"><input type="radio" id="option5" name="options"> 新增订单数</label></div></div><div class="col-xs-3"><div class="input-group" style="width: 100%;text-align: center;"><select class="form-control input-sm" style="height: 100%;" ng-model="vm.chartSelect" ng-options="chartSelect.name for chartSelect in vm.chartSelects" ng-change="vf.selectChart()"></select></div></div></div><div class="m-t-sm"><div class="row"><div class="col-xs-10"><canvas id="lineChartOne" height="300px" width="872px"></canvas><canvas id="lineChartTwo" height="300px" width="872px"></canvas></div></div></div></div></div></div><div class="col-xs-3"><div class="ibox float-e-margins" style="margin-top: 10px; margin-right: 5px;background-color: #fff;height: {{vm.rightHeight}}px;"><div class="ibox-title"><h5>任务中心</h5></div><div class="ibox-content"><div class="product-stock" ng-show="vm.taskCenter"><a ng-click="vf.gotoProductList()" ng-show="vm.taskCenter.product_count>0"><i class="iconfont icon-icoyuan"></i>当前有<span class="stock_count">{{vm.taskCenter.product_count}}</span>件商品库存告急。<br></a> <a ng-click="vf.gotoOrderList(0,\'待发货\')" ng-show="vm.taskCenter.order_delivery_count>0"><i class="iconfont icon-icoyuan"></i>当前有<span class="stock_count">{{vm.taskCenter.order_delivery_count}}</span>个待发货订单。<br></a> <a ng-click="vf.gotoOrderList(0,\'退款退货\')" ng-show="vm.taskCenter.order_refund_count>0"><i class="iconfont icon-icoyuan"></i>当前有<span class="stock_count">{{vm.taskCenter.order_refund_count}}</span>个待退款订单。</a></div><div ng-show="!vm.taskCenter">暂无任务</div></div></div></div></div><div class="row" ng-show="vm.isShow"><div class="col-xs-12"><div class="ibox float-e-margins" style="margin-left: 10px;"><div class="ibox-title"><h5>操作日志</h5></div><div class="ibox-content"><div class="row"><div class="col-xs-2"><div class="input-group" style="width: 100%;text-align: center;"><select style="height: 100%;" name="editable_length" aria-controls="editable" class="form-control input-sm" ng-model="vm.userAccount" ng-options="userAccount.text for userAccount in vm.userAccounts" ng-change="vf.userAccountChange()"></select></div></div><div class="col-xs-2"><div class="input-group" style="width: 100%;text-align: center;"><select style="height: 100%;" name="editable_length" aria-controls="editable" class="form-control input-sm" ng-model="vm.userAction" ng-options="userAction.text for userAction in vm.userActions" ng-change="vf.userAccountChange()"></select></div></div></div><div class="table-responsive" style="overflow: hidden;"><table class="table table-striped"><thead><tr><th>帐号</th><th>姓名</th><th>行为</th><th>时间</th></tr></thead><tbody><tr ng-repeat="item in vm.userActionLists"><td ng-bind="item.user_id"></td><td ng-bind="item.true_name"></td><td><span class="pie" ng-bind="item.remark"></span></td><td>{{item.time | date:\'yyyy-MM-dd HH:mm:ss\'}}</td></tr></tbody></table><div class="row" ng-if="vm.totalItems==0" style="text-align: center">没有数据</div><div class="row"><div class="col-xs-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+vm.pagesize*vm.currentPage-vm.pagesize}} - {{vm.pagesize*vm.currentPage}} 总计{{vm.totalItems}}个</div></div><div class="col-xs-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="vm.totalItems" ng-model="vm.currentPage" class="pagination-sm" items-per-page="vm.pagesize" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="vf.pageChanged()" style="float:right;" max-size="6"></pagination></div></div></div></div></div></div></div></div><div class="row" style="margin-right: 0px; margin-left: 0px;" ng-show="vm.isHide"><div class="col-xs-12"><div class="ibox float-e-margins" style="margin-top: 10px;background-color: #fff;height: {{vm.rightHeight}}px;"><div class="ibox-title"><h5>任务中心</h5></div><div class="ibox-content"><div class="product-stock"><a ng-click="vf.gotoProductList()" ng-if="vm.taskCenter.product_count>0"><i class="iconfont icon-icoyuan"></i>当前有<span class="stock_count">{{vm.taskCenter.product_count}}</span>件商品库存告急,请及时备货。<br></a> <a ng-click="vf.gotoOrderList(0,\'待发货\')" ng-show="vm.taskCenter.order_delivery_count>0"><i class="iconfont icon-icoyuan"></i>当前有<span class="stock_count">{{vm.taskCenter.order_delivery_count}}</span>个待发货订单。<br></a> <a ng-click="vf.gotoOrderList(0,\'退款退货\')" ng-show="vm.taskCenter.order_refund_count>0"><i class="iconfont icon-icoyuan"></i>当前有<span class="stock_count">{{vm.taskCenter.order_refund_count}}</span>个待退款订单。<br></a> <a ng-click="vf.gotoSettlementList()" ng-if="vm.taskCenter.is_confirm_supplier>0"><i class="iconfont icon-icoyuan"></i>当前有待确认的结算单。<br></a></div><div ng-if="!vm.taskCenter">暂无任务</div></div></div></div></div></div><div class="modal inmodal" id="smsModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>余额提醒设置</h4></div><div class="modalBody"><div class="form-group"><label class="col-sm-3 control-label mTop10"><span class="colorRed">*</span> 设置提醒值：</label><div class="col-sm-9"><input type="text" ng-model="vm.website.sms_remind_value" class="form-control" name="productTitle" placeholder="必填项,当低于设置的值时会发送短信通知。" required="" ng-minlength="1"> <span class="modal-desc">当短信余额低于以上所设置的值时会发送短信通知。</span></div></div><div class="form-group"><label class="col-sm-3 control-label mTop25"><span class="colorRed">*</span> 设置提醒手机：</label><div class="col-sm-9 mTop15"><input type="text" class="form-control" ng-model="vm.website.sms_remind_phones" name="productTitle" placeholder="必填项,多个手机号用逗号隔开。" required="" ng-minlength="1"> <span class="modal-desc">可以填写多个手机,手机号码之间用逗号隔开。</span></div></div><div class="form-group"><label class="col-sm-3 control-label mTop25"><span class="colorRed">*</span> 设置提醒频率：</label><div class="col-sm-9 mTop15"><select class="form-control" ng-model="vm.website.sms_remind_frequency" ng-options="time.name for time in vm.noticeTimes"></select></div></div></div><div class="modal-footer center"><button class="btn btn-primary" ng-click="vf.setSmsAccount()">确定提交</button></div></div></div></div><div class="modal bs-example-modal-sm" id="qCodeModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-sm"><div class="modal-content"><div class="modal-header center modalHeader"><h4>用微信扫描二维码</h4></div><div class="modal-body" style="padding: 30px;overflow-y: visible;"><img ng-src="{{vm.qcodedata.qcode}}" alt="" style="width:242px;height:242px;margin:0 auto;"></div></div></div></div>'),
e.put("app/login/login.html",'<div class="container"><div class="middle-box text-center loginscreen animated fadeInDown" style="margin-top: 18%;"><div><form class="m-t" role="form" ng-submit="userlogin()"><div class="form-group"><input type="text" class="form-control" placeholder="请输入账号" ng-model="userinfo.username" required=""></div><div class="form-group"><input type="password" class="form-control" placeholder="请输入密码" ng-model="userinfo.password" required=""></div><button type="submit" class="btn btn-primary block full-width m-b">登录</button></form><p class="m-t"><small>至云信息科技有限公司</small></p></div></div></div>'),e.put("app/marketingCenter/marketingCenter.html",'<div class="wrapper wrapper-content animated fadeInRight wrapMarket"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins" style="background-color: #fff;padding-top: 24px;"><div class="ibox-title rewrite-title" ng-hide="vm.isHideCustomize"><i class="icon iconfont icon-cuxiaotitle titleicon colorRed"></i><div class="colorRed titleword">营销</div><div class="promotion bgRed"></div></div><br><div class="ibox-content" style="padding-bottom: 0px;padding-top: 0px;" ng-hide="vm.isHideCustomize"><div class="row"><div class="col-xs-2" ng-class="{noclick:!vm.rights.forward}"><div class="content" ng-click="vf.goToPage(\'微转发\',\'/App/Forward/WXForwardMange.aspx\',vm.rights.forward)"><div><i class="iconfont icon-huiyuantubiao color7AC5A5" ng-class="{colorEDECEA:!vm.rights.forward}"></i></div><div><span>微转发</span></div></div></div><div class="col-xs-2" ng-class="{noclick:!vm.rights.fans}"><div class="content" ng-click="vf.goToPage(\'微吸粉\',\'/App/Forward/WxFansManage.aspx\',vm.rights.fans)"><div><i class="iconfont icon-gongnengyeshequhaoyouhudong colorFAD57C" ng-class="{colorEDECEA:!vm.rights.fans}"></i></div><div><span>微吸粉</span></div></div></div><div class="col-xs-2" ng-class="{noclick:!vm.rights.business}"><div ng-hide="vm.isHideCustomize" class="content" ng-click="vf.goToPage(\'微商机\',\'/Admin/DistributionOffLine/ProjectList.aspx\',vm.rights.business)"><div><i class="iconfont icon-shangji-yuan colorFD9E5C" ng-class="{colorEDECEA:!vm.rights.business}"></i></div><div><span>微商机</span></div></div></div><div class="col-xs-2" ng-class="{noclick:!vm.rights.sign}"><div ng-hide="vm.isHideCustomize" class="content" ng-click="vf.goToPage(\'LBS签到\',\'/Admin/SignIn/AddressList.aspx\',vm.rights.sign)"><div><i class="iconfont icon-weizhi-yuan colorF0A1AB" ng-class="{colorEDECEA:!vm.rights.sign}"></i></div><div><span>LBS签到</span></div></div></div><div class="col-xs-2"></div><div class="col-xs-2"></div></div></div><div class="ibox-title rewrite-title"><i class="icon iconfont icon-cuxiaotitle titleicon colorFE7700"></i><div class="colorFE7700 titleword">促销</div><div class="promotion"></div></div><br><div class="ibox-content" style="padding-bottom: 0px;padding-top: 0px;"><div class="row"><div class="col-xs-2" ng-class="{noclick:!vm.rights.coupon}"><div class="content" ng-click="vf.goToPage(\'优惠券\',\'/customize/mmpadmin/index.aspx?hidemenu=1#/index/cardList//\',vm.rights.coupon)"><div><i class="iconfont icon-qiaquan ff4225" ng-class="{colorEDECEA:!vm.rights.coupon}"></i></div><div><span>优惠券</span></div></div></div><div class="col-xs-2" ng-class="{noclick:!vm.rights.groupbuy}"><div class="content" ng-click="vf.goToPage(\'团购\',\'/customize/mmpadmin/index.aspx?hidemenu=1#/index/groupBuyRuleList\',vm.rights.groupbuy)"><div><i class="iconfont icon-tuangouyuan color7D88D4" ng-class="{colorEDECEA:!vm.rights.groupbuy}"></i></div><div><span>团购</span></div></div></div><div class="col-xs-2" ng-class="{noclick:!vm.rights.timelimit}"><div class="content" ng-click="vf.goToPage(\'限时特卖\',\'/customize/mmpadmin/index.aspx?hidemenu=1#/index/newsaleList/\',vm.rights.timelimit)"><div><i class="iconfont icon-jiage colorFFC400" ng-class="{colorEDECEA:!vm.rights.timelimit}"></i></div><div><span>限时特卖</span></div></div></div><div class="col-xs-2" ng-class="{noclick:!vm.rights.crownfunding}"><div ng-hide="vm.isHideCustomize" class="content" ng-click="vf.goToPage(\'众筹\',\'/customize/mmpadmin/index.aspx?hidemenu=1#/index/raiselist/\',vm.rights.crownfunding)"><div><i class="iconfont icon-chou colorFE7700" ng-class="{colorEDECEA:!vm.rights.crownfunding}"></i></div><div><span>众筹</span></div></div></div><div class="col-xs-2"></div><div class="col-xs-2"></div></div></div><div class="ibox-title rewrite-title"><i class="icon iconfont icon-youxititle titleicon color0081AF"></i><div class="color0081AF titleword">游戏</div><div class="game"></div></div><br><div class="ibox-content" style="padding-bottom: 0px;padding-top: 0px;"><div class="row"><div class="col-xs-2" ng-class="{noclick:!vm.rights.scratch}"><div class="content" ng-click="vf.goToPage(\'刮一刮\',\'/App/Lottery/WXLotteryMgrV1.aspx\',vm.rights.scratch)"><div><i class="iconfont icon-guaguaqia color9AE1EB" ng-class="{colorEDECEA:!vm.rights.scratch}"></i></div><div><span>刮一刮</span></div></div></div><div class="col-xs-2" ng-class="{noclick:!vm.rights.shake}"><div class="content" ng-click="vf.goToPage(\'摇一摇\',\'/customize/mmpadmin/index.aspx?hidemenu=1#/index/shakeList/shake\',vm.rights.shake)"><div><i class="iconfont icon-yaoyiyaoshixin color4570B1" ng-class="{colorEDECEA:!vm.rights.shake}"></i></div><div><span>摇一摇</span></div></div></div><div class="col-xs-2" ng-class="{noclick:!vm.rights.greetingcard}"><div ng-hide="vm.isHideCustomize" class="content" ng-click="vf.goToPage(\'贺卡\',\'/Admin/GreetingCard/GreetingCardsManage.aspx\',vm.rights.greetingcard)"><div><i class="iconfont icon-qiapai colorFF0051" ng-class="{colorEDECEA:!vm.rights.greetingcard}"></i></div><div><span>贺卡</span></div></div></div><div class="col-xs-2" ng-class="{noclick:!vm.rights.game}"><div ng-hide="vm.isHideCustomize" class="content" ng-click="vf.goToPage(\'游戏\',\'/Game/PlanList.aspx\',vm.rights.game)"><div><i class="iconfont icon-quanbuyouxi colorFFC400" ng-class="{colorEDECEA:!vm.rights.game}"></i></div><div><span>游戏</span></div></div></div><div class="col-xs-2" ng-class="{noclick:!vm.rights.microshow}"><div ng-hide="vm.isHideCustomize" class="content" ng-click="vf.goToPage(\'微秀\',\'/App/WXShow/WXShowInfoMgr.aspx\',vm.rights.microshow)"><div><i class="iconfont icon-weixiu colorFE7700" ng-class="{colorEDECEA:!vm.rights.microshow}"></i></div><div><span>微秀</span></div></div></div><div class="col-xs-2"></div></div></div><div ng-hide="vm.isHideCustomize" class="ibox-title rewrite-title"><i class="icon iconfont icon-shujuhudong titleicon colorDFDFE0"></i><div class="colorA9B0B6 titleword">数据互动</div><div class="dataexchange"></div></div><div ng-hide="vm.isHideCustomize" class="ibox-content" style="padding-bottom: 0px;padding-top: 0px;"><div class="row"><div class="col-xs-2" ng-class="{noclick:!vm.rights.questionnaire}"><div class="content" ng-click="vf.goToPage(\'问卷\',\'/App/Questionnaire/QuestionnaireMgr.aspx?type=1\',vm.rights.questionnaire)"><div><i class="iconfont icon-diaochawenjuan colorAB50AF" ng-class="{colorEDECEA:!vm.rights.questionnaire}"></i></div><div><span>问卷</span></div></div></div><div class="col-xs-2" ng-class="{noclick:!vm.rights.answer}"><div class="content" ng-click="vf.goToPage(\'答题\',\'/App/Questionnaire/QuestionnaireSetMgr.aspx\',vm.rights.answer)"><div><i class="iconfont icon-shequnengshou color00BF98" ng-class="{colorEDECEA:!vm.rights.answer}"></i></div><div><span>答题</span></div></div></div><div class="col-xs-2" ng-class="{noclick:!vm.rights.votingtopics}"><div class="content" ng-click="vf.goToPage(\'投票(选题)\',\'/App/TheVote/TheVoteInfoMgr.aspx\',vm.rights.votingtopics)"><div><i class="iconfont icon-toupiaoshixin colorFFC400" ng-class="{colorEDECEA:!vm.rights.votingtopics}"></i></div><div><span>投票(选题)</span></div></div></div><div class="col-xs-2" ng-class="{noclick:!vm.rights.topics}"><div class="content" ng-click="vf.goToPage(\'话题\',\'/admin/review/reviewlist.aspx\',vm.rights.topics)"><div><i class="iconfont icon-966yuanxingtengxunweibo color03ACE3" ng-class="{colorEDECEA:!vm.rights.topics}"></i></div><div><span>话题</span></div></div></div><div class="col-xs-2" ng-class="{noclick:!vm.rights.micromonitoring}"><div class="content" ng-click="vf.goToPage(\'微监测\',\'/Admin/ShareMonitor/ShareMonitorManage/ShareMonitorManage.aspx\',vm.rights.micromonitoring)"><div><i class="iconfont icon-circularframeliulan color00D161" ng-class="{colorEDECEA:!vm.rights.micromonitoring}"></i></div><div><span>微监测</span></div></div></div></div></div></div></div></div></div>'),e.put("app/navList/navList.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>导航列表</h2><ol class="breadcrumb"><li><a>导航</a></li><li><a>列表</a></li><li class="active"><strong>导航列表</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>导航列表</h5></div><div class="ibox-content"><div class=""><a class="btn btn-primary" ng-click="addcardcouponBtn()">添加</a> <a class="btn btn-danger" ng-click="delallNavBtn()">批量删除</a></div><div class="row"><div class="col-sm-6"><div class="dataTables_length" id="editable_length"><label><select class="form-control" ng-model="oneNav" ng-options="oneNav.navigation_link_name for oneNav in navLists" ng-change="whichcategory(oneNav)"></select></label></div></div></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="selectedall" ng-click="checkedall()"></th><th class="center">导航名称</th><th class="center">导航类型</th><th class="center">父级ID</th><th class="center">导航ID</th><th class="center">导航连接</th><th class="center">导航图片</th><th class="center">导航排序</th><th class="center">编辑</th></tr></thead><tbody><tr class="gradeX" ng-repeat="boxdata in navListData"><td ng-click="selectme(boxdata)" class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="boxdata.selected"></td><td class="center">{{boxdata.navigation_name}}</td><td class="center"><span ng-if="boxdata.navigation_link_type == \'left\'">左侧导航</span> <span ng-if="boxdata.navigation_link_type == \'top\'">顶部导航</span> <span ng-if="boxdata.navigation_link_type == \'bottom\'">底部导航</span> <span ng-if="boxdata.navigation_link_type != \'left\' && boxdata.navigation_link_type != \'top\' && boxdata.navigation_link_type != \'bottom\'">自定义类型</span></td><td class="center">{{boxdata.pre_id}}</td><td class="center">{{boxdata.navigation_id}}</td><td class="center">{{boxdata.navigation_link}}</td><td class="center"><img ng-src="{{boxdata.navigation_img}}" alt="" style="width:60px;height:60px;float: left"></td><td class="center">{{boxdata.navigation_sort}}</td><td class="center"><button class="btn btn-primary col-sm-5" ng-click="editcardcouponBtn(boxdata)">编辑</button> <button class="btn btn-danger col-sm-5 col-sm-offset-2" ng-click="delNavBtn(boxdata)">删除</button></td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totals}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totals" items-per-page="pagesize" max-size="6" ng-model="currentPage" class="pagination-sm" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" style="float:right;"></pagination></div></div></div></div></div></div></div></div><div class="modal inmodal" id="dealModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4 ng-if="isAddcard">添加导航</h4><h4 ng-if="!isAddcard">修改导航</h4></div><div class="modal-body modalBody"><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 导航名称：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入导航名称" ng-model="pageData.navigation_name"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 导航链接：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入导航的链接" ng-model="pageData.navigation_link"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 导航类型：</label><div class="col-sm-5"><select class="form-control" ng-model="addOneNav" ng-options="addOneNav.navigation_link_name for addOneNav in addNavLists" ng-change="changeCategory(addOneNav)"></select></div><div class="col-sm-4" ng-show="showOemAdd"><input type="text" class="form-control mBottom10" placeholder="请输入导航的名称(英语)" ng-model="pageData.navigation_link_type"></div></div><div class="form-group overFlow" ng-if="showPicDom"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 导航图片：</label><div class="col-sm-9"><zafw-upload-img ng-model="pageData.navigation_img"></zafw-upload-img></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label">导航排序：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="数值越大越靠前" ng-model="pageData.navigation_sort"></div></div></div><div class="modal-footer center"><button class="col-sm-offset-2 btn btn-primary" ng-click="addCouponBtn()">保存</button> <button class="col-sm-offset-2 btn btn-primary" ng-click="clear()">取消</button></div></div></div></div>'),e.put("app/paySetInfo/paySetInfo.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>微信配置</h2><ol class="breadcrumb"><li><a>配置</a></li><li><a>修改</a></li><li class="active"><strong>修改配置</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInRight"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>修改配置</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><form method="get" name="myForm" novalidate="" class="form-horizontal" ng-submit="submitProductFunc()"><div class="ibox-content"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 微信AppId：</label><div class="col-sm-3"><input type="text" class="form-control" placeholder="请输入微信AppId" ng-model="payInfo.payconfig_wxappid" required="" ng-minlength="1"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 微信MCH_ID：</label><div class="col-sm-3"><input type="text" class="form-control" placeholder="请输入微信MCH_ID" ng-model="payInfo.payconfig_wxmch_id" required="" ng-minlength="1"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 微信 Key：</label><div class="col-sm-3"><input type="text" class="form-control" placeholder="请输入微信 Key" ng-model="payInfo.payconfig_wxpartnerkey" required="" ng-minlength="1"></div></div><div class="btn btn-danger floatL col-sm-offset-2" ng-click="editPayInfoBtn()">修改配置</div><div class="clearBoth"></div><div class="hr-line-dashed"></div></div></form></div></div></div></div>'),e.put("app/refund/refund.html",'<div class="row border-bottom white-bg" style="padding: 15px;"><a class="btn btn-white floatR" style="margin-right: 10px;" href="javascript:history.go(-1)">返回</a><div class="clear"></div></div><div class="row border-bottom white-bg" ng-show="refundinfo.is_return_product == 1"><div class="refund-state-wrap"><div class="refund-state-text alredycolor">买家申请维权</div><div class="refund-state-text" ng-class="{alredycolor:refundinfo.refund_status >= 1}">商家处理退款申请</div><div class="refund-state-text" ng-class="{alredycolor:refundinfo.refund_status >= 3}">买家退货给商家</div><div class="refund-state-text" ng-show="refundinfo.refund_status == 6" ng-class="{alredycolor:refundinfo.refund_status == 6}">退款完成</div><div class="refund-state-text" ng-show="refundinfo.refund_status == 7" ng-class="{alredycolor:refundinfo.refund_status == 7}">退款关闭</div><div class="clear-both"></div></div><div class="refund-state-wrap"><div class="refund-state-text"><div class="state-circle alredybgcolor">√</div><div class="state-bar-right alredybgcolor"></div></div><div class="refund-state-text"><div class="state-bar-left" ng-class="{alredybgcolor:refundinfo.refund_status >= 1}"></div><div class="state-circle" ng-class="{alredybgcolor:refundinfo.refund_status >= 1}">√</div><div class="state-bar-right" ng-class="{alredybgcolor:refundinfo.refund_status >= 1}"></div></div><div class="refund-state-text"><div class="state-bar-left" ng-class="{alredybgcolor:refundinfo.refund_status >= 3}"></div><div class="state-circle" ng-class="{alredybgcolor:refundinfo.refund_status >= 3}">√</div><div class="state-bar-right" ng-class="{alredybgcolor:refundinfo.refund_status >= 3}"></div></div><div class="refund-state-text"><div class="state-bar-left" ng-class="{alredybgcolor:refundinfo.refund_status >= 6}"></div><div class="state-circle" ng-class="{alredybgcolor:refundinfo.refund_status >= 6}">√</div></div><div class="clear-both"></div></div><div class="refund-state-wrap"><div class="refund-state-text" ng-class="{alredycolor:refundinfo.refund_status >= 0}">{{refundinfo.time | date:"yyyy-MM-dd HH:mm:ss"}}</div><div ng-show="refundinfo.refund_status >= 1" class="refund-state-text" ng-class="{alredycolor:refundinfo.refund_status >= 1}">{{refundtime | date:"yyyy-MM-dd HH:mm:ss"}}</div><div ng-show="refundinfo.refund_status >= 3" class="refund-state-text" ng-class="{alredycolor:refundinfo.refund_status >= 3}">{{hasreturntime | date:"yyyy-MM-dd HH:mm:ss"}}</div><div ng-show="refundinfo.refund_status >= 6" class="refund-state-text" ng-class="{alredycolor:refundinfo.refund_status >= 6}">{{actionreturntime | date:"yyyy-MM-dd HH:mm:ss"}}</div><div class="clear-both"></div></div></div><div class="row border-bottom white-bg" ng-if="refundinfo.is_return_product != 1"><div class="refund-state-wrapT"><div class="refund-state-text alredycolor">买家申请维权</div><div class="refund-state-text" ng-class="{alredycolor:refundinfo.refund_status >= 1}">商家处理退款申请</div><div class="refund-state-text" ng-show="refundinfo.refund_status == 6" ng-class="{alredycolor:refundinfo.refund_status == 6}">退款完成</div><div class="refund-state-text" ng-show="refundinfo.refund_status == 7" ng-class="{alredycolor:refundinfo.refund_status == 7}">退款关闭</div><div class="clear-both"></div></div><div class="refund-state-wrapT"><div class="refund-state-text"><div class="state-circle alredybgcolor">√</div><div class="state-bar-right alredybgcolor"></div></div><div class="refund-state-text"><div class="state-bar-left" ng-class="{alredybgcolor:refundinfo.refund_status >= 3}"></div><div class="state-circle" ng-class="{alredybgcolor:refundinfo.refund_status >= 3}">√</div><div class="state-bar-right" ng-class="{alredybgcolor:refundinfo.refund_status >= 3}"></div></div><div class="refund-state-text"><div class="state-bar-left" ng-class="{alredybgcolor:refundinfo.refund_status >= 6}"></div><div class="state-circle" ng-class="{alredybgcolor:refundinfo.refund_status >= 6}">√</div></div><div class="clear-both"></div></div><div class="refund-state-wrapT"><div class="refund-state-text" ng-class="{alredycolor:refundinfo.refund_status >= 0}">{{refundinfo.time | date:"yyyy-MM-dd HH:mm:ss"}}</div><div ng-show="refundinfo.refund_status >= 3" class="refund-state-text" ng-class="{alredycolor:refundinfo.refund_status >= 3}">{{actionreturntime | date:"yyyy-MM-dd HH:mm:ss"}}</div><div ng-show="refundinfo.refund_status >= 6" class="refund-state-text" ng-class="{alredycolor:refundinfo.refund_status >= 6}">{{actionreturntime | date:"yyyy-MM-dd HH:mm:ss"}}</div><div class="clear-both"></div></div></div><div class="wrapper-content animated fadeInUp refund-page"><div class="row" style="overflow:hidden;"><div class="col-sm-5 no-right-padding"><div class="ibox float-e-margins"><div class="ibox-content common-height"><div><div class="feed-activity-list"><div class="feed-element"><div class="media-body"><h5>售后维权</h5></div></div><div class="feed-element" ng-repeat="boxdata in orderdata.product_listOne"><a href="profile.html" class="pull-left"><img alt="image" class="product-img" ng-src="{{boxdata.img_url}}" style="height:50px;"></a><div class="media-body">{{boxdata.product_name}}<br>{{boxdata.show_property}}</div></div><div class="feed-element"><div class="media-body"><ul class="refund-ul"><li><span class="title">期望结果：</span> <span class="warning-txt" ng-show="refundinfo.is_return_product == 1">我要退款，并退货</span> <span class="warning-txt" ng-show="refundinfo.is_return_product != 1">我要退款，不退货</span></li><li><span class="title">退款金额：</span><span class="warning-txt">{{refundinfo.refund_amount}}</span>&nbsp;元<span ng-if="refundinfo.is_contain_transportfee==1">（包括运费{{orderdata.freight}}元）</span></li><li><span class="title">退还余额：</span><span class="warning-txt">{{refundinfo.refund_account_amount}}</span>&nbsp;元</li><li><span class="title">退还积分：</span><span class="warning-txt">{{refundinfo.refund_score}}</span>&nbsp;积分</li><li><span class="title">维权原因：</span>{{refundinfo.refund_reason}}</li><li><span class="title">维权编号：</span>{{refundinfo.refund_id}}</li></ul></div></div><div class="feed-element no-bottom-border"><div class="media-body"><ul class="refund-ul"><li><span class="title">订单编号：</span> <span class="bluefontcolor">{{orderdata.order_id}}</span></li><li><span class="title">付款时间：</span>{{orderdata.order_time | date:"yyyy-MM-dd hh:mm:ss"}}</li><li><span class="title">物流信息：</span>{{orderdata.express_company_name}}&nbsp;&nbsp;{{orderdata.express_number}}</li><li><span class="title">使用积分：</span>{{orderdata.use_score}}</li><li><span class="title">优惠券：</span>{{orderdata.cardcoupon}}<span ng-if="!orderdata.cardcoupon">无</span></li><li><span class="title">运费：</span>{{orderdata.freight}}&nbsp;元</li><li><span class="title">实收总计：</span><span class="warning-txt">{{orderdata.total_amount}}&nbsp;元</span></li></ul></div></div></div></div></div></div></div><div class="col-sm-7 no-left-padding"><div class="ibox float-e-margins border-left"><div class="ibox-content common-height"><div><div class="feed-activity-list"><div class="feed-element"><div class="media-body refund-opt"><span class="fa fa-exclamation-circle refund-waring-img"></span><div class="refund-warning-wrap" ng-show="refundinfo.refund_status == 0 && refundinfo.is_return_product == 0"><h4>买家已申请退款，等待商家确认收货</h4><p>未发货，买家申请了退款</p><br><button class="btn btn-primary btn-ml margin-right10" ng-click="agreerefund()">同意退款</button> <button class="btn btn-white btn-ml margin-right10" ng-click="dealRefund()">拒绝退款申请</button></div><div class="refund-warning-wrap" ng-show="refundinfo.refund_status == 0 && refundinfo.is_return_product == 1"><h4>已退货，等待商家确认收货</h4><p>收到买家退款并退货申请，请尽快处理</p><br><button class="btn btn-primary btn-ml margin-right10" ng-click="agreerefund()">同意退货，发送退货地址</button> <button class="btn btn-white btn-ml" ng-click="dealRefund()">拒绝退款申请</button></div><div class="refund-warning-wrap" ng-show="refundinfo.refund_status == 1"><h4>商家已同意退款，请退货给商家</h4><p>您已同意退款协议，请等待买家处理</p><br><button class="btn btn-primary btn-ml" ng-click="readexpressNumber()">客服填写快递单号</button></div><div class="refund-warning-wrap" ng-show="refundinfo.refund_status == 2"><h4>商家不同意退款申请</h4><p>您不同意退款协议，请与买家协商解决</p><br></div><div class="refund-warning-wrap" ng-show="refundinfo.refund_status == 3"><h4>已退货，等待商家确认收货</h4><p>买家已退货，物流公司：{{refundinfo.express_company_name}}，物流单号：{{refundinfo.express_number}}</p><br><button ng-show="!vm.pmsTransfersAudit" class="btn btn-primary btn-ml margin-right10" ng-click="agreepaymoney()">确认收货并退款</button> <button class="btn btn-white btn-ml" ng-click="dealpaymoney()">拒绝确认收货</button></div><div class="refund-warning-wrap" ng-show="refundinfo.refund_status == 5"><h4>已退货，商家拒绝确认收货</h4><p>买家已退货，物流公司：{{refundinfo.express_company_name}}，物流单号：{{refundinfo.express_number}}</p><br><p>商家未收到货物，请买家修改物流信息或重新提交申请</p></div><div class="refund-warning-wrap" ng-show="refundinfo.refund_status == 6"><h4>已完成退款申请</h4><p>卖家已完成退款申请</p><br></div><div class="refund-warning-wrap" ng-show="refundinfo.refund_status == 7"><h4>已关闭退款申请</h4><p>买家已经关闭退款申请</p><br></div><div class="clear-both"></div><div class="row refund-img-wrap"><h4>举证图片: <span ng-if="!refundinfo.imagelist.length">&nbsp;&nbsp;&nbsp;无</span></h4><a target="_blank" href="{{imgItem}}" ng-repeat="imgItem in refundinfo.imagelist"><div class="col-sm-3 refund-img"><img ng-src="{{imgItem}}"></div></a></div></div></div><div class="feed-element no-bottom-border"><div class="media-body"><ul class="refund-ul"><li><span class="warning-txt">提醒：</span></li><li>收到买家退货时，请及时验货。</li></ul></div></div></div></div></div></div></div></div><div class="row"><div class="col-sm-12"><div class="ibox float-e-margins"><div class="ibox-content"><div><div class="feed-activity-list"><div class="feed-element"><div class="media-body"><h4>协商记录</h4></div></div><div class="feed-element" ng-repeat="refundlog in refundlogs"><div class="media-body"><ul class="refund-ul"><li><span class="title buyer">{{refundlog.role}}</span>{{refundlog.time | date:"yyyy-MM-dd HH:mm:ss"}}</li><li></li><li><strong>{{refundlog.title}}</strong></li></ul><ul class="refund-ul" ng-bind-html="refundlog.content"></ul></div></div></div></div></div></div></div></div></div><div class="modal inmodal" id="dealModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header left"><h4>维权处理</h4></div><div class="warning-tip">该笔订单通过“<span class="warning-txt" ng-show="orderdata.pay_type == \'WEIXIN\'">微信安全支付</span><span class="warning-txt" ng-show="orderdata.pay_type == \'ALIPAY\'">支付宝安全支付</span>”付款，需您同意退款申请，买家才能退货给您；买家退货后您需再次确认收货后，退款将自动原路退回至买家付款账户；</div><ul class="deal-ul"><li ng-show="refundinfo.is_return_product == 1"><div class="title">处理方式：</div><div class="vl">我要退款，并退货</div><div class="clear-both"></div></li><li ng-show="refundinfo.is_return_product == 0"><div class="title">处理方式：</div><div class="vl">我要退款，不退货</div><div class="clear-both"></div></li><li><div class="title">退款金额：</div><div class="vl warning-txt">{{refundinfo.refund_amount}}元</div><div class="clear-both"></div></li><li><div class="title">退还余额：</div><div class="vl warning-txt">{{refundinfo.refund_account_amount}}元</div><div class="clear-both"></div></li><li><div class="title">退还积分：</div><div class="vl warning-txt" ng-bind="refundinfo.refund_score+\'积分\'"></div><div class="clear-both"></div></li><li ng-show="agreetext && refundinfo.refund_status == 0 && refundinfo.is_return_product == 1"><div class="title">退款地址：</div><div class="vl"><textarea placeholder="请输入退货地址" ng-model="agreerefundAdd" style="width:100%;"></textarea></div><div class="clear-both"></div></li><li ng-show="!agreetext && refundinfo.refund_status == 0"><div class="title">拒绝理由：</div><div class="vl"><textarea placeholder="请输入拒绝理由" ng-model="refuserefundDes" style="width:100%;"></textarea></div><div class="clear-both"></div></li><li ng-show="refundinfo.refund_status == 3 && refundinfo.is_return_product == 1"><div class="title">退款地址：</div><div class="vl">{{refundinfo.refund_address}}</div><div class="clear-both"></div></li></ul><div class="modal-footer center"><div ng-show="refundinfo.refund_status == 0 && refundinfo.is_return_product == 1"><button type="button" class="btn btn-primary" data-dismiss="modal" style="float:right;" ng-show="agreetext" ng-click="startrefundBtn()">同意退货</button> <button type="button" class="btn btn-primary" data-dismiss="modal" style="float:right;" ng-show="!agreetext" ng-click="refuserefundBtn()">拒绝退货</button></div><div ng-show="refundinfo.refund_status == 3 && refundinfo.is_return_product == 1"><button type="button" class="btn btn-primary" data-dismiss="modal" style="float:right;" ng-show="showgetrefund" ng-click="requiregetrefundBtn()">确认收到退货</button> <button type="button" class="btn btn-primary" data-dismiss="modal" style="float:right;" ng-show="!showgetrefund" ng-click="refusegetrefundBtn()">拒绝确认收货</button></div><div ng-show="refundinfo.refund_status == 0 && refundinfo.is_return_product == 0"><button ng-show="!vm.pmsTransfersAudit" type="button" class="btn btn-primary" data-dismiss="modal" style="float:right;" ng-click="conformreturnmoneyBtn()">同意退款</button> <button type="button" class="btn btn-primary" data-dismiss="modal" style="float:right;" ng-show="!agreetext" ng-click="refusereturnmoneyBtn()">拒绝退款</button></div></div></div></div></div><div class="modal inmodal" id="expressNumberModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header left"><h4>填写快递单号</h4></div><div class="modal-body modalBody center" style="min-height: 80px;"><label><select class="form-control" ng-model="vm.expressCompany" ng-options="express.express_company_name for express in vm.expressCompanys"></select></label> <label><input type="text" ng-model="vm.oddnumbers" class="form-control input-sm" placeholder="请输入物流单号" style="height:34px;"></label></div><div class="modal-footer center"><div><button type="button" class="btn btn-primary" data-dismiss="modal" style="float:right;" ng-click="conformNumberBtn()">确认</button></div></div></div></div></div>'),e.put("app/scoreSetInfo/scoreSetInfo.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>积分配置</h2><ol class="breadcrumb"><li><a>配置</a></li><li><a>修改</a></li><li class="active"><strong>修改配置</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInRight"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>修改配置</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><form method="get" name="myForm" novalidate="" class="form-horizontal" ng-submit="submitProductFunc()"><div class="ibox-content"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 订单获得积分：</label><div class="col-sm-1 lineHeight34">下单金额</div><div class="col-sm-2 noLRpadding"><input type="number" class="form-control" placeholder="下单金额" ng-model="scoreInfo.order_amount" required="" ng-minlength="1"></div><div class="col-sm-1 lineHeight34">元，</div><div class="col-sm-1 lineHeight34" style="width:116px;">交易成功获得</div><div class="col-sm-2 noLRpadding"><input type="number" class="form-control" placeholder="获得积分" ng-model="scoreInfo.order_score" required="" ng-minlength="1"></div><div class="col-sm-1 lineHeight34">积分</div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 积分兑换比例：</label><div class="col-sm-1 lineHeight34">使用</div><div class="col-sm-2 noLRpadding"><input type="number" class="form-control" placeholder="多少积分" ng-model="scoreInfo.exchange_score" required="" ng-minlength="1"></div><div class="col-sm-1 lineHeight34">积分，</div><div class="col-sm-1 lineHeight34" style="width:116px;">可以抵扣</div><div class="col-sm-2 noLRpadding"><input type="number" class="form-control" placeholder="抵扣金额" ng-model="scoreInfo.exchange_amount" required="" ng-minlength="1"></div><div class="col-sm-1 lineHeight34">元</div></div><div class="btn btn-danger floatL col-sm-offset-2" ng-click="editScoreInfoBtn()">修改配置</div><div class="clearBoth"></div><div class="hr-line-dashed"></div></div></form></div></div></div></div>'),e.put("app/shake/addshake.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>添加摇一摇</h2><ol class="breadcrumb"><li><a>营销</a></li><li><a>摇一摇</a></li><li class="active"><strong>添加摇一摇</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>添加摇一摇</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><form method="get" name="myForm" novalidate="" class="form-horizontal" ng-submit="submitProductFunc()"><div class="ibox-content" style="margin-bottom: 80px;"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 活动名称</label><div class="col-sm-3"><input type="text" id="shakename" class="form-control" name="productTitle" placeholder="活动名称" ng-model="LotteryName" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 说明：</label><div class="col-sm-4"><textarea id="describe" rows="3" cols="20" class="form-control" name="productSummary" placeholder="说明" ng-model="sharedesc" required="" ng-minlength="1" ng-maxlength="200"></textarea></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 图片：</label><div class="col-sm-9" id="shakeimg"><zafw-upload-img ng-model="share_img_url"></zafw-upload-img></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 介绍：</label><div class="col-sm-8" id="shakecontent"><div class="content" name="content" ng-model="LotteryContent"></div></div></div><div class="form-group"><label class="col-sm-2 control-label">消耗积分(次数摇完之后)：</label><div class="col-sm-3"><input type="text" class="form-control" name="productTitle" placeholder="消耗积分" ng-model="ponits" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 开始时间：</label><div class="col-sm-3"><div class="input-group date"><input id="timestart" type="text" class="form-control" placeholder="开始时间" ng-model="start_time" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 结束时间：</label><div class="col-sm-3"><div class="input-group date"><input id="timeend" type="text" class="form-control" placeholder="结束时间" ng-model="stop_time" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed"></span> 活动状态：</label><div class="col-sm-4" style="padding-top: 4px;"><input type="radio" id="start_id" name="active" value="1" ng-model="radioData.active"> <label for="start_id">运行</label> &nbsp;&nbsp;&nbsp; <input type="radio" id="stop_id" name="active" value="0" ng-model="radioData.active"> <label for="stop_id">停止</label></div></div><div class="form-group"><label class="col-sm-2 control-label" id="joincount"><span class="colorRed">*</span> 参与次数：</label><div class="col-sm-2" style="width: 20%;"><input type="radio" name="select" value="0" ng-model="radioData.select"> 每人 <input id="everyone" type="number" min="0" ng-pattern="/^[0-9]+$/" class="form-control" name="number" style="width:98px;display:inline;" ng-model="numOne" ng-click="selectPeople()">&nbsp;次</div><div class="col-sm-2" style="width: 20%;"><input type="radio" name="select" value="1" ng-model="radioData.select"> 每天 <input id="everyday" type="number" class="form-control" name="number" min="0" ng-pattern="/^[0-9]+$/" style="width:98px;display:inline;" ng-model="numTwo" ng-click="selectDay()">&nbsp;次</div></div><div class="form-group"><label class="col-sm-2 control-label">领奖方式：</label><div class="col-sm-4" style="padding-top: 7px;"><input type="radio" id="scene_id" name="receive" value="0" ng-model="radioData.receiveway"> <label for="scene_id">现场领奖</label> <input type="radio" id="set_id" name="receive" value="1" ng-model="radioData.receiveway"> <label for="set_id">后台设置领奖</label> <input type="radio" id="submit_id" name="receive" value="2" ng-model="radioData.receiveway"> <label for="submit_id">现场提交信息领奖</label></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed"></span> 是否允许多次中奖：</label><div class="col-sm-4" style="padding-top: 4px;"><input type="radio" id="allowmore_id" name="allow" value="1" ng-model="radioData.allow"> <label for="allowmore_id">允许多次中奖</label> <input type="radio" id="nomore_id" name="allow" value="0" ng-model="radioData.allow"> <label for="nomore_id">不允许多次中奖</label></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed"></span>底部导航按钮：</label><div class="col-sm-10"><label><select class="form-control" ng-model="buttonType" ng-options="buttonType.name for buttonType in buttonTypes" ng-change="pageFunc.selectedCategory()"></select></label></div></div><div class="hr-line-dashed"></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 奖品设置：</label> <label class="col-sm-4 control-label">中奖率如果为0则不会中奖，中奖率之和不大于100</label></div><div class="form-group"><div class="col-sm-1"></div><div class="col-sm-8" style="margin-bottom: 36px;"><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th class="center" style="width: 13%;">标题</th><th class="center" style="width: 14%;">描述</th><th class="center" style="width: 15%;">中奖率</th><th class="center" style="width: 10%;">状态</th><th class="center" style="width: 10%;">类型</th><th class="center" style="width: 13%;">奖品内容</th><th class="center" style="width: 15%;">数量</th><th class="center" style="width: 10%;">删除</th></tr></thead><tbody class="ulSelect"><tr class="gradeX" ng-repeat="boxdata in awards" ng-click="selectwhich($index)"><td class="center"><input id="prizeName_{{$index}}" type="text" class="form-control" placeholder="奖项名称" ng-model="boxdata.PrizeName"></td><td class="center"><input id="desc_{{$index}}" type="text" class="form-control" placeholder="奖项描述" ng-model="boxdata.Description"></td><td class="center"><input type="number" min="0" max="100" class="form-control ng-pristine ng-untouched ng-valid" ng-pattern="/^[0-9]+$/" placeholder="中奖率" ng-model="boxdata.Probability"></td><td><div ng-show="boxdata.PrizeCount==\'\'" class="colorRed">还未设置奖品</div><div ng-show="boxdata.PrizeCount!=\'\'">已设置奖品</div></td><td><div class="textStyle" ng-if="awards[$index].AwardsType==1">积分</div><div class="textStyle" ng-if="awards[$index].AwardsType==2">优惠券</div></td><td><span class="textStyle" ng-if="awards[$index].AwardsType==1">{{awards[$index].Value | number}}</span><span class="textStyle" ng-if="awards[$index].AwardsType==2">{{awards[$index].prizeContent}}</span></td><td><span class="textStyle">{{awards[$index].PrizeCount | number}}</span></td><td><div class="btn btn-danger" ng-click="delmeslef($index)">删除</div></td></tr></tbody></table><div class="btn btn-danger" ng-click="addawardBtn()">添加奖项</div></div><div class="col-sm-3 prizetype" style="display: none;"><input type="radio" id="scroe_id" name="activetype" value="1" ng-model="radioData.activetype" ng-change="checktype()"> <label for="scroe_id">积分</label> &nbsp;&nbsp; <input type="radio" id="coupon_id" name="activetype" value="2" ng-model="radioData.activetype" ng-change="checktype()"> <label for="coupon_id">优惠券</label> &nbsp;&nbsp; <input type="radio" id="custom_id" name="activetype" value="0" ng-model="radioData.activetype" ng-change="checktype()"> <label for="custom_id">自定义</label><div ng-show="radioData.activetype==1"><br>&nbsp;赠送积分：&nbsp; <input id="score_{{inDex}}" type="number" min="0" class="form-control" name="productTitle" ng-pattern="/^[0-9]+$/" ng-model="ptNums" style="width:98px;display:inline;" ng-keyup="ctrladd()"> &nbsp;积分&nbsp;<br><br>&nbsp;奖品数量：&nbsp; <input id="ptnums_{{inDex}}" type="number" min="0" class="form-control" name="productTitle" ng-pattern="/^[0-9]+$/" ng-model="ptnums" style="width:98px;display:inline;" ng-keyup="ctrladd()"> &nbsp;份<br></div><div ng-show="radioData.activetype==2"><br>&nbsp;选择优惠券：&nbsp;<select class="form-control" ng-model="showcoupon" ng-options="coupon.cardcoupon_name for coupon in coupons" ng-change="whichcp(showcoupon)" style="width:98px;display:inline !important;"></select><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;奖品数量：&nbsp; <input id="cpNums_{{inDex}}" type="number" min="0" class="form-control" ng-model="cpNums" name="productTitle" ng-pattern="/^[0-9]+$/" style="width:98px;display:inline;" ng-keyup="ctrladd()"> &nbsp;份&nbsp;</div><div ng-show="radioData.activetype==0"><br>&nbsp; 奖品数量：&nbsp; <input id="cmNums_{{inDex}}" type="number" min="0" class="form-control" name="productTitle" ng-model="cmNums" ng-pattern="/^[0-9]+$/" style="width:98px;display:inline;" ng-keyup="ctrladd()"> &nbsp;</div></div></div><div class="hr-line-dashed"></div></div><div class="wrapOperate"><label class="btn btn-primary btn-lg" ng-click="addshakeBtn()">添加</label></div><div class="clearBoth"></div></form></div></div></div></div>'),
e.put("app/NWYXuser/NWYXuserDetail/NWYXuserDetail.html",'<div class="wrapper wrapper-content"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>用户详情</h5></div><div class="ibox-content"><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">微信名称:</div><div class="col-sm-10">{{userInfo.wx_nick_name}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">真实姓名:</div><div class="col-sm-10">{{userInfo.true_name}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">性别:</div><div class="col-sm-10"><span ng-show="userInfo.gender == 0">女</span> <span ng-show="userInfo.gender == 1">男</span></div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">生日:</div><div class="col-sm-10">{{userInfo.birthday | date:\'yyyy-MM-dd\'}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">身份:</div><div class="col-sm-10">{{userInfo.ex5}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">薪资:</div><div class="col-sm-10">{{userInfo.salary}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">信用金:</div><div class="col-sm-10">{{userInfo.credit_acount}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">是否喝酒:</div><div class="col-sm-10">{{userInfo.ex4}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">是否抽烟:</div><div class="col-sm-10">{{userInfo.ex3}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">情感:</div><div class="col-sm-10">{{userInfo.ex2}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">地区:</div><div class="col-sm-10">{{userInfo.district}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">最后登录时间:</div><div class="col-sm-10">{{userInfo.last_login_date | date:\'yyyy-MM-dd\'}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">签名:</div><div class="col-sm-10">{{userInfo.describe}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">头像:</div><div class="col-sm-10"><img ng-src="{{userInfo.wx_head_img_url}}" alt="" style="width:60px;height:60px;margin-right:10px;"></div></div><div class="clearBoth"></div><div class="hr-line-dashed"></div></div></div></div></div></div>'),e.put("app/NWYXuser/NWYXuserList/NWYXuserList.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>会员列表</h2><ol class="breadcrumb"><li><a>会员</a></li><li><a>列表</a></li><li class="active"><strong>会员列表</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>会员列表</h5></div><div class="ibox-content"><table class="table table-striped table-bordered table-hover dataTable" id="editable" role="grid" aria-describedby="editable_info"><thead><tr role="row"><th style="width:20px;text-align: center;"><input type="checkbox" value="checked" class="input-mini" ng-checked="selectedall" ng-click="checkedall()"></th><th class="center" style="width: 100px;">用户名</th><th class="center" style="width: 145px;">微信名称</th><th class="center" style="width: 40px;">头像</th><th class="center" style="width: 185px;">真实姓名</th><th class="center" style="width: 185px;">信用金</th><th class="center" style="width: 185px;">薪资</th><th class="center" style="width: 185px;">身份</th><th class="center" style="width: 185px;">是否喝酒</th><th class="center" style="width: 185px;">是否抽烟</th><th class="center" style="width: 185px;">情感</th><th class="center" style="width: 100px;">性别</th><th class="center" style="width: 100px;">地区</th><th class="center" style="width: 100px;">生日</th><th class="center" style="width：1200px;">编辑</th></tr></thead><tbody><tr class="gradeA odd" role="row" ng-repeat="boxdata in raisepros"><td ng-click="selectme(boxdata)" style="text-align: center;"><input type="checkbox" value="checked" class="input-mini" ng-checked="boxdata.selected"></td><td class="center lineheight80">{{boxdata.user_id}}</td><td class="center">{{boxdata.wx_nick_name}}</td><td class="center"><img ng-src="{{boxdata.wx_head_img_url}}" alt="" style="width:40px;height:40px;"></td><td class="center">{{boxdata.true_name}}</td><td class="center">{{boxdata.credit_acount}}</td><td class="center">{{boxdata.salary}}</td><td class="center">{{boxdata.ex5}}</td><td class="center">{{boxdata.ex4}}</td><td class="center">{{boxdata.ex3}}</td><td class="center">{{boxdata.ex2}}</td><td class="center"><span ng-show="boxdata.gender == 0">女</span> <span ng-show="boxdata.gender == 1">男</span></td><td class="center">{{boxdata.district}}</td><td class="center">{{boxdata.birthday | date:\'yyyy-MM-dd\'}}</td><td class="center"><button class="btn btn-primary" ui-sref="index.NWYXuserDetail({userID:boxdata.autoid})">用户详情</button></td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totals}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totals" items-per-page="pagesize" max-size="6" ng-model="currentPage" class="pagination-sm" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" style="float:right;"></pagination></div></div></div></div></div></div></div></div>'),e.put("app/ZAFW/common/content.html",'<div id="wrapper"><nav-bar></nav-bar><div id="page-wrapper" class="gray-bg {{$state.current.name}}" ng-class="{\'page-wrapper-margin0\':hidemenu}"><zafw-top-nav-bar ng-show="!hidemenu"></zafw-top-nav-bar><div ui-view=""></div><back-top min-height="100"></back-top></div></div>'),e.put("app/ZAFW/common/footer.html",'<div class="footer"><div class="pull-right">10GB of <strong>250GB</strong> Free.</div><div><strong>Copyright</strong> Example Company &copy; 2014-2015</div></div>'),e.put("app/ZAFW/common/ibox_tools.html",'<div class="ibox-tools dropdown" dropdown=""><a ng-click="showhide()"><i class="fa fa-chevron-up"></i></a> <a class="dropdown-toggle" href="" dropdown-toggle=""><i class="fa fa-wrench"></i></a><ul class="dropdown-menu dropdown-user"><li><a href="">Config option 1</a></li><li><a href="">Config option 2</a></li></ul><a ng-click="closebox()"><i class="fa fa-times"></i></a></div>'),e.put("app/ZAFW/common/navigation.html",'<nav class="navbar-default navbar-static-side wrapNav" role="navigation"><div class="sidebar-collapse"><ul side-navigation="" class="nav metismenu" id="side-menu"><li class="nav-header"><div class="dropdown profile-element" dropdown=""><a class="dropdown-toggle" dropdown-toggle="" href=""><span class="clear"><span class="block m-t-xs"><strong class="font-bold">{{main.userName}}</strong></span> <span class="text-muted text-xs block">Example menu<b class="caret"></b></span></span></a><ul class="dropdown-menu animated fadeInRight m-t-xs"><li><a href="">Logout</a></li></ul></div><div class="logo-element">IN+</div></li><li ui-sref-active="active"><a ui-sref="index.productList"><i class="fa fa-laptop"></i> <span class="nav-label">商品列表</span></a></li><li ui-sref-active="active"><a ui-sref="index.productEditor"><i class="fa fa-desktop"></i> <span class="nav-label">商品编辑页</span></a></li></ul></div></nav>'),e.put("app/ZAFW/common/topnavbar.html",'<div class="row border-bottom"><nav class="navbar navbar-static-top white-bg" role="navigation" style="margin-bottom: 0"><div class="navbar-header"><span minimaliza-sidebar=""></span></div><ul class="nav navbar-top-links navbar-right"><li><a ui-sref="login"><i class="fa fa-sign-out"></i> 登录</a></li></ul></nav></div>'),e.put("app/ZAFW/navBar/navBar.html",'<nav class="navbar-default navbar-static-side" role="navigation" ng-class="{\'navbar-static-side-index0\':hidemenu}"><div class="sidebar-collapse"><ul side-navigation="" class="nav metismenu" id="side-menu"><li class="nav-header"><div class="dropdown profile-element" dropdown=""><a class="dropdown-toggle" dropdown-toggle="" href=""><span class="clear"><span class="block m-t-xs"><strong class="font-bold">{{main.userName}}</strong></span> <span class="text-muted text-xs block">导航<b class="caret"></b></span></span></a><ul class="dropdown-menu animated fadeInRight m-t-xs"><li><a href="" ng-click="logout()">Logout</a></li></ul></div><div class="logo-element">IN+</div></li><li class="active" ui-sref-active="active" ng-repeat="oneLevel in catalogTree.catalogTree" on-finish-render-filters=""><a ui-sref="{{oneLevel.levelOneHref}}"><i class="fa" ng-class="oneLevel.levelOneIcon"></i> <span class="nav-label">{{oneLevel.levelOneName}}</span> <span class="fa arrow" ng-if="oneLevel.levelTwolist.length>0"></span></a><ul class="nav nav-second-level collapse" ng-if="oneLevel.levelTwolist.length>0"><li ng-repeat="twoLevel in oneLevel.levelTwolist" ng-class="{active2:$state.includes(twoLevel.levelTwoHref)}"><a ui-sref="{{twoLevel.levelTwoHref}}">{{twoLevel.levelTwoName}}</a></li></ul></li></ul></div></nav>'),e.put("app/ZAFW/sku/addSkuProperty.html",'<div class="inlinebox"><span class="btn btn-primary" ng-hide="addboxshow" ng-click="showaddbox()">添加</span> <span class="btn">&nbsp;</span><div class="addskubox ng-hide" ng-show="addboxshow"><div class="checkskubox pull-left"><input type="text" class="form-control" ng-focus="showmenu()"><ul class="dropdown-menu" ng-show="menushow"><li ng-repeat="value in skuvalue"><a ng-click="addproperty(value)">{{value.property_value_name}}</a></li></ul></div><span class="btn btn-default pull-left" ng-click="clearaddbox()">取消a</span></div></div>'),e.put("app/ZAFW/sku/addSkuPropertyValue.html",'<div class="inlinebox"><span class="btn btn-primary" ng-hide="addboxshow" ng-click="showaddbox()">添加</span> <span class="btn">&nbsp;</span><div class="addskubox ng-hide" ng-show="addboxshow"><div class="checkskubox pull-left"><input type="text" class="form-control" ng-focus="showmenu()" ng-model="searchworld"><ul class="dropdown-menu" ng-show="menushow"><li ng-class="{valuechecked:value.checked}"><a ng-if="searchworld" ng-click="addStorePropertyValue(skuvalue)">{{searchworld}} <span>&nbsp;(点击新增此项)</span></a></li><li ng-repeat="value in skuvalue | filter:searchworld" ng-class="{valuechecked:value.checked}"><a ng-click="addPropertyValue(value)">{{value.property_value_name}} <span ng-if="value.checked">&nbsp;(已添加)</span></a></li></ul></div><span class="btn btn-primary pull-left" ng-click="clearaddbox()">取消</span></div></div>'),e.put("app/ZAFW/sku/checkSku.html",'<div class="checksku"><div class="row" ng-repeat="skuProperty in checkskuOrigin"><div class="col-sm-12 clearfix"><div class="selectbox pull-left"><select class="form-control m-b" ng-model="skuProperty.property" ng-change="selectSkuProperty($index)" ng-options="property.property_name for property in skuPropertyList"><option value="">选择规格</option></select></div><span class="btn btn-danger pull-left deletebtn" ng-click="deleteSkuProperty($index)"><i class="fa fa-times"></i>删除</span></div><div class="col-sm-12 skuvaluebox"><div class="btn btn-white" ng-repeat="property_value in skuProperty.property_value_list"><span>{{property_value.property_value_name}}</span> <span class="clearit" ng-click="deleteSkuPropertyValue(skuProperty,$index)"><i class="fa fa-times"></i></span></div><zafw-add-sku-property-value ng-if="skuProperty.property.property_id!==\'\'" property="skuProperty" add-property-value="addSkuPropertyValue($index,propertyValue)"></zafw-add-sku-property-value></div><div class="col-sm-12"><div class="hr-line-dashed"></div></div></div><div class="row"><div class="col-sm-12"><a class="btn btn-primary" ng-click="addSkuProperty()">添加规格</a></div></div></div>'),e.put("app/ZAFW/sku/setSku.html",'<table class="table table-bordered skutable"><thead><tr><th ng-repeat="skuProperty in checksku">{{skuProperty.property.property_name}}</th><th>售价</th><th>基础价 <span class="lbTip" data-tip-msg="为0的时候按 默认基础价计算">?</span></th><th>库存</th><th>重量(Kg)</th><th>商家编码</th><th ng-show="!isShow">图片</th><th ng-show="isShow">试卷ID</th><th>操作</th></tr></thead><tbody><tr ng-repeat="skuvalue in setsku" ng-init="trnum=$index"><td class="skuvalutd" ng-repeat="property_value in skuvalue.properties" ng-if="istdfirst(trnum,$index)" rowspan="{{rownum(trnum,$index)}}">{{property_value.property_value_name}}</td><td class="settd"><div class="input-group m-b tdinput"><span class="input-group-addon">￥</span> <input type="text" class="form-control text-right" ng-model="skuvalue.price"></div></td><td class="settd"><div class="input-group m-b tdinput"><span class="input-group-addon">￥</span> <input type="text" class="form-control text-right" ng-model="skuvalue.base_price"></div></td><td class="settd"><input type="text" class="form-control tdinput text-right" ng-model="skuvalue.count"></td><td class="settd"><input type="text" class="form-control tdinput text-right" ng-model="skuvalue.weight"></td><td class="settd"><input type="text" class="form-control tdinput" ng-model="skuvalue.sku_sn"></td><td ng-show="!isShow" class="settd"><div class="tdimg"><input type="file" name="file1" class="file-sku" data-index="{{$index}}" onchange="angular.element(this).scope().FileInputChange(this)"> <img ng-src="{{skuvalue.skuimg}}" data-index="{{$index}}" class="img-sku" alt="图片"> <a ng-click="delSkuImg($index)" class="btn btn-primary delButton">删除</a></div></td><td class="skuvalutd" ng-show="isShow"><input type="text" readonly="true" style="width:80px;" class="form-control text-right" ng-model="skuvalue.ex_questionnaire_id"></td><td class="skuvalutd"><a class="btn btn-primary" ng-click="vf.synchronouSku(skuvalue)">编辑</a> <a class="btn btn-primary" ng-show="isShow" ng-click="SelQuestion($index)">选择试卷</a></td></tr></tbody></table><div class="modal inmodal" id="questionModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>选择试卷</h4></div><div class="modal-body modalBody"><div class="row"><div class="col-sm-6"></div><div class="col-sm-6"><div id="editable_filter" class="dataTables_filter floatR">搜索: <label><input type="search" class="form-control input-sm" placeholder="输入您要搜索的试卷标题" aria-controls="editable" ng-model="questionnaire_name" ng-keyup="questionCtrlSearch($event)"></label></div></div></div><table class="table table-striped table-bordered table-hover dataTables-example dataTable dtr-inline" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info"><thead><tr role="row"><th class="sorting_asc" tabindex="0" rowspan="1" colspan="1" style="width: 144px;">试卷ID</th><th class="sorting_asc" tabindex="0" rowspan="1" colspan="1" style="width: 105px;">试卷标题</th></tr></thead><tbody><tr ng-repeat="question in questionList" ng-click="closeQuestionFrame(question)" style="cursor:pointer;"><td>{{question.id}}</td><td>{{question.questionnaire_name}}</td></tr></tbody></table></div><div class="modal-footer center"><div class="col-sm-4"><div class="dataTables_info" id="DataTables_Table_0_info" role="status" aria-live="polite" style="display: inline-block;padding-left: 0;margin: 20px 0;">第{{page}}页 每页 {{rows}} 总共 {{totalItems}} 条</div></div><div class="col-sm-8"><div class="dataTables_paginate paging_simple_numbers" id="DataTables_Table_0_paginate" style="margin: 0;float: right;"><pagination boundary-links="true" total-items="totalItems" ng-model="page" class="pagination-sm" items-per-page="rows" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="questionPageChanged()" max-size="6"></pagination></div></div></div></div></div></div><div class="modal inmodal showSku" id="skuModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>批量设置</h4></div><div class="modal-body modalBody"><div class="row" ng--repeat="item in vm.skus track by $index"><div class="col-xs-4"><label>【{{item.text}}<span ng-show="item.text!=\'图片\'">：</span>{{item.value}}】</label></div><div class="col-xs-8"><span ng-repeat="spec in item.specs track by $index"><label><input type="checkbox" ng-click="vf.selectBox(spec)" class="ckBox" value="checked" ng-checked="spec.selected"> 同{{spec.text}}同步</label></span></div></div></div><div class="modal-footer"><a href="javascript:;" class="btn btn-primary" ng-click="vf.stuConfirm()">确定</a> <a href="javascript:;" class="btn btn-primary cencel" ng-click="vf.stuCencel()">取消</a></div></div></div></div>'),e.put("app/ZAFW/sku/setSkuT.html",'<table class="table table-bordered skutable"><tbody><tr ng-repeat="skuvalue in setsku" ng-init="trnum=$index"><td class="skuvalutd" ng-repeat="property_value in skuvalue.properties" ng-if="istdfirst(trnum,$index)" rowspan="{{rownum(trnum,$index)}}">{{property_value.property_value_name}}</td><td class="settd">{{skuvalue.sku_sn}}</td><td class="settd"><div>商品总数量:{{skuvalue.count}}</div><br><div>特卖剩余数量: <input type="text" ng-model="skuvalue.promotion_count" class="inputWidth"></div><br><div>特卖总数量: <input type="text" ng-model="skuvalue.promotion_sale_count" class="inputWidth"></div></td><td class="settd"><div class="input-group m-b tdinput"><div>原价：{{skuvalue.price | currency:"￥"}}</div><div>基价：{{skuvalue.base_price | currency:"￥"}}</div><div>特卖价格：<input type="text" ng-model="skuvalue.promotion_price" class="width40"></div></div></td></tr></tbody></table>'),e.put("app/ZAFW/uploadImg/choseImg.html",'<div class="col-sm-12"><label class="choseimg clearfix" for="{{idName}}" id="zafwChoseImg"><span class="text" ng-if="imgdata.length<=0">点击选择图片</span><div class="imgbox" ng-repeat="img in imgdata"><div class="tablecell"><img ng-src="{{img.url}}" alt=""></div></div></label> <input type="file" multiple="" id="{{idName}}" class="hide zafwUploadImg"></div>'),e.put("app/ZAFW/uploadImg/choseImg.modal.html",'<div><div class="modal-header" style="text-align:center;"><h3 class="modal-title">请选择图片</h3></div><div class="modal-body"><zafw-chose-img ng-model="imgfiledata"></zafw-chose-img></div><div class="modal-footer"><button class="btn btn-default" ng-click="cancel()">Cancel</button> <button class="btn btn-primary" ng-click="uploadimg()">上传</button></div></div>'),e.put("app/ZAFW/uploadImg/imgBox.html",'<div class="imgbox"><div class="deleteimg" ng-click="deletefun()">X</div><div class="inimgbox" ng-mousedown="boxStartMove($event)" ng-mousemove="boxMoving($event)" ng-mouseleave="boxEndMove($event)" ng-mouseup="boxEndMove($event)"><div class="overimgbox"></div><div class="tablecell"><img ng-src="{{img}}" alt=""></div></div></div>'),e.put("app/ZAFW/uploadImg/uploadImg.html",'<div class="form-group"><div class="col-sm-10 uploadimgbox"><zafw-img-box ng-repeat="img in imgurls" dletefun="deleteimg($index)" changefun="changeimg($index,moveNum)"></zafw-img-box><div class="btn uploadimg" ng-click="choseimg()">+</div></div></div>'),e.put("app/ZAFW/zafwView/zafwView.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>ZAFW(至云后台管理界面前端框架) directive 代码示例页</h2><ol class="breadcrumb"><li><a href="index.html">请打开</a></li><li><a>本html文件</a></li><li class="active"><strong>对照查看代码</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>ZAFW(至云后台管理界面前端框架) directive 代码示例页</h5><div class="ibox-tools"><a class="collapse-link"><i class="fa fa-chevron-up"></i></a> <a class="close-link"><i class="fa fa-times"></i></a></div></div><div class="ibox-content"><div class="row"><div class="col-lg-12"><zafw-sku-box><zafw-check-sku ng-model="zafwView.skudata"></zafw-check-sku><zafw-set-sku ng-model="zafwView.skudata2"></zafw-set-sku></zafw-sku-box></div></div><div class="row"><div>{{zafwView.skudata}}</div><div>{{zafwView.skudata2}}</div></div><div class="hr-line-dashed"></div><div class="row"><div class="col-lg-12"><h2>图片选择(图片上传的一部分)</h2></div><zafw-chose-img ng-model="zafwView.imagedate1"></zafw-chose-img><div>{{zafwView.imagedate1}}</div></div><div class="hr-line-dashed"></div><div class="row"><div class="col-lg-12"><h2>图片上传</h2></div><zafw-upload-img ng-model="zafwView.imagedate"></zafw-upload-img><div>{{zafwView.imagedate}}</div></div><div class="hr-line-dashed"></div><div class="row"><div class="col-lg-12"><h2>选择日期</h2></div><div class="col-lg-6"><div class="input-group date"><input type="text" class="form-control" ng-model="zafwView.date3" zafw-datepacker=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div><div class="hr-line-dashed"></div><div class="row"><div class="col-lg-12"><h2>选择时间</h2>{{zafwView.date}}</div><div class="col-lg-6"><div class="input-group date"><input type="text" class="form-control" ng-model="zafwView.date" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div><div class="hr-line-dashed"></div><div class="row"><div class="col-lg-12"><h2>选择日期区间</h2></div><div class="col-lg-4"><p>只需要日期</p><div class="input-daterange input-group" zafw-datepacker-range=""><input type="text" class="input-sm form-control" ng-model="zafwView.rangedate1" name="start"> <span class="input-group-addon">到</span> <input type="text" class="input-sm form-control" ng-model="zafwView.rangedate2" name="end"></div></div><div class="col-lg-2"></div><div class="col-lg-4"><p>需要日期+时间</p><div class="input-daterange input-group"><input type="text" class="input-sm form-control" ng-model="zafwView.rangedate3" zafw-datepacker-time="" name="start"> <span class="input-group-addon">到</span> <input type="text" class="input-sm form-control" ng-model="zafwView.rangedate4" zafw-datepacker-time="" name="end"></div></div><div class="col-lg-2"></div></div><div class="hr-line-dashed"></div></div></div></div></div></div>'),e.put("app/activity/activityAssort/activityAssort.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>活动分类</h2><ol class="breadcrumb"><li><a>活动</a></li><li><a>分类</a></li><li class="active"><strong>活动分类</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>活动分类</h5></div><div class="ibox-content"><div class=""><a class="btn btn-primary" ng-click="addcardcouponBtn()">添加</a> <a class="btn btn-danger" ng-click="delallNavBtn()">批量删除</a></div><div class="row"><div class="col-sm-6"></div><div class="col-sm-6"><div id="editable_filter" class="dataTables_filter floatR">搜索: <label><input type="search" class="form-control input-sm" placeholder="输入您要搜索的分类名称" aria-controls="editable" ng-model="keyword" ng-keyup="ctrlsearch($event)"></label></div></div></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="selectedall" ng-click="checkedall()"></th><th class="center">分类ID</th><th class="center">分类名称</th><th class="center">分类图片</th><th class="center">介绍介绍</th><th class="center">分类类型</th><th class="center">分类排序</th><th class="center">父级ID</th><th class="center">编辑</th></tr></thead><tbody><tr class="gradeX" ng-repeat="boxdata in navListData"><td ng-click="selectme(boxdata)" class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="boxdata.selected"></td><td class="center">{{boxdata.category_id}}</td><td class="center">{{boxdata.category_name}}</td><td class="center"><img ng-src="{{boxdata.category_img_url}}" alt="" style="width:60px;height:60px;float: left"></td><td class="center">{{boxdata.category_summary}}</td><td class="center">{{boxdata.category_systype}}</td><td class="center">{{boxdata.category_sort}}</td><td class="center">{{boxdata.category_parent_id}}</td><td class="center"><button class="btn btn-primary col-sm-5" ng-click="editcardcouponBtn(boxdata)">编辑</button> <button class="btn btn-danger col-sm-5 col-sm-offset-2" ng-click="delNavBtn(boxdata)">删除</button></td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totals}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totals" items-per-page="pagesize" max-size="6" ng-model="currentPage" class="pagination-sm" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" style="float:right;"></pagination></div></div></div></div></div></div></div></div><div class="modal inmodal" id="dealModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4 ng-if="isAddcard">添加活动分类</h4><h4 ng-if="!isAddcard">修改活动分类</h4></div><div class="modal-body modalBody"><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 分类名称：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入活动分类名称" ng-model="pageData.category_name"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label">分类介绍：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入分类介绍" ng-model="pageData.category_summary"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label">分类排序：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入分类排序" ng-model="pageData.category_sort"></div></div><div class="form-group overFlow" ng-if="showPicDom"><label class="col-sm-3 control-label">分类图片：</label><div class="col-sm-9"><zafw-upload-img ng-model="pageData.category_img_url"></zafw-upload-img></div></div></div><div class="modal-footer center"><button class="col-sm-offset-2 btn btn-primary" ng-click="addCouponBtn()">保存</button> <button class="col-sm-offset-2 btn btn-primary" ng-click="clear()">取消</button></div></div></div></div>'),e.put("app/activity/activityList/activityList.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>活动列表</h2><ol class="breadcrumb"><li><a>活动</a></li><li><a>列表</a></li><li class="active"><strong>活动列表</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>活动列表</h5></div><div class="ibox-content"><div class=""><a class="btn btn-primary" ui-sref="index.addActivety">添加</a> <a class="btn btn-danger" ng-click="delallNavBtn()">批量删除</a> <a class="btn btn-primary" ng-click="moreSetLevelBtn(\'level\')">批量设置访问等级</a> <a class="btn btn-primary" ng-click="moreSetLevelBtn(\'cate\')">批量设置活动分类</a></div><div class="row"><div class="col-sm-6"><div class="dataTables_length" id="editable_length"><label><select class="form-control" ng-model="oneNav" ng-options="oneNav.category_name for oneNav in categorys" ng-change="whichcategory(oneNav)"></select></label></div></div><div class="col-sm-6"><div id="editable_filter" class="dataTables_filter floatR">搜索: <label><input type="search" class="form-control input-sm" placeholder="输入您要搜索的关键字" aria-controls="editable" ng-model="keyword" ng-keyup="ctrlsearch($event)"></label></div></div></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th class="center" ng-click="checkedall()"><input type="checkbox" value="checked" class="input-mini" ng-checked="selectedall"></th><th class="center">活动名称</th><th class="center">活动ID</th><th class="center">活动图片</th><th class="center">活动地址</th><th class="center" ng-click="descAsTimeBtn()" style="color:#1c84c6;cursor:pointer;">活动开始时间</th><th class="center">活动分类</th><th class="center">浏览量</th><th class="center" ng-click="descAsAddNumBtn()" style="color:#1c84c6;cursor:pointer;">报名人数</th><th class="center">报名所需积分</th><th class="center">活动状态</th><th class="center">活动标签</th><th class="center">编辑</th></tr></thead><tbody><tr class="gradeX" ng-repeat="boxdata in navListData"><td ng-click="selectme(boxdata)" class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="boxdata.selected"></td><td class="center">{{boxdata.activity_name}}</td><td class="center">{{boxdata.activity_id}}</td><td class="center"><img ng-src="{{boxdata.activity_img_url}}" alt="" style="width:60px;height:60px;float: left"></td><td class="center">{{boxdata.activity_address}}</td><td class="center">{{boxdata.activity_start_time | date:"yyyy-MM-dd HH:mm"}}</td><td class="center">{{boxdata.category_name}}</td><td class="center">{{boxdata.activity_pv}}</td><td class="center">{{boxdata.activity_signcount}}</td><td class="center">{{boxdata.activity_score}}</td><td class="center"><span ng-show="boxdata.activity_status==0">进行中</span> <span ng-show="boxdata.activity_status==1">已结束</span> <span ng-show="boxdata.activity_status==2">已满员</span></td><td class="center"><span ng-repeat="tag in boxdata.activity_tags">{{tag}}、</span></td><td class="center" style="width:234px;"><button class="btn btn-primary col-sm-3" ui-sref="index.editActivety({activeID:boxdata.activity_id})">编辑</button> <button class="btn btn-danger col-sm-3 col-sm-offset-1" ng-click="delNavBtn(boxdata)">删除</button> <button class="btn btn-primary col-sm-4 col-sm-offset-1" ui-sref="index.fieldList({activeID:boxdata.activity_id})">字段设置</button></td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totals}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totals" items-per-page="pagesize" max-size="6" ng-model="currentPage" class="pagination-sm" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" style="float:right;"></pagination></div></div></div></div></div></div></div></div><div class="modal inmodal" id="giveDealModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4 ng-show="showLevel">批量设置访问等级</h4><h4 ng-show="!showLevel">批量设置活动分类</h4></div><div class="modal-body"><div class="form-group overFlow" ng-show="showLevel"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 等级：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" name="productTitle" placeholder="请输入正整数，数字越大等级要求越高" ng-model="levelNum"></div></div><div class="form-group overFlow" ng-show="!showLevel"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 活动分类：</label><div class="col-sm-9"><label><select class="form-control" ng-model="setNav" ng-options="setNav.category_name for setNav in categorys" ng-change="setCate(setNav)"></select></label></div></div></div><div class="modal-footer center"><button class="col-sm-offset-2 btn btn-primary" ng-click="setLevelBtn()" ng-show="showLevel">设置访问等级</button> <button class="col-sm-offset-2 btn btn-primary" ng-click="setLevelBtn()" ng-show="!showLevel">设置活动分类</button></div></div></div></div>'),
e.put("app/activity/addActivety/addActivety.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>添加活动</h2><ol class="breadcrumb"><li><a>商品活动</a></li><li><a>添加</a></li><li class="active"><strong>添加活动</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInRight"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>添加活动</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><form method="get" name="myForm" novalidate="" class="form-horizontal" ng-submit="submitProductFunc()"><div class="ibox-content"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 活动名称：</label><div class="col-sm-9"><input type="text" class="form-control" placeholder="请输入活动名称" ng-model="pageData.activity_name" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 活动地址：</label><div class="col-sm-9"><input type="text" class="form-control" placeholder="请输入活动地址" ng-model="pageData.activity_address" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 活动图片：</label><div class="col-sm-9"><zafw-upload-img ng-model="pageData.activity_img_url"></zafw-upload-img></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 开始时间：</label><div class="col-sm-3"><div class="input-group date"><input type="text" class="form-control" placeholder="开始时间" ng-model="pageData.activity_start_time" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 结束时间：</label><div class="col-sm-3"><div class="input-group date"><input type="text" class="form-control" placeholder="结束时间" ng-model="pageData.activity_stop_time" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div><div class="form-group"><label class="col-sm-2 control-label">活动分类：</label><div class="col-sm-3"><select class="form-control" ng-model="oneNav" ng-options="oneNav.category_name for oneNav in categorys" ng-change="whichcategory(oneNav)"></select></div></div><div class="form-group"><label class="col-sm-2 control-label">活动状态：</label><div class="col-sm-3"><select class="form-control" ng-model="oneStatu" ng-options="oneStatu.activity_name for oneStatu in activeStatus" ng-change="whichStatu(oneStatu)"></select></div></div><div class="form-group"><label class="col-sm-2 control-label">所需积分：</label><div class="col-sm-9"><input type="text" class="form-control" placeholder="请输入活动所需积分" ng-model="pageData.activity_score" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label">最多报名人数：</label><div class="col-sm-9"><input type="text" class="form-control" placeholder="请输入活动最多报名人数" ng-model="pageData.activity_max_signup_count" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label">活动描述：</label><div class="col-sm-9"><textarea rows="3" cols="20" class="form-control" name="productSummary" placeholder="请输入活动描述" ng-model="pageData.activity_summary" required="" ng-minlength="1" ng-maxlength="200"></textarea></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 活动详情：</label><div class="col-sm-9"><div class="summernote"></div></div></div><div class="btn btn-danger floatR" ng-click="addActivetyBtn()">添加活动</div><div class="clearBoth"></div><div class="hr-line-dashed"></div></div></form></div></div></div></div>'),e.put("app/activity/editActivety/editActivety.html",'<div class="wrapper wrapper-content animated fadeInRight"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>修改活动</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><form method="get" name="myForm" novalidate="" class="form-horizontal" ng-submit="submitProductFunc()"><div class="ibox-content"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 活动名称：</label><div class="col-sm-9"><input type="text" class="form-control" placeholder="请输入活动名称" ng-model="pageData.activity_name" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 活动地址：</label><div class="col-sm-9"><input type="text" class="form-control" placeholder="请输入活动地址" ng-model="pageData.activity_address" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 活动图片：</label><div class="col-sm-9"><zafw-upload-img ng-model="pageData.activity_img_url"></zafw-upload-img></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 开始时间：</label><div class="col-sm-3"><div class="input-group date"><input type="text" class="form-control" placeholder="开始时间" ng-model="pageData.activity_start_time" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 结束时间：</label><div class="col-sm-3"><div class="input-group date"><input type="text" class="form-control" placeholder="结束时间" ng-model="pageData.activity_stop_time" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div><div class="form-group"><label class="col-sm-2 control-label">活动分类：</label><div class="col-sm-3"><select class="form-control" ng-model="oneNav" ng-options="oneNav.category_name for oneNav in categorys" ng-change="whichcategory(oneNav)"></select></div></div><div class="form-group"><label class="col-sm-2 control-label">活动状态：</label><div class="col-sm-3"><select class="form-control" ng-model="oneStatu" ng-options="oneStatu.activity_name for oneStatu in activeStatus" ng-change="whichStatu(oneStatu)"></select></div></div><div class="form-group"><label class="col-sm-2 control-label">所需积分：</label><div class="col-sm-9"><input type="text" class="form-control" placeholder="请输入活动所需积分" ng-model="pageData.activity_score" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label">最多报名人数：</label><div class="col-sm-9"><input type="text" class="form-control" placeholder="请输入活动最多报名人数" ng-model="pageData.activity_max_signup_count" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label">活动描述：</label><div class="col-sm-9"><textarea rows="3" cols="20" class="form-control" name="productSummary" placeholder="请输入活动描述" ng-model="pageData.activity_summary" required="" ng-minlength="1" ng-maxlength="200"></textarea></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 活动详情：</label><div class="col-sm-9"><div class="summernote"></div></div></div><div class="btn btn-danger floatR" ng-click="editActivetyBtn()">修改活动</div><div class="clearBoth"></div><div class="hr-line-dashed"></div></div></form></div></div></div></div>'),e.put("app/activity/fieldList/fieldList.html",'<div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>活动报名字段设置</h5></div><div class="ibox-content"><div class=""><a class="btn btn-primary" ng-click="addcardcouponBtn()">添加字段</a></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="selectedall" ng-click="checkedall()"></th><th class="center">字段下标</th><th class="center">显示名称</th><th class="center">是否必填</th><th class="center">字段类型</th><th class="center">默认字段</th><th class="center">验证方法</th><th class="center">编辑</th></tr></thead><tbody><tr class="gradeX" ng-repeat="boxdata in fieldListData"><td ng-click="selectme(boxdata)" class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="boxdata.selected" ng-disabled="boxdata.field_default == 1"></td><td class="center">{{boxdata.field_index}}</td><td class="center">{{boxdata.field_name}}</td><td class="center"><span ng-show="boxdata.field_null == 1">是</span> <span ng-show="boxdata.field_null == 0">否</span></td><td class="center"><span ng-show="boxdata.field_type == 1">微信字段</span> <span ng-show="boxdata.field_type == 0">普通字段</span></td><td class="center"><span ng-show="boxdata.field_default == 1">默认</span> <span ng-show="boxdata.field_default == 0">否</span></td><td class="center"><span ng-show="boxdata.field_format_valifunc != null">{{boxdata.field_format_valifunc}}</span> <span ng-show="boxdata.field_format_valifunc == null || boxdata.field_format_valifunc == \'\'">无</span></td><td class="center"><button class="btn btn-primary col-sm-5" ng-disabled="boxdata.field_default == 1" ng-click="editcardcouponBtn(boxdata)">编辑</button> <button class="btn btn-danger col-sm-5 col-sm-offset-2" ng-disabled="boxdata.field_default == 1" ng-click="delNavBtn(boxdata)">删除</button></td></tr></tbody></table></div></div></div></div></div><div class="modal inmodal" id="dealModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4 ng-if="isAddcard">添加字段</h4><h4 ng-if="!isAddcard">修改字段</h4></div><div class="modal-body modalBody"><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 显示名称：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入显示名称" ng-model="pageData.field_name"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 是否必填：</label><div class="col-sm-9"><label for="yesnull"><input type="radio" value="1" name="isnull" id="yesnull" ng-model="pageData.field_null">是</label> &nbsp; <label for="nonull"><input type="radio" value="0" name="isnull" id="nonull" ng-model="pageData.field_null">否</label></div></div></div><div class="modal-footer center"><button class="col-sm-offset-2 btn btn-primary" ng-click="addCouponBtn()">保存</button> <button class="col-sm-offset-2 btn btn-primary" ng-click="clear()">取消</button></div></div></div></div>'),e.put("app/adList/addAd/addAd.html",'<div class="wrapper wrapper-content animated fadeInUp ng-scope wrapRaise"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>添加幻灯片</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><div class="ibox-content"><form method="get" name="myForm" novalidate="" class="form-horizontal"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 幻灯片列表：</label> <label class="col-sm-4 control-label"></label></div><div class="form-group"><div class="col-sm-2"></div><div class="col-sm-8"><div class="col-xs-4-reset" ng-repeat="item in pageData.itemList"><div class="redDel" ng-click="pageFunc.delmeslef($index,item)">X</div><div class="blueEdit" ng-click="pageFunc.editPro($index,item)">编辑</div><div class="raiseTitle">类型：{{item.slide_type}}</div><div class="raiseContent"><img ng-src="{{item.datalist[0].img_url}}" alt="" style="width:80px;height:40px;"></div><div class="raise">链接：{{item.datalist[0].link}}</div></div><div class="col-xs-4-reset"><div class="addNew" ng-click="pageFunc.showAddRaisePro()">+&nbsp;&nbsp;&nbsp;&nbsp;添加幻灯片</div></div></div></div><div class="hr-line-dashed"></div><div class="wrapOperate"><label class="btn btn-primary btn-lg" ng-click="pageFunc.addRaise()">保存</label></div><div class="clearBoth"></div></form></div></div></div></div></div><div class="modal inmodal" id="dealModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>添加幻灯片</h4></div><div class="modal-body modalBody"><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 幻灯片标题：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" name="productTitle" placeholder="请输入幻灯片标题" ng-model="pageData.item.datalist[0].link_text" required=""></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label">幻灯片链接：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" name="productTitle" placeholder="请输入幻灯片链接" ng-model="pageData.item.datalist[0].link"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 幻灯片类型：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" name="productTitle" placeholder="请输入幻灯片类型(自定义)" ng-model="pageData.item.slide_type" required=""></div></div><div class="form-group overFlow" ng-if="showPicDom"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 图片： <span class="lbTip" data-tip-msg="<b>图片：</b><br> 1.上传图片的宽度需大于或等于750px，高度会根据宽度等比例缩放:<br/> 2.幻灯片上传多张图片，图片宽高尺寸一致为最佳效果；">?</span></label><div class="col-sm-9"><zafw-upload-img ng-attr-datalist="pageData.item.datalist[0].data" ng-attr-ispcweb="pageData.is_pc" ng-model="pageData.item.datalist[0].img_url"></zafw-upload-img></div></div></div><div class="modal-footer center"><button class="col-sm-offset-2 btn btn-primary" ng-click="pageFunc.addPro()"><span ng-show="!pageData.isEditPro">添加</span> <span ng-show="pageData.isEditPro">编辑</span></button> <button class="col-sm-offset-2 btn btn-primary" ng-click="pageFunc.clear()">取消</button></div></div></div></div>'),e.put("app/adList/editAd/editAd.html",'<div class="wrapper wrapper-content animated fadeInUp ng-scope wrapRaise"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>修改幻灯片</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><div class="ibox-content"><form method="get" name="myForm" novalidate="" class="form-horizontal"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 幻灯片列表：</label> <label class="col-sm-4 control-label"></label></div><div class="form-group"><div class="col-sm-2"></div><div class="col-sm-8"><div class="col-xs-4-reset" ng-repeat="item in pageData.itemList"><div class="redDel" ng-click="pageFunc.delmeslef($index,item)">X</div><div class="blueEdit" ng-click="pageFunc.editPro($index,item)">编辑</div><div class="raiseTitle">幻灯片ID：{{item.slide_id}}</div><div class="raiseContent"><img ng-src="{{item.img_url}}" alt="" style="width:80px;height:40px;"></div><div class="raise">链接：{{item.link}}</div></div><div class="col-xs-4-reset"><div class="addNew" ng-click="pageFunc.showAddRaisePro()">+&nbsp;&nbsp;&nbsp;&nbsp;添加幻灯片</div></div></div></div><div class="hr-line-dashed"></div><div class="wrapOperate"><label class="btn btn-primary btn-lg" ng-click="pageFunc.addRaise()">保存</label></div><div class="clearBoth"></div></form></div></div></div></div></div><div class="modal inmodal" id="dealModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>添加幻灯片</h4></div><div class="modal-body modalBody"><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 幻灯片标题：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" name="productTitle" placeholder="请输入幻灯片标题" ng-model="pageData.editItem.link_text" required=""></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label">幻灯片链接：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" name="productTitle" placeholder="请输入幻灯片链接" ng-model="pageData.editItem.link"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 幻灯片排序：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" name="productTitle" placeholder="请输入幻灯片类型(自定义)" ng-model="pageData.editItem.slide_sort" required=""></div></div><div class="form-group overFlow" ng-if="showPicDom"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 图片 <span class="lbTip" data-tip-msg="<b>图片：</b><br> 1.上传图片的宽度需大于或等于750px，高度会根据宽度等比例缩放:<br/> 2.幻灯片上传多张图片，图片宽高尺寸一致为最佳效果；">?</span></label><div class="col-sm-9" ng-if="showPicDom"><zafw-upload-img ng-attr-datalist="pageData.show_img_datalist" ng-attr-ispcweb="pageData.is_pc" ng-model="pageData.show_img_url"></zafw-upload-img></div></div></div><div class="modal-footer center"><button class="col-sm-offset-2 btn btn-primary" ng-click="pageFunc.editbtnFunc()" ng-show="showeditBtn">修改</button> <button class="col-sm-offset-2 btn btn-primary" ng-click="pageFunc.addbtnFunc()" ng-show="showaddBtn">添加</button> <button class="col-sm-offset-2 btn btn-primary" ng-click="pageFunc.clear()">取消</button></div></div></div></div>'),e.put("app/adList/newAdList/newAdList.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>幻灯片列表</h2><ol class="breadcrumb"><li><a>幻灯片</a></li><li><a>列表</a></li><li class="active"><strong>幻灯片列表</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>幻灯片列表</h5></div><div class="ibox-content"><div class="row"><div class="col-sm-6"><a class="btn btn-primary" ng-if="pageData.isShowAdd" href="#/index/addAd/{{pageData.is_pc}}">添加</a></div><div class="col-sm-6"></div></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th class="center">幻灯片类型</th><th class="center">幻灯片文字</th><th class="center">幻灯片链接</th><th class="center">幻灯片图片</th><th class="center">删除</th><th class="center">编辑</th></tr></thead><tbody ng-repeat="boxdata in navListData"><tr class="gradeX" ng-repeat="data in boxdata.datalist"><td class="center" rowspan="{{boxdata.datalist.length}}" ng-if="$first">{{boxdata.slide_type}}</td><td class="center">{{data.link_text}}</td><td class="center" style="max-width:400px;word-break:break-all;">{{data.link}}</td><td class="center"><img ng-src="{{data.img_url}}" alt="" style="width:60px;height:60px;float: left"></td><td class="center"><button class="btn btn-danger" ng-click="delMeBtn(data)">删除</button></td><td class="center" rowspan="{{boxdata.datalist.length}}" ng-if="$first"><a class="btn btn-primary" href="#/index/editAd/{{boxdata.slide_type}}/{{pageData.is_pc}}">编辑</a> <button class="btn btn-danger" ng-click="delNavBtn(boxdata)">全部删除</button></td></tr></tbody></table></div></div></div></div></div>'),e.put("app/cardCoupon/cardList/cardList.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>优惠券列表</h2><ol class="breadcrumb"><li><a>优惠券</a></li><li><a>列表</a></li><li class="active"><strong>优惠券列表</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>优惠券列表</h5></div><div class="ibox-content"><div class=""><a class="btn btn-primary" ng-click="addcardcouponBtn()">添加</a> <a class="btn btn-danger" ng-click="delallcardcouponBtn()">批量删除</a></div><div class="row"><div class="col-sm-6"><div class="dataTables_length" id="editable_length"><label><select class="form-control" ng-model="category" ng-options="category.cardcoupon_name for category in categorys" ng-change="whichcategory(category)"></select></label></div></div></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="selectedall" ng-click="checkedall()"></th><th class="center">优惠券ID</th><th class="center">优惠券名称</th><th class="center">优惠券类型</th><th class="center">有效期</th><th class="center">发放详情</th><th class="center">使用限制</th><th class="center">优惠额度</th><th class="center">已发数量</th><th class="center">总数量</th><th class="center" style="min-width:310px !important;">操作</th></tr></thead><tbody><tr class="gradeX" ng-repeat="boxdata in cardCoupons"><td ng-click="selectme(boxdata)" class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="boxdata.selected"></td><td class="center">{{boxdata.cardcoupon_id}}</td><td class="center">{{boxdata.cardcoupon_name}}<div ng-if="boxdata.full_give!=\'\'&&boxdata.full_give!=null">订单金额满{{boxdata.full_give}}自动赠送</div></td><td class="center"><span ng-if="boxdata.cardcoupon_type == 0">折扣券</span> <span ng-if="boxdata.cardcoupon_type == 1">现金券</span> <span ng-if="boxdata.cardcoupon_type == 2">免邮券</span> <span ng-if="boxdata.cardcoupon_type == 3">满减券</span> <span ng-if="boxdata.cardcoupon_type == 4">满送券</span></td><td class="center" ng-if="boxdata.expire_time_type==\'1\'">领取后{{boxdata.expire_day}}天</td><td class="center" ng-if="boxdata.expire_time_type!=\'1\'">{{boxdata.valid_from}}<br>~<br>{{boxdata.valid_to}}</td><td class="center"><span ui-sref="index.sendCardHistory({cardID:boxdata.cardcoupon_id})" style="color:#1c84c6;cursor:pointer;">发放详情</span></td><td class="center"><span ng-if="boxdata.limit_type !== \'0\'&&boxdata.limit_type !== \'1\'">所有商品</span> <span ng-if="boxdata.limit_type == \'0\'">商品ID:{{boxdata.product_id}}</span> <span ng-if="boxdata.limit_type == \'1\'">标签:{{boxdata.product_tags}}</span></td><td class="center"><span ng-if="boxdata.cardcoupon_type == 0">{{boxdata.discount}}折</span> <span ng-if="boxdata.cardcoupon_type == 1">抵扣{{boxdata.deductible_amount}}元</span> <span ng-if="boxdata.cardcoupon_type == 2">满{{boxdata.freefreight_amount}}包邮</span> <span ng-if="boxdata.cardcoupon_type == 3">满{{boxdata.buckle_amount}}减{{boxdata.buckle_sub_amount}}</span> <span ng-if="boxdata.cardcoupon_type == 4">满{{boxdata.buckle_amount}}送{{boxdata.buckle_sub_amount}}元</span></td><td class="center">{{boxdata.send_count}}</td><td class="center"><span ng-if="boxdata.max_count">{{boxdata.max_count}}</span> <span ng-if="boxdata.max_count==0">不限</span></td><td class="center"><button class="btn btn-primary margin-right-10" ng-click="editcardcouponBtn(boxdata)">编辑</button> <button class="btn btn-danger margin-right-10" ng-click="delCardcouponBtn(boxdata)">删除</button> <button class="btn btn-primary margin-right-10" ng-if="boxdata.cardcoupon_type!=4" ng-click="giveCardcouponBtn(boxdata)">发放</button> <button class="btn btn-primary margin-right-10" ng-if="boxdata.cardcoupon_type!=4" ng-click="createQcodeBtn(boxdata)">二维码链接</button> <button class="btn btn-primary margin-right-10" ng-if="boxdata.weixin_qrcode_url" ng-click="createQcodeWeixinBtn(boxdata)">微信卡券二维码</button></td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totals}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totals" items-per-page="pagesize" max-size="6" ng-model="currentPage" class="pagination-sm" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" style="float:right;"></pagination></div></div></div></div></div></div></div></div><div class="modal inmodal" id="dealModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4 ng-show="isAddcard">添加优惠券</h4><h4 ng-show="!isAddcard">编辑优惠券</h4></div><div class="modal-body modalBody"><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 优惠券类型：</label><div class="col-sm-9"><select class="form-control" ng-model="addCategory" ng-options="addCategory.cardcoupon_name for addCategory in addCategorys" ng-change="changeCategory(addCategory)"></select></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 优惠券名称：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" name="productTitle" placeholder="请输入优惠券名称" ng-model="pageData.cardcoupon_name"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 图片</label><div class="col-sm-9"><zafw-upload-img ng-model="pageData.logo_url"></zafw-upload-img></div></div><div class="form-group overFlow" ng-if="addCategory.cardcoupon_type === 0"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 折扣：</label><div class="col-sm-8"><input type="text" class="form-control mBottom10" name="productTitle" placeholder="请输入可以抵扣(不小于0，不大于10)" ng-model="pageData.discount"></div><div class="col-sm-1 lineHeight34">折</div></div><div class="form-group overFlow" ng-if="addCategory.cardcoupon_type === 1"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 抵扣额度：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" name="productTitle" placeholder="请输入可以抵扣的金额" ng-model="pageData.deductible_amount"></div></div><div class="form-group overFlow" ng-if="addCategory.cardcoupon_type === 2"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 满减额：</label><div class="col-sm-9"><span style="float: left;position: relative;top: 8px;">消费满</span><div class="col-sm-3"><input type="number" min="0" class="form-control mBottom10" ng-model="pageData.freefreight_amount"></div><span style="position: relative;top: 8px;">元免邮费</span></div></div><div class="form-group overFlow" ng-if="addCategory.cardcoupon_type === 3"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 满减券：</label><div class="col-sm-1 lineHeight34">满</div><div class="col-sm-3"><input type="number" min="0" class="form-control mBottom10" name="productTitle" ng-model="pageData.buckle_amount"></div><div class="col-sm-1 lineHeight34">元</div><div class="col-sm-1 lineHeight34">减</div><div class="col-sm-2"><input type="number" min="0" class="form-control mBottom10" name="productTitle" ng-model="pageData.buckle_sub_amount"></div><div class="col-sm-1 lineHeight34">元</div></div><div class="form-group overFlow" ng-if="addCategory.cardcoupon_type === 4"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 满送券：</label><div class="col-sm-1 lineHeight34">满</div><div class="col-sm-3"><input type="number" min="0" class="form-control mBottom10" name="productTitle" ng-model="pageData.buckle_amount"></div><div class="col-sm-1 lineHeight34">元</div><div class="col-sm-1 lineHeight34">送</div><div class="col-sm-2"><input type="number" min="0" class="form-control mBottom10" name="productTitle" ng-model="pageData.buckle_sub_amount"></div><div class="col-sm-1 lineHeight34">元</div></div><div class="form-group overFlow"><label class="col-sm-3 control-label">发放数量：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" name="productTitle" ng-model="pageData.max_count" placeholder="选填，如果无数量限制可不填,0表示不限数量"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label">过期类型：</label><div class="col-sm-9"><label><input type="radio" checked="checked" value="" id="expireTimeTypeRadio1" name="expireTimeType" ng-model="pageData.expire_time_type">指定时间段</label>&nbsp; <label><input type="radio" value="1" id="expireTimeTypeRadio2" name="expireTimeType" ng-model="pageData.expire_time_type">领取后 <span ng-if="pageData.expire_time_type==\'1\'"><input type="text" min="0" class="inputwidth50" name="productTitle" ng-model="pageData.expire_day">天过期</span></label></div></div><div class="form-group overFlow" ng-if="pageData.expire_time_type==\'\'"><label class="col-sm-3 control-label">开始时间：</label><div class="col-sm-5"><div class="input-group date"><input type="text" class="form-control" placeholder="开始时间" ng-model="pageData.valid_from" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div><div class="form-group overFlow" ng-if="pageData.expire_time_type==\'\'"><label class="col-sm-3 control-label">过期时间：</label><div class="col-sm-5"><div class="input-group date"><input type="text" class="form-control" placeholder="结束时间" ng-model="pageData.valid_to" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label">领取限制：</label><div class="col-sm-9"><label><input type="radio" checked="checked" value="" id="limitRadio1" name="user_get_limit_type" ng-model="pageData.user_get_limit_type">不限制</label> <label><input type="radio" value="1" id="limitRadio2" name="user_get_limit_type" ng-model="pageData.user_get_limit_type">仅分销员可以领取（有消费历史）</label> <label><input type="radio" value="2" id="limitRadio2" name="user_get_limit_type" ng-model="pageData.user_get_limit_type">仅非分销员可以领取</label></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label">商品使用限制：</label><div class="col-sm-9"><label><input type="radio" checked="checked" value="" id="limitRadio1" name="limitRadio" ng-model="pageData.limit_type">全场通用</label> <label><input type="radio" value="0" id="limitRadio2" name="limitRadio" ng-model="pageData.limit_type">限单个商品使用</label> <label><input type="radio" value="1" id="limitRadio2" name="limitRadio" ng-model="pageData.limit_type">限某个标签组使用</label></div></div><div class="form-group overFlow" ng-if="pageData.limit_type==\'0\'"><label class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-primary select-product-btn" ng-click="selectProBtn()" ng-if="!productEditorData.product_id">选择商品</button> <button class="btn btn-primary select-product-btn" ng-click="selectProBtn()" ng-if="productEditorData.product_id">修改商品</button><div class="select-product" ng-if="productEditorData.product_id"><img ng-src="{{productEditorData.img_url}}"><div class="property"><div class="name">{{productEditorData.product_title}}</div><div class="price">{{productEditorData.price | currency:"￥": 2}}</div></div></div></div></div><div class="form-group overFlow" ng-if="pageData.limit_type==\'1\'"><label class="col-sm-3 control-label"></label><div class="col-sm-9"><label ng-repeat="item in tagsData"><input type="checkbox" name="tags" ng-model="item.select" ng-true-value="1" ng-false-value="0">{{item.tag_name}}&nbsp;&nbsp;</label></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label">购物频道限制:</label><div class="col-sm-9"><label><input type="checkbox" ng-model="pageData.is_can_use_shop">商城正常购买</label> <label><input type="checkbox" ng-model="pageData.is_can_use_groupbuy">开团</label> <label><input type="checkbox" ng-model="pageData.is_can_use_groupbuy_member">参团</label></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label">指定渠道可用:</label><div class="col-sm-9"><label ng-bind="pageData.bind_channel_name"></label> &nbsp;&nbsp; <label ng-click="selectNotChannel()">[不指定渠道]</label> <button class="col-sm-offset-2 btn btn-primary" ng-click="selectChannel()">选择</button></div></div><div class="form-group overFlow" ng-if="pageData.cardcoupon_type!=4"><label class="col-sm-3 control-label">关注自动赠送:</label><div class="col-sm-9"><label><input type="checkbox" ng-model="pageData.is_subscribe_give">关注自动赠送</label></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label">订单满</label><div class="col-sm-9"><label><input type="text" ng-model="pageData.full_give">元自动赠送:</label></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label">指定门店:</label><div class="col-sm-9"><label ng-bind="pageData.store_names"></label> &nbsp;&nbsp; <label ng-click="selectNotStore()">[不指定门店]</label> <button class="col-sm-offset-2 btn btn-primary" ng-click="selectStore()">选择</button></div></div></div><div class="modal-footer center"><button class="col-sm-offset-2 btn btn-primary" ng-click="addCouponBtn()" ng-show="isAddcard">添加</button> <button class="col-sm-offset-2 btn btn-primary" ng-click="addCouponBtn()" ng-show="!isAddcard">编辑</button> <button class="col-sm-offset-2 btn btn-primary" ng-click="clear()">取消</button></div></div></div></div><div class="modal inmodal" id="giveDealModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>发放优惠券</h4></div><div class="modal-body"><div class="form-group overFlow"><div class="col-sm-9"><label><input type="radio" value="" id="sendRadio1" name="sendRadio" ng-model="sendCard.send_type">给标签组用户发</label> <label><input type="radio" value="0" id="sendRadio2" name="sendRadio" ng-model="sendCard.send_type">给个人发</label></div></div><div class="form-group overFlow" ng-if="sendCard.send_type!=\'0\'"><div class="col-sm-9"><button class="btn select-tag-btn" ng-class="{\'btn-primary\':tag.select,\'btn-white\':!tag.select}" ng-repeat="tag in memberTags" ng-click="selectTag($index)">{{tag.tag_name}}</button></div></div><div class="form-group overFlow" ng-if="sendCard.send_type==\'0\'"><div class="col-sm-9"><button class="btn btn-primary select-tag-btn" ng-click="showMembers()" ng-if="!sendCard.id">选择</button> <button class="btn btn-primary select-tag-btn" ng-click="showMembers()" ng-if="sendCard.id">更换</button><div class="select-product" ng-if="sendCard.id"><img ng-src="{{sendCard.img}}"><div class="property"><div class="name">{{sendCard.nick_name}}</div><div class="price">{{sendCard.true_name}}</div></div></div></div></div></div><div class="modal-footer center"><button class="col-sm-offset-2 btn btn-primary" ng-click="giveCouponBtn()">发放</button></div></div></div></div><div class="modal inmodal" id="memberdealModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>会员列表</h4></div><div class="modal-body modalBody"><div class="row"><div class="col-sm-9"><div id="editable_filter" class="dataTables_filter">搜索: <label><input type="search" class="form-control" style="width:400px;" placeholder="输入用户昵称、用户名、手机号码查找" aria-controls="editable" ng-model="keywordM" ng-keyup="ctrlsearchM($event)"></label></div></div></div><table class="table table-striped table-bordered table-hover dataTables-example dataTable dtr-inline" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info"><thead><tr role="row"><th class="sorting_asc" tabindex="0" rowspan="1" colspan="1" style="width: 144px;">昵称</th><th class="sorting_asc" tabindex="0" rowspan="1" colspan="1" style="width: 144px;">姓名</th><th class="sorting_asc" tabindex="0" rowspan="1" colspan="1" style="width: 105px;">手机</th><th class="sorting_asc" tabindex="0" style="width: 134px;">用户名</th></tr></thead><tbody><tr ng-repeat="member in memberListData" ng-click="selectMeBtnM(member)" style="cursor:pointer;"><td>{{member.wx_nick_name}}</td><td>{{member.true_name}}</td><td>{{member.user_phone}}</td><td>{{member.user_id}}</td></tr></tbody></table></div><div class="modal-footer center"><div class="col-sm-4"><div class="dataTables_info" id="DataTables_Table_0_info" role="status" aria-live="polite" style="display: inline-block;padding-left: 0;margin: 20px 0;">第{{pageindexM}}页 每页 {{pagesizeM}} 总共 {{totalPageM}} 页</div></div><div class="col-sm-8"><div class="dataTables_paginate paging_simple_numbers" id="DataTables_Table_0_paginate" style="margin: 0;float: right;"><pagination boundary-links="true" total-items="totalItems" ng-model="pageindexM" class="pagination-sm" items-per-page="pagesizeM" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="memberpageChanged()" max-size="6"></pagination></div></div></div></div></div></div><div class="modal bs-example-modal-sm" id="qCodeModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-sm"><div class="modal-content"><div class="modal-header center modalHeader"><h4>用微信扫描二维码</h4></div><div class="modal-body"><span ng-if="qcodedata.weixin_card_id!=\'\'">微信卡券ID:<br>{{qcodedata.weixin_card_id}}</span> <img ng-src="{{qcodedata.qcode}}" alt="" style="width:242px;height:242px;margin:0 auto;"><br><a style="word-wrap : break-word;" ng-href="{{qcodedata.url}}" target="_blank" title="点击查看">{{qcodedata.url}}</a></div></div></div></div><div class="modal inmodal" id="pddealModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>选择附加商品</h4></div><div class="modal-body modalBody"><div class="row"><div class="col-sm-6"><div class="dataTables_length" id="editable_length"><label><select class="form-control" ng-model="categoryP" ng-options="categoryP.category_name for categoryP in categorysP" ng-change="whichcateP(categoryP)"></select></label></div></div><div class="col-sm-6"><div id="editable_filter" class="dataTables_filter floatR">搜索: <label><input type="search" class="form-control input-sm" placeholder="输入您要搜索的商品" aria-controls="editable" ng-model="keywordP" ng-keyup="ctrlsearchP($event)"></label></div></div></div><table class="table table-striped table-bordered table-hover dataTables-example dataTable dtr-inline" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info"><thead><tr role="row"><th class="sorting_asc" tabindex="0" rowspan="1" colspan="1" style="width: 144px;">名称</th><th class="sorting_asc" tabindex="0" rowspan="1" colspan="1" style="width: 144px;">ID</th><th class="sorting_asc" tabindex="0" rowspan="1" colspan="1" style="width: 105px;">价格</th><th class="sorting_asc" tabindex="0" style="width: 134px;">创建时期</th></tr></thead><tbody><tr ng-repeat="product in productlistdatas" ng-click="selectMeBtn(product)" style="cursor:pointer;"><td>{{product.product_title}}</td><td>{{product.product_id}}</td><td>{{product.price}}</td><td>{{product.create_time | date:\'yyyy年MM月dd日\'}}</td></tr></tbody></table></div><div class="modal-footer center"><div class="col-sm-4"><div class="dataTables_info" id="DataTables_Table_0_info" role="status" aria-live="polite" style="display: inline-block;padding-left: 0;margin: 20px 0;">第{{currentPageP}}页 每页 {{pagesizeP}} 总共 {{pageindexs}} 页</div></div><div class="col-sm-8"><div class="dataTables_paginate paging_simple_numbers" id="DataTables_Table_0_paginate" style="margin: 0;float: right;"><pagination boundary-links="true" total-items="totalItems" ng-model="currentPageP" class="pagination-sm" items-per-page="pagesizeP" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pdpageChanged()" max-size="6"></pagination></div></div></div></div></div></div><div class="modal inmodal" id="dlgChannelList" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>选择渠道</h4></div><div class="modal-body modalBody"><input type="hidden" min="0" ng-model="pageData.bind_channel_userid"><table class="table table-striped table-bordered table-hover dataTables-example dataTable dtr-inline" id="DataTables_Table_00" role="grid" aria-describedby="DataTables_Table_0_info"><thead><tr role="row"><th class="sorting_asc" tabindex="0" rowspan="1" colspan="1" style="width: 144px;">渠道名称(单击选择)</th></tr></thead><tbody><tr ng-repeat="item in channelList" ng-click="selectChannelConfirm(item)" style="cursor:pointer;"><td>{{item.ChannelName}}</td></tr></tbody></table></div></div></div></div><div class="modal bs-example-modal-sm" id="wrapSetHexiaoCode" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-sm"><div class="modal-content"><div class="modal-header center modalHeader"><h4>设置优惠券核销码</h4></div><div class="modal-body"><span>优惠券核销码:</span> <input type="text" class="form-control" placeholder="请输入优惠券核销码"></div><div class="modal-footer center"><button class="btn btn-primary" ng-click="setHexiaoCode()">保存</button> <button class="btn btn-danger" ng-click="setHexiaoCodeCancel()">取消</button></div></div></div></div><div class="modal inmodal" id="dlgStoreList" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>选择门店</h4></div><div class="modal-body modalBody"><div class="row"><div class="col-sm-9"><div id="editable_filter" class="dataTables_filter">搜索: <label><input type="search" class="form-control" style="width:400px;" placeholder="店名" aria-controls="editable" ng-model="keywordStore" ng-keyup="ctrlsearchStore($event)"></label></div></div></div><table class="table table-striped table-bordered table-hover dataTables-example dataTable dtr-inline" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info"><thead><tr role="row"><th></th><th class="sorting_asc" tabindex="0" rowspan="1" colspan="1" style="width: 144px;">门店</th></tr></thead><tbody><tr ng-repeat="item in storeList" ng-click="selectMeBtnStore(item)" style="cursor:pointer;"><td ng-click="selectMeBtnStore(item)" style="width:10px;"><input type="checkbox" value="checked" class="input-mini" ng-checked="item.selected" ng-click="selectMeBtnStore(item)"></td><td>{{item.title}}</td></tr></tbody></table></div><div class="modal-footer center"><div><a class="btn btn-primary" ng-click="confirmSelectStore()">确定</a></div><div class="col-sm-4"><div class="dataTables_info" id="DataTables_Table_0_info" role="status" aria-live="polite" style="display: inline-block;padding-left: 0;margin: 20px 0;">第{{pageindexStore}}页 每页 {{pagesizeStore}} 总共 {{totalPageStore}} 页</div></div><div class="col-sm-8"><div class="dataTables_paginate paging_simple_numbers" id="DataTables_Table_0_paginate0" style="margin: 0;float: right;"><pagination boundary-links="true" total-items="totalCountStore" items-per-page="pagesizeStore" max-size="6" ng-model="pageindexStore" class="pagination-sm" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="storePageChanged()" style="float:right;"></pagination></div></div></div></div></div></div>'),
e.put("app/cardCoupon/sendCardHistory/sendCardHistory.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>卡券发放</h2><ol class="breadcrumb"><li><a>卡券</a></li><li><a>发放</a></li><li class="active"><strong>发放详情</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>发放详情</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><div class="ibox-content"><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><td class="center">卡券ID</td><td class="center">卡券编号</td><td class="center">卡券类型</td><td class="center">发放日期</td><td class="center">使用日期</td><td class="center">使用状态</td><td class="center">姓名</td><td class="center">手机号</td><td class="center">核销渠道</td><td class="center">赠送人</td><td class="center">赠送给</td></tr></thead><tbody><tr ng-repeat="boxdata in navListData"><td class="center">{{boxdata.cardcoupon_id}}</td><td class="center">{{boxdata.cardcoupon_number}}</td><td class="center"><span ng-if="boxdata.cardcoupon_type == 0">折扣券</span> <span ng-if="boxdata.cardcoupon_type == 1">现金券</span> <span ng-if="boxdata.cardcoupon_type == 2">免邮券</span> <span ng-if="boxdata.cardcoupon_type == 3">满减券</span> <span ng-if="boxdata.cardcoupon_type == 4">满送券</span></td><td class="center">{{boxdata.cardcoupon_send_time | date:\'yyyy-MM-dd HH:mm\'}}</td><td class="center"><span ng-if="boxdata.cardcoupon_use_time !== 0">{{boxdata.cardcoupon_use_time | date:\'yyyy-MM-dd HH:mm\'}}</span> <span ng-if="boxdata.cardcoupon_use_time === 0">还未使用</span></td><td class="center"><span ng-if="boxdata.cardcoupon_status == 0">未使用</span> <span ng-if="boxdata.cardcoupon_status == 1">已使用</span> <span ng-if="boxdata.cardcoupon_status == 2">已赠送</span></td><td class="center">{{boxdata.cardcoupon_user_truename}}</td><td class="center">{{boxdata.cardcoupon_user_phone}}</td><td class="center">{{boxdata.hexiao_channel}}</td><td class="center">{{boxdata.from_user_name}}</td><td class="center">{{boxdata.to_user_name}}</td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totals}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totals" items-per-page="pagesize" max-size="6" ng-model="currentPage" class="pagination-sm" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" style="float:right;"></pagination></div></div></div></div></div></div></div></div>'),e.put("app/article/addArticle/addArticle.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>添加文章</h2><ol class="breadcrumb"><li><a>文章</a></li><li><a>添加</a></li><li class="active"><strong>添加文章</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInRight"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>添加文章</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><form method="get" name="myForm" novalidate="" class="form-horizontal" ng-submit="submitProductFunc()"><div class="ibox-content"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 文章名称：</label><div class="col-sm-9"><input type="text" class="form-control" placeholder="请输入文章名称" ng-model="pageData.article_name" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 文章图片：</label><div class="col-sm-9"><zafw-upload-img ng-model="pageData.article_img_url"></zafw-upload-img></div></div><div class="form-group"><label class="col-sm-2 control-label">文章描述：</label><div class="col-sm-9"><textarea rows="3" cols="20" class="form-control" name="productSummary" placeholder="请输入文章描述" ng-model="pageData.article_summary" required="" ng-minlength="1" ng-maxlength="200"></textarea></div></div><div class="form-group"><label class="col-sm-2 control-label">文章分类：</label><div class="col-sm-3"><select class="form-control" ng-model="oneNav" ng-options="oneNav.category_name for oneNav in categorys" ng-change="whichcategory(oneNav)"></select></div></div><div class="form-group"><label class="col-sm-2 control-label">文章状态：</label><div class="col-sm-3"><select class="form-control" ng-model="oneStatu" ng-options="oneStatu.article_name for oneStatu in activeStatus" ng-change="whichStatu(oneStatu)"></select></div></div><div class="form-group"><label class="col-sm-2 control-label">文章排序：</label><div class="col-sm-9"><input type="number" class="form-control" placeholder="请输入文章排序" ng-model="pageData.article_sort" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label">阅读量：</label><div class="col-sm-9"><input type="number" class="form-control" placeholder="请输入文章阅读量" ng-model="pageData.article_pv" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label">分享数：</label><div class="col-sm-9"><input type="number" class="form-control" placeholder="请输入文章分享数" ng-model="pageData.article_share_total_count" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 文章标签：</label><div class="col-sm-9"><input type="text" class="form-control" placeholder="请输入文章标签，用逗号分开" ng-model="pageData.article_tags" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 文章详情：</label><div class="col-sm-9"><div class="summernote"></div></div></div><div class="btn btn-danger floatR" ng-click="addActivetyBtn()">添加文章</div><div class="clearBoth"></div><div class="hr-line-dashed"></div></div></form></div></div></div></div>'),e.put("app/article/articleAssort/articleAssort.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>文章分类</h2><ol class="breadcrumb"><li><a>文章</a></li><li><a>分类</a></li><li class="active"><strong>文章分类</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>文章分类</h5></div><div class="ibox-content"><div class=""><a class="btn btn-primary" ng-click="addcardcouponBtn()">添加</a> <a class="btn btn-danger" ng-click="delallNavBtn()">批量删除</a></div><div class="row"><div class="col-sm-6"></div><div class="col-sm-6"><div id="editable_filter" class="dataTables_filter floatR">搜索: <label><input type="search" class="form-control input-sm" placeholder="输入您要搜索的分类名称" aria-controls="editable" ng-model="keyword" ng-keyup="ctrlsearch($event)"></label></div></div></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="selectedall" ng-click="checkedall()"></th><th class="center">分类名称</th><th class="center">分类ID</th><th class="center">分类图片</th><th class="center">介绍介绍</th><th class="center">分类类型</th><th class="center">分类排序</th><th class="center">父级ID</th><th class="center">编辑</th></tr></thead><tbody><tr class="gradeX" ng-repeat="boxdata in navListData"><td ng-click="selectme(boxdata)" class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="boxdata.selected"></td><td class="center">{{boxdata.category_name}}</td><td class="center">{{boxdata.category_id}}</td><td class="center"><img ng-src="{{boxdata.category_img_url}}" alt="" style="width:60px;height:60px;float: left"></td><td class="center">{{boxdata.category_summary}}</td><td class="center">{{boxdata.category_systype}}</td><td class="center">{{boxdata.category_sort}}</td><td class="center">{{boxdata.category_parent_id}}</td><td class="center"><button class="btn btn-primary col-sm-5" ng-click="editcardcouponBtn(boxdata)">编辑</button> <button class="btn btn-danger col-sm-5 col-sm-offset-2" ng-click="delNavBtn(boxdata)">删除</button></td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totals}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totals" items-per-page="pagesize" max-size="6" ng-model="currentPage" class="pagination-sm" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" style="float:right;"></pagination></div></div></div></div></div></div></div></div><div class="modal inmodal" id="dealModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4 ng-if="isAddcard">添加文章分类</h4><h4 ng-if="!isAddcard">修改文章分类</h4></div><div class="modal-body modalBody"><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 分类名称：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入文章分类名称" ng-model="pageData.category_name"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label">分类介绍：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入分类介绍" ng-model="pageData.category_summary"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label">分类排序：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入分类排序" ng-model="pageData.category_sort"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label">分类类型：</label><div class="col-sm-9"><select class="form-control" ng-model="addOneNav" ng-options="addOneNav.category_name for addOneNav in addNavLists" ng-change="changeCategory(addOneNav)"></select></div></div><div class="form-group overFlow" ng-if="showPicDom"><label class="col-sm-3 control-label">分类图片：</label><div class="col-sm-9"><zafw-upload-img ng-model="pageData.category_img_url"></zafw-upload-img></div></div></div><div class="modal-footer center"><button class="col-sm-offset-2 btn btn-primary" ng-click="addCouponBtn()">保存</button> <button class="col-sm-offset-2 btn btn-primary" ng-click="clear()">取消</button></div></div></div></div>'),e.put("app/article/articleList/articleList.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>文章分类</h2><ol class="breadcrumb"><li><a>文章</a></li><li><a>分类</a></li><li class="active"><strong>文章分类</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>文章分类</h5></div><div class="ibox-content"><div class=""><a class="btn btn-primary" ng-if="articleList.ADMIN_CONFIG.articleList.addBtn" ui-sref="index.addArticle">添加</a> <a class="btn btn-danger" ng-if="articleList.ADMIN_CONFIG.articleList.deleteBtn" ng-click="delallNavBtn()">批量删除</a> <a class="btn btn-primary" ng-if="articleList.ADMIN_CONFIG.articleList.setLevelBtn" ng-click="moreSetLevelBtn(\'level\')">批量设置访问等级</a> <a class="btn btn-primary" ng-if="articleList.ADMIN_CONFIG.articleList.setCatBtn" ng-click="moreSetLevelBtn(\'cate\')">批量设置文章分类</a></div><div class="row"><div class="col-sm-6"><div class="dataTables_length" id="editable_length"><label><select class="form-control" ng-model="oneNav" ng-options="oneNav.category_name for oneNav in categorys" ng-change="whichcategory(oneNav)"></select></label></div></div><div class="col-sm-6"><div id="editable_filter" class="dataTables_filter floatR">搜索: <label><input type="search" class="form-control input-sm" placeholder="输入您要搜索的关键字" aria-controls="editable" ng-model="keyword" ng-keyup="ctrlsearch($event)"></label></div></div></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="selectedall" ng-click="checkedall()"></th><th class="center">文章名称</th><th class="center">文章ID</th><th class="center">文章状态</th><th class="center">文章图片</th><th class="center">文章地址</th><th class="center">文章分类</th><th class="center">阅读量</th><th class="center">分享数</th><th class="center" style="width:200px;">文章描述</th><th class="center">排序</th><th class="center">访问等级</th><th class="center">标签</th><th class="center">编辑</th></tr></thead><tbody><tr class="gradeX" ng-repeat="boxdata in navListData"><td ng-click="selectme(boxdata)" class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="boxdata.selected"></td><td class="center">{{boxdata.article_name}}</td><td class="center">{{boxdata.article_id}}</td><td class="center"><span ng-show="boxdata.article_status == 0">显示</span> <span ng-show="boxdata.article_status == 1">隐藏</span></td><td class="center"><img ng-src="{{boxdata.article_img_url}}" alt="" style="width:60px;height:60px;float: left"></td><td class="center">{{boxdata.activity_address}}</td><td class="center">{{boxdata.category_name}}</td><td class="center">{{boxdata.article_pv}}</td><td class="center">{{boxdata.article_share_total_count}}</td><td class="center">{{boxdata.article_summary}}</td><td class="center">{{boxdata.article_sort}}</td><td class="center">{{boxdata.article_access_level}}</td><td class="center">{{boxdata.article_tags}}</td><td class="center" style="width:142px;"><button class="btn btn-primary col-sm-5" ui-sref="index.editArticle({articleID:boxdata.article_id})">编辑</button> <button ng-if="articleList.ADMIN_CONFIG.articleList.deleteBtn" class="btn btn-danger col-sm-5 col-sm-offset-2" ng-click="delNavBtn(boxdata)">删除</button></td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totals}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totals" items-per-page="pagesize" max-size="6" ng-model="currentPage" class="pagination-sm" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" style="float:right;"></pagination></div></div></div></div></div></div></div></div><div class="modal inmodal" id="giveDealModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4 ng-show="showLevel">批量设置访问等级</h4><h4 ng-show="!showLevel">批量设置文章分类</h4></div><div class="modal-body"><div class="form-group overFlow" ng-show="showLevel"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 等级：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" name="productTitle" placeholder="请输入正整数，数字越大等级要求越高" ng-model="levelNum"></div></div><div class="form-group overFlow" ng-show="!showLevel"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 文章分类：</label><div class="col-sm-9"><label><select class="form-control" ng-model="setNav" ng-options="setNav.category_name for setNav in categorys" ng-change="setCate(setNav)"></select></label></div></div></div><div class="modal-footer center"><button class="col-sm-offset-2 btn btn-primary" ng-click="setLevelBtn()" ng-show="showLevel">设置访问等级</button> <button class="col-sm-offset-2 btn btn-primary" ng-click="setLevelBtn()" ng-show="!showLevel">设置活动分类</button></div></div></div></div>'),e.put("app/article/editArticle/editArticle.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>添加文章</h2><ol class="breadcrumb"><li><a>文章</a></li><li><a>添加</a></li><li class="active"><strong>添加文章</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInRight"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>添加文章</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><form method="get" name="myForm" novalidate="" class="form-horizontal" ng-submit="submitProductFunc()"><div class="ibox-content"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 文章名称：</label><div class="col-sm-9"><input type="text" class="form-control" placeholder="请输入文章名称" ng-model="pageData.article_name" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 文章图片：</label><div class="col-sm-9"><zafw-upload-img ng-model="pageData.article_img_url"></zafw-upload-img></div></div><div class="form-group"><label class="col-sm-2 control-label">文章描述：</label><div class="col-sm-9"><textarea rows="3" cols="20" class="form-control" name="productSummary" placeholder="请输入文章描述" ng-model="pageData.article_summary" required="" ng-minlength="1" ng-maxlength="200"></textarea></div></div><div class="form-group"><label class="col-sm-2 control-label">文章分类：</label><div class="col-sm-3"><select class="form-control" ng-model="oneNav" ng-options="oneNav.category_name for oneNav in categorys" ng-change="whichcategory(oneNav)"></select></div></div><div class="form-group"><label class="col-sm-2 control-label">文章状态：</label><div class="col-sm-3"><select class="form-control" ng-model="oneStatu" ng-options="oneStatu.article_name for oneStatu in activeStatus" ng-change="whichStatu(oneStatu)"></select></div></div><div class="form-group"><label class="col-sm-2 control-label">文章排序：</label><div class="col-sm-9"><input type="number" class="form-control" placeholder="请输入文章排序" ng-model="pageData.article_sort" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label">阅读量：</label><div class="col-sm-9"><input type="number" class="form-control" placeholder="请输入文章阅读量" ng-model="pageData.article_pv" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label">分享数：</label><div class="col-sm-9"><input type="number" class="form-control" placeholder="请输入文章分享数" ng-model="pageData.article_share_total_count" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 文章标签：</label><div class="col-sm-9"><input type="text" class="form-control" placeholder="请输入文章标签，用逗号分开" ng-model="pageData.article_tags" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 文章详情：</label><div class="col-sm-9"><div class="summernote"></div></div></div><div class="btn btn-danger floatR" ng-click="addActivetyBtn()">修改文章</div><div class="clearBoth"></div><div class="hr-line-dashed"></div></div></form></div></div></div></div>'),e.put("app/company/companyadd/companyadd.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>添加商品</h2><ol class="breadcrumb"><li><a>企业名录</a></li><li><a>添加</a></li><li class="active"><strong>添加企业</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInRight"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>添加企业</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><form method="get" name="myForm" novalidate="" class="form-horizontal" ng-submit="submitProductFunc()"><div class="ibox-content"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 企业名称：</label><div class="col-sm-3"><input type="text" class="form-control" name="productTitle" placeholder="请输入企业名称" ng-model="companydata.company_name" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 企业LOGO：</label><div class="col-sm-10"><zafw-upload-img ng-model="companydata.company_logo"></zafw-upload-img></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 公司董事：</label><div class="col-sm-3"><input type="text" class="form-control" name="productTitle" placeholder="请输入公司董事" ng-model="companydata.company_director" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 电话：</label><div class="col-sm-3"><input type="text" class="form-control" name="productTitle" placeholder="请输入联系电话" ng-model="companydata.company_tel" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 网址：</label><div class="col-sm-3"><input type="text" class="form-control" name="productTitle" placeholder="请输入公司网址" ng-model="companydata.company_websiteurl" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 公司性质：</label><div class="col-sm-3"><input type="text" class="form-control" name="productTitle" placeholder="请输入公司性质" ng-model="companydata.company_natrue" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 简介：</label><div class="col-sm-8"><div class="summernote"></div></div></div><div class="hr-line-dashed"></div><div class="btn btn-danger floatR" ng-click="addcompanyBtn()">添加企业</div><div class="clearBoth"></div><div class="hr-line-dashed"></div></div></form></div></div></div></div>'),e.put("app/company/companydetail/companydetail.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>添加商品</h2><ol class="breadcrumb"><li><a>企业名录</a></li><li><a>详情</a></li><li class="active"><strong>添加详情</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInRight"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>添加详情</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><form method="get" name="myForm" novalidate="" class="form-horizontal" ng-submit="submitProductFunc()"><div class="ibox-content"><div class="form-group"><label class="col-sm-2 control-label fontsize18">企业名称：</label><div class="col-sm-4 control-label fontsize18" style="text-align:left;">{{companydata.company_name}}</div></div><div class="form-group"><label class="col-sm-2 control-label fontsize18">企业LOGO：</label><div class="col-sm-10"><img ng-src="{{companydata.company_logo}}" style="width:60px;"></div></div><div class="form-group"><label class="col-sm-2 control-label fontsize18">公司董事：</label><div class="col-sm-4 control-label fontsize18" style="text-align:left;">{{companydata.company_director}}</div></div><div class="form-group"><label class="col-sm-2 control-label fontsize18">电话：</label><div class="col-sm-4 control-label fontsize18" style="text-align:left;">{{companydata.company_tel}}</div></div><div class="form-group"><label class="col-sm-2 control-label fontsize18">网址：</label><div class="col-sm-4 control-label fontsize18" style="text-align:left;">{{companydata.company_websiteurl}}</div></div><div class="form-group"><label class="col-sm-2 control-label fontsize18">公司性质：</label><div class="col-sm-4 control-label fontsize18" style="text-align:left;">{{companydata.company_natrue}}</div></div><div class="form-group raiseimg"><label class="col-sm-2 control-label fontsize18">简介：</label><div class="col-sm-6 control-label fontsize18" style="text-align:left;" ng-bind-html="companydata.comoany_introduction"></div></div><div class="hr-line-dashed"></div></div></form></div></div></div></div>'),e.put("app/company/companyedit/companyedit.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>添加商品</h2><ol class="breadcrumb"><li><a>企业名录</a></li><li><a>添加</a></li><li class="active"><strong>添加企业</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInRight"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>添加企业</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><form method="get" name="myForm" novalidate="" class="form-horizontal" ng-submit="submitProductFunc()"><div class="ibox-content"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 企业名称：</label><div class="col-sm-3"><input type="text" class="form-control" name="productTitle" placeholder="请输入企业名称" ng-model="companydata.company_name" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 企业LOGO：</label><div class="col-sm-10"><zafw-upload-img ng-model="company_logo"></zafw-upload-img></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 公司董事：</label><div class="col-sm-3"><input type="text" class="form-control" name="productTitle" placeholder="请输入公司董事" ng-model="companydata.company_director" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 电话：</label><div class="col-sm-3"><input type="text" class="form-control" name="productTitle" placeholder="请输入联系电话" ng-model="companydata.company_tel" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 网址：</label><div class="col-sm-3"><input type="text" class="form-control" name="productTitle" placeholder="请输入公司网址" ng-model="companydata.company_websiteurl" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 公司性质：</label><div class="col-sm-3"><input type="text" class="form-control" name="productTitle" placeholder="请输入公司性质" ng-model="companydata.company_natrue" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 简介：</label><div class="col-sm-8"><div class="summernote"></div></div></div><div class="hr-line-dashed"></div><div class="btn btn-danger floatR" ng-click="editcompanyBtn()">更改企业信息</div><div class="clearBoth"></div><div class="hr-line-dashed"></div></div></form></div></div></div></div>'),e.put("app/company/companylist/companylist.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>企业名录</h2><ol class="breadcrumb"><li><a>商城</a></li><li><a>商品</a></li><li class="active"><strong>企业名录</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>企业名录</h5></div><div class="ibox-content"><div class="row"><div class="col-sm-6"><a ui-sref="index.companyadd" class="btn btn-primary">添加</a><a class="btn btn-danger" ng-click="delallcompanyBtn()">批量删除</a></div><div class="col-sm-6"><div id="editable_filter" class="dataTables_filter floatR">搜索: <label><input type="search" class="form-control input-sm" placeholder="输入您要搜索的商品" aria-controls="editable" ng-model="prokeyword" ng-keyup="ctrlsearch($event)"></label></div></div></div><table class="table table-striped table-bordered table-hover dataTable" id="editable" role="grid" aria-describedby="editable_info"><thead><tr role="row"><th style="width:20px;text-align: center;"><input type="checkbox" value="checked" class="input-mini" ng-checked="selectedall" ng-click="checkedall()"></th><th class="sorting_asc center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="名称: activate to sort column descending" style="width: 185px;">名称</th><th class="sorting center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" aria-label="公司性质: activate to sort column ascending" style="width: 128px;">公司性质</th><th class="sorting center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" aria-label="公司董事: activate to sort column ascending" style="width: 161px;">公司董事</th><th class="sorting center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" aria-label="电话: activate to sort column ascending" style="width: 160px;">电话</th><th class="sorting center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" aria-label="操作: activate to sort column ascending" style="width: 200px;">操作</th></tr></thead><tbody><tr class="gradeA odd" role="row" ng-repeat="boxdata in companyDates"><td ng-click="selectme(boxdata)" style="text-align: center;"><input type="checkbox" value="checked" class="input-mini" ng-checked="boxdata.selected"></td><td class="sorting_1 center"><img ng-src="{{boxdata.company_logo}}" alt="" style="width:80px;height:80px;"><div>{{boxdata.company_name}}</div></td><td class="center lineheight80">{{boxdata.company_natrue}}</td><td class="center lineheight80">{{boxdata.company_director}}</td><td class="center lineheight80">{{boxdata.company_tel}}</td><td class="center"><button class="btn btn-danger center col-sm-3 margintop26" ui-sref="index.companyedit({companyID:boxdata.company_id})">编辑</button> <button class="btn btn-primary center col-sm-3 col-sm-offset-1 margintop26" ui-sref="index.companydetail({companyID:boxdata.company_id})">详情</button> <button class="btn btn-danger center col-sm-3 col-sm-offset-1 margintop26" ng-click="delcompanyBtn(boxdata)">删除</button></td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totals}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totals" items-per-page="pagesize" max-size="6" ng-model="currentPage" class="pagination-sm" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" style="float:right;"></pagination></div></div></div></div></div></div></div></div>'),e.put("app/components/alertbox/alertbox.html",'<div><div class="modal-header" style="text-align:center;"><h3 class="modal-title">{{alertdata.title}}</h3></div><div class="modal-body" ng-bind-html="alertdata.concent"></div><div class="modal-footer"><button class="btn btn-primary" ng-click="ok()">OK</button></div></div>'),e.put("app/components/alertconformbox/alertconformbox.html",'<div><div class="modal-header" style="text-align:center;"><h3 class="modal-title">{{alertdata.title}}</h3></div><div class="modal-body" ng-bind-html="alertdata.concent"></div><div class="modal-footer"><button class="btn btn-danger" ng-click="ok()">{{alertdata.again}}</button> <button class="btn btn-primary" ng-click="cancel()">{{alertdata.back}}</button></div></div>'),
e.put("app/components/alertselectbox/alertselectbox.html",'<div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><div class="ibox-tools" style="float:left;"><h5>上架商品</h5></div></div><div class="ibox-content"><div class="table-responsive"><div id="DataTables_Table_0_wrapper" class="dataTables_wrapper form-inline"><div class="clear"></div><div class="dataTables_length" id="DataTables_Table_0_length"></div><div id="DataTables_Table_0_filter" class="dataTables_filter"><label><button type="button" class="btn btn-success" ng-click="refresh()">刷新列表</button> <button type="button" class="btn btn-primary" ng-click="addproduct()">添加商品</button></label> <input type="search" class="form-control input-sm" placeholder="请输入商品名称" aria-controls="DataTables_Table_0" style="margin: 0;float: right;"></div><table class="table table-striped table-bordered table-hover dataTables-example dataTable dtr-inline" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info"><thead><tr role="row"><th class="sorting_asc" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Rendering engine: activate to sort column descending" style="width: 144px;">名称</th><th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Browser: activate to sort column ascending" style="width: 105px;">价格</th><th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column ascending" style="width: 134px;">创建时期</th><th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" style="width: 60px;">操作</th></tr></thead><tbody><tr ng-repeat="product in productlistdatas"><td>{{product.product_title}}</td><td>{{product.price}}</td><td>{{product.create_time | date:\'yyyy年MM月dd日\'}}</td><td class="center"><button type="button" class="btn btn-success" ng-click="seletproduct(product)">选择</button></td></tr></tbody></table><div class="dataTables_info" id="DataTables_Table_0_info" role="status" aria-live="polite">第{{currentPage}}页 每页 {{pagesize}} 总共 {{pageindexs}} 页</div><div class="dataTables_paginate paging_simple_numbers" id="DataTables_Table_0_paginate" style="margin: 0;float: right;"><pagination boundary-links="true" total-items="totalItems" ng-model="currentPage" class="pagination-sm" items-per-page="pagesize" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" max-size="6"></pagination></div></div></div></div></div></div></div>'),e.put("app/components/backTop/backTop.html",'<div id="gotoTop" title="返回顶部"><svg class="icon iconfont font30" aria-hidden="true"><use xlink:href="#icon-zuoqianfang"></use></svg></div>'),e.put("app/components/productTagBox/productTagBox.html",'<div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>标签列表</h5></div><div class="ibox-content"><div class="row"><div class="col-sm-6"><button class="btn btn-danger" ng-click="delalltagsBtn()">批量删除</button></div><div class="col-sm-4 col-sm-offset-2"><label><input type="search" class="form-control input-sm" placeholder="输入您要添加的标签" aria-controls="editable" ng-model="tag_name"></label> <button class="btn btn-primary" ng-click="addintagsBtn()">添加</button></div></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="selectedall" ng-click="checkedall()"></th><th class="center">标签名称</th><th class="center">编辑</th></tr></thead><tbody><tr class="gradeX center" ng-repeat="tag in tags"><td ng-click="selectme(tag)"><input type="checkbox" value="checked" class="input-mini" ng-checked="tag.selected"></td><td class="center"><div ng-show="!tag.isshow">{{tag.tag_name}}</div><div ng-show="tag.isshow"><input type="search" class="form-control input-sm" placeholder="{{tag.tag_name}}" aria-controls="editable" ng-model="tag.tag_editname"></div></td><td class="center"><div ng-show="!tag.isshow"><button class="btn btn-primary col-sm-3 col-sm-offset-2" ng-click="edittagBtn(tag)">编辑</button> <button class="btn btn-danger col-sm-3 col-sm-offset-1" ng-click="deltagBtn(tag)">删除</button></div><div ng-show="tag.isshow"><button class="btn btn-danger col-sm-3 col-sm-offset-2" ng-click="ensureBtn(tag)">确定</button> <button class="btn btn-primary col-sm-3 col-sm-offset-1" ng-click="quiteditBtn(tag)">取消</button></div></td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totalItems}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totalItems" ng-model="currentPage" class="pagination-sm" items-per-page="pagesize" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" max-size="6" style="float:right;"></pagination></div></div></div><div class="clearBoth"></div></div></div></div></div></div>'),e.put("app/config/configList/configList.html",'<div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>自定义配置列表</h5></div><div class="ibox-content"><div class=""><a class="btn btn-primary" ng-click="addTopConfigBtn()">添加</a> <a class="btn btn-danger" ng-click="delallconfigBtn()">批量删除</a></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="selectedall" ng-click="checkedall()"></th><th class="center">自定义ID</th><th class="center">key（键）</th><th class="center">value（值）</th><th class="center" style="min-width:300px !important;">编辑</th></tr></thead><tbody><tr class="gradeX" ng-repeat="boxdata in configListData"><td ng-click="selectme(boxdata)" class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="boxdata.selected"></td><td class="center">{{boxdata.id}}</td><td class="center">{{boxdata.key}}</td><td class="center">{{boxdata.value}}</td><td class="center"><button class="btn btn-primary col-sm-4" ng-click="editConfigBtn(boxdata)">编辑</button> <button class="btn btn-danger col-sm-4 col-sm-offset-2" ng-click="delConfigBtn(boxdata)">删除</button></td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totals}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totals" items-per-page="pagesize" max-size="6" ng-model="currentPage" class="pagination-sm" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" style="float:right;"></pagination></div></div></div></div></div></div></div></div><div class="modal inmodal" id="dealModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4 ng-show="isAddcard">添加自定义配置</h4><h4 ng-show="!isAddcard">修改自定义配置</h4></div><div class="modal-body modalBody"><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 自定义key（键）：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" name="productTitle" placeholder="请输入自定义key" ng-model="pageData.key"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 自定义key（值）：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" name="productTitle" placeholder="请输入自定义value" ng-model="pageData.value"></div></div></div><div class="modal-footer center"><button class="col-sm-offset-2 btn btn-primary" ng-click="addConfigBtn()" ng-show="isAddcard">添加</button> <button class="col-sm-offset-2 btn btn-primary" ng-click="addConfigBtn()" ng-show="!isAddcard">编辑</button> <button class="col-sm-offset-2 btn btn-primary" ng-click="clear()">取消</button></div></div></div></div>'),e.put("app/customManage/followerList/followerList.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>粉丝管理</h2><ol class="breadcrumb"><li><a>粉丝</a></li><li><a>列表</a></li><li class="active"><strong>粉丝管理</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>粉丝管理</h5></div><div class="ibox-content"><div class="row"><div class="col-sm-6"><a class="btn btn-primary" ng-click="updateFollowerBtn(\'num\')">更新粉丝数量</a> <a class="btn btn-success" ng-click="updateFollowerBtn(\'info\')">更新粉丝信息</a></div><div class="col-sm-6"><div id="editable_filter" class="dataTables_filter floatR">搜索: <label><input type="search" class="form-control input-sm" placeholder="输入您要搜索的粉丝的微信名称" aria-controls="editable" ng-model="keyword" ng-keyup="ctrlsearch($event)"></label></div></div></div><table class="table table-striped table-bordered table-hover dataTable" id="editable" role="grid" aria-describedby="editable_info"><thead><tr role="row"><th class="asc center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" style="width: 185px;">微信名称</th><th class="center" tabindex="0" rowspan="1" colspan="1" style="width: 128px;">头像</th><th class="asc center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" style="width: 185px;">粉丝编号</th><th class="center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" style="width: 161px;">性别</th><th class="center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" style="width: 220px;">国家</th><th class="center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" style="width: 121px;">省份</th><th class="center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" style="width: 121px;">城市</th></tr></thead><tbody><tr class="gradeA odd" role="row" ng-repeat="boxdata in raisepros"><td class="center lineheight80">{{boxdata.nice_name}}</td><td class="1 center"><img ng-src="{{boxdata.head_img_url}}" alt="" style="width:80px;height:80px;"></td><td class="center lineheight80">{{boxdata.autoid}}</td><td class="center lineheight80"><span ng-if="boxdata.sex == 1">男</span> <span ng-if="boxdata.sex == 2">女</span></td><td class="center lineheight80">{{boxdata.country}}</td><td class="center lineheight80">{{boxdata.province}}</td><td class="center lineheight80">{{boxdata.city}}</td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totals}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totals" items-per-page="pagesize" max-size="6" ng-model="currentPage" class="pagination-sm" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" style="float:right;"></pagination></div></div></div></div></div></div></div></div>'),e.put("app/customManage/userTagList/userTagList.html",'<div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>会员标签列表</h5></div><div class="ibox-content"><div class="row"><div class="col-sm-6"><a class="btn btn-primary" ng-click="addcardcouponBtn()">添加</a><a class="btn btn-danger" ng-click="delallraiseproBtn()">批量删除</a></div><div class="col-sm-6"><div id="editable_filter" class="dataTables_filter floatR">搜索: <label><input type="search" class="form-control input-sm" placeholder="输入您要搜索的标签" aria-controls="editable" ng-model="prokeyword" ng-keyup="ctrlsearch($event)"></label></div></div></div><table class="table table-striped table-bordered table-hover dataTable" id="editable" role="grid" aria-describedby="editable_info"><thead><tr role="row"><th style="width:20px;text-align: center;"><input type="checkbox" value="checked" class="input-mini" ng-checked="selectedall" ng-click="checkedall()"></th><th class="center">标签ID</th><th class="center">标签名称</th><th class="center">访问等级</th><th class="center">操作</th></tr></thead><tbody><tr class="gradeA odd" role="row" ng-repeat="raisepro in raisepros"><td ng-click="selectme(raisepro)" style="text-align: center;"><input type="checkbox" value="checked" class="input-mini" ng-checked="raisepro.selected"></td><td class="center lineheight80">{{raisepro.tag_id}}</td><td class="center lineheight80">{{raisepro.tag_name}}</td><td class="center lineheight80">{{raisepro.access_level}}</td><td class="center"><button class="btn btn-primary center col-sm-5 margintop26" ng-click="editcardcouponBtn(raisepro)">编辑</button><button class="btn btn-danger center col-sm-5 col-sm-offset-2 margintop26" ng-click="delraiseproBtn(raisepro)">删除</button></td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totals}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totals" items-per-page="pagesize" max-size="6" ng-model="currentPage" class="pagination-sm" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" style="float:right;"></pagination></div></div></div></div></div></div></div></div><div class="modal inmodal" id="dealModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4 ng-if="isAddcard">添加会员标签</h4><h4 ng-if="!isAddcard">修改会员标签</h4></div><div class="modal-body modalBody"><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 标签名称：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入标签名称" ng-model="pageData.tag_name"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 访问等级：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入访问等级" ng-model="pageData.access_level"></div></div></div><div class="modal-footer center"><button class="col-sm-offset-2 btn btn-primary" ng-click="addCouponBtn()">保存</button> <button class="col-sm-offset-2 btn btn-primary" ng-click="clear()">取消</button></div></div></div></div>'),e.put("app/customManage/userList/userList.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>会员管理</h2><ol class="breadcrumb"><li><a>会员</a></li><li><a>列表</a></li><li class="active"><strong>会员管理</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>会员管理</h5></div><div class="ibox-content"><div class=""><a class="btn btn-primary" ng-click="filterBtn(\'all\')">显示全部</a> <a class="btn btn-danger" ng-click="filterBtn(\'name\')">显示有姓名的记录</a> <a class="btn btn-success" ng-click="filterBtn(\'wxname\')">显示有姓名和微信昵称的记录</a> <a class="btn btn-success" ng-click="filterBtn(\'dist\')">只显示分销会员</a></div><div class="row"><div class="col-sm-6"><a class="btn btn-success" ng-click="addUserTagBtn()">设置会员标签</a></div><div class="col-sm-6"><div id="editable_filter" class="dataTables_filter floatR">搜索: <label><input type="search" class="form-control input-sm" placeholder="输入您要搜索的会员信息" aria-controls="editable" ng-model="keyword" ng-keyup="ctrlsearch($event)"></label></div></div></div><table class="table table-striped table-bordered table-hover dataTable" id="editable" role="grid" aria-describedby="editable_info"><thead><tr role="row"><th style="width:20px;text-align: center;"><input type="checkbox" value="checked" class="input-mini" ng-checked="selectedall" ng-click="checkedall()"></th><th class="center" style="width: 100px;">用户名</th><th class="center" style="width: 145px;">微信名称</th><th class="center" style="width: 40px;">头像</th><th class="center" style="width: 185px;">真实姓名</th><th class="center" style="width: 185px;">邮箱</th><th class="center" style="width: 185px;">标签名称</th><th class="center" style="width: 185px;">积分</th><th class="center" style="width: 185px;">职位</th><th class="center" style="width: 185px;">经销商</th><th class="center" style="width: 185px;">访问权限等级</th><th class="center" style="width: 100px;">票数</th><th class="center" style="width：1200px;">编辑</th></tr></thead><tbody><tr class="gradeA odd" role="row" ng-repeat="boxdata in raisepros"><td ng-click="selectme(boxdata)" style="text-align: center;"><input type="checkbox" value="checked" class="input-mini" ng-checked="boxdata.selected"></td><td class="center lineheight80">{{boxdata.user_id}}</td><td class="center">{{boxdata.wx_nick_name}}</td><td class="center"><img ng-src="{{boxdata.wx_head_img_url}}" alt="" style="width:40px;height:40px;"></td><td class="center">{{boxdata.true_name}}</td><td class="center">{{boxdata.user_email}}</td><td class="center">{{boxdata.tag_name}}</td><td class="center">{{boxdata.total_score}}</td><td class="center">{{boxdata.user_position}}</td><td class="center">{{boxdata.Distributionowner}}</td><td class="center">{{boxdata.access_level}}</td><td class="center">{{boxdata.available_vote_count}}</td><td class="center"><button class="btn btn-primary btn-sm" ng-click="editUserInfoBtn(boxdata)">编辑</button> <button class="btn btn-danger btn-sm" ng-click="addUserScoreBtn(boxdata)">添加积分</button> <button class="btn btn-success btn-sm" ng-click="setUserLevelBtn(boxdata)">设置等级</button></td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totals}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totals" items-per-page="pagesize" max-size="6" ng-model="currentPage" class="pagination-sm" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" style="float:right;"></pagination></div></div></div></div></div></div></div></div><div class="modal inmodal" id="addScoreModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>添加积分</h4></div><div class="modal-body"><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 积分数量：</label><div class="col-sm-9"><input type="number" class="form-control mBottom10" name="productTitle" placeholder="请输入要添加的积分数量" ng-model="addScore"></div></div></div><div class="modal-footer center"><button class="col-sm-offset-2 btn btn-primary" ng-click="addScoreBtn()">发放</button></div></div></div></div><div class="modal inmodal" id="userInfoModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>修改用户信息</h4></div><div class="modal-body modalBody"><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 微信名称：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" name="productTitle" placeholder="请输入微信名称" ng-model="pageData.wx_nick_name"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 真实姓名：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" name="productTitle" placeholder="请输入真实姓名" ng-model="pageData.true_name"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 手机号码：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" name="productTitle" placeholder="请输入手机号码" ng-model="pageData.user_phone"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 公司：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" name="productTitle" placeholder="请输入公司名称" ng-model="pageData.user_company"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 邮箱：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" name="productTitle" placeholder="请输入邮箱地址" ng-model="pageData.user_email"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 职位：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" name="productTitle" placeholder="请输入职位名称" ng-model="pageData.user_position"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 票数：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" name="productTitle" placeholder="请输入票数" ng-model="pageData.available_vote_count"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 积分：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" name="productTitle" placeholder="请输入积分数量" ng-model="pageData.total_score"></div></div></div><div class="modal-footer center"><button class="col-sm-offset-2 btn btn-primary" ng-click="editInfoBtn()">添加</button></div></div></div></div><div class="modal inmodal" id="setUserTag" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>批量设置会员标签</h4></div><div class="modal-body modalBody"><table class="table table-striped table-bordered table-hover dataTable" id="editable" role="grid" aria-describedby="editable_info"><thead><tr role="row"><th style="width:20px;text-align: center;"><input type="checkbox" value="checked" class="input-mini" ng-checked="allTagSelect" ng-click="allTagBtn()"></th><th class="center">标签名称</th><th class="center">访问等级</th></tr></thead><tbody><tr class="gradeA odd" role="row" ng-repeat="tag in tagsData" ng-click="oneTagBtn(tag)"><td style="text-align: center;"><input type="checkbox" value="checked" class="input-mini" ng-checked="tag.selected"></td><td class="center">{{tag.tag_name}}</td><td class="center">{{tag.access_level}}</td></tr></tbody></table></div><div class="modal-footer center"><button class="col-sm-offset-2 btn btn-primary" ng-click="setTagBtn()">添加</button></div></div></div></div><div class="modal inmodal" id="setLevelModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>设置访问等级</h4></div><div class="modal-body"><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 等级：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" name="productTitle" placeholder="请输入正整数，数字越大等级要求越高" ng-model="levelNum"></div></div></div><div class="modal-footer center"><button class="col-sm-offset-2 btn btn-primary" ng-click="setLevelBtn()">设置访问等级</button></div></div></div></div>'),e.put("app/groupBuyRule/list/groupBuyRuleList.html",'<div class="wrapper wrapper-content wrapGroupBuyRuleList"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>拼团规则列表</h5></div><div class="ibox-content"><div class=""><a class="btn btn-primary" ng-click="vf.showModal(\'add\')">添加</a> <a class="btn btn-danger" ng-click="vf.deleteRule()">批量删除</a><span class="floatR">总计{{vm.dataList.length}}个</span><div class="clearBoth"></div></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th class="center"><input type="checkbox" class="input-mini" ng-model="vm.checkedAll"></th><th class="center">ID</th><th class="center">规则名称</th><th class="center">拼团人数</th><th class="center">团长折扣</th><th class="center">团员折扣</th><th class="center">过期天数</th><th class="center"></th></tr></thead><tbody><tr class="gradeX" ng-repeat="item in vm.dataList"><td ng-click="item.selected = !item.selected" class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="item.selected"></td><td class="center">{{item.rule_id}}</td><td class="center">{{item.rule_name}}</td><td class="center">{{item.people_count}}人</td><td class="center">{{item.head_discount}}折</td><td class="center">{{item.member_discount}}折</td><td class="center">{{item.expire_day}}天</td><td class="center"><a href="javascript:;" ng-click="vf.showModal(\'edit\',item)" class="btn btn-primary">编辑</a></td></tr></tbody></table></div></div></div></div><div class="modal inmodal" id="groupRuleModal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4><span ng-show="vm.modalAction==\'add\'">添加</span><span ng-hide="vm.modalAction==\'add\'">编辑</span>拼团规则</h4></div><form ng-submit="vf.submit()"><div class="modal-body modalBody"><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 规则名称：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入规则名称" ng-model="vm.modalData.rule_name" required=""></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 拼团人数：</label><div class="col-sm-9"><input type="number" class="form-control mBottom10" placeholder="请输入拼团人数" ng-model="vm.modalData.people_count" required=""></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 团长折扣：</label><div class="col-sm-9"><input type="text" onkeyup="checkNum(this)" class="form-control mBottom10" placeholder="请输入团长折扣(最多两位小数点)" ng-model="vm.modalData.head_discount" required=""></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 团员折扣：</label><div class="col-sm-9"><input type="text" onkeyup="checkNum(this)" class="form-control mBottom10" placeholder="请输入团员折扣(最多两位小数点)" ng-model="vm.modalData.member_discount" required=""></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 过期天数：</label><div class="col-sm-9"><input type="number" class="form-control mBottom10" placeholder="请输入过期天数" ng-model="vm.modalData.expire_day" required=""></div></div></div><div class="modal-footer center"><button class="btn btn-primary" type="submit">保存</button> <button class="btn btn-while" type="button" ng-click="vf.hideModal()">取消</button></div></form></div></div></div></div>'),e.put("app/newsalelimit/addsalelimit/addsalelimit.html",'<div class="wrapper wrapper-content animated fadeInUp ng-scope addsalelimitbox"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>添加限时特卖活动</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><div class="ibox-content"><form method="get" name="myForm" novalidate="" class="form-horizontal" ng-submit="submitProductFunc()"><div class="ibox-content" ng-show="firstPage"><div class="form-group"><div class="col-sm-3 col-sm-offset-4"><a class="btn btn-block btn-primary compose-mail floatR" ng-click="preStep()">1、活动名称</a></div><div class="col-sm-3"><input class="hidesubmitbtn" id="secondBtn" ng-disabled="myForm.$invalid" ng-click="nextStep()"> <label class="btn btn-block btn-default compose-mail" ng-class="{\'disabled\':myForm.$invalid}" for="secondBtn">2、活动详情</label></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span>活动名称：</label><div class="col-sm-10"><input type="text" class="form-control" name="productTitle" placeholder="活动名称" ng-model="productEditorData.product_title" required="" ng-minlength="1" ng-maxlength="100" ng-blur="productTitleErr={error:myForm.productTitle.$dirty&&myForm.productTitle.$invalid,errmsg:\'请填写商品标题\'}" ng-focus="productTitleErr={error:null,errmsg:null}"><div class="colorRed marginTp5" ng-show="productTitleErr.error">{{productTitleErr.errmsg}}</div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span>图片：</label><div class="col-sm-10"><zafw-upload-img ng-model="productEditorData.show_img_list"></zafw-upload-img></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span>活动简介：</label><div class="col-sm-10"><input type="text" class="form-control" name="productSummary" placeholder="请对活动进行简单描述" ng-model="productEditorData.product_summary" required="" ng-minlength="1" ng-maxlength="200" ng-blur="productSummaryErr={error:myForm.productSummary.$dirty&&myForm.productSummary.$invalid,errmsg:\'请填写活动简介\'}" ng-focus="productSummaryErr={error:null,errmsg:null}"><div class="colorRed marginTp5" ng-show="productSummaryErr.error">{{productSummaryErr.errmsg}}</div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span>开始时间：</label><div class="col-sm-3"><div class="input-group date"><input type="text" class="form-control" placeholder="开始时间" ng-model="start_time" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span>结束时间：</label><div class="col-sm-3"><div class="input-group date"><input type="text" class="form-control" placeholder="结束时间" ng-model="stop_time" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div><div class="hr-line-dashed"></div><div class="floatR"><label for="nextbtn" ng-class="{\'disabled\':myForm.$invalid}" class="btn btn-primary">下一步</label> <input class="hidesubmitbtn" id="nextbtn" ng-disabled="myForm.$invalid" ng-click="nextStep()"></div><div class="clearBoth"></div></div><div class="ibox-content" ng-show="nextPage"><div class="form-group"><div class="col-sm-3 col-sm-offset-4"><a class="btn btn-block btn-default compose-mail floatR" ng-click="preStep()">1、活动名称</a></div><div class="col-sm-3"><a class="btn btn-block btn-primary compose-mail" ng-click="nextStep()">2、活动详情</a></div></div><div class="row"><div class="row"><div class="col-lg-12"><div class="ibox-content"><div class="row"><div class="col-sm-2 selectbox" ng-click="selectedBtn()" ng-class="{\'selectedborder\':!showhaselect}">选择商品</div><div class="col-sm-2 selectbox" ng-click="hasselectedBtn()" ng-class="{\'selectedborder\':showhaselect}">已选商品({{selectNums}})</div></div></div><div class="ibox float-e-margins" ng-show="!showhaselect"><div class="ibox-content"><div class="row"><div class="col-sm-5 m-b-xs"><label><select class="form-control" ng-model="category" ng-options="category.category_name for category in categorys" ng-change="whichcategory(category)"></select></label></div><div class="col-sm-4 m-b-xs"></div><div class="col-sm-3"><label><input type="search" class="form-control input-sm" placeholder="输入您要搜索的商品" aria-controls="editable" ng-model="keyword" ng-keyup="ctrlsearch($event)"></label></div></div><div class="table-responsive" style="border:1px solid #ccc;"><table class="table table-striped"><thead><tr><th>商品信息</th><th>价格</th><th>库存</th><th>选择状态</th></tr></thead><tbody><tr ng-repeat="product in productDatas"><td style="line-height:60px;"><img ng-src="{{product.img_url}}" alt="" style="height:60px;margin-right:12px;">{{product.category_name}}</td><td>{{product.price | currency:"￥":2}}</td><td>{{product.totalcount}}</td><td><div ng-show="product.is_promotion_product==1">已经参加活动</div><div ng-show="product.is_promotion_product==0"><button class="btn btn-white" ng-click="choosemeBtn(product)">选择</button></div></td></tr></tbody></table></div></div></div></div></div></div><div class="row" ng-show="!showhaselect"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totals}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totals" items-per-page="pagesize" max-size="6" ng-model="currentPage" class="pagination-sm" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" style="float:right;"></pagination></div></div></div></div><div class="ibox float-e-margins" ng-show="showhaselect"><div class="ibox-content"><div class="table-responsive" style="border:1px solid #ccc;"><table class="table table-striped"><thead><tr><th>商品信息</th><th>折扣</th><th>价格(特卖价/售价/吊牌价)</th><th>库存</th><th></th></tr></thead><tbody ng-repeat="boxdata in hasSelectDatas"><tr><td style="line-height:60px;"><img ng-src="{{boxdata.img_url}}" alt="" style="height:60px;margin-right:12px;">{{boxdata.category_name}}</td><td style="line-height:60px;">5折（写死）</td><td style="line-height:60px;"><input type="text" ng-model="boxdata.salePrice" ng-show="boxdata.edit" style="line-height:16px;width: 50px;"> <span ng-show="!boxdata.edit">￥0</span> / {{boxdata.price | currency:"￥":2}} / {{boxdata.quote_price | currency:"￥":2}}</td><td style="line-height:60px;">{{boxdata.totalcount}}</td><td style="line-height:60px;"><button class="btn btn-white" ng-click="editsaleBtn(boxdata)" ng-show="!boxdata.edit">编辑</button> <button class="btn btn-white" ng-click="savesaleBtn(boxdata)" ng-show="boxdata.edit">保存</button> <button class="btn btn-white" ng-click="notinsaleBtn(boxdata,$index)">不参加活动</button></td></tr><th class="selectedborder" ng-show="boxdata.edit"><zafw-sku-box><zafw-check-sku ng-model="boxdata.skuData.have_property_list" style="display:none;"></zafw-check-sku><zafw-set-sku-t ng-model="boxdata.skuData.skus"></zafw-set-sku-t></zafw-sku-box></th></tbody></table></div></div></div><div class="floatR" ng-show="nextPage"><a class="btn btn-primary" ng-click="preStep()">上一步</a> <label for="submitbtn" ng-class="{\'disabled\':myForm.$invalid}" class="btn btn-primary">保存</label> <input type="submit" class="hidesubmitbtn" id="submitbtn" ng-disabled="myForm.$invalid"></div><div class="clearBoth"></div></form></div></div></div></div></div>'),
e.put("app/newsalelimit/addsalename/addsalename.html",'<div class="wrapper wrapper-content ng-scope"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>添加限时特卖活动</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><div class="ibox-content"><form method="get" name="myForm" novalidate="" class="form-horizontal"><div class="ibox-content"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span>活动名称：</label><div class="col-sm-10"><input type="text" class="form-control" name="productTitle" placeholder="活动名称" ng-model="addpromotionData.promotion_activity_name" required="" ng-minlength="1" ng-maxlength="100" ng-blur="productTitleErr={error:myForm.productTitle.$dirty&&myForm.productTitle.$invalid,errmsg:\'请填写商品标题\'}" ng-focus="productTitleErr={error:null,errmsg:null}"><div class="colorRed marginTp5" ng-show="productTitleErr.error">{{productTitleErr.errmsg}}</div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span>图片：</label><div class="col-sm-10"><zafw-upload-img ng-model="addpromotionData.promotion_activity_image"></zafw-upload-img></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span>活动简介：</label><div class="col-sm-10"><input type="text" class="form-control" name="productSummary" placeholder="请对活动进行简单描述" ng-model="addpromotionData.promotion_activity_summary" required="" ng-minlength="1" ng-maxlength="200" ng-blur="productSummaryErr={error:myForm.productSummary.$dirty&&myForm.productSummary.$invalid,errmsg:\'请填写活动简介\'}" ng-focus="productSummaryErr={error:null,errmsg:null}"><div class="colorRed marginTp5" ng-show="productSummaryErr.error">{{productSummaryErr.errmsg}}</div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span>开始时间：</label><div class="col-sm-3"><div class="input-group date"><input type="text" class="form-control" placeholder="开始时间" ng-model="addpromotionData.promotion_activity_start_time" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span>结束时间：</label><div class="col-sm-3"><div class="input-group date"><input type="text" class="form-control" placeholder="结束时间" ng-model="addpromotionData.promotion_activity_stop_time" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span>活动序号：</label><div class="col-sm-10"><input type="text" class="form-control" name="promotion" placeholder="排序号(数值越大越靠前显示)" ng-model="addpromotionData.promotion_activity_sort" required="" ng-minlength="1" ng-maxlength="200" ng-blur="promotionErr={error:myForm.promotion.$dirty&&myForm.promotion.$invalid,errmsg:\'请填写活动简介\'}" ng-focus="promotionErr={error:null,errmsg:null}"><div class="colorRed marginTp5" ng-show="promotionErr.error">{{promotionErr.errmsg}}</div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span>每件商品限购数量：</label><div class="col-sm-10"><input type="text" class="form-control" name="promotion" placeholder="每件商品限购数量(0不限制)" ng-model="addpromotionData.limit_buy_product_count" required="" ng-minlength="1" ng-maxlength="200" ng-blur="promotionErr={error:myForm.promotion.$dirty&&myForm.promotion.$invalid,errmsg:\'请每件商品限购数量\'}" ng-focus="promotionErr={error:null,errmsg:null}"><div class="colorRed marginTp5" ng-show="promotionErr.error">{{promotionErr.errmsg}}</div></div></div><div class="hr-line-dashed"></div></div><div class="wrapOperate" ng-show="showadd"><label for="savebtn" ng-class="{\'disabled\':myForm.$invalid}" class="btn btn-primary btn-lg">保存活动</label> <input class="hidesubmitbtn" id="savebtn" ng-disabled="myForm.$invalid" ng-click="addpromotionBtn()"></div><div class="wrapOperate" ng-show="!showadd"><label for="editbtn" ng-class="{\'disabled\':myForm.$invalid}" class="btn btn-primary">编辑活动</label> <input class="hidesubmitbtn" id="editbtn" ng-disabled="myForm.$invalid" ng-click="editsaveBtn()"></div><div class="clearBoth"></div></form></div></div></div></div></div>'),e.put("app/newsalelimit/addsaleproduct/addsaleproduct.html",'<div class="wrapper wrapper-content animated fadeInUp ng-scope"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>添加限时特卖商品</h5><a class="btn btn-white floatR" href="javascript:history.go(-1)">返回</a></div><div class="ibox-content"><form method="get" name="myForm" novalidate="" class="form-horizontal" ng-submit="submitProductFunc()"><div class="row"><div class="row"><div class="col-lg-12"><div class="ibox-content headerTitle"><div class="row isChecked"><div class="col-sm-2 selectbox" ng-click="selectedBtn()" ng-class="{\'selectedborder\':!showhaselect}">选择商品</div><div class="col-sm-2 selectbox" ng-click="hasselectedBtn()" ng-class="{\'selectedborder\':showhaselect}">已选商品({{selectNums}})</div></div><div class="row cates" ng-show="!showhaselect"><div class="col-sm-5 m-b-xs"><label><select class="form-control" ng-model="category" ng-options="category.category_name for category in categorys" ng-change="whichcategory(category)"></select></label></div><div class="col-sm-4 m-b-xs"></div><div class="col-sm-3"><label><input type="search" class="form-control input-sm" placeholder="输入您要搜索的商品" aria-controls="editable" ng-model="keyword" ng-keyup="ctrlsearch($event)"></label></div></div><div class="row cates" ng-show="showhaselect"><div class="col-xs-12"><label><a class="btn btn-success noActivity" ng-click="vf.betchNoActivity()">批量设置不参加活动</a></label></div></div></div><div class="ibox float-e-margins" ng-show="!showhaselect"><div class="ibox-content"><div class="table-responsive"><table class="table table-striped"><thead><tr><th>商品图片</th><th>商品标题</th><th>商品编码</th><th>价格</th><th>库存</th><th>选择状态</th></tr></thead><tbody><tr ng-repeat="product in productDatas"><td style="line-height:60px;"><img ng-src="{{product.img_url}}" alt="" style="width:80px;height:80px;"></td><td style="line-height:60px;">{{product.product_title}}</td><td style="line-height:60px;">{{product.product_code}}</td><td style="line-height:60px;">{{product.price | currency:"￥":2}}</td><td style="line-height:60px;">{{product.totalcount}}</td><td style="line-height:60px;"><div ng-show="product.is_promotion_product==1">已经参加活动</div><div ng-show="product.is_promotion_product==0"><button class="btn btn-white" ng-click="choosemeBtn(product)">选择</button></div></td></tr></tbody></table></div></div></div></div></div></div><div class="row" ng-show="!showhaselect"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totals}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totals" items-per-page="pagesize" max-size="6" ng-model="currentPage" class="pagination-sm" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" style="float:right;"></pagination></div></div></div></form></div><div class="ibox float-e-margins checkedProduct" ng-show="showhaselect"><div class="ibox-content"><div class="table-responsive"><table class="table table-striped"><thead><tr><th><input ng-click="vf.checkedall()" type="checkbox" value="checked" class="input-mini" ng-checked="vm.selectedall"></th><th>商品信息</th><th>商品标题</th><th>商品ID</th><th>价格(售价/吊牌价)</th><th>基价</th><th>特卖库存</th><th></th></tr></thead><tbody ng-repeat="boxdata in hasSelectDatas"><tr><td class="ckBox" ng-click="vf.selectme(boxdata)"><input type="checkbox" value="checked" class="input-mini" ng-checked="boxdata.selected"></td><td style="line-height:60px;"><img ng-src="{{boxdata.img_url}}" alt="" style="width:80px;height:80px;margin-right:12px;">{{boxdata.category_name}}</td><td style="line-height:60px;">{{boxdata.product_title}}</td><td style="line-height:60px;">{{boxdata.product_id}}</td><td style="line-height:60px;">{{boxdata.price | currency:"￥":2}} / {{boxdata.quote_price | currency:"￥":2}}</td><td style="line-height:60px;">{{boxdata.base_price| currency:"￥":2}}</td><td style="line-height:60px;">{{boxdata.totalcount}}</td><td style="line-height:60px;"><button class="btn btn-white" ng-click="editsaleBtn(boxdata,$index)" ng-show="!boxdata.edit">编辑</button> <button class="btn btn-white" ng-click="savesaleBtn(boxdata,$index)" ng-show="boxdata.edit">保存</button> <button class="btn btn-white" ng-click="autoSetData(boxdata,$index)" ng-show="boxdata.edit">自动填充库存</button> <button class="btn btn-white" ng-click="vf.notinsaleBtn(boxdata)">不参加活动</button><div ng-if="false">{{boxdata.have_property_list}}</div><div ng-if="false">{{boxdata.skus}}</div></td></tr><td ng-show="boxdata.edit" colspan="5"><zafw-sku-box><zafw-check-sku ng-model="boxdata.have_property_list" style="display:none;"></zafw-check-sku><zafw-set-sku-t ng-model="boxdata.skus"></zafw-set-sku-t></zafw-sku-box></td></tbody></table></div></div></div><div class="clearBoth"></div></div></div></div></div>'),e.put("app/newsalelimit/salelimitList/saleList.html",'<div class="wrapper wrapper-content animated fadeInUp ng-scope"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>限时特卖活动页面</h5></div><div class="ibox-content"><div><a ui-sref="index.addsalename" class="btn btn-primary" href="#/index/addsalename">添加</a> <a class="btn btn-danger" style="margin-left: 3px;" ng-click="delallpromotionBtn()">批量删除</a> <a class="btn btn-primary" style="margin-left: 3px;" ng-click="createQcodeBtn(boxdata,type)">二维码链接</a></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th><input type="checkbox" value="checked" class="input-mini" ng-checked="selectedall" ng-click="checkedall()"></th><th></th><th class="center">特卖活动</th><th class="center">活动状态</th><th class="center">开始时间</th><th class="center">结束时间</th><th class="center">序号(数字)</th><th class="center">操作</th></tr></thead><tbody><tr class="gradeX" ng-repeat="boxdata in promotiondatas"><td ng-click="selectme(boxdata)"><input type="checkbox" value="checked" class="input-mini" ng-checked="boxdata.selected"></td><td><img ng-src="{{boxdata.promotion_activity_image}}" alt="" style="width:60px;height:60px;"></td><td>{{boxdata.promotion_activity_name}}</td><td class="center">{{boxdata.promotion_activity_status}}</td><td class="center">{{boxdata.promotion_activity_start_time | date:\'yyyy-MM-dd HH:mm\'}}</td><td class="center">{{boxdata.promotion_activity_stop_time | date:\'yyyy-MM-dd HH:mm\'}}</td><td class="center"><input type="text" placeholder="{{boxdata.promotion_activity_sort}}" style="text-align:center;" ng-model="boxdata.editsort" ng-keyup="ctrleditSort($event,boxdata)"></td><td class="center"><button class="btn btn-primary btn-sm" ng-click="editpromotionBtn(boxdata)">编辑</button> <button class="btn btn-danger btn-sm" ng-click="delpromotionBtn(boxdata)">删除</button> <button class="btn btn-primary btn-sm" style="padding: 4px 4px;" ng-click="addproductBtn(boxdata)">添加商品</button></td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totalItems}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totalItems" ng-model="currentPage" class="pagination-sm" items-per-page="pagesize" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" max-size="6" style="float:right;"></pagination></div></div></div></div></div></div></div></div><div class="modal bs-example-modal-sm" id="qCodeModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-sm"><div class="modal-content"><div class="modal-header center modalHeader"><h4>用微信扫描二维码</h4></div><div class="modal-body"><img ng-src="{{qcodedata.qcode}}" alt="" style="width:242px;height:242px;margin:0 auto;"><br><a style="word-wrap : break-word;" ng-href="{{qcodedata.url}}" target="_blank" title="点击查看">{{qcodedata.url}}</a></div></div></div></div>'),e.put("app/order/orderList/orderList.html",'<div class="wrapper wrapper-content animated fadeInUp wrapOrderList"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>订单列表</h5></div><div class="ibox-content"><div class="row"><div class="col-sm-8"><div class="dataTables_length" id="editable_length"><label style="float: left;" ng-show="vm.isShowSupplier"><select name="dept" style="width:150px;" class="supplierSelect"><option value="">全部</option><option value="none">无商户</option></select></label> <label style="float: left;" ng-show="vm.isDistribution"><select class="form-control" ng-model="vm.currentChannel" ng-options="item.name for item in vm.channelListData" ng-change="vf.whichChannel()"></select></label> <label style="float: left;"><select class="form-control" ng-model="vm.oneNav" ng-options="oneNav.type_name for oneNav in vm.categorys" ng-change="vf.whichcategory(vm.oneNav)"></select></label><br><br><br><div style="padding: 7px 20px;border: 1px solid #ccc;display: block;float: left;cursor: pointer;" class="selected" ng-click="vf.showDistributionUser()" ng-show="vm.isDistribution">分销员筛选</div><div style="padding: 7px 20px;border: 1px solid #ccc;display: block;float: left;cursor: pointer;" class="selected" ng-click="vf.showExportOrder()">导出订单</div><div style="margin-left: 15px;" class="btn btn-success" ng-click="vf.showOrderSetDia()">批量更新订单状态</div><div style="margin-left: 15px;" class="btn btn-success" ng-show="vm.order_type == 2 && vm.groupBuy.order_status == \'拼团中\'" ng-click="vf.updateGroupbuySuccess()">批量设置成拼团成功</div><div style="margin-left: 15px;" class="btn btn-success" ng-if="!vm.isSonghe" ng-click="vf.showBatchUpdateExpressDia()">批量发货</div></div></div><div class="col-sm-4" style="float:right;"><div id="editable_filter" class="dataTables_filter floatR"><label style="float: left;"><select class="form-control input-sm" style="height:34px;line-height: 34px;" ng-model="vm.key" ng-options="key.name for key in vm.keys" ng-change="vf.whichkey(vm.key)"></select></label> <label><input type="search" class="form-control input-sm" style="height:34px;line-height: 34px;" placeholder="输入关键字查询" aria-controls="editable" ng-model="vm.keyword" ng-keyup="vf.ctrlsearch($event)"></label><svg class="icon iconfont btnSearch" aria-hidden="true" ng-click="vf.search()"><use xlink:href="#icon-sousuo"></use></svg></div></div></div><div style="clear:both;"></div><div style="overflow:hidden;margin-bottom:20px;" ng-if="!vm.isGroupBuyType"><div style="padding:10px 20px;margin-right:10px;margin-top:6px;border:1px solid #ccc;display:block;float:left;cursor: pointer;position: relative;" ng-repeat="boxdata in vm.statuDatas" ng-click="vf.selectmeBtn(boxdata)" ng-class="{selected:boxdata.iselected}">{{boxdata.order_status}}<div ng-if="boxdata.order_status==\'退款退货\'&&vm.hasUnRead" style="position: absolute;top: -3px;right: -3px;width: 10px;height: 10px;background-color: red;border-radius: 50%;"></div></div></div><div style="overflow:hidden;margin-bottom:20px;" ng-if="vm.isGroupBuyType"><div style="padding:10px 20px;margin-right:10px;margin-top:6px;border:1px solid #ccc;display:block;float:left;cursor: pointer;" ng-repeat="boxdata in vm.groupBuys" ng-click="vf.selectmeBtn(boxdata)" ng-class="{selected:boxdata.iselected}">{{boxdata.order_status}}</div></div><div style="clear:both;"></div><div ng-if="vm.isGroupBuyType"><input type="radio" id="all" ng-click="vf.groupOrderByType(\'\')" checked="checked" class="positionTop2" name="group"><label for="all">全部</label> <input type="radio" id="userGroup" ng-click="vf.groupOrderByType(\'0\')" class="positionTop2" name="group"><label for="userGroup">用户开团 <input type="radio" id="systemGroup" ng-click="vf.groupOrderByType(\'1\')" class="positionTop2" name="group"><label for="systemGroup">系统开团</label></label></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th><input type="checkbox" value="checked" class="input-mini" ng-model="vm.orderSelectedAll"></th><th ng-if="vm.order_type!=4">商品 <span style="float:right;">单价/数量</span></th><th>下单用户</th><th ng-if="vm.isGroupBuyType">团购进度</th><th>下单时间</th><th style="cursor: pointer;" ng-click="vf.payTimeSort()"><span>支付时间</span> <span ng-show="vm.sortValue==0"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-iconfont1zhuanhuan"></use></svg></span> <span ng-show="vm.sortValue==1" style="font-size:16px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-jiangxu-copy"></use></svg></span> <span ng-show="vm.sortValue==2" style="font-size:16px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shengxu"></use></svg></span></th><th ng-if="!vm.isGroupBuyType">订单状态</th><th ng-if="vm.isGroupBuyType">团购状态</th><th>实付金额</th></tr></thead><tbody ng-repeat="orderdata in vm.orderDatas"><div style="height:20px"></div><tr><td colspan="7"><span ng-if="orderdata.supplier_name!=null&&orderdata.supplier_name!=\'\'">{{orderdata.supplier_name}}<br></span> 订单号：{{orderdata.order_id}} <span ng-if="orderdata.parent_order_id">(主：{{orderdata.parent_order_id}})</span> <a style="margin-left: 10px;" ui-sref="index.orderPreview({orderID:orderdata.order_id})" ng-show="vm.isHuadaojia">订单打印</a></td></tr><tr ng-if="vm.order_type==4"><td ng-click="orderdata.selected=!orderdata.selected"><input type="checkbox" value="checked" class="input-mini" ng-checked="orderdata.selected"></td><td rowspan="{{orderdata.product_list.length}}"><span style="cursor:pointer;" ng-click="vf.goToBackState(orderdata.user_aid)">会员id:{{orderdata.user_aid}}</span><br><span style="cursor:pointer;" ui-sref="index.orderDetail({orderID:orderdata.order_id})">收货人姓名:{{orderdata.receiver_name}}</span><br><span style="cursor:pointer;" ui-sref="index.orderDetail({orderID:orderdata.order_id})">收货人手机:{{orderdata.receiver_phone}}</span><br><span style="cursor:pointer;" ui-sref="index.orderDetail({orderID:orderdata.order_id})">收货地址:{{orderdata.receiver_address}}</span><br><span style="cursor:pointer;" ui-sref="index.orderDetail({orderID:orderdata.order_id})">客户留言:{{orderdata.receiver_remark}}</span></td><td style="cursor:pointer;" class="center" rowspan="{{orderdata.product_list.length}}" ui-sref="index.orderDetail({orderID:orderdata.order_id})">{{orderdata.order_time | date:"yyyy年MM月dd日 HH:mm:ss"}}</td><td style="cursor:pointer;" class="center" rowspan="{{orderdata.product_list.length}}" ui-sref="index.orderDetail({orderID:orderdata.order_id})">{{orderdata.pay_time | date:"yyyy年MM月dd日 HH:mm:ss"}}</td><td style="cursor:pointer;" ui-sref="index.orderDetail({orderID:orderdata.order_id})" class="center" rowspan="{{orderdata.product_list.length}}">{{orderdata.order_status}}<br><span ng-if="orderdata.is_refund==1">(退款中)</span></td><td style="cursor:pointer;" ui-sref="index.orderDetail({orderID:orderdata.order_id})" class="center" rowspan="{{orderdata.product_list.length}}">{{orderdata.total_amount}}</td></tr><tr class="gradeX" ng-repeat="boxdata in orderdata.product_list" ng-if="vm.order_type!=4"><td ng-click="orderdata.selected=!orderdata.selected"><input type="checkbox" value="checked" class="input-mini" ng-checked="orderdata.selected"></td><td style="cursor:pointer;" class="proClass" ui-sref="index.orderDetail({orderID:orderdata.order_id})"><img ng-src="{{boxdata.img_url}}" alt="" style="width:60px;height:60px;float: left"> <span class="width168 block">{{boxdata.product_name}}</span> <span class="count">{{boxdata.count}}(件) <span class="price"><span ng-show="boxdata.price">{{boxdata.price | currency:\'￥\'}}</span> <span ng-show="boxdata.score"><span ng-show="boxdata.score">+</span> {{boxdata.score}}积分</span></span></span></td><td ng-if="$first" rowspan="{{orderdata.product_list.length}}"><div ng-show="orderdata.ex10!=\'1\'"><div ng-if="orderdata.is_no_express==0"><span style="cursor:pointer;" ng-click="vf.goToBackState(orderdata.user_aid)">会员id:{{orderdata.user_aid}}</span><br><span style="cursor:pointer;" ui-sref="index.orderDetail({orderID:orderdata.order_id})">收货人姓名:{{orderdata.receiver_name}}</span><br><span style="cursor:pointer;" ui-sref="index.orderDetail({orderID:orderdata.order_id})">收货人手机:{{orderdata.receiver_phone}}</span><br><span style="cursor:pointer;" ui-sref="index.orderDetail({orderID:orderdata.order_id})">收货地址:{{orderdata.receiver_address}}</span><br><span style="cursor:pointer;" ui-sref="index.orderDetail({orderID:orderdata.order_id})">客户留言:{{orderdata.receiver_remark}}</span><div ng-if="orderdata.order_type==7&&orderdata.exam_info!=null"><span style="font-weight:bold;">考试状态:{{orderdata.exam_info.status_text}}</span> <a target="_blank" href="/Admin/Exam/ExamRecordDetail.aspx?id={{orderdata.exam_info.exam_id}}&uid={{orderdata.exam_info.user_id}}" ng-show="orderdata.exam_info.status==4" class="btn btn-success" style="margin-top: 2px;">去阅卷</a> <a target="_blank" href="/Admin/Exam/ExamRecordDetail.aspx?id={{orderdata.exam_info.exam_id}}&uid={{orderdata.exam_info.user_id}}" ng-show="orderdata.exam_info.status==5" class="btn btn-success" style="margin-top: 2px;">查看试卷</a></div></div><div ng-if="orderdata.is_no_express==1" ui-sref="index.orderDetail({orderID:orderdata.order_id})">无需物流<br><span style="cursor:pointer;">姓名:{{orderdata.receiver_name}}</span><br><span style="cursor:pointer;">手机:{{orderdata.receiver_phone}}</span><br><span style="cursor:pointer;">留言:{{orderdata.receiver_remark}}</span></div></div><div ng-show="orderdata.ex10==\'1\'">{{orderdata.receiver_remark}}<br></div></td><td ng-if="vm.isGroupBuyType">开团总人数|成功人数：{{orderdata.people_count}}&nbsp;|&nbsp;{{orderdata.ex7}}</td><td style="cursor:pointer;" class="center" ng-if="$first" rowspan="{{orderdata.product_list.length}}" ui-sref="index.orderDetail({orderID:orderdata.order_id})">{{orderdata.order_time | date:"yyyy年MM月dd日 HH:mm:ss"}}</td><td style="cursor:pointer;" class="center" ng-if="$first" rowspan="{{orderdata.product_list.length}}" ui-sref="index.orderDetail({orderID:orderdata.order_id})"><span ng-show="orderdata.pay_time!=0">{{orderdata.pay_time |date:"yyyy年MM月dd日 HH:mm:ss"}}</span></td><td style="cursor:pointer;" ng-class="{\'orderStatusRed\':orderdata.order_status==\'待发货\',\'orderStatusYellow\':orderdata.order_status==\'待付款\',\'orderStatusBlue\':orderdata.order_status==\'已发货\',\'orderStatusSuccess\':orderdata.order_status==\'交易成功\',\'orderStatusCancel\':orderdata.order_status==\'已取消\',\'orderStatusRefund\':orderdata.is_refund==1}" ui-sref="index.orderDetail({orderID:orderdata.order_id})" class="center" ng-if="$first&&orderdata.group_buy_info.group_buy_status==-1" rowspan="{{orderdata.product_list.length}}">{{orderdata.order_status}}<br><span ng-if="orderdata.is_refund==1">(退款中)</span></td><td style="cursor:pointer;" class="orderStatusBlue" ui-sref="index.orderDetail({orderID:orderdata.order_id})" ng-if="$first&&orderdata.group_buy_info.group_buy_status==0" rowspan="{{orderdata.product_list.length}}">拼团中</td><td style="cursor:pointer;" class="orderStatusSuccess" ui-sref="index.orderDetail({orderID:orderdata.order_id})" ng-if="$first&&orderdata.group_buy_info.group_buy_status==1" rowspan="{{orderdata.product_list.length}}">拼团成功</td><td style="cursor:pointer;" class="orderStatusCancel" ui-sref="index.orderDetail({orderID:orderdata.order_id})" ng-if="$first&&orderdata.group_buy_info.group_buy_status==2" rowspan="{{orderdata.product_list.length}}">拼团失败</td><td style="cursor:pointer;" class="orderStatusRefund" ui-sref="index.orderDetail({orderID:orderdata.order_id})" ng-if="$first&&orderdata.group_buy_info.group_buy_status==3" rowspan="{{orderdata.product_list.length}}">退货退款</td><td style="cursor:pointer;" ui-sref="index.orderDetail({orderID:orderdata.order_id})" class="center" ng-if="$first" rowspan="{{orderdata.product_list.length}}">{{orderdata.total_amount}}</td></tr></tbody></table><br><br><br><br><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+vm.pagesize*vm.currentPage-vm.pagesize}} - {{vm.pagesize*vm.currentPage}} 总计{{vm.totalItems}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="vm.totalItems" ng-model="vm.currentPage" class="pagination-sm" items-per-page="vm.pagesize" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="vf.pageChanged()" style="float:right;" max-size="6"></pagination></div></div></div></div></div></div></div></div><div class="modal inmodal" id="exportOrder" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>按条件导出订单</h4></div><form><div class="modal-body modalBody" style="padding: 40px 20px 90px;overflow-y: auto;"><div class="form-group"><label class="col-sm-3 control-label" style="margin-top: 12px;">时间段：</label><div class="col-sm-9" style="margin-bottom: 12px;"><div class="input-daterange input-group"><input type="text" class="input-sm form-control" ng-model="vm.start" zafw-datepacker-time="" name="start"> <span class="input-group-addon">到</span> <input type="text" class="input-sm form-control" ng-model="vm.end" zafw-datepacker-time="" name="end"></div></div></div><div class="form-group"><label class="col-sm-3 control-label" style="margin-top: 12px;">订单状态：</label><div class="col-sm-9" style="margin-bottom: 12px;" ng-if="vm.oneNav.order_type!=2"><div style="padding: 5px 10px;margin-right:10px;margin-top:6px;border:1px solid #ccc;display:block;float:left;cursor: pointer;position: relative;" ng-repeat="boxdata in vm.alertStatuses" ng-click="vf.selectOrder($index)" ng-class="{\'btn-primary\':boxdata.select,\'btn-white\':!boxdata.select}">{{boxdata.order_status}}</div></div><div class="col-sm-9" style="margin-bottom: 12px;" ng-if="vm.oneNav.order_type==2"><div style="padding: 5px 10px;margin-right:10px;margin-top:6px;border:1px solid #ccc;display:block;float:left;cursor: pointer;position: relative;" ng-repeat="boxdata in vm.alertGroupBuys" ng-click="vf.selectOrder($index)" ng-class="{\'btn-primary\':boxdata.select,\'btn-white\':!boxdata.select}">{{boxdata.order_status}}</div></div></div><div class="form-group"><label class="col-sm-3 control-label" style="margin-top: 12px;">会员：</label><div class="col-sm-9" style="margin-bottom: 12px;"><div class="checksku" style="border: 0px solid #e5e6e7;padding: 0px;"><div class="skuvaluebox"><div class="btn btn-white" style="margin-top: 5px;" ng-repeat="item in vm.selectedUsers"><span>{{item.show_name}}</span> <span class="clearit" ng-click="vf.delChoosed($index,vm.selectedUsers)"><i class="fa fa-times"></i></span></div><div class="inlinebox"><span class="btn btn-primary" style="margin-top: 5px;" ng-click="vf.showUserChoose()">添加</span></div></div></div></div></div><div class="form-group"><label class="col-sm-3 control-label" style="margin-top: 12px;">会员标签：</label><div class="col-sm-9" style="margin-bottom: 12px;"><div class="checksku" style="border: 0px solid #e5e6e7;padding: 0px;"><div class="skuvaluebox"><div class="btn btn-white" style="margin-top: 5px;" ng-repeat="item in vm.selectedTags"><span>{{item.tag_name}}</span> <span class="clearit" ng-click="vf.delChoosed($index,vm.selectedTags)"><i class="fa fa-times"></i></span></div><div class="inlinebox"><span class="btn btn-primary" style="margin-top: 5px;" ng-click="vf.showTagsChoose()">添加</span> <span class="btn">&nbsp;</span></div></div></div></div></div><div class="form-group" ng-show="vm.isShowSupplier"><label class="col-sm-3 control-label" style="margin-top: 12px;">商户：</label><div class="col-sm-9" style="margin-bottom: 12px;"><select name="dept" style="width:150px;" class="supplierSelect"><option value="">全部</option><option value="none">无商户</option></select></div></div></div><div class="modal-footer center"><button class="btn btn-primary" type="button" ng-click="vf.getOrderExcel()">确定</button> <button class="btn btn-while" type="button" ng-click="vf.hideExportOrder()">取消</button></div></form></div></div></div><div class="modal inmodal" id="tagsChoose" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>选择标签</h4></div><form ng-submit="vf.choosedTags()"><div class="modal-body modalBody"><div class="row"><div class="col-sm-6"><label><input type="search" class="form-control input-sm" placeholder="标签" aria-controls="editable" ng-model="vm.userTagKeyWord" ng-keyup="vf.ctrlUserTagSearch($event)"></label></div></div><table class="table table-striped table-bordered table-hover"><thead><tr><th class="center"><input type="checkbox" class="input-mini" ng-model="vm.tagsCheckedAll"></th><th class="center">标签ID</th><th class="center">标签名称</th></tr></thead><tbody><tr class="gradeX" ng-repeat="tag in vm.tags"><td ng-click="tag.selected = !tag.selected" class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="tag.selected"></td><td ng-click="tag.selected = !tag.selected" class="center">{{tag.tag_id}}</td><td ng-click="tag.selected = !tag.selected" class="center">{{tag.tag_name}}</td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+vm.tagPagesize*vm.tagCurrentPage-vm.tagPagesize}} - {{vm.tagPagesize*vm.tagCurrentPage}} 总计{{vm.tagTotalItems}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="vm.tagTotalItems" ng-model="vm.tagCurrentPage" class="pagination-sm" items-per-page="vm.tagPagesize" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="vf.tagPageChanged()" max-size="6" style="float:right;"></pagination></div></div></div><div class="clearBoth"></div></div><div class="modal-footer center"><button class="btn btn-primary" type="submit">确定</button> <button class="btn btn-while" type="button" ng-click="vf.hideTagsChoose()">取消</button></div></form></div></div></div><div class="modal inmodal" id="userChoose" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>选择会员</h4></div><form ng-submit="vf.choosedUser()"><div class="modal-body modalBody"><div class="row"><div class="col-sm-12"><label><input type="search" class="form-control" placeholder="输入用户昵称、用户名、手机号码查找" aria-controls="editable" ng-model="vm.userKeyWord" ng-keyup="vf.ctrlUserSearch($event)"></label></div></div><table class="table table-striped table-bordered table-hover"><thead><tr><th class="center"><input type="checkbox" class="input-mini" ng-model="vm.userCheckedAll"></th><th class="center">用户Id</th><th class="center">微信昵称</th><th class="center">真实姓名</th><th class="center">手机</th></tr></thead><tbody><tr class="gradeX" ng-repeat="user in vm.users"><td ng-click="user.selected = !user.selected" class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="user.selected"></td><td ng-click="user.selected = !user.selected">{{user.user_id}}</td><td ng-click="user.selected = !user.selected">{{user.wx_nick_name}}</td><td ng-click="user.selected = !user.selected">{{user.true_name}}</td><td ng-click="user.selected = !user.selected">{{user.user_phone}}</td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+vm.userPagesize*vm.userCurrentPage-vm.userPagesize}} - {{vm.userPagesize*vm.userCurrentPage}} 总计{{vm.userTotalItems}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="vm.userTotalItems" ng-model="vm.userCurrentPage" class="pagination-sm" items-per-page="vm.userPagesize" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="vf.userPageChanged()" max-size="6" style="float:right;"></pagination></div></div></div><div class="clearBoth"></div></div><div class="modal-footer center"><button class="btn btn-primary" type="submit">确定</button> <button class="btn btn-while" type="button" ng-click="vf.hideUserChoose()">取消</button></div></form></div></div></div><div class="modal inmodal" id="dlgDistributionUser" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>选择分销员</h4></div><form ng-submit="vf.choosedDistributionUser()"><div class="modal-body modalBody"><div class="row"><div class="col-sm-12"><label><input type="search" class="form-control" placeholder="输入用户昵称、姓名查找" aria-controls="editable" ng-model="vm.distributionUserKeyWord" ng-keyup="vf.ctrlDistributionUserSearch($event)"></label></div></div><table class="table table-striped table-bordered table-hover"><thead><tr><th class="center"></th><th class="center">微信昵称</th><th class="center">真实姓名</th><th class="center">手机</th></tr></thead><tbody><tr class="gradeX" ng-repeat="user in vm.distributionUsers"><td ng-click="user.selected = !user.selected" class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="user.selected"></td><td ng-click="user.selected = !user.selected">{{user.WXNickname}}</td><td ng-click="user.selected = !user.selected">{{user.TrueName}}</td><td ng-click="user.selected = !user.selected">{{user.Phone}}</td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info1" role="status" aria-live="polite">显示 {{1+vm.distributionUserPagesize*vm.distributionUserCurrentPage-vm.userPagesize}} - {{vm.distributionUserPagesize*vm.distributionUserCurrentPage}} 总计{{vm.distributionUserTotalItems}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="vm.distributionUserTotalItems" ng-model="vm.distributionUserCurrentPage" class="pagination-sm" items-per-page="vm.distributionUserPagesize" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="vf.distributionUserPageChanged()" max-size="6" style="float:right;"></pagination></div></div></div><div class="clearBoth"></div></div><div class="modal-footer center"><button class="btn btn-primary" type="submit">确定</button> <button class="btn btn-while" type="button" ng-click="vf.hideDistributionUser()">取消</button></div></form></div></div></div><div class="modal inmodal" id="orderSelect" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>批量设置订单状态</h4></div><form ng-submit="vf.multiUpdateOrderStatus()"><div class="modal-body modalBody" style="padding-top: 40px;min-height: 150px;"><div class="form-group" style="padding-top: 30px;"><label class="col-sm-2 control-label">选择状态：</label><div class="col-sm-10"><label><select class="form-control" ng-model="vm.orderStatus" ng-options="orderStatus.order_status for orderStatus in vm.batchSetOrderStatuses"></select></label></div></div></div><div class="modal-footer center"><button class="btn btn-primary" type="submit">确定</button> <button class="btn btn-while" type="button" ng-click="vf.hideOrderSetDia()">取消</button></div></form></div></div></div><div class="modal inmodal" id="dlgBatchUpdateExpress" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>批量发货</h4></div><div class="modal-body modalBody" style="padding-top: 40px;min-height: 150px;"><div class="form-group overFlow" style="padding-top: 30px;"><label class="col-sm-2 control-label">选择文件:</label><div class="col-sm-10"><input type="file" id="fileBatchUpdateExpress" accept="application/vnd.sealed-xls" class="fileUpload"></div></div><div class="form-group overFlow" ng-show="vm.isShowbatchUpdateExpressResult"><label class="col-sm-3 control-label">结果:</label><div class="col-sm-9" ng-bind-html="vm.batchUpdateExpressResult"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label">模板下载:</label><div class="col-sm-9"><a target="_blank" href="/批量发货模板.xls">点击下载</a></div></div></div><div class="modal-footer center"><button class="btn btn-primary" type="submit" ng-click="vf.batchUpdateExpress()">批量发货</button> <button class="btn btn-while" type="button" ng-click="vf.hideBatchUpdateExpressDia()">关闭</button></div></div></div></div>'),
e.put("app/order/orderDetail/orderDetail.html",'<div class="wrapper wrapper-content animated fadeInRight"><div class="row"><div class="col-xs-12 pAll30"><a class="btn btn-white floatR" style="margin-bottom: 10px;" href="javascript:history.go(-1)">返回</a><div class="clearBoth"></div><div class="orderdetailtitle"><div class="col-xs-6 orderdetailtitleL" ng-class="{borderRNone:vm.isJikuWifi}"><h4>订单信息</h4><div ng-if="vm.orderdata.supplier_name!=null&&vm.orderdata.supplier_name!=\'\'">{{vm.orderdata.supplier_name}}</div><div>订单编号：{{vm.orderdata.order_id}}</div><div>下单时间:{{vm.orderdata.order_time_str}}</div><div>付款方式： <span ng-show="vm.orderdata.pay_type == \'WEIXIN\'">微信</span> <span ng-show="vm.orderdata.pay_type == \'ALIPAY\'">支付宝</span> <span ng-show="vm.orderdata.pay_type == \'JDPAY\'">京东支付</span></div><div>付款状态: <span ng-show="vm.orderdata.is_pay ==0">未付款</span> <span ng-show="vm.orderdata.is_pay ==1">已付款</span> <span ng-show="vm.orderdata.is_pay ==1">付款时间:{{vm.orderdata.pay_time_str}}</span></div><div>实付： <span ng-show="vm.orderdata.pay_user_info">0</span> <span ng-show="!vm.orderdata.pay_user_info">{{vm.orderdata.total_amount}}</span> 元</div><div ng-show="vm.orderdata.order_type!=8">使用积分：{{vm.orderdata.use_score}}</div><div ng-show="vm.orderdata.order_type!=8">使用余额：{{vm.orderdata.use_amount}}</div><div ng-show="vm.orderdata.order_type!=8">使用优惠券：{{vm.orderdata.cardcoupon}}抵扣{{vm.orderdata.cardcoupon_exchang_amount}}元</div><div ng-if="vm.orderdata.is_no_express==0">运费：{{vm.orderdata.freight}}元</div><div ng-if="vm.orderdata.order_type != 1">买家：{{vm.orderdata.receiver_name}}</div><div ng-if="vm.orderdata.order_type != 1&&vm.orderdata.is_no_express==0">配送方式：快递配送</div><div ng-if="vm.orderdata.order_type != 1&&vm.orderdata.is_no_express==0">收货信息：{{vm.orderdata.receiver_province}}{{vm.orderdata.receiver_city}}{{vm.orderdata.receiver_dist}}{{vm.orderdata.receiver_address}}&nbsp;{{vm.orderdata.receiver_phone}}</div><div ng-if="vm.orderdata.is_no_express==1">无需物流</div><div>收货人手机：{{vm.orderdata.receiver_phone}}</div><div ng-show="vm.orderdata.order_type!=8">{{vm.rname}}姓名：{{vm.orderdata.custom_creater_name}}</div><div ng-show="vm.orderdata.order_type!=8">{{vm.rname}}手机：{{vm.orderdata.custom_creater_phone}}</div><div>买家留言：{{vm.orderdata.buyer_memo}}</div><div class="pay_info" ng-show="vm.orderdata.pay_user_info"><div class="pay_title">代付人信息</div><div ng-show="vm.orderdata.pay_user_info.nickname">代付：（由好友&nbsp;<span class="nickname">{{vm.orderdata.pay_user_info.nickname}}</span>&nbsp;代付）</div><div>使用余额：抵扣{{vm.orderdata.other_use_amount}}元</div><div>使用储值卡：抵扣{{vm.orderdata.other_card_coupon_dis_amount}}元</div><div>实付：抵扣{{vm.orderdata.total_amount}}元</div><div ng-show="vm.orderdata.pay_time_str">代付时间：{{vm.orderdata.pay_time_str}}</div><div>代付状态： <span ng-show="vm.orderdata.order_status==\'待付款\'">正在代付中</span> <span ng-show="vm.orderdata.order_status==\'待发货\'">代付成功</span></div></div></div><div class="col-xs-6 orderdetailtitleR" ng-if="(vm.orderdata.order_type != 1)&&!vm.isJikuWifi"><h3>订单状态：{{vm.orderdata.order_status}}</h3><div style="padding:10px 0" ng-if="vm.orderdata.is_no_express==0"><label><select class="form-control" ng-model="vm.expressCompany" ng-options="expressCompany.express_company_name for expressCompany in vm.expressCompanys"></select></label> <label style="margin-left:6px;margin-bottom:0;"><input type="text" ng-model="vm.express_number" class="form-control input-sm" placeholder="请输入物流单号" style="height:34px;"></label> <button class="btn btn-success" ng-click="vf.orderDelivery()" style="margin-left:6px;margin-top: -4px;">我要发货</button></div><div style="padding:10px 0" ng-if="vm.ADMIN_CONFIG.orderDetail.updateStatu"><label><select class="form-control" ng-model="vm.orderStatus" ng-options="orderStatus.name for orderStatus in vm.orderStatuses"></select></label> <button class="btn btn-danger" ng-click="vf.updateStatus()" style="margin-left:6px;margin-top: -4px;">更新订单状态</button></div><div style="padding:10px 0"><table><tr><td><textarea max-length="50" style="width:200px;height:50px;" ng-model="vm.remark">{{vm.remark}}</textarea></td><td>&nbsp; <button class="btn btn-success" ng-click="vf.updateRemark()" style="margin-top: 2px;">设置备注</button></td><td></td></tr></table></div><div style="padding: 10px 0" ng-if="vm.orderdata.ex1==null&&vm.orderdata.group_buy_info.group_buy_status==2&&vm.orderdata.total_amount>0"><button class="btn btn-danger" ng-click="vf.refundHead(1)" style="margin-left:6px;margin-top: -4px;">团长退货退款</button></div><div style="padding:10px 0" ng-if="vm.orderdata.order_type==7&&vm.orderdata.is_pay==1&&orderdata.exam_info!=null"><label style="font-weight:bold;">考试状态: {{vm.orderdata.exam_info.status_text}}</label> <a target="_blank" href="/Admin/Exam/ExamRecordDetail.aspx?id={{vm.orderdata.exam_info.exam_id}}&uid={{vm.orderdata.exam_info.user_id}}" ng-show="vm.orderdata.exam_info.status==4" class="btn btn-success" style="margin-top: 2px;">去阅卷</a> <a target="_blank" href="/Admin/Exam/ExamRecordDetail.aspx?id={{vm.orderdata.exam_info.exam_id}}&uid={{vm.orderdata.exam_info.user_id}}" ng-show="vm.orderdata.exam_info.status==5" class="btn btn-success" style="margin-top: 2px;">查看试卷</a></div></div></div><div class="col-xs-12" ng-if="vm.orderdata.order_type != 4"><div class="col-xs-6" style="color: red;margin-bottom: 12px;">提示：发货7天不确认自动交易成功</div><div class="col-xs-6"></div></div><table class="table table-striped table-bordered table-hover detailTable" id="editable" ng-if="vm.orderdata.order_type != 4"><thead><tr><th class="center">商品名称</th><th class="center">单价(元)</th><th class="center">数量</th><th class="center">小计(元)</th><th class="center">状态</th><th class="center">运费(元)</th></tr></thead><tr ng-if="vm.orderdata.express_company_name != null"><td colspan="7" style="background:#fff;">快递公司：{{vm.orderdata.express_company_name}} &nbsp;&nbsp;&nbsp; 快递单号：{{vm.orderdata.express_number}}</td></tr><tr class="gradeX" ng-repeat="boxdata in vm.orderdata.product_list"><td class="proClass overFlowAuto productinfo" ng-click="vf.gotoProductDetail(boxdata)"><img ng-src="{{boxdata.img_url}}" alt="" class="product-name"> <span class="detailtitle block" title="{{boxdata.product_name}}">{{boxdata.product_name}}</span> <span class="detailproperty">{{boxdata.show_property}}</span></td><td class="center"><span ng-show="boxdata.price">{{boxdata.price | currency:\'￥\'}}</span> <span ng-show="boxdata.score"><span ng-show="boxdata.price">+</span> {{boxdata.score}}积分</span></td><td class="center">{{boxdata.count}}</td><td class="center"><span ng-show="boxdata.subtotalprice">{{boxdata.subtotalprice | currency:\'￥\'}}</span> <span ng-show="boxdata.subtotalscore"><span ng-show="boxdata.subtotalprice">+</span> {{boxdata.subtotalscore}}积分</span></td><td class="center"><div ng-show="boxdata.refund_status == \'\' || boxdata.refund_status == \'-2\'">{{vm.orderdata.order_status}}</div><div ng-show="boxdata.refund_status != \'\' && boxdata.refund_status != \'-2\' && boxdata.refund_status != \'6\' && boxdata.refund_status != \'7\'" ui-sref="index.refund({orderID:vm.orderdata.order_id,detailID:boxdata.order_detail_id})" class="refundordercolor" style="cursor:pointer;width:100%;height:100%;">退款中</div><div ng-show="boxdata.refund_status == \'6\'" ui-sref="index.refund({orderID:vm.orderdata.order_id,detailID:boxdata.order_detail_id})" class="refundordercolor" style="cursor:pointer;">已完成退款</div><div ng-show="boxdata.refund_status == \'7\'" ui-sref="index.refund({orderID:vm.orderdata.order_id,detailID:boxdata.order_detail_id})" class="refundordercolor" style="cursor:pointer;">退款已关闭</div></td><td class="center" ng-if="$first" rowspan="{{vm.orderdata.product_list.length}}">{{vm.orderdata.freight}}</td></tr></table><br><div ng-if="vm.orderdata.order_type == 1||vm.orderdata.order_type==2"><h2 ng-if="vm.orderdata.order_type == 1">子订单</h2><h2 ng-if="vm.orderdata.order_type == 2">团员订单</h2><div ng-if="vm.orderdata.ex1==null&&vm.orderdata.group_buy_info.group_buy_status==2"><button class="btn btn-danger" ng-click="vf.refundHead(2)" style="margin-bottom: 10px;margin-top: -4px;">团员退货退款</button></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th class="center"><input type="checkbox" ng-click="vf.checkedall()" ng-checked="selectedall"></th><th class="center">序号</th><th class="center">单价(元)</th><th class="center">数量</th><th class="center">小计(元)</th><th class="center">状态</th><th class="center">运费(元)</th><th class="center">操作</th></tr></thead><tbody ng-repeat="data in vm.childrenData"><tr><td class="center"><input type="checkbox" ng-click="vf.selectme(data)" ng-if="data.total_amount>0" ng-checked="data.selected" value="checked"></td><td class="center">{{$index + 1}}</td><td colspan="7" style="background:#fff;">订单号：{{data.order_id}} &nbsp;&nbsp;&nbsp; 快递公司：{{data.express_company_name}} &nbsp;&nbsp;&nbsp; 快递单号：{{data.express_number}} <span>下单人姓名：{{data.receiver_name}} &nbsp;&nbsp;&nbsp; 下单人手机：{{data.receiver_phone}} &nbsp;&nbsp;&nbsp; 买家留言：{{data.buyer_memo}} &nbsp;&nbsp;&nbsp; 商家备注：{{data.ex21}}</span> &nbsp;&nbsp;&nbsp; <span ng-if="data.ex1!=\'\'&&data.ex1!=null">退货退款成功</span></td></tr><tr class="gradeX" ng-repeat="boxdata in data.product_list"><td class="center"></td><td class="center"></td><td class="center">{{boxdata.price}}</td><td class="center">{{boxdata.count}}</td><td class="center">{{boxdata.price * boxdata.count}}</td><td class="center"><div ng-show="boxdata.refund_status == \'\' || boxdata.refund_status == \'-2\'"><span ng-class="{\'orderStatusRed\':data.order_status==\'待发货\',\'orderStatusYellow\':data.order_status==\'待付款\',\'orderStatusBlue\':data.order_status==\'已发货\',\'orderStatusSuccess\':data.order_status==\'交易成功\',\'orderStatusCancel\':data.order_status==\'已取消\',\'orderStatusRefund\':data.is_refund==1}">{{data.order_status}}</span></div><div ng-show="boxdata.refund_status != \'\' && boxdata.refund_status != \'-2\' && boxdata.refund_status != \'6\' && boxdata.refund_status != \'7\'" ui-sref="index.refund({orderID:data.order_id,detailID:boxdata.order_detail_id})" class="refundordercolor" style="cursor:pointer;width:100%;height:100%;">退款中</div><div ng-show="boxdata.refund_status == \'6\'" ui-sref="index.refund({orderID:data.order_id,detailID:boxdata.order_detail_id})" class="refundordercolor" style="cursor:pointer;">已完成退款</div><div ng-show="boxdata.refund_status == \'7\'" ui-sref="index.refund({orderID:data.order_id,detailID:boxdata.order_detail_id})" class="refundordercolor" style="cursor:pointer;">退款已关闭</div></td><td class="center" ng-if="$first" rowspan="{{data.product_list.length}}">{{data.freight}}</td><td class="center"><button class="btn btn-primary" ng-click="vf.editChildBtn(data)">操作</button></td></tr></tbody></table></div></div></div></div><div class="modal inmodal" id="dealModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content" style="padding-left:20px;padding-right:20px;"><div class="modal-header left"><h4>商品发货</h4></div><div class="modal-body left"><div class="orderdetailtitle"><div class="col-xs-6 orderdetailtitleL"><h4>订单信息</h4><div>订单编号：{{vm.editOrder.order_id}}</div><div>付款方式： <span ng-show="vm.editOrder.pay_type == \'WEIXIN\'">微信</span> <span ng-show="vm.editOrder.pay_type == \'ALIPAY\'">支付宝</span></div><div>实付：{{vm.editOrder.total_amount}}元</div><div>使用积分：{{vm.editOrder.use_score}}</div><div>使用余额：{{vm.editOrder.use_amount}}</div><div>使用优惠券：{{vm.editOrder.cardcoupon}}</div><div>运费：{{vm.editOrder.freight}}元</div><div>买家：{{vm.editOrder.receiver_name}}</div><div ng-if="vm.editOrder.delivery_type==0">配送方式：快递配送</div><div ng-if="vm.editOrder.delivery_type==1">配送方式：上门自提</div><div ng-if="vm.editOrder.delivery_type==2">配送方式：现场购买</div><div>收货信息：{{vm.editOrder.receiver_province}}{{vm.editOrder.receiver_city}}{{vm.editOrder.receiver_dist}}{{vm.editOrder.receiver_address}}&nbsp;{{vm.editOrder.receiver_phone}}</div><div>买家留言：{{vm.editOrder.buyer_memo}}</div></div><div class="col-xs-6 orderdetailtitleR" ng-if="!vm.isJikuWifi"><h3>订单状态：{{vm.editOrder.order_status}}</h3><div style="padding:10px 0"><label><select class="form-control" ng-model="vm.editOrderEcName" ng-options="expressCompany.express_company_name for expressCompany in vm.expressCompanys"></select></label> <label><input type="text" ng-model="vm.editOrderEcNum" class="form-control input-sm" placeholder="请输入物流单号" style="height:34px;"></label> <button class="btn btn-success" ng-click="vf.deliveryBtn()" style="margin-top: 2px;">我要发货</button></div><div style="padding:10px 0" ng-show="vm.ADMIN_CONFIG.orderDetail.updateStatu"><label><select class="form-control" ng-model="vm.editOrderStatus" ng-options="orderStatus.name for orderStatus in vm.orderStatuses"></select></label> <button class="btn btn-danger" ng-click="vf.updateStatusBtn()" style="margin-top: 2px;">更新订单状态</button> <textarea ng-model="vm.editOrder.ex21" class="mTop21" cols="30" rows="2"></textarea> <button class="btn btn-danger" ng-click="vf.updateRemarkChild(vm.editOrder)" style="margin-top: 2px;">设置备注</button></div></div></div></div></div></div></div>'),e.put("app/order/orderPreview/orderPreview.html",'<div class="order-preview"><div class="go-back"><a class="btn btn-white floatR" href="javascript:history.go(-1)">返回</a> <a class="btn btn-white print" ng-click="vf.printOrder()" href="javascript:;">打印</a><div class="pnames-warp"><span class="product_title">商品名称</span> <a class="product_name" href="javascript:;" ng-repeat="item in vm.orderdata.product_list"><button ng-click="vf.selectBtn(item)" ng-class="{\'btnSelect\':item.selected,\'btnNoSelected\':!item.selected}" class="btn btn-primary">{{item.product_name}}</button></a></div><div class="clearBoth"></div></div><br><div class="wrapPrintBody"><div id="wrapPrintBody"><style type="text/css">\r\n			\r\n				#wrapPrintBody{\r\n					width: 210mm;\r\n					height: 297mm;\r\n					overflow: hidden;\r\n					margin: 0 auto;\r\n				}\r\n\r\n				#wrapPrintBody .order-join ,#wrapPrintBody .delivery-join,#wrapPrintBody .send-delivery-join {\r\n				   height: 99mm;\r\n				}\r\n\r\n				#wrapPrintBody .delivery-join{\r\n					padding-top: 50px;\r\n				}\r\n				#wrapPrintBody .send-delivery-join {\r\n					padding-top: 56px;\r\n				}\r\n\r\n				#wrapPrintBody .delivery-join .table-delivery,#wrapPrintBody .order-join .table-order,#wrapPrintBody .send-delivery-join .table-send-join {\r\n				    width: 100%;\r\n				    color: #333\r\n				}\r\n\r\n				#wrapPrintBody .delivery-join .table-delivery tr td,#wrapPrintBody .delivery-join .table-delivery tr th,#wrapPrintBody .order-join .table-order tr td,#wrapPrintBody .order-join .table-order tr th,#wrapPrintBody .send-delivery-join .table-send-join tr td,#wrapPrintBody .send-delivery-join .table-send-join tr th {\r\n				    padding: 0 3px;\r\n				    font-size: 10px\r\n				}\r\n\r\n				#wrapPrintBody .order-join .table-order .tb-tr-first {\r\n				    line-height: 30px\r\n				}\r\n\r\n				#wrapPrintBody .order-join .table-order .tb-tr-first .td1 {\r\n				    font-size: 16px;\r\n				    width: 35%\r\n				}\r\n\r\n				#wrapPrintBody .order-join .table-order .tb-tr-first .td2 {\r\n				    font-size: 16px;\r\n				    width: 12%\r\n				}\r\n\r\n				#wrapPrintBody .order-join .table-order .tb-tr-first .td3 {\r\n				    font-size: 16px;\r\n				    width: 40%\r\n				}\r\n\r\n				#wrapPrintBody .order-join .table-order .tb-tr-first .td4 {\r\n				    font-size: 14px;\r\n				    text-align: center;\r\n				    vertical-align: top;\r\n				    width: 13%\r\n				}\r\n\r\n				#wrapPrintBody .order-join .table-order .tr-height {\r\n				    height: 19px\r\n				}\r\n\r\n				#wrapPrintBody .order-join .table-order .tr-height .td5 {\r\n				    width: 10%\r\n				}\r\n\r\n				#wrapPrintBody .order-join .table-order .tr-height .td6 {\r\n				    width: 25%\r\n				}\r\n\r\n				#wrapPrintBody .order-join .table-order .tr-height .td7 {\r\n				    width: 11%\r\n				}\r\n\r\n				#wrapPrintBody .order-join .table-order .tr-height .td8 {\r\n				    width: 18%\r\n				}\r\n\r\n				#wrapPrintBody .order-join .table-order .tr-height .count {\r\n				    font-size: 16px;\r\n				    font-weight: 700\r\n				}\r\n\r\n				#wrapPrintBody .order-join .table-order .tr-height2 {\r\n				    height: 24px\r\n				}\r\n\r\n				\r\n				#wrapPrintBody .delivery-join .table-delivery .tb-tr-first {\r\n				    line-height: 30px\r\n				}\r\n\r\n				#wrapPrintBody .delivery-join .table-delivery .tb-tr-first .td1 {\r\n				    font-size: 16px;\r\n				    width: 35%\r\n				}\r\n\r\n				#wrapPrintBody .delivery-join .table-delivery .tb-tr-first .td2 {\r\n				    font-size: 16px;\r\n				    width: 12%\r\n				}\r\n\r\n				#wrapPrintBody .delivery-join .table-delivery .tb-tr-first .td3 {\r\n				    font-size: 16px;\r\n				    width: 40%\r\n				}\r\n\r\n				#wrapPrintBody .delivery-join .table-delivery .tb-tr-first .td4 {\r\n				    font-size: 14px;\r\n				    text-align: center;\r\n				    vertical-align: top;\r\n				    width: 13%\r\n				}\r\n\r\n				#wrapPrintBody .delivery-join .table-delivery .tr-height {\r\n				    height: 23px\r\n				}\r\n\r\n				#wrapPrintBody .delivery-join .table-delivery .tr-height .td5 {\r\n				    width: 10%\r\n				}\r\n\r\n				#wrapPrintBody .delivery-join .table-delivery .tr-height .td6 {\r\n				    width: 25%\r\n				}\r\n\r\n				#wrapPrintBody .delivery-join .table-delivery .tr-height .td7 {\r\n				    width: 11%\r\n				}\r\n\r\n				#wrapPrintBody .delivery-join .table-delivery .tr-height .td8 {\r\n				    width: 18%\r\n				}\r\n\r\n				#wrapPrintBody .delivery-join .table-delivery .tr-height .count {\r\n				    font-size: 16px;\r\n				    font-weight: 700\r\n				}\r\n\r\n				#wrapPrintBody .delivery-join .table-delivery .tr-height2 {\r\n				    height: 24px\r\n				}\r\n\r\n				#wrapPrintBody .send-delivery-join .table-send-join .tb-tr-first {\r\n				    line-height: 30px\r\n				}\r\n\r\n				#wrapPrintBody .send-delivery-join .table-send-join .tb-tr-first .td1 {\r\n				    font-size: 16px;\r\n				    width: 30%\r\n				}\r\n\r\n				#wrapPrintBody .send-delivery-join .table-send-join .tb-tr-first .td2 {\r\n				    font-size: 16px;\r\n				    width: 12%\r\n				}\r\n\r\n				#wrapPrintBody .send-delivery-join .table-send-join .tb-tr-first .td3 {\r\n				    font-size: 16px;\r\n				    width: 45%\r\n				}\r\n\r\n				#wrapPrintBody .send-delivery-join .table-send-join .tb-tr-first .td4 {\r\n				    font-size: 14px;\r\n				    text-align: center;\r\n				    vertical-align: top;\r\n				    width: 13%\r\n				}\r\n\r\n				#wrapPrintBody .send-delivery-join .table-send-join .tr-height {\r\n				    height: 18px\r\n				}\r\n\r\n				#wrapPrintBody .send-delivery-join .table-send-join .tr-height .td5 {\r\n				    width: 10%\r\n				}\r\n\r\n				#wrapPrintBody .send-delivery-join .table-send-join .tr-height .td6 {\r\n				    width: 25%\r\n				}\r\n\r\n				#wrapPrintBody .send-delivery-join .table-send-join .tr-height .td7 {\r\n				    width: 11%\r\n				}\r\n\r\n				#wrapPrintBody .send-delivery-join .table-send-join .tr-height .td8 {\r\n				    width: 18%\r\n				}\r\n\r\n				#wrapPrintBody .send-delivery-join .table-send-join .tr-height .count {\r\n				    font-size: 16px;\r\n				    font-weight: 700\r\n				}\r\n\r\n				#wrapPrintBody .send-delivery-join .table-send-join .tr-height2 {\r\n				    height: 24px\r\n				}\r\n				 \r\n				.tr-height25{\r\n					height: 25px\r\n				}\r\n	\r\n			</style><div class="order-join"><table class="table-order" border="1"><tr class="tb-tr-first"><th class="td1" colspan="2">花到家·订单联</th><th class="td2">订单编号</th><th class="td3" colspan="3">{{vm.orderdata.order_id}}</th><th class="td4">花到家备注</th></tr><tr class="tr-height"><th class="td5">订单来源</th><td class="td6">{{vm.orderdata.ex9}}</td><th>下单时间</th><td class="td8">{{vm.orderdata.order_time_str}}</td><th class="td7">订单总额</th><td class="td7">{{vm.orderdata.total_amount.toFixed(2)}}</td><td rowspan="13"></td></tr><tr class="tr-height"><th>购花人</th><td>{{vm.orderdata.order_user_info.true_name}}</td><th>品名</th><td>{{vm.selectProduct.product_name}}</td><th>付款方式</th><td>{{vm.pay_type}}</td></tr><tr class="tr-height"><th>联系方式</th><td>{{vm.orderdata.order_user_info.phone}}</td><th>规格备注</th><td>{{vm.selectProduct.ex5}}</td><th>已付金额</th><td>{{vm.orderdata.total_amount.toFixed(2)}}</td></tr><tr class="tr-height"><th>微信</th><td></td><th>结算价格</th><td></td><th>应收金额</th><td></td></tr><tr class="tr-height"><th>收花人</th><td>{{vm.orderdata.receiver_name}}</td><th>收款方式</th><td></td><th>余款收款</th><td></td></tr><tr class="tr-height"><th>联系方式</th><td>{{vm.orderdata.receiver_phone}}</td><th>送达时间</th><td>{{vm.orderdata.ex2}}</td><th>配送方式</th><td></td></tr><tr class="tr-height2"><th>收花地址</th><td colspan="5">{{vm.orderdata.receiver_address}}</td></tr><tr class="tr-height2"><th>赠花寄语</th><td colspan="5"></td></tr><tr class="tr-height2"><th>订单备注</th><td colspan="5">{{vm.orderdata.buyer_memo}}</td></tr><tr class="tr-height"><th>接单人</th><td></td><th>分炼人</th><td></td><th>发货人</th><td></td></tr><tr class="tr-height"><th>总负责人</th><td></td><th>配送员</th><td></td><th>配送员电话</th><td></td></tr><tr class="tr-height"><th>公司抬头</th><td colspan="3">{{vm.orderdata.ex3}}</td><th>收件人</th><td></td></tr><tr class="tr-height"><th>邮寄地址</th><td colspan="3"></td><th>收件人电话</th><td></td></tr></table></div><div class="delivery-join"><table class="table-delivery" border="1"><tr class="tb-tr-first"><th class="td1" colspan="2">花到家·分拣/配送联</th><th class="td2">订单编号</th><th class="td3" colspan="3">{{vm.orderdata.order_id}}</th><th class="td4">花到家备注</th></tr><tr class="tr-height"><th class="td5" rowspan="2">收花人</th><td class="td6" rowspan="2">{{vm.orderdata.receiver_name}}</td><th>品名</th><td class="td8">{{vm.selectProduct.product_name}}</td><th class="td7" rowspan="3">配送方式</th><td class="td7" rowspan="3"></td><td rowspan="10" class="td4"></td></tr><tr class="tr-height"><th>规格备注</th><td>{{vm.selectProduct.ex5}}</td></tr><tr class="tr-height"><th>联系方式</th><td>{{vm.orderdata.receiver_phone}}</td><th>送达时间</th><td>{{vm.orderdata.ex2}}</td></tr><tr class="tr-height2"><th>收花地址</th><td colspan="5">{{vm.orderdata.receiver_address}}</td></tr><tr class="tr-height2"><th>收花人签收</th><td colspan="5"></td></tr><tr class="tr-height"><th rowspan="2">售后服务</th><td rowspan="2">4009600901</td><th rowspan="5" colspan="2"><div><img src="http://open-files.comeoncloud.net/www/hf/jubit/image/20170505/DD44998F19164A5FA14ED3570D7DA3F3.png"></div></th><th>客服微信</th><td>HuadaojiaG</td></tr><tr><th>客服微信</th><td>HuadaojiaF</td></tr><tr class="tr-height25"><th rowspan="3">关注花到家</th><td rowspan="3"><img height="70px" src="http://open-files.comeoncloud.net/www/hf/jubit/image/20170506/0AAED857DEEF45459BE98419F1D3E4BD.png"></td><th>客服微信</th><td>HuadaojiaH</td></tr><tr class="tr-height25"><th>客服微信</th><td></td></tr><tr class="tr-height25"><th>客服微信</th><td></td></tr></table></div><div class="send-delivery-join"><table class="table-send-join" border="1"><tr class="tb-tr-first"><th class="td1" colspan="2">花到家·发货联</th><th class="td2">订单编号</th><th class="td3" colspan="3">{{vm.orderdata.order_id}}</th><th class="td4">花到家备注</th></tr><tr class="tr-height"><th class="td5">订单来源</th><td class="td6">{{vm.orderdata.ex9}}</td><th>下单时间</th><td class="td8">{{vm.orderdata.order_time_str}}</td><th class="td7">订单总额</th><td class="td7">{{vm.orderdata.total_amount.toFixed(2)}}</td><th class="td4" rowspan="13"></th></tr><tr class="tr-height"><th>购花人</th><td>{{vm.orderdata.order_user_info.true_name}}</td><th>品名</th><td>{{vm.selectProduct.product_name}}</td><th>付款方式</th><td>{{vm.pay_type}}</td></tr><tr class="tr-height"><th>联系方式</th><td>{{vm.orderdata.order_user_info.phone}}</td><th>规格备注</th><td>{{vm.selectProduct.ex5}}</td><th>已付金额</th><td>{{vm.orderdata.total_amount.toFixed(2)}}</td></tr><tr class="tr-height"><th>微信</th><td></td><th>结算价格</th><td></td><th>应收金额</th><td></td></tr><tr class="tr-height"><th>收花人</th><td>{{vm.orderdata.receiver_name}}</td><th>收款方式</th><td></td><th>余款收款</th><td></td></tr><tr class="tr-height"><th>联系方式</th><td>{{vm.orderdata.receiver_phone}}</td><th>送达时间</th><td>{{vm.orderdata.ex2}}</td><th>配送方式</th><td></td></tr><tr class="tr-height2"><th>收花地址</th><td colspan="5">{{vm.orderdata.receiver_address}}</td></tr><tr class="tr-height2"><th>赠花寄语</th><td colspan="5"></td></tr><tr class="tr-height2"><th>订单备注</th><td colspan="5">{{vm.orderdata.buyer_memo}}</td></tr><tr class="tr-height"><th>接单人</th><td></td><th>分炼人</th><td></td><th>发货人</th><td></td></tr><tr class="tr-height"><th>总负责人</th><td></td><th>配送员</th><td></td><th>配送员电话</th><td></td></tr><tr class="tr-height"><th>公司抬头</th><td colspan="3">{{vm.orderdata.ex3}}</td><th>收件人</th><td></td></tr><tr class="tr-height"><th>邮寄地址</th><td colspan="3"></td><th>收件人电话</th><td></td></tr></table></div></div></div><br></div>'),e.put("app/order/raiseorderDetail/raiseorderDetail.html",'<div class="wrapper wrapper-content animated fadeInRight"><div class="ibox-title"><h5>订单详情</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><div class="row"><div class="col-lg-12"><div class="orderdetailtitle"><div class="col-lg-6 orderdetailtitleL"><h4>订单信息</h4><div>订单编号：{{orderdata.order_id}}</div><div>实付：{{orderdata.order_amount}}元</div><div>买家：{{orderdata.receiver_name}}</div><div>电话：{{orderdata.receiver_phone}}</div><div>地址：{{orderdata.receiver_address}}</div><div>配送方式：快递配送</div><div>下单时间：{{orderdata.order_time | date:"yyyy-MM-dd HH:mm"}}</div><div ng-if="orderdata.order_pay_time !=0">付款时间：{{orderdata.order_pay_time | date:"yyyy-MM-dd HH:mm"}}</div><div ng-if="orderdata.order_delivery_time !=0">发货时间：{{orderdata.order_delivery_time | date:"yyyy-MM-dd HH:mm"}}</div></div><div class="col-lg-6 orderdetailtitleR"><h3>订单状态：{{orderdata.order_status}}</h3><div style="padding:10px 0"><label><select class="form-control" ng-model="expressCompany" ng-options="expressCompany.express_company_name for expressCompany in expressCompanys"></select></label> <label style="margin-left:6px;margin-bottom:0;"><input type="text" ng-model="logisticsInfo.express_number" class="form-control input-sm" placeholder="请输入物流单号" style="height:34px;"></label> <button class="btn btn-success" ng-click="submitExpressBtn()" style="margin-left:6px;margin-top: -4px;">我要发货</button></div><div style="padding:10px 0"><label><select class="form-control ng-pristine ng-untouched ng-valid" ng-model="statuName.name" ng-options="statu.name for statu in orderStatus"><option value="">请选择订单状态</option></select></label> <button class="btn btn-danger" ng-click="updateSatusBtn()" style="margin-left:6px;margin-top: -4px;">更新订单状态</button></div></div></div></div></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th></th><th class="center">众筹名称</th><th class="center">众筹发起人</th><th class="center">金额</th><th class="center">状态</th></tr></thead><tr ng-if="orderdata.express_company_name != null"><td colspan="7" style="background:#fff;">快递公司：{{orderdata.express_company_name}} &nbsp;&nbsp;&nbsp; 快递单号：{{orderdata.express_number}}</td></tr><tr class="gradeX"><td class="proClass"><img ng-src="{{orderdata.crowdfund_img_url}}" alt="" style="width:60px;height:60px;float: left"></td><td class="center">{{orderdata.crowdfund_title}}</td><td class="center">{{orderdata.crowdfund_originator}}</td><td class="center">{{orderdata.order_amount}}</td><td class="center">{{orderdata.order_status}}</td></tr></table></div>'),e.put("app/order/raiseorderList/raiseorderList.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>订单列表</h2><ol class="breadcrumb"><li><a>商城</a></li><li><a>商品</a></li><li class="active"><strong>众筹列表</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInRight"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>众筹订单列表</h5></div><div class="ibox-content"><div class="raisenavlist" ng-class="{raiseselectd:seletID==\'\'}" ui-sref="index.raiseorderList({pageID:1,statuID:\'\'})">全部</div><div class="raisenavlist" ng-class="{raiseselectd:seletID==\'待付款\'}" ui-sref="index.raiseorderList({pageID:1,statuID:\'待付款\'})">待付款</div><div class="raisenavlist" ng-class="{raiseselectd:seletID==\'待发货\'}" ui-sref="index.raiseorderList({pageID:1,statuID:\'待发货\'})">待发货</div><div class="raisenavlist" ng-class="{raiseselectd:seletID==\'已发货\'}" ui-sref="index.raiseorderList({pageID:1,statuID:\'已发货\'})">已发货</div><div style="clear:both;"></div><div id="editable_wrapper" class="dataTables_wrapper form-inline"><table class="table table-striped table-bordered table-hover dataTable" id="editable" role="grid" aria-describedby="editable_info"><thead><tr role="row"><th class="sorting_asc center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="名称: activate to sort column descending" style="width: 185px;">名称</th><th class="sorting center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" aria-label="时间: activate to sort column ascending" style="width: 248px;">时间</th><th class="sorting center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" aria-label="用户: activate to sort column ascending" style="width: 161px;">用户</th><th class="sorting center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" aria-label="订单金额: activate to sort column ascending" style="width: 233px;">订单金额</th><th class="sorting center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" aria-label="状态: activate to sort column ascending" style="width: 121px;">状态</th><th class="sorting center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" aria-label="操作: activate to sort column ascending" style="width: 121px;">操作</th></tr></thead><tbody><tr class="gradeA odd" role="row" ng-repeat="raiseorder in raiseorderDatas"><td class="sorting_1 center"><div>{{raiseorder.order_id}}</div><div>{{raiseorder.crowdfund_title}}</div></td><td class="center">{{raiseorder.order_time | date:"yyyy-MM-dd HH:mm:ss"}}</td><td class="center">{{raiseorder.receiver_name}}</td><td class="center">{{raiseorder.order_amount}}</td><td class="center">{{raiseorder.order_status}}</td><td class="center" ui-sref="index.raiseorderDetail({orderID:raiseorder.order_id})"><button class="btn btn-primary center">订单详情</button></td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totalItems}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totalItems" ng-model="currentPage" class="pagination-sm" items-per-page="pagesize" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" style="float:right;" max-size="6"></pagination></div></div></div></div></div></div></div></div></div>'),e.put("app/product/addProductSort/addProductSort.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>添加分类</h2><ol class="breadcrumb"><li><a>商品分类</a></li><li><a>添加</a></li><li class="active"><strong>添加分类</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInRight"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins pAll6"><div class="ibox-title"><h5>添加分类</h5><a class="btn btn-white floatR" href="javascript:history.go(-1)">返回</a><div class="clearBoth"></div></div><form method="get" name="myForm" novalidate="" class="form-horizontal" ng-submit="addcategoryBtn()"><div class="ibox-content"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 分类名称：</label><div class="col-sm-3"><input type="text" class="form-control" name="productTitle" placeholder="请输入分类名称" ng-model="categorydata.category_name" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label">分类简介：</label><div class="col-sm-4"><textarea rows="3" cols="20" class="form-control" name="productSummary" placeholder="请输入分类简介" ng-model="categorydata.category_description" required="" ng-minlength="1" ng-maxlength="200"></textarea></div></div><div class="form-group"><label class="col-sm-2 control-label">父级分类：</label><div class="col-sm-3"><select class="form-control" ng-model="boxdata" ng-options="boxdata.category_name for boxdata in categorys" ng-change="whichcategory(boxdata)"></select></div></div><div class="form-group"><label class="col-sm-2 control-label">分类图片：</label><div class="col-sm-10"><zafw-upload-img ng-model="categorydata.category_img_url"></zafw-upload-img></div></div><div class="center"><button type="submit" class="btn btn-primary btn-lg">确认添加</button></div><div class="hr-line-dashed"></div></div></form></div></div></div></div>'),
e.put("app/product/articleView/articleView.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>文章详情预览</h2><ol class="breadcrumb"><li><a>商品列表</a></li><li><a>添加/编辑</a></li><li class="active"><strong>文章详情预览</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInRight"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>文章详情预览</h5></div><form method="get" name="myForm" novalidate="" class="form-horizontal" ng-submit="submitProductFunc()"><div class="ibox-content"><div class="form-group"><label class="col-sm-2 control-label">文章名称：</label><div class="col-sm-9"><span class="form-control" style="border: 0px !important;">{{vm.articleInfo.article_name}}</span></div></div><div class="form-group"><label class="col-sm-2 control-label">文章图片：</label><div class="col-sm-9"><img ng-src="vm.articleInfo.article_img_url"></div></div><div class="form-group"><label class="col-sm-2 control-label">文章描述：</label><div class="col-sm-9"><span class="form-control" style="border: 0px !important;">{{vm.articleInfo.article_summary}}</span></div></div><div class="form-group"><label class="col-sm-2 control-label">文章分类：</label><div class="col-sm-3"><span class="form-control" style="border: 0px !important;">{{vm.articleInfo.category_name}}</span></div></div><div class="form-group"><label class="col-sm-2 control-label">文章排序：</label><div class="col-sm-9"><span class="form-control" style="border: 0px !important;">{{vm.articleInfo.article_sort}}</span></div></div><div class="form-group"><label class="col-sm-2 control-label">阅读量：</label><div class="col-sm-9"><span class="form-control" style="border: 0px !important;">{{vm.articleInfo.article_pv}}</span></div></div><div class="form-group"><label class="col-sm-2 control-label">分享数：</label><div class="col-sm-9"><span class="form-control" style="border: 0px !important;">{{vm.articleInfo.article_share_total_count}}</span></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 文章标签：</label><div class="col-sm-9"><span class="form-control" style="border: 0px solid #e5e6e7;">{{vm.articleInfo.article_tags}}</span></div></div><div class="form-group"><label class="col-sm-2 control-label">文章详情：</label><div class="col-sm-9"><div class="form-control" style="border: 0px !important;" ng-bind-html="vm.articleInfo.articlede"></div></div></div><div class="clearBoth"></div><div class="hr-line-dashed"></div></div></form></div></div></div></div>'),e.put("app/product/editProductSort/editProductSort.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>编辑分类</h2><ol class="breadcrumb"><li><a>商品分类</a></li><li><a>添加</a></li><li class="active"><strong>编辑分类</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInRight"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins pAll6"><div class="ibox-title"><h5>编辑分类</h5><a class="btn btn-white floatR" href="javascript:history.go(-1)">返回</a><div class="clearBoth"></div></div><form method="get" name="myForm" novalidate="" class="form-horizontal" ng-submit="editcategoryBtn()"><div class="ibox-content"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 分类名称：</label><div class="col-sm-3"><input type="text" class="form-control" name="productTitle" placeholder="请输入分类名称" ng-model="categorydata.category_name" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label">分类简介：</label><div class="col-sm-4"><textarea rows="3" cols="20" class="form-control" name="productSummary" placeholder="请输入分类简介" ng-model="categorydata.category_description" required="" ng-minlength="1" ng-maxlength="200"></textarea></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 父级分类：</label><div class="col-sm-3"><select class="form-control" ng-model="categorydata.category_parent_id" ng-options="c.category_id as c.category_name for c in categorys"></select></div></div><div class="form-group"><label class="col-sm-2 control-label">分类图片：</label><div class="col-sm-10"><zafw-upload-img ng-model="category_img_url"></zafw-upload-img></div></div><div class="center"><button type="submit" class="btn btn-primary btn-lg">保存</button></div><div class="clearBoth"></div><div class="hr-line-dashed"></div></div></form></div></div></div></div>'),e.put("app/product/freightTemplate/freightTemplate.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>运费模板</h2><ol class="breadcrumb"><li><a>商城</a></li><li><a>商品</a></li><li class="active"><strong>运费模板</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>运费模板</h5></div><div class="ibox-content"><div><a ui-sref="index.freightTemplateEditor" class="btn btn-primary">添加</a></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th class="center">模板名称</th><th class="center">最后编辑时间</th><th class="center">操作</th></tr></thead><tbody><tr class="gradeX" ng-repeat="templateItem in freightTemplateListData"><td class="center">{{templateItem.freight_template_name}}</td><td class="center">{{templateItem.last_modiffty_date|date:\'yyyy-MM-dd HH:mm\'}}</td><td class="center"><button class="btn btn-primary col-sm-5" ui-sref="index.freightTemplateEdit({freightTemplateId:templateItem.freight_template_id})">编辑</button> <button class="btn btn-danger col-sm-5 col-sm-offset-2" ng-click="delFreightTemplateFunc(templateItem.freight_template_id,$index)">删除</button></td></tr></tbody></table></div></div></div></div></div>'),e.put("app/product/freightTemplateEditor/freightTemplateEditor.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>编辑运费模板</h2><ol class="breadcrumb"><li><a>商城</a></li><li><a>商品</a></li><li class="active"><strong>编辑运费模板</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>编辑运费模板</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><form method="get" name="myForm" novalidate="" class="form-horizontal" ng-submit="submitFreightTemplateFunc()"><div class="ibox-content"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span>模板名称</label><div class="col-sm-3"><input type="text" class="form-control" name="productTitle" placeholder="模板名称" ng-model="vm.freightTemplate.freight_template_name" required="" ng-minlength="1" ng-maxlength="100" ng-blur="productTitleErr={error:myForm.productTitle.$dirty&&myForm.productTitle.$invalid,errmsg:\'请填写模板名称\'}" ng-focus="productTitleErr={error:null,errmsg:null}"><div class="colorRed marginTp5" ng-show="productTitleErr.error">{{productTitleErr.errmsg}}</div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span>计价方式</label><div class="col-sm-3 pTop3"><label><input type="radio" name="calc_type" class="top1" value="count" ng-model="vm.freightTemplate.calc_type">按件数</label> &nbsp;&nbsp; <label><input type="radio" name="calc_type" class="top1" value="weight" ng-model="vm.freightTemplate.calc_type">按重量</label></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span>配送区域</label><div class="col-sm-9"><table class="table table-bordered skutable"><thead><tr><th>可配送区域</th><th ng-show="vm.freightTemplate.calc_type==\'count\'">首件（个）</th><th ng-hide="vm.freightTemplate.calc_type==\'count\'">首重（kg）</th><th>运费（元）</th><th ng-show="vm.freightTemplate.calc_type==\'count\'">续件（个）</th><th ng-hide="vm.freightTemplate.calc_type==\'count\'">续重（kg）</th><th>续费（元）</th></tr></thead><tbody><tr ng-repeat="valuationRule in vm.freightTemplate.valuation_rules"><td class="skuvalutd left">{{valuationRule.areaNames}}<a ng-click="vf.delArea($index)">&nbsp;删除&nbsp;</a><a ng-click="vf.editArea(valuationRule,$index)">&nbsp;编辑&nbsp;</a></td><td class="ft-settd"><input type="text" maxlength="9" class="form-control tdinput text-right" ng-model="valuationRule.initial_product_count"></td><td class="ft-settd"><div class="input-group m-b tdinput" style="vertical-align:middle;"><span class="input-group-addon">￥</span> <input type="text" maxlength="9" class="form-control text-right" ng-model="valuationRule.initial_amount"></div></td><td class="ft-settd"><input type="text" maxlength="9" class="form-control tdinput text-right" ng-model="valuationRule.add_product_count"></td><td class="ft-settd"><div class="input-group m-b tdinput"><span class="input-group-addon">￥</span> <input type="text" maxlength="9" class="form-control text-right" ng-model="valuationRule.add_amount"></div></td></tr><tr><td colspan="5"><a ng-click="vf.showRegionDialog()">指定可配送区域和运费</a></td></tr></tbody></table></div></div><div class="form-group" ng-show="!vm.isSonghe"><label class="col-sm-2 control-label">包邮方式</label><div class="col-sm-9 pTop3"><label><input type="radio" name="rdoLimitType" class="top1" value="0" ng-model="vm.freightTemplate.freight_limit_type">不开启</label> &nbsp;&nbsp; <label><input type="radio" name="rdoLimitType" class="top1" value="1" ng-model="vm.freightTemplate.freight_limit_type"> <span ng-show="vm.freightTemplate.calc_type==\'count\'">满多少件包邮</span> <span ng-show="vm.freightTemplate.calc_type==\'weight\'">满多少重量包邮</span></label> &nbsp;&nbsp; <label><input type="radio" name="rdoLimitType" class="top1" value="2" ng-model="vm.freightTemplate.freight_limit_type">满多少金额包邮</label></div></div><div class="form-group"><label class="col-sm-2 control-label"></label><div class="col-sm-9 pTop3"><div ng-show="vm.freightTemplate.freight_limit_type==1||vm.freightTemplate.freight_limit_type==2"><span style="float: left;position: relative;top: 17px;">满</span> <span style="float: left;position: relative;top: 8px;left:10px;"><input type="number" class="form-control" style="width:100px;" oninput="if(value.length>8)value=value.slice(0,8)" ng-model="vm.freightTemplate.freight_free_limit"></span> <span style="float: left;position: relative;top: 17px;left:20px;" ng-show="vm.freightTemplate.freight_limit_type==1&&vm.freightTemplate.calc_type==\'count\'">件包邮</span> <span style="float: left;position: relative;top: 17px;left:20px;" ng-show="vm.freightTemplate.freight_limit_type==1&&vm.freightTemplate.calc_type==\'weight\'">kg包邮</span> <span style="float: left;position: relative;top: 17px;left:20px;" ng-show="vm.freightTemplate.freight_limit_type==2">元包邮</span></div></div></div></div><div class="wrapOperate"><label for="nextbtn" class="btn btn-primary btn-lg">保存</label> <input class="hidesubmitbtn" id="nextbtn" ng-click="vf.saveFreightTemplate()"> <label for="nextbtn" class="btn btn-primary btn-lg" ui-sref="index.freightTemplate">返回</label></div><div class="clearBoth"></div></form></div></div></div></div><div class="modal inmodal" id="myModal4" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header left"><h4>选择可配送区域</h4></div><div class="modal-body"><div class="district-wrap"><div class="district-head">可选省、市、区</div><ul class="district-body"><li ng-repeat="proviceItem in vm.curProvincesData" ng-init="outerIndex=$index" ng-if="proviceItem.addshow"><span class="jia" ng-if="!proviceItem.showCity" ng-click="vf.showCities(proviceItem)">+</span> <span class="jian" ng-if="proviceItem.showCity" ng-click="vf.hideCities(proviceItem)">-</span> <span class="area-text" ng-click="vf.selectProvince(proviceItem)" ng-class="{bggray:proviceItem.proviceSelected}">{{proviceItem.name}}</span><ul class="area-depth1" ng-if="proviceItem.showCity"><li ng-repeat="cityItem in proviceItem.children" ng-init="innerIndex=$index" ng-if="cityItem.addshow"><span class="jia" ng-class="{whiteCircle:0}" ng-if="!cityItem.showDistrict" ng-click="vf.showDistrict(cityItem)">+</span> <span class="jian" ng-class="{whiteCircle:0}" ng-if="cityItem.showDistrict" ng-click="vf.hideDistrict(cityItem)">-</span> <span class="area-text" ng-click="vf.selectCity(proviceItem,cityItem)" ng-class="{bggray:cityItem.citySelected}">{{cityItem.name}}</span><ul class="area-depth2" ng-if="cityItem.showDistrict"><li ng-repeat="districtItem in cityItem.children" ng-class="{bggray:districtItem.districtSelected}" ng-click="vf.selectDistrict(proviceItem,cityItem,districtItem)" ng-if="districtItem.addshow"><span>{{districtItem.name}}</span></li></ul></li></ul></li></ul></div><div class="district-btn" ng-click="vf.addarea()">添加</div><div class="district-wrap"><div class="district-head">已选省、市、区</div><ul class="district-body"><li ng-repeat="proviceItem in vm.curValuationRule.provincesData" ng-init="outerIndex=$index" ng-if="proviceItem.alreadyAddShow"><span class="jia" ng-if="!proviceItem.showCity" ng-click="vf.showCities(proviceItem)">+</span> <span class="jian" ng-if="proviceItem.showCity" ng-click="vf.hideCities(proviceItem)">-</span> <span>{{proviceItem.name}}</span> <span class="cha" ng-click="vf.deleteSelectedProvince(proviceItem,$index)">x</span><ul class="area-depth1" ng-if="proviceItem.showCity"><li ng-repeat="cityItem in proviceItem.children" ng-init="innerIndex=$index" ng-if="cityItem.alreadyAddShow"><span class="jia" ng-class="{whiteCircle:0}" ng-if="!cityItem.showDistrict" ng-click="vf.showDistrict(cityItem)">+</span> <span class="jian" ng-class="{whiteCircle:0}" ng-if="cityItem.showDistrict" ng-click="vf.hideDistrict(cityItem)">-</span> <span>{{cityItem.name}}</span> <span class="cha" ng-click="vf.deleteSelectedCity(proviceItem,cityItem,$index)">x</span><ul class="area-depth2" ng-if="cityItem.showDistrict"><li ng-repeat="districtItem in cityItem.children" ng-if="districtItem.alreadyAddShow">{{districtItem.name}} <span class="cha" ng-click="vf.deleteSelectedDistrict(proviceItem,cityItem,districtItem,$index)">x</span></li></ul></li></ul></li></ul></div><div class="clear-both"></div></div><div class="modal-footer center"><button type="button" class="btn btn-primary" ng-click="vf.addValuationRuleArea()">确定</button> <button type="button" class="btn btn-white" data-dismiss="modal" ng-click="vf.colseAreaWindow()">取消</button></div></div></div></div>'),e.put("app/product/productEditor/productEditor.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>添加商品</h2><ol class="breadcrumb"><li><a>商城</a></li><li><a>商品</a></li><li class="active"><strong>添加商品</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content wrapProductContent"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins pAll6"><form id="productEditForm" method="get" name="productEditForm" novalidate="" class="form-horizontal pBottom66" ng-submit="submitProductFunc()"><fieldset><h2 class="center">基本信息 <a class="btn btn-white floatR" href="javascript:;" ng-mousedown="goBackToList()">返回</a><div class="clearBoth"></div></h2><div class="ibox-content"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span>标题</label><div class="col-sm-10"><input id="productTitle" type="text" class="form-control" name="productTitle" placeholder="商品标题" ng-model="productEditorData.product_title" ng-blur="productTitleErr={error:myForm.productTitle.$dirty&&myForm.productTitle.$invalid,errmsg:\'请填写商品标题\'}" ng-focus="productTitleErr={error:null,errmsg:null}"></div></div><div class="form-group" ng-show="vm.productType==\'Houses\'"><label class="col-sm-2 control-label"><span class="colorRed">*</span>地址</label><div class="col-sm-10"><input id="productAddress" type="text" class="form-control" name="address" placeholder="楼盘地址" ng-model="productEditorData.address" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed"></span>简介</label><div class="col-sm-10"><input type="text" class="form-control" name="productSummary" placeholder="请对商品进行简单描述" ng-model="productEditorData.product_summary" ng-minlength="1" ng-maxlength="200"><div class="colorRed marginTp5" ng-show="productSummaryErr.error">{{productSummaryErr.errmsg}}</div></div></div><div class="form-group"><label id="pictureupload" class="col-sm-2 control-label"><span class="colorRed">*</span>图片</label><div class="col-sm-10"><zafw-upload-img ng-model="productEditorData.show_img_list"></zafw-upload-img></div></div><div class="form-group marginBt0"><label class="col-sm-2 control-label"><span class="colorRed">*</span>原价</label><div class="col-sm-10"><div class="input-group m-b col-sm-2 floatL"><div class="input-group-btn"><button tabindex="-1" class="btn btn-default" type="button" required="">￥</button></div><input id="quotePrice" type="number" class="form-control" ng-model="productEditorData.quote_price" name="productQuotePrice"></div></div></div><div class="form-group marginBt0"><label class="col-sm-2 control-label"><span class="colorRed">*</span>售价</label><div class="col-sm-10"><div class="input-group m-b col-sm-2 floatL"><div class="input-group-btn"><button tabindex="-1" class="btn btn-default" type="button" required="">￥</button></div><input id="price" type="number" class="form-control" name="productPrice" ng-model="productEditorData.price"></div><div class="input-group m-b col-sm-4 floatL" ng-show="hasScoreShop&&vm.productType!=\'Houses\'"><div class="input-group-btn"><button tabindex="-1" class="btn btn-default" type="button" required="">+&nbsp;积分</button></div><input type="number" class="form-control txtProductScore width110" name="productscore" ng-model="productEditorData.score"> <span class="lbTip" data-tip-msg="<b>商品售价说明</b><br>1.金额和积分是叠加的，如需要支付金额加上积分；<br>2.如果金额为0，积分为100，则该商品只需要支付100积分；<br>3.如果金额为100，积分为0，则商品需要支付100元；">?</span></div></div></div><div ng-if="vm.productType!=\'Houses\'"><div class="form-group marginBt0"><label class="col-sm-2 control-label"><span class="colorRed">*</span>基础价</label><div class="col-sm-10"><div class="input-group m-b col-sm-2 floatL"><div class="input-group-btn"><button tabindex="-1" class="btn btn-default" type="button" required="">￥</button></div><input id="basePrice" type="number" class="form-control" name="productBasePrice" ng-model="productEditorData.base_price"></div><span class="lbTip" data-tip-msg="<b>基础价说明</b><br>1.分佣金额 =（实付总金额/应付总金额）* 商品参与计算分佣金额 * 等级比例；<br>2.商品参与计算分佣金额=商品售价-商品基价 ；<br>3.返积分算法相同；">?</span></div></div><div class="form-group" ng-show="hasScoreShop"><label class="col-sm-2 control-label"><span class="colorRed"></span></label><div class="col-sm-3"><label><input type="checkbox" ng-model="productEditorData.is_cashpay_only">金额部分不允许抵扣兑换</label> <span class="lbTip" data-tip-msg="<b>说明</b><br>1.不允许抵扣兑换，则金额的部分只能通过人民币或者余额支付；</br> 2.不允许积分/优惠券/储值卡抵扣">?</span></div></div><div class="form-group hidden"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 参与返利比例</label><div class="col-sm-10"><input type="number" class="form-control txtProductScore width110 inlineBlock" name="productscore" ng-model="productEditorData.rebate_price_rate"> <span>%</span> <span class="lbTip" data-tip-msg="<b>说明</b><br>1.该项设置为参与返利计算金额的基础比例；<br>2.如果售价100，参与返利比例为 100 %，则算返利的时候按 100元去计算返利；<br>3.如果售价100，参与返利的比例为 35%，则算返利的时候按 35元去计算返利；">?</span></div></div><div class="form-group hidden"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 参与返积分比例</label><div class="col-sm-10"><input type="number" class="form-control txtProductScore width110 inlineBlock" name="productscore" ng-model="productEditorData.rebate_score_rate"><span>%</span> <span class="lbTip" data-tip-msg="<b>说明</b><br>1.该项设置为参与返积分计算金额的基础比例；<br>2.如果售价100，参与返积分比例为 100 %，则算返利的时候按 100元去计算返积分；<br>3.如果售价100，参与返积分的比例为 35%，则算返积分的时候按 35元去计算返积分；<br> 4.参与返积分的金额=参与返积分比例*售价；<br>5.可获得的返积分=参与返积分的金额*积分返利比例；">?</span></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed"></span> 访问级别</label><div class="col-sm-3"><input type="text" class="form-control" name="productTitle" placeholder="访问级别" ng-model="productEditorData.access_level" ng-minlength="1" ng-maxlength="100" step="0" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}"></div></div><div class="form-group"><label class="col-sm-2 control-label">商品编码</label><div class="col-sm-2"><input type="text" class="form-control" ng-model="productEditorData.product_code"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed"></span>分类</label><div class="col-sm-2"><select class="form-control m-b" name="account" ng-model="currentCategory" ng-options="category.category_name for category in categoryData" required=""><option value="">选择分类</option></select></div></div><div class="form-group" ng-show="isShowSupplier"><label class="col-sm-2 control-label"><span class="colorRed"></span>商户</label><div class="col-sm-2"><select class="form-control m-b" name="supplier" ng-model="currentSupplier" ng-options="item.name for item in supplierListData" required=""><option value="">无</option></select></div></div><div class="hr-line-dashed"></div><div class="form-group"><label class="col-sm-2 control-label">商品重量</label><div class="col-sm-2"><input id="productEditorDataWeight" type="number" class="form-control" ng-model="productEditorData.weight"></div><div class="col-sm-2"><span>kg</span> <span class="lbTip" data-tip-msg="<b>商品重量说明</b><br>1.如果选择的运费模板按重量计算，则需要填写商品重量；<br>2.总重量=商品重量*商品数量；<br>3.&nbsp;0.001千克(kg)=1克(g)；">?</span></div></div><div class="form-group" ng-if="isshowsku"><label class="col-sm-2 control-label"><span class="colorRed"></span>商品规格</label><div class="col-sm-10"><zafw-sku-box><zafw-check-sku ng-model="productEditorData.have_property_list"></zafw-check-sku><zafw-set-sku ng-model="productEditorData.skus"></zafw-set-sku></zafw-sku-box></div></div><div class="form-group" ng-show="isJikuWifi"><label class="col-sm-2 control-label"><span class="colorRed"></span>价格日历</label><div class="col-sm-10"><label style="margin-right: 20px;margin-top: 5px;"><input type="radio" value="1" name="timeRadios" ng-model="currTimeType">按指定时间</label> <label><input type="radio" value="0" name="timeRadios" ng-model="currTimeType">按指定时间段</label><br><div class="inlinebox marginTp10" ng-if="currTimeType==1"><div class="addskubox" style="width: 370px;"><div class="checkskubox pull-left" style="width: 140px;"><div class="input-group date"><input type="text" class="form-control" zafw-datepacker="" ng-model="timeObj.singleTime"> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div><div class="checkskubox pull-left" style="width: 140px;"><div class="input-group date"><div class="input-group-btn"><button tabindex="-1" class="btn btn-default" type="button" required="">￥</button></div><input type="number" step="0.01" min="0.01" class="form-control" name="productPrice" ng-model="timeObj.singlePrice"></div></div><span class="btn btn-primary pull-left" ng-click="addTimeFunc()">添加</span></div></div><div class="inlinebox marginTp10" ng-if="currTimeType==0"><div class="addskubox" style="width: 470px;"><div class="checkskubox pull-left" style="width: 240px;"><div class="input-daterange input-group" zafw-datepacker-range=""><input type="text" class="form-control" name="start" ng-model="timeObj.timeMultiStart"> <span class="input-group-addon">到</span> <input type="text" class="form-control" name="end" ng-model="timeObj.timeMultiEnd"></div></div><div class="checkskubox pull-left" style="width: 140px;"><div class="input-group date"><div class="input-group-btn"><button tabindex="-1" class="btn btn-default" type="button" required="">￥</button></div><input type="number" step="0.01" min="0.01" class="form-control" name="productPrice" ng-model="timeObj.timeMultiPrice"></div></div><span class="btn btn-primary pull-left" ng-click="addTimeFunc()">添加</span></div></div><div class="btn btn-danger floatR mTop21" ng-click="delPrice()">删除价格</div></div></div><div class="form-group" ng-show="isJikuWifi"><label class="col-sm-2 control-label"><span class="colorRed"></span>&nbsp;&nbsp;</label><div class="col-sm-10"><table class="table border18a689"><thead><tr class="bg18a689 colorFFF"><td class="center"></td><td class="center" ng-repeat="w in week" ng-bind="w"></td></tr></thead><tbody><tr><td rowspan="7"><div class="dateprice dateprice-up" ng-mousedown="toPreMonth(dataList)" ng-class="{\'colorGrey_d\':dataList.calendar.hasBeforeToday,\'hoverGrey\':!dataList.calendar.hasBeforeToday}"><i class="icon iconfont icon-arrowup"></i></div><div class="dateprice">{{dataList.calendar.year}}年{{dataList.calendar.month}}月</div><div class="dateprice dateprice-down" ng-mousedown="toNextMonth(dataList)"><i class="icon iconfont icon-arrowdown"></i></div></td></tr><tr ng-repeat="wd in dataList.calendar.dayList"><td class="center borderE7EAEC" ng-repeat="day in wd track by $index" style="position: relative;" ng-class="{\'bgLightGreen\':day.isCheck&&!day.showbtn,\'colorWhite\':day.isCheck&&!day.showbtn,\'width106\':day.showbtn}" ng-mousedown="selectDate(dataList,day)" ng-dblclick="dbClickFunc(day)"><span class="datevalue" ng-if="!day.isTody" ng-bind="day.day" ng-class="{\'colorGrey_d\':day.isBeforeToday()}"></span> <span class="datevalue" ng-if="day.isTody" ng-class="{\'colorGrey_d\':day.isBeforeToday()||isAbleClick(day)}">今天</span> <span ng-if="day!=0&&!day.showbtn" class="price" ng-class="{\'colorGrey_d\':day.isBeforeToday(),\'colorWhite\':day.isCheck}">{{day.price | currency:\'￥\'}}</span> <input type="number" step="0.01" min="0.01" ng-if="day!=0&&day.showbtn" class="price" ng-class="{\'colorGrey_d\':day.isBeforeToday(),\'colorWhite\':day.isCheck&&!day.showbtn}" ng-model="day.price"><div class="update" ng-if="day!=0&&day.showbtn"><div class="savebtn" ng-click="saveBtn(day)">确定</div><div class="cancelbtn" ng-click="cancelBtn(day)">取消</div></div></td></tr></tbody></table><div class="row"><div class="col-xs-6"><span class="colorFF8658">提示：双击可修改单个日期价格</span></div></div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed"></span>总库存</label><div class="col-sm-2"><input type="text" class="form-control" name="productTotalCount" ng-model="productEditorData.totalcount" ng-pattern="/^[0-9]*$/" required="" ng-blur="productTotalCountErr={error:myForm.productTotalCount.$dirty&&myForm.productTotalCount.$invalid,errmsg:\'请填写商品库存\'}" ng-focus="productTotalCountErr={error:null,errmsg:null}"><div class="colorRed marginTp5" ng-show="productTotalCountErr.error">{{productTotalCountErr.errmsg}}</div></div></div><div class="hr-line-dashed"></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed"></span>上下架</label><div class="col-sm-10"><label style="margin-right: 20px;margin-top: 5px;"><input type="radio" checked="checked" value="1" id="sellRadios1" name="sellRadios" ng-model="productEditorData.is_onsale">上架</label> <label><input type="radio" value="0" id="sellRadios2" name="sellRadios" ng-model="productEditorData.is_onsale">下架</label></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed"></span>物流设置</label><div class="col-sm-8"><label><input name="isNoExpress" value="1" type="radio" ng-model="productEditorData.is_no_express">无需物流</label> <label ng-if="productEditorData.is_no_express==1"><input type="checkbox" ng-model="productEditorData.is_need_name_phone">需要填写姓名手机</label> <label><input name="isNoExpress" value="0" type="radio" ng-model="productEditorData.is_no_express">需要物流</label><select class="form-control freighttemplate" name="freighttemplate" ng-model="currentFreightTemplate" ng-options="freightTemplate.freight_template_name for freightTemplate in freightTemplateData" ng-show="productEditorData.is_no_express == 0 || productEditorData.is_no_express == \'0\'"><option value="">包邮</option></select></div></div><div class="form-group"><label class="col-sm-2 control-label">标签</label><div class="col-sm-10"><label ng-repeat="item in tagsData"><input type="checkbox" name="tags" ng-model="item.select" ng-true-value="1" ng-false-value="0">{{item.tag_name}}&nbsp;&nbsp;</label><div class="row"><div class="col-sm-10 col-ms-offset-2"><span class="btn btn-white" ng-click="refeshTagBtn()">刷新</span> <span class="btn btn-primary" ng-click="openTagBox()">添加</span></div></div></div></div><div class="form-group" ng-show="isJikuWifi"><label class="col-sm-2 control-label">关联商品</label><div class="col-sm-10"><span><div class="btn btn-primary" ng-click="selectProBtn()">添加关联商品</div></span> <span><div class="btn btn-danger" ng-click="clearBtn()">清空关联商品</div></span> <span style="line-height:36px;">{{productEditorData.relation_product_id}}</span></div></div><div class="form-group"><label class="col-sm-2 control-label">排序</label><div class="col-sm-2"><input type="text" class="form-control" name="productSummary" placeholder="数字越大越靠前" ng-model="productEditorData.sort"></div></div><div class="hr-line-dashed"></div><div ng-hide="isSonghe" class="form-group"><label class="col-sm-2 control-label">推荐商品</label><div class="col-sm-2"><span class="btn btn-primary" ng-click="openRecommendProduct()">添加</span></div><div class="col-sm-8" ng-if="prods.length"><table class="table table-bordered skutable"><thead><tr><th>商品ID</th><th>商品名称</th><th>商品分类</th><th>操作</th></tr></thead><tbody><tr ng-repeat="item in prods"><td>{{item.product_id}}</td><td>{{item.product_title}}</td><td>{{item.category_name}}</td><td><label class="btn btn-primary" ng-click="delProduct($index)">删除</label></td></tr></tbody></table></div></div><div class="hr-line-dashed"></div><div class="form-group"><label class="col-sm-2 control-label">是否预购商品</label> <input type="radio" id="rdoisappointment0" name="isappointment" ng-model="productEditorData.is_appointment" value="0"> <label for="rdoisappointment0">一般商品 <input type="radio" id="rdoisappointment1" name="isappointment" ng-model="productEditorData.is_appointment" value="1"> <label for="rdoisappointment1">预购商品</label></label></div><div ng-show="productEditorData.is_appointment==1"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span>预购开始时间：</label><div class="col-sm-3"><div class="input-group date"><input type="text" class="form-control" placeholder="预购开始时间" ng-model="productEditorData.appointment_start_time" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span>预购结束时间：</label><div class="col-sm-3"><div class="input-group date"><input type="text" class="form-control" placeholder="预购结束时间" ng-model="productEditorData.appointment_end_time" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span>预购发货时间：</label><div class="col-sm-3"><div class="input-group date"><input type="text" class="form-control" placeholder="预购发货时间：" ng-model="productEditorData.appointment_delivery_time" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div></div><div class="clearBoth"></div></div><div ng-if="vm.productType==\'Houses\'"><div class="form-group"><label class="col-sm-2 control-label">面积</label><div class="col-sm-2"><div class="input-group m-b floatL"><div class="input-group-btn"><button tabindex="-1" class="btn btn-default" type="button" required="">㎡</button></div><input type="text" class="form-control" ng-model="productEditorData.ex1" placeholder="面积"></div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed"></span>上下架</label><div class="col-sm-10"><label for="up" class="upDown"><input type="radio" value="1" checked="checked" name="sellRadios1" id="up" ng-model="productEditorData.is_onsale"> 上架商品</label> &nbsp; <label for="down" class="upDown"><input type="radio" value="0" name="sellRadios2" id="down" ng-model="productEditorData.is_onsale"> 下架商品</label></div></div><div class="form-group"><label class="col-sm-2 control-label">排序</label><div class="col-sm-2"><input type="text" class="form-control" name="productSummary" placeholder="数字越大越靠前" ng-model="productEditorData.sort"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed"></span>省市区</label><div class="col-sm-5"><select class="form-control selectStyle" ng-model="vm.currProvince" ng-options="item.name for item in vm.provinceList" ng-change="vf.getCitys()"></select><select class="form-control selectStyle" ng-model="vm.currCity" ng-change="vf.getDistricts()" ng-options="item.name for item in vm.cityList"></select><select class="form-control selectStyle" ng-model="vm.currDistrict" ng-options="item.name for item in vm.districtList"></select></div></div><div class="form-group"><label class="col-sm-2 control-label">开盘时间</label><div class="col-sm-5"><div class="input-group date"><input type="text" class="form-control" placeholder="开盘时间" ng-model="productEditorData.ex2" zafw-datepacker-time=""></div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed"></span>房型</label><div class="col-sm-3"><select class="form-control m-b" name="account" ng-model="productEditorData.ex18" ng-options="room.value as room.text for room in vm.roomTypes"></select></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed"></span>楼盘分类</label><div class="col-sm-3"><select class="form-control m-b" name="account" ng-model="productEditorData.ex19" ng-options="cate.value as cate.text for cate in vm.cates"></select></div></div><div class="form-group"><label class="col-sm-2 control-label">楼盘类型</label><div class="col-sm-3"><select class="form-control" ng-options="item.value as item.text for item in vm.tBuilds" ng-model="productEditorData.ex3"></select></div></div><div class="form-group"><label class="col-sm-2 control-label">附近学校</label><div class="col-sm-3"><input type="text" class="form-control" placeholder="附近学校" ng-model="productEditorData.ex4"></div></div><div class="form-group"><label class="col-sm-2 control-label">交房时间</label><div class="col-sm-3"><input type="text" class="form-control" placeholder="交房时间" ng-model="productEditorData.ex5"></div></div><div class="form-group"><label class="col-sm-2 control-label">装修情况</label><div class="col-sm-3"><input type="text" class="form-control" placeholder="装修情况" ng-model="productEditorData.ex6"></div></div><div class="form-group"><label class="col-sm-2 control-label">楼盘位置</label><div class="col-sm-3"><input type="text" class="form-control" placeholder="楼盘位置" ng-model="productEditorData.ex17"></div></div><div class="form-group"><label class="col-sm-2 control-label">开发商</label><div class="col-sm-3"><input type="text" class="form-control" placeholder="开发商" ng-model="productEditorData.ex7"></div></div><div class="form-group"><label class="col-sm-2 control-label">物业公司</label><div class="col-sm-3"><input type="text" class="form-control" placeholder="物业公司" ng-model="productEditorData.ex9"></div></div><div class="form-group"><label class="col-sm-2 control-label">建筑类型</label><div class="col-sm-3"><input type="text" class="form-control" placeholder="建筑类型" ng-model="productEditorData.ex10"></div></div><div class="form-group"><label class="col-sm-2 control-label">车位比例</label><div class="col-sm-3"><input type="text" class="form-control" placeholder="车位比例" ng-model="productEditorData.ex11"></div></div><div class="form-group"><label class="col-sm-2 control-label">产权年限</label><div class="col-sm-3"><div class="input-group m-b floatL"><div class="input-group-btn"><button tabindex="-1" class="btn btn-default" type="button" required="">年</button></div><input type="number" class="form-control" placeholder="产权年限" ng-model="productEditorData.ex8"></div></div></div><div class="form-group"><label class="col-sm-2 control-label">规划户数</label><div class="col-sm-3"><div class="input-group m-b floatL"><div class="input-group-btn"><button tabindex="-1" class="btn btn-default" type="button" required="">户</button></div><input type="number" class="form-control" placeholder="规划户数" ng-model="productEditorData.ex12"></div></div></div><div class="form-group"><label class="col-sm-2 control-label">绿化率</label><div class="col-sm-3"><div class="input-group m-b floatL"><div class="input-group-btn"><button tabindex="-1" class="btn btn-default" type="button" required="">%</button></div><input type="number" class="form-control" placeholder="绿化率" ng-model="productEditorData.ex13"></div></div></div><div class="form-group"><label class="col-sm-2 control-label">会员佣金</label><div class="col-sm-3 floatL"><div class="input-group m-b floatL"><div class="input-group-btn"><button tabindex="-1" class="btn btn-default" type="button" required="">￥</button></div><input type="number" class="form-control" placeholder="会员佣金" ng-model="productEditorData.ex14"></div></div></div><div class="form-group"><label class="col-sm-2 control-label">标签</label><div class="col-sm-10"><label ng-repeat="item in tagsData"><input type="checkbox" name="tags" ng-model="item.select" ng-true-value="1" ng-false-value="0">{{item.tag_name}}&nbsp;&nbsp;</label><div class="row"><div class="col-sm-10 col-ms-offset-2"><span class="btn btn-white" ng-click="refeshTagBtn()">刷新</span> <span class="btn btn-primary" ng-show="vm.productType!=\'Houses\'" ng-click="openTagBox()">添加</span></div></div></div></div><div class="form-group"><label class="col-sm-2 control-label">会员优惠</label><div class="col-sm-10"><input type="text" placeholder="会员优惠" class="form-control" ng-model="productEditorData.ex15"></div></div><div class="form-group"><label class="col-sm-2 control-label">非会员优惠</label><div class="col-sm-10"><input type="text" placeholder="非会员优惠" class="form-control" ng-model="productEditorData.ex16"></div></div></div></div></fieldset><fieldset><h2 class="center">商品详情</h2><div class="ibox-content"><div class="tab"><a class="btn btn-default tabChecked" ng-click="UpdateBgColordef()">默认内容</a><div ng-show="vm.productType==\'Course\'" style="display:inline;"><span class="defcontent">|</span><div class="warp-button"><div class="btn btn-white ng-scope" ng-repeat="item in tabArray" ng-class="{tabChecked:item == checkedtab,Gray_9:item != checkedtab}" ng-click="UpdateBgColor(item)"><span class="ng-binding">{{item}}</span> <span class="clearit" ng-click="delTabFrame($index)"><i class="fa fa-times"></i></span></div></div><div class="jiahao" ng-click="showTabFrame()"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-jiahao"></use></svg>添加Tab扩展内容</div><span class="lbTip" data-tip-msg="<b>说明</b><br>1.TAB最多只能添加4个；<br>2.TAB标题长度不能大于5；<br>">?</span></div></div><div class="row"><div class="col-sm-4"><div class="preview-area" ng-bind-html="vm.product_desc_temp"></div></div><div class="col-sm-8"><div id="txtEditor"></div></div></div><div class="hr-line-dashed"></div><div class="clearBoth"></div></div></fieldset><fieldset ng-if="configLength!=0 && !isJikuWifi"><h2 class="center">扩展内容</h2><div class="ibox-content"><div class="col-sm-1"></div><div style="margin-bottom: 36px;"><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th class="center">扩展内容名称</th><th class="center">文章id</th><th class="center">文章标题</th><th class="center">操作</th></tr></thead><tbody><tr class="gradeX" ng-repeat="article in extextList" ng-if="article.isShow"><td class="center"><span>{{article.key}}</span></td><td class="center"><span>{{article.value_id}}</span></td><td class="center"><span ng-if="article.value_id==0">{{article.value_title}}</span> <input ng-if="article.value_id!=0" type="text" class="form-control" placeholder="自定义文章标题" ng-model="article.value_title"></td><td class="center"><div class="btn btn-primary" ng-click="showArticleFrame($index)">选择文章</div><div class="btn btn-danger" style="margin-left: 10px;" ng-click="clearArticle($index)" ng-if="article.value_id!=0">清除内容</div><div class="btn btn-primary" style="margin-left: 10px;" ng-click="openProductView(article.value_id)" ng-if="article.value_id!=0">预览文章</div></td></tr></tbody></table></div></div></fieldset><div class="wrapOperate"><label for="submitbtn" class="btn btn-primary btn-lg">保存</label> <input type="submit" class="hidesubmitbtn" id="submitbtn"></div><div class="clearBoth"></div></form></div></div></div></div><div class="modal inmodal" id="dealModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>选择附加商品</h4></div><div class="modal-body modalBody"><div class="row"><div class="col-sm-6"><div class="dataTables_length" id="editable_length"><label><select class="form-control" ng-model="categoryP" ng-options="categoryP.category_name for categoryP in categorys" ng-change="whichcateP(categoryP)"></select></label></div></div><div class="col-sm-6"><div id="editable_filter" class="dataTables_filter floatR">搜索: <label><input type="search" class="form-control input-sm" placeholder="输入您要搜索的商品" aria-controls="editable" ng-model="keywordP" ng-keyup="ctrlsearchP($event)"></label></div></div></div><table class="table table-striped table-bordered table-hover dataTables-example dataTable dtr-inline" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info"><thead><tr role="row"><th class="sorting_asc" tabindex="0" rowspan="1" colspan="1" style="width: 144px;">名称</th><th class="sorting_asc" tabindex="0" rowspan="1" colspan="1" style="width: 144px;">ID</th><th class="sorting_asc" tabindex="0" rowspan="1" colspan="1" style="width: 105px;">价格</th><th class="sorting_asc" tabindex="0" style="width: 134px;">创建时期</th></tr></thead><tbody><tr ng-repeat="product in productlistdatas" ng-click="selectMeBtn(product)" style="cursor:pointer;"><td>{{product.product_title}}</td><td>{{product.product_id}}</td><td>{{product.price}}</td><td>{{product.create_time | date:\'yyyy年MM月dd日\'}}</td></tr></tbody></table></div><div class="modal-footer center"><div class="col-sm-4"><div class="dataTables_info" id="DataTables_Table_0_info" role="status" aria-live="polite" style="display: inline-block;padding-left: 0;margin: 20px 0;">第{{currentPage}}页 每页 {{pagesize}} 总共 {{pageindexs}} 页</div></div><div class="col-sm-8"><div class="dataTables_paginate paging_simple_numbers" id="DataTables_Table_0_paginate" style="margin: 0;float: right;"><pagination boundary-links="true" total-items="totalItems" ng-model="currentPage" class="pagination-sm" items-per-page="pagesize" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" max-size="6"></pagination></div></div></div></div></div><div class="hidden" id="mixBluCnt"><div class="product-instruction"><div class="font14 margin-tp20 margin-bt20 floatL">尺码说明</div><div class="iconfont icon-jiahao black font20 margin-tp20 margin-bt20 floatR instructBtn nonohou"></div><div class="clear-both"></div><table class="instructTxt nonoqian"><tr><td></td><td>S<br>160/64A</td><td>M<br>165/68A</td><td>L<br>170/72A</td><td>XL<br>175/76A</td></tr><tr><td>衣长</td><td>88</td><td>88</td><td>88</td><td>88</td></tr><tr><td>肩宽</td><td>44</td><td>44</td><td>44</td><td>44</td></tr><tr><td>胸围</td><td>102</td><td>102</td><td>102</td><td>102</td></tr><tr><td>腰围</td><td>79</td><td>79</td><td>79</td><td>79</td></tr><tr><td>下摆</td><td>25</td><td>25</td><td>25</td><td>25</td></tr></table></div><div class="product-instruction"><div class="font14 margin-tp20 margin-bt20 floatL">成份</div><div class="iconfont icon-jiahao black font20 margin-tp20 margin-bt20 floatR instructBtn nonohou"></div><div class="clear-both"></div><div class="gray78 font14 instructTxt nonoqian"><div>●<span class="text-indent5">面料：100%聚酯纤维</span></div><div>●辅料：100%聚酯纤维</div><div>●辅料里料：20%棉 80%氨纶</div></div></div><div class="product-instruction"><div class="font14 margin-tp20 margin-bt20 floatL">卖点描述</div><div class="iconfont icon-jiahao black font20 margin-tp20 margin-bt20 floatR instructBtn nonohou"></div><div class="clear-both"></div><div class="gray78 font14 instructTxt nonoqian"><div>●可爱的蝴蝶结修饰</div><div>●精心设计的荷叶边装饰</div><div>●轻柔的面料，精湛的车工工艺</div><div>●全3D立体剪裁</div><div>●高档五金件电镀放掉色处理</div></div></div><div class="product-instruction border-bt"><div class="font14 margin-tp20 margin-bt20 floatL">洗涤建议</div><div class="iconfont icon-jiahao black font20 margin-tp20 margin-bt20 floatR instructBtn nonohou"></div><div class="clear-both"></div><div class="gray78 font14 instructTxt nonoqian wash-img"><div>●机洗，最高温度30C，短时甩干</div><div>●请勿漂白</div><div>●最高熨烫温度110C</div><div>●全氯乙烯手工干洗</div><div>●请勿用机器甩干</div></div></div></div></div><div class="modal inmodal" id="pddealModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>选择扩展文章</h4></div><div class="modal-body modalBody"><div class="row"><div class="col-sm-6"><div class="dataTables_length" id="editable_length"><label><select class="form-control" ng-model="articleCategory" ng-options="articleCategory.category_name for articleCategory in articleCategorys" ng-change="whichArticleCategory(articleCategory)"></select></label></div></div><div class="col-sm-6"><div id="editable_filter" class="dataTables_filter floatR">搜索: <label><input type="search" class="form-control input-sm" placeholder="输入您要搜索的文章标题" aria-controls="editable" ng-model="articleKeyWord" ng-keyup="articleCtrlSearch($event)"></label></div></div></div><table class="table table-striped table-bordered table-hover dataTables-example dataTable dtr-inline" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info"><thead><tr role="row"><th class="sorting_asc" tabindex="0" rowspan="1" colspan="1" style="width: 144px;">文章id</th><th class="sorting_asc" tabindex="0" rowspan="1" colspan="1" style="width: 105px;">标题</th><th class="sorting_asc" tabindex="0" rowspan="1" colspan="1" style="width: 144px;">分类</th></tr></thead><tbody><tr ng-repeat="product in articleList" ng-click="closeArticleFrame(product)" style="cursor:pointer;"><td>{{product.article_id}}</td><td>{{product.article_name}}</td><td>{{product.category_name}}</td></tr></tbody></table></div><div class="modal-footer center"><div class="col-sm-4"><div class="dataTables_info" id="DataTables_Table_0_info" role="status" aria-live="polite" style="display: inline-block;padding-left: 0;margin: 20px 0;">第{{articleCurrPage}}页 每页 {{articlePageSize}} 总共 {{totalItems}} 页</div></div><div class="col-sm-8"><div class="dataTables_paginate paging_simple_numbers" id="DataTables_Table_0_paginate" style="margin: 0;float: right;"><pagination boundary-links="true" total-items="totalItems" ng-model="articleCurrPage" class="pagination-sm" items-per-page="articlePageSize" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="articlePageChanged()" max-size="6"></pagination></div></div></div></div></div></div><div class="modal inmodal" id="productViewModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>文章预览</h4></div><div class="modal-body modalBody"><div class="row"><div class="col-sm-12"><div class="article-preview" ng-bind-html="articleInfo.article_context"></div></div></div></div></div></div></div><div class="modal inmodal" id="jikuDefDetail" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="productContent"><div>&nbsp;</div><div style="font-size:1.2em;font-weight:bold; border-bottom:solid 1px #FFA700;line-height:1.3em;padding:0.5em;">预订须知</div><div style="display:table;padding:1em 0 0 0;"><div style="display:table-cell; border-right:solid 1px #FFA700;padding:0 0.5em;font-size:1.1em; width:5em;">产品说明</div><div style="display:table-cell; padding:0 0.5em 0 2em;font-size:0.9em;"><ul style="list-style:decimal; padding:0px;"><li style="list-style:decimal;">设备为4G设备，根据当地网络自动切换2G、3G、4G信号。</li><li style="list-style:decimal;">设备无限流量。</li><li style="list-style:decimal;">短时间内使用过大流量可能被当地运营商降速。</li></ul></div></div><div style="display:table;padding:1em 0 0 0;"><div style="display:table-cell; border-right:solid 1px #FFA700;padding:0 0.5em;font-size:1.1em; width:5em;">预订须知</div><div style="display:table-cell; padding:0 0.5em 0 2em;font-size:0.9em;"><ul style="list-style:decimal; padding:0px;"><li style="list-style:decimal;">自提需要提前1-2天预订。<br>快递需要提前3-4天预订。</li><li style="list-style:decimal;">快递：设备会在出国前1-2天收到。</li><li style="list-style:decimal;">自取：设备只能在您租赁取件日期当天自取（如提前自取需多付提前天数*租金）</li></ul></div></div><div style="display:table;padding:1em 0 0 0;"><div style="display:table-cell; border-right:solid 1px #FFA700;padding:0 0.5em;font-size:1.1em; width:5em;">费用说明</div><div style="display:table-cell; padding:0 0.5em 0 2em;font-size:0.9em;"><ul style="list-style:decimal; padding:0px;"><li style="list-style:decimal;">自取方式费用=单价*天数*台数+押金。</li><li style="list-style:decimal;">邮寄方式费用=单价*天数*台数+押金。</li><li style="list-style:decimal;">快递归还设备需买家承担寄回运费。</li></ul></div></div><div style="display:table;padding:1em 0 0 0;"><div style="display:table-cell; border-right:solid 1px #FFA700;padding:0 0.5em;font-size:1.1em; width:5em;">押金退还</div><div style="display:table-cell; padding:0 0.5em 0 0.8em;font-size:0.9em;"><ul style="list-style:none; padding:0px;"><li style="list-style:none;">在租赁到期后24小时内寄还设备，（以快递公司系统收件为准。）我们将在收到设备检测无误后四天内退还押金到您的支付账户内。</li></ul></div></div><div style="padding:1em 0 0 0;"></div></div></div></div></div><div class="modal inmodal" id="tabViewModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>添加TAB</h4></div><div class="modal-body modalBody"><div class="row" style="margin-top: 60px;"><div class="col-sm-4" style="text-align: right; padding-top: 10px;">TAB标题</div><div class="col-sm-4"><input type="text" ng-model="tabTitleName" class="form-control" maxlength="5"></div><div class="col-sm-4"></div></div></div><div class="modal-footer center"><button class="btn btn-primary" ng-click="btnConfirm()">确定</button> <button class="btn btn-default" ng-click="btnCencel()">取消</button></div></div></div></div><div class="modal inmodal" id="recommendProductModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>商品列表</h4></div><div class="modal-body modalBody"><div class="row"><div class="col-sm-6"><div class="dataTables_length" id="editable_length"><label><select class="form-control" ng-model="categoryP" ng-options="categoryP.category_name for categoryP in categorys" ng-change="whichcateP(categoryP)"></select></label></div></div><div class="col-sm-6"><div id="editable_filter" class="dataTables_filter floatR">搜索: <label><input type="search" class="form-control input-sm" placeholder="输入您要搜索的商品" aria-controls="editable" ng-model="keywordP" ng-keyup="ctrlsearchP($event)"></label></div></div></div><table class="table table-striped table-bordered table-hover dataTables-example dataTable dtr-inline" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info"><thead><tr role="row"><th style="width: 30px;" class="center"><input class="input-mini" ng-checked="selectedall" ng-click="checkedall()" type="checkbox"></th><th class="sorting_asc" tabindex="0" rowspan="1" colspan="1" style="width: 144px;">商品ID</th><th class="sorting_asc" tabindex="0" rowspan="1" colspan="1" style="width: 105px;">商品名称</th><th class="sorting_asc" tabindex="0" rowspan="1" colspan="1" style="width: 105px;">商品分类</th></tr></thead><tbody><tr ng-repeat="product in productlistdatas"><td ng-click="selectme(product)" class="center"><input class="input-mini" ng-checked="product.selected" value="checked" type="checkbox"></td><td>{{product.product_id}}</td><td>{{product.product_title}}</td><td>{{product.category_name}}</td></tr></tbody></table></div><div class="modal-footer center"><div class="col-sm-4"><div class="dataTables_info" id="DataTables_Table_0_info" role="status" aria-live="polite" style="display: inline-block;padding-left: 0;margin: 20px 0;">第{{currentPage}}页 每页 {{pagesize}} 总共 {{pageindexs}} 页</div></div><div class="col-sm-8"><div class="dataTables_paginate paging_simple_numbers" id="DataTables_Table_0_paginate" style="margin: 0;float: right;"><pagination boundary-links="true" total-items="totalItems" ng-model="currentPage" class="pagination-sm" items-per-page="pagesize" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" max-size="6"></pagination></div></div></div></div></div></div>'),
e.put("app/product/productList/productList.html",'<div class="wrapProductList"><div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>商品列表</h2><ol class="breadcrumb"><li><a>商城</a></li><li><a>商品</a></li><li class="active"><strong>商品列表</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>{{vm.TitleName}}</h5></div><div class="ibox-content"><div ng-show="!vm.isOnlyUpdateStock"><a ng-click="vf.addProduct()" class="btn btn-primary">添加</a> <a class="btn btn-danger" ng-click="vf.delallproductBtn()">批量删除</a> <a class="btn btn-success" ng-click="vf.pushUpBtn()">批量上架</a> <a class="btn btn-success" ng-click="vf.pullDownBtn()">批量下架</a> <a ng-if="!vm.isJikuWifi&&vm.product_type!=\'Houses\'" class="btn btn-success" ng-click="vf.setAccessBtn()">批量设置访问级别</a> <a class="btn btn-success" ng-show="vm.product_type!=\'Houses\'" ng-click="vf.setCategoryBtn()">批量设置分类</a> <a class="btn btn-success" ng-show="vm.product_type!=\'Houses\'" ng-click="vf.setTagBtn()">批量设置标签</a> <a class="btn btn-success" ng-click="vf.setSortBtn()">批量设置排序</a> <span ng-show="vm.product_type!=\'Houses\'"><a ng-if="vm.isShowBuyTime" class="btn btn-success" ng-click="vf.setProductBuyTimeBtn(2,2)">设置关闭购买日期</a> <a class="btn btn-success" ng-click="vf.setFreightTemplateBtn()">批量设置运费模板</a> <a ng-show="vm.isShowSupplier" class="btn btn-success" ng-click="vf.setSupplierUserBtn()">批量设置供应商</a></span></div><div class="row"><div class="col-sm-9"><div class="dataTables_length" id="editable_length"><label ng-show="vm.product_type!=\'Houses\'"><select class="form-control" ng-model="vm.category" ng-options="category.category_name for category in vm.categorys" ng-change="vf.changeSelectCate()"></select></label> <label ng-show="vm.product_type==\'Houses\'"><select class="form-control" ng-model="vm.roomValue" ng-options="cate.text for cate in vm.cates" ng-change="vf.changeRoomType()"></select></label> &nbsp; <a ng-if="vm.product_type!=\'Houses\'" class="selected export" ng-click="vf.showExportProduct()" style="padding: 7px 20px;border: 1px solid #ccc;cursor: pointer;">导出商品</a><span ng-show="vm.product_type!=\'Houses\'">&nbsp; <label><input type="radio" value="1" name="ison1" ng-model="vm.is_onsale" ng-click="vf.whichStatuBtn(vm.is_onsale)"> 上架商品</label> &nbsp; <label><input type="radio" value="0" name="ison1" ng-model="vm.is_onsale" ng-click="vf.whichStatuBtn(vm.is_onsale)"> 下架商品</label> &nbsp; <label ng-if="!vm.isJikuWifi&&vm.hasGroupRight"><input type="checkbox" ng-model="vm.is_group_buy" ng-click="vf.isGroupBuyCheck()"> 参与团购的商品</label> <label><input type="checkbox" ng-model="vm.is_appointment" ng-click="vf.isAppointmentCheck()"> 预购的商品</label> <label><input type="checkbox" ng-model="vm.is_threshold" ng-click="vf.isThresholdCheck()"> 库存告急商品</label></span> <span ng-show="vm.product_type==\'Houses\'">&nbsp; <label for="up"><input type="radio" value="1" name="ison" id="up" ng-model="vm.is_onsale" ng-click="vf.whichStatuBtn(vm.is_onsale)" checked=""> 上架楼盘</label> &nbsp; <label for="down"><input type="radio" value="0" name="ison" id="down" ng-model="vm.is_onsale" ng-click="vf.whichStatuBtn(vm.is_onsale)"> 下架楼盘</label></span></div></div><div class="col-sm-3"><div id="editable_filter" class="dataTables_filter floatR"><label><input type="search" class="form-control input-sm" placeholder="{{vm.keywordMsg}}" aria-controls="editable" ng-model="vm.prokeyword" ng-keyup="vf.ctrlsearch($event)"></label><svg class="icon iconfont btnSearch" aria-hidden="true" ng-click="vf.search()"><use xlink:href="#icon-sousuo"></use></svg></div></div></div><table ng-if="vm.product_type!=\'Houses\'" class="table table-striped table-bordered table-hover table-responsive" id="editable"><thead><tr><th class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="selectedall" ng-click="checkedall()"></th><th class="center" style="width: 6%;">商品ID</th><th class="center" style="width: 5%;">编码</th><th class="center">商品(点击标题显示二维码)</th><th ng-if="!vm.isJikuWifi&&vm.hasGroupRight" class="center" style="width: 8%;">参与的团</th><th class="center" style="width: 8%;">价格</th><th ng-if="vm.isShowPv" class="center" style="width: 6%;"><a ng-click="vf.sortByPv()">IP/PV <span class="sortDesc" ng-if="vm.sort==\'pv\'">↓</span></a></th><th ng-if="vm.isShowPv" class="center" style="width: 8%;"><a ng-click="vf.sortByWxRead()">微信阅读<br>人数 <span class="sortDesc" ng-if="vm.sort==\'uv_desc\'">↓</span></a></th><th class="center" style="width: 5%;">评价</th><th class="center" style="width: 5%;"><a ng-click="vf.sortBySaleCount()">销量 <span class="sortDesc" ng-if="vm.sort==\'sales_valume\'">↓</span> <span class="sortDesc" ng-if="vm.sort==\'sales_asc\'">↑</span></a></th><th class="center" style="width: 5%;">库存</th><th ng-if="!isSonghe" class="center" style="width:5%;"><a>缺货登记</a></th><th class="center" style="width: 5%;">分类</th><th ng-if="!vm.isJikuWifi" class="center" style="width: 5%;">访问级别</th><th class="center">标签</th><th ng-if="vm.isShowBuyTime" class="center" style="width: 10%;">关闭购买日期</th><th>排序</th><th class="center" style="width: 50px;">操作</th></tr></thead><tbody><tr class="gradeX" ng-repeat="boxdata in vm.prodcutsdatas track by boxdata.product_id"><td ng-click="selectme(boxdata)"><input type="checkbox" value="checked" class="input-mini" ng-checked="boxdata.selected"></td><td ng-bind="boxdata.product_id"></td><td style="word-wrap: break-word; word-break: break-all;white-space: normal;" ng-bind="boxdata.product_code"></td><td style="cursor: pointer;" ng-click="vf.createQcodeBtn(boxdata)"><img ng-src="{{boxdata.img_url}}" alt="" style="width:60px;height:60px;margin-right:5px; float:left;"> <span ng-bind="boxdata.product_title"></span> <span style="font-weight:bold;" ng-if="boxdata.supplier_name!=\'\'">[{{boxdata.supplier_name}}]</span></td><td ng-if="!vm.isJikuWifi&&vm.hasGroupRight" class="center"><ul><li ng-repeat="group_buy in boxdata.group_buy_rule_list" ng-bind="group_buy.rule_name"></li></ul></td><td><span ng-bind="boxdata.price"></span><span>元</span><br><span ng-show="boxdata.score">+<span ng-bind="boxdata.score"></span>积分</span></td><td ng-if="vm.isShowPv" class="center"><a ng-click="vf.goToMonitor(boxdata.product_id,boxdata.pv)" style="cursor: pointer;">{{boxdata.ip}}/{{boxdata.pv}}</a></td><td ng-if="vm.isShowPv" class="center"><a ng-click="vf.goToMonitor(boxdata.product_id,\'uv\')" style="cursor: pointer;">{{boxdata.uv}}</a></td><td class="center"><a href="/Admin/Review/ReviewList.aspx?ActId={{boxdata.product_id}}&Pfolder=OrderComment&type=OrderComment" ng-if="boxdata.review_count">{{boxdata.review_count}}</a> <span ng-if="!boxdata.review_count">0</span></td><td class="center" ng-bind="boxdata.sale_count"></td><td class="center" ng-bind="boxdata.totalcount"></td><td class="center" ng-if="!isSonghe"><a ng-click="vf.toHrefStock(boxdata)">{{boxdata.record_product_count}}</a></td><td class="center">{{boxdata.category_name}}</td><td ng-if="!vm.isJikuWifi" class="center">{{boxdata.access_level}}</td><td class="center"><span ng-if="boxdata.tags!=\'\'" ng-repeat="item in boxdata.tags.split(\',\') | limitTo: 2 track by $index">{{item}},<br></span> <span ng-if="boxdata.tags.split(\',\').length>2" style="color: #337ab7;cursor: pointer;" ng-click="vf.showModelBtn(boxdata.tags,\'标签\')">显示更多</span></td><td ng-if="vm.isShowBuyTime" class="center"><span ng-repeat="item in boxdata.limit_buy_time.split(\',\') | limitTo: 2 track by $index">{{item}},<br></span><span ng-if="boxdata.limit_buy_time.split(\',\').length>0" style="color: #337ab7;cursor: pointer;" ng-click="vf.setProductBuyTimeBtn(1,boxdata)">编辑</span></td><td><input style="width: 45px;margin-bottom: 5px;" ng-model="boxdata.sort"> <button ng-show="!vm.isOnlyUpdateStock" class="btn btn-white btn-sm" ng-click="vf.updateProductField(boxdata.product_id,\'sort\',boxdata.sort)">保存</button></td><td class="center"><button class="btn btn-primary btn-sm" ng-click="vf.editProduct(boxdata.product_id)">编辑</button> <button ng-show="!vm.isOnlyUpdateStock" class="btn btn-danger btn-sm" ng-click="vf.delproductBtn(boxdata)">删除</button> <button ng-show="!vm.isOnlyUpdateStock" ng-if="!vm.isJikuWifi&&vm.hasGroupRight&&vm.isCourse&&vm.is_open_group" class="btn btn-primary btn-sm" ng-click="vf.showGroupBuyModal(boxdata,\'0\')">用户团</button> <button ng-show="!vm.isOnlyUpdateStock" ng-if="!vm.isJikuWifi&&vm.isCourse&&!isSonghe" class="btn btn-primary btn-sm" ng-click="vf.showGroupBuyModal(boxdata,\'1\')">系统团</button></td></tr></tbody></table><table ng-if="vm.product_type==\'Houses\'" class="table table-striped table-bordered table-hover table-responsive" id="editable"><thead><tr><th class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="selectedall" ng-click="checkedall()"></th><th class="center" style="width: 6%;">楼盘ID</th><th class="center">楼盘标题(点击标题显示二维码)</th><th class="center" style="width: 10%;">地区</th><th class="center" style="width: 6%;">价格</th><th ng-if="vm.isShowPv" class="center" style="width: 6%;"><a ng-click="vf.sortByPv()">IP/PV <span class="sortDesc" ng-if="vm.sort==\'pv\'">↓</span></a></th><th ng-if="vm.isShowPv" class="center" style="width: 7%;"><a ng-click="vf.sortByWxRead()">微信阅读<br>人数 <span class="sortDesc" ng-if="vm.sort==\'uv_desc\'">↓</span></a></th><th class="center" style="width: 8%;">创建时间</th><th class="center" style="width: 5%;">分类</th><th class="center">标签</th><th>排序</th><th class="center" style="width: 50px;">操作</th></tr></thead><tbody><tr class="gradeX" ng-repeat="boxdata in vm.prodcutsdatas track by boxdata.product_id"><td ng-click="selectme(boxdata)"><input type="checkbox" value="checked" class="input-mini" ng-checked="boxdata.selected"></td><td ng-bind="boxdata.product_id"></td><td style="cursor: pointer;" ng-click="vf.createQcodeBtn(boxdata)"><img ng-src="{{boxdata.img_url}}" alt="" style="width:60px;height:60px;margin-right:5px; float:left;"> <span ng-bind="boxdata.product_title"></span> <span style="font-weight:bold;" ng-if="boxdata.supplier_name!=\'\'">[{{boxdata.supplier_name}}]</span></td><td style="word-wrap: break-word; word-break: break-all;white-space: normal;"><span ng-show="boxdata.province">{{boxdata.province}}&nbsp;-&nbsp;{{boxdata.city}}</span></td><td><span ng-bind="boxdata.price"></span><span>元</span><br><span ng-show="boxdata.score">+<span ng-bind="boxdata.score"></span>积分</span></td><td ng-if="vm.isShowPv" class="center"><a ng-click="vf.goToMonitor(boxdata.product_id,boxdata.pv)" style="cursor: pointer;">{{boxdata.ip}}/{{boxdata.pv}}</a></td><td ng-if="vm.isShowPv" class="center"><a ng-click="vf.goToMonitor(boxdata.product_id,\'uv\')" style="cursor: pointer;">{{boxdata.uv}}</a></td><td class="center">{{boxdata.create_time | date:\'yyyy-MM-dd HH:mm\'}}</td><td class="center"><span ng-show="boxdata.ex19==\'NewHouse\'">新房</span> <span ng-show="boxdata.ex19==\'SecondHandHouse\'">二手房</span></td><td class="center"><span ng-if="boxdata.tags!=\'\'" ng-repeat="item in boxdata.tags.split(\',\') | limitTo: 2 track by $index">{{item}},<br></span> <span ng-if="boxdata.tags.split(\',\').length>2" style="color: #337ab7;cursor: pointer;" ng-click="vf.showModelBtn(boxdata.tags,\'标签\')">显示更多</span></td><td><input style="width: 45px;margin-bottom: 5px;" ng-model="boxdata.sort"> <button ng-show="!vm.isOnlyUpdateStock" class="btn btn-white btn-sm" ng-click="vf.updateProductField(boxdata.product_id,\'sort\',boxdata.sort)">保存</button></td><td class="center"><button class="btn btn-primary btn-sm" ng-click="vf.editProduct(boxdata.product_id)">编辑</button> <button ng-show="!vm.isOnlyUpdateStock" class="btn btn-danger btn-sm" ng-click="vf.delproductBtn(boxdata)">删除</button></td></tr></tbody></table><div class="row"><div class="col-sm-6"><label><select class="form-control" ng-model="vm.pagesize" ng-change="vf.selectValue()" ng-options="size for size in vm.pagesizes"></select></label>显示 {{1+vm.pagesize*vm.currentPage-vm.pagesize}} - {{vm.pagesize*vm.currentPage}} 总计{{vm.totals}}个</div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="vm.totals" items-per-page="vm.pagesize" max-size="6" ng-model="vm.currentPage" class="pagination-sm" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="vf.pageChanged()" style="float:right;"></pagination></div></div></div></div></div></div></div></div><div class="modal inmodal" id="setGroupRuleModal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>参团设置</h4></div><form ng-submit="vf.submitSetGroupBuyRule()"><div class="modal-body modalBody"><table class="table table-striped table-bordered table-hover"><thead><tr><th class="center" ng-show="vm.isRadio"><input type="checkbox" class="input-mini" ng-model="vm.groupBuyRuleCheckedAll"></th><th class="center" ng-show="!vm.isRadio"></th><th class="center">ID</th><th class="center">规则名称</th><th class="center">拼团人数</th><th class="center">团长折扣</th><th class="center">团员折扣</th><th class="center">过期天数</th></tr></thead><tbody><tr class="gradeX" ng-repeat="item in vm.groupBuyDataList"><td ng-show="vm.isRadio" ng-click="item.selected = !item.selected" class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="item.selected"></td><td ng-click="vf.ruleRadio(item)" ng-show="!vm.isRadio" class="center"><input type="radio" ng-checked="item.selected" class="input-mini" name="rule" value="checked"></td><td class="center">{{item.rule_id}}</td><td class="center">{{item.rule_name}}</td><td class="center">{{item.people_count}}人</td><td class="center">{{item.head_discount}}折</td><td class="center">{{item.member_discount}}折</td><td class="center">{{item.expire_day}}天</td></tr></tbody></table></div><div class="modal-footer center"><button class="btn btn-primary" type="submit">确定</button> <button class="btn btn-while" type="button" ng-click="vf.hideGroupBuyModal()">取消</button> <a href="#/index/groupBuyRuleList">没有找到规则？去新增</a></div></form></div></div></div><div class="modal inmodal" id="setAccessModal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>批量设置商品访问级别</h4></div><form ng-submit="vf.setAccessLevel()"><div class="modal-body modalBody" style="padding-top: 40px;min-height: 150px;"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed"></span> 访问级别：</label><div class="col-sm-8"><input type="text" class="form-control" name="productTitle" placeholder="访问级别" ng-model="vm.access_level" ng-minlength="1" ng-maxlength="100" step="0" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}"></div></div><div class="form-group" style="padding-top: 30px;"><label class="col-sm-2 control-label">设置模式：</label><div class="col-sm-10"><label><input type="radio" checked="checked" value="1" id="limitRadio0" name="limitRadio" ng-model="vm.limit_type">按勾选</label> <label><input type="radio" value="2" id="limitRadio1" name="limitRadio" ng-model="vm.limit_type">按分类</label></div></div><div class="form-group" style="padding-top: 30px;" ng-if="vm.limit_type==\'2\'"><label class="col-sm-2 control-label"></label><div class="col-sm-10"><label><select class="form-control" ng-model="vm.choicecategory" ng-options="choicecategory.category_name for choicecategory in vm.choicecategorys"></select></label></div></div></div><div class="modal-footer center"><button class="btn btn-primary" type="submit">确定</button> <button class="btn btn-while" type="button" ng-click="vf.hideAccessModal()">取消</button></div></form></div></div></div><div class="modal inmodal" id="setCategoryModal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>批量设置分类</h4></div><form ng-submit="vf.updateProductField(ids,\'category_id\',vm.choicecategory.category_id)"><div class="modal-body modalBody" style="padding-top: 40px;min-height: 150px;"><div class="form-group" style="padding-top: 30px;"><label class="col-sm-2 control-label">选择分类：</label><div class="col-sm-10"><label><select class="form-control" ng-model="vm.choicecategory" ng-options="choicecategory.category_name for choicecategory in vm.choicecategorys"></select></label></div></div></div><div class="modal-footer center"><button class="btn btn-primary" type="submit">确定</button> <button class="btn btn-while" type="button" ng-click="vf.hideCategoryModal()">取消</button></div></form></div></div></div><div class="modal bs-example-modal-sm" id="qCodeModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-sm"><div class="modal-content"><div class="modal-header center modalHeader"><h4>用微信扫描二维码</h4></div><div class="modal-body"><img ng-src="{{vm.qcodedata.qcode}}" alt="" style="width:242px;height:242px;margin:0 auto;"><br><a style="word-wrap : break-word;" ng-href="{{vm.qcodedata.url}}" target="_blank" title="点击查看">{{vm.qcodedata.url}}</a></div></div></div></div><div class="modal inmodal" id="setProductBuyTimeModal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>设置关闭购买日期</h4></div><form><div class="modal-body modalBody" style="padding-top: 40px;overflow-y: auto;"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed"></span>设置关闭购买日期：</label><div class="col-sm-10"><label style="margin-right: 20px;margin-top: 5px;"><input type="radio" checked="checked" value="1" name="timeRadios" ng-model="vm.currTimeType">按指定时间</label> <label><input type="radio" value="0" name="timeRadios" ng-model="vm.currTimeType">按指定时间段</label><br><div class="inlinebox marginTp10" ng-if="vm.currTimeType==1"><div class="addskubox" style="width: 220px;"><div class="checkskubox pull-left" style="width: 140px;"><div class="input-group date"><input type="text" class="form-control" zafw-datepacker="" ng-model="vm.timeObj.singleTime"> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div><span class="btn btn-primary pull-left" ng-click="vf.addTimeFunc()">添加</span></div></div><div class="inlinebox marginTp10" ng-if="vm.currTimeType==0"><div class="addskubox" style="width: 320px;"><div class="checkskubox pull-left" style="width: 240px;"><div class="input-daterange input-group" zafw-datepacker-range=""><input type="text" class="form-control" name="start" ng-model="vm.timeObj.timeMultiStart"> <span class="input-group-addon">到</span> <input type="text" class="form-control" name="end" ng-model="vm.timeObj.timeMultiEnd"></div></div><span class="btn btn-primary pull-left" ng-click="vf.addTimeFunc()">添加</span></div></div><div class="btn btn-danger floatR mTop21" ng-click="vf.delMultiTime()">批量删除</div></div></div><div class="form-group"><label class="col-sm-2 control-label" style="margin-top: 15px;"><span class="colorRed"></span>&nbsp;&nbsp;</label><div class="col-sm-10" style="margin-top: 15px;"><table class="table table-bordered"><thead><tr class="bg18a689" style="display: block;"><td class="center" style="width: 100px;"><input type="checkbox" class="input-mini" ng-model="vm.closeTimeSelectAll"></td><td class="center" style="width: 200px;">选中时间</td><td class="center" style="width: 200px;">操作</td></tr></thead><tbody style="overflow: auto;width:500px;height: 300px;display: block;"><tr ng-repeat="item in vm.timeList"><td class="center" ng-click="item.selected=!item.selected" style="width: 100px;"><input type="checkbox" class="input-mini" value="checked" ng-checked="item.selected"></td><td class="center" ng-bind="item.date" style="width: 200px;"></td><td class="center" ng-click="vf.delSingleTime($index)" style="width: 200px;"><a class="btn btn-danger btn-small">删除</a></td></tr></tbody></table></div></div></div><div class="modal-footer center"><button class="btn btn-primary" type="button" ng-click="vf.setProductBuyTime()">确定</button> <button class="btn btn-while" type="button" ng-click="vf.hideBuyTimeModal()">取消</button></div></form></div></div></div><div class="modal inmodal" id="showModal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>该商品{{vm.typeTitle}}</h4></div><form><div class="modal-body modalBody" style="padding-top: 40px;"><div class="form-group" style="padding-top: 30px;"><div class="col-sm-12"><div class="checksku" style="border: 0px solid #e5e6e7;padding: 0px;"><div class="col-sm-10 skuvaluebox"><div class="btn btn-white" ng-repeat="item in vm.showData track by $index"><span>{{item}}</span></div></div></div></div></div></div></form></div></div></div><div class="modal inmodal" id="setTagModal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>批量设置标签</h4></div><form ng-submit="vf.setTags()"><div class="modal-body modalBody" style="padding-top: 40px;min-height: 150px;"><div class="form-group row"><label class="col-sm-2 control-label">操作类型:</label><div class="col-sm-10"><input type="radio" name="tagRadio" value="0" ng-model="vm.tag_type" checked="checked" class="positionTop2" id="addTag">&nbsp;<label for="addTag">增加标签</label>&nbsp; <input type="radio" name="tagRadio" value="1" ng-model="vm.tag_type" class="positionTop2" id="jsTag">&nbsp;<label for="jsTag">减少标签</label>&nbsp; <input type="radio" name="tagRadio" value="2" ng-model="vm.tag_type" class="positionTop2" id="deleteTag">&nbsp;<label for="deleteTag">覆盖标签</label></div></div><div class="form-group row" style="padding-top: 10px;"><label class="col-sm-2 control-label"><span class=""></span> 标签名称：</label><div class="col-sm-10"><div class="checksku" style="border: 0px solid #e5e6e7;padding: 0px;"><div class="skuvaluebox"><div class="btn btn-white" ng-class="{\'bgGrey\':item.selected}" style="margin-top: 10px;" ng-repeat="item in vm.tagsData track by $index"><span ng-click="vf.selectTag(item)">{{item.tag_name}}</span></div></div></div></div></div></div><div class="modal-footer center"><button class="btn btn-primary" type="submit">确定</button> <button class="btn btn-while" type="button" ng-click="vf.hideTagModal()">取消</button></div></form></div></div></div><div class="modal inmodal" id="setSortModal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>批量设置排序</h4></div><form ng-submit="vf.batchSort()"><div class="modal-body modalBody" style="padding-top: 40px;min-height: 150px;"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed"></span> 排序：</label><div class="col-sm-8"><input type="text" class="form-control" name="productTitle" placeholder="排序" ng-model="vm.sort" ng-minlength="1" ng-maxlength="100" step="0" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}"></div></div></div><div class="modal-footer center" style="margin-top:20px;"><button class="btn btn-primary" type="submit">确定</button> <button class="btn btn-while" type="button" ng-click="vf.hideSortModal()">取消</button></div></form></div></div></div><div class="modal inmodal" id="setFreightTemplateModal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>批量设置运费模块</h4></div><form ng-submit="vf.batchSetFreightTemplate(ids,\'freighttemplate_id\',vm.freightTemplate.freight_template_id)"><div class="modal-body modalBody" style="padding-top: 40px;min-height: 150px;"><div class="form-group" style="padding-top: 30px;"><label class="col-sm-2 control-label">运费模块：</label><div class="col-sm-10"><label><select class="form-control" ng-model="vm.freightTemplate" ng-options="freightTemplate.freight_template_name for freightTemplate in vm.freightTemplates"></select></label></div></div></div><div class="modal-footer center"><button class="btn btn-primary" type="submit">确定</button> <button class="btn btn-while" type="button" ng-click="vf.hideFreightTemplateModal()">取消</button></div></form></div></div></div><div class="modal inmodal" id="setSupplierModal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>批量设置商户</h4></div><div class="modal-body modalBody" style="padding-top: 40px;min-height: 150px;"><div class="form-group" style="padding-top: 30px;"><label class="col-sm-2 control-label">商户:</label><div class="col-sm-10"><label><select class="form-control" ng-model="vm.currentSupplier" ng-options="item.name for item in vm.supplierListData"></select></label></div></div></div><div class="modal-footer center"><button class="btn btn-primary" type="button" ng-click="vf.batchSetSupplier()">确定</button> <button class="btn btn-while" type="button" ng-click="vf.hideSupplierModal()">取消</button></div></div></div></div></div>'),e.put("app/product/productProperty/productProperty.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>商品规格</h2><ol class="breadcrumb"><li><a>商城</a></li><li><a>商品</a></li><li class="active"><strong>商品规格</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>规格</h5></div><div class="ibox-content"><div class="row"><div class="col-sm-6"></div><div class="col-sm-4 col-sm-offset-2"><label><input type="search" class="form-control input-sm" placeholder="输入您要添加的规格" aria-controls="editable" ng-model="property_name"></label> <button class="btn btn-primary" ng-click="addPropertyBtn()">添加</button></div></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th class="center">规格ID</th><th class="center">规格名称</th><th class="center">规格值</th><th class="center">编辑</th></tr></thead><tbody><tr class="gradeX" ng-repeat="boxdata in propertyListData"><td class="center">{{boxdata.property_id}}</td><td class="center"><div ng-show="!boxdata.show">{{boxdata.property_name}}</div><div ng-show="boxdata.show"><input type="search" class="form-control input-sm" placeholder="{{boxdata.property_name}}" aria-controls="editable" ng-model="boxdata.property_editname"></div></td><td class="center" ng-click="showDetail(boxdata)"><a>规格列表</a></td><td class="center"><div ng-show="!boxdata.show"><button class="btn btn-danger col-sm-3 col-sm-offset-2" ng-click="editPropertyBtn(boxdata)">编辑</button> <button class="btn btn-primary col-sm-3 col-sm-offset-1" ng-click="delPropertyBtn(boxdata)">删除</button></div><div ng-show="boxdata.show"><button class="btn btn-danger col-sm-3 col-sm-offset-2" ng-click="ensureBtn(boxdata)">确定</button> <button class="btn btn-primary col-sm-3 col-sm-offset-1" ng-click="quiteditBtn(boxdata)">取消</button></div></td></tr></tbody></table><div class="clearBoth"></div></div></div></div></div></div>'),e.put("app/product/productPropertyValue/productPropertyValue.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>商品规格</h2><ol class="breadcrumb"><li><a>商城</a></li><li><a>商品</a></li><li class="active"><strong>商品规格值</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>规格值列表</h5></div><div class="ibox-content"><div class="row"><div class="col-sm-6"><button class="btn btn-primary" ui-sref="index.productProperty">返回</button></div><div class="col-sm-4 col-sm-offset-2"><label><input type="search" class="form-control input-sm" placeholder="输入您要添加的规格值" aria-controls="editable" ng-model="property_value_name"></label> <button class="btn btn-primary" ng-click="addPropertyValueBtn()">添加</button></div></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th class="center">规格值ID</th><th class="center">规格值</th><th class="center">编辑</th></tr></thead><tbody><tr class="gradeX" ng-repeat="boxdata in propertyValuesData"><td class="center">{{boxdata.property_value_id}}</td><td class="center"><div ng-show="!boxdata.show">{{boxdata.property_value_name}}</div><div ng-show="boxdata.show"><input type="search" class="form-control input-sm" placeholder="{{boxdata.property_value_name}}" aria-controls="editable" ng-model="boxdata.property_value_editname"></div></td><td class="center"><div ng-show="!boxdata.show"><button class="btn btn-danger col-sm-3 col-sm-offset-2" ng-click="editPropertyValueBtn(boxdata)">编辑</button> <button class="btn btn-primary col-sm-3 col-sm-offset-1" ng-click="delPropertyValueBtn(boxdata)">删除</button></div><div ng-show="boxdata.show"><button class="btn btn-danger col-sm-3 col-sm-offset-2" ng-click="ensureBtn(boxdata)">确定</button> <button class="btn btn-primary col-sm-3 col-sm-offset-1" ng-click="quiteditBtn(boxdata)">取消</button></div></td></tr></tbody></table><div class="clearBoth"></div></div></div></div></div></div>'),e.put("app/product/productSort/productSort.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>商品分类</h2><ol class="breadcrumb"><li><a>商城</a></li><li><a>商品</a></li><li class="active"><strong>商品分类</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp wrapProductSort"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>分类列表</h5></div><div class="ibox-content"><a ng-click="addProductSort()" class="btn btn-primary">添加</a> <a class="btn btn-danger" ng-click="delallproductBtn()">批量删除</a> <a class="btn btn-primary" ng-click="setSortBtn()">批量修改排序</a> <span class="floatR">总计{{totalItems}}个</span><div class="clearBoth"></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th class="center"><input type="checkbox" class="input-mini" ng-checked="selectedall" ng-model="selectAll"></th><th class="center">分类ID</th><th class="center">分类名称</th><th class="center">分类图</th><th class="center">排序值</th><th class="center"></th></tr></thead><tbody><tr class="gradeX" ng-repeat="boxdata in categorys"><td ng-click="selectme(boxdata)" class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="boxdata.selected"></td><td class="center">{{boxdata.category_id}}</td><td class="left" ng-bind-html="boxdata.category_name"></td><td style="width: 80px;height: 80px;"><img ng-src="{{boxdata.category_img_url}}" alt="" style="width: 100%;height: 100%;"></td><td class="center">{{boxdata.sort}}</td><td class="center"><a ui-sref="index.editProductSort({sortID:boxdata.category_id})" ng-click="editProductSort(boxdata.category_id)" class="btn btn-primary">编辑</a> <a ng-click="delproductBtn(boxdata)" class="btn btn-danger">删除</a></td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite"></div></div><div class="col-sm-6"></div></div></div></div></div></div></div><div class="modal inmodal" id="setSortModal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>批量设置排序</h4></div><form ng-submit="batchUpdateCate()"><div class="modal-body modalBody" style="padding-top: 40px;min-height: 150px;"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed"></span> 排序：</label><div class="col-sm-8"><input type="number" class="form-control" name="productTitle" placeholder="排序" ng-model="setSortValue" ng-minlength="1" ng-maxlength="100" step="0" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}"></div></div></div><div class="modal-footer center" style="margin-top:20px;"><button class="btn btn-primary" type="submit">确定</button> <button class="btn btn-while" type="button" ng-click="hideSortModal()">取消</button></div></form></div></div></div>'),
e.put("app/product/productStockRecord/productStockRecord.html",'<div class="wrapper wrapper-content animated fadeInUp wrapProductSort"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>缺货记录列表</h5><a class="btn btn-white floatR" href="javascript:;" ng-click="vf.goBackToList()">返回</a></div><div class="ibox-content"><div class="clearBoth"></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th class="center">缺货记录Id</th><th class="center">商品名称</th><th class="center">规格</th><th class="center">登记数量</th><th class="center">头像</th><th class="center">昵称</th><th class="center">登记时间</th></tr></thead><tbody><tr class="gradeX" ng-repeat="item in vm.productStockList"><td class="center">{{item.autoid}}</td><td class="center">{{item.title}}</td><td class="center">{{item.props}}</td><td class="center">{{item.count}}</td><td style="width: 80px;height: 80px;"><img ng-src="{{item.head_img}}" alt="" style="width: 100%;height: 100%;"></td><td class="center">{{item.nick_name}}</td><td class="center">{{item.time|date:"yyyy-MM-dd HH:mm"}}</td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+vm.pagesize*vm.pageindex-vm.pagesize}} - {{vm.pagesize*vm.pageindex}} &nbsp;共{{vm.totals}}条</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="vm.totals" ng-model="vm.pageindex" class="pagination-sm" items-per-page="vm.pagesize" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="vf.pageChanged()" style="float:right;" max-size="6"></pagination></div></div></div></div></div></div></div></div>'),e.put("app/product/productTag/productTag.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>商品标签</h2><ol class="breadcrumb"><li><a>商城</a></li><li><a>商品</a></li><li class="active"><strong>商品标签</strong></li></ol></div><div class="col-lg-2"></div></div><div product-tag-box=""></div>'),e.put("app/raise/raisedetail/raisedetail.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>订单列表</h2><ol class="breadcrumb"><li><a>商城</a></li><li><a>众筹商品</a></li><li class="active"><strong>详情</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp ng-scope"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>众筹商品详情</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><div class="ibox-content"><form method="get" name="myForm" novalidate="" class="form-horizontal"><div class="form-group"><label class="col-sm-2 control-label fontsize18">标题：</label><div class="col-sm-4 control-label fontsize18" style="text-align:left;">{{raiseprodetail.crowdfund_title}}</div></div><div class="form-group"><label class="col-sm-2 control-label fontsize18">图片：</label><div class="col-sm-6"><img ng-src="{{raiseprodetail.crowdfund_img_url}}" style="width:60px;"></div></div><div class="form-group"><label class="col-sm-2 control-label fontsize18">众筹编号：</label><div class="col-sm-3 control-label fontsize18" style="text-align:left;">{{raiseprodetail.crowdfund_id}}</div></div><div class="form-group"><label class="col-sm-2 control-label fontsize18">简介：</label><div class="col-sm-10 control-label fontsize18" style="text-align:left;">{{raiseprodetail.crowdfund_intro}}</div></div><div class="form-group"><label class="col-sm-2 control-label fontsize18">类型：</label><div class="col-sm-10 control-label fontsize18" style="text-align:left;"><span ng-if="raiseprodetail.crowdfund_type == 0">产品众筹</span> <span ng-if="raiseprodetail.crowdfund_type == 1">股权众筹</span> <span ng-if="raiseprodetail.crowdfund_type == 2">公益众筹</span></div></div><div class="form-group"><label class="col-sm-2 control-label fontsize18">筹款：</label><div class="col-sm-3 control-label fontsize18" style="text-align:left;">{{raiseprodetail.crowdfund_pay_amount}}</div></div><div class="form-group"><label class="col-sm-2 control-label fontsize18">结束时间：</label><div class="col-sm-3 control-label fontsize18" style="text-align:left;">{{raiseprodetail.crowdfund_stoptime | date:"yyyy-MM-dd HH:mm"}}</div></div><div class="form-group"><label class="col-sm-2 control-label fontsize18">赞助项目：</label></div><div class="form-group" style="padding:0 20px;"><div class="raiselist" ng-repeat="boxdata in raiseprodetail.item_list"><div class="raiselistT">{{boxdata.item_productname}}</div><div class="raiselistM">{{boxdata.item_amount}}元</div><div class="raiselistF">{{boxdata.item_desc}}</div></div></div><div class="hr-line-dashed"></div><div class="clearBoth"></div></form></div></div></div></div></div>'),e.put("app/raise/raiseedit/raiseedit.html",'<div class="wrapper wrapper-content animated fadeInUp ng-scope wrapRaise"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>众筹编辑</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><div class="ibox-content"><form method="get" name="myForm" novalidate="" class="form-horizontal"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 标题：</label><div class="col-sm-10"><input type="text" class="form-control" name="productTitle" placeholder="标题" ng-model="pageData.raiseJson.crowdfund_title" required="" ng-minlength="1" ng-maxlength="100" ng-blur="productTitleErr={error:myForm.productTitle.$dirty&&myForm.productTitle.$invalid,errmsg:\'请填写标题\'}" ng-focus="productTitleErr={error:null,errmsg:null}"><div class="colorRed marginTp5" ng-show="productTitleErr.error">{{productTitleErr.errmsg}}</div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 众筹大图：</label><div class="col-sm-10"><zafw-upload-img ng-model="pageData.raiseJson.crowdfund_img_url"></zafw-upload-img></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 发起人：</label><div class="col-sm-10"><input type="text" class="form-control" name="productTitle" placeholder="发起人" ng-model="pageData.raiseJson.crowdfund_originator" required="" ng-minlength="1" ng-maxlength="100" ng-blur="productTitleErr={error:myForm.productTitle.$dirty&&myForm.productTitle.$invalid,errmsg:\'请填写筹款\'}" ng-focus="productTitleErr={error:null,errmsg:null}"><div class="colorRed marginTp5" ng-show="productTitleErr.error">{{productTitleErr.errmsg}}</div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 筹款：</label><div class="col-sm-10"><input type="text" class="form-control" name="productTitle" placeholder="筹款" ng-model="pageData.raiseJson.crowdfund_amount" required="" ng-minlength="1" ng-maxlength="100" ng-blur="productTitleErr={error:myForm.productTitle.$dirty&&myForm.productTitle.$invalid,errmsg:\'请填写筹款\'}" ng-focus="productTitleErr={error:null,errmsg:null}"><div class="colorRed marginTp5" ng-show="productTitleErr.error">{{productTitleErr.errmsg}}</div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 截止日期：</label><div class="col-sm-3"><div class="input-group date"><input type="text" class="form-control" placeholder="截止日期" ng-model="pageData.raiseJson.crowdfund_stoptime" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span>类型</label><div class="col-sm-10"><label><select class="form-control" ng-model="pageData.crowdFundType" ng-options="crowdFundType.name for crowdFundType in pageData.crowdFundTypes"></select></label></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 赞助项目：</label> <label class="col-sm-4 control-label"></label></div><div class="form-group"><div class="col-sm-2"></div><div class="col-sm-8"><div class="col-xs-4-reset" ng-repeat="item in pageData.itemList"><div class="redDel" ng-click="pageFunc.delmeslef($index,item)">X</div><div class="blueEdit" ng-click="pageFunc.editPro(item)">编辑</div><div class="raiseTitle">{{item.item_productname}}</div><div class="raiseContent">{{item.item_amount}}元</div><div class="raise">{{item.item_desc}}</div></div><div class="col-xs-4-reset"><div class="addNew" ng-click="pageFunc.showAddRaisePro()">+&nbsp;&nbsp;&nbsp;&nbsp;添加赞助</div></div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 编辑详情：</label><div class="col-sm-8"><div class="content" name="content" ng-model="pageData.raiseJson.crowdfund_intro"></div></div></div><div class="hr-line-dashed"></div><div class="wrapOperate"><label class="btn btn-primary btn-lg" ng-if="pageData.raiseId==\'add\'" ng-click="pageFunc.addRaise()">保存</label> <label class="btn btn-primary btn-lg" ng-if="pageData.raiseId!=\'add\'" ng-click="pageFunc.updateRaise()">修改</label></div><div class="clearBoth"></div></form></div></div></div></div></div><div class="modal inmodal" id="dealModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4>添加赞助</h4></div><div class="modal-body modalBody"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 标题：</label><div class="col-sm-10"><input type="text" class="form-control mBottom10" name="productTitle" placeholder="标题" ng-model="pageData.item.item_productname" required="" ng-minlength="1" ng-maxlength="100" ng-blur="productTitleErr={error:myForm.productTitle.$dirty&&myForm.productTitle.$invalid,errmsg:\'请填写商品标题\'}" ng-focus="productTitleErr={error:null,errmsg:null}"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 价格：</label><div class="col-sm-10"><input type="number" class="form-control mBottom10" name="productTitle" placeholder="价格" ng-model="pageData.item.item_amount" required="" ng-blur="productTitleErr={error:myForm.productTitle.$dirty&&myForm.productTitle.$invalid,errmsg:\'请填写商品标题\'}" ng-focus="productTitleErr={error:null,errmsg:null}"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 简介：</label><div class="col-sm-10"><textarea rows="3" cols="20" class="form-control mBottom10" name="summary" placeholder="简介" ng-model="pageData.item.item_desc" required="" ng-minlength="1" ng-maxlength="200"></textarea></div></div></div><div class="modal-footer center"><button class="col-sm-offset-2 btn btn-primary" ng-click="pageFunc.addPro()">添加</button> <button class="col-sm-offset-2 btn btn-primary" ng-click="pageFunc.clear()">取消</button></div></div></div></div>'),e.put("app/raise/raiselist/raiselist.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>众筹商品列表</h2><ol class="breadcrumb"><li><a>众筹</a></li><li><a>商品</a></li><li class="active"><strong>众筹商品列表</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>众筹商品列表</h5></div><div class="ibox-content"><div class="row"><div class="col-sm-6"><a ui-sref="index.raiseedit({raiseId:\'add\'})" class="btn btn-primary">添加</a><a class="btn btn-danger" ng-click="delallraiseproBtn()">批量删除</a> <a ng-click="goToOtherPage(1)" class="btn btn-primary">众筹分类</a> <a ng-click="goToOtherPage(2)" class="btn btn-primary">众筹订单</a></div><div class="col-sm-6"></div></div><table class="table table-striped table-bordered table-hover dataTable" id="editable" role="grid" aria-describedby="editable_info"><thead><tr role="row"><th style="width:20px;text-align: center;"><input type="checkbox" value="checked" class="input-mini" ng-checked="selectedall" ng-click="checkedall()"></th><th class="asc center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" style="width: 185px;">标题</th><th class="asc center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" style="width: 185px;">众筹ID</th><th class="center" tabindex="0" rowspan="1" colspan="1" style="width: 128px;">总金额</th><th class="center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" style="width: 161px;">状态</th><th class="center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" style="width: 220px;">结束时间</th><th class="center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" style="width: 121px;">进度</th><th class="center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" aria-label="操作: activate to sort column ascending" style="width: 240px;">操作</th></tr></thead><tbody><tr class="gradeA odd" role="row" ng-repeat="raisepro in raisepros"><td ng-click="selectme(raisepro)" style="text-align: center;"><input type="checkbox" value="checked" class="input-mini" ng-checked="raisepro.selected"></td><td class="1 center"><img ng-src="{{raisepro.crowdfund_img_url}}" alt="" style="width:80px;height:80px;"><div>{{raisepro.crowdfund_title}}</div></td><td class="center lineheight80">{{raisepro.crowdfund_id}}</td><td class="center lineheight80">{{raisepro.crowdfund_amount}}</td><td class="center lineheight80"><span ng-if="raisepro.crowdfund_status == 1">进行中</span> <span ng-if="raisepro.crowdfund_status == 0">已停止</span></td><td class="center lineheight80">{{raisepro.crowdfund_stoptime | date:"yyyy-MM-dd HH:mm"}}</td><td class="center lineheight80">{{raisepro.crowdfund_percent}}%</td><td class="center" style="min-width:220px;"><button class="btn btn-primary center col-sm-3 margintop26" ui-sref="index.raiseedit({raiseId:raisepro.crowdfund_id})">编辑</button> <button class="btn btn-primary center col-sm-4 col-sm-offset-1 margintop26" ng-click="createQcodeBtn(raisepro.crowdfund_id)">生成连接</button> <button class="btn btn-danger center col-sm-3 col-sm-offset-1 margintop26" ng-click="delraiseproBtn(raisepro)">删除</button></td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totals}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totals" items-per-page="pagesize" max-size="6" ng-model="currentPage" class="pagination-sm" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" style="float:right;"></pagination></div></div></div></div></div></div></div></div><div class="modal bs-example-modal-sm" id="qCodeModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-sm"><div class="modal-content"><div class="modal-header center modalHeader"><h4>用微信扫描二维码</h4></div><div class="modal-body"><img ng-src="{{qcodedata.qcode}}" alt="" style="width:242px;height:242px;margin:0 auto;"><br><a style="word-wrap : break-word;" ng-href="{{qcodedata.url}}" target="_blank" title="点击查看">{{qcodedata.url}}</a></div></div></div></div>'),e.put("app/salelimit/salelimitEdit/salelimitEdit.html",'<h1>商品<small>限时特卖</small></h1><div class="wrapper wrapper-content animated fadeInRight"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>商品信息</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><div class="ibox-content"><form method="get" class="form-horizontal ng-pristine ng-valid"><div class="form-group"></div><div class="form-group"><button type="button" class="btn btn-primary col-sm-1 col-sm-offset-1" ng-click="openselectBtn()">选择商品</button></div><div class="form-group"><label class="col-sm-2 control-label">商品名称：</label><div class="col-sm-4"><p class="form-control-static">{{hasseletdata.product_title}}</p></div><div class="col-sm-3"><img ng-src="{{hasseletdata.img_url}}" alt="" style="position:absolute;width:260px;" ng-show="aftershowimg"></div></div><div class="form-group"><label class="col-sm-2 control-label">原价：</label><div class="col-sm-10"><p class="form-control-static">{{hasseletdata.price}}</p></div></div><div class="form-group"><label class="col-sm-2 control-label">特卖价格：</label><div class="col-sm-10"><div class="input-group m-b col-sm-2 floatL"><div class="input-group-btn"><button tabindex="-1" class="btn btn-default" type="button">￥</button></div><input type="text" class="form-control" placeholder="特卖的价格" ng-model="promotion_price"></div><p class="form-control-static">&nbsp;&nbsp;备：不小于0.01</p></div></div><div class="form-group"><label class="col-sm-2 control-label">总库存：</label><div class="col-sm-10"><p class="form-control-static">{{hasseletdata.totalcount}}</p></div></div><div class="form-group"><label class="col-sm-2 control-label">特卖库存：</label><div class="col-sm-10"><div class="input-group m-b col-sm-2 floatL"><input type="text" class="form-control" placeholder="请输入特卖的数量" ng-model="promotion_count"></div></div></div><div class="form-group"><label class="col-sm-2 control-label">开始时间：</label><div class="col-sm-3"><div class="input-group date"><input type="text" class="form-control" placeholder="开始时间" ng-model="start_time" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div><div class="form-group"><label class="col-sm-2 control-label">结束时间：</label><div class="col-sm-3"><div class="input-group date"><input type="text" class="form-control" placeholder="结束时间" ng-model="stop_time" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div><div class="form-group"><button type="button" class="btn btn-danger col-sm-1 col-sm-offset-3" ng-click="addpromotionBtn()" ng-show="showaddBtn">保存</button> <button type="button" class="btn btn-danger col-sm-1 col-sm-offset-3" ng-click="editpromotionBtn()" ng-show="showeditBtn">保存</button></div></form></div></div></div></div></div>'),e.put("app/salelimit/salelimitList/saleList.html",'<div class="wrapper wrapper-content animated fadeInUp ng-scope"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>商品列表</h5></div><div class="ibox-content"><div class="col-lg-12"><a ui-sref="index.salelimitEdit" class="btn btn-primary col-sm-1" href="#/index/salelimitEdit">添加</a> <a class="btn btn-danger col-sm-1" style="margin-left:20px;" ng-click="delallpromotionBtn()">删除</a></div><div class="row col-lg-12"><div class="col-sm-8"><div class="input-group m-b col-sm-4 floatL"><div class="input-group date"><input type="text" class="form-control" placeholder="开始时间" ng-model="start_time" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div><div class="input-group m-b col-sm-4 floatL" style="margin-left:20px;"><div class="input-group date"><input type="text" class="form-control" placeholder="结束时间" ng-model="stop_time" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div><button class="btn btn-success col-sm-2" style="margin-left:20px;" ng-click="categoryBtn()">筛选</button></div><div class="col-sm-4"><div id="editable_filter" class="dataTables_filter floatR">Search: <label><input type="search" class="form-control input-sm" placeholder="输入您要搜索的商品" aria-controls="editable" ng-model="prokeyword" ng-keyup="ctrlsearch($event)"></label></div></div></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th><input type="checkbox" value="checked" class="input-mini" ng-checked="selectedall" ng-click="checkedall()"></th><th></th><th>特卖商品</th><th>原价</th><th>抢购价</th><th>特卖售出</th><th>库存</th><th>开始时间</th><th>结束时间</th><th>序号</th><th>操作</th></tr></thead><tbody><tr class="gradeX" ng-repeat="boxdata in promotiondatas"><td><input type="checkbox" value="checked" class="input-mini" ng-checked="boxdata.selected" ng-click="selectme(boxdata)"></td><td><img ng-src="{{boxdata.img_url}}" alt="" style="width:60px;height:60px;"></td><td>{{boxdata.product_title}}</td><td>{{boxdata.price}}</td><td class="center">{{boxdata.promotion_price}}</td><td class="center">{{boxdata.sale_count}}</td><td class="center">{{boxdata.promotion_count}}</td><td class="center">{{boxdata.promotion_start_timestamp | date:\'yyyy-MM-dd HH:mm\'}}</td><td class="center">{{boxdata.promotion_stop_timestamp | date:\'yyyy-MM-dd HH:mm\'}}</td><td class="center">{{boxdata.product_title}}</td><td class="center"><button class="btn btn-primary col-sm-5" ng-click="editpromotionBtn(boxdata)">编辑</button> <button class="btn btn-danger col-sm-5 col-sm-offset-2" ng-click="delpromotionBtn(boxdata)">删除</button></td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totalItems}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totalItems" ng-model="currentPage" class="pagination-sm" items-per-page="pagesize" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" max-size="6" style="float:right;"></pagination></div></div></div></div></div></div></div></div>'),e.put("app/shake/shakeEdit/newShakeEdit.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>添加摇一摇</h2><ol class="breadcrumb"><li><a>营销</a></li><li><a>摇一摇</a></li><li class="active"><strong>编辑摇一摇</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInRight"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>编辑摇一摇</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><form method="get" name="myForm" novalidate="" class="form-horizontal" ng-submit="submitProductFunc()"><div class="ibox-content"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 活动名称</label><div class="col-sm-3"><input type="text" class="form-control" name="productTitle" placeholder="活动名称" ng-model="LotteryName" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 说明：</label><div class="col-sm-4"><textarea rows="3" cols="20" class="form-control" name="productSummary" placeholder="说明" ng-model="sharedesc" required="" ng-minlength="1" ng-maxlength="200"></textarea></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 图片：</label><div class="col-sm-9"><zafw-upload-img ng-model="share_img_url"></zafw-upload-img></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 介绍：</label><div class="col-sm-8"><div class="content" name="content" ng-model="LotteryContent"></div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 消耗积分：</label><div class="col-sm-3"><input type="text" class="form-control" name="productTitle" placeholder="消耗积分" ng-model="ponits" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 开始时间：</label><div class="col-sm-3"><div class="input-group date"><input type="text" class="form-control" placeholder="开始时间" ng-model="start_time" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 结束时间：</label><div class="col-sm-3"><div class="input-group date"><input type="text" class="form-control" placeholder="结束时间" ng-model="stop_time" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 活动状态：</label><div class="col-sm-4"><input type="radio" id="start_id" name="active" value="1" ng-model="radioData.active"> <label for="start_id">运行</label> &nbsp;&nbsp;&nbsp; <input type="radio" id="stop_id" name="active" value="0" ng-model="radioData.active"> <label for="stop_id">停止</label></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 参与次数：</label><div class="col-sm-2"><input type="radio" name="select" value="0" ng-model="radioData.select"> 每人 <input type="text" class="form-control" name="number" style="width:60px;display:inline;" ng-model="numOne" ng-click="selectPeople()">&nbsp;次</div><div class="col-sm-2"><input type="radio" name="select" value="1" ng-model="radioData.select"> 每天 <input type="text" class="form-control" name="number" style="width:60px;display:inline;" ng-model="numTwo" ng-click="selectDay()">&nbsp;次</div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 领奖方式：</label><div class="col-sm-4"><input type="radio" id="scene_id" name="receive" value="0" ng-model="radioData.receiveway"> <label for="scene_id">现场领奖</label> <input type="radio" id="set_id" name="receive" value="1" ng-model="radioData.receiveway"> <label for="set_id">后台设置领奖</label> <input type="radio" id="submit_id" name="receive" value="2" ng-model="radioData.receiveway"> <label for="submit_id">现场提交信息领奖</label></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 是否允许多次中奖：</label><div class="col-sm-4"><input type="radio" id="allowmore_id" name="allow" value="1" ng-model="radioData.allow"> <label for="allowmore_id">允许多次中奖</label> <input type="radio" id="nomore_id" name="allow" value="0" ng-model="radioData.allow"> <label for="nomore_id">不允许多次中奖</label></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed"></span>底部导航按钮：</label><div class="col-sm-10"><label><select class="form-control" ng-model="buttonType" ng-options="buttonType.name for buttonType in buttonTypes" ng-change="pageFunc.selectedCategory()"></select></label></div></div><div class="hr-line-dashed"></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 奖品设置：</label> <label class="col-sm-4 control-label">中奖率如果为0则不会中奖，中奖率之和不大于100</label></div><div class="form-group"><div class="col-sm-1"></div><div class="col-sm-7"><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th class="center">奖项描述：</th><th class="center">奖项描述：</th><th class="center">中奖率：</th><th class="center">奖品状态：</th><th class="center">删除</th></tr></thead><tbody class="ulSelect"><tr class="gradeX" ng-repeat="boxdata in awards" ng-click="selectwhich($index)"><td class="center"><input type="text" class="form-control" placeholder="奖项名称" ng-model="boxdata.PrizeName"></td><td class="center"><input type="text" class="form-control" placeholder="奖项的描述" ng-model="boxdata.Description"></td><td class="center"><input type="text" class="form-control ng-pristine ng-untouched ng-valid" placeholder="中奖概率" ng-model="boxdata.Probability"></td><td><div ng-show="boxdata.PrizeCount==\'\'"><span class="colorRed">还未设置奖品</span></div><div ng-show="boxdata.PrizeCount!=\'\'">已设置奖品</div></td><td><div class="btn btn-danger" ng-click="delmeslef($index)">删除</div></td></tr></tbody></table><div class="btn btn-danger" ng-click="addawardBtn()">添加奖项</div></div><div class="col-sm-4"><input type="radio" id="scroe_id" name="activetype" value="1" ng-model="radioData.activetype" ng-change="checktype()"> <label for="scroe_id">积分</label> &nbsp;&nbsp; <input type="radio" id="coupon_id" name="activetype" value="2" ng-model="radioData.activetype" ng-change="checktype()"> <label for="coupon_id">优惠卷</label> &nbsp;&nbsp; <input type="radio" id="custom_id" name="activetype" value="0" ng-model="radioData.activetype" ng-change="checktype()"> <label for="custom_id">自定义</label><div ng-show="radioData.activetype==1"><br>&nbsp;奖品数量：&nbsp; <input type="text" class="form-control" name="productTitle" ng-model="ptnums" style="width:60px;display:inline;" ng-keyup="ctrladd()"> &nbsp;份<br><br>&nbsp;赠送积分：&nbsp; <input type="text" class="form-control" name="productTitle" ng-model="ptNums" style="width:60px;display:inline;" ng-keyup="ctrladd()"> &nbsp;积分&nbsp;</div><div ng-show="radioData.activetype==2"><br>&nbsp;选择优惠卷：&nbsp;<select class="form-control" ng-model="showcoupon" ng-options="coupon.cardcoupon_name for coupon in coupons" ng-change="whichcp(showcoupon)" style="width:100px;display:inline !important;"></select><br><br>&nbsp;奖品数量：&nbsp; <input type="text" class="form-control" ng-model="cpNums" name="productTitle" style="width:60px;display:inline;" ng-keyup="ctrladd()"> &nbsp;个&nbsp;</div><div ng-show="radioData.activetype==0"><br>&nbsp;奖品数量：&nbsp; <input type="text" class="form-control" name="productTitle" ng-model="cmNums" style="width:60px;display:inline;" ng-keyup="ctrladd()"> &nbsp;</div></div></div><div class="hr-line-dashed"></div><div class="btn btn-danger floatR" ng-click="editshakeBtn()">编辑活动</div><div class="clearBoth"></div><div class="hr-line-dashed"></div></div></form></div></div></div></div>'),e.put("app/shake/shakeEdit/shakeEdit.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>添加摇一摇</h2><ol class="breadcrumb"><li><a>营销</a></li><li><a>摇一摇</a></li><li class="active"><strong>编辑摇一摇</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>编辑摇一摇</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><form method="get" name="myForm" novalidate="" class="form-horizontal" ng-submit="submitProductFunc()"><div class="ibox-content" style="margin-bottom: 80px;"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 活动名称</label><div class="col-sm-3"><input id="shakename" type="text" class="form-control" name="productTitle" placeholder="活动名称" ng-model="LotteryName" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 说明：</label><div class="col-sm-4"><textarea id="describe" rows="3" cols="20" class="form-control" name="productSummary" placeholder="说明" ng-model="sharedesc" required="" ng-minlength="1" ng-maxlength="200"></textarea></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 图片：</label><div class="col-sm-9" id="shakeimg"><zafw-upload-img ng-model="share_img_url"></zafw-upload-img></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 介绍：</label><div class="col-sm-8" id="shakecontent"><div class="content" name="content" ng-model="LotteryContent"></div></div></div><div class="form-group"><label class="col-sm-2 control-label">消耗积分(次数摇完之后)：</label><div class="col-sm-3"><input type="text" class="form-control" name="productTitle" placeholder="消耗积分" ng-model="ponits" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 开始时间：</label><div class="col-sm-3"><div class="input-group date"><input id="timestart" type="text" class="form-control" placeholder="开始时间" ng-model="start_time" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 结束时间：</label><div class="col-sm-3"><div class="input-group date"><input id="timeend" type="text" class="form-control" placeholder="结束时间" ng-model="stop_time" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed"></span> 活动状态：</label><div class="col-sm-4" style="padding-top: 4px;"><input type="radio" id="start_id" name="active" value="1" ng-model="radioData.active"> <label for="start_id">运行</label> &nbsp;&nbsp;&nbsp; <input type="radio" id="stop_id" name="active" value="0" ng-model="radioData.active"> <label for="stop_id">停止</label></div></div><div class="form-group"><label class="col-sm-2 control-label" id="joincount"><span class="colorRed">*</span> 参与次数：</label><div class="col-sm-2" style="width: 20%;"><input type="radio" name="select" value="0" ng-model="radioData.select"> 每人 <input type="number" min="0" ng-pattern="/^[0-9]+$/" class="form-control" name="number" style="width:98px;display:inline;" ng-model="numOne" ng-click="selectPeople()">&nbsp;次</div><div class="col-sm-2" style="width: 20%;"><input type="radio" name="select" value="1" ng-model="radioData.select"> 每天 <input type="number" min="0" ng-pattern="/^[0-9]+$/" class="form-control" name="number" style="width:98px;display:inline;" ng-model="numTwo" ng-click="selectDay()">&nbsp;次</div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed"></span> 领奖方式：</label><div class="col-sm-4" style="padding-top: 7px;"><input type="radio" id="scene_id" name="receive" value="0" ng-model="radioData.receiveway"> <label for="scene_id">现场领奖</label> <input type="radio" id="set_id" name="receive" value="1" ng-model="radioData.receiveway"> <label for="set_id">后台设置领奖</label> <input type="radio" id="submit_id" name="receive" value="2" ng-model="radioData.receiveway"> <label for="submit_id">现场提交信息领奖</label></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed"></span> 是否允许多次中奖：</label><div class="col-sm-4" style="padding-top: 4px;"><input type="radio" id="allowmore_id" name="allow" value="1" ng-model="radioData.allow"> <label for="allowmore_id">允许多次中奖</label> <input type="radio" id="nomore_id" name="allow" value="0" ng-model="radioData.allow"> <label for="nomore_id">不允许多次中奖</label></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed"></span>底部导航按钮：</label><div class="col-sm-10"><label><select class="form-control" ng-model="buttonType" ng-options="buttonType.name for buttonType in buttonTypes" ng-change="pageFunc.selectedCategory()"></select></label></div></div><div class="hr-line-dashed"></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 奖品设置：</label> <label class="col-sm-4 control-label">中奖率如果为0则不会中奖，中奖率之和不大于100</label></div><div class="form-group"><div class="col-sm-1"></div><div class="col-sm-8" style="margin-bottom: 36px;"><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th class="center" style="width: 13%;">标题</th><th class="center" style="width: 14%;">描述</th><th class="center" style="width: 15%;">中奖率</th><th class="center" style="width: 10%;">状态</th><th class="center" style="width: 10%;">类型</th><th class="center" style="width: 13%;">奖品内容</th><th class="center" style="width: 15%;">数量</th><th class="center" style="width: 10%;">删除</th></tr></thead><tbody class="ulSelect"><tr class="gradeX" ng-repeat="boxdata in awards" ng-click="selectwhich($index)"><td class="center"><input id="prizeName_{{$index}}" type="text" class="form-control" placeholder="奖项名称" ng-model="boxdata.PrizeName"></td><td class="center"><input id="desc_{{$index}}" type="text" class="form-control" placeholder="奖项描述" ng-model="boxdata.Description"></td><td class="center"><input type="number" min="0" max="100" class="form-control ng-pristine ng-untouched ng-valid" ng-pattern="/^[0-9]+$/" placeholder="中奖率" ng-model="boxdata.Probability"></td><td><div ng-show="boxdata.PrizeCount==\'\'" class="colorRed">还未设置奖品</div><div ng-show="boxdata.PrizeCount!=\'\'">已设置奖品</div></td><td><div class="textStyle" ng-if="awards[$index].AwardsType==1">积分</div><div class="textStyle" ng-if="awards[$index].AwardsType==2">优惠券</div><div class="textStyle" ng-if="awards[$index].AwardsType==0">自定义</div></td><td><span class="textStyle" ng-if="awards[$index].AwardsType==1">{{awards[$index].Value | number}}</span><span class="textStyle" ng-if="awards[$index].AwardsType==2">{{awards[$index].prizeContent}}</span></td><td><span class="textStyle">{{awards[$index].PrizeCount | number}}</span></td><td><div class="btn btn-danger" ng-click="delmeslef($index)">删除</div></td></tr></tbody></table><div class="btn btn-danger" ng-click="addawardBtn()">添加奖项</div></div><div class="col-sm-3 prizetype" style="display: none;"><input type="radio" id="scroe_id" name="activetype" value="1" ng-model="radioData.activetype" ng-change="checktype()"> <label for="scroe_id">积分</label> &nbsp;&nbsp; <input type="radio" id="coupon_id" name="activetype" value="2" ng-model="radioData.activetype" ng-change="checktype()"> <label for="coupon_id">优惠券</label> &nbsp;&nbsp; <input type="radio" id="custom_id" name="activetype" value="0" ng-model="radioData.activetype" ng-change="checktype()"> <label for="custom_id">自定义</label><div ng-show="radioData.activetype==1"><br>&nbsp;赠送积分：&nbsp; <input id="score_{{inDex}}" type="number" min="0" class="form-control" name="productTitle" ng-pattern="/^[0-9]+$/" ng-model="ptNums" style="width:98px;display:inline;" ng-keyup="ctrladd()"> &nbsp;积分&nbsp;<br><br>&nbsp;奖品数量：&nbsp; <input id="ptnums_{{inDex}}" type="number" min="0" class="form-control" name="productTitle" ng-pattern="/^[0-9]+$/" ng-model="ptnums" style="width:98px;display:inline;" ng-keyup="ctrladd()"> &nbsp;份<br></div><div ng-show="radioData.activetype==2"><br>&nbsp;选择优惠券：&nbsp;<select class="form-control" ng-model="showcoupon" ng-options="coupon.cardcoupon_name for coupon in coupons" ng-change="whichcp(showcoupon)" style="width:98px;display:inline !important;"></select><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;奖品数量：&nbsp; <input id="cpNums_{{inDex}}" type="number" min="0" class="form-control" ng-model="cpNums" name="productTitle" ng-pattern="/^[0-9]+$/" style="width:98px;display:inline;" ng-keyup="ctrladd()"> &nbsp;份&nbsp;</div><div ng-show="radioData.activetype==0"><br>&nbsp;奖品数量：&nbsp; <input id="cmNums_{{inDex}}" type="number" min="0" class="form-control" name="productTitle" ng-model="cmNums" ng-pattern="/^[0-9]+$/" style="width:98px;display:inline;" ng-keyup="ctrladd()"> &nbsp;</div></div></div><div class="hr-line-dashed"></div></div><div class="wrapOperate"><label class="btn btn-primary btn-lg" ng-click="editshakeBtn()">保存</label></div><div class="clearBoth"></div></form></div></div></div></div>'),
e.put("app/shake/shakeList/shakeList.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>摇一摇列表</h2><ol class="breadcrumb"><li><a>营销</a></li><li><a>添加</a></li><li class="active"><strong>摇一摇列表</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>摇一摇列表</h5></div><div class="ibox-content"><div><a href="javascript:window.location.href=\'/App/Lottery/WXLotteryCompileV1.aspx?lotteryType=2&backUrl=\'+encodeURIComponent(\'/customize/mmpadmin/index.aspx?hidemenu=1#/index/shakeList/shake\');" class="btn btn-primary">添加</a><a ng-click="resetLottery(shakeData)" class="btn btn-primary" style="margin-left: 3px;">重置{{resetNm}}</a><a ng-click="showWinnerList(shakeData)" class="btn btn-primary" style="margin-left: 3px;">显示实时中奖名单</a><div id="editable_filter" class="dataTables_filter floatR">搜索： <label><input type="search" class="form-control input-sm" placeholder="输入您要搜索的名称" aria-controls="editable" ng-model="prokeyword" ng-keyup="ctrlsearch($event)"></label></div></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th><input type="checkbox" value="checked" class="input-mini" ng-checked="selectedall"></th><th class="center">缩略图</th><th class="center">活动ID</th><th class="center">活动名称</th><th class="center">IP/PV</th><th class="center">微信阅读人数</th><th class="center">状态</th><th class="center">参与人数</th><th class="center">参与限制</th><th class="center">有效期</th><th class="center">操作</th></tr></thead><tbody><tr class="gradeX" ng-repeat="boxdata in shakeLists"><td class="center"><input type="checkbox" id="allrow" value="checked" class="input-mini" ng-checked="boxdata.selected" ng-click="selectme(boxdata)"></td><td class="center"><img ng-src="{{boxdata.ShareImg}}" alt="" style="width:60px;height:60px;" ng-click="selectme(boxdata)"></td><td class="center" ng-click="selectme(boxdata)">{{boxdata.LotteryID}}</td><td class="center" ng-click="selectme(boxdata)">{{boxdata.LotteryName}}</td><td class="center"><a ng-click="goToMonitor(boxdata.LotteryID,\'uv\')" style="cursor: pointer;">{{boxdata.IP}}/{{boxdata.PV}}</a></td><td class="center"><a ng-click="goToMonitor(boxdata.LotteryID,boxdata.UV)" style="cursor: pointer;">{{boxdata.UV}}</a></td><td class="center" ng-if="boxdata.Status==1" ng-click="selectme(boxdata)">进行中</td><td class="center" ng-if="boxdata.Status==0" ng-click="selectme(boxdata)">停止</td><td class="center" ng-click="selectme(boxdata)">{{boxdata.PersionCount}}</td><td class="center" ng-click="selectme(boxdata)"><div ng-show="boxdata.LuckLimitType==0">{{boxdata.MaxCount}}&nbsp;次/人</div><div ng-show="boxdata.LuckLimitType==1">{{boxdata.MaxCount}}&nbsp;次/天</div></td><td class="center" ng-click="selectme(boxdata)">{{boxdata.StartTime | date:\'yyyy年MM月dd日 HH:mm\'}}<br>~<br>{{boxdata.EndTime | date:\'yyyy年MM月dd日 HH:mm\'}}</td><td class="center"><button class="btn btn-primary btn-sm" ng-click="editShakeBtn(boxdata)">编辑</button> <button class="btn btn-danger btn-sm" ng-click="delproductBtn(boxdata)">删除</button> <button class="btn btn-primary btn-sm" style="padding: 4px 4px;" ng-click="createQcodeBtn(boxdata,type)">二维码链接</button><button class="btn btn-white btn-sm" style="padding: 4px 4px;" ng-click="goToRecord(boxdata)"><i class="fa fa-folder"></i>查看中奖名单</button></td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totalItems}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totalItems" ng-model="currentPage" class="pagination-sm" items-per-page="pagesize" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" style="float:right;" max-size="6"></pagination></div></div></div></div></div></div></div></div><div class="modal bs-example-modal-sm" id="qCodeModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-sm"><div class="modal-content"><div class="modal-header center modalHeader"><h4>用微信扫描二维码</h4></div><div class="modal-body"><img ng-src="{{qcodedata.qcode}}" alt="" style="width:242px;height:242px;margin:0 auto;"><br><a style="word-wrap : break-word;" ng-href="{{qcodedata.url}}" target="_blank" title="点击查看">{{qcodedata.url}}</a></div></div></div></div>'),e.put("app/shake/winnerRecord/winnerRecord.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>用户列表</h2><ol class="breadcrumb"><li><a>用户管理</a></li><li class="active"><strong>用户列表</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>用户列表</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><div class="ibox-content"><div class="row"><div class="col-sm-6"><a class="btn btn-primary" ng-click="winnerRecord.markHasReceive()">标记为已领奖</a> <a class="btn btn-primary" style="margin-left: 5px;" ng-click="winnerRecord.exportWinnerRecord()">导出中奖名单</a></div><div class="col-sm-6"><div class="dataTables_filter floatL">奖品： <label><select class="form-control" ng-model="winnerRecord.award" ng-options="award.PrizeName for award in winnerRecord.awards" ng-change="winnerRecord.getWinnerRecord()"></select></label></div></div></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th><input type="checkbox" value="checked" class="input-mini" ng-checked="selectedall"></th><th class="center">奖品</th><th class="center">头像</th><th class="center">昵称</th><th class="center">中奖时间</th><th class="center">是否已领奖</th><th class="center">姓名</th><th class="center">手机</th></tr></thead><tbody><tr class="gradeX" ng-repeat="eachdata in winnerRecord.shakeList"><td class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="eachdata.selected" ng-click="winnerRecord.selectme(eachdata)"></td><td class="center" ng-click="winnerRecord.selectme(eachdata)">{{eachdata.WXAwardName}}</td><td class="center" ng-click="winnerRecord.selectme(eachdata)"><img ng-src="{{eachdata.HeadImg}}" alt="" style="width:60px;height:60px;"></td><td class="center" ng-click="winnerRecord.selectme(eachdata)">{{eachdata.WXNickName}}</td><td class="center" ng-click="winnerRecord.selectme(eachdata)">{{eachdata.InsertDateStr}}</td><td class="center" ng-click="winnerRecord.selectme(eachdata)" ng-if="eachdata.IsGetPrize==0">未领奖</td><td class="center" ng-click="winnerRecord.selectme(eachdata)" ng-if="eachdata.IsGetPrize==1">已领奖</td><td class="center" ng-click="winnerRecord.selectme(eachdata)">{{eachdata.Name}}</td><td class="center" ng-click="winnerRecord.selectme(eachdata)">{{eachdata.Phone}}</td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+winnerRecord.pagesize*winnerRecord.currentPage-winnerRecord.pagesize}} - {{winnerRecord.pagesize*winnerRecord.currentPage}} 总计{{winnerRecord.totalItems}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="winnerRecord.totalItems" ng-model="winnerRecord.currentPage" class="pagination-sm" items-per-page="winnerRecord.pagesize" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="winnerRecord.pageChanged()" style="float:right;" max-size="6"></pagination></div></div></div></div></div></div></div></div>'),e.put("app/shop/pageEdit/pageEdit.html",""),e.put("app/shop/shopInfo/shopInfo.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>Buttons</h2><ol class="breadcrumb"><li><a href="index.html">Home</a></li><li><a>UI Elements</a></li><li class="active"><strong>Buttons</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-6"><div class="ibox float-e-margins"><div class="ibox-title"><h5>商铺信息</h5><div class="ibox-tools"><a class="collapse-link"><i class="fa fa-chevron-up"></i></a> <a class="close-link"><i class="fa fa-times"></i></a></div></div><div class="ibox-content"><form method="get" class="form-horizontal"><div class="form-group"><label class="col-sm-2 control-label">名称</label><div class="col-sm-10"><input type="text" class="form-control" placeholder="请输入商城名称"></div></div><div class="form-group"><label for="message" class="col-sm-2 control-label">简介</label><div class="col-sm-10"><textarea class="form-control" id="message" rows="3" placeholder="请简单描述下您的商城"></textarea></div></div><div class="form-group"><label class="col-sm-2 control-label">简介</label><div class="col-sm-10"><input type="text" class="form-control"> <span class="help-block m-b-none">以上信息在微信分享商城首页的时候会显示。</span></div></div><div class="hr-line-dashed"></div><div class="form-group"><div class="col-sm-12"><button class="btn btn-primary pull-right" type="submit">保存</button></div></div></form></div></div></div><div class="col-lg-6"><div class="ibox float-e-margins"><div class="ibox-title"><h5>商城二维码</h5><div class="ibox-tools"><a class="collapse-link"><i class="fa fa-chevron-up"></i></a> <a class="close-link"><i class="fa fa-times"></i></a></div></div><div class="ibox-content"><img width="300" height="300" src="" alt=""><p>微信扫描二维码进入商城</p></div></div></div></div></div>'),e.put("app/systemManage/accountList/accountList.html",'<div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>账号列表</h5></div><div class="ibox-content"><div class="row"><div class="col-sm-6"><a class="btn btn-success" ng-click="addCountBtn()">添加</a> <a class="btn btn-primary" ng-click="activeAccountBtn()">启用账号</a> <a class="btn btn-danger" ng-click="enableAccountBtn()">禁用账号</a></div><div class="col-sm-6"><div id="editable_filter" class="dataTables_filter floatR">搜索: <label><input type="search" class="form-control input-sm" placeholder="输入您要搜索的账户" aria-controls="editable" ng-model="keyword" ng-keyup="ctrlsearch($event)"></label></div></div></div><table class="table table-striped table-bordered table-hover dataTable" id="editable" role="grid" aria-describedby="editable_info"><thead><tr role="row"><th style="width:20px;text-align: center;" ng-click="checkedall()"><input type="checkbox" value="checked" class="input-mini" ng-checked="selectedall"></th><th class="center">账户ID</th><th class="center">用户名</th><th class="center">头像</th><th class="center">真实姓名</th><th class="center">公司</th><th class="center">职位</th><th class="center">手机号码</th><th class="center">投票数</th><th class="center">是否禁用</th><th class="center">操作</th></tr></thead><tbody><tr class="gradeA odd" role="row" ng-repeat="raisepro in raisepros"><td ng-click="selectme(raisepro)" style="text-align: center;"><input type="checkbox" value="checked" class="input-mini" ng-checked="raisepro.selected"></td><td class="center">{{raisepro.autoid}}</td><td class="center">{{raisepro.user_id}}</td><td class="center"><img ng-src="{{raisepro.wx_head_img_url}}" alt="" style="width:60px;"></td><td class="center">{{raisepro.true_name}}</td><td class="center">{{raisepro.user_company}}</td><td class="center">{{raisepro.user_postion}}</td><td class="center">{{raisepro.user_phone}}</td><td class="center">{{raisepro.user_vote_count}}</td><td class="center"><span ng-show="raisepro.user_isdisable == 0">启用</span> <span ng-show="raisepro.user_isdisable == 1">禁用</span></td><td class="center"><button class="btn btn-primary center" ng-click="editcardcouponBtn(raisepro)">编辑</button></td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totals}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totals" items-per-page="pagesize" max-size="6" ng-model="currentPage" class="pagination-sm" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" style="float:right;"></pagination></div></div></div></div></div></div></div></div><div class="modal inmodal" id="dealModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4 ng-if="isAddcard">添加会员</h4><h4 ng-if="!isAddcard">修改会员</h4></div><div class="modal-body modalBody"><div class="marginBt5 overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 用户名：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入用户名" ng-model="pageData.user_id"></div></div><div class="marginBt5 overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 密码：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入密码（中英文组合）" ng-model="pageData.user_pwd"></div></div><div class="marginBt5 overFlow" ng-show="isAddcard"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 删除数据：</label><div class="col-sm-9"><input type="radio" value="true" id="dataDelet" ng-model="pageData.isdelete"> <label for="dataDelet">不能删除数据</label> <input type="radio" value="false" id="dataNoDelet" ng-model="pageData.isdelete"> <label for="dataNoDelet">可以删除数据</label></div></div><div class="marginBt5 overFlow" ng-show="isAddcard"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 导出数据：</label><div class="col-sm-9"><input type="radio" value="true" id="dataPort" ng-model="pageData.isexport"> <label for="dataPort">不能导出数据</label> <input type="radio" value="false" id="dataNoPort" ng-model="pageData.isexport"> <label for="dataNoPort">可以导出数据</label></div></div><div class="marginBt5 overFlow" ng-if="showPicDom"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 用户头像：</label><div class="col-sm-9"><zafw-upload-img ng-model="pageData.wx_head_img_url"></zafw-upload-img></div></div><div class="marginBt5 overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 真实姓名：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入用户名的真实姓名" ng-model="pageData.true_name"></div></div><div class="marginBt5 overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 公司名称：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入用户所在公司名称" ng-model="pageData.user_company"></div></div><div class="marginBt5 overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 手机号码：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入用户名的手机号码" ng-model="pageData.user_phone"></div></div><div class="marginBt5 overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 职位：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入用户名的职位名称" ng-model="pageData.user_postion"></div></div><div class="marginBt5 overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 票数：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入用户名的票数" ng-model="pageData.user_vote_count"></div></div></div><div class="modal-footer center"><button class="col-sm-offset-2 btn btn-primary" ng-click="addCouponBtn()">保存</button> <button class="col-sm-offset-2 btn btn-primary" ng-click="clear()">取消</button></div></div></div></div>'),e.put("app/tryst/trystDetail/trystDetail.html",'<div class="wrapper wrapper-content"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>约会详情</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><div class="ibox-content"><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">用户ID:</div><div class="col-sm-10">{{trystDetailInfo.publish_user.id}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">发布人:</div><div class="col-sm-10">{{trystDetailInfo.publish_user.nick_name}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">性别:</div><div class="col-sm-10"><span ng-show="trystDetailInfo.publish_user.gender == 0">女</span> <span ng-show="trystDetailInfo.publish_user.gender == 1">男</span></div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">生日:</div><div class="col-sm-10">{{trystDetailInfo.publish_user.birthday | date:\'yyyy-MM-dd\'}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">身份:</div><div class="col-sm-10">{{trystDetailInfo.publish_user.identification}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">头像:</div><div class="col-sm-10"><img ng-repeat="img in trystDetailInfo.publish_user.imgs" ng-src="{{img}}" alt="" style="width:60px;height:60px;margin-right:10px;"></div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">约会对象:</div><div class="col-sm-10"><span ng-show="trystDetailInfo.publish_user.activity_ex1 == 0">女</span> <span ng-show="trystDetailInfo.publish_user.activity_ex1 == 1">男</span></div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">是否可带朋友:</div><div class="col-sm-10"><span ng-show="trystDetailInfo.publish_user.activity_ex2 == 0">否</span> <span ng-show="trystDetailInfo.publish_user.activity_ex2 == 1">可以</span></div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">约会形式:</div><div class="col-sm-10">{{trystDetailInfo.publish_user.activity_ex3}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">花费:</div><div class="col-sm-10">{{trystDetailInfo.publish_user.activity_ex4}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">地点是否对方定:</div><div class="col-sm-10"><span ng-show="trystDetailInfo.publish_user.activity_ex5 == 0">自定定</span> <span ng-show="trystDetailInfo.publish_user.activity_ex5 == 1">对方定</span></div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">约会人群:</div><div class="col-sm-10">{{trystDetailInfo.publish_user.activity_ex6}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">发布人:</div><div class="col-sm-10"><span ng-show="trystDetailInfo.publish_user.activity_ex7 == 0">女</span> <span ng-show="trystDetailInfo.publish_user.activity_ex7 == 1">男</span></div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">约会目的:</div><div class="col-sm-10">{{trystDetailInfo.publish_user.activity_ex8}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">约会主题:</div><div class="col-sm-10">{{trystDetailInfo.activity_name}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">约会地址:</div><div class="col-sm-10">{{trystDetailInfo.activity_address}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">约会描述:</div><div class="col-sm-10">{{trystDetailInfo.activity_summary}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">创建时间:</div><div class="col-sm-10">{{trystDetailInfo.create_time | date:\'yyyy-MM-dd\'}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">开始时间:</div><div class="col-sm-10">{{trystDetailInfo.activity_start_time | date:\'yyyy-MM-dd\'}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">浏览量:</div><div class="col-sm-10">{{trystDetailInfo.activity_pv}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">评论数:</div><div class="col-sm-10">{{trystDetailInfo.activity_commentcount}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">评论数:</div><div class="col-sm-10">{{trystDetailInfo.activity_signcount}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">分类id:</div><div class="col-sm-10">{{trystDetailInfo.category_id}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">分类名称:</div><div class="col-sm-10">{{trystDetailInfo.category_name}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">信用金:</div><div class="col-sm-10">{{trystDetailInfo.credit_acount}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">报名所需担保金:</div><div class="col-sm-10">{{trystDetailInfo.guarantee_credit_acount}}</div></div><div class="form-group" style="overflow:hidden;"><div class="col-sm-2" style="text-align:right;">状态:</div><div class="col-sm-10"><span ng-show="trystDetailInfo.status == 0">发布</span> <span ng-show="trystDetailInfo.status == 1">进行中</span> <span ng-show="trystDetailInfo.status == 2">已结束</span></div></div><div class="clearBoth"></div><div class="hr-line-dashed"></div></div></div></div></div></div>'),e.put("app/tryst/trystList/trystList.html",'<div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>商品列表</h5></div><div class="ibox-content"><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th class="center">名称</th><th class="center">发起人</th><th class="center">活动状态</th><th class="center">发起时间</th><th class="center" style="min-width:140px;">操作</th></tr></thead><tbody><tr class="gradeX" ng-repeat="boxdata in trystData"><td class="center">{{boxdata.activity_name}}</td><td class="center">{{boxdata.publish_user.nick_name}}</td><td class="center"><span ng-show="boxdata.status == 0">报名中</span> <span ng-show="boxdata.status == 1">报名已通过</span> <span ng-show="boxdata.status == 2">已结束</span></td><td class="center">{{boxdata.create_time | date:\'yyyy-MM-dd HH:mm\'}}</td><td class="center"><button class="btn btn-primary" ui-sref="index.trystDetail({trystID:boxdata.activity_id})">查看详情</button></td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totals}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totals" items-per-page="pagesize" max-size="6" ng-model="currentPage" class="pagination-sm" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" style="float:right;"></pagination></div></div></div></div></div></div></div></div>'),e.put("app/userclass/userclassdetail/userclassdetail.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>用户等级详情</h2><ol class="breadcrumb"><li><a>用户</a></li><li><a>用户等级</a></li><li class="active"><strong>用户等级详情</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInRight"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>用户等级详情</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><form method="post" name="myForm" novalidate="" class="form-horizontal"><div class="ibox-content"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 用户等级编号：</label><div class="col-sm-3">{{pageData.userClassJson.level_number}}</div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 用户等级名称：</label><div class="col-sm-3">{{pageData.userClassJson.level_string}}</div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 用户等级图标：</label><div class="col-sm-10"><img ng-src="{{pageData.userClassJson.level_icon}}" style="width:60px;"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 用户累计积分开始：</label><div class="col-sm-3">{{pageData.userClassJson.level_fromhistory_score}}</div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 用户累计积分结束：</label><div class="col-sm-3">{{pageData.userClassJson.level_tohistory_score}}</div></div><div class="hr-line-dashed"></div><div class="clearBoth"></div><div class="hr-line-dashed"></div></div></form></div></div></div></div>'),e.put("app/userclass/userclassedit/userclassedit.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>添加用户等级</h2><ol class="breadcrumb"><li><a>用户</a></li><li><a>用户等级</a></li><li class="active"><strong>添加用户等级</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInRight"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>添加用户等级</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><form method="post" name="myForm" novalidate="" class="form-horizontal"><div class="ibox-content"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 用户等级编号：</label><div class="col-sm-3"><input type="text" class="form-control" name="productTitle" placeholder="请输入用户等级编号" ng-model="pageData.userClassJson.level_number" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 用户等级名称：</label><div class="col-sm-3"><input type="text" class="form-control" name="productTitle" placeholder="请输入用户等级名称" ng-model="pageData.userClassJson.level_string" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 用户等级图标：</label><div class="col-sm-10"><zafw-upload-img ng-model="pageData.img"></zafw-upload-img></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 用户累计积分开始：</label><div class="col-sm-3"><input type="text" class="form-control" name="productTitle" placeholder="请输入用户开始累计积分" ng-model="pageData.userClassJson.level_fromhistory_score" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 用户累计积分结束：</label><div class="col-sm-3"><input type="text" class="form-control" name="productTitle" placeholder="请输入用户结束累计积分" ng-model="pageData.userClassJson.level_tohistory_score" ng-minlength="1" ng-maxlength="100"></div></div><div class="hr-line-dashed"></div><div class="btn btn-primary floatR" ng-if="pageData.userClassId==\'add\'" ng-click="pageFunc.addUserClass()">添加</div><div class="btn btn-primary floatR" ng-if="pageData.userClassId!=\'add\'" ng-click="pageFunc.updateUserClass()">修改</div><div class="clearBoth"></div><div class="hr-line-dashed"></div></div></form></div></div></div></div>'),e.put("app/userclass/userclasslist/userclasslist.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-10"><h2>用户等级列表</h2><ol class="breadcrumb"><li><a>用户</a></li><li><a>用户等级</a></li><li class="active"><strong>用户等级列表</strong></li></ol></div><div class="col-lg-2"></div></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>用户等级列表</h5></div><div class="ibox-content"><div class="row"><div class="col-sm-6"><a ui-sref="index.userclassedit({userClassId:\'add\'})" class="btn btn-primary">添加</a> <a class="btn btn-danger" ng-click="pageFunc.deleteSelectedBtn()">批量删除</a></div><div class="col-sm-6"><div id="editable_filter" class="dataTables_filter floatR">搜索: <label><input type="search" class="form-control input-sm" placeholder="输入您要搜索的等级名称" aria-controls="editable" ng-model="pageData.keyword" ng-keyup="pageFunc.ctrlSearch($event)"></label></div></div></div><table class="table table-striped table-bordered table-hover dataTable" id="editable" role="grid" aria-describedby="editable_info"><thead><tr role="row"><th style="width:20px;text-align: center;"><input type="checkbox" value="checked" class="input-mini" ng-checked="pageData.selectedall" ng-click="pageFunc.selectAll()"></th><th class="sorting_asc center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="等级编号: activate to sort column descending" style="width: 185px;">等级编号</th><th class="sorting center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" aria-label="等级图标: activate to sort column ascending" style="width: 161px;">等级图标</th><th class="sorting center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" aria-label="等级名称: activate to sort column ascending" style="width: 128px;">等级名称</th><th class="sorting center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" aria-label="用户累计积分开始: activate to sort column ascending" style="width: 160px;">用户累计积分开始</th><th class="sorting center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" aria-label="用户累计积分结束: activate to sort column ascending" style="width: 160px;">用户累计积分结束</th><th class="sorting center" tabindex="0" aria-controls="editable" rowspan="1" colspan="1" aria-label="操作: activate to sort column ascending" style="width: 200px;">操作</th></tr></thead><tbody><tr class="gradeA odd" role="row" ng-repeat="item in pageData.dataList"><td style="text-align: center;"><input type="checkbox" value="checked" class="input-mini" ng-checked="item.selected" ng-click="pageFunc.selectRecord(item)"></td><td class="center lineheight80">{{item.level_number}}</td><td class="sorting_1 center"><img ng-src="{{item.level_icon}}" alt="" style="width:80px;height:80px;"></td><td class="center lineheight80">{{item.level_string}}</td><td class="center lineheight80">{{item.level_fromhistory_score}}</td><td class="center lineheight80">{{item.level_tohistory_score}}</td><td class="center"><button class="btn btn-danger center col-sm-3 margintop26" ui-sref="index.userclassedit({userClassId:item.level_id})">编辑</button> <button class="btn btn-primary center col-sm-3 col-sm-offset-1 margintop26" ui-sref="index.userclassdetail({userClassId:item.level_id})">详情</button> <button class="btn btn-danger center col-sm-3 col-sm-offset-1 margintop26" ng-click="pageFunc.deleteSingleBtn(item)">删除</button></td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pageData.pagesize*pageData.currentPage-pageData.pagesize}} - {{pageData.pagesize*pageData.currentPage}} 总计{{pageData.totalItems}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="pageData.totalItems" items-per-page="pageData.pagesize" max-size="6" ng-model="pageData.currentPage" class="pagination-sm" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageFunc.pageChanged()" style="float:right;"></pagination></div></div></div></div></div></div></div></div>'),
e.put("app/vote/addVote/addVote.html",'<div class="wrapper wrapper-content animated fadeInUp ng-scope"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>添加投票信息</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><div class="ibox-content"><form method="get" name="myForm" novalidate="" class="form-horizontal"><div class="ibox-content"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 投票名称：</label><div class="col-sm-10"><input type="text" class="form-control" name="productTitle" placeholder="投票名称" ng-model="infoData.vote_name" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 投票描述：</label><div class="col-sm-6"><textarea rows="3" cols="20" class="form-control ng-pristine ng-untouched ng-invalid ng-invalid-required ng-valid-minlength ng-valid-maxlength" name="productSummary" placeholder="投票描述" ng-model="infoData.vote_summary" required="" ng-minlength="1" ng-maxlength="200"></textarea></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 投票图片：</label><div class="col-sm-10"><zafw-upload-img ng-model="infoData.vote_img_url"></zafw-upload-img></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 投票状态：</label><div class="col-sm-4"><input type="radio" id="start_id" name="vote_status" value="1" ng-model="infoData.vote_status"> <label for="start_id">开启</label> &nbsp;&nbsp;&nbsp; <input type="radio" id="stop_id" name="vote_status" value="0" ng-model="infoData.vote_status"> <label for="stop_id">关闭</label></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 停止时间：</label><div class="col-sm-3"><div class="input-group date"><input type="text" class="form-control" placeholder="停止时间" ng-model="infoData.vote_stop_time" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 投票详情：</label><div class="col-sm-9"><div class="summernote"></div></div></div><div class="hr-line-dashed"></div><div class="form-group"><div class="col-sm-2"></div><div class="col-sm-9"><label for="savebtn" class="btn btn-primary">添加投票信息</label> <input class="hidesubmitbtn" id="savebtn" ng-click="addVoteBtn()"></div></div><div class="clearBoth"></div></div></form></div></div></div></div></div>'),e.put("app/vote/addVoteObj/addVoteObj.html",'<div class="wrapper wrapper-content animated fadeInRight"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>添加投票对象</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><form method="get" name="myForm" novalidate="" class="form-horizontal" ng-submit="submitProductFunc()"><div class="ibox-content"><div class="form-group overFlow"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 名称：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入名称" ng-model="pageData.vote_object_name"></div></div><div class="form-group overFlow"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 展示图片：</label><div class="col-sm-9"><zafw-upload-img ng-model="pageData.show_img_list"></zafw-upload-img></div></div><div class="form-group overFlow"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 缩略图：</label><div class="col-sm-9"><img ng-src="{{pageData.head_img_url}}" alt="" style="width:80px;height:80px;" ng-if="pageData.head_img_url != \'\'"> <img alt="" style="width:80px;height:80px;" ng-if="pageData.head_img_url == \'\'"> <span style="font-weight:bold;">（请移动上面展示图片的位置来改变缩略图）</span></div></div><div class="form-group overFlow"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 地区：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入地区" ng-model="pageData.vote_area"></div></div><div class="form-group overFlow"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 手机号码：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入手机号码" ng-model="pageData.vote_object_phone"></div></div><div class="form-group overFlow"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 参赛宣言：</label><div class="col-sm-9"><textarea rows="3" cols="20" class="form-control" name="productSummary" placeholder="请输入参赛宣言" ng-model="pageData.vote_object_introduction" required="" ng-minlength="1" ng-maxlength="200"></textarea></div></div><div class="hr-line-dashed"></div><div class="form-group"><div class="col-sm-2"></div><div class="col-sm-9"><label for="savebtn" class="btn btn-primary">保存投票信息</label> <input class="hidesubmitbtn" id="savebtn" ng-click="submitProductFunc()"></div></div><div class="clearBoth"></div></div></form></div></div></div></div>'),e.put("app/vote/editVote/editVote.html",'<div class="wrapper wrapper-content animated fadeInUp ng-scope"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>修改投票信息</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><div class="ibox-content"><form method="get" name="myForm" novalidate="" class="form-horizontal"><div class="ibox-content"><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 投票名称：</label><div class="col-sm-10"><input type="text" class="form-control" name="productTitle" placeholder="投票名称" ng-model="infoData.vote_name" required="" ng-minlength="1" ng-maxlength="100"></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 投票描述：</label><div class="col-sm-6"><textarea rows="3" cols="20" class="form-control ng-pristine ng-untouched ng-invalid ng-invalid-required ng-valid-minlength ng-valid-maxlength" name="productSummary" placeholder="投票描述" ng-model="infoData.vote_summary" required="" ng-minlength="1" ng-maxlength="200"></textarea></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 投票图片：</label><div class="col-sm-10"><zafw-upload-img ng-model="infoData.vote_img_url"></zafw-upload-img></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 投票状态：</label><div class="col-sm-4"><input type="radio" id="start_id" name="vote_status" value="1" ng-model="infoData.vote_status"> <label for="start_id">开启</label> &nbsp;&nbsp;&nbsp; <input type="radio" id="stop_id" name="vote_status" value="0" ng-model="infoData.vote_status"> <label for="stop_id">关闭</label></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 停止时间：</label><div class="col-sm-3"><div class="input-group date"><input type="text" class="form-control" placeholder="停止时间" ng-model="infoData.vote_stop_time" zafw-datepacker-time=""> <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div></div><div class="form-group"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 投票详情：</label><div class="col-sm-9"><div class="summernote"></div></div></div><div class="hr-line-dashed"></div><div class="form-group"><div class="col-sm-2"></div><div class="col-sm-9"><label for="savebtn" class="btn btn-primary">修改投票信息</label> <input class="hidesubmitbtn" id="savebtn" ng-click="addVoteBtn()"></div></div><div class="clearBoth"></div></div></form></div></div></div></div></div>'),e.put("app/vote/editVoteObj/editVoteObj.html",'<div class="wrapper wrapper-content animated fadeInRight"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>修改投票对象</h5><a class="btn btn-white floatR" style="position: relative;top: -7px;right: 7px;margin-bottom: 0px;" href="javascript:history.go(-1)">返回</a></div><form method="get" name="myForm" novalidate="" class="form-horizontal" ng-submit="submitProductFunc()"><div class="ibox-content"><div class="form-group overFlow"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 名称：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入名称" ng-model="pageData.vote_object_name"></div></div><div class="form-group overFlow"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 展示图片：</label><div class="col-sm-9"><zafw-upload-img ng-model="pageData.show_img_list"></zafw-upload-img></div></div><div class="form-group overFlow"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 缩略图：</label><div class="col-sm-9"><img ng-src="{{pageData.head_img_url}}" alt="" style="width:80px;height:80px;" ng-if="pageData.head_img_url != \'\'"> <img alt="" style="width:80px;height:80px;" ng-if="pageData.head_img_url == \'\'"> <span style="font-weight:bold;">（请移动上面展示图片的位置来改变缩略图）</span></div></div><div class="form-group overFlow"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 地区：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入地区" ng-model="pageData.vote_area"></div></div><div class="form-group overFlow"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 手机号码：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入手机号码" ng-model="pageData.vote_object_phone"></div></div><div class="form-group overFlow"><label class="col-sm-2 control-label"><span class="colorRed">*</span> 参赛宣言：</label><div class="col-sm-9"><textarea rows="3" cols="20" class="form-control" name="productSummary" placeholder="请输入参赛宣言" ng-model="pageData.vote_object_introduction" required="" ng-minlength="1" ng-maxlength="200"></textarea></div></div><div class="hr-line-dashed"></div><div class="form-group"><div class="col-sm-2"></div><div class="col-sm-9"><label for="savebtn" class="btn btn-primary">修改信息</label> <input class="hidesubmitbtn" id="savebtn" ng-click="editVoteObjFunc()"></div></div><div class="clearBoth"></div></div></form></div></div></div></div>'),e.put("app/vote/voteList/voteList.html",'<div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>投票列表</h5></div><div class="ibox-content"><div class="row"><div class="col-sm-6"><a ui-sref="index.addVote" class="btn btn-primary">添加</a> <a class="btn btn-danger" ng-click="delallproductBtn()">批量删除</a></div><div class="col-sm-6"><div id="editable_filter" class="dataTables_filter floatR">搜索: <label><input type="search" class="form-control input-sm" placeholder="输入您要搜索的信息" aria-controls="editable" ng-model="keyword" ng-keyup="ctrlsearch($event)"></label></div></div></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="selectedall" ng-click="checkedall()"></th><th class="center">投票名称</th><th class="center">投票编号</th><th class="center">描述</th><th class="center">缩略图</th><th class="center">投票状态</th><th class="center">停止时间</th><th class="center">编辑</th></tr></thead><tbody><tr class="gradeX" ng-repeat="boxdata in voteListdata"><td ng-click="selectme(boxdata)"><input type="checkbox" value="checked" class="input-mini" ng-checked="boxdata.selected"></td><td>{{boxdata.vote_name}}</td><td>{{boxdata.vote_id}}</td><td>{{boxdata.vote_summary}}</td><td><img ng-src="{{boxdata.vote_img_url}}" alt="" style="width:80px;height:80px;"></td><td class="center"><div ng-show="boxdata.vote_status===1">开启</div><div ng-show="boxdata.vote_status===0">关闭</div></td><td class="center">{{boxdata.vote_stop_time | date:\'yyyy-MM-dd HH:mm\'}}</td><td class="center"><button class="btn btn-primary" ui-sref="index.editVote({voteID:boxdata.vote_id})">编辑</button> <button class="btn btn-danger" ng-click="delproductBtn(boxdata)">删除</button> <button class="btn btn-danger" ng-click="emptyLogBtn(boxdata.vote_id)">清空日志</button> <button class="btn btn-primary" ui-sref="index.voteObjList({voteID:boxdata.vote_id})">投票对象</button></td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totals}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totals" items-per-page="pagesize" max-size="6" ng-model="currentPage" class="pagination-sm" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" style="float:right;"></pagination></div></div></div></div></div></div></div></div>'),e.put("app/vote/voteObjList/voteObjList.html",'<div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-title"><h5>投票对象列表</h5></div><div class="ibox-content"><div class="row"><div class="col-sm-2"><a class="btn btn-primary" ui-sref="index.addVoteObj({voteID:voteID})">添加</a> <a class="btn btn-danger" ng-click="delallproductBtn()">批量删除</a></div><div class="col-sm-2"><label><select class="form-control" ng-model="sortType" ng-options="sortType.name for sortType in sortsData" ng-change="whichSortBtn(sortType)"></select></label></div><div class="col-sm-2"><label><select class="form-control" ng-model="statusType" ng-options="statusType.name for statusType in statusData" ng-change="whichStatusBtn(statusType)"></select></label></div><div class="col-sm-6"><div id="editable_filter" class="dataTables_filter floatR">搜索: <label><input type="search" class="form-control input-sm" placeholder="输入您要搜索的信息" aria-controls="editable" ng-model="keyword" ng-keyup="ctrlsearch($event)"></label></div></div></div><table class="table table-striped table-bordered table-hover" id="editable"><thead><tr><th class="center"><input type="checkbox" value="checked" class="input-mini" ng-checked="selectedall" ng-click="checkedall()"></th><th class="center">投票对象id</th><th class="center">编号</th><th class="center">名称</th><th class="center">头像</th><th class="center">年龄</th><th class="center">性别</th><th class="center">排名</th><th class="center">地区</th><th class="center">参赛口号</th><th class="center">所得票数</th><th class="center" style="width:244px;">编辑</th></tr></thead><tbody><tr class="gradeX" ng-repeat="boxdata in voteListdata"><td ng-click="selectme(boxdata)"><input type="checkbox" value="checked" class="input-mini" ng-checked="boxdata.selected"></td><td>{{boxdata.vote_oject_id}}</td><td>{{boxdata.vote_object_number}}</td><td>{{boxdata.vote_object_name}}</td><td><img ng-src="{{boxdata.head_img_url}}" alt="" style="width:80px;height:80px;"></td><td class="center">{{boxdata.vote_object_age}}</td><td class="center">{{boxdata.vote_object_gender}}</td><td class="center">{{boxdata.rank}}</td><td class="center">{{boxdata.vote_area}}</td><td class="center">{{boxdata.vote_object_introduction}}</td><td class="center">{{boxdata.vote_count}}</td><td class="center"><button class="btn btn-primary col-sm-5" ui-sref="index.editVoteObj({voteObjID:boxdata.vote_oject_id})">编辑</button> <button class="btn btn-danger col-sm-5 col-sm-offset-2" ng-click="delproductBtn(boxdata)">删除</button></td></tr></tbody></table><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="editable_info" role="status" aria-live="polite">显示 {{1+pagesize*currentPage-pagesize}} - {{pagesize*currentPage}} 总计{{totals}}个</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="editable_paginate"><pagination boundary-links="true" total-items="totals" items-per-page="pagesize" max-size="6" ng-model="currentPage" class="pagination-sm" previous-text="上一页" next-text="下一页" first-text="第一页" last-text="最后一页" ng-change="pageChanged()" style="float:right;"></pagination></div></div></div></div></div></div></div></div><div class="modal inmodal" id="dealModal" tabindex="-1" role="dialog" aria-hidden="false"><div class="modal-dialog modal-width"><div class="modal-content"><div class="modal-header center modalHeader"><h4 ng-if="isAddcard">添加导航</h4><h4 ng-if="!isAddcard">修改导航</h4></div><div class="modal-body modalBody"><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 名称：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入名称" ng-model="pageData.vote_object_name"></div></div><div class="form-group overFlow" ng-if="showPicDom"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 缩略图：</label><div class="col-sm-9"><zafw-upload-img ng-model="pageData.head_img_url"></zafw-upload-img></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 地区：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入地区" ng-model="pageData.vote_area"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 手机号码：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入手机号码" ng-model="pageData.vote_object_phone"></div></div><div class="form-group overFlow"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 参赛宣言：</label><div class="col-sm-9"><input type="text" class="form-control mBottom10" placeholder="请输入参赛宣言" ng-model="pageData.vote_object_introduction"></div></div><div class="form-group overFlow" ng-if="showPicDom"><label class="col-sm-3 control-label"><span class="colorRed">*</span> 展示图片：</label><div class="col-sm-9"><zafw-upload-img ng-model="pageData.show_img_list"></zafw-upload-img></div></div></div><div class="modal-footer center"><button class="col-sm-offset-2 btn btn-primary" ng-click="addCouponBtn()">保存</button></div></div></div></div>')}]);