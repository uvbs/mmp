!function(){"use strict";angular.module("shop",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ui.router","toastr","clientapi"])}(),function(){"use strict";function e(e,t,i,a,s,o,n){function r(){d.loadMyTrainMessage()}function c(){var e={id:i.id};console.log("id:"+e.id),s.myTrainMessage(e).then(function(e){l.myTrainMessageData=e.result,l.myTrainMessageData.remark=n.trustAsHtml(l.myTrainMessageData.remark)}).then(function(e){})}var l=e.vm={myTrainMessageData:{}},d=e.vf={loadMyTrainMessage:c,init:r};d.init()}e.$inject=["$scope","$rootScope","$stateParams","$timeout","sAPI","$state","$sce"],angular.module("shop").controller("myTrainMessageCon",e)}(),function(){"use strict";function e(e,t,i,a,s,o){function n(){u.loadMyTrainList(),u.bindScrol()}function r(){window.onscroll=function(){console.log(document.body.scrollHeight-document.body.scrollTop-window.screen.height),document.body.scrollHeight-document.body.scrollTop-window.screen.height<10&&(d.pageIndex++,u.loadMyTrainList())}}function c(){var e={pageindex:d.pageIndex,pagesize:d.pageSize};a.myTrainList(e).then(function(e){d.myTrainListData=d.myTrainListData.concat(e.result.list),console.log(e)}).then(function(e){})}function l(e){s.go("myTrainDetails",{id:e.id})}var d=e.vm={myTrainListData:[],pageIndex:1,pageSize:10},u=e.vf={loadMyTrainList:c,goMyTrainDetails:l,bindScrol:r,init:n};u.init()}e.$inject=["$scope","$rootScope","$timeout","sAPI","$state","MALLCONFIG"],angular.module("shop").controller("myTrainListCon",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n){function r(){d.loadMyTrainDetails()}function c(){var e={id:i.id};console.log("id:"+e.id),s.myTrainDetails(e).then(function(e){l.myTrainDetailsData=e.result,l.myTrainDetailsData.main_points=n.trustAsHtml(l.myTrainDetailsData.main_points),l.myTrainDetailsData.comment=n.trustAsHtml(l.myTrainDetailsData.comment),console.log(l.myTrainDetailsData)}).then(function(e){})}var l=e.vm={myTrainDetailsData:{}},d=e.vf={loadMyTrainDetails:c,init:r};d.init()}e.$inject=["$scope","$rootScope","$stateParams","$timeout","sAPI","$state","$sce"],angular.module("shop").controller("myTrainDetailsCon",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n){function r(){d.loadMyGameMessage()}function c(){var e={id:i.id};console.log("id:"+e.id),s.myGameMessage(e).then(function(e){l.myGameMessageData=e.result,l.myGameMessageData.remark=n.trustAsHtml(l.myGameMessageData.remark)}).then(function(e){})}var l=e.vm={myGameMessageData:{}},d=e.vf={loadMyGameMessage:c,init:r};d.init()}e.$inject=["$scope","$rootScope","$stateParams","$timeout","sAPI","$state","$sce"],angular.module("shop").controller("myGameMessageCon",e)}(),function(){"use strict";function e(e,t,i,a,s,o){function n(){u.loadMyGameList(),u.bindScrol()}function r(){window.onscroll=function(){console.log(document.body.scrollHeight-document.body.scrollTop-window.screen.height),document.body.scrollHeight-document.body.scrollTop-window.screen.height<10&&(d.pageIndex++,u.loadMyGameList())}}function c(){var e={pageindex:d.pageIndex,pagesize:d.pageSize};a.myGameList(e).then(function(e){d.myGameListData=d.myGameListData.concat(e.result.list),console.log(e)}).then(function(e){})}function l(e){s.go("myGameDetails",{id:e.id})}var d=e.vm={myGameListData:[],pageIndex:1,pageSize:10},u=e.vf={loadMyGameList:c,goMyGameDetails:l,bindScrol:r,init:n};u.init()}e.$inject=["$scope","$rootScope","$timeout","sAPI","$state","MALLCONFIG"],angular.module("shop").controller("myGameListCon",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n){function r(){d.loadMyGameDetails()}function c(){var e={id:i.id};console.log("id:"+e.id),s.myGameDetails(e).then(function(e){l.myGameDetailsData=e.result,l.myGameDetailsData.comment=n.trustAsHtml(l.myGameDetailsData.comment),console.log(l.myGameDetailsData)}).then(function(e){})}var l=e.vm={myGameDetailsData:{}},d=e.vf={loadMyGameDetails:c,init:r};d.init()}e.$inject=["$scope","$rootScope","$stateParams","$timeout","sAPI","$state","$sce"],angular.module("shop").controller("myGameDetailsCon",e)}(),function(){"use strict";function e(e,t,i,a,s,o){function n(){r()}function r(){var e={};a.myCardList(e).then(function(e){l.myCardListData=e.result.list,(l.myCardListData.length=1)&&d.goMyCardDetails(l.myCardListData[0]),console.log(e)}).then(function(e){})}function c(e){s.go("myCardDetails",{myCard_id:e.id})}var l=e.vm={myCardListData:[]},d=e.vf={loadMyCardList:r,goMyCardDetails:c,init:n};d.init()}e.$inject=["$scope","$rootScope","$timeout","sAPI","$state","MALLCONFIG"],angular.module("shop").controller("myCardListCon",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n){function r(){d.loadMyCardDetails()}function c(){var e={myCard_id:i.myCard_id};s.myCardDetails(e).then(function(e){l.myCardDetailsData=e.result,l.myCardDetailsData.description=n.trustAsHtml(l.myCardDetailsData.description),console.log(e)}).then(function(e){})}var l=e.vm={myCardDetailsData:{}},d=e.vf={loadMyCardDetails:c,inint:r};d.inint()}e.$inject=["$scope","$rootScope","$stateParams","$timeout","sAPI","$state","$sce"],angular.module("shop").controller("myCardDetailsCon",e)}(),function(){"use strict";function e(e,t,i,a,s,o){function n(){y.loadMyTrainList(),y.tabList(),y.bindScrol()}function r(){_.myTrainPageIndex=1,_.myTrainListData=[],y.loadMyTrainList()}function c(){_.myGamePageIndex=1,_.myGameListData=[],y.loadMyGameList()}function l(){_.myActivePageIndex=1,_.myActiveListData=[],y.loadMyActiveList()}function d(){window.onscroll=function(){switch(_.currentTab){case"train":document.body.scrollHeight-document.body.scrollTop-window.screen.height<10&&(_.myTrainPageIndex++,y.loadMyTrainList());break;case"game":document.body.scrollHeight-document.body.scrollTop-window.screen.height<10&&(_.myGamePageIndex++,y.loadMyGameList());break;case"active":document.body.scrollHeight-document.body.scrollTop-window.screen.height<10&&(_.myActivePageIndex++,y.loadMyActiveList())}}}function u(){function e(e){for(var a=0;a<t.length;a++)t[a]==e?(t[a].className="active",i[a].className="current"):(t[a].className="",i[a].className="")}for(var t=document.getElementById("tab").getElementsByTagName("a"),i=document.getElementById("tabCon").getElementsByTagName("ul"),a=0;a<t.length;a++)t[a].onclick=function(){e(this)}}function p(){_.currentTab="train";var e={pageindex:_.myTrainPageIndex,pagesize:_.pageSize};a.myTrainList(e).then(function(e){_.myTrainListData=_.myTrainListData.concat(e.result.list),console.log(e)}).then(function(e){})}function m(){_.currentTab="game";var e={pageindex:_.myGamePageIndex,pagesize:_.pageSize};a.myGameList(e).then(function(e){_.myGameListData=_.myGameListData.concat(e.result.list),console.log(e)}).then(function(e){})}function v(){_.currentTab="active";var e={pageindex:_.myActivePageIndex,pagesize:_.pageSize};a.myApplyList(e).then(function(e){_.myActiveListData=_.myActiveListData.concat(e.result.list),console.log(e)}).then(function(e){})}function g(e){s.go("myTrainMessage",{id:e.id})}function h(e){s.go("myGameMessage",{id:e.id})}function f(e){s.go("myActiveMessage",{id:e.id})}var _=e.vm={myTrainListData:[],myGameListData:[],myActiveListData:[],myTrainPageIndex:1,myGamePageIndex:1,myActivePageIndex:1,pageSize:10,currentTab:"train"},y=e.vf={loadMyTrainList:p,loadMyGameList:m,loadMyActiveList:v,myTrainSelect:r,myGameSelect:c,myActiveSelect:l,goMyTrainMessage:g,goMyGameMessage:h,goMyActiveMessage:f,tabList:u,bindScrol:d,init:n};y.init()}e.$inject=["$scope","$rootScope","$timeout","sAPI","$state","MALLCONFIG"],angular.module("shop").controller("myApplyListCon",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n){function r(){d.loadMyActiveMessage()}function c(){var e={id:i.id};console.log("id:"+e.id),s.myActiveMessage(e).then(function(e){l.myActiveMessageData=e.result,l.myActiveMessageData.remark=n.trustAsHtml(l.myActiveMessageData.remark)}).then(function(e){})}var l=e.vm={myActiveMessageData:{}},d=e.vf={loadMyActiveMessage:c,init:r};d.init()}e.$inject=["$scope","$rootScope","$stateParams","$timeout","sAPI","$state","$sce"],angular.module("shop").controller("myActiveMessageCon",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r){function c(){h.getOrderData()}function l(e){g.order_id=e;var t=document.getElementById("propDlg"),i=document.getElementById("propBg"),a=t.getElementsByTagName("h4"),o=t.getElementsByTagName("div");t.style.display="block",i.style.display="block",a[0].innerHTML="支付成功",o[0].className="mfPay_result_con",s(function(){h.goSussessPage()},5e3),g.countdown=5;var n=setInterval(function(){g.countdown--,g.countdown<=0&&(h.goSussessPage(),clearInterval(n)),document.getElementById("payTimer").innerHTML=g.countdown},1e3)}function d(){var e=document.getElementById("propDlg"),t=document.getElementById("propBg"),i=e.getElementsByTagName("h4");e.style.display="block",t.style.display="block",i[0].innerHTML="支付失败",s(function(){h.goActiveDetails()},5e3),g.countdown=5;var a=setInterval(function(){g.countdown--,g.countdown<=0&&clearInterval(a),document.getElementById("payTimer").innerHTML=g.countdown},1e3)}function u(){switch(g.orderData.active_type){case"active":n.go("myApplyList",{});break;case"match":n.go("myApplyList",{});break;case"apply":n.go("myApplyList",{})}}function p(){switch(g.orderData.active_type){case"active":n.go("activeDetails",{activity_id:g.orderData.activity_id});break;case"match":n.go("matchDetails",{activity_id:g.orderData.activity_id});break;case"apply":n.go("applyDetails",{activity_id:g.orderData.activity_id})}}function m(){console.log(localStorage),g.orderData=JSON.parse(localStorage.getItem("orderData"))}function v(){if(!g.isPaying){g.isPaying=!0;var e=({order_id:g.orderData.order_id},document.getElementById("btnPay"));e.disabled=!0,e.className="disabled",a({url:"/serv/api/meifan/activity/pay.ashx?order_id="+g.orderData.order_id,data:""}).success(function(e,t,i,a){if(0==e.errcode)WeixinJSBridge.invoke("getBrandWCPayRequest",e.pay_req,function(t){"get_brand_wcpay_request:ok"==t.err_msg?h.paySuccess(e.order_id):h.payFail()});else{alert(e.errmsg),g.isPaying=!1;var s=document.getElementById("btnPay");console.log(s),s.disabled=!1,s.className=""}}).error(function(e,t,i,a){})}}var g=e.vm={orderData:{},payResult:"",order_id:"",isPaying:!1},h=e.vf={getOrderData:m,pay:v,paySuccess:l,payFail:d,goActiveDetails:p,goSussessPage:u,init:c};h.init()}e.$inject=["$scope","$rootScope","$stateParams","$http","$timeout","sAPI","$state","MALLCONFIG"],angular.module("shop").controller("mfPayCon",e)}(),function(){"use strict";function e(e,t,i,a,s,o){function n(){u.loadMatchList(),u.bindScrol()}function r(){window.onscroll=function(){console.log(document.body.scrollHeight-document.body.scrollTop-window.screen.height),document.body.scrollHeight-document.body.scrollTop-window.screen.height<10&&(d.pageIndex++,u.loadMatchList())}}function c(){var e={pageindex:d.pageIndex,pagesize:d.pageSize};a.matchList(e).then(function(e){d.matchListData=d.matchListData.concat(e.result.list),console.log(e)}).then(function(e){})}function l(e){s.go("matchDetails",{activity_id:e.activity_id})}var d=e.vm={matchListData:[],pageIndex:1,pageSize:10},u=e.vf={loadMatchList:c,goMatchDetails:l,bindScrol:r,init:n};u.init()}e.$inject=["$scope","$rootScope","$timeout","sAPI","$state","MALLCONFIG"],angular.module("shop").controller("matchListController",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r){function c(){g.loadMatchDetails(),g.getUserInfo()}function l(){r.getuserinfo({}).then(function(e){v.currentUserInfo=e,v.name=v.currentUserInfo.truename,v.phone=v.currentUserInfo.phone,g.checkUserInfo()})["catch"](function(e){g.checkUserInfo()})}function d(){var e={activity_id:i.activity_id,name:v.name,phone:v.phone,email:v.email,sex:v.sex,birthday:v.birthday,group_type:v.currentGroup.value,member_type:v.currentMember.value,date_range:v.currentDate.value,amount:v.amount,remark:v.remark},t={data:JSON.stringify(e)};s.matchEntryForm(t).then(function(e){if(e.status)if(1==v.matchDetailsData.is_need_pay){var t={active_type:"match",activity_id:i.activity_id,order_id:e.result.order_id,activity_name:v.matchDetailsData.activity_name,amount:v.amount,date_range:v.currentDate.value};localStorage.setItem("orderData",JSON.stringify(t)),o.go("mfPay",{})}else o.go("myApplyList",{});else alert(e.msg);console.log(e)}).then(function(e){})}function u(){if(void 0==v.currentUserInfo||void 0==v.currentUserInfo.phone||""==v.currentUserInfo.phone){var e={type:"mfmatch",activity_id:i.activity_id};sessionStorage.setItem("returnObject",JSON.stringify(e)),o.go("bindPhone",{})}}function p(){for(var e=0;e<v.matchDetailsData.items.length;e++)if(v.currentGroup.value==v.matchDetailsData.items[e].group_type&&v.currentMember.value==v.matchDetailsData.items[e].is_member&&v.currentDate.value==v.matchDetailsData.items[e].date_range){v.amount=v.matchDetailsData.items[e].amount;break}}function m(){var e={activity_id:i.activity_id};console.log("id:"+e.activity_id),s.matchDetails(e).then(function(e){v.matchDetailsData=e.result,v.matchDetailsData.remark=n.trustAsHtml(v.matchDetailsData.remark),v.groupList=[];for(var t=0;t<v.matchDetailsData.group_list.length;t++){var i={name:v.matchDetailsData.group_list[t],value:v.matchDetailsData.group_list[t]};v.groupList.push(i)}v.currentGroup=v.groupList[0],v.memberTypeList=[];for(var t=0;t<v.matchDetailsData.member_type_list.length;t++){var i={name:v.matchDetailsData.member_type_list[t],value:v.matchDetailsData.member_type_list[t]};v.memberTypeList.push(i)}v.currentMember=v.memberTypeList[0],v.dateList=[];for(var t=0;t<v.matchDetailsData.date_list.length;t++){var i={name:v.matchDetailsData.date_list[t],value:v.matchDetailsData.date_list[t]};v.dateList.push(i)}for(var t=0;t<v.dateList.length;t++)v.matchDetailsData.default_date==v.dateList[t].value&&(v.currentDate=v.dateList[t]);g.calcAmount()}).then(function(e){})}var v=e.vm={matchEntryFormData:{},matchDetailsData:{},groupList:[],currentGroup:{},memberTypeList:[],currentMember:{},dateList:[],currentDate:{},currentUserInfo:{},name:"",phone:"",email:"",sex:"男",birthday:"",group_type:"",member_type:"",remark:"",amount:0},g=e.vf={loadMatchDetails:m,submitData:d,calcAmount:p,getUserInfo:l,checkUserInfo:u,init:c};g.init()}e.$inject=["$scope","$rootScope","$stateParams","$timeout","sAPI","$state","$sce","nAPI"],angular.module("shop").controller("matchEntryFormCon",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n){function r(){u.loadMatchDetails()}function c(){var e={activity_id:i.activity_id};console.log("id:"+e.activity_id),s.matchDetails(e).then(function(e){d.matchDetailsData=e.result,d.matchDetailsData.description=n.trustAsHtml(d.matchDetailsData.description),d.items=d.matchDetailsData.items,console.log(d.items)}).then(function(e){})}function l(e){o.go("matchEntryForm",{activity_id:e.activity_id})}var d=e.vm={matchDetailsData:{}},u=e.vf={loadMatchDetails:c,goMatchEntryForm:l,init:r};u.init()}e.$inject=["$scope","$rootScope","$stateParams","$timeout","sAPI","$state","$sce"],angular.module("shop").controller("matchDetailsCon",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r){function c(){h.loadCardDetails()}function l(e){g.order_id=e;var t=document.getElementById("propDlg"),i=document.getElementById("propBg"),a=t.getElementsByTagName("h4"),o=t.getElementsByTagName("div");t.style.display="block",i.style.display="block",a[0].innerHTML="支付成功",o[0].className="cardPay_result_con",s(function(){h.goMfOrderDetails()},5e3),g.countdown=5;var n=setInterval(function(){g.countdown--,g.countdown<=0&&(h.goMfOrderDetails(),clearInterval(n)),document.getElementById("payTimer").innerHTML=g.countdown},1e3)}function d(){var e=document.getElementById("propDlg"),t=document.getElementById("propBg"),i=e.getElementsByTagName("h4");e.style.display="block",t.style.display="block",i[0].innerHTML="支付失败",s(function(){h.goCardDetails()},5e3),g.countdown=5;var a=setInterval(function(){g.countdown--,g.countdown<=0&&clearInterval(a),document.getElementById("payTimer").innerHTML=g.countdown},1e3)}function u(){n.go("MfOrderDetails",{order_id:g.order_id})}function p(){n.go("cardDetails",{id:i.card_id})}function m(){var e={card_id:i.card_id};console.log("id:"+e.card_id),o.cardDetails(e).then(function(e){g.cardDetailsData=e.result,console.log(e)}).then(function(e){})}function v(){if(!g.isPaying){g.isPaying=!0;var e={card_id:i.card_id};console.log("id:"+e.card_id);var t=document.getElementById("btnPay");t.disabled=!0,t.className="disabled",o.cardApply(e).then(function(e){e.status?a({url:"/serv/api/meifan/card/pay.ashx?order_id="+e.result.order_id,data:""}).success(function(e,t,i,a){if(0==e.errcode)WeixinJSBridge.invoke("getBrandWCPayRequest",e.pay_req,function(t){"get_brand_wcpay_request:ok"==t.err_msg?h.paySuccess(e.order_id):h.payFail()});else{alert(e.errmsg),g.isPaying=!1;var s=document.getElementById("btnPay");console.log(s),s.disabled=!1,s.className=""}}).error(function(e,t,i,a){}):alert(e.msg)}).then(function(e){})}}var g=e.vm={cardDetailsData:{},showPop:!1,showPopSuccess:!1,showPopFail:!1,payResult:"",order_id:"",isPaying:!1},h=e.vf={loadCardDetails:m,pay:v,paySuccess:l,payFail:d,goCardDetails:p,goMfOrderDetails:u,init:c};h.init()}e.$inject=["$scope","$rootScope","$stateParams","$http","$timeout","sAPI","$state","MALLCONFIG"],angular.module("shop").controller("cardPayCon",e)}(),function(){"use strict";function e(e,t,i,a,s,o){function n(){d.loadCardList()}function r(){var e={};a.cardList(e).then(function(e){l.cardListData=e.result.list,console.log(e)}).then(function(e){})}function c(e){s.go("cardDetails",{id:e.card_id})}var l=e.vm={cardListData:[]},d=e.vf={loadCardList:r,goCardDetail:c,init:n};d.init()}e.$inject=["$scope","$rootScope","$timeout","sAPI","$state","MALLCONFIG"],angular.module("shop").controller("cardListController",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r){function c(){v.loadCardDetails(),v.getUserInfo()}function l(){r.getuserinfo({}).then(function(e){console.log(e),m.currentUserInfo=e,m.name=m.currentUserInfo.truename,m.phone=m.currentUserInfo.phone,v.checkUserInfo()})["catch"](function(e){console.log(["err",e]),v.checkUserInfo()})}function d(){if(console.log(["currentuserinfo",m.currentUserInfo]),void 0==m.currentUserInfo||void 0==m.currentUserInfo.phone||""==m.currentUserInfo.phone){var e={type:"mfCard",id:i.id};sessionStorage.setItem("returnObject",JSON.stringify(e)),o.go("bindPhone",{})}}function u(){var e={card_id:i.id};console.log("id:"+e.card_id),s.cardDetails(e).then(function(e){m.cardDetailsData=e.result,m.cardDetailsData.description=n.trustAsHtml(m.cardDetailsData.description)}).then(function(e){})}function p(e){o.go("cardPay",{card_id:e.card_id})}var m=e.vm={cardDetailsData:{}},v=e.vf={loadCardDetails:u,goCardPay:p,getUserInfo:l,checkUserInfo:d,init:c};v.init()}e.$inject=["$scope","$rootScope","$stateParams","$timeout","sAPI","$state","$sce","nAPI"],angular.module("shop").controller("cardDetailsCon",e)}(),function(){"use strict";function e(e,t,i,a,s,o){function n(){u.loadApplyList(),u.bindScrol()}function r(){window.onscroll=function(){console.log(document.body.scrollHeight-document.body.scrollTop-window.screen.height),document.body.scrollHeight-document.body.scrollTop-window.screen.height<10&&(d.pageIndex++,u.loadApplyList())}}function c(){var e={pageindex:d.pageIndex,pagesize:d.pageSize};a.applyList(e).then(function(e){d.applyListData=d.applyListData.concat(e.result.list),console.log(e)}).then(function(e){})}function l(e){s.go("applyDetails",{activity_id:e.activity_id})}var d=e.vm={applyListData:[],pageIndex:1,pageSize:10},u=e.vf={loadApplyList:c,goApplyDetails:l,bindScrol:r,init:n};u.init()}e.$inject=["$scope","$rootScope","$timeout","sAPI","$state","MALLCONFIG"],angular.module("shop").controller("applyListController",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r){function c(){g.loadApplyDetails(),g.getUserInfo()}function l(){r.getuserinfo({}).then(function(e){v.currentUserInfo=e,v.name=v.currentUserInfo.truename,v.phone=v.currentUserInfo.phone,g.checkUserInfo()})["catch"](function(e){g.checkUserInfo()})}function d(){if(void 0==v.currentUserInfo||void 0==v.currentUserInfo.phone||""==v.currentUserInfo.phone){var e={type:"mfapply",activity_id:i.activity_id};sessionStorage.setItem("returnObject",JSON.stringify(e)),o.go("bindPhone",{})}}function u(){var e={activity_id:i.activity_id,name:v.name,phone:v.phone,email:v.email,sex:v.sex,birthday:v.birthday,group_type:v.currentGroup.value,member_type:v.currentMember.value,date_range:v.currentDate.value,amount:v.amount,remark:v.remark},t={data:JSON.stringify(e)};s.applyEntryForm(t).then(function(e){if(e.status){var t={active_type:"apply",activity_id:i.activity_id,order_id:e.result.order_id,activity_name:v.applyDetailsData.activity_name,amount:v.amount,date_range:v.currentDate.value};localStorage.setItem("orderData",JSON.stringify(t)),o.go("mfPay",{})}else alert(e.msg);console.log(e)}).then(function(e){})}function p(){for(var e=0;e<v.applyDetailsData.items.length;e++)if(v.currentGroup.value==v.applyDetailsData.items[e].group_type&&v.currentMember.value==v.applyDetailsData.items[e].is_member&&v.currentDate.value==v.applyDetailsData.items[e].date_range){v.amount=v.applyDetailsData.items[e].amount;break}}function m(){var e={activity_id:i.activity_id};console.log("id:"+e.activity_id),s.applyDetails(e).then(function(e){v.applyDetailsData=e.result,v.applyDetailsData.remark=n.trustAsHtml(v.applyDetailsData.remark),v.groupList=[];for(var t=0;t<v.applyDetailsData.group_list.length;t++){var i={name:v.applyDetailsData.group_list[t],value:v.applyDetailsData.group_list[t]};v.groupList.push(i)}v.currentGroup=v.groupList[0],v.memberTypeList=[];for(var t=0;t<v.applyDetailsData.member_type_list.length;t++){var i={name:v.applyDetailsData.member_type_list[t],value:v.applyDetailsData.member_type_list[t]};v.memberTypeList.push(i)}v.currentMember=v.memberTypeList[0],v.dateList=[];for(var t=0;t<v.applyDetailsData.date_list.length;t++){var i={name:v.applyDetailsData.date_list[t],value:v.applyDetailsData.date_list[t]};v.dateList.push(i)}for(var t=0;t<v.dateList.length;t++)v.applyDetailsData.default_date==v.dateList[t].value&&(v.currentDate=v.dateList[t]);g.calcAmount()}).then(function(e){})}var v=e.vm={applyEntryFormData:{},applyDetailsData:{},groupList:[],currentGroup:{},memberTypeList:[],currentMember:{},dateList:[],currentDate:{},currentUserInfo:{},name:"",phone:"",email:"",sex:"男",birthday:"",group_type:"",member_type:"",remark:"",amount:0},g=e.vf={loadApplyDetails:m,submitData:u,calcAmount:p,getUserInfo:l,checkUserInfo:d,init:c};g.init()}e.$inject=["$scope","$rootScope","$stateParams","$timeout","sAPI","$state","$sce","nAPI"],angular.module("shop").controller("applyEntryFormCon",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n){function r(){u.loadApplyDetails()}function c(){var e={activity_id:i.activity_id};console.log("id:"+e.activity_id),s.applyDetails(e).then(function(e){d.applyDetailsData=e.result,d.applyDetailsData.description=n.trustAsHtml(d.applyDetailsData.description)}).then(function(e){})}function l(e){o.go("applyEntryForm",{activity_id:e.activity_id})}var d=e.vm={applyDetailsData:{}},u=e.vf={loadApplyDetails:c,goApplyEntryForm:l,init:r};u.init()}e.$inject=["$scope","$rootScope","$stateParams","$timeout","sAPI","$state","$sce"],angular.module("shop").controller("applyDetailsCon",e)}(),function(){"use strict";function e(e,t,i,a,s,o){function n(){u.loadActiveList(),u.bindScrol()}function r(){window.onscroll=function(){console.log(document.body.scrollHeight-document.body.scrollTop-window.screen.height),document.body.scrollHeight-document.body.scrollTop-window.screen.height<10&&(d.pageIndex++,u.loadActiveList())}}function c(){var e={pageindex:d.pageIndex,pagesize:d.pageSize};a.activeList(e).then(function(e){d.activeListData=d.activeListData.concat(e.result.list),console.log(d.activeListData),console.log(e)}).then(function(e){})}function l(e){s.go("activeDetails",{activity_id:e.activity_id})}var d=e.vm={activeListData:[],pageIndex:1,pageSize:10},u=e.vf={loadActiveList:c,goActiveDetails:l,bindScrol:r,init:n};u.init()}e.$inject=["$scope","$rootScope","$timeout","sAPI","$state","MALLCONFIG"],angular.module("shop").controller("activeListController",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r){function c(){g.loadActiveDetails(),g.getUserInfo()}function l(){r.getuserinfo({}).then(function(e){v.currentUserInfo=e,v.name=v.currentUserInfo.truename,v.phone=v.currentUserInfo.phone,g.checkUserInfo()})["catch"](function(e){g.checkUserInfo()})}function d(){if(void 0==v.currentUserInfo||void 0==v.currentUserInfo.phone||""==v.currentUserInfo.phone){var e={type:"mfactive",activity_id:i.activity_id};sessionStorage.setItem("returnObject",JSON.stringify(e)),o.go("bindPhone",{})}}function u(){var e={activity_id:i.activity_id,name:v.name,phone:v.phone,email:v.email,sex:v.sex,birthday:v.birthday,group_type:v.currentGroup.value,member_type:v.currentMember.value,amount:v.amount,remark:v.remark},t={data:JSON.stringify(e)};s.activeEntryForm(t).then(function(e){if(e.status)if(1==v.activeDetailsData.is_need_pay){var t={active_type:"active",activity_id:i.activity_id,order_id:e.result.order_id,activity_name:v.activeDetailsData.activity_name,amount:v.amount,date_range:""};localStorage.setItem("orderData",JSON.stringify(t)),o.go("mfPay",{})}else o.go("myApplyList",{});else alert(e.msg);console.log(e)}).then(function(e){})}function p(){for(var e=0;e<v.activeDetailsData.items.length;e++)if(v.currentGroup.value==v.activeDetailsData.items[e].group_type&&v.currentMember.value==v.activeDetailsData.items[e].is_member){v.amount=v.activeDetailsData.items[e].amount;break}}function m(){var e={activity_id:i.activity_id};console.log("id:"+e.activity_id),s.activeDetails(e).then(function(e){v.activeDetailsData=e.result,v.activeDetailsData.remark=n.trustAsHtml(v.activeDetailsData.remark),v.groupList=[];for(var t=0;t<v.activeDetailsData.group_list.length;t++){var i={name:v.activeDetailsData.group_list[t],value:v.activeDetailsData.group_list[t]};v.groupList.push(i)}v.currentGroup=v.groupList[0],v.memberTypeList=[];for(var t=0;t<v.activeDetailsData.member_type_list.length;t++){var i={name:v.activeDetailsData.member_type_list[t],value:v.activeDetailsData.member_type_list[t]};v.memberTypeList.push(i)}v.currentMember=v.memberTypeList[0],g.calcAmount()}).then(function(e){})}var v=e.vm={activeEntryFormData:{},activeDetailsData:{},groupList:[],currentGroup:{},memberTypeList:[],currentMember:{},currentUserInfo:{},name:"",phone:"",email:"",sex:"男",birthday:"",group_type:"",member_type:"",remark:"",amount:0},g=e.vf={loadActiveDetails:m,submitData:u,calcAmount:p,getUserInfo:l,checkUserInfo:d,init:c};g.init()}e.$inject=["$scope","$rootScope","$stateParams","$timeout","sAPI","$state","$sce","nAPI"],angular.module("shop").controller("activeEntryFormCon",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n){function r(){u.loadActiveDetails()}function c(){var e={activity_id:i.activity_id};console.log("id:"+e.activity_id),s.activeDetails(e).then(function(e){d.activeDetailsData=e.result,d.activeDetailsData.description=n.trustAsHtml(d.activeDetailsData.description)}).then(function(e){})}function l(e){o.go("activeEntryForm",{activity_id:e.activity_id})}var d=e.vm={activeDetailsData:{}},u=e.vf={loadActiveDetails:c,goActiveEntryForm:l,init:r};u.init()}e.$inject=["$scope","$rootScope","$stateParams","$timeout","sAPI","$state","$sce"],angular.module("shop").controller("activeDetailsCon",e)}(),function(){"use strict";function e(e,t,i,a,s,o){function n(){d.loadOrderList()}function r(){var e={};a.mfOrderList(e).then(function(e){l.orderListData=e.result.list,console.log(e)}).then(function(e){})}function c(e){s.go("MfOrderDetails",{order_id:e.order_id})}var l=e.vm={orderListData:[]},d=e.vf={loadOrderList:r,goOrderDetails:c,init:n};d.init()}e.$inject=["$scope","$rootScope","$timeout","sAPI","$state","MALLCONFIG"],angular.module("shop").controller("mfOrderListCon",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n){function r(){var e={order_id:i.order_id};s.mfOrderDetails(e).then(function(e){c.orderDetailsData=e.result,console.log(e)}).then(function(e){})}var c=e.vm={orderDetailsData:{}},l=e.vf={loadOrderDetails:r};l.loadOrderDetails()}e.$inject=["$scope","$rootScope","$stateParams","$timeout","sAPI","$state","MALLCONFIG"],angular.module("shop").controller("mfOrderDetailsCon",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r){function c(){l(),"invoicinginformation"==w.upt?p():u(),d()}function l(){o.commPost(o.commUrl.getUserInfoFieldsUrl,{}).then(function(e){e.status&&(t.userInfoFields=e.result,d())})}function d(){if("gender"==w.upt?w.title="性别":"avatar"==w.upt?w.title="头像":"truename"==w.upt?w.title="姓名":"phone"==w.upt?w.title="手机":"email"==w.upt?w.title="邮箱":"identity_card_photo"==w.upt?w.title="实名认证":"business_intelligence_certificate_photo"==w.upt?w.title="公司资质":"invoicinginformation"==w.upt&&(w.title="开票资料"),t.userInfoFields){var e=t.userInfoFields[w.upt];e&&e.showname&&(w.title=e.showname,w.placeholder=e.showname)}r.setPageTitle(w.title)}function u(){r.getUserInfo(function(){t.userInfo.phone&&(t.userInfo.phone=Number(t.userInfo.phone)),w.user=t.userInfo,"songhe"==w.user.websiteowner&&w.user.member_level>=10&&w.limit.indexOf(w.upt)>=0?w.canPost=!1:w.canPost=!0})}function p(){var e={};"invoicinginformation"==w.upt&&(e.type="InvoicingInformation"),o.commPost(o.commUrl.getUserExpand,e).then(function(e){e.status&&(w.userEx=e.result)})}function m(e){console.log(e)}function v(e,t,i){return e.files.length?(w.upEx=!!i,w.upKey=t,w.layerIndex=layer.open({type:2,shadeClose:!1}),void zcUpload(e.files[0],800,800,g,h,f)):void zcAlert("请选择文件")}function g(e){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total),i=t.toString()+"%";$('.layermbox[index="'+w.layerIndex+'"] .layermcont div').text(i)}}function h(t){layer.close(w.layerIndex);var i=angular.fromJson(t.target.responseText);0==i.errcode&&i.file_url_list&&i.file_url_list.length>0?(e.$apply(function(){w.upEx?w.userEx[w.upKey]=i.file_url_list[0]:w.user[w.upKey]=i.file_url_list[0]}),w.upKey=""):(w.upKey="",zcAlert(i.errmsg))}function f(e){layer.close(w.layerIndex)}function _(){if(!w.isShowWait){var e={phone:w.phone};if(!e.phone)return void zcAlert("请输入手机号");if(e.phone==w.user.phone)return void zcAlert("新手机号等于原手机");e.check_user=1,e.limit_user=2,w.isShowWait=!0,w.layerIndex=layer.open({type:2,content:"发送中"}),n.getSMSCode(e).then(function(e){layer.close(w.layerIndex),e.status?(w.isShowWait=!0,y()):(w.isShowWait=!1,zcAlert(e.msg))})["catch"](function(e){layer.close(w.layerIndex),console.log("验证码失败",e),w.isShowWait=!1})}}function y(){w.waitTime=60,w.waitForSMSCodeTimer=s(function(){w.waitTime<=0||!w.isShowWait?(s.cancel(w.waitForSMSCodeTimer),w.isShowWait=!1,w.waitTime=0):w.waitTime--},1e3,0)}function D(){if(!w.canPost)return void zcAlert("禁止提交");var e={};if("gender"==w.upt){if(e.gender=w.user.gender,!e.gender)return void zcAlert("请设置性别")}else if("avatar"==w.upt){if(e.avatar=w.user.avatar,!e.avatar)return void zcAlert("请设置头像")}else if("truename"==w.upt){if(e.truename=w.user.truename,!e.truename)return void zcAlert("请设置姓名")}else if("phone"==w.upt){if(e.phone=w.phone,!e.phone)return void zcAlert("请设置手机");if(e.phone==w.user.phone)return void zcAlert("新手机号等于原手机");if(e.code=w.code,!e.code)return void zcAlert("请输入验证码");e.check_code=1}else if("email"==w.upt){if(e.email=w.user.email,!e.email)return void zcAlert("请设置邮箱")}else if("identity_card_photo"==w.upt){if(e.identity_card_photo_front=w.user.identity_card_photo_front,!e.identity_card_photo_front)return void zcAlert("请上传身份证正面照片");if(e.identity_card_photo_behind=w.user.identity_card_photo_behind,!e.identity_card_photo_behind)return void zcAlert("请上传身份证反面照片");if(e.identity_card_photo_handheld=w.user.identity_card_photo_handheld,!e.identity_card_photo_handheld)return void zcAlert("请上传手持身份证照片")}else if("business_intelligence_certificate_photo"==w.upt){if(!w.user.business_intelligence_certificate_photo1)return void zcAlert("请上传公司资质照片");e.business_intelligence_certificate_photo1=w.user.business_intelligence_certificate_photo1,w.user.intelligence_certificate_business&&(e.intelligence_certificate_business=w.user.intelligence_certificate_business),
w.user.business_intelligence_certificate_photo2&&(e.business_intelligence_certificate_photo2=w.user.business_intelligence_certificate_photo2),w.user.business_intelligence_certificate_photo3&&(e.business_intelligence_certificate_photo3=w.user.business_intelligence_certificate_photo3),w.user.business_intelligence_certificate_photo4&&(e.business_intelligence_certificate_photo4=w.user.business_intelligence_certificate_photo4),w.user.business_intelligence_certificate_photo5&&(e.business_intelligence_certificate_photo5=w.user.business_intelligence_certificate_photo5)}else e[w.upt]=w.user[w.upt];if(0==Object.keys(e).length)return void zcAlert("请完善信息");var t={data:angular.toJson(e)};w.layerIndex=layer.open({type:2,content:"提交中"}),o.commPost(o.commUrl.updateInfo,t).then(function(e){layer.close(w.layerIndex),e.isSuccess?(sessionStorage.removeItem("pageConfig"),document.referrer&&zcToUrl(document.referrer,!0)):zcAlert("保存失败")})["catch"](function(e){layer.close(w.layerIndex)})}function b(){var e={};if(w.userEx.value&&(e.value=w.userEx.value),w.userEx.ex1&&(e.ex1=w.userEx.ex1),w.userEx.ex2&&(e.ex2=w.userEx.ex2),w.userEx.ex3&&(e.ex3=w.userEx.ex3),w.userEx.ex4&&(e.ex4=w.userEx.ex4),w.userEx.ex5&&(e.ex5=w.userEx.ex5),w.userEx.ex6&&(e.ex6=w.userEx.ex6),w.userEx.ex7&&(e.ex7=w.userEx.ex7),w.userEx.ex8&&(e.ex8=w.userEx.ex8),w.userEx.ex9&&(e.ex9=w.userEx.ex9),w.userEx.ex10&&(e.ex10=w.userEx.ex10),"invoicinginformation"==w.upt){if(e.type="InvoicingInformation",!e.value)return void zcAlert("请选择发票类型");"增值税普通发票"==e.value&&(e.ex7=null)}w.layerIndex=layer.open({type:2,content:"提交中"}),o.commPost(o.commUrl.updateUserExpand,e).then(function(e){layer.close(w.layerIndex),e.status?(sessionStorage.removeItem("pageConfig"),document.referrer&&zcToUrl(document.referrer,!0)):zcAlert("保存失败")})["catch"](function(e){layer.close(w.layerIndex)})}var w=e.vm={upt:i.upt,limit:["phone","truename"],invoicTypes:["增值税普通发票","增值税专用发票"],title:"设置",placeholder:"",isShowWait:!1,waitForSMSCodeTimer:!1,waitTime:60,user:!1,userEx:!1,canPost:!1,upKey:"",upEx:!1,phone:"",code:"",layerIndex:!1};e.vf={init:c,upload:v,getSMSCode:_,waitForSMSCode:y,changeExSelect:m,updateEx:b,update:D};c()}e.$inject=["$scope","$rootScope","$stateParams","$timeout","$interval","sAPI","nAPI","commService"],angular.module("shop").controller("userUpdateCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s){function o(){r(),c(),n()}function n(){s.setPageTitle("设置")}function r(){s.getUserInfo(function(){d.user=t.userInfo},function(){window.location.href="#/bindPhone/1"},!0)}function c(){a.commPost(a.commUrl.getUserInfoFieldsUrl,{}).then(function(e){e.status&&(d.field=e.result,t.userInfoFields=d.field)})}function l(){s.delAllCookie(),a.loginOut().then(function(e){t.goUrl("#/bindPhone/1")})}var d=e.vm={user:!1,field:!1};e.vf={init:o,loginOut:l};o()}e.$inject=["$scope","$rootScope","$timeout","sAPI","commService"],angular.module("shop").controller("userInfoCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r){function c(){"1"==v.isLogin&&d(),l()}function l(){var e="1"==v.isLogin?"修改密码":"忘记密码";r.setPageTitle(e)}function d(){r.getUserInfo(function(){v.phone=Number(t.userInfo.phone),v.id=t.userInfo.id})}function u(){var e={phone:v.phone,code:v.code,pwd:v.password};return e.phone?e.code?e.pwd?(v.layerIndex=layer.open({type:2,content:"提交中"}),void o.commPost(o.commUrl.updatePassword,e).then(function(e){layer.close(v.layerIndex),e.status?zcAlert(e.msg,"",3,function(){zcBack()}):zcAlert(e.msg)})["catch"](function(e){layer.close(v.layerIndex)})):void zcAlert("请输入新密码"):void zcAlert("请输入验证码"):void zcAlert("请输入手机号")}function p(){if(!v.isShowWait){var e={phone:v.phone};if(!e.phone)return void zcAlert("请输入手机号");v.isShowWait=!0,v.layerIndex=layer.open({type:2,content:"发送中"}),n.getSMSCode(e).then(function(e){layer.close(v.layerIndex),e.status?(v.isShowWait=!0,m()):(v.isShowWait=!1,alert(e.msg))})["catch"](function(e){layer.close(v.layerIndex),console.log("验证码失败",e),v.isShowWait=!1})}}function m(){v.waitTime=60,v.waitForSMSCodeTimer=s(function(){v.waitTime<=0||!v.isShowWait?(s.cancel(v.waitForSMSCodeTimer),v.isShowWait=!1,v.waitTime=0):v.waitTime--},1e3,0)}var v=e.vm={isLogin:i.isLogin,isShowWait:!1,waitForSMSCodeTimer:!1,layerIndex:!1,waitTime:60,id:0,phone:"",code:"",password:""};e.vf={init:c,getSMSCode:p,waitForSMSCode:m,updatePassword:u};c()}e.$inject=["$scope","$rootScope","$stateParams","$timeout","$interval","sAPI","nAPI","commService"],angular.module("shop").controller("forgetPasswordCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s,o){function n(t,i){e.imgData=[],console.log(["e",t]);for(var a=t.target.files.length,s=0;a>s;s++)e.imgData.push(t.target.files[s]);var n=parseInt(i.substring(i.length-1,i.length));console.log(["labelindex",n]),o.show("图片上传中"),setTimeout(function(){console.log(e.imgData),r(n)},200)}function r(t){var a=new XMLHttpRequest;a.open("POST",i.mainsiteurl+"/serv/api/common/file.ashx?action=add",!0);var s=new FormData;console.log(["$scope.imgData",e.imgData]);for(var n=0;n<e.imgData.length;n++)console.log("$scope.imgData[i]",e.imgData[n]),s.append("file",e.imgData[n]);a.send(s),a.onreadystatechange=function(i){if(console.log(["xhr.responseText",a.responseText]),4==a.readyState)if(200==a.status){console.log(["JSON.parse(xhr.responseText)",JSON.parse(a.responseText)]);var s=JSON.parse(a.responseText);e.imgURLs[t]=s.file_url_list[0],o.hide(),c(e.imgURLs,t)}else o.hide(),console.log(["JSON.parse(xhr.responseText)",JSON.parse(a.responseText)])}}function c(e,t){$(".jia"+t).remove(),$(".label"+t).prepend('<img src="'+e[t]+'">')}function l(e){o.show(e),setTimeout(function(){o.hide()},600)}console.log("applyRefund.......");var d={};e.pageData=d,t.orderId&&(d.orderId=t.orderId),t.orderDetailId&&(d.orderDetailId=t.orderDetailId),d.refundData={order_detail_id:d.orderDetailId,refund_reason:"",refund_amount:"",phone:"",remark:"",is_return_product:"",imagelist:[]},s.orderDetail("/mall/order.ashx",{action:"get",order_id:d.orderId},function(e){console.log(["获取订单详情成功",e]),d.orderData=e,d.orderData.product_name=d.orderData.product_list[0].product_name,d.orderData.product_name.length>17&&(d.orderData.product_name=d.orderData.product_name.substring(0,16)+"..."),d.orderData.product_totalPrice=d.orderData.product_list[0].price*d.orderData.product_list[0].count,"已发货"==d.orderData.order_status||"交易成功"==d.orderData.order_status?d.refundData.is_return_product=1:d.refundData.is_return_product=0},function(e){console.log(["获取订单详情失败",e])}),s.getmaxrefundamount({order_detail_id:d.orderDetailId},function(t){console.log(["获取商品最大退款金额成功",t]),0==t.errcode&&(e.maxRefundAmount=t.max_refund_amount)},function(e){console.log(["获取商品最大退款金额失败",e])}),e.refundReasons=[{reason:"请选择退款原因"},{reason:"买/卖双方协商一致"},{reason:"买错/多买/不想要"},{reason:"商品质量问题"},{reason:"未收到货品"},{reason:"其他"}],e.theReason={reason:""},e.theReason.reason=e.refundReasons[0],$("#upLoadImg0")[0].addEventListener("change",function(e){n(e,"#upLoadImg0")},!1),$("#upLoadImg1")[0].addEventListener("change",function(e){n(e,"#upLoadImg1")},!1),$("#upLoadImg2")[0].addEventListener("change",function(e){n(e,"#upLoadImg2")},!1),e.imgURLs=[],e.submitRefund=function(){return d.refundData.refund_reason=e.theReason.reason.reason,d.refundData.imagelist=e.imgURLs,console.log(["提交的信息",d.refundData]),"请选择退款原因"==d.refundData.refund_reason?void l("请选择退货原因"):""==d.refundData.refund_amount?void l("请输入退款金额"):parseInt(d.refundData.refund_amount)>e.maxRefundAmount?void l("退款金额不得大于最大退款金额"):/^0?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/.test(d.refundData.phone)?void(1==t.update?s.refundUpdate({data:JSON.stringify(d.refundData)},function(e){0===e.errcode?(console.log(["更新退款申请成功",e]),i.gobackpagetwice=!0,a.go("refundState",{orderDetailId:d.orderDetailId,orderId:d.orderId})):(console.log(["更新退款申请失败",e]),l(e.errmsg))},function(e){console.log(["更新退款申请请求失败",e]),l(e.errmsg)}):s.refundApply({data:JSON.stringify(d.refundData)},function(e){0===e.errcode?(console.log(["提交退款申请成功",e]),i.gobackpagetwice=!0,a.go("refundState",{orderDetailId:d.orderDetailId,orderId:d.orderId})):(console.log(["提交退款申请失败",e]),l(e.errmsg))},function(e){console.log(["提交退款申请请求失败",e]),l(e.errmsg)})):void l("请输入正确的电话号码")}}e.$inject=["$scope","$stateParams","$rootScope","$state","mAPI","wLoading"],angular.module("shop").controller("applyRefundCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s,o){t.orderDetailId&&(e.orderDetailId=t.orderDetailId),t.orderId&&(e.orderId=t.orderId),e.logisticsInfo={order_detail_id:e.orderDetailId,express_company_name:"",express_number:""},e.expressCompany=[{name:"请选择物流公司"},{name:"EMS"},{name:"顺丰"},{name:"申通"},{name:"圆通"},{name:"中通"},{name:"汇通"},{name:"韵达"},{name:"天天"},{name:"德邦"},{name:"全峰"},{name:"能达"},{name:"优速"}],e.currentCompany={name:""},e.currentCompany.name=e.expressCompany[0],e.submitExpress=function(){return console.log(e.currentCompany.name.name),"请选择物流公司"==e.currentCompany.name.name?(o.show("请选择物流公司"),void setTimeout(function(){o.hide()},600)):(e.logisticsInfo.express_company_name=e.currentCompany.name.name,""==e.logisticsInfo.express_number?(o.show("请填写物流单号"),void setTimeout(function(){o.hide()},600)):(console.log(["要提交的物流信息",e.logisticsInfo]),void s.submitExpressInfo({order_detail_id:e.orderDetailId,express_company_name:e.logisticsInfo.express_company_name,express_number:e.logisticsInfo.express_number},function(t){console.log(["提交物流信息成功",t]),0==t.errcode?a.go("refundState",{orderId:e.orderId,orderDetailId:e.orderDetailId}):(o.show(t.errmsg),setTimeout(function(){o.hide()},600))},function(e){console.log(["提交物流信息失败",e])})))}}e.$inject=["$scope","$stateParams","$rootScope","$state","mAPI","wLoading"],angular.module("shop").controller("returnLogisticsCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n){console.log("refundStateCtrl........."),t.orderDetailId&&(e.orderDetailId=t.orderDetailId),t.orderId&&(e.orderId=t.orderId),s.refundDetail({order_detail_id:e.orderDetailId},function(t){console.log(["获取退款详情成功",t]),e.refundDetailData=t},function(e){console.log(["获取退款详情失败",e])}),e.closeRefund=function(){var t=o.confirm({title:"友情提示",template:"确定关闭退款申请？",cssClass:"borderradius5px",cancelText:"取消",cancelType:"button button-clear button-positive",okText:"确认",okType:"button button-clear button-positive"});t.then(function(t){t?s.refundClose({order_detail_id:e.orderDetailId},function(e){console.log(["关闭退款申请成功",e]),0==e.errcode&&(n.show("关闭退货申请成功"),setTimeout(function(){n.hide(),location.reload()},600))},function(e){console.log(["关闭退款申请失败",e])}):console.log("取消删除地址")})}}e.$inject=["$scope","$stateParams","$rootScope","$state","mAPI","wPopup","wLoading"],angular.module("shop").controller("refundStateCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s){t.orderDetailId&&(e.orderDetailId=t.orderDetailId),s.refundLog({order_detail_id:e.orderDetailId},function(t){console.log(["获取协商记录成功",t]),e.refundLogData=t.list,angular.forEach(e.refundLogData,function(e,t){e.time=new Date(parseInt(e.time)).toLocaleString(),$(".mainContent").append('<div class="logContent"><span class="user">'+e.role+'</span><span class="time">'+e.time+"</span><h5>"+e.title+'</h5><div class="content">'+e.content+"</div></div>")})},function(e){console.log(["获取协商记录失败",e])})}e.$inject=["$scope","$stateParams","$rootScope","$state","mAPI"],angular.module("shop").controller("refundLogCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s){console.log("refundDestinationCtrl.........");var o={};e.pageData=o,t.orderId&&(o.orderId=t.orderId),t.orderDetailId&&(o.orderDetailId=t.orderDetailId),s.orderDetail("/mall/order.ashx",{action:"get",order_id:o.orderId},function(e){console.log(["获取订单详情成功",e]),o.orderData=e,angular.forEach(o.orderData.product_list,function(e,t){e.order_detail_id==o.orderDetailId&&(o.orderData.head_img=e.img_url,o.orderData.product_name=e.product_name)})},function(e){console.log(["获取订单详情失败",e])}),s.refundDetail({order_detail_id:o.orderDetailId},function(t){console.log(["获取退款详情成功",t]),e.refundDetailData=t},function(e){console.log(["获取退款详情失败",e])}),e.step=1,s.weixintransferInfoNew({order_detail_id:o.orderDetailId},function(t){if(console.log(["获取退款成功去处成功",t]),0==t.errcode)switch(e.refundDestinationDate=t,e.refundDestinationDate.refund_status){case"PROCESSING":e.step=2;break;case"SUCCESS":e.step=3;break;default:e.step=1}console.log(["$scope.step",e.step])},function(e){console.log(["获取退款成功去处失败",e])})}e.$inject=["$scope","$stateParams","$rootScope","$state","mAPI"],angular.module("shop").controller("refundDestinationCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n){function r(){h.theReason=h.refundReasons[0],h.applyService=h.applyServices[0],h.goodsStatus=h.goodsStatuses[0],h.noGoodsReason=h.noGoodsReasons[0],$("#upLoadImg0")[0].addEventListener("change",function(e){d(e,"#upLoadImg0")},!1),$("#upLoadImg1")[0].addEventListener("change",function(e){d(e,"#upLoadImg1")},!1),$("#upLoadImg2")[0].addEventListener("change",function(e){d(e,"#upLoadImg2")},!1),h.imgURLs=[],c(),g()}function c(){s.orderDetail("/mall/order.ashx",{action:"get",order_id:h.pageData.orderId},function(e){console.log(["获取订单详情成功",e]),h.orderData=e,h.currProductList=h.orderData.product_list,"待发货"==h.orderData.order_status&&(h.applyServices=[],h.applyServices.push({type:"仅退款"}),h.applyService=h.applyServices[0],console.log(["vm.applyServices",h.applyServices]));for(var t=0;t<h.currProductList.length;t++)if(h.currProductList[t].order_detail_id==h.currId){h.orderData.product_name=h.currProductList[t].product_name,h.orderData.product_name.length>17&&(h.orderData.product_name=h.orderData.product_name.substring(0,16)+"..."),h.orderData.product_totalPrice=h.currProductList[t].price*h.currProductList[t].count,h.orderData.totalScore=h.currProductList[t].score*h.currProductList[t].count;break}},function(e){console.log(["获取订单详情失败",e])})}function l(){s.getmaxrefundamount({order_detail_id:h.pageData.orderDetailId},function(e){console.log(["获取商品最大退款金额成功",e]),0==e.errcode&&(h.maxRefundAmount=e.max_refund_amount)},function(e){console.log(["获取商品最大退款金额失败",e])})}function d(e,t){var i=parseInt(t.substring(t.length-1,t.length));console.log(["labelindex",i]),n.show("图片上传中"),setTimeout(function(){console.log(h.imgData),u(e.target.files[0],i)},200)}function u(e,t){zcUpload(e,800,0,function(e){},function(e){var i=JSON.parse(e.target.responseText);0==i.errcode&&i.file_url_list&&i.file_url_list.length>0?(h.imgURLs[t]=i.file_url_list[0],n.hide(),p(h.imgURLs,t)):(zcAlert(i.errmsg),n.hide())},function(e){zcAlert("上传失败"),n.hide()})}function p(e,t){$(".jia"+t).remove(),$(".viewImg"+t).remove(),$(".label"+t).prepend('<img class="viewImg'+t+'" src="'+e[t]+'">')}function m(){if(h.pageData.refundData.product_status=h.goodsStatus.status,"未收到货"==h.goodsStatus.status&&"退货退款"!=h.applyService.type?h.pageData.refundData.refund_reason=h.noGoodsReason.reason:h.pageData.refundData.refund_reason=h.theReason.reason,"退货退款"==h.applyService.type)h.pageData.refundData.is_return_product=1;else if("仅退款"==h.applyService.type&&(h.pageData.refundData.is_return_product=0,"请选择货物状态"==h.pageData.refundData.product_status))return void v("请选择货物状态");return h.pageData.refundData.imagelist=h.imgURLs,console.log(["提交的信息",h.pageData.refundData]),"请选择退款原因"==h.pageData.refundData.refund_reason||"请选择退货原因"==h.pageData.refundData.refund_reason?void v("请选择退货原因"):/^0?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/.test(h.pageData.refundData.phone)?void(1==t.update?s.refundUpdate({data:JSON.stringify(h.pageData.refundData)},function(e){0===e.errcode?(console.log(["更新退款申请成功",e]),i.gobackpagetwice=!0,a.go("refundState",{orderDetailId:h.pageData.orderDetailId,orderId:h.pageData.orderId})):(console.log(["更新退款申请失败",e]),v(e.errmsg))},function(e){console.log(["更新退款申请请求失败",e]),v(e.errmsg)}):s.refundApply({data:JSON.stringify(h.pageData.refundData)},function(e){0===e.errcode?(console.log(["提交退款申请成功",e]),i.gobackpagetwice=!0,a.go("refundState",{orderDetailId:h.pageData.orderDetailId,orderId:h.pageData.orderId})):(console.log(["提交退款申请失败",e]),v(e.errmsg))},function(e){console.log(["提交退款申请请求失败",e]),v(e.errmsg)})):void v("请输入正确的电话号码")}function v(e){n.show(e),setTimeout(function(){n.hide()},600)}function g(){var e={action:"getmaxrefundinfo",order_detail_id:t.orderDetailId};o.getMaxRefundInfo(e).then(function(e){0==e.errcode&&(h.pageData.refundData.refund_amount=e.max_refund_amount,h.pageData.refundData.refund_score=e.max_refund_score,h.pageData.refundData.refund_account_amount=e.max_refund_account_amount)})["catch"](function(e){})}var h=e.vm={pageData:{orderId:t.orderId,orderDetailId:t.orderDetailId,refundData:{order_detail_id:t.orderDetailId,refund_reason:"",refund_amount:"",phone:"",remark:"",imagelist:[],is_return_product:"",product_status:"",refund_score:0,refund_account_amount:0}},maxRefundAmount:0,applyServices:[{type:"退货退款"},{type:"仅退款"}],applyService:{},refundReasons:[{reason:"请选择退货原因"},{reason:"质量问题"},{reason:"商品成分描述不符"},{reason:"收到商品少件/破损等"},{reason:"产地/批号/规格等描述不符"},{reason:"假冒品牌"},{reason:"卖家发错货"},{reason:"拍错/多拍/不喜欢"},{reason:"三无产品"},{reason:"生产日期/保质期描述不符"},{reason:"其他"}],theReason:{},goodsStatuses:[{status:"请选择货物状态"},{status:"未收到货"},{status:"已收到货"}],goodsStatus:{},noGoodsReasons:[{reason:"请选择退款原因"},{reason:"快递一直未送到"},{reason:"空包裹/少货"},{reason:"多拍/拍错/不想要"},{reason:"快递无跟踪记录"},{reason:"未按约定时间发货"},{reason:"其他"}],noGoodsReason:{},imgURLs:[],imgData:[],orderData:{},refundInfo:{},currProductList:[],currId:t.orderDetailId};e.vf={getOrderDatail:c,getMaxRefundAmount:l,getFile:d,upLoadImg:u,viewImg:p,submitRefund:m,getMaxRefundInfo:g,init:r};r()}e.$inject=["$scope","$stateParams","$rootScope","$state","mAPI","nAPI","wLoading"],angular.module("shop").controller("applyRefundCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s,o){e.registerInfo={phone:"",smscontent:"",password:"",passwordconfirm:"",smsvercode:"",nickname:""};var n=/^0?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/,r=/^[0-9]{6}$/;e.registerInfo.smscontent=encodeURIComponent("您的验证码为{{SMSVERCODE}}"),e.verificationcodeFunc=function(){if(!n.test(e.registerInfo.phone)){var t="请输入正确的手机号码";return void alert(t)}$(".vertifycodebt").attr("disabled","disabled").text("重新获取验证码(60s)");var i=60;e.timer=setInterval(function(){i--,$(".vertifycodebt").text("重新获取验证码("+i+"s)"),0>=i&&(clearInterval(e.timer),$(".vertifycodebt").text("获取验证码").removeAttr("disabled"))},1e3),s.verificationcode("/common/smsvercode.ashx",{phone:e.registerInfo.phone,smscontent:e.registerInfo.smscontent},function(e,t,i,a){if(0===e.errcode){console.log(["获取验证码成功",e]);var s="验证码已发送,如果没收到，请60秒后再点击获取";alert(s)}else console.log(["获取验证码失败",e]),alert(e.errmsg)},function(e,t,i,a){console.log(["获取验证码请求失败",e])})},e.registerFunc=function(){if(""===e.registerInfo.nickname){var t="昵称不能为空";return void alert(t)}if(!n.test(e.registerInfo.phone)){var t="请输入正确的手机号码";return void alert(t)}if(!r.test(e.registerInfo.smsvercode)){var t="请输入6位验证码";return void alert(t)}if(""===e.registerInfo.password){var t="密码不能为空";return void alert(t)}if(e.registerInfo.password!=e.registerInfo.passwordconfirm){var t="重复密码与密码不同";return void alert(t)}s.register("/user/registerbyphone.ashx",{username:e.registerInfo.phone,password:e.registerInfo.password,passwordconfirm:e.registerInfo.passwordconfirm,smsvercode:e.registerInfo.smsvercode,nickname:e.registerInfo.nickname},function(e,t,i,a){0===e.errcode?(console.log(["注册成功",e]),alert(e.errmsg,function(){o.go("login")})):(console.log(["注册失败",e]),alert(e.errmsg))},function(e,t,i,a){console.log(["注册请求失败",e])})}}e.$inject=["$scope","$timeout","webDevTec","toastr","mAPI","$state"],angular.module("shop").controller("registerCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n){function r(e,t,i){var a=new Date;a.setDate(a.getDate()+i),document.cookie=e+"="+escape(t)+(null==i?"":";expires="+a.toGMTString())+";path=/;domain="}function c(){e.loginInfo.phoneCodeTime--,e.loginInfo.phoneCodeTime>0&&i(c,1e3)}e.loginInfo={username:"",password:"",phoneCodeTime:0,phoneerror:!1};e.loginFunc=function(){o.login("/user/login.ashx",{username:e.loginInfo.username,password:e.loginInfo.password},function(e){if(0===e.errcode){if(console.log(["登录成功",e]),r("ASP.NET_SessionId",e.session_id,1),o.currentUserInfo("/user/info.ashx",{action:"currentuserinfo"},function(e){console.log(["获取用户信息成功",e])},function(e){console.log(["获取用户信息失败",e])}),1==t.favourite&&(t.favourite=2),window.sessionStorage.removeItem("loginBasketProducts"),window.sessionStorage.getItem("basketProducts")&&(window.sessionStorage.setItem("loginBasketProducts",window.sessionStorage.getItem("basketProducts")),window.sessionStorage.removeItem("basketProducts")),window.sessionStorage.removeItem("orderProducts"),window.sessionStorage.getItem("buyProducts"))return window.sessionStorage.setItem("orderProducts",window.sessionStorage.getItem("buyProducts")),void window.sessionStorage.removeItem("buyProducts");history.go(-1)}else console.log(["登录失败",e]),alert(e.errmsg)},function(e){console.log(["登录请求失败",e])})},e.loginSubmit=function(){o.loginsms({phone:e.loginInfo.username,sms_vercode:e.loginInfo.password},function(e){console.log(["登录成功",e]),0===e.errcode?history.length>2?history.go(-1):n.go("home"):alert(e.errmsg)},function(e){console.log(["登录失败",e]),alert("网络连接错误")})},e.getPhoneCode=function(t){t.$error.required||t.$error.pattern||(e.loginInfo.phoneCodeTime=60,c(),o.verificationcode("/common/smsvercode.ashx",{phone:e.loginInfo.username,smscontent:encodeURIComponent("您的验证码为{{SMSVERCODE}}")},function(e,t,i,a){if(0===e.errcode){console.log(["获取验证码成功",e]);var s="验证码已发送,如果没收到，请60秒后再点击获取";alert(s)}else console.log(["获取验证码失败",e]),alert(e.errmsg)},function(e,t,i,a){console.log(["获取验证码请求失败",e])}))},e.checkerror=function(t){e.loginInfo.phoneerror=t.$error.required||t.$error.pattern,console.log(e.loginInfo.phoneerror)}}e.$inject=["$scope","$rootScope","$timeout","webDevTec","toastr","mAPI","$state"],angular.module("shop").controller("loginCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r,c,l,d){function u(){p(),g(),D()}function p(){n.getGroupBuyDetail({order_id:b.goodsGroupId}).then(function(t){if(t.status){if(b.dataInfo=t.result,b.dataInfo.product_desc=o.trustAsHtml(b.dataInfo.product_desc),null!=b.dataInfo.pay_order_id&&""!=b.dataInfo.pay_order_id&&(b.showPayBtn=!0),b.dataInfo.people_count==b.dataInfo.pay_people_count?b.isGroupFull=!0:b.isGroupFull=!1,1==b.dataInfo.group_buy_status&&(b.isGroupFull=!0),b.dataInfo&&b.dataInfo.people_list&&b.dataInfo.people_list.length>0){var a=b.dataInfo.people_list[0].user_id;window.localStorage.setItem("sale_id",a);for(var n=0;n<b.dataInfo.people_list.length;n++)0==n?"1"==b.dataInfo.ex10?(b.dataInfo.people_list[n].startGroup="参团",b.dataInfo.people_list[n].groupLeader="团员"):(b.dataInfo.people_list[n].startGroup="开团",b.dataInfo.people_list[n].groupLeader="团长"):(b.dataInfo.people_list[n].startGroup="参团",b.dataInfo.people_list[n].groupLeader="团员")}v();var u=location.href;r.title="「一起拼」我买了“"+b.dataInfo.product_name+"”，你来一起拼吧！",r.desc="我买了“"+b.dataInfo.product_name+"”，一起拼吧，拼到就是赚到！",d.getUserInfo(function(){i.userInfo&&(r.link=i.mainsiteurl+"/customize/shop/?v=1.0&sale_id="+i.userInfo.userid+"&ngroute="+u.substring(u.indexOf("#")+1,u.length)+"#"+u.substring(u.indexOf("#")+1,u.length))},function(){}),r.imgUrl=b.dataInfo.product_img_url,c.share(r),b.isShowPage=!0}else l.alert(t.msg),s(function(){e.go("groupGoodsList")},3e3)})["catch"](function(e){l.alert(e.msg)})}function m(){b.orderProduct.properties=b.dataInfo.product_properties,b.orderProduct.sku_id=b.dataInfo.sku_id,b.orderProduct.order_id=b.goodsGroupId,b.orderProduct.price=b.dataInfo.member_price,b.orderProduct.title=b.dataInfo.title,b.orderProduct.num=1,b.orderProduct.grouptype="member",b.orderProduct.img_url=b.dataInfo.product_img_url,b.orderProduct.score=b.dataInfo.score,b.orderProduct.product_id=b.dataInfo.product_id,b.orderProduct.is_cashpay_only=b.dataInfo.is_cashpay_only,b.orderProduct.is_no_express=b.dataInfo.is_no_express,window.sessionStorage.setItem("orderProducts",JSON.stringify([b.orderProduct])),e.go("createOrder")}function v(){var e=0;b.dataInfo.end_time-(new Date).getTime()>0?(e=b.dataInfo.end_time-(new Date).getTime(),b.dataInfo.isOverDate=!1):b.dataInfo.isOverDate=!0;var t=parseInt(e/1e3/60/60/24,10),i=parseInt(e/1e3/60/60%24,10),a=parseInt(e/1e3/60%60,10),s=parseInt(e/1e3%60,10);b.pageData.leftDay=f(t),b.pageData.leftHour=f(i),b.pageData.leftMinus=f(a),b.pageData.leftSecond=f(s)}function g(){b.pageData.interval=t(function(){v()},1e3,0)}function h(){t.cancel(b.pageData.interval)}function f(e){return 10>e&&(e="0"+e),e}function _(){null==b.groupConfig.groubuy_index_url||""==b.groupConfig.groubuy_index_url?zcToUrl("/customize/comeoncloud/Index.aspx?key=MallHome"):zcToUrl(b.groupConfig.groubuy_index_url)}function y(){var e=encodeURIComponent("http://"+window.location.host+"/customize/shop/Index.aspx?v=1.0&ngroute=groupGoodsList#/groupGoodsList"),t="/customize/shop/wxpay.aspx?order_id="+b.dataInfo.pay_order_id+"&return_url_success="+e+"&return_url_fail=";zcToUrl(t)}function D(){n.getGroupByConfig().then(function(e){e.status?b.groupConfig=e.result.malll:l.alert(e.msg)})["catch"](function(e){l.alert("获取请求失败")})}var b=this;window.sessionStorage.removeItem("orderProducts"),b.goodsGroupId=a.goodsGroupId,b.isGroupFull=!1,b.dataInfo={},b.orderProduct={},b.shadeShow=!1,b.showdesc=!1,b.showPayBtn=!1,b.groupConfig=[],b.isShowPage=!1,b.pageData={interval:{},leftDay:"",leftHour:"",leftMinus:"",leftSecond:""},b.getGroupBuyDetail=p,b.joinGroup=m,b.timer=v,b.startInterval=g,b.closeInterval=h,b.goToGoodsList=_,b.goToPay=y,b.getGroupByConfig=D,b.init=u,u()}e.$inject=["$state","$interval","$rootScope","$stateParams","$timeout","$sce","nAPI","shopInfo","wxAPI","wPopup","commService"],angular.module("shop").controller("waitForGroupDetailCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s){function o(){n()}function n(){c.dataloading=!0;var a={pageindex:c.pageIndex,pagesize:c.pageSize,order_status:"",order_from_time:"",order_to_time:"",order_type:2};i.odList(a).then(function(i){if(i){console.log(["获取我的团列表成功",i]),0==i.totalcount&&(c.noOrder=!0),c.dataList=c.dataList.concat(i.list);for(var a=0;a<c.dataList.length;a++){var s=c.dataList[a].group_buy_info.end_time-(new Date).getTime();s>0?c.isOverDate=!1:c.isOverDate=!0}i.list&&(i.list.length>=c.pageSize?(c.pageIndex++,t(function(){c.dataloading=!1})):t(function(){c.dataloading=!0,c.nodata=!0}),e.$broadcast("scroll.infiniteScrollComplete"))}else console.log(["获取订单列表失败",i])})["catch"](function(e){console.log(["获取订单列表请求失败",e])})}function r(){c.dataloading||(console.log("到底"),n())}var c=this;c.dataloading=!1,c.pageIndex=1,c.pageSize=10,c.dataList=[],c.isOverDate=!1,c.loadMoreData=r,c.loadData=n,c.init=o,o()}e.$inject=["$scope","$timeout","nAPI","wxAPI","wPopup"],angular.module("shop").controller("groupGoodsListCtrl",e)}(),function(){"use strict";function e(){var e=this;e.title="团购列表"}angular.module("shop").controller("groupForGoodsListCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r,c,l){function d(){p(),u()}function u(){o.getGroupByConfig().then(function(e){e.status?(v.groupConfig=e.result.malll,console.log("团购配置",v.groupConfig)):c.alert(e.msg)})["catch"](function(e){c.alert("获取请求失败")})}function p(){o.pdDetail(v.goodsId).then(function(e){console.log("拼团商品详情",e),v.goodsData=e,v.goodsData.product_desc=i.trustAsHtml(v.goodsData.product_desc);var t=location.href;n.title=v.goodsData.title,n.desc=v.goodsData.product_summary,n.link=a.mainsiteurl+"/customize/shop/?v=1.0&ngroute="+t.substring(t.indexOf("#")+1,t.length)+"#"+t.substring(t.indexOf("#")+1,t.length),n.imgUrl=v.goodsData.img_url,console.log(["shopInfo",n]),r.share(n)})["catch"](function(e){console.log("拼团商品详情失败",e)})}function m(t){if(v.goodsData.skus[0].count<=0){var i=c.alert({title:"提示信息",template:"当前商品没有了哦，请看看其他商品"});return void i.then(function(e){})}if(1!=t){if(t.people_count>v.goodsData.skus[0].count){var i=c.alert({title:"提示信息",template:"当前商品不够组团，请看看其他商品或者单个购买哦"});return void i.then(function(e){})}v.orderProduct.rule_id=t.rule_id,v.orderProduct.price=t.head_price,v.orderProduct.grouptype="leader"}else v.orderProduct.price=v.goodsData.skus[0].price;v.orderProduct.properties=v.goodsData.skus[0].properties,v.orderProduct.sku_id=v.goodsData.skus[0].sku_id,v.orderProduct.title=v.goodsData.title,v.orderProduct.totalcount=v.goodsData.skus[0].count,v.orderProduct.num=1,v.orderProduct.product_id=v.goodsData.product_id,v.orderProduct.img_url=v.goodsData.img_url,v.orderProduct.is_cashpay_only=v.goodsData.skus[0].is_cashpay_only,v.orderProduct.is_no_express=v.goodsData.is_no_express,console.log(["团长下订单的数据",v.orderProduct]),window.sessionStorage.setItem("orderProducts",JSON.stringify([v.orderProduct])),l.bindHongwareSubmitAction(function(){e.go("createOrder")})}var v=this;window.sessionStorage.removeItem("orderProducts"),v.goodsId=t.goodsId,v.MALLCONFIG=s,v.goodsData={},v.orderProduct={},v.sliderdata=["https://imagecdn.yqphh.com/3/2016/03/pex0zqlj7y41lblb.jpg","https://imagecdn.yqphh.com/3/2016/02/5hptms3yv4okrvof.jpg","https://imagecdn.yqphh.com/3/2016/02/9ptt6l8naeg6m53x.jpg","https://imagecdn.yqphh.com/3/2016/02/wmomcart0pw9t9bl.jpg"],v.getGoodsDetail=p,v.createOrder=m,v.groupConfig=[],v.init=d,d()}e.$inject=["$state","$stateParams","$sce","$rootScope","MALLCONFIG","nAPI","shopInfo","wxAPI","wPopup","commService"],angular.module("shop").controller("groupForGoodsDetailCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s){console.log(i.orderID),a.getGiftOrderDetail({order_id:i.orderID}).then(function(a){console.log(["获得的商品详情",a]),e.productDetailData=a,e.url=location.href.split("#")[0]+"&ngroute=/getgift/"+i.orderID+"#/getgift/"+i.orderID,s.share({title:t.userInfo.nickname+"送来的礼品："+e.productDetailData.product_name,desc:"小小礼品，不成敬意，请笑纳！",link:e.url,imgUrl:a.product_img_url})}).then(function(e){console.log(e)}),e.getGiftUrlBtn=function(){$(".shareimg").css("display","block")},e.hideShareImg=function(){$(".shareimg").css("display","none")}}e.$inject=["$scope","$rootScope","$stateParams","nAPI","wxAPI"],angular.module("shop").controller("givegiftCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r,c){function l(){var t=navigator.userAgent.toLowerCase();console.log(["浏览器agent",t]),"micromessenger"==t.match(/MicroMessenger/i)?(console.log("是微信浏览器"),e.chat=!0):(e.chat=!1,console.log("不是微信浏览器"))}function d(e){return isNaN(e)?void 0:-1!=(e+"").indexOf(".")?!0:!1}function u(e,t){return 1e6*e/t/1e6}function p(){e.totalnum=0,e.giftProduct.productsTotalPrice=0,angular.forEach(e.giftProduct,function(t,i){e.giftProduct.productsTotalPrice+=t.price*parseInt(t.num),e.totalnum+=parseInt(t.num)}),console.log(e.giftProduct.productsTotalPrice),console.log(e.toscorescale),e.cangetscore=Math.floor(e.giftProduct.productsTotalPrice*e.toscorescale),console.log(e.cangetscore),m()}function m(){var t=[];e.getfreightdata={},angular.forEach(e.giftProduct,function(i,a){var s={sku_id:i.sku_id,count:i.num};t.push(s),e.getfreightdata={receiver_province_code:v.defaultList.province_code,receiver_city_code:v.defaultList.city_code,receiver_dist_code:v.defaultList.dist_code,skus:t}});var a=o.freight(e.getfreightdata);a.then(function(t){e.freight=t.freight,console.log(["获取运费成功",t]),e.giftProduct.productsTotalPrice+=e.freight})["catch"](function(e){}),0==e.noselectcou&&void 0!=e.coupon_id&&null!=e.coupon_id?console.log("我选择了优惠券"):(console.log("我没有选择优惠券"),1==e.usepoints&&(console.log(v.defaultList.use_score),void 0==v.defaultList.use_score||0==v.defaultList.use_score?(e.usepoints=!1,n.show("输入的积分要大于0"),i(function(){n.hide()},700)):parseInt(v.defaultList.use_score)>e.userinfo.totalscore&&1==e.usepoints?e.userinfo.totalscore*e.tomoneyscale>e.giftProduct.productsTotalPrice?d(u(e.giftProduct.productsTotalPrice,e.tomoneyscale))?(v.defaultList.use_score=Math.floor(u(e.giftProduct.productsTotalPrice,e.tomoneyscale)),e.giftProduct.productsTotalPrice-=Math.floor(u(e.giftProduct.productsTotalPrice,e.tomoneyscale)),e.cangetscore=0,0==v.defaultList.use_score?(e.usepoints=!1,v.defaultList.use_score="",n.show("您未达到使用积分的最低条件"),i(function(){n.hide()},700)):(n.show("您最多可以使用"+v.defaultList.use_score+"积分"),
i(function(){n.hide()},700))):(v.defaultList.use_score=u(e.giftProduct.productsTotalPrice,e.tomoneyscale),e.giftProduct.productsTotalPrice=0,e.cangetscore=0):(v.defaultList.use_score=e.userinfo.totalscore,n.show("您最多可以使用"+e.userinfo.totalscore+"积分"),i(function(){n.hide()},700),e.giftProduct.productsTotalPrice-=v.defaultList.use_score*e.tomoneyscale,e.cangetscore=Math.floor(e.giftProduct.productsTotalPrice*e.toscorescale)):Math.floor(v.defaultList.use_score*e.tomoneyscale)>=e.giftProduct.productsTotalPrice?d(u(e.giftProduct.productsTotalPrice,e.tomoneyscale))?(v.defaultList.use_score=Math.floor(u(e.giftProduct.productsTotalPrice,e.tomoneyscale)),e.giftProduct.productsTotalPrice=e.giftProduct.productsTotalPrice-Math.floor(e.giftProduct.productsTotalPrice),e.cangetscore=Math.floor(e.giftProduct.productsTotalPrice*e.toscorescale),0==v.defaultList.use_score&&(e.usepoints=!1,v.defaultList.use_score="",n.show("您未达到使用积分的最低条件"),i(function(){n.hide()},700))):(v.defaultList.use_score=u(e.giftProduct.productsTotalPrice,e.tomoneyscale),e.giftProduct.productsTotalPrice=0,e.cangetscore=0):(v.defaultList.use_score=parseInt(v.defaultList.use_score),e.giftProduct.productsTotalPrice-=v.defaultList.use_score*e.tomoneyscale,e.cangetscore=Math.floor(e.giftProduct.productsTotalPrice*e.toscorescale))))}e.chat=!0,l(),e.usepoints=!1,e.noshowcoupon=!1,e.showcard=!1,e.pullshow=function(){1==e.showcard?($("#pullshow").css("transform","rotate(0deg)"),e.showcard=!1):($("#pullshow").css("transform","rotate(90deg)"),e.showcard=!0)},o.tomoney().then(function(t){console.log(t),e.tomoneyscale=t.amount/t.score,console.log(e.tomoneyscale)})["catch"](function(e){}),o.toscore().then(function(t){console.log(t),isNaN(t.score/t.amount)?e.isNaNShow=!1:(e.isNaNShow=!0,e.toscorescale=t.score/t.amount),console.log(e.toscorescale),p()})["catch"](function(e){}),o.getuserinfo().then(function(t){console.log(t),e.userinfo=t})["catch"](function(e){console.log(e)}),e.delNum=function(t){t.num>1&&(t.num--,e.giftProduct.productsTotalPrice-=t.price)},e.addNum=function(t){t.num<t.count&&(t.num++,e.giftProduct.productsTotalPrice+=t.price)},e.noselectcou=!1,e.selectcouBtn=function(t){console.log(t),e.noselectcou=!1,t.select=!0;for(var i in e.couponlist)e.couponlist[i].cardcoupon_id!=t.cardcoupon_id&&(e.couponlist[i].select=!1);e.coupon_id=t.cardcoupon_id,p()},e.notselectcouBtn=function(){e.noselectcou=!0;for(var t in e.couponlist)e.couponlist[t].select=!1;p()},e.selectpointsBtn=function(){e.usepoints=!e.usepoints,p()},e.checkpoints=function(){1==isNaN(parseInt(v.defaultList.use_score))&&(v.defaultList.use_score=""),1==e.usepoints&&p()};var v=e.pageData={defaultList:[],isChoose:!1,selectId:s.selectId},v=e.pageData={defaultList:[],isChoose:!1,selectId:s.selectId};e.pageFunc={};e.giftProduct=window.sessionStorage.getItem("giftorder"),e.giftProduct=JSON.parse(e.giftProduct),console.log(["$scope.giftProduct",e.giftProduct]),o.formatSku(e.giftProduct),e.freight=0,e.submitOrderAndPay=function(){var t=[];angular.forEach(e.giftProduct,function(e,i){var a={sku_id:e.sku_id,count:e.num};t.push(a)});var i="";i=1==e.chat?"WEIXIN":"ALIPAY",e.saleid=window.localStorage.getItem("Saleid")?window.localStorage.getItem("Saleid"):"",1!=e.usepoints&&(v.defaultList.use_score=0),0==e.noselectcou&&void 0!=e.coupon_id&&null!=e.coupon_id&&(v.defaultList.cardcoupon_id=e.coupon_id);var s={buyer_memo:v.defaultList.buyer_memo,cardcoupon_id:v.defaultList.cardcoupon_id,use_score:parseInt(v.defaultList.use_score),pay_type:i,skus:t,sale_id:e.saleid};n.show("数据请求中...");var l=JSON.stringify(s);console.log(["提交订单的数据",s]),o.giveGiftOrder({data:l}).then(function(t){console.log(t),0===t.errcode?(console.log(["提交订单成功",t]),console.log(["订单付款方式",s.pay_type]),console.log(["订单id",t.order_id]),console.log(["订单的价格",e.giftProduct.productsTotalPrice]),e.orderId=t.order_id,0==e.giftProduct.productsTotalPrice?(n.show("数据请求中..."),n.hide(),a.go("givegift",{orderID:t.order_id})):r(s.pay_type,t.order_id)):(n.hide(),c.alert(t.errmsg))})["catch"](function(e){c.alert(e.errmsg),console.log(["提交订单失败",e])})}}e.$inject=["$scope","$rootScope","$timeout","$state","$stateParams","nAPI","wLoading","giftpay","wPopup"],angular.module("shop").controller("paygiftCtrl",e)}(),function(){"use strict";function e(e,t,i,a){}e.$inject=["$scope","$rootScope","$timeout","$state"],angular.module("shop").controller("giftdetailCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r,c,l,d,u){var p=this;p.addressId=s.addressId,p.addressData="",t.orderID=s.giftID,u.getUserInfo(function(){},function(){a.go("bindPhone")}),o.getGiftOrderDetail({order_id:s.giftID}).then(function(i){console.log(["获得的商品详情",i]),e.productDetailData=i,e.url=d.location.href.split("#")[0]+"&ngroute=/getgift/"+t.orderID+"#/getgift/"+t.orderID,l.share({title:t.userInfo.nickname+"送来的礼品："+e.productDetailData.product_name,desc:"小小礼品，不成敬意，请笑纳！",link:e.url,imgUrl:i.product_img_url})})["catch"](function(e){console.log(["报错",e])}),e.getGiftUrlBtn=function(){$(".shareimg").css("display","block")},e.hideShareImg=function(){$(".shareimg").css("display","none")},e.gotoaddlist=function(){a.go("receiveAddressList"),t.fromCreatorder=3};var m=e.pageData={defaultList:[],isChoose:!1,selectId:s.selectId};e.pageFunc={};e.getGiftBtn=function(){if(void 0==m.defaultList.buyer_memo&&(m.defaultList.buyer_memo=""),!p.addressData)return r.show("请选择寄送的地址"),void i(function(){r.hide()},600);var e={order_id:s.giftID,receiver_province:p.addressData.province,receiver_province_code:p.addressData.province_code,receiver_city:p.addressData.city,receiver_city_code:p.addressData.city_code,receiver_dist:p.addressData.dist,receiver_dist_code:p.addressData.dist_code,receiver_name:p.addressData.consigneename,receiver_phone:p.addressData.phone,buyer_memo:p.addressData.buyer_memo,receiver_address:p.addressData.address};r.show("数据请求中...");var t=JSON.stringify(e);console.log(["提交订单的数据",e]),o.getGiftOrder({data:t}).then(function(e){console.log(["领取礼品成功",e]),r.hide();var t=c.confirm({title:"友情提示",template:"领取礼品成功，即将跳转到个人中心",cssClass:"borderradius5px",cancelText:"取消",cancelType:"button button-clear button-positive",okText:"确认",okType:"button button-clear button-positive"});t.then(function(e){e&&zcToUrl("/customize/comeoncloud/Index.aspx?key=PersonalCenter")})})["catch"](function(e){r.hide(),c.alert(e.errmsg),console.log(["领取礼品失败",e])})}}e.$inject=["$scope","$rootScope","$timeout","$state","$stateParams","nAPI","$q","wLoading","wPopup","wxAPI","$window","commService"],angular.module("shop").controller("getgiftCtrl",e)}(),function(){"use strict";function e(e){return{link:function(t,i,a){var s=e(a.wechatClick),o=0,n=0,r=0,c=0;i[0].addEventListener("touchstart",function(e){o=e.touches[0].clientX,n=e.touches[0].clientY}),i[0].addEventListener("touchmove",function(e){r=e.touches[0].clientX,c=e.touches[0].clientY}),i[0].addEventListener("touchend",function(e){console.log(["touchmove event",e]),0==r&&0==c&&s(t),o=0,n=0,r=0,c=0})}}}e.$inject=["$parse"],angular.module("shop").directive("wechatClick",e)}(),function(){"use strict";function e(){function e(){return t}var t=[{title:"AngularJS",url:"https://angularjs.org/",description:"HTML enhanced for web apps!",logo:"angular.png"},{title:"BrowserSync",url:"http://browsersync.io/",description:"Time-saving synchronised browser testing.",logo:"browsersync.png"},{title:"GulpJS",url:"http://gulpjs.com/",description:"The streaming build system.",logo:"gulp.png"},{title:"Jasmine",url:"http://jasmine.github.io/",description:"Behavior-Driven JavaScript.",logo:"jasmine.png"},{title:"Karma",url:"http://karma-runner.github.io/",description:"Spectacular Test Runner for JavaScript.",logo:"karma.png"},{title:"Protractor",url:"https://github.com/angular/protractor",description:"End to end test framework for AngularJS applications built on top of WebDriverJS.",logo:"protractor.png"},{title:"Bootstrap",url:"http://getbootstrap.com/",description:"Bootstrap is the most popular HTML, CSS, and JS framework for developing responsive, mobile first projects on the web.",logo:"bootstrap.png"},{title:"Sass (Node)",url:"https://github.com/sass/node-sass",description:"Node.js binding to libsass, the C version of the popular stylesheet preprocessor, Sass.",logo:"node-sass.png"}];this.getTec=e}angular.module("shop").service("webDevTec",e)}(),function(){"use strict";function e(e,t,i,a,s){function o(e,t){for(var i=0;i<t.length;i++)t[i].pre_id==e.category_id&&(o(t[i],t),e.subList||(e.subList=[]),e.subList.push(t[i]))}return{templateUrl:"app/components/sideMenu/sideMenu.html",link:function(e,n,r,c){e.sideMenus=0,e.showMenus=function(){0==e.sideMenus?(e.sideMenus=1,$("html").addClass("sidebar-move")):(e.sideMenus=0,$("html").removeClass("sidebar-move"))},null==t.mallconfignew.nav_group_name||""==t.mallconfignew.nav_group_name?s.pdCatrgory().then(function(t){console.log(["左侧导航商品分类",t]);for(var i in t.list)t.list[i].navigation_name=t.list[i].category_name,t.list[i].navigation_link=t.list[i].category_id,t.list[i].navigation_type=1,t.list[i].subListShow=!0;for(var a=[],i=0;i<t.list.length;i++)t.list[i].pre_id||(o(t.list[i],t.list),a.push(t.list[i]));console.log("rootList",a);var s={category_name:"全部",navigation_name:"全部",category_id:"",navigation_link:"",isme:!0,navigation_type:1,pre_id:0};a.unshift(s),e.leftnavdatas=a}):i.getNavList(t.mallconfignew.nav_group_name).then(function(t){console.log(["左侧导航",t]);for(var i in t)t[i].navigation_type=2;e.leftnavdatas=t}),e.$on("ngRepeatFinished",function(e){new IScroll("#wrapper",{mouseWheel:!0,click:!0})}),$(".sideMenuMask")[0].addEventListener("touchmove",function(e){e.preventDefault()}),e.goList=function(t,i){e.sideMenus=!e.sideMenus,2==i?zcToUrl(t):a.go("productList",{catID:t})}}}}e.$inject=["$timeout","MALLCONFIG","nAPI","$state","sAPI"],angular.module("shop").directive("sideMenu",e)}(),function(){"use strict";function e(e){return{restrict:"E",templateUrl:"app/components/slider/slider.html",transclude:!0,link:function(e,t,i,a){function s(){var e=0;if(i.aspectratio)if(i.aspectratio.match(":")){var a=i.aspectratio.split(":");e=Number(a[1])/Number(a[0])}else e=Number(i.aspectratio);e>0&&t.find(".sliders").css({height:t.find(".sliders").parent().width()*e})}e.$on("ngRepeatFinished",function(){return t.find(".sliderlist").length<=0?void t.hide():(s(),t.show(),void t.find(".sliders").touchSlider({animatetime:300,automatic:!1,timeinterval:4e3,sliderpoint:!0,sliderpointwidth:8,sliderpointcolor:"#fff",sliderpointbgcolor:"#ccc"}))})}}}function t(e){return{restrict:"E",template:'<div class="sliderlist"  ng-transclude></div>',transclude:!0,link:function(t,i,a,s){t.$last===!0&&e(function(){t.$emit("ngRepeatFinished")})}}}e.$inject=["$timeout"],t.$inject=["$timeout"],angular.module("shop").directive("shopslider",e).directive("shopSliderItem",t)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r){return{restrict:"A",scope:{addressInfo:"=",customize:"=",addressId:"=",isgivegift:"@"},transclude:!0,templateUrl:"app/components/selectAddress/selectAddress.html",link:function(e,a,c,l){function d(){e.addressListPr=t.addressList().then(function(t){e.addressListData=t.list,e.addressListData&&e.addressListData.length>0&&(e.hasAddress=!0),console.log(["$scope.addressListData",e.addressListData]),e.addressId?angular.forEach(e.addressListData,function(t,i){t.address_id==e.addressId&&(e.addressInfo=t)}):angular.forEach(e.addressListData,function(t,i){1==t.isdefault&&(e.addressInfo=t)}),console.log(["$scope.addressInfo",e.addressInfo]),void 0==e.addressInfo&&(e.addressInfo=e.addressListData[0])})["catch"](function(e){i.alert(JSON.stringify(e))})}function u(){var t=GetParm("selectAddress"),i=null;if(t.indexOf("#")>-1&&(t=t.substring(0,t.indexOf("#"))),t=Base64.decode(decodeURIComponent(t)))try{i=JSON.parse(t)}catch(a){i=null}i?e.addressInfo={address_id:-1,consigneename:i.name,phone:i.mobilePhone,address:i.memberAddress,province:i.province,province_code:i.provinceCode,city:i.city,city_code:i.cityCode,dist:i.district,dist_code:i.areaCode,isdefault:1}:d()}"false"==e.isgivegift?e.isgivegift=!1:e.isgivegift=!0,console.log("$state.current.name",s.current.name),e.customize||(e.customize=!1),u(),e.selectAddressBtn=function(){r.getSysConfig(function(){r.getUserInfo(function(){var e=n.sysConfig;if(e.is_union_hongware){var t=e.address_select_url,i="http://"+window.location.host+"/customize/shop/";i+="?v=1.0";var a,r=window.location.href;r.indexOf("#")>-1&&(a=r.substring(r.indexOf("#")+1)),a&&(i+="&ngroute="+a+"#"+a);var c={orgCode:e.hongwei_orgcode,callbackUrl:i,openID:n.userInfo.wxOpenId,appID:e.wx_appid};t=HONGWAREDOMAIN+"/hfive/2016/store.html?action="+Base64.encode(JSON.stringify(c))+"#!/addressList",zcToUrl(t)}else{var l=angular.toJson(s.params);s.go("receiveAddressList",{siteName:s.current.name,siteparams:o.encodeURIComponent(l)})}},function(e){})},function(e){})}}}}e.$inject=["$q","nAPI","wPopup","$stateParams","$state","$window","$rootScope","commService"],angular.module("shop").directive("selectAddress",e)}(),function(){"use strict";function e(){return{templateUrl:"app/components/relateSearch/relateSearch.html",link:function(e,t,i,a){}}}angular.module("shop").directive("relateSearch",e)}(),function(){"use strict";function e(){return{templateUrl:"app/components/productBoxList/productBoxList.html",transclude:!0,link:function(e,t,i,a){}}}angular.module("shop").directive("productBoxList",e)}(),function(){"use strict";function e(e,t,i,a){return{templateUrl:"app/components/productBox/saleBox.html",link:function(e,t,i,a){},controller:["$scope","$state",function(e,t){e.goToDetail=function(e){e.isOnTheSale&&e.totalcount&&t.go("productDetail",{id:e.product_id})}}]}}e.$inject=["$timeout","$rootScope","$state","$window"],angular.module("shop").directive("saleBox",e)}(),function(){"use strict";function e(){return{templateUrl:"app/components/productBox/productBoxSale.html",link:function(e,t,i,a){},controller:["$scope","$state",function(e,t){e.goToDetail=function(e){e.isOnTheSale&&e.totalcount&&t.go("productDetail",{id:e.product_id})}}]}}angular.module("shop").directive("productBoxSale",e)}(),function(){"use strict";function e(e,t,i,a){return{controller:["$scope","$rootScope","$element","$attrs","$transclude",function(e,t,i,a,s){e.is_show_oldprice=t.mallConfig.is_show_oldprice,e.img_last=t.img_last}],templateUrl:"app/components/productBox/productBox.html",link:function(e,t,i,a){}}}e.$inject=["$timeout","$rootScope","$state","$window"],angular.module("shop").directive("productBox",e)}(),function(){"use strict";function e(e,t,i){return{link:function(e,a,s,o){a[0].offsetTop<angular.element(t).height()&&i(function(){a.attr("src",a.attr("data-src"))}),angular.element(t).bind("scroll",function(e){var t=a[0].offsetTop+a[0].clientHeight-e.currentTarget.innerHeight-e.currentTarget.scrollY;150>t&&a.attr("src",a.attr("data-src"))}),e.$on("$viewContentLoading",function(e,i){angular.element(t).unbind("scroll")})}}}e.$inject=["$parse","$window","$timeout"],angular.module("shop").directive("lazyLoad",e)}(),function(){"use strict";function e(){function e(e){var t=this;t.relativeDate=e(t.creationDate).fromNow()}e.$inject=["moment"];var t={restrict:"E",templateUrl:"app/components/navbar/navbar.html",scope:{creationDate:"="},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("shop").directive("acmeNavbar",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r,c){return{restrict:"A",scope:{parms:"=",payScuss:"=",payError:"=",showClose:"=",showDaiPay:"="},templateUrl:"app/components/payPanel/payPanel.html",link:function(e,i,a,c){function l(){if(s.isPlus&&D.hasWxPayApp&&D.hasWxPayAppSet){var e={action:"BuildAlipayAppRequest",order_id:D.payPanel.payOrderId};r.commPost("/Serv/API/Mall/Payment.ashx",e).then(function(e){var t=plus.webview.getLaunchWebview();t.evalJS("payment('alipay','"+e.pay_req+"');")})["catch"](function(e){u(e)})}else n.pay(D.payPanel.payOrderId).then(function(e){d(e)})["catch"](function(e){u(e)})}function d(e){if("function"==typeof b.payScuss)b.payScuss(e);else if(s.sysConfig.mall_order_pay_success_url){var i=s.sysConfig.mall_order_pay_success_url.replace(/{order_id}/g,D.payPanel.payOrderId);zcToUrl(i)}else t.go("orderDetail",{orderID:D.payPanel.payOrderId})}function u(e){"function"==typeof b.payError?b.payError(e):t.go("orderDetail",{orderID:D.payPanel.payOrderId})}function p(){if(s.isPlus&&D.hasAliPayApp&&D.hasAliPayAppSet){var e={action:"BuildAlipayAppRequest",app_id:plus.runtime.appid,order_id:D.payPanel.payOrderId};r.commPost("/Serv/API/Mall/Payment.ashx",e).then(function(e){zcPayment("alipay",e.pay_req,function(e){d(e)})})["catch"](function(e){u(e)})}else zcToUrl("/app/wap/pay/MallOrderAliPay.aspx?order_id="+D.payPanel.payOrderId)}function m(){window.location.href="/customize/Shop/JDPay.aspx?order_id="+D.payPanel.payOrderId}function v(){o.getSysConfig(function(){D.hasAliPay=s.sysConfig.has_ali_pay,D.hasWxPay=s.sysConfig.has_wx_pay,D.hasDaiPay=D.payPanel.daiPay,D.hasJDPay=s.sysConfig.has_jd_pay},function(){})}function g(){D.payPanel.payOrderId&&t.go("anotherPay",{orderId:D.payPanel.payOrderId})}function h(){s.isPlus?(payChannelCheck("alipay",function(e){D.hasAliPayApp=e}),payChannelCheck("wxpay",function(e){D.hasWxPayApp=e})):(D.hasAliPayApp=!0,D.hasWxPayApp=!0)}function f(){s.isPlus?r.commPost("/Serv/API/AppManage/GetAppSet.ashx",{appid:plus.runtime.appid}).then(function(e){e.status&&(D.hasAliPayAppSet=e.result.has_alipay_app_set,D.hasWxPayAppSet=e.result.has_weixin_app_set)})["catch"](function(e){}):(D.hasAliPayAppSet=!0,D.hasWxPayAppSet=!0)}function _(e){d(e)}function y(){v(),h(),f()}var D=e.vm={payPanel:e.parms,hasAliPay:!1,hasWxPay:!1,hasJDPay:!1,hasDaiPay:!1,hasAliPayAppSet:!1,hasAliPayApp:!1,hasWxPayAppSet:!1,hasWxPayApp:!1},b=e.vf={wxPay:l,aliPay:p,anotherPay:g,jdPay:m,payResult:_,payScuss:e.payScuss,payError:e.payError};y()}}}e.$inject=["$q","$state","nAPI","$window","$rootScope","commService","wxAPI","sAPI","$timeout"],angular.module("shop").directive("payPanel",e)}(),function(){"use strict";function e(e){function t(t,i,a,s){var o,n=e(i[0],{typeSpeed:40,deleteSpeed:40,pauseDelay:800,loop:!0,postfix:" "});i.addClass("acme-malarkey"),angular.forEach(t.extraValues,function(e){n.type(e).pause()["delete"]()}),o=t.$watch("vm.contributors",function(){angular.forEach(s.contributors,function(e){n.type(e.login).pause()["delete"]()})}),t.$on("$destroy",function(){o()})}function i(e,t){function i(){return a().then(function(){e.info("Activated Contributors View")})}function a(){return t.getContributors(10).then(function(e){return s.contributors=e,s.contributors})}var s=this;s.contributors=[],i()}i.$inject=["$log","githubContributor"];var a={restrict:"E",scope:{extraValues:"="},template:"&nbsp;",link:t,controller:i,controllerAs:"vm"};return a}e.$inject=["malarkey"],angular.module("shop").directive("acmeMalarkey",e)}(),function(){"use strict";function e(){return{templateUrl:"app/components/hotSearch/hotSearch.html",link:function(e,t,i,a){}}}angular.module("shop").directive("hotSearch",e)}(),function(){"use strict";function e(){return{templateUrl:"app/components/goRight/goRight.html",scope:{iconName:"@"},controller:["$scope","$element","$attrs","$transclude",function(e,t,i,a){e.iconLink="#"+e.iconName}],link:function(e,t,i,a){}}}angular.module("shop").directive("goRight",e)}(),function(){"use strict";function e(){return{templateUrl:"app/components/goBack/goBack.html",link:function(e,t,i,a){e.goBack=function(){zcBack()}}}}angular.module("shop").directive("goBack",e)}(),function(){"use strict";function e(e,t){function i(i){function s(e){return e.data}function o(t){e.error("XHR Failed for getContributors.\n"+angular.toJson(t.data,!0))}return i||(i=30),t.get(a+"/contributors?per_page="+i).then(s)["catch"](o)}var a="https://api.github.com/repos/Swiip/generator-gulp-angular",s={apiHost:a,getContributors:i};return s}e.$inject=["$log","$http"],angular.module("shop").factory("githubContributor",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r,c,l){return{restrict:"A",scope:{},templateUrl:"app/components/customizeMallHead/customizeMallHead.html",link:function(e,t,i,s){function r(){n.getSysConfig(function(){o.sysConfig.malll&&(f.hasMallHead=!(0==o.sysConfig.malll.is_customize_mall_head||2==o.sysConfig.malll.is_customize_mall_head&&!f.isPlus),o.sysConfig.malll.customize_mall_head_config&&(f.customizeMallHeadConfig=JSON.parse(o.sysConfig.malll.customize_mall_head_config)),f.hasMallHead&&f.customizeMallHeadConfig.nav_type&&l(),f.hasMallHead&&1==f.customizeMallHeadConfig.nav_left_type&&f.customizeMallHeadConfig.nav_left&&d())},function(){})}function l(){f.customizeMallHeadConfig.nav_type&&c.getToolBarList({key_type:f.customizeMallHeadConfig.nav_type}).then(function(e){var t=$.grep(e.result,function(e,t){return e.ico||e.img});t.length>3?f.toolBarList=t.splice(0,3):f.toolBarList=t,m(f.toolBarList)})["catch"](function(e){})}function d(){f.customizeMallHeadConfig.nav_left&&c.getToolBarList({key_type:f.customizeMallHeadConfig.nav_left}).then(function(e){var t=$.grep(e.result,function(e,t){return e.ico||e.img});t.length>3?f.toolBarLeftList=t.splice(0,3):f.toolBarLeftList=t,m(f.toolBarLeftList)})["catch"](function(e){})}function u(){if(f.customizeMallHeadConfig.search_url){var e=f.customizeMallHeadConfig.search_url.replace(new RegExp("{search_key}","gmi"),f.keyword);zcToUrl(e)}}function p(e){e.url&&zcToUrl(e.url)}function m(e){if(e)for(var t=0;t<e.length;t++)v(e[t])}function v(e){e.num=0,e.url&&e.url.indexOf("/customize/shop/?v=1.0")>=0&&e.url.indexOf("#/shopBasket")>=0&&(f.shoppingCartItem=e,o.shop_nums?f.shoppingCartItem.num=o.shop_nums:a.basketList("/mall/shoppingcart.ashx",{action:"list"},function(e){var t=0;if(e.list)for(var i=0;i<e.list.length;i++)t+=e.list[i].count;f.shoppingCartItem.num=t}))}function g(e){f.shoppingCartItem&&(f.shoppingCartItem.num=e)}function h(){r()}var f=e.vm={hasMallHead:!1,isPlus:o.isPlus,customizeMallHeadConfig:{},toolBarList:[],toolBarLeftList:[],keyword:"",shoppingCartItem:!1};e.vf={getMallConfig:r,toCustomizeUrl:u,goUrl:o.goUrl,goBack:o.goBack,setShoppingCartNum:g,iconToUrl:p};h()}}}e.$inject=["$q","$state","nAPI","mAPI","$window","$rootScope","commService","wxAPI","sAPI","$timeout"],angular.module("shop").directive("customizeMallHead",e)}(),function(){"use strict";function e(e,t,i,a){return{templateUrl:"app/components/footerBar/footerBar.html",link:function(t,s,o,n){t.bottomList=[],console.log("接口地址",e.mainsiteurl),t.getShopNums=function(){},t.getShopNums(),t.goToOtherUrl=function(e){zcToUrl("/customize/comeoncloud/Index.aspx?key="+e)},t.$on("getShopNums",function(e,i){t.getShopNums()}),t.getBottomNavList=function(){var e=GetParm("key");e||(e="MallHome"),i.getBottomNavList({key:e,property:"foottool_list",key_type:void 0==a.mallconfignew.foottool?"":a.mallconfignew.foottool}).then(function(e){if(console.log("底部导航成功",e),e.status&&(e.result.size||(e.result.size=14),e.result.ico_size||(e.result.ico_size=24),e.result.style||(e.result.style=0),t.bottom=e.result,t.bottom.list&&t.bottom.list.length>0))for(var i=0;i<t.bottom.list.length;i++)""!=$.trim(t.bottom.list[i].url)&&window.location.href.indexOf(t.bottom.list[i].url)>=0&&ExistsParm(window.location.href,t.bottom.list[i].url)&&(t.bottom.list[i].bg_color=t.bottom.list[i].active_bg_color,t.bottom.list[i].color=t.bottom.list[i].active_color)})["catch"](function(e){console.log("底部导航失败",e)})},t.getBottomNavList(),t.goToBottomDetail=function(e,t){return""==$.trim(e.url)?void alert("即将推出，敬请期待"):void zcToUrl(e.url)},t.getSvgIco=function(e){return e.ico?"#"+e.ico.replace("iconfont ",""):""}}}}e.$inject=["$rootScope","mAPI","nAPI","MALLCONFIG"],angular.module("shop").directive("footerBar",e)}(),function(){"use strict";function e(e,t){function i(t,i,a,s){function o(e){return e?e=e.match(",")?e.split(","):[e]:[]}function n(){s.couponCheckBoxStatus=!1}function r(){if(console.log("scope.checkedCouponInfo",t.checkedCouponInfo),s.couponCheckBoxStatus=!0,""==t.checkedCouponInfo)for(var e=0;e<s.couponData.length;e++)s.couponData[e].checked=!1;else if(window.sessionStorage.getItem("cards")){for(var i=JSON.parse(window.sessionStorage.getItem("cards")),e=0;e<s.couponData.length;e++)s.couponData[e].cardcoupon_id==i.cardcoupon_id&&(s.couponData[e].checked=!0);s.couponLoadDone=!0}}function c(e){console.log(["@@@@",e]);var i=e[0],a=(e[1],e[2]);angular.forEach(i,function(e,i){if(2==t.orderType){if("leader"!=t.groupType)return"member"==t.groupType?void(e.cantuse=!0):void(e.cantuse=!0);if(!e.is_can_use_groupbuy)return void(e.cantuse=!0)}else if(!e.is_can_use_shop)return void(e.cantuse=!0);if(0!=e.product_id&&(e.cantuse=!0,(2==a.length&&a[1].parent_product_id||1==a.length)&&e.product_id==a[0].product_id))return void(e.cantuse=!1);if(""!=e.product_tags){e.cantuse=!0;var s=!1,n=o(e.product_tags);if(2==a.length&&a[1].parent_product_id||1==a.length){for(var r=0;r<n.length;r++)if(a[0].tags&&a[0].tags.match(n[r])){s=!0;break}}else angular.forEach(a,function(e,t){if(!(t>0)||s){for(var i=!1,a=o(e.tags),r=0;r<n.length;r++){for(var c=0;c<a.length;c++)if(n[r]===a[c]){i=!0;break}if(i)break}s=i?!0:!1}});s&&(e.cantuse=!1)}}),console.log("cps",i),t.canuserCount=0;for(var n=0;n<i.length;n++)t.orderTotalPrice<i[n].buckle_amount||t.orderTotalPrice<i[n].freefreight_amount||i[n].cantuse||t.canuserCount++;window.sessionStorage.getItem("cards")&&(t.checkedCouponInfo=JSON.parse(window.sessionStorage.getItem("cards")),s.couponLoadDone=!0)}function l(e){if(!(t.orderTotalPrice<e.buckle_amount||t.orderTotalPrice<e.freefreight_amount||e.cantuse)){if(2==t.orderType){if(!e.is_can_use_groupbuy)return}else if(!e.is_can_use_shop)return;if(e.checked)e.checked=!1,t.checkedCouponInfo="";else{for(var i=0;i<s.couponData.length;i++)s.couponData[i].checked=!1;e.checked=!0,t.checkedCouponInfo=e}"function"==typeof t.checkAmount&&t.checkAmount(t.checkedCouponInfo),window.sessionStorage.setItem("cards",JSON.stringify(t.checkedCouponInfo))}}t.amountName="购买金额",a.amountName&&(t.amountName=a.amountName);var d=[];s.couponCheckBoxStatus=!1,s.checkcoupon=l,s.confirmMyCheck=n,s.openCouponCheckBox=r;var u=e(function(e,i){d[0]=t.$watch("ccvm.couponData",function(t,i){t.length>0&&e(t)})}),p=e(function(e,i){d[1]=t.$watch("orderProductsTags",function(t,i){e(o(t))})}),m=e(function(e,i){d[2]=t.$watch("orderSkus",function(t,i){t.length>0&&e(t)})});e.all([u,p,m]).then(c),t.$on("$destroy",function(){for(var e=0;e<d.length;e++)d[e]()})}function a(e,t){function i(e){for(var t,i=new Date,a=[],s=[],o=[],n=[],t=0;t<e.length;t++)e[t].valid_from=new Date(e[t].valid_from),e[t].valid_to=new Date(e[t].valid_to),e[t].outdate=!1,e[t].checked=!1,e[t].cantuse=!1,0==e[t].cardcoupon_status?a.push(e[t]):s.push(e[t]);for(var t=0;t<a.length;t++){var r=a[t].valid_to.getTime()-i.getTime();r>0?o.push(a[t]):(a[t].outdate=!0,n.push(a[t]))}return e=o.concat(s,n),o}function a(){for(var e=[],i=0;i<s.couponData.length;i++)1==s.couponData[i].is_store_card&&e.push(s.couponData[i]);s.couponData=e,t.canuserCount=s.couponData.length}t.cardcoupon_show_name="优惠券",location.hostname.match("www.youzhengjia.com")&&(t.cardcoupon_show_name="助学券",t.canuserCount=s.couponData.length),t.showName&&(t.cardcoupon_show_name=t.showName);var s=this;s.couponData=[],s.couponLoadDone=!1,e.couponList({is_can_use:""}).then(function(e){s.couponData=i(e.list),t.showName&&"储值卡"==t.showName&&a(),s.couponLoadDone=!0})}a.$inject=["nAPI","$scope"];var s={restrict:"AE",scope:{orderTotalPrice:"=",orderSkus:"=",checkedCouponInfo:"=",orderProductsTags:"=",orderType:"=",groupType:"=",showName:"=",checkAmount:"="},templateUrl:"app/components/checkCoupon/checkCoupon.html",link:i,controller:a,controllerAs:"ccvm"};return s}e.$inject=["$q","$timeout"],angular.module("shop").directive("checkCoupon",e)}(),function(){"use strict";function e(e){return{restrict:"A",link:function(t,i,a){t.$last===!0&&e(function(){t.$emit("ngRepeatFinished")})}}}e.$inject=["$timeout"],angular.module("shop").directive("onFinishRenderFilters",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r,c,l,d){function u(){e.dataloading=!0,l.collectionList("/mall/collect.ashx",{action:"list",pageindex:m.pageindex,pagesize:m.pagesize},function(e){console.log(["获取收藏的商品列表成功",e]),m.productListData=m.productListData.concat(e.list),m.pageindex++,i(function(){m.dataloading=!1}),e.list.length<m.pagesize&&(m.loadingEndTag=!0,m.loadingTag=!1)},function(e){console.log(["获取收藏列表请求失败",e])})}function p(){u()}var m=e.vm={productListData:[],dataloading:!1,loadingEndTag:!1,loadingTag:!1,pageindex:1,pagesize:10};e.vf={init:p};m.loadMoreData=function(){console.log("加载更多。。。。"),m.dataloading||(console.log("到底"),u())},p()}e.$inject=["$scope","$rootScope","$timeout","$state","$q","nAPI","$stateParams","wxAPI","sAPI","mAPI","commService"],angular.module("shop").controller("housesCollectListCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r){function c(){r.getUserInfo(function(){d()},function(){window.location.href="#/bindPhone/1"})}function l(e){b.upIndex=e,$(".fileimg").click()}function d(){o.getUserField({mapping_type:b.mapping_type}).then(function(e){if(console.log("用户字段",e),e.status){for(var t=0;t<e.result.field_list.length;t++)"Phone"==e.result.field_list[t].field&&(b.phoneIndex=t,e.result.field_list[t].oldvalue=e.result.field_list[t].value,""==e.result.field_list[t].value?b.isPhoneNull=!0:b.isPhoneNull=!1,y(e.result.field_list[t])),"img"==e.result.field_list[t].type&&(b.imgIndex=t,b.imgURLs[0]=e.result.field_list[t].value,e.result.field_list[t].value||(e.result.field_list[t].value="http://open-files.comeoncloud.net/www/guicai/jubit/image/20160325/A12476F2D0CD4B8FA037267F393BF69E.png"),a(function(){void 0!=$("#upLoadImg0")[0]&&($("#upLoadImg0")[0].addEventListener("change",function(e){g(e,"#upLoadImg0")},!1),null!=b.fieldList[b.imgIndex].value&&$(".img-circle").attr("src",b.fieldList[b.imgIndex].value))},200)),"date"==e.result.field_list[t].type&&(e.result.field_list[t].value=new Date(e.result.field_list[t].value)),"number"==e.result.field_list[t].type&&(e.result.field_list[t].value=parseFloat(e.result.field_list[t].value)),1==e.result.field_list[t].read_only&&b.readCount++;b.readCount==e.result.field_list.length&&(b.isAllReadable=!0),b.fieldList=e.result.field_list,b.isShowBtn=e.result.can_edit,b.mapping_type=e.result.mapping_type,b.id=e.result.id}})["catch"](function(e){console.log("用户字段失败",e)})}function u(e){return f(e)?void o.getSMSCode({phone:e}).then(function(e){console.log("验证码",e),e.status?p():(n.show(e.msg),a(function(){n.hide()},1e3))})["catch"](function(e){console.log("验证码失败",e)}):(n.show("您的手机格式不正确"),void a(function(){n.hide()},1e3))}function p(){b.waitTime=60,i(function(){b.waitTime<=0?(i.cancel(p),b.isShowCode=!1,b.waitTime=0):b.waitTime--},1e3,0)}function m(){o.postUserInfoWithoutCode(b.userFieldData).then(function(e){e.status?(n.show("保存成功"),sessionStorage.removeItem("pageConfig"),a(function(){n.hide(),document.referrer&&zcToUrl(document.referrer,!0)},1e3),d()):(console.log("保存失败",e.msg),n.show(e.msg),a(function(){n.hide()},1e3))})["catch"](function(e){console.log("保存失败",e.msg),n.show(e.msg),a(function(){n.hide()},1e3)})}function v(){if(b.userFieldData={},b.userFieldData.mapping_type=b.mapping_type,0==b.id)return n.show("请先登录"),void a(function(){n.hide()},1e3);b.userFieldData.AutoID=b.id,console.log(b.userFieldData);for(var e=!1,t="",i=0;i<b.fieldList.length;i++)if(1!=b.fieldList[i].read_only){if(console.log(b.fieldList[i]),"email"==b.fieldList[i].field&&!_(b.fieldList[i].value))return n.show("邮箱格式不正确"),void a(function(){n.hide()},1e3);if("date"==b.fieldList[i].type&&("object"==typeof b.fieldList[i].value?b.fieldList[i].value=b.fieldList[i].value.format("yyyy-MM-dd"):b.fieldList[i].value=b.fieldList[i].value),"Phone"==b.fieldList[i].field){if(""==b.fieldList[i].value)return n.show("请填写手机号"),void a(function(){n.hide()},1e3);if(!f(b.fieldList[i].value))return n.show("您的手机格式不正确"),void a(function(){n.hide()},1e3);if(b.userFieldData[b.fieldList[i].field]=b.fieldList[i].value,""!=b.fieldList[i].value&&b.fieldList[i].oldvalue!=b.fieldList[i].value){if(!b.code)return n.show("验证码为空"),void a(function(){
n.hide()},1e3);e=!0,t=b.fieldList[i].value}}if(b.userFieldData[b.fieldList[i].field]=b.fieldList[i].value,"img"==b.fieldList[i].type&&(b.fieldList[i].value=b.imgURLs[0],b.userFieldData[b.fieldList[i].field]=b.imgURLs[0]),1==b.fieldList[i].no_null&&(""==b.fieldList[i].value||void 0==b.fieldList[i].value))return n.show("请填写"+b.fieldList[i].field_name),void a(function(){n.hide()},1e3)}e?D(t):m()}function g(e,t){n.show("图片上传中"),zcUpload(e.target.files[0],800,800,function(){},function(e){n.hide();var t=angular.fromJson(e.target.responseText);0==t.errcode&&t.file_url_list&&t.file_url_list.length>0?(b.fieldList[b.upIndex].value=t.file_url_list[0],b.imgURLs[0]=b.fieldList[b.upIndex].value,n.show("上传完成"),setTimeout(function(){n.hide()},1e3)):(n.show(t.errmsg),setTimeout(function(){n.hide()},1e3))},function(){n.hide(),n.show("上传出错"),setTimeout(function(){n.hide()},1e3)})}function h(){window.location.href=history.go(-1)}function f(e){var t=/(^(([0\+]\d{2,3}-)?(0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$)|(^0{0,1}1[3|4|5|6|7|8|9][0-9]{9}$)/;return t.test(e)?!0:!1}function _(e){var t=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;return t.test(e)?!0:!1}function y(e){"Phone"==e.field&&(""!=e.oldvalue&&""!=e.value&&e.oldvalue!=e.value?b.isShowCode=!0:b.isShowCode=!1)}function D(e){o.checkPhoneCode({phone:e,code:b.code}).then(function(e){e.status?m():(n.show(e.msg),a(function(){n.hide()},1e3))})["catch"](function(e){console.log("检查验证码错误",e)})}var b=e.vm={imgURLs:[],waitTime:0,code:"",imgIndex:0,isPhoneNull:!1,isShowCode:!1,isShowEdit:!1,userFieldData:{},sexTypes:[{value:"0",text:"女"},{value:"1",text:"男"}],fieldList:{},isShowBtn:!1,mapping_type:2,isAllReadable:!1,readCount:0,id:0,upIndex:-1};e.vf={getUserField:d,getSMSCode:u,checkPhoneCode:D,waitForSMSCode:p,getFile:g,isPhone:f,isEmail:_,isPhoneChange:y,postUserInfoWithoutCode:m,goBackPage:h,beforeSubmitCheck:v,updateImg:l,init:c};r.setPageTitle("用户信息"),c()}e.$inject=["$scope","$rootScope","$interval","$timeout","$filter","nAPI","wLoading","commService"],angular.module("shop").controller("userMangeCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r,c){function l(e){"undefined"==typeof t.userInfo?r.getuserinfo({}).then(function(i){t.userInfo=i,e()})["catch"](function(e){}):t.sysConfig.is_union_hongware?t.userInfo.is_bind_hongware?e():r.getuserinfo({}).then(function(i){t.userInfo=i,e()})["catch"](function(e){}):e()}function d(){var e=t.sysConfig;if(e.is_union_hongware&&!t.userInfo.is_bind_hongware){var i,a="http://"+window.location.host+"/customize/shop/?v=1.0&ngroute=/shopBasket#/shopBasket",s={orgCode:e.hongwei_orgcode,callbackUrl:a,openID:t.userInfo.wxOpenId,appID:e.wx_appid};i=HONGWAREDOMAIN+"/hfive/2016/store.html?action="+Base64.encode(JSON.stringify(s))+"#!/register",window.location.href=i}else u()}function u(){i.basketList("/mall/shoppingcart.ashx",{action:"list"},function(i){function a(e){return function(t,i){var a=t[e],s=i[e];return a>s?1:s>a?-1:0}}console.log(["获取购物篮列表成功",i]),0==i.list.length?e.showempty=!0:e.showempty=!1,e.productTotalPrice=0,e.productTotalScore=0,e.freight=0,t.totalnums=0,e.basketListData=i.list,e.basketListData.sort(a("supplier_name"));for(var s=[],o=0;o<e.basketListData.length;o++)s.push(e.basketListData[o].supplier_name);Array.prototype.unique=function(){for(var e=[],t={},i=0;i<this.length;i++)t[this[i]]||(e.push(this[i]),t[this[i]]=1);return e},s=s.unique();for(var n=[],o=0;o<s.length;o++){for(var r={supplier_name:s[o],selected:!1,product_list:[]},c=0;c<e.basketListData.length;c++)e.basketListData[c].supplier_name==s[o]&&r.product_list.push(e.basketListData[c]);n.push(r)}e.basketListDataGroup=n},function(e){console.log(["获取购物篮列表失败",e])})}function p(e){a.show(e),setTimeout(function(){a.hide()},600)}console.log("shopBasketController");var m=e.vm={defHead:!1};"undefined"==typeof t.sysConfig?r.getConfig().then(function(e){e.status&&(t.sysConfig=e.result,(0==t.sysConfig.malll.is_customize_mall_head||2==t.sysConfig.malll.is_customize_mall_head&&!t.isPlus)&&(m.defHead=!0),l(function(){d()}))})["catch"](function(e){}):l(function(){d()}),e.productTotalScore=0,e.selectMenu=4,e.hasBottomNav=!1,e.orderProducts=[],e.addnum=function(a,s){s.stopPropagation(),a.count++,console.log(a.count),i.basketeditnum("/mall/shoppingcart.ashx",{action:"update",sku_id:a.sku_id,count:a.count},function(i,s,o,n){console.log(i),0==i.errcode?(t.$broadcast("getShopNums",{}),1==a.selected&&(e.productTotalPrice+=a.price,e.productTotalScore+=a.score)):(a.count=a.max_count,t.$broadcast("getShopNums",{}),p(i.errmsg))},function(e,t,i,a){console.log(e)})},e.delnum=function(a,s){s.stopPropagation(),console.log(a.count),a.count>1?(a.count--,i.basketeditnum("/mall/shoppingcart.ashx",{action:"update",sku_id:a.sku_id,count:a.count},function(i,s,o,n){console.log(i),0==i.errcode&&(t.$broadcast("getShopNums",{}),1==a.selected&&(e.productTotalPrice-=a.price,e.productTotalScore-=a.score))},function(e,t,i,a){console.log(e)})):(a.count=1,t.$broadcast("getShopNums",{}))},e.checknum=function(a){console.log(a),a.count>1?i.basketeditnum("/mall/shoppingcart.ashx",{action:"update",sku_id:a.sku_id,count:a.count},function(s,o,n,r){0==s.errcode?(e.caleProductTotalPrice(),t.$broadcast("getShopNums",{})):(p(s.errmsg),a.count=a.max_count,i.basketeditnum("/mall/shoppingcart.ashx",{action:"update",sku_id:a.sku_id,count:a.count},function(i,a,s,o){t.totalnums=0,e.caleProductTotalPrice(),t.$broadcast("getShopNums",{})},function(e,t,i,a){})),console.log(s)},function(e,t,i,a){console.log(e)}):(a.count=1,i.basketeditnum("/mall/shoppingcart.ashx",{action:"update",sku_id:a.sku_id,count:a.count},function(i,a,s,o){e.caleProductTotalPrice(),t.$broadcast("getShopNums",{})},function(e,t,i,a){}))},e.delme=function(a,o){o.stopPropagation();var n=s.confirm({title:"友情提示",template:"确认要删除这个商品吗？",cssClass:"borderradius5px",cancelText:"取消",cancelType:"button button-clear button-positive",okText:"确认",okType:"button button-clear button-positive"});n.then(function(s){s?(console.log(a),i.basketdel("/mall/shoppingcart.ashx",{action:"delete",cart_ids:a.cart_id},function(i,a,s,o){console.log("删除物品成功"),e.selectedall=!1,t.$broadcast("getShopNums",{}),u()},function(e,t,i,a){console.log("删除物品失败")})):console.log("取消取消订单")})},e.slectemeBtn=function(t){t.selected=!t.selected,console.log(t.selected);var i=!0;e.basketListData.filter(function(e){e.selected||(i=!1)});for(var a=0;a<e.basketListDataGroup.length;a++)if(t.supplier_name==e.basketListDataGroup[a].supplier_name)if(t.selected)e.basketListDataGroup[a].selected=!0;else{for(var s=!1,o=0;o<e.basketListDataGroup[a].product_list.length;o++)e.basketListDataGroup[a].product_list[o].selected&&(s=!0);e.basketListDataGroup[a].selected=s}e.selectedall=i,e.caleProductTotalPrice()},e.slectemeBtnSupplier=function(t){t.selected=!t.selected;for(var i=0;i<t.product_list.length;i++)t.product_list[i].selected=t.selected;for(var a=!0,i=0;i<e.basketListData.length;i++)if(!e.basketListData[i].selected){a=!1;break}e.selectedall=a,e.caleProductTotalPrice()},e.selectedall=!1,e.selectedallBtn=function(){0!=e.basketListData.length&&(e.selectedall=!e.selectedall,angular.forEach(e.basketListDataGroup,function(t){t.selected=e.selectedall;for(var i=0;i<t.product_list.length;i++)t.product_list[i].selected=e.selectedall;e.caleProductTotalPrice()}))},e.caleProductTotalPrice=function(){e.productTotalPrice=0,e.productTotalScore=0;for(var t=0;t<e.basketListData.length;t++){var i=e.basketListData[t];1==i.selected&&(e.productTotalPrice+=i.price*i.count,e.productTotalScore+=i.score*i.count)}},e.goCreateOrder=function(){e.orderProducts=[];for(var t=e.basketListData,i=0;i<t.length;i++)1==t[i].selected&&e.orderProducts.push({title:t[i].title,properties:t[i].properties,img_url:t[i].img_url,count:t[i].max_count,price:t[i].price,score:t[i].score,num:t[i].count,product_id:t[i].product_id,quote_price:t[i].quote_price,sku_id:t[i].sku_id,tags:t[i].product_tags,is_cashpay_only:t[i].is_cashpay_only,is_no_express:t[i].is_no_express});0!=e.orderProducts.length?(window.sessionStorage.setItem("orderProducts",JSON.stringify(e.orderProducts)),o.go("createOrder")):p("请至少选择一种商品哦")},e.goHome=function(){t.isSonghe?window.location.href="/customize/comeoncloud/Index.aspx?key=shophome":window.location.href="/customize/comeoncloud/Index.aspx?key=MallHome"}}e.$inject=["$scope","$rootScope","mAPI","wLoading","wPopup","$state","MALLCONFIG","nAPI","commService"],angular.module("shop").controller("shopBasketController",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r,c){function l(){a.getTags({tag_type:"houses",pagesize:20}).then(function(e){g.tags=e.result.list})["catch"](function(){console.log("error ：getTags")})}function d(){g.keywords?g.isSearch=!0:g.isSearch=!1}function u(){zcBack()}function p(){g.keywords&&(window.localStorage.getItem("search_key")&&(g.keyTexts=JSON.parse(window.localStorage.getItem("search_key"))),g.keyTexts.indexOf(g.keywords)>=0||(g.keyTexts.push(g.keywords),window.localStorage.setItem("search_key",JSON.stringify(g.keyTexts)),console.log("vm.keyTexts",g.keyTexts[0])))}function m(){window.localStorage.removeItem("search_key"),g.keyTexts=[]}function v(){l(),window.localStorage.getItem("search_key")&&(g.keyTexts=JSON.parse(window.localStorage.getItem("search_key")))}var g=e.vm={tags:[],isSearch:!1,keywords:"",keyTexts:[]};e.vf={init:v,isHasValue:d,goBack:u,searchKey:p,removeHistory:m};v()}e.$inject=["$scope","$rootScope","$state","nAPI","$stateParams","wxAPI","$window","sAPI","commService"],angular.module("shop").controller("searchPageeCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s,o){function n(){(""==y.MALLCONFIG.mallconfignew.product_img_ratio1||""==y.MALLCONFIG.mallconfignew.product_img_ratio2)&&(y.MALLCONFIG.mallconfignew.product_img_ratio1=1,y.MALLCONFIG.mallconfignew.product_img_ratio2=1),c(),l(),a(function(){$("#sale").width()<screen.width&&($("#sale").css("width",screen.width),console.log("正常"))},1e3)}function r(){window.sessionStorage.removeItem("orderStatu")}function c(){var e={action:"listbytype",slide_type:"promotion"};s.getSlideByType(e).then(function(e){console.log(["slide获取数据成功",e]),y.sliderdata=e.list})["catch"](function(e){console.log(["slide获取数据失败",e])})}function l(){var e={action:"list",pageindex:1,pagesize:10};s.getSaleList(e).then(function(e){console.log(["获取限时特卖活动列表成功",e]),y.scrollxyData=e.list,y.currSelectSale=e.list[0],d(e.list[0]);for(var t=0;t<y.scrollxyData.length;t++)y.scrollxyData[0].isSelected=0,m(y.scrollxyData[t]);m(e.list[0])})["catch"](function(e){console.log(["获取限时特卖活动列表失败",e])})}function d(e){m(e),y.dataloading=!0,y.activityId=e.promotion_activity_id;var t={promotion_activity_id:e.promotion_activity_id,pageindex:y.pageindex,pagesize:y.pagesize,price_sort:y.pageData.priceRank,discount_sort:y.pageData.discountRank};s.getSaleProductList(t).then(function(e){console.log(["获取限时特卖活动商品列表成功",e]),v(),y.saleProductList=y.saleProductList.concat(e.list);for(var t=0;t<y.saleProductList.length;t++)y.saleProductList[t].isOnTheSale=y.isProOnTheSale;console.log("123",y.saleProductList),y.pageindex++,a(function(){y.dataloading=!1}),e.list.length<y.pagesize&&(y.loadingEndTag=!0,y.loadingTag=!1)})["catch"](function(e){console.log(["获取限时特卖活动商品列表失败",e])})}function u(){console.log("加载更多。。。。"),y.dataloading||(console.log("到底"),d(y.currSelectSale))}function p(e){0==e?(y.pageindex=1,y.pagesize=5,y.dataloading=!1,y.loadingEndTag=!1,y.loadingTag=!0,y.saleProductList=[],y.pageData.priceAdd%2==0?y.pageData.priceRank="price_asc":y.pageData.priceRank="price_desc",d(y.currSelectSale),y.pageData.priceAdd++):1==e&&(y.pageindex=1,y.pagesize=5,y.dataloading=!1,y.loadingEndTag=!1,y.loadingTag=!0,y.saleProductList=[],y.pageData.discountAdd%2==0?y.pageData.discountRank="discount_asc":y.pageData.discountRank="discount_desc",d(y.currSelectSale),y.pageData.discountAdd++)}function m(e){var t=new Date,i=t.getTime();y.startCompare=e.promotion_activity_start_time-i,y.stopCompare=e.promotion_activity_stop_time-i;for(var a=0;a<y.scrollxyData.length;a++)e.promotion_activity_id==y.scrollxyData[a].promotion_activity_id&&(y.startCompare<0&&y.stopCompare>0?(y.leftName="结束",y.isProOnTheSale=!0,y.scrollxyData[a].status=0,y.diffTime=e.promotion_activity_stop_time):y.startCompare>0?(y.leftName="开抢",y.isProOnTheSale=!1,y.scrollxyData[a].status=1,y.diffTime=e.promotion_activity_start_time):y.stopCompare<0&&(y.leftName="活动已结束",y.isProOnTheSale=!1,y.scrollxyData[a].status=2));g()}function v(){var e=0;e=y.diffTime-(new Date).getTime()>0?y.diffTime-(new Date).getTime():(new Date).getTime()-y.diffTime;var t=parseInt(e/1e3/60/60/24,10),i=parseInt(e/1e3/60/60%24,10),a=parseInt(e/1e3/60%60,10),s=parseInt(e/1e3%60,10);y.pageData.leftDay=f(t),y.pageData.leftHour=f(i),y.pageData.leftMinus=f(a),y.pageData.leftSecond=f(s)}function g(){y.pageData.interval=i(function(){v(),console.log("倒计时循环")},1e3,0)}function h(){i.cancel(y.pageData.interval)}function f(e){return 10>e&&(e="0"+e),e}function _(e,t){y.pageindex=1,y.pagesize=5,y.dataloading=!1,y.loadingEndTag=!1,y.loadingTag=!0,y.saleProductList=[],y.currSelectSale=e;for(var i=0;i<y.scrollxyData.length;i++)y.scrollxyData[i].isSelected=-8,e.promotion_activity_id==y.scrollxyData[i].promotion_activity_id&&(0==y.scrollxyData[i].status&&(y.scrollxyData[i].status=3),y.scrollxyData[i].isSelected=t);d(e)}var y=this;y.title="限时特卖",y.sliderdata=[],y.currSelectSale=[],y.MALLCONFIG=o,y.pageindex=1,y.pagesize=5,y.dataloading=!1,y.loadingEndTag=!1,y.loadingTag=!0,y.saleProductList=[],y.showscrollx=!0,y.scrollxyData=[{count:111,url:"http://wap.baidu.com"},{count:112,url:"http://wap.baidu.com"},{count:113,url:"http://wap.baidu.com"},{count:114,url:"http://wap.baidu.com"},{count:115,url:"http://wap.baidu.com"},{count:116,url:"http://wap.baidu.com"},{count:117,url:"http://wap.baidu.com"},{count:118,url:"http://wap.baidu.com"},{count:119,url:"http://wap.baidu.com"},{count:120,url:"http://wap.baidu.com"},{count:111,url:"http://wap.baidu.com"},{count:112,url:"http://wap.baidu.com"},{count:113,url:"http://wap.baidu.com"},{count:114,url:"http://wap.baidu.com"},{count:115,url:"http://wap.baidu.com"},{count:116,url:"http://wap.baidu.com"},{count:117,url:"http://wap.baidu.com"},{count:118,url:"http://wap.baidu.com"},{count:119,url:"http://wap.baidu.com"},{count:120,url:"http://wap.baidu.com"}],y.isProOnTheSale=!1,y.leftName="",y.startCompare=0,y.stopCompare=0,y.diffTime=0,y.screenWidth=0,y.pageData={interval:{},leftDay:"",leftHour:"",leftMinus:"",leftSecond:"",priceAdd:0,discountAdd:0,priceRank:"",discountRank:""},y.clearHistory=r,y.getSaleSlide=c,y.getSaleList=l,y.getSaleProductList=d,y.tabClick=p,y.judgeTime=m,y.timer=v,y.startInterval=g,y.closeInterval=h,y.loadMoreData=u,y.clickWeek=_,n()}e.$inject=["$scope","$filter","$interval","$timeout","nAPI","MALLCONFIG"],angular.module("shop").controller("saleListCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r,c){function l(e){i.show(e),setTimeout(function(){i.hide()},600)}var d=t.pageData={action:"list",list:"",singleAction:"get",address_id:"",deleteAction:"delete",setAction:"setdefault"},u=t.pageFunc={};u.receiveAddressListFunc=function(){e.receiveAddressList("/mall/deliveraddress.ashx",{action:d.action},function(e,i,a,s){e?(console.log(["获取地址成功",e]),d.list=e.list,1==e.list.length&&(u.setDefaultReceiveAdd(e.list[0]),t.isone=!0)):console.log(["获取地址失败",e])},function(e,t,i,a){console.log(["获取地址请求失败",e])})},t.isGotoCreateBtn=function(e){if(console.log(n.siteName),console.log(e),void 0!=n.siteName){var t=r.decodeURIComponent(n.siteparams);t=angular.fromJson(t),console.log(t),t.addressId=e.address_id,o.go(n.siteName,t)}else console.log("不是从创建订单过来的,我还是呆在这边吧")},u.deleteReceiveAddress=function(t){var i=a.confirm({title:"友情提示",template:"确认要删除这个地址吗？",cssClass:"borderradius5px",cancelText:"取消",cancelType:"button button-clear button-positive",okText:"确认",okType:"button button-clear button-positive"});i.then(function(i){i?e.deleteReceiveAddress("/mall/deliveraddress.ashx",{action:d.deleteAction,address_id:t},function(e,t,i,a){0==e.errcode?(l("删除收货地址成功"),u.receiveAddressListFunc()):(console.log(["删除收货地址失败",e]),l("删除收货地址失败"))},function(e,t,i,a){console.log(["请求删除收货地址失败",e]),l("删除收货地址失败")}):console.log("取消删除地址")})},u.setDefaultReceiveAdd=function(i){e.deleteReceiveAddress("/mall/deliveraddress.ashx",{action:d.setAction,address_id:i.address_id},function(e,a,s,o){0==e.errcode?(console.log(["设置默认收货地址成功",e]),i.isdefault=1,1==t.isone?console.log("只有一个收获地址"):u.receiveAddressListFunc(),d.list.length>1&&l("设置默认收货地址成功")):(console.log(["设置默认收货地址失败",e]),l("设置默认收货地址失败"))},function(e,t,i,a){console.log(["请求设置默认收货地址失败",e]),l("设置默认收货地址失败")})},u.init=function(){c.getUserInfo(function(){u.receiveAddressListFunc()},function(){window.location.href="#/bindPhone/"})},u.init()}e.$inject=["mAPI","$scope","wLoading","wPopup","$rootScope","$state","$stateParams","$window","commService"],angular.module("shop").controller("receiveAddressListController",e)}(),function(){"use strict";function e(e,t,i,a,s,o){function n(){t.receiveAddressList("/mall/deliveraddress.ashx",{action:"list"},function(e,t,i,a){e?(console.log(["获取地址成功",e.list.length]),e.list.length>=1&&history.go(-1)):console.log(["获取地址失败",e.list.length])},function(e,t,i,a){console.log(["获取地址请求失败",e])})}var r=e.pageData={id:i.addressId,action:"add",getAction:"get",updateAction:"update",proAction:"provinces",cityAction:"cities",disAction:"districts",consigneename:"",address:"",zip_code:"",phone:"",isdefault:"",data:"",provinceList:[],province:null,cityList:[{code:"0",name:"请选择城市"}],city:"",districtList:[{code:"0",name:"请选择区"}],district:""},c=e.pageFunc={};c.addReceiveAddress=function(){return 0==c.allCheck()?!1:void(void 0==r.id?o.apiPost("/serv/api/mall/deliveraddress.ashx",{action:r.action,consigneename:r.consigneename,address:r.address,province:r.province.name,province_code:r.province.code,city:r.city.name,city_code:r.city.code,dist:r.district.name,dist_code:r.district.code,zip_code:r.zip_code,phone:r.phone,isdefault:r.isdefault},function(e,t,i,s){if(0==e.errcode){console.log(["新增收货地址成功",e]);var o="新增收货地址成功";history.go(-1)}else if(10010==e.errcode)console.log("请先登录"),popUp(e.errmsg,function(){a.go("login")});else{console.log(["新增收货失败",e]);var o="新增收货失败";popUp(o,function(){})}},function(e,t,i,a){console.log(["请求新增收货地址失败",e]);var s="请求新增收货地址失败";popUp(s,function(){})}):o.apiPost("/serv/api/mall/deliveraddress.ashx",{action:r.updateAction,address_id:r.id,consigneename:r.consigneename,address:r.address,province:r.province.name,province_code:r.province.code,city:r.city.name,city_code:r.city.code,dist:r.district.name,dist_code:r.district.code,zip_code:r.zip_code,phone:r.phone,isdefault:r.isdefault},function(e,t,i,a){if(0==e.errcode){console.log(["修改收货地址成功",e]);var s="修改收货地址成功";n(),c.clearAll()}else{console.log(["修改收货失败",e]);var s="修改收货失败";popUp(s,function(){})}},function(e,t,i,a){console.log(["请求修改收货地址失败",e]);var s="请求修改收货地址失败";popUp(s,function(){})}))},c.getCity=function(){var e={code:"0",name:"请选择所属城市"},i={code:"0",name:"请选择所属区"};t.getCity("/mall/area.ashx",{action:r.cityAction,province_code:r.province.code},function(t,a,s,o){t?(r.cityList=t.list,r.cityList.unshift(e),r.city=r.cityList[0],r.districtList=[],r.districtList.unshift(i),r.district=r.districtList[0]):console.log(["获取城市失败",t])},function(e,t,i,a){})},c.getDistrict=function(){var e={code:"0",name:"请选择所属区"};t.getDistrict("/mall/area.ashx",{action:r.disAction,city_code:r.city.code},function(t,i,a,s){t&&(r.districtList=t.list,r.districtList.unshift(e),r.district=r.districtList[0])},function(e,t,i,a){})},c.getSingleReceiveAddress=function(){t.getSingleReceiveAddress("/mall/deliveraddress.ashx",{action:r.getAction,address_id:r.id},function(i,a,s,o){console.log(i),i?(console.log(["获取单个收货地址成功",i]),r.consigneename=i.consigneename,r.phone=i.phone,r.address=i.address,r.zip_code=i.zip_code,r.isdefault=i.isdefault,e.provincecode=i.province_code,e.citycode=i.city_code,e.distcode=i.dist_code,t.getProvince("/mall/area.ashx",{action:"provinces"},function(t,i,a,s){console.log(t);for(var o in t.list)t.list[o].code==e.provincecode&&(r.province.name=t.list[o].name,r.province.code=t.list[o].code)},function(e,t,i,a){console.log(["请求获取省份失败",e])}),e.provincecode=i.province_code,t.getCity("/mall/area.ashx",{action:"cities",province_code:e.provincecode},function(t,i,a,s){console.log(t);for(var o in t.list)t.list[o].code==e.citycode&&(r.city.name=t.list[o].name,r.city.code=t.list[o].code);r.cityList=r.cityList.concat(t.list)},function(e,t,i,a){console.log(["请求获取省份失败",e])}),t.getDistrict("/mall/area.ashx",{action:"districts",city_code:e.citycode},function(t,i,a,s){console.log(t);for(var o in t.list)t.list[o].code==e.distcode&&(r.district.name=t.list[o].name,r.district.code=t.list[o].code);r.districtList=r.districtList.concat(t.list)},function(e,t,i,a){console.log(["请求获取省份失败",e])})):console.log(["获取单个收货地址失败",i])},function(e,t,i,a){console.log(["请求获取单个收货地址失败",e])})},c.allCheck=function(){if(""==r.consigneename){console.log("姓名为空");var e=s.alert({title:"友情提示",template:"姓名不能为空",okText:"知道了",okType:"button button-clear button-positive"});return e.then(function(e){}),!1}if(""==r.address){console.log("地址为空");var e=s.alert({title:"友情提示",template:"地址不能为空",okText:"知道了",okType:"button button-clear button-positive"});return e.then(function(e){}),!1}if(""==r.phone){console.log("手机号为空");var e=s.alert({title:"友情提示",template:"手机号不能为空",okText:"知道了",okType:"button button-clear button-positive"});return e.then(function(e){}),!1}if("0"==r.province.code){console.log("没有填写省份");var e=s.alert({title:"友情提示",template:"您选择省份",okText:"知道了",okType:"button button-clear button-positive"});return e.then(function(e){}),!1}if("0"==r.city.code){console.log("没有填写城市");var e=s.alert({title:"友情提示",template:"您选择城市",okText:"知道了",okType:"button button-clear button-positive"});return e.then(function(e){}),!1}if("0"==r.district.code){console.log("没有填写区");var e=s.alert({title:"友情提示",template:"您选择区域",okText:"知道了",okType:"button button-clear button-positive"});return e.then(function(e){}),!1}return!0},c.isPhone=function(e){var t=/(^(([0\+]\d{2,3}-)?(0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$)|(^0{0,1}1[3|4|5|6|7|8|9][0-9]{9}$)/;return t.test(e)?!0:!1},c.clearAll=function(){r.consigneename="",r.address="",r.province.name="请选择省份",r.province.code="0",r.city.name="请选择市",r.city.code="0",r.district.name="请选择区",r.district.code="0",r.zip_code="",r.phone="",r.isdefault=""},c.init=function(){var e={code:"0",name:"请选择省份"};r.city=r.cityList[0],r.district=r.districtList[0],t.getProvince("/mall/area.ashx",{action:r.proAction},function(t,i,a,s){t?(r.provinceList=t.list,r.provinceList.unshift(e),r.province=r.provinceList[0]):console.log(["获取省份失败",t])},function(e,t,i,a){console.log(["请求获取省份失败",e])}),void 0!=r.id&&c.getSingleReceiveAddress()},c.init()}e.$inject=["$scope","mAPI","$stateParams","$state","wPopup","nAPI"],angular.module("shop").controller("receiveAddressController",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r,c,l,d,u,p){function m(){i.pdCatrgory().then(function(e){var t={category_name:"全部",category_id:"",isme:!0};e.list.unshift(t),f.catDate=e.list,sessionStorage.setItem("catDate",JSON.stringify(f.catDate))})}function v(){f.dataloading=!0;i.pdList({action:"list",pageindex:f.pageindex,pagesize:f.pagesize,keyword:f.keywordID,category_id:f.catID,tags:f.tagID,color_name:f.colorID,size_name:f.sizeID,sort:f.updownID,is_group_buy:0}).then(function(e){f.productListData=f.productListData.concat(e.list),console.log(["more productListDate",e.list]),f.pageindex++,a(function(){f.dataloading=!1}),e.list.length<f.pagesize&&(f.loadingEndTag=!0,f.loadingTag=!1)})["catch"](function(e){console.log(["error",f.productListDate])})}function g(){v(),p.getUserInfo(function(){u.getMallHomeShareConfig({}).then(function(e){console.log("sdata",e),r.title=e.result.title,r.desc=e.result.desc,r.imgUrl=e.result.img_url,r.link=location.origin+"/customize/shop/?v=1.0&sale_id="+t.userInfo.userid+"&ngroute="+location.hash.substring(1)+"#"+location.hash.substring(1),p.setPageTitle(r.title),c.share(r)})},function(){})}var h=GetParm("sale_id");""!=h&&window.sessionStorage.setItem("sale_id",h);var f=this;e.selectMenu=2,f.keywordID=n.keywordID?n.keywordID:"",f.catID=n.catID?n.catID:"",f.tagID=n.tagID?n.tagID:"",f.updownID=n.updownID?n.updownID:"",f.colorID=n.colorID?n.colorID:"",f.sizeID=n.sizeID?n.sizeID:"",f.navName=n.navName?n.navName:"全部商品",p.setPageTitle(f.navName),f.selected=1,f.MALLCONFIG=d,console.log("=========",f.MALLCONFIG),(""==f.MALLCONFIG.mallconfignew.product_img_ratio1||null==f.MALLCONFIG.mallconfignew.product_img_ratio1||""==f.MALLCONFIG.mallconfignew.product_img_ratio2||null==f.MALLCONFIG.mallconfignew.product_img_ratio2)&&(f.MALLCONFIG.mallconfignew.product_img_ratio1=1,f.MALLCONFIG.mallconfignew.product_img_ratio2=1),f.pageData={},f.productListData=[],f.pageindex=1,f.pagesize=10,f.dataloading=!1,f.loadingEndTag=!1,f.loadingTag=!0,f.show=0;var _=sessionStorage.getItem("catDate");_?f.catDate=JSON.parse(_):(f.catDate="",m()),f.tagchangge=function(e){f.show=e},f.navswitch=function(e){f.catID=e.category_id,f.pageindex=1,f.productListData=[],v();for(var t in f.catDate)f.catDate[t].category_id==e.category_id?f.catDate[t].isme=!0:f.catDate[t].isme=!1};var y=window.sessionStorage.getItem("productListStorage");window.sessionStorage.removeItem("productListStorage"),y=JSON.parse(y),console.log(["跳回来productListStorageData",y]),y&&(f.productListData=y.data,f.pageindex=y.pageindex,f.pagesize=y.pagesize),f.goProductDetail=function(e){e.access_level>d.mallconfignew.access_level?d.mallconfignew.is_member?zcToUrl(d.mallconfignew.nopms_url):zcToUrl(d.mallconfignew.apply_url):window.plus?zcToUrl("/customize/shop/?v=1.0&ngroute=/productDetail/"+e.product_id+"#/productDetail/"+e.product_id):s.go("productDetail",{id:e.product_id})},f.loadMoreData=function(){console.log("加载更多。。。。"),f.dataloading||(console.log("到底"),v())},f.searchMask=0,f.pageData.searchInfo="",f.pageData.searchInfo=f.keywordID,f.searchBtn=0,f.searchRelateMask=0,f.conditionSort=0,f.placeholder="搜索商品",f.startSearch=function(){$(".product-list-wrap .header .search-wrap").css("width","72%"),f.sideMenus=0,f.pageData.searchInfo?(f.quxiao=0,f.searchMask=0,f.searchBtn=1,f.searchRelateMask=1):(f.quxiao=1,f.searchMask=1,f.searchBtn=0,f.searchRelateMask=0)},f.cancelSearch=function(){$(".product-list-wrap .header .search-wrap").css("width","86%"),f.pageData.searchInfo=f.keywordID,f.placeholder="搜索商品",f.quxiao=0,f.searchMask=0},f.nosearch=function(){$(".product-list-wrap .header .search-wrap").css("width","86%"),f.placeholder="搜索商品",f.quxiao=0,f.searchMask=0,f.searchRelateMask=0},f.checkSearchInfo=function(){f.pageData.searchInfo?(f.quxiao=0,f.searchMask=0,f.searchBtn=1,f.searchRelateMask=1):(f.quxiao=1,f.searchMask=1,f.searchBtn=0,f.searchRelateMask=0)},f.goSearch=function(){$(".product-list-wrap .header .search-wrap").css("width","86%"),f.quxiao=1,f.searchMask=1,f.searchBtn=0,f.searchRelateMask=0,console.log(["vm.pageData.searchInfo",f.pageData.searchInfo]),f.placeholder="搜索商品",f.searchBtn=0,f.searchMask=0,f.searchRelateMask=0,a(function(){window.plus?zcToUrl("/customize/shop/?v=1.0&ngroute=/productList%3fkeywordID%3d"+f.pageData.searchInfo+"#/productList?keywordID="+f.pageData.searchInfo):s.go("productList",{keywordID:f.pageData.searchInfo})})};var D=[{prop_id:"",prop_name:"默认排序"},{prop_id:"price_asc",prop_name:"价格最低"},{prop_id:"price_desc",prop_name:"价格最高"},{prop_id:"time_asc",prop_name:"最新上架"},{prop_id:"time_desc",prop_name:"最早上架"}];f.showSelectSort=function(){1==f.conditionSort?f.conditionSort=0:(f.conditionSort=1,f.conditionListData=[],f.conditionListData=D)},f.showSelectColor=function(){if(2==f.conditionSort)f.conditionSort=0;else{f.conditionSort=2;i.colorList().then(function(e){f.conditionListData=[],f.conditionListData=e.list,console.log(["获取颜色列表成功",e])})["catch"](function(e){})}},f.showSelectSize=function(){if(3==f.conditionSort)f.conditionSort=0;else{f.conditionSort=3;i.sizeList().then(function(e){f.conditionListData=[],f.conditionListData=e.list,console.log(["获取尺码列表成功",e])})["catch"](function(e){})}},f.closeCondition=function(){f.conditionSort=0},e.$on("ngRepeatFinished",function(e){new IScroll("#wrapper1",{mouseWheel:!0,click:!0})}),f.sortByPrice=function(e){f.updownID=e,f.productListData=[],f.pageindex=1,f.pagesize=10,f.dataloading=!1,f.loadingEndTag=!1,f.loadingTag=!0,v()},f.goSearchProductList=function(e,t,i){1==e?(f.updownID=i,f.productListData=[],f.pageindex=1,f.pagesize=10,f.dataloading=!1,f.loadingEndTag=!1,f.loadingTag=!0,f.conditionSort=0,v()):2==e?window.plus?zcToUrl("/customize/shop/?v=1.0&ngroute=/productList%3fcolorID%3d"+t+"#/productList?colorID="+t):s.go("productList",{colorID:t}):3==e&&(window.plus?zcToUrl("/customize/shop/?v=1.0&ngroute=/productList%3fsizeID%3d"+t+"#/productList?sizeID="+t):s.go("productList",{sizeID:t}))},g()}e.$inject=["$scope","$rootScope","nAPI","$timeout","$state","$q","$stateParams","shopInfo","wxAPI","$window","MALLCONFIG","sAPI","commService"],angular.module("shop").controller("productListController",e)}(),function(){"use strict";function e(e){return function(t,i){t=angular.copy(t),i=angular.copy(i);for(var a=e(t),s=0;s<t.length;s++)for(var o=0;o<t[s].values.length;o++){var n=t[s].values[o].p_id+":"+t[s].values[o].v_id;t[s].values[o].countnum=0;for(var r=0;r<i.length;r++)if(a.length>0){for(var c=0,l=0;l<a.length;l++)(a[l].pi===s||i[r].properties.match(a[l].matchtext))&&c++;c===a.length&&i[r].properties.match(n)&&(t[s].values[o].countnum+=i[r].count)}else i[r].properties.match(n)&&(t[s].values[o].countnum+=i[r].count)}return{skucheckdata:t,checkedsku:a}}}function t(){return function(e){for(var t=[],i=0;i<e.length;i++)for(var a=0;a<e[i].values.length;a++){var s=e[i].values[a].p_id+":"+e[i].values[a].v_id+":"+e[i].name+":"+e[i].values[a].value;e[i].values[a].checked&&t.push({pi:i,vi:a,matchtext:s,p_id:e[i].values[a].p_id,v_id:e[i].values[a].v_id,name:e[i].name,value:e[i].values[a].value})}return t}}e.$inject=["getCheckedSku"],angular.module("shop").factory("checkSkuNum",e).factory("getCheckedSku",t)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r,c,l,d,u,p,m,v,g,h,f,_){function y(){for(var t=0;t<e.productDetailData.skus.length;t++){var i=e.productDetailData.skus[t];0==i.count&&H.noStockSkuList.push(i)}if(e.productPropertyData)for(var t=0;t<e.productPropertyData.length;t++){var a={},s=e.productPropertyData[t];a.name=s.name,a.values=[];for(var o=0;o<s.values.length;o++)s.values[o].p_name=s.name,s.values[o].selected=!1,s.values[o].canSelect=!0,D(s.values[o],H.noStockSkuList)&&a.values.push(s.values[o]);H.noStockPVList.push(a)}}function D(e,t){for(var i=0;i<t.length;i++)if(b(t[i],e))return!0;return!1}function b(e,t){var i=t.p_id+":"+t.v_id+":"+t.p_name+":"+t.value;return e.properties.indexOf(i)>-1?!0:!1}function w(e){if(0==e.selected){for(var t=[],i=0;i<H.noStockSkuList.length;i++)b(H.noStockSkuList[i],e)&&t.push(H.noStockSkuList[i]);for(var i=0;i<H.noStockPVList.length;i++){var a=H.noStockPVList[i].values;if(H.noStockPVList[i].name==e.name)x(a[s]);else for(var s=0;s<a.length;s++)D(a[s],t)?a[s].canSelect=!0:(a[s].selected=!1,a[s].canSelect=!1)}e.selected=!0}else for(var i=0;i<H.noStockPVList.length;i++){var a=H.noStockPVList[i].values;if(H.noStockPVList[i].name==e.name)for(var s=0;s<a.length;s++)a[s].selected=!1}}function k(){window.location.href="/App/LiveChat/LiveChat.aspx?product_id="+H.productId}function x(e){for(var t=0;t<e.values.length;t++)e.values[t].selected=!1}function I(){r.addToCar({action:"add",sku_id:e.orderProduct.sku_id,count:e.orderProduct.num}).then(function(t){if(0===t.errcode)e.skuClose(),u.show("加入购物车成功"),a.shop_nums=0,P(),o(function(){u.hide()},1e3);else{var i=p.alert({title:"提示信息",template:t.errmsg});i.then(function(e){})}})["catch"](function(e){var t=p.alert({title:"提示信息",template:e.errmsg});t.then(function(e){})})}function P(){c.basketList("/mall/shoppingcart.ashx",{action:"list"},function(t){if(t.list&&0==t.list.length)e.is_shownums=!1;else{e.is_shownums=!0;for(var i in t.list)a.shop_nums+=t.list[i].count;console.log(["cal",isNaN(a.shop_nums)]),isNaN(a.shop_nums)&&window.location.reload();
}})}function S(){var t=GetParm("actionkey");if(t){var i=window.localStorage.getItem(t);if(i){var s=JSON.parse(i);"undefined"!=typeof s&&"addToBasket"==s.action&&"undefined"!=typeof s.data&&"undefined"!=typeof s.data.sku_id&&"undefined"!=typeof s.data.count&&s.data.count&&(e.orderProduct.sku_id=s.data.sku_id,e.orderProduct.num=s.data.count,window.localStorage.removeItem(t),r.getuserinfo({}).then(function(e){a.userInfo=e,I()})["catch"](function(e){}))}}}function L(){console.log("use skus 7"),e.orderProduct.properties=e.productDetailData.skus[0].properties,e.orderProduct.sku_id=e.productDetailData.skus[0].sku_id,e.orderProduct.price=e.productDetailData.skus[0].price,e.orderProduct.score=e.productDetailData.skus[0].score,e.orderProduct.totalcount=e.productDetailData.skus[0].count,e.orderProduct.is_cashpay_only=e.productDetailData.skus[0].is_cashpay_only,e.orderProduct.product_id=e.productDetailData.product_id,e.orderProduct.tags=e.productDetailData.tags,e.orderProduct.is_no_express=e.productDetailData.is_no_express}function C(){e.orderProduct.img_url=e.productDetailData.img_url,e.orderProduct.quote_price=e.productDetailData.quote_price,e.orderProduct.title=e.productDetailData.title,e.orderProduct.count=e.productDetailData.totalcount,e.orderProduct.price=e.productDetailData.price,e.orderProduct.score=e.productDetailData.score,e.orderProduct.product_id=e.productDetailData.product_id,e.orderProduct.is_cashpay_only=e.productDetailData.is_cashpay_only,e.orderProduct.is_no_express=e.productDetailData.is_no_express,e.orderProduct.tags=e.productDetailData.tags}function T(){f.getProductReviewList(H.productId,{}).then(function(e){H.reviewList=e.result.list,H.reviewList.length;for(var t=0;t<H.reviewList.length;t++){H.reviewList[t].stars=[];for(var i=0;i<H.reviewList[t].review_score;i++)H.reviewList[t].stars.push(i);H.reviewList[t].commentList=[],H.reviewList[t].comment_img&&H.reviewList[t].commentList.push(H.reviewList[t].comment_img.split(","))}})}function M(){var t=0;e.productDetailData.promotion_stop_time-(new Date).getTime()>0?t=e.productDetailData.promotion_stop_time-(new Date).getTime():E();var i=parseInt(t/1e3/60/60/24,10),a=parseInt(t/1e3/60/60%24,10),s=parseInt(t/1e3/60%60,10),o=parseInt(t/1e3%60,10);H.leftDay=B(i),H.leftHour=B(a),H.leftMinus=B(s),H.leftSecond=B(o)}function A(){var t=0;t=new Date(e.productDetailData.appointment_info.appointment_end_time)-(new Date).getTime();var i=parseInt(t/1e3/60/60/24,10),a=parseInt(t/1e3/60/60%24,10),s=parseInt(t/1e3/60%60,10),o=parseInt(t/1e3%60,10);H.leftDay1=B(i),H.leftHour1=B(a),H.leftMinus1=B(s),H.leftSecond1=B(o),0==H.leftDay1&&0==H.leftHour1&&0==H.leftMinus1&&0==H.leftSecond1&&location.reload()}function z(){H.interval=_(function(){M()},1e3,0)}function E(){H.isShowPromotion=!1,_.cancel(H.interval)}function B(e){return 0>e&&(e=0),e}function G(){H.interval1=_(function(){A()},1e3,0)}function O(){return window.plus||U()?H.isLogin?!1:(window.location.href="#/bindPhone/",!0):!0}function F(){var e=navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)?(console.log("是微信浏览器"),H.chat=!0):H.chat=!1,H.chat}function U(){var e=F();return e?!0:(H.showWxPay=!0,!1)}function N(e){var t=e.touches[0],i=t.pageY;if("touchstart"==e.type)return void(H.skuMainPanelTouchPageYStart=i);if("touchmove"==e.type){var a=(H.skuMainPanelTouchPageYStart-i,parseInt(Math.abs(H.skuMainPanelTouchPageYStart-i)/2));H.skuMainPanelTouchPageYStart>i?H.skuMainPanel.scrollTop+=a:H.skuMainPanel.scrollTop-=a}}function R(){y(),T(),H.mall_config=a.groupConfig,console.log("vm.mall_config",H.mall_config),e.productDetailData.is_promotion_product&&e.productDetailData.promotion_stock>0&&e.productDetailData.promotion_stop_time-(new Date).getTime()>0&&e.productDetailData.promotion_start_time-(new Date).getTime()<0&&(H.isShowPromotion=!0,z()),1==e.productDetailData.is_appointment&&new Date(e.productDetailData.appointment_info.appointment_end_time).getTime()>(new Date).getTime()&&G(),$("#loadingToast").hide(),P(),H.skuMainPanel.addEventListener("touchstart",N,!1),H.skuMainPanel.addEventListener("touchmove",N,!1)}var j=e.vf={setOrderProductNoSKU:L,setOrderProductHasSKU:C,loadProductReviewList:T,getNoStockPVAndSkus:y,selectNoStockPV:w,gotoKefu:k},H=e.vm={showStock:!1,sku_img:"",reviewList:[],productId:i.id,isShowPromotion:!1,i_height:document.body.scrollHeight,isLogin:!0,showShare:!1,isSonghe:a.isSonghe,noStockPVList:[],noStockSkuList:[],mall_config:"",chat:!1,skuMainPanel:document.getElementById("sku-main-panel"),isComeoncloud:!1,skuMainPanelTouchPageYStart:0},W=GetParm("sale_id");W.indexOf("#")>-1&&(W=W.substring(0,W.indexOf("#"))),""!=W&&window.localStorage.setItem("sale_id",W),window.sessionStorage.removeItem("orderProducts"),e.orderProduct={},e.stockProduct={},e.selectAll=!1,e.orderProduct.num=1,e.stockProduct.num=1,e.noSKU=!1,e.buynow=!1,e.isHasGift=!1,a.shop_nums=0,e.MALLCONFIG=g,e.productId=i.id,console.log(["$scope.MALLCONFIG",e.MALLCONFIG]),h.setPageTitle("商品详情"),console.log("strat getDetail"),$("#loadingToast").show();var X=window.location.href;X.match("comeoncloud")&&(H.isComeoncloud=!0);var q=r.pdDetail(e.productId).then(function(t){console.log(" getDetail",t),e.productDetailData=t,H.sku_img=e.productDetailData.img_url,h.setPageTitle(t.title),e.productDetailData.product_desc=n.trustAsHtml(e.productDetailData.product_desc),e.leftProductCount=e.productDetailData.totalcount,e.productDetailData.totalcount=0,console.log("use skus 1"),angular.forEach(e.productDetailData.skus,function(t,i){e.productDetailData.totalcount+=t.count}),j.setOrderProductHasSKU(),m.title=e.productDetailData.title,""==e.productDetailData.product_summary?m.desc=e.productDetailData.title:m.desc=e.productDetailData.product_summary,h.getUserInfo(function(){H.isLogin=!0,m.link=location.origin+"/customize/shop/?v=1.0&sale_id="+a.userInfo.userid+"&ngroute="+location.hash.substring(1)+"#"+location.hash.substring(1),m.imgUrl=e.productDetailData.img_url,m.timeline_s=function(){var e={id:H.productId,type:"ShareProduct"};f.shareAddScore(e)},console.log(["shopInfo",m]),v.share(m)},function(e){H.isLogin=!1}),console.log("use skus 7:1 ,",e.productDetailData),L(),R(),setTimeout(function(){var e=[];$.each($("img"),function(t,i){i.src&&(e.push(i.src),$(i).click(function(t){wx.previewImage({current:this.src,urls:e})}))})},2e3)})["catch"](function(e){console.log(" getDetail catch",e),e.access_level>g.mallconfignew.access_level&&(g.mallconfignew.is_member||g.mallconfignew.is_login===!1?window.location.href=g.mallconfignew.nopms_url:window.location.href=g.mallconfignew.apply_url)});s.resolve(q).then(function(){"undefined"!=typeof e.productDetailData&&(e.sliderdata=[],e.picsData={},e.picsData.datalist=e.productDetailData.show_img_list,e.picsData.ratio="640:700",e.sliderdata[0]=e.picsData)});var Y=r.pdProperty(e.productId).then(function(t){e.productPropertyData=t.list,e.productStockPropertyData=t.list,angular.forEach(e.productStockPropertyData,function(e,t){angular.forEach(e.values,function(e,t){e.checked=!1})}),"undefined"==typeof e.productPropertyData||0==e.productPropertyData.length?e.noSKU=!0:angular.forEach(e.productPropertyData,function(e,t){angular.forEach(e.values,function(e,t){e.checked=!1})})})["catch"](function(){});s.all([q,Y]).then(function(){if(!e.noSKU){console.log("use skus 2");var t=d(e.productPropertyData,e.productDetailData.skus);e.productPropertyData=t.skucheckdata}S()})["catch"](function(){}),"undefined"==typeof a.sysConfig&&r.getConfig().then(function(e){e.status&&(a.sysConfig=e.result)})["catch"](function(e){}),e.selectSkuValue=function(t,i){if(console.log(["cpi, cvi",t,i]),e.productPropertyData[t].values[i].countnum<=0)return void(H.isSonghe||(H.showStock=!0));e.productPropertyData[t].values[i].sku_img?H.sku_img=e.productPropertyData[t].values[i].sku_img:H.sku_img=e.productDetailData.img_url,console.log(e.productDetailData.img_url);for(var a=0;a<e.productPropertyData.length;a++)for(var s=0;s<e.productPropertyData[a].values.length;s++)a==t&&(s==i&&0==e.productPropertyData[a].values[s].checked?e.productPropertyData[a].values[s].checked=!0:e.productPropertyData[a].values[s].checked=!1);console.log("use skus 3");var o=d(e.productPropertyData,e.productDetailData.skus);if(console.log(["checkresult",o]),e.productPropertyData=o.skucheckdata,e.orderProduct.count=e.orderProduct.totalcount,e.selectAll=!1,o.checkedsku.length>0&&o.checkedsku.length===o.skucheckdata.length){for(var n=[],r=0;r<o.checkedsku.length;r++)n.push(o.checkedsku[r].matchtext);var c=[];console.log("use skus 4");for(var r=0;r<e.productDetailData.skus.length;r++)e.productDetailData.skus[r].properties==n.join(";")&&c.push(e.productDetailData.skus[r]);console.log("matchtext",n),console.log("matchskulist[0]",c[0]),e.orderProduct=angular.extend(e.orderProduct,c[0]),e.orderProduct.num>e.orderProduct.count&&(e.orderProduct.num=e.orderProduct.count),e.selectAll=!0}},e.selectStockValue=function(t,i){for(var a=0;a<e.productStockPropertyData.length;a++)for(var s=0;s<e.productStockPropertyData[a].values.length;s++)a==t&&(s==i&&0==e.productStockPropertyData[a].values[s].checked?e.productStockPropertyData[a].values[s].checked=!0:e.productStockPropertyData[a].values[s].checked=!1);var o=checkStockNum(e.productStockPropertyData,e.productDetailData.skus);if(e.productStockPropertyData=o.skucheckdata,console.log(["checkStockresult.skucheckdata",e.productStockPropertyData]),console.log(["checkStockresult.checkedsku",o.checkedsku]),o.checkedsku.length>0&&o.checkedsku.length===o.skucheckdata.length){for(var n=[],r=0;r<o.checkedsku.length;r++)n.push(o.checkedsku[r].matchtext);var c=[];console.log("use skus 4");for(var r=0;r<e.productDetailData.skus.length;r++)e.productDetailData.skus[r].properties==n.join(";")&&c.push(e.productDetailData.skus[r]);console.log("matchtext",n),console.log("matchskulist[0]",c[0]),e.stockProduct.props=c[0].properties,e.stockProduct.sku_id=c[0].sku_id}},e.delNum=function(){if(e.orderProduct.num<=0){var t=p.alert({title:"提示信息",template:"不能再少了哦"});t.then(function(e){})}else e.orderProduct.num=e.orderProduct.num-1},e.stockDelNum=function(){if(e.stockProduct.num<=1){var t=p.alert({title:"提示信息",template:"不能再少了哦"});t.then(function(e){})}else e.stockProduct.num=e.stockProduct.num-1},e.addNum=function(){if(e.orderProduct.num>=e.orderProduct.count){var t=p.alert({title:"提示信息",template:"不能再多了哦"});t.then(function(e){}),e.orderProduct.num=e.orderProduct.count}else e.orderProduct.num=e.orderProduct.num+1},e.stockAddNum=function(){e.stockProduct.num=e.stockProduct.num+1},e.stockSubmit=function(){for(var t=[],i=0;i<H.noStockPVList.length;i++){for(var a=0,s=0;s<H.noStockPVList[i].values.length;s++)if(H.noStockPVList[i].values[s].selected){var n=H.noStockPVList[i].values[s].p_id+":"+H.noStockPVList[i].values[s].v_id+":"+H.noStockPVList[i].values[s].p_name+":"+H.noStockPVList[i].values[s].value;t.push(n),a+=1}if(0==a){var r=p.alert({title:"提示信息",template:"请选择商品规格"});return void r.then(function(e){})}}var n=t.join(";");""!=n&&(e.stockProduct.props=n,e.stockProduct.product_id=e.productDetailData.product_id,e.stockProduct.product_name=e.productDetailData.title,console.log(["$scope.stockProduct",e.stockProduct]),f.stockSubmit(e.stockProduct).then(function(e){console.log(["result",e]),e.status&&(u.show("提交成功"),o(function(){u.hide()},1e3))}))},e.checknum=function(){if(e.orderProduct.num>e.orderProduct.count){e.orderProduct.num=e.orderProduct.count;var t=p.alert({title:"提示信息",template:"您所填写的商品数量超过库存"});t.then(function(e){})}if(e.orderProduct.num<1)if(""===e.orderProduct.num);else{e.orderProduct.num=1;var t=p.alert({title:"提示信息",template:"请选择至少选择一件商品"});t.then(function(e){})}},e.buySure=function(){if(0==e.leftProductCount){var i=p.alert({title:"提示信息",template:"当前商品已经没有了哦，请看看其他商品"});return void i.then(function(e){})}if(0==e.orderProduct.num){var i=p.alert({title:"提示信息",template:"请选择至少选择一件商品"});return void i.then(function(e){})}if(e.selectAll);else{if(!e.noSKU){var i=p.alert({title:"提示信息",template:"请选择商品规格"});return void i.then(function(e){})}L()}e.orderProduct.sale_id=GetParm("sale_id"),window.sessionStorage.setItem("orderProducts",JSON.stringify([e.orderProduct])),e.submitAction(function(){t.go("createOrder")},!1)},e.showSkuPage=function(){e.productDetailData.properties="",e.showSKU=1,e.noSKU&&(console.log("use skus 5"),e.orderProduct.totalcount=e.productDetailData.skus[0].count)},e.addToShopCar=function(){O()||($(".btnGiveGiftBtnConfirm").hide(),$(".btnCarSureConfirm").show(),$(".btnBuySureConfirm").hide(),e.buynow=!1,e.Basket=1,e.showSkuPage())},e.buyNow=function(){O()||($(".btnGiveGiftBtnConfirm").hide(),$(".btnCarSureConfirm").hide(),$(".btnBuySureConfirm").show(),e.buynow=!0,e.Basket=1,e.showSkuPage())},e.carSure=function(){if(0==e.leftProductCount){var t=p.alert({title:"提示信息",template:"当前商品已经没有了哦，请看看其他商品"});return void t.then(function(e){})}if(0==e.orderProduct.num){var t=p.alert({title:"提示信息",template:"请选择至少选择一件商品"});return void t.then(function(e){})}if(e.selectAll);else{if(!e.noSKU){var t=p.alert({title:"提示信息",template:"请选择商品规格"});return void t.then(function(e){})}console.log("use skus 6"),e.orderProduct.sku_id=e.productDetailData.skus[0].sku_id}e.submitAction(function(){I()},!0)},$(".sku-page")[0]&&$(".sku-page")[0].addEventListener("touchmove",function(e){e.preventDefault()}),e.showSKU=0,e.showSku=function(){e.showSKU=1},e.skuClose=function(){e.showSKU=0},e.stockClose=function(){H.showStock=0,e.stockProduct.num=1},e.addCollectFunc=function(){if(!O()){r.addCollect(e.productId).then(function(t){0==t.errcode&&(e.productDetailData.is_collect=1)})["catch"](function(e){})}},e.delCollectFunc=function(){if(U()){r.delCollect(e.productId).then(function(t){0==t.errcode&&(e.productDetailData.is_collect=0)})["catch"](function(e){})}},a.shop_nums=0,console.log(["r",a.shop_nums]),e.showGiftBtn=function(){O()||e.showGiftBuy()},e.showGiftBuy=function(){$(".btnGiveGiftBtnConfirm").show(),$(".btnCarSureConfirm").hide(),$(".btnBuySureConfirm").hide(),e.Basket=2,e.showSkuPage()},e.giveGiftBtn=function(){if(0==e.leftProductCount){var i=p.alert({title:"提示信息",template:"当前商品已经没有了哦，请看看其他商品"});return void i.then(function(e){})}if(e.selectAll);else{if(!e.noSKU){var i=p.alert({title:"提示信息",template:"请选择商品规格"});return void i.then(function(e){})}L()}j.setOrderProductHasSKU(),e.orderProduct.grouptype="givegift",window.sessionStorage.setItem("orderProducts",JSON.stringify([e.orderProduct])),e.submitAction(function(){t.go("createOrder")},!1)},e.goToOtherUrl=function(){a.isSonghe?window.location.href="/customize/comeoncloud/Index.aspx?key=shophome":window.location.href="/customize/comeoncloud/Index.aspx?key=MallHome"},e.getRights=function(){r.getRights().then(function(e){if(e.status)for(var t=0;t<e.result.length;t++);})["catch"](function(e){})},e.getRights(),e.submitAction=function(t,i){$("#loadingToast").show(),h.getUserInfo(function(){var s=a.sysConfig;if(s.is_union_hongware)if(a.userInfo.is_bind_hongware)$("#loadingToast").hide(),t();else{var o,n="http://"+window.location.host+"/customize/shop/";if(i){var r={action:"addToBasket",data:{sku_id:e.orderProduct.sku_id,count:e.orderProduct.num}},c=CreateGUID();window.localStorage.setItem(c,JSON.stringify(r)),n+="?v=1.0&actionkey="+c+"&ngroute=/productDetail/"+e.productId+"#/productDetail/"+e.productId}else n+="?v=1.0&ngroute=/createOrder#/createOrder";var l={orgCode:s.hongwei_orgcode,callbackUrl:n,openID:a.userInfo.wxOpenId,appID:s.wx_appid};o=HONGWAREDOMAIN+"/hfive/2016/store.html?action="+Base64.encode(JSON.stringify(l))+"#!/register",window.location.href=o}else $("#loadingToast").hide(),t()},function(){$("#loadingToast").hide()})}}e.$inject=["$scope","$state","$stateParams","$rootScope","$q","$timeout","$sce","nAPI","mAPI","getCheckedSku","checkSkuNum","wLoading","wPopup","shopInfo","wxAPI","MALLCONFIG","commService","sAPI","$interval"],angular.module("shop").controller("productDetailController",e)}(),function(){"use strict";function e(e,t){e.payMoney=t.totalPrice,e.order_id=t.orderid}e.$inject=["$scope","$stateParams"],angular.module("shop").controller("paySuccessCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r){function c(){m()}function l(e,t,i){f.responseCount=0,f.upFileCount=e.files.length;var a=$(e).attr("data-parent-index");if(1==t){var s=$(e).attr("data-index");f.startIndex=Number(s)}else if(f.startIndex=f.order.product_list[a].imgList.length,f.startIndex+f.upFileCount>f.maxImgCount)return void alert("最多上传"+f.maxImgCount+"张");e.files.length>0&&(f.loadingLayer=layer.open({type:2}));for(var o=0;o<e.files.length;o++)zcUpload(e.files[o],800,0,function(e){},function(e){f.responseCount++,_.sendsuccess(e.target.fileIndex,e.target.parentIndex,JSON.parse(e.target.responseText))},function(e){f.responseCount++,_.senderror(e.target.responseText)},{parentIndex:a,fileIndex:f.startIndex+o})}function d(e,i,a){return 0!=a.errcode?(alert(a.errmsg),void layer.close(f.loadingLayer)):(t.$apply(function(){f.order.product_list[i].imgList[e]=a.file_url_list[0]}),void(f.responseCount>=f.upFileCount&&layer.close(f.loadingLayer)))}function u(){t.$apply(),console.log(f.imgList)}function p(e){layer.close(f.loadingLayer),alert("网络连接异常")}function m(){r.getOrderInfo({order_id:f.orderId,has_review_info:1}).then(function(e){f.order=e,v()})}function v(){for(var e=[],t=0;t<f.order.product_list.length;t++){f.order.product_list[t].showReviewPanel=!1,f.order.product_list[t].reviewScoreTmp=f.order.product_list[t].review_score,f.order.product_list[t].reviewStars=[];for(var i=0;5>i;i++)f.order.product_list[t].reviewStars.push(i+1<=f.order.product_list[t].review_score);for(var a=!0,i=0;i<e.length;i++)if(e[i].order_detail_id==f.order.product_list[t].order_detail_id){a=!1;break}a&&e.push(f.order.product_list[t]),f.order.product_list[t].comment_img?f.order.product_list[t].imgList=f.order.product_list[t].comment_img.split(","):f.order.product_list[t].imgList=[]}f.order.product_list=e}function g(e,t){if(!(t.reviewScore>0)){t.reviewScoreTmp=e+1;for(var i=0;5>i;i++)t.reviewStars[i]=e>=i}}function h(e){if(!e.submited){if(e.reviewScoreTmp<=0)return void alert("您尚未对商品评分");if(e.review_content.length<5||e.review_content.length>150)return void alert("长度必须在5-150字之间");e.submited=!0;var t=e.imgList.join(",");r.addOrderProductReview(f.orderId,e.product_id,{title:"订单商品评价",content:e.review_content,score:e.reviewScoreTmp,comment_img:e.imgList.join(","),order_detail_id:e.order_detail_id}).then(function(i){i.status?(e.comment_img=t,e.review_score=e.reviewScoreTmp):(alert(i.msg),e.submited=!1)})["catch"](function(t){alert(t.msg),e.submited=!1})}}var f=t.vm={orderId:e.orderId,order:{},reviewStars:[!1,!1,!1,!1,!1],reviewScore:0,startIndex:0,responseCount:0,upFileCount:0,loadingLayer:!1,maxImgCount:3},_=t.vf={init:c,loadData:m,selectStar:g,processProduct:v,submitReview:h,FileInputChange:l,sendsuccess:d,sendend:u,senderror:p};c()}e.$inject=["$stateParams","$scope","$rootScope","mAPI","nAPI","$timeout","commService","sAPI"],angular.module("shop").controller("orderReviewController",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r,c,l,d,u){function p(e){console.log(["获取订单列表请求失败",e])}function m(t){if(t){console.log(["获取订单列表成功",t]),0==t.totalcount&&(g.noOrder=!0);for(var i in t.list){t.list[i].allprice=0;for(var a in t.list[i].product_list)t.list[i].allprice+=t.list[i].product_list[a].price,null!=t.list[i].product_list[a].parent_product_id?t.list[i].depositprice=t.list[i].product_list[a].price:t.list[i].titlename=t.list[i].product_list[a].product_name,"待退款"==h.status&&(t.list[i].order_status="待退款")}h.list=h.list.concat(t.list),t.list&&(t.list.length>=h.pageSize?(h.pageIndex++,r(function(){g.dataloading=!1})):r(function(){g.dataloading=!0,g.nodata=!0}),e.$broadcast("scroll.infiniteScrollComplete"))}else console.log(["获取订单列表失败",t])}function v(e){var t={pageindex:1,pagesize:10,order_status:e,order_from_time:"",order_to_time:"",order_type:"0,2"};"待评价"==t.order_status&&(t.order_status="交易成功",t.has_review=0),s.odList(t).then(function(t){switch(e){case"":g.allCount=t.totalcount;break;case"待付款":g.waitPayCount=t.totalcount;break;case"待发货":g.waitGoodCount=t.totalcount;break;case"待收货":g.waitReceiveCount=t.totalcount;break;case"待评价":g.waitReviewCount=t.totalcount}})["catch"](function(e){console.log(["获取订单列表请求失败",e])})}console.log("orderListController");var g=this;g.payPanel={show:!1,payOrderId:0,daiPay:!0},g.dataloading=!1,g.from_time="",g.to_time="",g.noOrder=!1,g.isDefHead=!1,void 0==i.status&&(i.status=""),g.clear_history=function(){window.sessionStorage.removeItem("orderStatu")};var h=g.pageData={offLineAction:"GetOffLineOrder",status:i.status,pageIndex:1,pageSize:10,allCount:0,waitPayCount:0,waitGoodCount:0,waitReceiveCount:0,waitReviewCount:0,list:[]};if(u.setPageTitle("订单管理"),!h.status){var f=window.sessionStorage.getItem("orderStatu");null==f||""==f||(h.status=f)}"undefined"==typeof t.sysConfig&&s.getConfig().then(function(e){e.status&&(t.sysConfig=e.result,(0==t.sysConfig.malll.is_customize_mall_head||2==t.sysConfig.malll.is_customize_mall_head&&!t.isPlus)&&(g.isDefHead=!0))})["catch"](function(e){setTimeout(function(){me.resetload()},1e3)});var _=$(".wrap-order-list-body").dropload({autoLoad:!1,scrollArea:window,loadUpFn:function(e){return void r(function(){o.reload()},1e3)}});_.lock("down");var y=g.pageFunc={};g.goStatusBtn=function(e){window.sessionStorage.setItem("orderStatu",e),g.nodata=!1,h.status=e,h.pageIndex=1,h.list=[],y.loadData()},y.loadData=function(){g.dataloading=!0,""==h.status?g.title="全部订单":g.title=h.status;var e={pageindex:h.pageIndex,pagesize:h.pageSize,order_status:h.status,order_from_time:g.from_time,order_to_time:g.to_time,order_type:"0,2",is_show_main:""};void 0==h.status&&(h.status=""),(""==h.status||"待付款"==h.status)&&(e.is_show_main="1"),"待评价"==e.order_status&&(e.order_status="交易成功",e.has_review=0),"待退款"==e.order_status&&(e.order_status="退款退货"),s.odList(e).then(m)["catch"](p)},g.loadMoreData=function(){g.dataloading||(console.log("到底"),y.loadData())},y.init=function(){y.loadData(),v(""),v("待付款"),v("待发货"),v("待收货"),v("待评价")},y.init(),y.pay=function(e){g.payPanel.show=!0,g.payPanel.payOrderId=e.order_id},y.dealPayError=function(e){g.payPanel.show=!1},y.confirm=function(e){var t=c.confirm({title:"友情提示",template:"您确定收到商品了吗？",cssClass:"borderradius5px",cancelText:"取消",cancelType:"button button-clear button-positive",okText:"确认",okType:"button button-clear button-positive"});t.then(function(t){t?a.confirmreceipt({action:"receiptconfirm",order_id:g.pageData.list[e].order_id},function(t){console.log(["确认订单成功",t]),0==t.errcode?g.pageData.list[e].order_status="交易成功":(d.show(t.errmsg),setTimeout(function(){d.hide()},600))},function(e){console.log(["确认订单失败",e])}):console.log("取消确认收货")})},y.deleteorder=function(e){var t=c.confirm({title:"友情提示",template:"您确定要取消订单么？",cssClass:"borderradius5px",cancelText:"取消",cancelType:"button button-clear button-positive",okText:"确认",okType:"button button-clear button-positive"});t.then(function(t){t?a.confirmreceipt({action:"cancel",order_id:g.pageData.list[e].order_id},function(t){console.log(["取消订单成功",t]),0==t.errcode&&(g.pageData.list[e].order_status="已取消")},function(e){console.log(["取消订单失败",e])}):console.log("不要取消订单")})}}e.$inject=["$scope","$rootScope","$stateParams","mAPI","nAPI","$state","$sce","$timeout","wPopup","wxAPI","wLoading","commService"],angular.module("shop").controller("orderListController",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r,c,l,d,u,p){function m(){c.applyReturnMoney(B.orderData.order_id).then(v)["catch"](g)}function v(e){B.orderData.ex11=1,d.alert("申请成功")}function g(e){d.alert("申请失败，再申请试试")}function h(){c.applyReturnDeposit(B.orderData.order_id).then(f)["catch"](_)}function f(e){B.orderData.ex10=1,d.alert("申请成功")}function _(e){d.alert("申请失败，再申请试试")}function y(){B.orderData.ex14?B.tipconnet=B.orderData.ex14:B.tipconnet="工作人员处理中，请稍后...";var t=d.confirm({template:'<div class="retitle fontgold">'+B.tipconnet+"</div>",cancelText:"申诉",cancelType:"contact",okText:"确定",okType:"contact"});t.then(function(t){if(t)console.log("确定了");else{console.log("取消了"),e.appeal={};var i=d.show({template:'<textarea rows="3" cols="20" ng-model="appeal.content" placeholder="请输入申诉理由"></textarea>',scope:e,buttons:[{text:"取消",type:"contact"},{text:"确定",type:"contact",onTap:function(t){c.appealContent(B.orderData.order_id,e.appeal.content).then(D)["catch"](b)}}]});i.then(function(e){console.log("Tapped!",e)})}})}function D(e){d.alert("申诉成功")}function b(e){d.alert("申请失败，再联系客服或重新申诉")}function w(){return c.odDetail(a.orderID).then(x)["catch"](k)}function k(e){var t=n.defer();return console.log(e),d.alert(e.errmsg),t.resolve("ok"),t.promise()}function x(e){var t=n.defer();if(e){console.log(["获取订单详情成功",e]);var i=e.ex2-e.ex1;switch(e.days=parseInt(i/1e3/60/60/24,10)+1,B.showorder_detail=!0,B.orderData=e,B.orderData.order_status){case"待付款":B.showStatusNm="等待买家付款";break;case"待发货":B.showStatusNm="等待卖家发货";break;case"已发货":B.showStatusNm="卖家已发货";break;case"已取消":B.showStatusNm="交易关闭";break;case"交易成功":B.showStatusNm="交易成功"}angular.forEach(B.orderData.product_list,function(e,t){e.parent_product_id?B.sproducts.push(e):B.mainproducts.push(e),B.totalMoney+=e.count*e.price,B.totalScore+=e.count*e.score}),r.exchangerate("/mall/score.ashx",{action:"exchangerate"},function(e){0===e.errcode&&(console.log(["获取积分兑换比例成功",e]),B.exchangerateData=e,B.scoreCostMoney=parseInt(B.orderData.use_score*B.exchangerateData.amount/B.exchangerateData.score))},function(e){console.log(["获取积分兑换比例请求成功",e])}),1==e.order_type&&c.getGiftOrderDetail({order_id:e.order_id}).then(function(e){console.log(["获得送礼商品详情",e]),B.giftDetailData=e})["catch"](function(e){console.log(["报错",e])}),T()}else console.log(["获取订单详情失败",e]);return t.resolve("ok"),t.promise}function I(){B.payPanel.show=!0,B.payPanel.payOrderId=a.orderID}function P(){B.orderData.order_status="待发货",B.orderData.is_pay=1,B.payPanel.show=!1}function S(e){B.payPanel.show=!1}function L(){var e=d.confirm({title:"友情提示",template:"您确定收到商品了吗？",cssClass:"borderradius5px",cancelText:"取消",cancelType:"button button-clear button-positive",okText:"确认",okType:"button button-clear button-positive"});console.log(B.order_id),e.then(function(e){e?(B.isCanClick=!0,r.confirmreceipt({action:"receiptconfirm",order_id:B.orderData.order_id},function(e){console.log(e),0==e.errcode?d.alert("您已确认收货"):d.alert(e.errmsg),B.loadData()},function(e){d.alert(e.errmsg),console.log(e)})):console.log("取消确认收货")})}function C(){"待付款"==B.orderData.order_status?B.diffTime=B.orderData.order_time+72e5:"已发货"==B.orderData.order_status&&(B.diffTime=B.orderData.delivery_time+6048e5);var e=0;B.diffTime-(new Date).getTime()>0?e=B.diffTime-(new Date).getTime():M();var t=parseInt(e/1e3/60/60/24,10),i=parseInt(e/1e3/60/60%24,10),a=parseInt(e/1e3/60%60,10);B.leftDay=A(t),B.leftHour=A(i),B.leftMinus=A(a)}function T(){B.interval=s(function(){C(),console.log("倒计时循环")},1e3,0)}function M(){"待付款"==B.orderData.order_status?z():"已发货"==B.orderData.order_status&&E(),s.cancel(B.interval)}function A(e){return 10>e&&(e="0"+e),e}function z(){r.confirmreceipt({action:"cancel",order_id:B.orderData.order_id},function(e){console.log(["取消订单成功",e]),0==e.errcode&&(B.orderData.order_status="已取消",B.showStatusNm="交易关闭")},function(e){console.log(["取消订单失败",e])})}function E(){r.confirmreceipt({action:"receiptconfirm",order_id:B.orderData.order_id},function(e){console.log(["确认订单成功",e]),0==e.errcode&&(B.orderData.order_status="交易成功",B.showStatusNm="交易成功")},function(e){console.log(["确认订单失败",e])})}console.log("orderDetailController"),console.log(a.orderID);var B=this;B.payPanel={show:!1,payOrderId:0},B.showorder_detail=!1,B.isCanClick=!1,B.orderData={},B.loadData=w,B.pay=I,B.totalMoney=0,B.totalScore=0,B.mainproducts=[],B.sproducts=[],B.leftDay=0,B.leftHour=0,B.showStatusNm="",B.dealPayScuss=P,B.dealPayError=S,B.confirm=L,B.scoreCostMoney=0,B.checkReturn=h,B.seeReturn=y,B.tipconnet="",B.score_show_name="积分",B.cardcoupon_show_name="优惠券",location.hostname.match("www.youzhengjia.com")&&(B.score_show_name="学习值",B.cardcoupon_show_name="助学券"),B.returnMoney=m,p.setPageTitle("订单详情"),B.isDefHead=!1,B.loadData();var G=$(".wrap-order-detail-body").dropload({autoLoad:!1,scrollArea:window,loadUpFn:function(e){return void o(function(){i.reload()},1e3)}});G.lock("down"),"undefined"==typeof t.sysConfig&&c.getConfig().then(function(e){e.status&&(t.sysConfig=e.result,0==t.sysConfig.malll.is_customize_mall_head&&(B.isDefHead=!0))})["catch"](function(e){setTimeout(function(){me.resetload()},1e3)})}e.$inject=["$scope","$rootScope","$state","$stateParams","$interval","$timeout","$q","mAPI","nAPI","wLoading","wPopup","wxAPI","commService"],angular.module("shop").controller("orderDetailController",e)}(),function(){"use strict";function e(e,t,i,a,s){function o(){r(),c(),p(""),v()}function n(){window.sessionStorage.removeItem("orderStatu")}function r(){var e={action:"listbytype",slide_type:"promotion"};s.getSlideByType(e).then(function(e){console.log(["slide获取数据成功",e]),_.sliderdata=e.list})["catch"](function(e){console.log(["slide获取数据失败",e])})}function c(){var e={action:"list",pageindex:1,pagesize:10};s.getSaleList(e).then(function(e){console.log(["获取限时特卖活动列表成功",e]),_.activityListData=e.list,_.activityListOne=e.list[0],_.activityListTwo=e.list[1],_.activityListThree=e.list[2];for(var t=0;3>t;t++)_.pageData.isNextSale==t+1&&(_.activityId=e.list[t].promotion_activity_id,_.week=t+2,l(e.list[t].promotion_activity_id,t+2))})["catch"](function(e){console.log(["获取限时特卖活动列表失败",e])})}function l(e,t){switch(p(t),_.dataloading=!0,_.activityId=e,t){case 2:1==_.pageData.isOnTheSale&&(_.isProOnTheSale=!0);break;case 4:2==_.pageData.isOnTheSale&&(_.isProOnTheSale=!0);break;case 6:3==_.pageData.isOnTheSale&&(_.isProOnTheSale=!0)}var i={promotion_activity_id:e,pageindex:_.pageindex,pagesize:_.pagesize};s.getSaleProductList(i).then(function(e){console.log(["获取限时特卖活动商品列表成功",e]),m(),console.log(["$scope.pageindex",_.pageindex]),_.saleProductList=_.saleProductList.concat(e.list);for(var t=0;t<_.saleProductList.length;t++)_.saleProductList[t].isOnTheSale=_.isProOnTheSale;console.log("123",_.saleProductList),_.pageindex++,a(function(){_.dataloading=!1}),e.list.length<_.pagesize&&(_.loadingEndTag=!0,_.loadingTag=!1)})["catch"](function(e){console.log(["获取限时特卖活动商品列表失败",e])})}function d(){console.log("加载更多。。。。"),_.dataloading||(console.log("到底"),l(_.activityId,_.week))}function u(e){0==e?(_.pageindex=1,_.pageData.priceAdd%2==0?_.pageData.priceRank="price_asc":_.pageData.priceRank="price_desc",_.pageData.priceAdd++):1==e&&(_.pageindex=1,_.pageData.discountAdd%2==0?_.pageData.discountRank="discount_asc":_.pageData.discountRank="discount_desc",_.pageData.discountAdd++)}function p(e){var i=new Date,a=i.getDay(),s=i.getHours(),o=new Date(t("date")(i,"yyyy/MM/dd")).getTime();if(""!=e)switch(e){case 2:a=2,o=new Date(_.pageData.tuesdayDate.replace(/-/g,"/")).getTime();break;case 4:a=4,o=new Date(_.pageData.thursdayDate.replace(/-/g,"/")).getTime();break;case 6:a=6,o=new Date(_.pageData.saturdayDate.replace(/-/g,"/")).getTime()}switch(a){case 1:_.pageData.tuesdayDate=t("date")(o+864e5,"yyyy/MM/dd"),_.pageData.latestDate=_.pageData.tuesdayDate+" 10:00:00",_.pageData.startTimeStamp=new Date(_.pageData.tuesdayDate+" 10:00:00"),_.pageData.stopTimeStamp=new Date(t("date")(o+1728e5,"yyyy/MM/dd")+" 10:00:00"),_.pageData.tuesdayDate=_.pageData.tuesdayDate,_.pageData.thursdayDate=t("date")(o+2592e5,"yyyy/MM/dd"),_.pageData.saturdayDate=t("date")(o+432e6,"yyyy/MM/dd"),_.pageData.leftName="距离活动开始",_.pageData.isNextSale=1;break;case 2:_.pageData.tuesdayDate=t("date")(o,"yyyy/MM/dd"),_.pageData.latestDate=_.pageData.tuesdayDate,_.pageData.startTimeStamp=new Date(_.pageData.tuesdayDate+" 10:00:00"),_.pageData.stopTimeStamp=new Date(t("date")(o+864e5,"yyyy/MM/dd")+" 10:00:00"),_.pageData.tuesdayDate=_.pageData.tuesdayDate,""==e||o==new Date(t("date")(i,"yyyy/MM/dd")).getTime()?(_.pageData.thursdayDate=t("date")(o+1728e5,"yyyy/MM/dd"),_.pageData.saturdayDate=t("date")(o+3456e5,"yyyy/MM/dd"),10>s?(pageData.leftName="开抢",pageData.latestDate=pageData.latestDate+" 10:00:00"):(_.pageData.isOnTheSale=1,
_.pageData.leftName="结束",_.pageData.latestDate=t("date")(o+864e5,"yyyy/MM/dd")+" 00:00:00")):(_.pageData.leftName="开抢",_.pageData.latestDate=t("date")(o+864e5,"yyyy/MM/dd")+" 00:00:00"),_.pageData.isNextSale=1;break;case 3:_.pageData.tuesdayDate=t("date")(o+5184e5,"yyyy/MM/dd"),_.pageData.thursdayDate=t("date")(o+864e5,"yyyy/MM/dd"),_.pageData.latestDate=_.pageData.thursdayDate+" 10:00:00",_.pageData.startTimeStamp=new Date(_.pageData.thursdayDate+" 10:00:00"),_.pageData.stopTimeStamp=new Date(t("date")(o+1728e5,"yyyy/MM/dd")+" 10:00:00"),_.pageData.thursdayDate=_.pageData.thursdayDate,_.pageData.saturdayDate=t("date")(o+2592e5,"yyyy/MM/dd"),_.pageData.leftName="距离活动开始",_.pageData.isNextSale=2;break;case 4:""==e&&(_.pageData.tuesdayDate=t("date")(o+432e6,"yyyy/MM/dd"),_.pageData.saturdayDate=t("date")(o+1728e5,"yyyy/MM/dd")),_.pageData.thursdayDate=t("date")(o,"yyyy/MM/dd"),""==e||o==new Date(t("date")(i,"yyyy/MM/dd")).getTime()?10>s?(_.pageData.leftName="开抢",_.pageData.latestDate=_.pageData.thursdayDate+" 10:00:00"):(_.pageData.isOnTheSale=2,_.pageData.leftName="结束",_.pageData.latestDate=t("date")(o+864e5,"yyyy/MM/dd")+" 00:00:00"):(_.pageData.leftName="开抢",_.pageData.latestDate=t("date")(o+864e5,"yyyy/MM/dd")+" 00:00:00"),_.pageData.startTimeStamp=new Date(_.pageData.thursdayDate+" 10:00:00"),_.pageData.stopTimeStamp=new Date(t("date")(o+864e5,"yyyy/MM/dd")+" 10:00:00"),_.pageData.thursdayDate=_.pageData.thursdayDate,_.pageData.isNextSale=2;break;case 5:_.pageData.tuesdayDate=t("date")(o+3456e5,"yyyy/MM/dd"),_.pageData.thursdayDate=t("date")(o+5184e5,"yyyy/MM/dd"),_.pageData.saturdayDate=t("date")(o+864e5,"yyyy/MM/dd"),_.pageData.latestDate=_.pageData.saturdayDate+" 10:00:00",_.pageData.startTimeStamp=new Date(_.pageData.saturdayDate+" 10:00:00"),_.pageData.stopTimeStamp=new Date(t("date")(o+1728e5,"yyyy/MM/dd")+" 10:00:00"),_.pageData.saturdayDate=_.pageData.saturdayDate,_.pageData.leftName="距离活动开始",_.pageData.isNextSale=3;break;case 6:""==e&&(_.pageData.tuesdayDate=t("date")(o+2592e5,"yyyy/MM/dd"),_.pageData.thursdayDate=t("date")(o+432e6,"yyyy/MM/dd")),_.pageData.saturdayDate=t("date")(o,"yyyy/MM/dd"),_.pageData.latestDate=_.pageData.saturdayDate,_.pageData.startTimeStamp=new Date(_.pageData.saturdayDate+" 10:00:00"),_.pageData.stopTimeStamp=new Date(t("date")(o+864e5,"yyyy/MM/dd")+" 10:00:00"),_.pageData.saturdayDate=_.pageData.saturdayDate,""==e||o==new Date(t("date")(i,"yyyy/MM/dd")).getTime()?10>s?(_.pageData.leftName="开抢",_.pageData.latestDate=_.pageData.latestDate+" 10:00:00"):(_.pageData.isOnTheSale=3,_.pageData.leftName="结束",_.pageData.latestDate=t("date")(o+864e5,"yyyy/MM/dd")+" 00:00:00"):(_.pageData.leftName="开抢",_.pageData.latestDate=t("date")(o+864e5,"yyyy/MM/dd")+" 00:00:00"),_.pageData.isNextSale=3;break;case 0:_.pageData.tuesdayDate=t("date")(o+1728e5,"yyyy/MM/dd"),_.pageData.latestDate=_.pageData.tuesdayDate+" 10:00:00",_.pageData.startTimeStamp=new Date(_.pageData.latestDate),_.pageData.stopTimeStamp=new Date(t("date")(o+2592e5,"yyyy/MM/dd")+" 10:00:00"),_.pageData.tuesdayDate=_.pageData.tuesdayDate,_.pageData.thursdayDate=t("date")(o+3456e5,"yyyy/MM/dd"),_.pageData.saturdayDate=t("date")(o+5184e5,"yyyy/MM/dd"),_.pageData.leftName="距离活动开始",_.pageData.isNextSale=1}}function m(){_.pageData.latestTime=new Date(_.pageData.latestDate),_.pageData.latestTime=_.pageData.latestTime.getTime();var e=new Date(_.pageData.latestDate)-new Date,t=parseInt(e/1e3/60/60/24,10),i=parseInt(e/1e3/60/60%24,10),a=parseInt(e/1e3/60%60,10),s=parseInt(e/1e3%60,10);_.pageData.leftDay=h(t),_.pageData.leftHour=h(i),_.pageData.leftMinus=h(a),_.pageData.leftSecond=h(s)}function v(){_.pageData.interval=i(function(){m()},1e3,0)}function g(){i.cancel(_.pageData.interval)}function h(e){return 10>e&&(e="0"+e),e}function f(e,t){_.pageindex=1,_.pagesize=5,_.dataloading=!1,_.loadingEndTag=!1,_.loadingTag=!0,_.saleProductList=[],_.activityId=e,_.week=t,l(e,t)}var _=this;_.title="限时特卖",_.sliderdata=[],_.activityListData=[],_.activityListOne=[],_.activityListTwo=[],_.activityListThree=[],_.activityId=1,_.week=0,_.pageindex=1,_.pagesize=5,_.dataloading=!1,_.loadingEndTag=!1,_.loadingTag=!0,_.saleProductList=[],_.showscrollx=!0,_.scrollxyData=[{count:111,url:"http://wap.baidu.com"},{count:112,url:"http://wap.baidu.com"},{count:113,url:"http://wap.baidu.com"},{count:114,url:"http://wap.baidu.com"},{count:115,url:"http://wap.baidu.com"},{count:116,url:"http://wap.baidu.com"},{count:117,url:"http://wap.baidu.com"},{count:118,url:"http://wap.baidu.com"},{count:119,url:"http://wap.baidu.com"},{count:120,url:"http://wap.baidu.com"},{count:111,url:"http://wap.baidu.com"},{count:112,url:"http://wap.baidu.com"},{count:113,url:"http://wap.baidu.com"},{count:114,url:"http://wap.baidu.com"},{count:115,url:"http://wap.baidu.com"},{count:116,url:"http://wap.baidu.com"},{count:117,url:"http://wap.baidu.com"},{count:118,url:"http://wap.baidu.com"},{count:119,url:"http://wap.baidu.com"},{count:120,url:"http://wap.baidu.com"}],_.isProOnTheSale=!1,_.pageData={interval:{},tuesdayDate:"",thursdayDate:"",saturdayDate:"",latestDate:"",latestTime:"",leftDay:"",leftHour:"",leftMinus:"",leftSecond:"",leftName:"",isOnTheSale:0,isNextSale:0,priceAdd:0,discountAdd:0,priceRank:"",discountRank:"",startTimeStamp:"",stopTimeStamp:""},_.clearHistory=n,_.getSaleSlide=r,_.getSaleList=c,_.getSaleProductList=l,_.tabClick=u,_.judgeTime=p,_.timer=m,_.startInterval=v,_.closeInterval=g,_.loadMoreData=d,_.clickWeek=f,o()}e.$inject=["$scope","$filter","$interval","$timeout","nAPI"],angular.module("shop").controller("oldSaleCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r){function c(){s.userInfo().then(function(e){1==l.is_amount&&e.account_amount?l.total=e.account_amount:0==l.is_amount&&e.totalscore&&(l.total=e.totalscore)}),d.loadData(),r.getTotalLockScore().then(function(e){e.status&&(l.lockScore=e.result)})}var l=t.pageData={show_type:"",dataloading:!1,nodata:!0,pageindex:1,pagesize:7,is_amount:e.is_amount,list:[],type_name:"积分",total:0,lockScore:0};l.is_amount||(l.is_amount=0),1==l.is_amount?(l.type_name="余额",n.setPageTitle("余额管理")):n.setPageTitle("积分管理");var d=t.pageFunc={};d.loadData=function(){l.nodata=!0,s.getScorereCord({pageindex:l.pageindex,pagesize:l.pagesize,score_type:l.show_type,is_amount:l.is_amount}).then(function(e){l.list=l.list.concat(e.list),e.list.length>=l.pagesize?(l.pageindex++,o(function(){l.dataloading=!1})):o(function(){l.dataloading=!0,l.nodata=!1})})},t.loadMoreData=function(){l.dataloading||d.loadData()},t.whichScoreBtn=function(e){l.pageindex=1,l.list=[],l.show_type=e,d.loadData()},n.getUserInfo(function(){c()},function(){$state.go("bindPhone")})}e.$inject=["$stateParams","$scope","$rootScope","mAPI","nAPI","$timeout","commService","sAPI"],angular.module("shop").controller("myscoresCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r){function c(e){var t,i=new Date,a=[],s=[],o=[],n=[],r=[],c=[];for(t in e){e[t].valid_tos=new Date(e[t].valid_to);e[t].valid_tos.getTime()-i.getTime()}for(t in e)e[t].valid_from2=new Date(e[t].valid_from),e[t].valid_to2=new Date(e[t].valid_to),e[t].outdate=!1,e[t].checked=!1,e[t].cantuse=!1,0===e[t].cardcoupon_status?a.push(e[t]):1===e[t].cardcoupon_status?s.push(e[t]):2===e[t].cardcoupon_status&&r.push(e[t]);for(t in a){var l=a[t].valid_to2.getTime()-i.getTime();l>0?o.push(a[t]):(a[t].outdate=!0,c.push(a[t]))}e=s.concat(c);var d={arr1:a,arr2:s,arr3:o,arr4:c,arr5:n,arr6:r};return d}r.setPageTitle("我的优惠券"),e.showEmpty=!1,e.couponTitle=n.mallconfignew.my_cardcoupons_title,e.canuse=1,e.canUse=function(){e.canuse=1,l(e.canuse)},e.noCanUse=function(){e.canuse=2,l(e.canuse)},e.outDate=function(){e.canuse=3,l(e.canuse)},e.hasGiven=function(){e.canuse=4,l(e.canuse)},e.couponData=[];var l=function(t){o.show("数据请求中..."),s.couponList({pagesize:1e3,is_can_use:0,is_notshow_storevalue:1}).then(function(i){o.hide(),console.log(["获取优惠券列表成功",i]),1==t?(e.couponData=c(i.list).arr3,console.log(["可用",e.couponData])):2==t?(e.couponData=c(i.list).arr2,console.log(["已使用",e.couponData])):3==t?(e.couponData=c(i.list).arr4,console.log(["已过期",e.couponData])):4==t&&(e.couponData=c(i.list).arr6,console.log(["已转赠",e.couponData]));var a=new Date,s=a.getTime();angular.forEach(e.couponData,function(e,t){e.valid_from=e.valid_from.split(" ")[0],e.valid_from=e.valid_from.replace(/\//g,"."),e.valid_to=e.valid_to.split(" ")[0],e.valid_to=e.valid_to.replace(/\//g,".");var i=parseInt(e.valid_to_timestamp)-parseInt(s);i>0?e.valid=!0:e.valid=!1,1==e.cardcoupon_status&&(e.valid=!1),null===e.limit_type&&(e.limit_type="")})})["catch"](function(t){e.couponData=[],console.log(["优惠券失败",t]),o.hide()})};r.getUserInfo(function(){l(e.canuse)},function(){a.go("bindPhone")}),e.goToCouponDetail=function(e){window.localStorage.setItem("couponDetail",JSON.stringify(e)),a.go("couponDetail",{couponId:e.main_cardcoupon_id,cpstate:e.cardcoupon_status})},e.$on("ngRepeatFinished",function(e){for(var t=0;100>t;t++)$(".small-white-circle-wrap").append("<div style='width: 2px;height: 2px;border-radius: 2px;background: #fff;float: left;margin:0 0 0 8px;'></div>")})}e.$inject=["$scope","$rootScope","mAPI","$state","nAPI","wLoading","MALLCONFIG","commService"],angular.module("shop").controller("mycouponsCtrl",e)}(),function(){"use strict";function e(e,t,i){function a(){o(),e(function(){n.classAnimation="rubberBand"},4e3)}function s(){i.info('Fork <a href="https://github.com/Swiip/generator-gulp-angular" target="_blank"><b>generator-gulp-angular</b></a>'),n.classAnimation=""}function o(){n.awesomeThings=t.getTec(),angular.forEach(n.awesomeThings,function(e){e.rank=Math.random()})}var n=this;n.awesomeThings=[],n.classAnimation="",n.creationDate=1447635943477,n.showToastr=s,a()}e.$inject=["$timeout","webDevTec","toastr"],angular.module("shop").controller("MainController",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r){function c(){l()}function l(){r.getLockScoreList().then(function(e){e.status&&(u.lockScoreList=e.result)}),r.getTotalLockScore().then(function(e){e.status&&(u.lockScoreTotal=e.result)})}function d(){window.location.href="#/orderList"}var u=t.vm={lockScoreList:[],lockScoreTotal:0};t.vf={init:c,loadData:l,gotoOrderList:d};c()}e.$inject=["$stateParams","$scope","$rootScope","mAPI","nAPI","$timeout","commService","sAPI"],angular.module("shop").controller("lockScoreListCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s,o){t.selectMenu=5;var n=this;n.userInfoData={},n.userInfoBtn=[],n.uiset=s[o.current.name],a.navigation("personal").then(function(e){n.userInfoBtn=e}),a.userInfo().then(function(e){console.log(e),n.userInfoData=e})}e.$inject=["$scope","$rootScope","mAPI","nAPI","SHOP_UI","$state"],angular.module("shop").controller("infoCenterController",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r,c,l,d,u,p){function m(){T.productListData=[],T.curSelectDistrict.length>0?T.district_key=T.curSelectDistrict.join(","):T.curSelectCity?T.city_key=T.curSelectCity:T.curSelectProvince?T.province_key=T.curSelectProvince:T.keyDistricts="",P(),T.district_panpel=!1,T.district_key="",T.city_key="",T.province_key=""}function v(){T.productListData=[],T.curSelectProvince="",T.curSelectCity="",T.curSelectDistrict=[],T.provinceList=[],T.cityList=[],T.districeList=[],T.z_width=100,h(),P(),T.district_panpel=!1}function g(){T.productListData=[],T.curSelectRoom.length>0?T.keyRoomType=T.curSelectRoom.join(","):T.keyRoomType="",P(),T.curSelectRoom=[],T.room_panpel=!1}function h(){o.provinces().then(function(e){for(var t=0;t<e.list.length;t++)e.list[t].selected=!1;T.provinceList=T.provinceList.concat(e.list)})["catch"](function(){console.log(["error",T.provinces])})}function f(e){if(console.log("province",e),e.selected=!0,e.code){for(var t=0;t<T.provinceList.length;t++)T.provinceList[t].code==e.code?T.provinceList[t].selected=!0:T.provinceList[t].selected=!1;x(),T.curSelectProvince=e.code,T.z_width=50,T.cityList=[],o.cities(e.code).then(function(e){T.cityList.push({name:"不限",code:""}),T.cityList=T.cityList.concat(e.list);for(var t=0;t<T.cityList.length;t++)T.cityList[t].selected=!1})["catch"](function(){console.log(["error",T.cities])})}}function _(e){for(var t=0;t<T.cityList.length;t++)T.cityList[t].code==e.code?T.cityList[t].selected=!0:T.cityList[t].selected=!1;return e.code?(T.curSelectCity=e.code,T.z_width=33.3,T.districeList=[],void o.districts(e.code).then(function(e){T.districeList=T.districeList.concat(e.list)})["catch"](function(){console.log(["error",T.districeList])})):(T.z_width=50,T.curSelectCity="",void(T.curSelectDistrict=[]))}function y(e){if(!e.code)return T.productListData=[],T.city_key=T.curSelectCity,T.district_key="",T.province_key="",P(),T.district_panpel=!1,void(T.city_key="");var t=T.curSelectDistrict.indexOf(e.code);t>=0?T.curSelectDistrict.splice(t,1):T.curSelectDistrict.push(e.code)}function D(e){if(!e.text)return T.productListData=[],T.curSelectRoom=[],T.room_panpel=!1,T.keyRoomType="",void P();var t=T.curSelectRoom.indexOf(e.text);t>=0?T.curSelectRoom.splice(t,1):T.curSelectRoom.push(e.text)}function b(e){T.productListData=[],e.start_price?T.s_price=e.start_price:T.s_price="",e.end_price?T.e_price=e.end_price:T.e_price="",P(),T.s_price="",T.e_price="",T.price_panpel=!1}function w(){T.productListData=[],T.s_price="",T.e_price="",T.min_price&&(T.s_price=T.min_price),T.max_price&&(T.e_price=T.max_price),P(),T.min_price="",T.max_price="",T.price_panpel=!1}function k(){zcBack()}function x(){T.curSelectProvince="",T.curSelectCity="",T.curSelectDistrict=[]}function I(){a.go("searchPage")}function P(){T.dataloading=!0;o.pdList({action:"list",pageindex:T.pageindex,pagesize:T.pagesize,keyword:T.keywordID,category_id:T.catID,tags:T.tagID,color_name:T.colorID,size_name:T.sizeID,sort:T.updownID,is_group_buy:4,type:"Houses",room_type:T.keyRoomType,s_price:T.s_price,e_price:T.e_price,province_key:T.province_key,city_key:T.city_key,district_key:T.district_key}).then(function(e){T.productListData=T.productListData.concat(e.list),console.log(["more productListDate",e.list]),T.pageindex++,i(function(){T.dataloading=!1}),e.list.length<T.pagesize&&(T.loadingEndTag=!0,T.loadingTag=!1)})["catch"](function(e){console.log(["error",T.productListDate])})}function S(e){"room_type"==e?(T.price_panpel=!1,T.district_panpel=!1,T.room_panpel?T.room_panpel=!1:T.room_panpel=!0):"price"==e?(T.room_panpel=!1,T.district_panpel=!1,T.price_panpel?T.price_panpel=!1:T.price_panpel=!0):"district"==e&&(T.price_panpel=!1,T.room_panpel=!1,T.district_panpel?T.district_panpel=!1:T.district_panpel=!0)}function L(e){e&&(console.log("productId",e),a.go("housesDetail",{id:e}))}function C(){P(),h()}var T=e.vm={productListData:[],roomTypes:[{text:"一室",value:"1"},{text:"二室",value:"2"},{text:"三室",value:"3"},{text:"四室",value:"4"},{text:"五室",value:"5"},{text:"五室以上",value:"6"}],curSelectRoom:[],prices:[{text:"1.5万元以下",start_price:"",end_price:15e3},{text:"1.5万 - 2万",start_price:15e3,end_price:2e4},{text:"2万 - 2.5万",start_price:2e4,end_price:25e3},{text:"2.5万 - 3万",start_price:25e3,end_price:3e4},{text:"3万 - 4万",start_price:3e4,end_price:4e4},{text:"4万 - 5万",start_price:4e4,end_price:5e4},{text:"5万 - 8万",start_price:5e4,end_price:8e4},{text:"8万以上",start_price:8e4,end_price:""}],provinceList:[],curSelectDistrict:[],curSelectCity:"",curSelectProvince:"",cityList:[],districeList:[],z_width:"",keyRoomType:"",s_price:"",e_price:"",min_price:"",max_price:"",district_key:"",city_key:"",province_key:"",pageindex:1,pagesize:10,keywordID:n.keywordID?n.keywordID:"",catID:n.catID?n.catID:"",tagID:n.tagID?n.tagID:"",colorID:n.colorID?n.colorID:"",sizeID:n.sizeID?n.sizeID:"",navName:n.navName?n.navName:"全部商品",updownID:n.updownID?n.updownID:"",dataloading:!1,loadingEndTag:!1,loadingTag:!1,room_panpel:!1,price_panpel:!1,district_panpel:!1};e.vf={init:C,gotoHousesDetail:L,sortByPrice:S,selectRoom:D,selectPrice:b,selectCancelPrice:w,selectDistrict:y,selectConfirmDistrict:m,selectResetDistrict:v,goBack:k,getProvinces:h,getCitys:f,getDistricts:_,searchRoom:g,gotoSearchPage:I};T.loadMoreData=function(){console.log("加载更多。。。。"),T.dataloading||(console.log("到底"),P())},C()}e.$inject=["$scope","$rootScope","$timeout","$state","$q","nAPI","$stateParams","shopInfo","wxAPI","$window","MALLCONFIG","sAPI","commService"],angular.module("shop").controller("housesListController",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r,c,l,d,u,p,m,v,g,h,f,_){function y(){var t=r.pdDetail(k.product_id).then(function(e){console.log(" getDetail",e),k.productDetailData=e,h.setPageTitle(e.title),k.productDetailData.product_desc=n.trustAsHtml(k.productDetailData.product_desc),m.title=k.productDetailData.title,""==k.productDetailData.product_summary?m.desc=k.productDetailData.title:m.desc=k.productDetailData.product_summary,h.getUserInfo(function(){k.isLogin=!0,m.link=location.origin+"/customize/shop/?v=1.0&sale_id="+a.userInfo.userid+"&ngroute="+location.hash.substring(1)+"#"+location.hash.substring(1),m.imgUrl=k.productDetailData.img_url,m.timeline_s=function(){var e={id:k.product_id,type:"ShareProduct"};f.shareAddScore(e)},console.log(["shopInfo",m]),v.share(m)},function(e){k.isLogin=!1})})["catch"](function(e){console.log(" getDetail catch",e)});s.resolve(t).then(function(){"undefined"!=typeof k.productDetailData&&(e.sliderdata=[],e.picsData={},e.picsData.datalist=k.productDetailData.show_img_list,e.picsData.ratio="640:700",e.sliderdata[0]=e.picsData)})}function D(){r.addCollect(k.product_id).then(function(e){0==e.errcode&&(k.productDetailData.is_collect=!0),console.log("data",e)})["catch"](function(e){console.log("collect catch",e)})}function b(){r.delCollect(k.product_id).then(function(e){console.log("data",e),0==e.errcode&&(k.productDetailData.is_collect=!1)})["catch"](function(e){console.log("collect catch",e)})}function w(){y()}var k=(e.vf={init:w,collect:D,cancelCollect:b},e.vm={product_id:i.id,productDetailData:[],isShow:!1,mall_config:g});w()}e.$inject=["$scope","$state","$stateParams","$rootScope","$q","$timeout","$sce","nAPI","mAPI","getCheckedSku","checkSkuNum","wLoading","wPopup","shopInfo","wxAPI","MALLCONFIG","commService","sAPI","$interval"],angular.module("shop").controller("housesDetailController",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r,c,l,d){function u(){m.dataloading=!0;i.pdList({action:"list",pageindex:m.pageindex,pagesize:m.pagesize,keyword:"",category_id:"",tags:"",color_name:"",size_name:"",sort:""}).then(function(e){m.productListData=m.productListData.concat(e.list),console.log(["more productListDate",e.list]),m.pageindex++,o(function(){m.dataloading=!1}),e.list.length<m.pagesize&&(m.loadingEndTag=!0,m.loadingTag=!1),d.getUserInfo(function(){c.link=location.origin+"/customize/shop/?v=1.0&sale_id="+t.userInfo.userid+"&ngroute="+location.hash.substring(1)+"#"+location.hash.substring(1),console.log(["shopInfo",c]),n.share(c)},function(e){})})["catch"](function(t){console.log(["error",e.productListDate])})}t.isSonghe?zcToUrl("/customize/comeoncloud/Index.aspx?key=shophome"):zcToUrl("/customize/comeoncloud/Index.aspx?key=MallHome");var p=GetParm("sale_id");""!=p&&window.sessionStorage.setItem("sale_id",p);var m=this;m.pageData={},m.productListData=[],m.pageindex=1,m.pagesize=10,m.dataloading=!1,m.loadingEndTag=!1,m.loadingTag=!0,m.MALLCONFIG=l,d.setPageTitle(m.MALLCONFIG.mallconfignew.mall_name),console.log("=========",m.MALLCONFIG);var v=window.sessionStorage.getItem("productListStorage");window.sessionStorage.removeItem("productListStorage"),v=JSON.parse(v),console.log(["跳回来productListStorageData",v]),v&&(m.productListData=v.data,m.pageindex=v.pageindex,m.pagesize=v.pagesize),m.goProductDetail=function(e){s.go("productDetail",{id:e})},u(),m.loadMoreData=function(){console.log("加载更多。。。。"),m.dataloading||(console.log("到底"),u())},e.sliderdata=[],e.goProductDetail=function(e){var t={data:m.productListData,pageindex:m.pageindex,pagesize:m.pagesize};console.log(["跳之前productListStorageData",t]),window.sessionStorage.setItem("productListStorage",JSON.stringify(t)),s.go("productDetail",{id:e})},t.selectMenu=1,e.placeholder="搜索商品",e.quxiao=0,e.searchMask=0,m.pageData.searchInfo="",e.searchBtn=0,e.searchRelateMask=0,e.startSearch=function(){e.placeholder="搜索双肩包",e.sideMenus=0,m.pageData.searchInfo?(e.quxiao=0,e.searchMask=0,e.searchBtn=1,e.searchRelateMask=1):(e.quxiao=1,e.searchMask=1,e.searchBtn=0,e.searchRelateMask=0)},e.cancelSearch=function(){e.placeholder="搜索商品",e.quxiao=0,e.searchMask=0},e.checkSearchInfo=function(){m.pageData.searchInfo?(e.quxiao=0,e.searchMask=0,e.searchBtn=1,e.searchRelateMask=1):(e.quxiao=1,e.searchMask=1,e.searchBtn=0,e.searchRelateMask=0)},e.goSearch=function(){console.log(["vm.pageData.searchInfo",m.pageData.searchInfo]),e.placeholder="搜索商品",e.searchBtn=0,e.searchMask=0,e.searchRelateMask=0,s.go("productList",{keywordID:m.pageData.searchInfo})}}e.$inject=["$scope","$rootScope","nAPI","mAPI","$state","$timeout","wxAPI","$http","shopInfo","MALLCONFIG","commService"],angular.module("shop").controller("homeController",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r,c){var l=this;l.showstatus=o.ID,e.dataloading=!1,e.nodata=!1;var d=e.pageData={id:o.ID,pageIndex:1,pageSize:5,hasMoreOrder:!0,list:[],value:[0,1]},u=e.pageFunc={};u.loadData=function(){e.dataloading=!0;var t="",a={pageindex:d.pageIndex,pagesize:d.pageSize,order_status:t,order_type:1,gift_order_type:d.id};s.odList(a).then(function(t){console.log(["获取订单列表成功",t.list]),d.list=d.list.concat(t.list),void 0==d.id&&(d.id=d.value[0]),t.list&&(t.list.length>=d.pageSize?(console.log("还有"),d.pageIndex++,i(function(){e.dataloading=!1})):i(function(){console.log("没了"),e.dataloading=!0,e.nodata=!0}))})["catch"](function(e){console.log(["获取订单列表请求失败",e])})},e.loadMoreData=function(){console.log("加载更多"),e.dataloading||(console.log("到底"),u.loadData())},u.init=function(){u.loadData()},u.init(),u.pay=function(e){n(e.pay_type,e.order_id,e.total_amount)},u.confirm=function(e){var t=r.confirm({title:"友情提示",template:"您确定收到商品了吗？",cssClass:"borderradius5px",cancelText:"取消",cancelType:"button button-clear button-positive",okText:"确认",okType:"button button-clear button-positive"});t.then(function(t){t?s.confirmreceipt({action:"receiptconfirm",order_id:e.order_id},function(e){},function(e){console.log(["确认订单失败",e])}).then(function(t){console.log(["确认订单成功",t]),0==t.errcode?(e.order_status="交易成功",a.reload()):r.show(t.errmsg)}):console.log("取消确认收货")})},u.deleteorder=function(e){var t=r.confirm({title:"友情提示",template:"您确定要取消订单么？",cssClass:"borderradius5px",cancelText:"取消",cancelType:"button button-clear button-positive",okText:"确认",okType:"button button-clear button-positive"});t.then(function(t){t?s.confirmreceipt({action:"cancel",order_id:e.order_id},function(t){console.log(["取消订单成功",t]),0==t.errcode&&(e.order_status="已取消")},function(e){console.log(["取消订单失败",e])}):console.log("不取消订单")})},e.gotoGiveGiftBtn=function(e){a.go("givegift",{orderID:e.order_id})},e.clear_history=function(){window.sessionStorage.removeItem("orderStatu")}}e.$inject=["$scope","$rootScope","$timeout","$state","nAPI","$stateParams","payment","wPopup","$sce"],angular.module("shop").controller("giftorderlistCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r,c,l){function d(e){var t=layer.open({type:2});a.show("正在领取中..."),i.reciveCoupon(e).then(function(i){layer.close(t),a.hide(),0==i.errcode&&(a.show("领 取 成 功"),o(function(){a.hide(),p(e)},500),u.what_btn=2)})["catch"](function(e){layer.close(t),a.hide(),1==e.errcode?(u.what_btn=1,u.showalready=!0):2==e.errcode?(u.what_btn=1,u.shownonum=!0):20002==e.errcode?a.show("该优惠券仅代言人能够领取<br><a href=\"zcToUrl('/customize/comeoncloud/Index.aspx?key=MallHome');\">点击链接成为代言人</a>"):20004==e.errcode?zcToUrl("/Error/NoPmsMobile.htm"):a.show(e.errmsg)})}var u=this;u.cp_ids=[],u.cp_datas=[],u.what_btn=0,e.cp_ids.indexOf(",")?u.cp_ids=e.cp_ids.split(","):u.cp_ids[0]=e.cp_ids,l.setPageTitle("领取优惠券");var p=function(e){i.getCouponInfo(e).then(function(t){console.log(["获取优惠券详细信息接口",t]),t.valid_to=t.valid_to.split(" ")[0],t.couponId=e,u.cp_datas=t,u.overDue=(new Date).getTime()-parseInt(t.valid_to_timestamp),console.log(["vm.overDue",u.overDue]),null==t.limit_type&&(t.limit_type=""),t.valid_from=t.valid_from.split(" ")[0],t.valid_from=t.valid_from.replace(/\//g,"."),t.valid_to=t.valid_to.split(" ")[0],t.valid_to=t.valid_to.replace(/\//g,".");var i=parseInt(t.valid_to_timestamp)-parseInt((new Date).getTime());i>0?t.valid=!0:t.valid=!1,r.title=t.cardcoupon_name,r.imgUrl="http://open-files.comeoncloud.net/img/ico/cardsharelogo.png",r.desc="先领券，再购物！",r.link=location.href,console.log(["shopInfo",r]),c.share(r)})["catch"](function(e){return 20004==e.errcode?void zcToUrl("/error/commonmsg.aspx?msg=只有指定渠道才能领取。"):void s.alert(e.errmsg)})};l.getUserInfo(function(){for(var e in u.cp_ids)""==u.cp_ids[e]||null==u.cp_ids[e]||p(u.cp_ids[e])},function(){t.go("bindPhone")}),u.getCouponBtn=function(e){d(e)},u.goback=function(){history.go(-1)},o(function(){for(var e=0;100>e;e++)console.log("hi"),$(".small-white-circle-wrap").append("<div style='width: 2px;height: 2px;border-radius: 2px;background: #fff;float: left;margin:0 0 0 8px;'></div>")}),n.goToDetail=function(){window.localStorage.setItem("couponDetail",JSON.stringify(u.cp_datas)),t.go("couponDetail",{couponId:u.cp_datas.couponId})}}e.$inject=["$stateParams","$state","nAPI","wLoading","wPopup","$timeout","$scope","shopInfo","wxAPI","commService"],angular.module("shop").controller("getcouponCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r,c,l){function d(){e.cp_ids.indexOf(",")?g.cp_ids=e.cp_ids.split(","):g.cp_ids[0]=e.cp_ids;for(var t in g.cp_ids)""==g.cp_ids[t]||null==g.cp_ids[t]||u(g.cp_ids[t],g.userCoupinId);o(function(){for(var e=0;100>e;e++)console.log("hi"),$(".small-white-circle-wrap").append("<div style='width: 2px;height: 2px;border-radius: 2px;background: #fff;float: left;margin:0 0 0 8px;'></div>")})}function u(e,t){i.getGiveCouponInfo(e,t).then(function(t){console.log(["获取优惠券详细信息接口",t]),t.valid_to=t.valid_to.split(" ")[0],t.couponId=e,g.cp_datas=t,g.overDue=(new Date).getTime()-parseInt(t.valid_to_timestamp),console.log(["vm.overDue",g.overDue]),null==t.limit_type&&(t.limit_type=""),t.valid_from=t.valid_from.split(" ")[0],t.valid_from=t.valid_from.replace(/\//g,"."),t.valid_to=t.valid_to.split(" ")[0],t.valid_to=t.valid_to.replace(/\//g,".");var i=parseInt(t.valid_to_timestamp)-parseInt((new Date).getTime());i>0?t.valid=!0:t.valid=!1})["catch"](function(e){s.alert(e.errmsg)})}function p(){m(g.userCoupinId)}function m(e){i.reciveOthersCoupon(e).then(function(e){e.status?(a.show("接 收 成 功"),o(function(){a.hide()},500),g.what_btn=2,t.go("mycoupons")):(a.show(e.msg),o(function(){a.hide()},500))})["catch"](function(e){1==e.errcode?(g.what_btn=1,g.showalready=!0):2==e.errcode&&(g.what_btn=1,g.shownonum=!0),a.show(e.msg),o(function(){a.hide()},500)})}function v(){window.localStorage.setItem("couponDetail",JSON.stringify(g.cp_datas)),t.go("couponDetail",{couponId:g.cp_datas.couponId})}var g=n.vm={cp_ids:[],cp_datas:[],what_btn:0,userCoupinId:e.userCoupinId,overDue:0};n.vf={getOneCoupon:u,getCouponBtn:p,goToDetail:v,init:d};l.getUserInfo(function(){d()},function(){t.go("bindPhone")})}e.$inject=["$stateParams","$state","nAPI","wLoading","wPopup","$timeout","$scope","shopInfo","wxAPI","commService"],angular.module("shop").controller("getOthersCouponCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n){console.log(i.orderId);var r=this;r.title="快递信息",e.goBack=function(){history.length>2?history.go(-1):t.go("home")},e.orderinfo={},e.expressdata=[];({action:"get",order_id:i.orderId});e.hasExpressInfo=!1,o.odDetail(i.orderId).then(function(t){console.log(["获取订单详情成功",t]);var i={express_company_code:t.express_company_code,express_number:t.express_number};return e.orderinfo=t,n.expressInfo(i)}).then(function(t){console.log(["获取物流信息失败",t]),0===t.errcode?(console.log(["获取物流信息成功",t]),e.expressdata=t.express_info,e.hasExpressInfo=!0):e.hasExpressInfo=!1})}e.$inject=["$scope","$state","$stateParams","$rootScope","$http","nAPI","sAPI"],angular.module("shop").controller("expressInfoCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r,c,l,d,u,p,m){function v(){function t(e){return function(t,i){var a=t[e],s=i[e];return a>s?1:s>a?-1:0}}if(N.init({trigger:"#claimArrivalTimeInput",type:"date",minDate:(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate()}),R.isNeedClaimArrivalTime=s.sysConfig.is_claim_mall_order_arrival_time,R.orderProducts=JSON.parse(window.sessionStorage.getItem("orderProducts")),!R.orderProducts)return void history.go(-1);console.log(["vm.orderProducts",R.orderProducts]),R.orderProducts&&1==R.orderProducts.length&&void 0!=R.orderProducts[0].grouptype&&(R.groupType=R.orderProducts[0].grouptype),h(),layer.open({type:2}),angular.forEach(R.orderProducts,function(e,t){e.is_cashpay_only&&(R.is_cashpay_only=1),0==e.is_no_express&&(R.is_no_express=0);var i={sku_id:e.sku_id,count:e.num,product_id:e.product_id,tags:e.tags};R.orderSkus.push(i);var a=f(e.product_id);null==a&&m.getSync("/serv/api/mall/Product.ashx",{action:"GetBaseInfo",product_id:e.product_id},function(e){e.isSuccess&&(a=e.returnObj,R.currOrderProductList.push(a),R.orderProducts[t].supplier_name=a.supplier_name)}),1==a.is_need_name_phone&&(R.is_need_name_phone=1)}),e.$watch("addressData",function(){void 0!=e.addressData?k():O()}),R.orderProducts.sort(t("supplier_name"));for(var i=0;i<R.orderProducts.length;i++)U.push(R.orderProducts[i].supplier_name);Array.prototype.unique=function(){for(var e=[],t={},i=0;i<this.length;i++)t[this[i]]||(e.push(this[i]),t[this[i]]=1);return e},U=U.unique();for(var a=[],i=0;i<U.length;i++){for(var o={supplier_name:U[i],product_list:[]},n=0;n<R.orderProducts.length;n++)R.orderProducts[n].supplier_name==U[i]&&o.product_list.push(R.orderProducts[n]);a.push(o)}R.orderProductsSort=a,layer.closeAll(),"givegift"==R.groupType&&(R.is_no_express=1,R.is_need_name_phone=1),g(),_(),y(R.orderProducts),M(),1==R.is_no_express&&j.getUserInfo(function(){"undefined"==typeof e.addressData&&(e.addressData={}),e.addressData.consigneename=R.userInfo.truename,e.addressData.phone=R.userInfo.phone})}function g(){var e=navigator.userAgent.toLowerCase();console.log(["浏览器agent",e]),"micromessenger"==e.match(/MicroMessenger/i)?(console.log("是微信浏览器"),R.chat=!0):R.chat=!1}function h(){switch(R.groupType){case"":R.currOrderType=0;break;case"givegift":R.currOrderType=1;break;case"leader":R.currOrderType=2;break;case"member":R.currOrderType=2;case"Course":R.currOrderType=7}}function f(e){if(0==R.currOrderProductList.length)return null;for(var t=0;t<R.currOrderProductList.length;t++)if(R.currOrderProductList[t].product_id==e)return R.currOrderProductList[t];return null}function _(){d.basketList("/mall/shoppingcart.ashx",{action:"list"},function(e){if(0==e.list.length)R.is_shownums=!1;else{R.is_shownums=!0;for(var t=0;t<e.list.length;t++)s.shop_nums+=e.list[t].count}})}function y(e){for(var t=0;t<e.length;t++){var i="",a=[];if(null!=e[t].properties)if(""===e[t].properties);else{a=e[t].properties.split(";");for(var s=0;s<a.length;s++){var o=[];o=a[s].split(":"),i+=o[o.length-2]+":"+o[o.length-1]+";"}e[t].properties=i.substring(0,i.length-1)}else e[t].properties=""}}function D(t){return void 0==e.addressData?(l.show("请选择寄送地址~"),void setTimeout(function(){l.hide()},600)):void(1!=t.num&&(t.num--,k()))}function b(t){if(void 0==e.addressData)return l.show("请选择寄送地址~"),void setTimeout(function(){l.hide()},600);if(t.num++,t.num>t.count){var i=c.alert({title:"提示信息",template:"不能再多了哦"});i.then(function(e){}),t.num=t.count}else k()}function w(t){if(void 0==e.addressData)return l.show("请选择寄送地址~"),setTimeout(function(){l.hide()},600),void(t.num>t.count&&(t.num=t.count));if(t.num>t.count){t.num=t.count;var i=c.alert({title:"提示信息",template:"您所填写的商品数量超过库存"});i.then(function(e){}),k()}else if(t.num<1)if(""===t.num)t.num=1,k();else{t.num=1;var i=c.alert({title:"提示信息",template:"至少要选择一个"});i.then(function(e){}),k()}else k()}function k(){T(),R.totalPay=R.orderProducts.productsTotalPrice,
x()}function x(){var t=[];angular.forEach(R.orderProducts,function(i,a){var s={sku_id:i.sku_id,count:i.num};t.push(s),R.getfreightdata={receiver_province_code:e.addressData.province_code,receiver_city_code:e.addressData.city_code,receiver_dist_code:e.addressData.dist_code,skus:t}});var i=n.freight(R.getfreightdata);i.then(function(e){R.freight=e.freight,R.showFreight=e.freight,R.freight_remark=e.errmsg,O()})["catch"](function(e){return 0!=e.errcode?void alert(e.errmsg):void 0})}function I(e){var t=/^1\d{10}$/;return t.test(e)?!0:!1}function P(){if(R.currOrderId="","givegift"!=R.groupType&&void 0==e.addressData)return l.show("请选择寄送地址~"),void setTimeout(function(){l.hide()},600);if("undefined"==typeof e.addressData&&(e.addressData={consigneename:"",phone:""}),e.addressData.consigneename=p.trim(e.addressData.consigneename),e.addressData.phone=p.trim(e.addressData.phone),1==R.is_no_express&&1==R.is_need_name_phone){if(""==e.addressData.consigneename)return void alert("请输入姓名");if(""==e.addressData.phone)return void alert("请输入手机")}else 1==R.is_no_express&&0==R.is_need_name_phone&&(e.addressData.consigneename="",e.addressData.phone="");if(1===R.isNeedClaimArrivalTime&&(R.claimArrivalTime=$("#claimArrivalTimeInput").val(),""==R.claimArrivalTime))return void alert("请输入送达日期");if(R.groupConfig.is_show_name_phone){if(!R.customCreaterPhone)return void alert("请输入"+R.rname+"手机");if(!I(R.customCreaterPhone))return void alert("手机号格式错误！");if(!R.customCreaterName)return void alert("请输入"+R.rname+"姓名")}var t=R.totalPay;R.isCouponFreight||(t+=R.freight);var a=C();R.isCanClick=!0,n.odSubmit(a).then(function(a){return 0!=a.errcode?(R.isCanClick=!1,c.alert(a.errmsg),void i(function(){R.isCanClick=!1},1500)):(R.currOrderId=a.order_id,0>=t?void L(a):e.checkedCouponInfo&&t<=e.checkedCouponInfo.deductible_amount?t>0?(R.payPanel.payOrderId=a.order_id,void(R.payPanel.show=!0)):void 0:(R.payPanel.payOrderId=a.order_id,void(R.payPanel.show=!0)))}).then(function(e){})["catch"](function(e){S(e)})}function S(e){if(void 0!=e.msg)c.alert(e.msg),i(function(){R.isCanClick=!1},1500);else{if("chooseWXPay:cancel"==e.errMsg){if(window.sessionStorage.removeItem("orderProducts"),"leader"==R.groupType||"member"==R.groupType)return void(R.currOrderId?t.go("orderDetail",{orderID:R.currOrderId}):window.history.go(-1));t.go("orderList")}else c.alert(JSON.stringify(e.errmsg));i(function(){R.isCanClick=!1},1500)}}function L(e){if(window.sessionStorage.removeItem("orderProducts"),s.sysConfig.mall_order_pay_success_url){var i=s.sysConfig.mall_order_pay_success_url.replace(/{order_id}/g,R.currOrderId);return void zcToUrl(i)}if("givegift"==R.groupType)return void t.go("givegift",{orderID:R.currOrderId});if("leader"==R.groupType)return void t.go("waitForGroupDetail",{goodsGroupId:R.currOrderId});if(U){if(U.length>1)return void t.go("orderList");if(""!=U[0])return void t.go("orderList")}t.go("orderDetail",{orderID:R.currOrderId})}function C(){var t=[];angular.forEach(R.orderProducts,function(e,i){var a={sku_id:e.sku_id,count:e.num};t.push(a)});var i="WEIXIN",a=0,s=0;R.isChecked&&(a=R.scoreNeed),R.isAcountChecked&&R.userInfo.account_amount>0&&(s=R.useAcount);var o=window.localStorage.getItem("sale_id");(""==o||void 0==o)&&(o=0);var n={},r=!0;switch("undefined"==typeof e.addressData&&(r=!1),n={receiver_province:r?e.addressData.province:"",receiver_province_code:r?e.addressData.province_code:"",receiver_city:r?e.addressData.city:"",receiver_city_code:r?e.addressData.city_code:"",receiver_dist:r?e.addressData.dist:"",receiver_dist_code:r?e.addressData.dist_code:"",receiver_name:r?e.addressData.consigneename:"",receiver_phone:r?e.addressData.phone:"",receiver_address:r?e.addressData.address:"",pay_type:i,use_score:a+R.realProductTotalScore,use_amount:s,skus:t,sale_id:o,buyer_memo:R.remark,is_no_express:R.is_no_express,is_need_name_phone:R.is_need_name_phone,cardcoupon_id:"0",claim_arrival_time:R.claimArrivalTime,custom_creater_name:R.customCreaterName,custom_creater_phone:R.customCreaterPhone,freight_remark:R.freight_remark},R.groupType){case"":n.order_type=0;break;case"givegift":n.order_type=1;break;case"leader":n.order_type=2,n.sale_id=void 0,n.rule_id=R.orderProducts[0].rule_id,n.groupbuy_type="leader";break;case"member":n.order_type=2,n.sale_id=void 0,n.order_id=R.orderProducts[0].order_id,n.groupbuy_parent_orderid=R.orderProducts[0].order_id,n.groupbuy_type="member";break;case"Course":n.order_type=7}return e.checkedCouponInfo&&(n.cardcoupon_id=e.checkedCouponInfo.cardcoupon_id),n}function T(){R.totalnum=0,R.orderProducts.productsTotalPrice=0,R.orderProducts.productsTotalScore=0,angular.forEach(R.orderProducts,function(e,t){var i=parseInt(e.num);R.orderProducts.productsTotalPrice+=e.price*i,"undefined"!=typeof e.score&&(R.orderProducts.productsTotalScore+=e.score*i),R.totalnum+=i}),R.orderProducts.productsTotalPrice=p.toFixed(R.orderProducts.productsTotalPrice)}function M(){T(),R.totalPay=R.orderProducts.productsTotalPrice,R.realProductTotalPrice=R.orderProducts.productsTotalPrice,R.realProductTotalScore=R.orderProducts.productsTotalScore}function A(){R.isChecked?z():E()}function z(){var e=R.orderProducts.productsTotalPrice,t=R.orderProducts.productsTotalPrice;R.scorePayRedio>0&&(t=Math.ceil(t*R.scorePayRedio));var i=0;if(i=Math.ceil(R.score/R.cash*t),i>R.userInfo.totalscore){R.scoreNeed=R.userInfo.totalscore,R.cashGet=R.userInfo.totalscore*R.cash/R.score;var a=F(e,R.cashGet);R.isAcountChecked?R.userInfo.account_amount>a?(R.useAcount=a,R.totalPay=0):(R.useAcount=R.userInfo.account_amount,R.totalPay=F(a,R.userInfo.account_amount)):(R.userInfo.account_amount>e?R.useAcount=e:R.useAcount=R.userInfo.account_amount,R.totalPay=a)}else R.scoreNeed=i,R.cashGet=t,R.userInfo.account_amount>e?R.useAcount=e:R.useAcount=R.userInfo.account_amount,R.scorePayRedio>0?R.totalPay=Math.ceil(e-t):R.totalPay=0,R.isAcountChecked=!1;G()}function E(){var e=R.orderProducts.productsTotalPrice,t=R.orderProducts.productsTotalPrice;R.scorePayRedio>0&&(t=Math.ceil(t*R.scorePayRedio));var i=0;i=Math.ceil(R.score/R.cash*t),i>R.userInfo.totalscore?(R.scoreNeed=R.userInfo.totalscore,R.cashGet=R.userInfo.totalscore*R.cash/R.score):(R.scoreNeed=i,R.cashGet=t),R.isAcountChecked?R.userInfo.account_amount>e?(R.useAcount=e,R.totalPay=0):(R.useAcount=R.userInfo.account_amount,R.totalPay=e-R.userInfo.account_amount,R.totalPay=F(e,R.userInfo.account_amount)):(R.userInfo.account_amount>e?R.useAcount=e:R.useAcount=R.userInfo.account_amount,R.totalPay=e),G()}function B(){n.tomoney().then(function(e){0==e.errcode?0!=e.amount?(R.showScore=2,R.score=e.score,R.cash=e.amount,A()):(R.showScore=1,R.totalPay=R.orderProducts.productsTotalPrice):(alert("获取失败"),R.totalPay=R.orderProducts.productsTotalPrice)})["catch"](function(e){alert(e.msg)})}function G(){R.scoreGet=0,R.getScoreMsg="";var e=C(),t={sku_list:JSON.stringify(R.orderSkus),use_score:e.use_score,use_amount:e.use_amount,cardcoupon_id:e.cardcoupon_id,total_pay:R.totalPay,order_type:e.order_type,groupbuy_type:e.groupbuy_type};m.calcSkuListRebateScore(t).then(function(e){R.scoreGet=e.result.score,0==e.result.rate?R.showCash=1:R.showCash=2})["catch"](function(e){20005==e.errcode&&(R.getScoreMsg="( 全额付款才可获得积分 )")})}function O(e){p.getUserInfo(function(){R.userInfo=s.userInfo,R.customCreaterName||(R.customCreaterName=s.userInfo.truename),R.customCreaterPhone||(R.customCreaterPhone=s.userInfo.phone),(null==s.groupConfig.account_amount_pay_showname||""==s.groupConfig.account_amount_pay_showname)&&(s.groupConfig.account_amount_pay_showname="余额"),s.groupConfig.score_pay_redio&&(R.scorePayRedio=parseInt(s.groupConfig.score_pay_redio)/100),s.score_show_name=s.groupConfig.score_show_name,R.groupConfig=s.groupConfig,R.rname=s.groupConfig.rname,R.totalPay=R.orderProducts.productsTotalPrice,B(),"function"==typeof e&&e()},function(){})}function F(e,t){var i,a,s;try{i=e.toString().split(".")[1].length}catch(o){i=0}try{a=t.toString().split(".")[1].length}catch(o){a=0}return s=Math.pow(10,Math.max(i,a)),(e*s-t*s)/s}(a.$$absUrl.match("localhost")||a.$$absUrl.match("192.168."))&&n.login({username:"WXUser201512231014329G7MC",password:"GLFPIDYNLQEZ"}).then(function(e){})["catch"](function(e){}),s.score_show_name="",s.shop_nums=0,s.isWhere="";var U=[],N=new LCalendar,R=e.vm={addressId:o.addressId,extend:!1,acountExtend:!1,userInfo:{},scoreNeed:0,cashGet:0,useAcount:0,totalPay:0,scoreGet:0,isChecked:!1,isAcountChecked:!1,showScore:1,showCash:1,chat:!0,is_shownums:!1,groupType:"",orderProducts:{},orderProductsSort:{},realProductTotalPrice:0,realProductTotalScore:0,freight:0,showFreight:0,isCouponFreight:0,orderSkus:[],totalnum:0,getfreightdata:{},remark:"",freight_remark:"",score:0,cash:1,scoreWill:0,cashWill:1,oldPrice:0,isFirstTime:0,isCanClick:!1,groupConfig:{},isShowAddress:!0,is_cashpay_only:0,is_no_express:1,is_need_name_phone:0,currOrderId:"",currOrderType:0,currOrderProductList:[],claimArrivalTime:"",isNeedClaimArrivalTime:0,rname:"下单人",customCreaterName:"",customCreaterPhone:"",scorePayRedio:-1,payPanel:{show:!1,payOrderId:0,daiPay:!0}},j=e.vf={is_weixin:g,getShopNums:_,formatSku:y,delNum:D,addNum:b,checknum:w,recalcmoney:k,togetfreight:x,submitOrderAndPay:P,productPrice:M,acountChange:A,getScoreCash:B,getCashScore:G,getUserInfo:O,init:v,dealPayScuss:L,dealPayError:S};p.getSysConfig(function(){v()},function(){}),e.$watch("checkedCouponInfo",function(){if(1==R.isFirstTime&&(R.oldPrice=R.orderProducts.productsTotalPrice),R.isFirstTime++,R.isCouponFreight=0,void 0!=e.checkedCouponInfo){if(""==e.checkedCouponInfo)return void k();R.orderProducts.productsTotalPrice=R.oldPrice,3==e.checkedCouponInfo.cardcoupon_type?R.orderProducts.productsTotalPrice=R.orderProducts.productsTotalPrice-e.checkedCouponInfo.buckle_sub_amount:0==e.checkedCouponInfo.cardcoupon_type?R.orderProducts.productsTotalPrice=R.orderProducts.productsTotalPrice*e.checkedCouponInfo.discount/10:1==e.checkedCouponInfo.cardcoupon_type?R.orderProducts.productsTotalPrice=R.orderProducts.productsTotalPrice-e.checkedCouponInfo.deductible_amount:2==e.checkedCouponInfo.cardcoupon_type&&(R.isCouponFreight=1)}else 0!=R.oldPrice&&(R.orderProducts.productsTotalPrice=R.oldPrice);R.orderProducts.productsTotalPrice<0&&(R.orderProducts.productsTotalPrice=0),R.freight<0&&(R.freight=0),R.orderProducts.productsTotalPrice=p.toFixed(R.orderProducts.productsTotalPrice),A()})}e.$inject=["$scope","$state","$timeout","$location","$rootScope","$stateParams","nAPI","wxAPI","wPopup","wLoading","mAPI","giftpay","commService","sAPI"],angular.module("shop").controller("createOrderController",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r,c,l){function d(){if(l.setPageTitle("优惠券详情"),g.couponInfo=JSON.parse(window.localStorage.getItem("couponDetail")),!g.couponInfo)return void r.go("mycoupons");var e="/sharecoupon/"+g.couponInfo.main_cardcoupon_id+"/"+g.couponInfo.cardcoupon_id+"#/sharecoupon/"+g.couponInfo.main_cardcoupon_id+"/"+g.couponInfo.cardcoupon_id,t="http://"+location.hostname+"/customize/shop/?ngroute="+e;n.share({title:"优惠券转赠",desc:"小小礼品，不成敬意，请笑纳！",link:t,imgUrl:"http://open-files.comeoncloud.net/img/ico/cardsharelogo.png"})}function u(){$("#btnShowOfflineConfirm").fadeOut("fast",function(){$("#wrapOfflineConfirm").fadeIn()})}function p(){g.offlineConfirmCode?(a.show("正在核销"),setTimeout(function(){c.offlineConfirm({hexiao_code:g.offlineConfirmCode,cardcoupon_id:g.couponDetailData.cardcoupon_id}).then(function(e){return a.hide(),console.log(e),"undefined"!=typeof e.errcode&&-1==e.errcode?(a.show("核销失败"),void setTimeout(function(){a.hide()},2e3)):void(e.status?r.go("couponDetail",{couponId:g.couponDetailData.cardcoupon_id,cpstate:1}):(a.show(e.msg),setTimeout(function(){a.hide()},2e3)))})},1e3)):(a.show("请输入核销码"),setTimeout(function(){a.hide()},600))}function m(){$(".shareimg").css("display","block")}function v(){$(".shareimg").css("display","none")}var g=o.vm={showWrapOfflineConfirm:t.location.href.match("jikuwifi")?!1:!0,couponId:e.couponId,couponState:e.cpstate,offlineConfirmCode:"",couponDetailData:{weixin_card_id:""},couponInfo:{}};o.vf={getCouponUrlBtn:m,hideShareImg:v,init:d,showOfflineConfirm:u,offlineConfirm:p};d(),i.getGiveCouponInfo(g.couponId,g.couponInfo.cardcoupon_id).then(function(e){console.log(["获取卡券详情成功",e]),g.couponDetailData=e,g.couponDetailData.weixin_card_id||(g.couponDetailData.weixin_card_id=""),e.valid_to=e.valid_to.split(" ")[0],g.overDue=(new Date).getTime()-parseInt(e.valid_to_timestamp),console.log(["vm.overDue",g.overDue]),e.valid_from=e.valid_from.split(" ")[0],e.valid_from=e.valid_from.replace(/\//g,"."),e.valid_to=e.valid_to.split(" ")[0],e.valid_to=e.valid_to.replace(/\//g,".");var t=parseInt(e.valid_to_timestamp)-parseInt((new Date).getTime());t>0?e.valid=!0:e.valid=!1,null===e.limit_type&&(e.limit_type=""),s(function(){for(var e=0;100>e;e++)console.log("hi"),$(".small-white-circle-wrap").append("<div style='width: 2px;height: 2px;border-radius: 2px;background: #fff;float: left;margin:0 0 0 8px;'></div>")})})["catch"](function(e){console.log(["获取卡券详情失败",e])})}e.$inject=["$stateParams","$window","nAPI","wLoading","$timeout","$scope","wxAPI","$state","sAPI","commService"],angular.module("shop").controller("couponDetailCtrl",e)}(),function(){"use strict";function e(e,t,i){function a(t,i){console.log(i),t.errMsg&&t.errMsg.match("chooseWXPay")&&(t.errMsg.match("chooseWXPay:ok")?e.go("paySuccess",i):e.go("payError",i))}var s={dealPayInfo:a};return s}function t(e,t,i){function a(e,t,a){"undefined"!=typeof i.uri&&i.uri&&(e=i.uri+e),$.ajax({type:"get",url:e,dataType:"json",async:!1,data:t,success:function(e){a(e)}})}function s(e){var i={action:"get",express_company_code:"",express_number:""};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/mall/express.ashx",i,e,t)})}function o(e){var i={action:"list",pageindex:1,pagesize:1e4};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/mall/category.ashx",i,e,t)})}function n(e){var i={action:"hexiao"};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/mall/cardcoupon.ashx",i,e,t)})}function r(e){var i={key:"MallHome",property:"shareinfo"};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/component/getkeyconfig.ashx",i,e,t)})}function c(e){var i={action:"CalcSkuListRebateScore"};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/mall/order.ashx",i,e,t)})}function l(e){var i={action:"GetLockScoreList"};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/Score/GetLockScoreList.ashx",i,e,t)})}function d(e){var i={action:"GetTotalLockScore"};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/Score/GetTotalLockScore.ashx",i,e,t)})}function u(e){var i={action:"Get"};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/mall/order.ashx",i,e,t)})}function p(e,i,a){var s={type:"OrderComment",for_id:e,ex_id:i};return s=angular.extend(s,a),t(function(e,t){ie("/Serv/API/Review/Add.ashx",s,e,t)})}function m(e,i){var a={rows:1e3,page:1,ex_id:e,type:"OrderComment",status:"1"};return a=angular.extend(a,i),t(function(e,t){te("/Serv/API/Review/List.ashx",a,e,t)})}function v(e){var i={};return i=angular.extend(i,e),t(function(e,t){ie("/serv/api/mall/stock/add.ashx",i,e,t)})}function g(e){var i={};return i=angular.extend(i,e),t(function(e,t){ie("/Serv/API/User/BindOpenIdPhone.ashx",i,e,t)})}function h(e){var i={};return i=angular.extend(i,e),t(function(e,t){ie("/Serv/API/User/Login.ashx",i,e,t)})}function f(){var e={};return t(function(t,i){ie("/Serv/API/User/LoginOut.ashx",e,t,i)})}function _(e,i,a,s){var o={};return o=angular.extend(o,i),t(function(t,i){ie("/Serv/API/User/"+e+"/OAuthCheck.ashx",o,t,i)})}function y(e,i,a,s){var o={};return o=angular.extend(o,i),t(function(t,i){ie("/Serv/API/User/"+e+"/OAuthBindPhone.ashx",o,t,i)})}function D(e,i){var a={};return a=angular.extend(a,i),t(function(t,i){ie(e,a,t,i)})}function b(e){var i={type:e.type,id:e.id};return i=angular.extend(i,e),t(function(e,t){ie("/Serv/API/Score/Add.ashx",i,e,t)})}function w(e){var i={action:"BuildAlipayRequest",order_id:e};return t(function(e,t){ie("/serv/api/mall/payment.ashx",i,e,t)})}function k(e){var i={action:"Get",order_id:e.order_id,is_replace_pay:e.is_replace_pay};return t(function(e,t){ie("/serv/api/mall/order.ashx",i,e,t)})}function x(e){return t(function(t,i){ie("/Serv/API/Mall/Order.ashx?action=update",e,t,i)})}function I(e){return t(function(t,i){ie("/Serv/API/Mall/Order.ashx?action=CancelUpdate",e,t,i)})}function P(e){return t(function(t,i){ie("/Serv/API/Common/ToolBarList.ashx",e,t,i)})}function S(e){var i={};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/meifan/card/list.ashx",i,e,t)})}function L(e){var i={card_id:e.id};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/meifan/card/get.ashx",i,e,t)})}function C(e){var i={card_id:e.card_id};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/meifan/card/apply.ashx",i,e,t)})}function T(e){var i={order_id:e.order_id};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/meifan/card/pay.ashx",i,e,t)})}function M(e){var i={};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/meifan/order/list.ashx",i,e,t)})}function A(e){var i={order_id:e.order_id};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/meifan/order/get.ashx",i,e,t)})}function z(e){var i={};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/meifan/card/my/list.ashx",i,e,t)})}function E(e){var i={id:e.myCard_id};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/meifan/card/my/get.ashx",i,e,t)})}function B(e){var i={pageindex:e.pageindex,pagesize:e.pagesize};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/meifan/activity/list.ashx",i,e,t)})}function G(e){var i={activity_id:e.activity_id};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/meifan/activity/get.ashx",i,e,t)})}function O(e){var i={data:e.data};return i=angular.extend(i,e),t(function(e,t){ie("/serv/api/meifan/activity/submit.ashx",i,e,t)})}function F(e){var i={pageindex:e.pageindex,pagesize:e.pagesize};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/meifan/match/list.ashx",i,e,t)})}function U(e){var i={activity_id:e.activity_id};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/meifan/match/get.ashx",i,e,t)})}function N(e){var i={data:e.data};return i=angular.extend(i,e),t(function(e,t){ie("/serv/api/meifan/match/submit.ashx",i,e,t)})}function R(e){var i={pageindex:e.pageindex,pagesize:e.pagesize};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/meifan/train/list.ashx",i,e,t)})}function j(e){var i={activity_id:e.activity_id};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/meifan/train/get.ashx",i,e,t)})}function H(e){var i={data:e.data};return i=angular.extend(i,e),t(function(e,t){ie("/serv/api/meifan/train/submit.ashx",i,e,t)})}function W(e){var i={order_id:e.order_id};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/meifan/train/get.ashx",i,e,t)})}function X(e){var i={pageindex:e.pageindex,pagesize:e.pagesize};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/meifan/train/my/list.ashx",i,e,t)})}function q(e){var i={id:e.id};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/meifan/train/my/get.ashx",i,e,t)})}function Y(e){var i={pageindex:e.pageindex,pagesize:e.pagesize};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/meifan/match/my/list.ashx",i,e,t)})}function J(e){var i={id:e.id};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/meifan/match/my/get.ashx",i,e,t)})}function V(e){var i={pageindex:e.pageindex,pagesize:e.pagesize};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/meifan/activity/my/list.ashx",i,e,t)})}function K(e){var i={id:e.id};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/meifan/train/my/get.ashx",i,e,t)})}function Z(e){var i={id:e.id};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/meifan/match/my/get.ashx",i,e,t)})}function Q(e){var i={id:e.id};return i=angular.extend(i,e),t(function(e,t){te("/serv/api/meifan/activity/my/get.ashx",i,e,t)})}var ee={expressInfo:s,pdCatrgory:o,offlineConfirm:n,getMallHomeShareConfig:r,getSync:a,calcSkuListRebateScore:c,getLockScoreList:l,getTotalLockScore:d,getOrderInfo:u,addOrderProductReview:p,getProductReviewList:m,shareAddScore:b,stockSubmit:v,bindPhone:g,getOrderDetail:k,aliPay:w,UpdateOrder:x,CancelUpdate:I,login:h,loginOut:f,oAuthCheck:_,oAuthBindPhone:y,getToolBarList:P,commPost:D,cardList:S,cardDetails:L,mfOrderList:M,mfOrderDetails:A,myCardList:z,myCardDetails:E,cardApply:C,cardPay:T,activeList:B,activeDetails:G,activeEntryForm:O,matchList:F,matchDetails:U,matchEntryForm:N,applyList:R,applyDetails:j,applyEntryForm:H,mfPay:W,myTrainList:X,myTrainDetails:q,myGameList:Y,myGameDetails:J,myApplyList:V,myTrainMessage:K,myGameMessage:Z,myActiveMessage:Q};ee.commUrl={getUserInfoFieldsUrl:"/Serv/API/Config/GetUserInfoFields.ashx",updatePassword:"/Serv/API/Common/UpdatePassword.ashx",updateInfo:"/Serv/API/User/Update.ashx",getUserExpand:"/Serv/API/User/Expand/Get.ashx",updateUserExpand:"/Serv/API/User/Expand/Update.ashx"};var te=(e.apiUri,e.apiGet),ie=e.apiPost;return ee}function i(e,t,i,a){return function(s,o){function n(t){function i(){WeixinJSBridge.invoke("getBrandWCPayRequest",t,function(t){"get_brand_wcpay_request:ok"==t.err_msg&&e.go("givegift",{orderID:o})})}"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",i,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",i),document.attachEvent("onWeixinJSBridgeReady",i)):i()}i.show("数据请求中..."),t.odPay_wx(o).then(function(e){0==e.errcode?(console.log(["微信支付成功",e]),i.hide(),n(e.pay_req)):(i.hide(),a.alert(e.errmsg),console.log(["微信支付失败",e]))})["catch"](function(e){i.hide(),console.log(["微信支付请求失败",e])})}}function a(e,t,i,a){return function(s,o,n){function r(e){function i(){WeixinJSBridge.invoke("getBrandWCPayRequest",e,function(e){"get_brand_wcpay_request:ok"==e.err_msg&&t.go("paySuccess",{totalPrice:n,orderid:o})})}"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",i,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",i),document.attachEvent("onWeixinJSBridgeReady",i)):i()}e.alert(data.errmsg),i.show("数据请求中..."),console.log("微信支付"),a.odPay_wx(o).then(function(t){0==t.errcode?(console.log(["微信支付成功",t]),i.hide(),r(t.pay_req)):(i.hide(),e.alert(t.errmsg),console.log(["微信支付失败",t]))})["catch"](function(e){i.hide(),console.log(["微信支付请求失败",e])})}}function s(e,t,i){function a(i,a){"undefined"==typeof e.sysConfig?t.getConfig().then(function(t){t.status&&(e.sysConfig=t.result,e.sysConfig.is_union_hongware=!1,i())})["catch"](function(e){a(e)}):i()}function s(i,s,o){"undefined"==typeof e.userInfo||o?t.getuserinfo({}).then(function(t){e.userInfo=t,i()})["catch"](function(e){s(e)}):a(function(){e.sysConfig.is_union_hongware?e.userInfo.is_bind_hongware?i():t.getuserinfo({}).then(function(t){e.userInfo=t,i()})["catch"](function(e){}):i()},function(){})}function o(e){var t=$("body");document.title=e;var i=$('<iframe style="position:relative;width:0px;height:0px;" src="/favicon.ico"></iframe>');i.on("load",function(){setTimeout(function(){i.off("load").remove()},0)}).appendTo(t)}function n(t){a(function(){s(function(){var i=e.sysConfig;if(i.is_union_hongware)if(e.userInfo.is_bind_hongware)t();else{var a,s="http://"+window.location.host+"/customize/shop/";s+="?v=1.0&ngroute=/createOrder#/createOrder";var o={orgCode:i.hongwei_orgcode,callbackUrl:s,openID:e.userInfo.wxOpenId,appID:i.wx_appid};a=HONGWAREDOMAIN+"/hfive/2016/store.html?action="+Base64.encode(JSON.stringify(o))+"#!/register",zcToUrl(a)}else t()},function(){})},function(){})}function r(e){return"undefined"==typeof e&&(e=0),(isNaN(e)||!e)&&(e=0),e=parseFloat(e)}function c(e){return e=r(e),parseFloat(e.toFixed(2))}function l(e){return"undefined"==typeof e?"":null==e?"":e.replace(/(^\s*)|(\s*$)/g,"")}function d(){var e=new Date;e.setTime(-1e3);for(var t=document.cookie,i=t.split("; "),a=0;a<i.length;a++){var s=i[a].split("=");document.cookie=s[0]+"=''; expires="+e.toGMTString()}}return{getSysConfig:a,getUserInfo:s,setPageTitle:o,bindHongwareSubmitAction:n,toFixed:c,numberNullProc:r,delAllCookie:d,trim:l}}e.$inject=["$state","wPopup","giftpay"],t.$inject=["nAPI","$q","CLIENTAPI_CONFIG"],i.$inject=["$state","nAPI","wLoading","wPopup"],a.$inject=["wPopup","$state","wLoading","nAPI"],s.$inject=["$rootScope","nAPI","$q"],angular.module("shop").factory("shopAPI",e).factory("sAPI",t).factory("giftpay",i).factory("payment",a).factory("commService",s)}(),function(){"use strict";function e(e){return function(t,i,a){if(void 0==t||""==t)return"";t=t.replace("iconfont ","");var s="",o="";i&&(s="color:"+i+";"),a&&(o="font-size:"+a+"px;");var n='<svg class="icon" style="'+s+o+'" aria-hidden="true"><use xlink:href="#'+t+'"></use></svg>';return e.trustAsHtml(n)}}function t(){return function(e,t){if(void 0==e||""==e)return"";var i=new Date(e);t||(t="yyyy-MM-dd hh:mm:ss");var a={"M+":i.getMonth()+1,"d+":i.getDate(),"h+":i.getHours(),"m+":i.getMinutes(),"s+":i.getSeconds(),"q+":Math.floor((i.getMonth()+3)/3),S:i.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(i.getFullYear()+"").substr(4-RegExp.$1.length)));for(var s in a)new RegExp("("+s+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[s]:("00"+a[s]).substr((""+a[s]).length)));return t}}e.$inject=["$sce"],angular.module("shop").filter("FormatterIcon",e).filter("FormatterTime",t)}(),function(){"use strict";function e(e,t,i,a,s,o){function n(){a.basketList("/mall/shoppingcart.ashx",{action:"list"},function(i){if(console.log(["获取购物篮列表成功",i]),0==i.list.length)e.is_shownums=!1;else{e.is_shownums=!0;for(var a in i.list)t.shop_nums+=i.list[a].count,console.log(t.shop_nums)}})}function r(){e.dataloading=!0,a.collectionList("/mall/collect.ashx",{action:"list",pageindex:e.pageindex,pagesize:e.pagesize},function(t){return console.log(["获取收藏的商品列表成功",t]),0==t.list.length?(e.showLinks=!0,void(e.nodata=!1)):(e.showLinks=!1,e.productListData=e.productListData.concat(t.list),void(t.list.length>=e.pagesize?(e.pageindex++,i(function(){e.dataloading=!1})):i(function(){e.dataloading=!0,e.nodata=!0})))},function(e){console.log(["获取商品列表请求失败",e])})}e.MALLCONFIG=o,e.productListData=[],e.pageindex=1,e.pagesize=1e3,e.dataloading=!1,t.shop_nums=0,n(),r(),e.loadMoreData=function(){e.dataloading||(console.log("到底"),r())},e.goProductDetail=function(e){var t=e.product_id;return"Course"==e.product_type?void zcToUrl("/Customize/YouZheng/Course/Detail.aspx?id="+t):void(window.plus?zcToUrl("/customize/shop/?v=1.0&ngroute=/productDetail/"+t+"#/productDetail/"+t):s.go("productDetail",{id:t}))}}e.$inject=["$scope","$rootScope","$timeout","mAPI","$state","MALLCONFIG"],angular.module("shop").controller("collectListCtrl",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r,c){function l(){d(0,!0),u()}function d(e,t){n.getUserInfo(function(){t&&(w.id=i.userInfo.id),t&&(w.phone=i.userInfo.phone),t&&(w.unionid=i.userInfo.unionid),(!t||w.id&&w.phone)&&o(function(){w.backUserCenter||!window.plus&&!document.referrer?zcToUrl("/customize/comeoncloud/Index.aspx?key=PersonalCenter",!0):zcBack()},1e3*e)},function(){})}function u(){n.getSysConfig(function(){i.sysConfig.login_page_config?(w.isShow=!0,w.loginPageConfig=JSON.parse(i.sysConfig.login_page_config),w.loginConfig=w.loginPageConfig.pages[0],w.regConfig=w.loginPageConfig.pages[1],w.loginConfig.login_btn_color&&(w.buttonStyle["background-color"]=w.loginConfig.login_btn_color,w.buttonStyle["border-color"]=w.loginConfig.login_btn_color),w.loginConfig.login_tmd&&(w.buttonStyle.opacity=w.loginConfig.login_tmd),w.loginConfig.login_text_border_color&&(w.borderColorStyle["border-color"]=w.loginConfig.login_text_border_color),w.regConfig.reg_btn_color&&(w.buttonStyle2["background-color"]=w.regConfig.reg_btn_color,w.buttonStyle2["border-color"]=w.regConfig.reg_btn_color),w.regConfig.reg_tmd&&(w.buttonStyle2.opacity=w.regConfig.reg_tmd),w.regConfig.reg_text_border_color&&(w.borderColorStyle2["border-color"]=w.regConfig.reg_text_border_color),w.regConfig.reg_code_bgcolor&&(w.codeColor["background-color"]=w.regConfig.reg_code_bgcolor),w.regConfig.reg_code_fontcolor&&(w.codeColor.color=w.regConfig.reg_code_fontcolor),console.log("vm.loginPageConfig",w.loginPageConfig)):console.log("获取配置信息失败")},function(){console.log("获取配置信息失败")}),console.log("vm.loginPageConfig",w.loginPageConfig)}function p(){zcToUrl("/customize/comeoncloud/Index.aspx?key=MallHome")}function m(){return w.phone?w.password?(w.loginLayer=layer.open({type:2,content:"登录中"}),void r.login({username:w.phone,password:w.password}).then(function(e){if(layer.close(w.loginLayer),0==e.errcode){if(zcAlert("登录成功"),window.plus){var t=plus.webview.getLaunchWebview();t.evalJS("$.bindUserPushClient()")}d(2)}})["catch"](function(e){layer.close(w.loginLayer),zcAlert(e.errmsg)})):void alert("请输入密码"):void alert("请输入手机号")}function v(e){window.plus?zcLoginOAuth("weixin",g):zcAlert("暂时仅支持app授权")}function g(e){w.userInfo=e.userInfo,w.oauthId=e.id;var t={};"weixin"==w.oauthId&&(t.openid=w.userInfo.openid,t.unionid=w.userInfo.unionid,t.city=w.userInfo.city,t.country=w.userInfo.country,t.headimgurl=w.userInfo.headimgurl,t.nickname=w.userInfo.nickname,t.language=w.userInfo.language,t.province=w.userInfo.province,t.privilege=angular.toJson(w.userInfo.privilege)),w.loginLayer=layer.open({type:2,content:"登录中"}),r.oAuthCheck(w.oauthId,t).then(function(e){if(layer.close(w.loginLayer),e.status){if(zcAlert("登录成功"),window.plus){var i=plus.webview.getLaunchWebview();i.evalJS("$.bindUserPushClient()")}d(2)}else w.unionid=t.unionid,w.loginPageConfig.first_show=1,zcAlert("该微信号未注册")})["catch"](function(e){layer.close(w.loginLayer)})}function h(){if(!w.phone)return void alert("请输入手机号");if(!w.code)return void alert("请输入验证码");var e="注册";if(w.unionid){var t={};"weixin"==w.oauthId&&(t.phone=w.phone,t.code=w.code,t.password=w.password,t.openid=w.userInfo.openid,t.unionid=w.userInfo.unionid,t.city=w.userInfo.city,t.country=w.userInfo.country,t.headimgurl=w.userInfo.headimgurl,t.nickname=w.userInfo.nickname,t.language=w.userInfo.language,t.province=w.userInfo.province,t.privilege=angular.toJson(w.userInfo.privilege)),console.log("开始"+e),w.loginLayer=layer.open({type:2,content:e+"中"}),r.oAuthBindPhone(w.oauthId,t).then(function(e){if(layer.close(w.loginLayer),e.status){var t=sessionStorage.getItem("returnObject");if(""!=t){var i=JSON.parse(t);switch(i.type){case"mfactive":$state.go("activeEntryForm",{activity_id:i.activity_id});break;case"mfmatch":$state.go("matchEntryForm",{activity_id:i.activity_id});break;case"mfapply":$state.go("applyEntryForm",{activity_id:i.activity_id});break;case"mfCard":$state.go("cardDetails",{id:i.id})}}d(2)}else zcAlert(e.msg)})["catch"](function(e){layer.close(w.loginLayer),zcAlert(e.msg)})}else console.log("开始"+e),w.loginLayer=layer.open({type:2,content:e+"中"}),r.bindPhone({phone:w.phone,code:w.code,password:w.password}).then(function(e){layer.close(w.loginLayer),e.status?d(2):zcAlert(e.msg)})["catch"](function(e){layer.close(w.loginLayer),zcAlert(e.msg)})}function f(){if(!w.isShowWait){if(!w.phone)return void alert("请输入手机号");w.isShowWait=!0,s.getSMSCode({phone:w.phone}).then(function(e){console.log("验证码",e),e.status?(w.isShowWait=!0,_()):(w.isShowWait=!1,alert(e.msg))})["catch"](function(e){console.log("验证码失败",e),w.isShowWait=!1})}}function _(){w.waitTime=60,w.waitForSMSCodeTimer=c(function(){w.waitTime<=0||!w.isShowWait?(c.cancel(w.waitForSMSCodeTimer),w.isShowWait=!1,w.waitTime=0):w.waitTime--},1e3,0)}function y(){i.goUrl("#/forgetPassword/")}function D(){w.loginPageConfig.first_show=1}function b(){w.loginPageConfig.first_show=0}var w=t.vm={isShowWait:!1,isShow:!1,waitTime:60,oauthId:"",unionid:"",id:"",userInfo:{},phone:"",password:"",code:"",loginLayer:-1,backUserCenter:e.backUserCenter,loginPageConfig:{},loginConfig:{},regConfig:{},buttonStyle:{},buttonStyle2:{},borderColorStyle:{},borderColorStyle2:{},height:0,codeColor:{}};t.vf={init:l,getSMSCode:f,waitForSMSCode:_,
bindPhone:h,login:m,goHome:p,goForgetPassword:y,goRegister:D,oAuthLogin:v,oAuthResult:g,goLogin:b};w.height=window.screen.height,u()}e.$inject=["$stateParams","$scope","$rootScope","mAPI","nAPI","$timeout","commService","sAPI","$interval"],angular.module("shop").controller("bindPhoneController",e)}(),function(){"use strict";function e(e,t,i,a,s,o,n,r,c,l,d){function u(){var e={};L.order_id&&(e.order_id=L.order_id),L.is_order_user&&(e.is_replace_pay=L.is_order_user),d.getOrderDetail(e).then(function(e){L.orderDetail=e,L.totalPay=e.total_amount,L.noFreightTotalPrice=e.total_amount,L.userInfo.id&&(L.needAmount=D(L.userInfo.account_amount,e.total_amount)),L.currOrderType=e.order_type,angular.forEach(L.orderDetail.product_list,function(e,t){var i={sku_id:e.sku_id,count:e.count,product_id:e.product_id,tags:e.tags};L.orderSkus.push(i)}),c.title="请帮我付款",c.desc="体现你我真感情的时刻到了！我看上了商城好货,请帮我付款！！！",c.link=window.location.origin+"/customize/shop/index.aspx?v=1.0&ngroute=/anotherPay/"+L.order_id+"?isOrderUser=1#/anotherPay/"+L.order_id+"?isOrderUser=1",c.imgUrl=L.orderDetail.product_list[0].img_url,i.isPlus&&zcCheckCache(c.imgUrl+"?x-oss-process=image/resize,w_60,h_60/format,png",function(e){L.plusShareImg="_downloads/cache"+e.fname}),l.share(c)})["catch"](function(e){alert("请求失败")})}function p(){if(i.isPlus){var e=L.plusShareImg?[L.plusShareImg]:[];return void zcWxShare(c.title,c.desc,c.link,e,[],"","")}L.showShare=!0}function m(){a.go("orderDetail",{orderID:L.order_id})}function v(){var e={order_id:L.order_id,use_amount:L.useAcount,cardcoupon_id:L.cardcoupon_id};L.isAcountChecked||(e.use_amount=0),L.cardAcount<=0&&(e.cardcoupon_id=0),d.UpdateOrder({data:JSON.stringify(e)}).then(function(t){return console.log("data",t),t.status?t.result.total_amount>0?(L.payPanel.payOrderId=e.order_id,void(L.payPanel.show=!0)):(alert("代付完成"),void u()):void alert(t.msg)})["catch"](function(e){})}function g(){var e={order_id:L.order_id};d.CancelUpdate(e).then(function(e){return console.log("data",e),e.status?(alert("取消代付成功"),void u()):void alert("取消代付失败")})["catch"](function(e){alert("取消代付失败")})}function h(){L.payPanel.show=!1,u()}function f(){L.payPanel.show=!1,u()}function _(){zcToUrl("/customize/comeoncloud/Index.aspx?key=MallHome")}function y(){r.getUserInfo(function(){L.userInfo=i.userInfo,L.orderDetail.order_id&&(L.needAmount=D(L.userInfo.account_amount,L.orderDetail.total_amount)),i.score_show_name=i.groupConfig.score_show_name},function(){})}function D(e,t){var i=e-t;return i>0?t:e}function b(){w()}function w(){L.isAcountChecked?L.useAcount=L.needAmount:L.useAcount=0,I(),P()}function k(){o.getGroupByConfig().then(function(e){e.status?e.result.malll.order_cancel_minute&&"0"!=e.result.malll.order_cancel_minute?L.orderCancelMinute=e.result.malll.order_cancel_minute:L.orderCancelMinute=240:wPopup.alert(e.msg)})["catch"](function(e){wPopup.alert("获取请求失败")})}function x(e){e?(L.cardcoupon_id=e.cardcoupon_id,L.cardAcount=e.deductible_amount):L.cardAcount=0,I(),P()}function I(){if(!L.isAcountChecked){var e=L.orderDetail.total_amount-L.useAcount-L.cardAcount;L.needAmount=D(L.userInfo.account_amount,e)}}function P(){L.totalPay=L.orderDetail.total_amount-L.useAcount-L.cardAcount,L.totalPay<0&&(L.totalPay=0)}function S(){y(),u(),k(),r.setPageTitle("代付详情")}var L=t.vm={order_id:e.orderId,is_order_user:e.isOrderUser,orderDetail:{},showShare:!1,i_height:document.body.scrollHeight,acountExtend:!1,userInfo:{},cashGet:0,isChecked:!1,isAcountChecked:!1,scoreNeed:0,needAmount:0,useAcount:0,cardAcount:0,totalPay:0,noFreightTotalPrice:0,plusShareImg:!1,orderCancelMinute:"",cardcoupon_id:0,score:0,cash:1,groupType:"",showName:"储值卡",currOrderType:"",orderSkus:[],payPanel:{show:!1,payOrderId:0}};t.vf={getOrderInfo:u,sendFriends:p,gotoOrderDetail:m,acountChange:b,checkAmount:x,gotoIndexPage:_,paySubmit:v,CancelUpdate:g,dealPayScuss:h,dealPayError:f};S()}e.$inject=["$stateParams","$scope","$rootScope","$state","mAPI","nAPI","$timeout","commService","shopInfo","wxAPI","sAPI"],angular.module("shop").controller("anotherPayController",e)}(),function(){"use strict";function e(e,i,a,s,o,n,r,c){t(e),window.location.href.indexOf("songhe")>-1?e.isSonghe=!0:e.isSonghe=!1;var l=navigator.userAgent.toLowerCase();e.isQQBrowser=l.indexOf("mqqbrowser")>=0,e.isWeixinBrowser=l.indexOf("micromessenger")>=0,e.isPlus=l.indexOf("html5plus")>=0,angular.element("title").html(s.title),"$$$MallConfig$$$"!=MALLCONFIG?(e.mallConfig=MALLCONFIG.mallconfignew,e.websiteVersion=MALLCONFIG.mallconfignew.website_version,MALLCONFIG.mallconfignew.product_img_ratio1&&MALLCONFIG.mallconfignew.product_img_ratio2?e.scale=Number(MALLCONFIG.mallconfignew.product_img_ratio1)/Number(MALLCONFIG.mallconfignew.product_img_ratio2):e.scale=1):e.scale=1,e.img_width=angular.element(o).width(),e.img_height=parseInt(e.img_width/e.scale),e.img_last="?x-oss-process=image/resize,m_pad,h_"+e.img_height+",w_"+e.img_width,r.getuserinfo({}).then(function(t){e.userInfo=t})["catch"](function(e){}),r.getConfig().then(function(t){t.status&&(e.groupConfig=t.result.malll,e.sysConfig=t.result)})["catch"](function(e){}),location.hostname.match("localhost")||location.hostname.match("192.168.")?e.mainsiteurl=location.origin:e.mainsiteurl=location.origin,o.location.href.match("localhost")||o.location.href.match("192.168.1")||e.$on("$stateChangeStart",function(e,t,i,a,s){n.mycenternochange||($("html").removeClass("sidebar-move"),"home"==t.name?zcToUrl("/customize/comeoncloud/Index.aspx?key=MallHome"):"infoCenter"==t.name&&zcToUrl("/customize/comeoncloud/Index.aspx?key=PersonalCenter"))})}function t(e){e.goUrl=function(e){e&&(0==e.indexOf("#")?window.location.hash=e:zcToUrl(e))},e.goBack=function(){zcBack()}}e.$inject=["$rootScope","$location","$log","shopInfo","$window","SHOP_UI","nAPI","wLoading"],angular.module("shop").run(e)}(),function(){"use strict";function e(){this.$get=function(){return 0},this.setrouter=!0,this.router=i}function t(e,t,i){if(console.log(["SHOP_CONFIGProvider",i]),i.setrouter)for(var a in i.router)e.state(a,i.router[a]);t.otherwise("/home")}t.$inject=["$stateProvider","$urlRouterProvider","SHOP_CONFIGProvider"],angular.module("shop").provider("SHOP_CONFIG",e).config(t);var i={home:{url:"/home",templateUrl:"app/home/home.html",controller:"homeController",controllerAs:"pdlist"},productList:{url:"/productList?catID&navName&keywordID&colorID&sizeID&updownID&tagID",templateUrl:"app/productList/productList.html",controller:"productListController",controllerAs:"pdlist"},housesList:{url:"/housesList",templateUrl:"app/housesList/housesList.html",controller:"housesListController"},productDetail:{url:"/productDetail/:id",templateUrl:"app/productDetail/productDetail.html",controller:"productDetailController",controllerAs:"productDetail"},housesDetail:{url:"/housesDetail/:id",templateUrl:"app/housesDetail/housesDetail.html",controller:"housesDetailController"},groupForGoodsDetail:{url:"/groupForGoodsDetail/:goodsId",templateUrl:"app/groupForGoods/groupForGoodsDetail/groupForGoodsDetail.html",controller:"groupForGoodsDetailCtrl",controllerAs:"vm"},groupForGoodsList:{url:"/groupForGoodsList",templateUrl:"app/groupForGoods/groupForGoodsList/groupForGoodsList.html",controller:"groupForGoodsListCtrl",controllerAs:"vm"},groupGoodsList:{url:"/groupGoodsList",templateUrl:"app/groupForGoods/groupGoodsList/groupGoodsList.html",controller:"groupGoodsListCtrl",controllerAs:"vm"},waitForGroupDetail:{url:"/waitForGroupDetail/:goodsGroupId",templateUrl:"app/groupForGoods/waitForGroupDetail/waitForGroupDetail.html",controller:"waitForGroupDetailCtrl",controllerAs:"vm"},saleList:{url:"/saleList",templateUrl:"app/saleList/saleList.html",controller:"saleListCtrl",controllerAs:"vm"},orderList:{url:"/orderList?status",templateUrl:"app/orderList/orderList.html",controller:"orderListController",controllerAs:"vm"},orderDetail:{url:"/orderDetail/:orderID",templateUrl:"app/orderDetail/orderDetail.html",controller:"orderDetailController",controllerAs:"vm"},orderReview:{url:"/orderReview/:orderId",templateUrl:"app/orderReview/orderReview.html",controller:"orderReviewController"},createOrder:{url:"/createOrder?addressId",templateUrl:"app/createOrder/createOrderNew.html",controller:"createOrderController"},shopBasket:{url:"/shopBasket",templateUrl:"app/shopBasket/shopBasket.html",controller:"shopBasketController",controllerAs:"shopBasket"},paySuccess:{url:"/paySuccess/:totalPrice/:orderid",templateUrl:"app/paySuccess/paySuccess.html",controller:"paySuccessCtrl"},payError:{url:"/payError/:totalPrice/:orderid",templateUrl:"app/paySuccess/payError.html",controller:"paySuccessCtrl"},receiveAddress:{url:"/receiveAddress",templateUrl:"app/receiveAddress/receiveAddress.html",controller:"receiveAddressController"},receiveAddressUpdata:{url:"/receiveAddress/:addressId",templateUrl:"app/receiveAddress/receiveAddress.html",controller:"receiveAddressController"},receiveAddressList:{url:"/receiveAddressList?siteName&siteparams",templateUrl:"app/receiveAddressList/receiveAddressList.html",controller:"receiveAddressListController"},infoCenter:{url:"/infoCenter",templateUrl:"app/infoCenter/infoCenter.html",controller:"infoCenterController",controllerAs:"vm"},applyRefund:{url:"/applyRefund/:orderId/:orderDetailId/:update",templateUrl:"app/returnGoods/applyRefund/applyRefund.html",controller:"applyRefundCtrl"},refundState:{url:"/refundState/:orderId/:orderDetailId",templateUrl:"app/returnGoods/refundState/refundState.html",controller:"refundStateCtrl"},returnLogistics:{url:"/returnLogistics/:orderId/:orderDetailId",templateUrl:"app/returnGoods/returnLogistics/returnLogistics.html",controller:"returnLogisticsCtrl"},refundDestination:{url:"/refundDestination/:orderId/:orderDetailId",templateUrl:"app/returnGoods/refundDestination/refundDestination.html",controller:"refundDestinationCtrl"},refundLog:{url:"/refundLog/:orderDetailId",templateUrl:"app/returnGoods/refundLog/refundLog.html",controller:"refundLogCtrl"},collectList:{url:"/collectList",templateUrl:"app/collectList/collectList.html",controller:"collectListCtrl"},housesCollectList:{url:"/housesCollectList",templateUrl:"app/collectList/housesCollectList/housescollectList.html",controller:"housesCollectListCtrl"},userMange:{url:"/userMange",templateUrl:"app/userMange/userMange.html",controller:"userMangeCtrl"},myscores:{url:"/myscores",templateUrl:"app/myscores/myscores.html",controller:"myscoresCtrl"},lockscores:{url:"/lockscores",templateUrl:"app/lockScoreList/lockScoreList.html",controller:"lockScoreListCtrl"},myamounts:{url:"/myscores/:is_amount",templateUrl:"app/myscores/myscores.html",controller:"myscoresCtrl"},mycoupons:{url:"/mycoupons",templateUrl:"app/mycoupons/mycoupons.html",controller:"mycouponsCtrl"},getcoupon:{url:"/getcoupon/:cp_ids",templateUrl:"app/getcoupon/getcoupon.html",controller:"getcouponCtrl",controllerAs:"vm"},sharecoupon:{url:"/sharecoupon/:cp_ids/:userCoupinId",templateUrl:"app/getOthersCoupon/getOthersCoupon.html",controller:"getOthersCouponCtrl"},couponDetail:{url:"/couponDetail/:couponId/:cpstate",templateUrl:"app/couponDetail/couponDetail.html",controller:"couponDetailCtrl"},expressInfo:{url:"/expressInfo/:orderId",templateUrl:"app/expressInfo/expressInfo.html",controller:"expressInfoCtrl",controllerAs:"vm"},paygift:{url:"/paygift",templateUrl:"app/gift/paygift/paygift.html",controller:"paygiftCtrl",controllerAs:"vm"},givegift:{url:"/givegift/:orderID",templateUrl:"app/gift/givegift/givegift.html",controller:"givegiftCtrl",controllerAs:"vm"},getgift:{url:"/getgift/:giftID?addressId",templateUrl:"app/gift/getgift/getgift.html",controller:"getgiftCtrl",controllerAs:"vm"},giftorderlist:{url:"/giftorderlist/:ID",templateUrl:"app/giftorderlist/giftorderlist.html",controller:"giftorderlistCtrl",controllerAs:"vm"},bindPhone:{url:"/bindPhone/:backUserCenter",templateUrl:"app/bindPhone/bindPhone.html",controller:"bindPhoneController"},anotherPay:{url:"/anotherPay/:orderId?isOrderUser",templateUrl:"app/anotherPay/anotherPay.html",controller:"anotherPayController"},userInfo:{url:"/userInfo",templateUrl:"app/userMange/userInfo/userInfo.html",controller:"userInfoCtrl"},forgetPassword:{url:"/forgetPassword/:isLogin",templateUrl:"app/userMange/forgetPassword/forgetPassword.html",controller:"forgetPasswordCtrl"},userUpdate:{url:"/userUpdate/:upt",templateUrl:"app/userMange/userUpdate/userUpdate.html",controller:"userUpdateCtrl"},searchPage:{url:"/searchPage",templateUrl:"app/searchPage/searchPage.html",controller:"searchPageeCtrl"},cardList:{url:"/meifan/cardList/",templateUrl:"app/customize/meifan/cardList/cardList.html",controller:"cardListController"},cardDetails:{url:"/meifan/cardDetails/:id",templateUrl:"app/customize/meifan/cardDetails/cardDetails.html",controller:"cardDetailsCon"},cardPay:{url:"/meifan/cardPay/:card_id",templateUrl:"app/customize/meifan/cardPay/cardPay.html",controller:"cardPayCon"},applyList:{url:"/meifan/applyList/",templateUrl:"app/customize/meifan/applyList/applyList.html",controller:"applyListController"},applyDetails:{url:"/meifan/applyDetails/:activity_id",templateUrl:"app/customize/meifan/applyDetails/applyDetails.html",controller:"applyDetailsCon"},applyEntryForm:{url:"/meifan/applyEntryForm/:activity_id",templateUrl:"app/customize/meifan/applyEntryForm/applyEntryForm.html",controller:"applyEntryFormCon"},matchList:{url:"/meifan/matchList/",templateUrl:"app/customize/meifan/matchList/matchList.html",controller:"matchListController"},matchDetails:{url:"/meifan/matchDetails/:activity_id",templateUrl:"app/customize/meifan/matchDetails/matchDetails.html",controller:"matchDetailsCon"},matchEntryForm:{url:"/meifan/matchEntryForm/:activity_id",templateUrl:"app/customize/meifan/matchEntryForm/matchEntryForm.html",controller:"matchEntryFormCon"},activeList:{url:"/meifan/activeList/",templateUrl:"app/customize/meifan/activeList/activeList.html",controller:"activeListController"},activeDetails:{url:"/meifan/activeDetails/:activity_id",templateUrl:"app/customize/meifan/activeDetails/activeDetails.html",controller:"activeDetailsCon"},activeEntryForm:{url:"/meifan/activeEntryForm/:activity_id",templateUrl:"app/customize/meifan/activeEntryForm/activeEntryForm.html",controller:"activeEntryFormCon"},mfPay:{url:"/meifan/mfPay/",templateUrl:"app/customize/meifan/mfPay/mfPay.html",controller:"mfPayCon"},MfOrderList:{url:"/meifan/MfOrderList/",templateUrl:"app/customize/meifan/MfOrderList/MfOrderList.html",controller:"mfOrderListCon"},MfOrderDetails:{url:"/meifan/MfOrderDetails/:order_id",templateUrl:"app/customize/meifan/MfOrderDetails/MfOrderDetails.html",controller:"mfOrderDetailsCon"},myCardList:{url:"/meifan/myCardList/",templateUrl:"app/customize/meifan/myCardList/myCardList.html",controller:"myCardListCon"},myCardDetails:{url:"/meifan/myCardDetails/:myCard_id",templateUrl:"app/customize/meifan/myCardDetails/myCardDetails.html",controller:"myCardDetailsCon"},myApplyList:{url:"/meifan/myApplyList/",templateUrl:"app/customize/meifan/myApplyList/myApplyList.html",controller:"myApplyListCon"},myTrainList:{url:"/meifan/myTrainList/",templateUrl:"app/customize/meifan/myTrainList/myTrainList.html",controller:"myTrainListCon"},myTrainDetails:{url:"/meifan/myTrainDetails/:id",templateUrl:"app/customize/meifan/myTrainDetails/myTrainDetails.html",controller:"myTrainDetailsCon"},myGameList:{url:"/meifan/myGameList/",templateUrl:"app/customize/meifan/myGameList/myGameList.html",controller:"myGameListCon"},myGameDetails:{url:"/meifan/myGameDetails/:id",templateUrl:"app/customize/meifan/myGameDetails/myGameDetails.html",controller:"myGameDetailsCon"},myTrainMessage:{url:"/meifan/myTrainMessage/:id",templateUrl:"app/customize/meifan/myTrainMessage/myTrainMessage.html",controller:"myTrainMessageCon"},myGameMessage:{url:"/meifan/myGameMessage/:id",templateUrl:"app/customize/meifan/myGameMessage/myGameMessage.html",controller:"myGameMessageCon"},myActiveMessage:{url:"/meifan/myActiveMessage/:id",templateUrl:"app/customize/meifan/myActiveMessage/myActiveMessage.html",controller:"myActiveMessageCon"}}}(),function(){"use strict";function e(){var e={infoCenter:{footerbar:!0,btnstyle:1}};return e}"$$$MallConfig$$$"===MALLCONFIG&&(MALLCONFIG={mallconfignew:{mall_name:"至云玩微信商城——好玩，研究微信的商城",mall_desc:"至云玩微信商城——好玩，研究微信的商城",mall_logo:"http://open-files.comeoncloud.net/www/comeoncloud/jubit/image/20151201/603267469092451AA2434FEC5BC163E0.png",product_img_ratio1:"600",product_img_ratio2:"600",nav_group_name:null,slide_name:"333",foottool:"",is_member:!1,is_show_oldprice:!1,is_show_stock:!0,access_level:0,apply_url:"/App/Member/Wap/PhoneVerify.aspx",nopms_url:"/error/nopms.htm",website_version:"高级分销版",my_cardcoupons_title:""}}),angular.module("shop").constant("malarkey",malarkey).constant("moment",moment).constant("MALLCONFIG",MALLCONFIG).constant("SHOP_UI",e()).constant("CLIENTAPI_CONFIG",{uri:"http://localhost:28241",debug:!1,wxdebug:!1}).constant("shopInfo",{title:MALLCONFIG.mallconfignew.mall_name,desc:MALLCONFIG.mallconfignew.mall_desc,imgUrl:MALLCONFIG.mallconfignew.mall_logo,link:""})}(),function(){"use strict";function e(e,t){e.debugEnabled(!0),t.allowHtml=!0,t.timeOut=3e3,t.positionClass="toast-top-right",t.preventDuplicates=!0,t.progressBar=!0}e.$inject=["$logProvider","toastrConfig"],angular.module("shop").config(e)}(),/*! iScroll v5.1.3 ~ (c) 2008-2014 Matteo Spinelli ~ http://cubiq.org/license */
function(e,t,i){function a(e,i){this.wrapper="string"==typeof e?t.querySelector(e):e,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var a in i)this.options[a]=i[a];this.translateZ=this.options.HWCompositing&&r.hasPerspective?" translateZ(0)":"",this.options.useTransition=r.hasTransition&&this.options.useTransition,this.options.useTransform=r.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?r.ease[this.options.bounceEasing]||r.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function s(e,i,a){var s=t.createElement("div"),o=t.createElement("div");return a===!0&&(s.style.cssText="position:absolute;z-index:9999",o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),o.className="iScrollIndicator","h"==e?(a===!0&&(s.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",o.style.height="100%"),s.className="iScrollHorizontalScrollbar"):(a===!0&&(s.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",o.style.width="100%"),s.className="iScrollVerticalScrollbar"),s.style.cssText+=";overflow:hidden",i||(s.style.pointerEvents="none"),s.appendChild(o),s}function o(i,a){this.wrapper="string"==typeof a.el?t.querySelector(a.el):a.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=i,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var s in a)this.options[s]=a[s];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(r.addEvent(this.indicator,"touchstart",this),r.addEvent(e,"touchend",this)),this.options.disablePointer||(r.addEvent(this.indicator,r.prefixPointerEvent("pointerdown"),this),r.addEvent(e,r.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(r.addEvent(this.indicator,"mousedown",this),r.addEvent(e,"mouseup",this))),this.options.fade&&(this.wrapperStyle[r.style.transform]=this.scroller.translateZ,this.wrapperStyle[r.style.transitionDuration]=r.isBadAndroid?"0.001s":"0ms",this.wrapperStyle.opacity="0")}var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)},r=function(){function a(e){return n===!1?!1:""===n?e:n+e.charAt(0).toUpperCase()+e.substr(1)}var s={},o=t.createElement("div").style,n=function(){for(var e,t=["t","webkitT","MozT","msT","OT"],i=0,a=t.length;a>i;i++)if(e=t[i]+"ransform",e in o)return t[i].substr(0,t[i].length-1);return!1}();s.getTime=Date.now||function(){return(new Date).getTime()},s.extend=function(e,t){for(var i in t)e[i]=t[i]},s.addEvent=function(e,t,i,a){e.addEventListener(t,i,!!a)},s.removeEvent=function(e,t,i,a){e.removeEventListener(t,i,!!a)},s.prefixPointerEvent=function(t){return e.MSPointerEvent?"MSPointer"+t.charAt(9).toUpperCase()+t.substr(10):t},s.momentum=function(e,t,a,s,o,n){var r,c,l=e-t,d=i.abs(l)/a;return n=void 0===n?6e-4:n,r=e+d*d/(2*n)*(0>l?-1:1),c=d/n,s>r?(r=o?s-o/2.5*(d/8):s,l=i.abs(r-e),c=l/d):r>0&&(r=o?o/2.5*(d/8):0,l=i.abs(e)+r,c=l/d),{destination:i.round(r),duration:c}};var r=a("transform");return s.extend(s,{hasTransform:r!==!1,hasPerspective:a("perspective")in o,hasTouch:"ontouchstart"in e,hasPointer:e.PointerEvent||e.MSPointerEvent,hasTransition:a("transition")in o}),s.isBadAndroid=/Android /.test(e.navigator.appVersion)&&!/Chrome\/\d/.test(e.navigator.appVersion),s.extend(s.style={},{transform:r,transitionTimingFunction:a("transitionTimingFunction"),transitionDuration:a("transitionDuration"),transitionDelay:a("transitionDelay"),transformOrigin:a("transformOrigin")}),s.hasClass=function(e,t){var i=new RegExp("(^|\\s)"+t+"(\\s|$)");return i.test(e.className)},s.addClass=function(e,t){if(!s.hasClass(e,t)){var i=e.className.split(" ");i.push(t),e.className=i.join(" ")}},s.removeClass=function(e,t){if(s.hasClass(e,t)){var i=new RegExp("(^|\\s)"+t+"(\\s|$)","g");e.className=e.className.replace(i," ")}},s.offset=function(e){for(var t=-e.offsetLeft,i=-e.offsetTop;e=e.offsetParent;)t-=e.offsetLeft,i-=e.offsetTop;return{left:t,top:i}},s.preventDefaultException=function(e,t){for(var i in t)if(t[i].test(e[i]))return!0;return!1},s.extend(s.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),s.extend(s.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(e){return i.sqrt(1- --e*e)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(e){var t=4;return(e-=1)*e*((t+1)*e+t)+1}},bounce:{style:"",fn:function(e){return(e/=1)<1/2.75?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},elastic:{style:"",fn:function(e){var t=.22,a=.4;return 0===e?0:1==e?1:a*i.pow(2,-10*e)*i.sin((e-t/4)*(2*i.PI)/t)+1}}}),s.tap=function(e,i){var a=t.createEvent("Event");a.initEvent(i,!0,!0),a.pageX=e.pageX,a.pageY=e.pageY,e.target.dispatchEvent(a)},s.click=function(e){var i,a=e.target;/(SELECT|INPUT|TEXTAREA)/i.test(a.tagName)||(i=t.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,e.view,1,a.screenX,a.screenY,a.clientX,a.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),i._constructed=!0,a.dispatchEvent(i))},s}();a.prototype={version:"5.1.3",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(e){e.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(e){if((1==r.eventType[e.type]||0===e.button)&&this.enabled&&(!this.initiated||r.eventType[e.type]===this.initiated)){!this.options.preventDefault||r.isBadAndroid||r.preventDefaultException(e.target,this.options.preventDefaultException)||e.preventDefault();var t,a=e.touches?e.touches[0]:e;this.initiated=r.eventType[e.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=r.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,t=this.getComputedPosition(),this._translate(i.round(t.x),i.round(t.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=a.pageX,this.pointY=a.pageY,this._execEvent("beforeScrollStart")}},_move:function(e){if(this.enabled&&r.eventType[e.type]===this.initiated){this.options.preventDefault&&e.preventDefault();var t,a,s,o,n=e.touches?e.touches[0]:e,c=n.pageX-this.pointX,l=n.pageY-this.pointY,d=r.getTime();if(this.pointX=n.pageX,this.pointY=n.pageY,this.distX+=c,this.distY+=l,s=i.abs(this.distX),o=i.abs(this.distY),!(d-this.endTime>300&&10>s&&10>o)){if(this.directionLocked||this.options.freeScroll||(s>o+this.options.directionLockThreshold?this.directionLocked="h":o>=s+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)e.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);l=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)e.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);c=0}c=this.hasHorizontalScroll?c:0,l=this.hasVerticalScroll?l:0,t=this.x+c,a=this.y+l,(t>0||t<this.maxScrollX)&&(t=this.options.bounce?this.x+c/3:t>0?0:this.maxScrollX),(a>0||a<this.maxScrollY)&&(a=this.options.bounce?this.y+l/3:a>0?0:this.maxScrollY),this.directionX=c>0?-1:0>c?1:0,this.directionY=l>0?-1:0>l?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(t,a),d-this.startTime>300&&(this.startTime=d,this.startX=this.x,this.startY=this.y)}}},_end:function(e){if(this.enabled&&r.eventType[e.type]===this.initiated){this.options.preventDefault&&!r.preventDefaultException(e.target,this.options.preventDefaultException)&&e.preventDefault();var t,a,s=(e.changedTouches?e.changedTouches[0]:e,r.getTime()-this.startTime),o=i.round(this.x),n=i.round(this.y),c=i.abs(o-this.startX),l=i.abs(n-this.startY),d=0,u="";if(this.isInTransition=0,this.initiated=0,this.endTime=r.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(o,n),!this.moved)return this.options.tap&&r.tap(e,this.options.tap),this.options.click&&r.click(e),void this._execEvent("scrollCancel");if(this._events.flick&&200>s&&100>c&&100>l)return void this._execEvent("flick");if(this.options.momentum&&300>s&&(t=this.hasHorizontalScroll?r.momentum(this.x,this.startX,s,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:o,duration:0},a=this.hasVerticalScroll?r.momentum(this.y,this.startY,s,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:n,duration:0},o=t.destination,n=a.destination,d=i.max(t.duration,a.duration),this.isInTransition=1),this.options.snap){var p=this._nearestSnap(o,n);this.currentPage=p,d=this.options.snapSpeed||i.max(i.max(i.min(i.abs(o-p.x),1e3),i.min(i.abs(n-p.y),1e3)),300),o=p.x,n=p.y,this.directionX=0,this.directionY=0,u=this.options.bounceEasing}return o!=this.x||n!=this.y?((o>0||o<this.maxScrollX||n>0||n<this.maxScrollY)&&(u=r.ease.quadratic),void this.scrollTo(o,n,d,u)):void this._execEvent("scrollEnd")}}},_resize:function(){var e=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){e.refresh()},this.options.resizePolling)},resetPosition:function(e){var t=this.x,i=this.y;return e=e||0,!this.hasHorizontalScroll||this.x>0?t=0:this.x<this.maxScrollX&&(t=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),t==this.x&&i==this.y?!1:(this.scrollTo(t,i,e,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=r.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},off:function(e,t){if(this._events[e]){var i=this._events[e].indexOf(t);i>-1&&this._events[e].splice(i,1)}},_execEvent:function(e){if(this._events[e]){var t=0,i=this._events[e].length;if(i)for(;i>t;t++)this._events[e][t].apply(this,[].slice.call(arguments,1))}},scrollBy:function(e,t,i,a){e=this.x+e,t=this.y+t,i=i||0,this.scrollTo(e,t,i,a)},scrollTo:function(e,t,i,a){a=a||r.ease.circular,this.isInTransition=this.options.useTransition&&i>0,!i||this.options.useTransition&&a.style?(this._transitionTimingFunction(a.style),this._transitionTime(i),this._translate(e,t)):this._animate(e,t,i,a.fn)},scrollToElement:function(e,t,a,s,o){if(e=e.nodeType?e:this.scroller.querySelector(e)){var n=r.offset(e);n.left-=this.wrapperOffset.left,n.top-=this.wrapperOffset.top,a===!0&&(a=i.round(e.offsetWidth/2-this.wrapper.offsetWidth/2)),s===!0&&(s=i.round(e.offsetHeight/2-this.wrapper.offsetHeight/2)),n.left-=a||0,n.top-=s||0,n.left=n.left>0?0:n.left<this.maxScrollX?this.maxScrollX:n.left,n.top=n.top>0?0:n.top<this.maxScrollY?this.maxScrollY:n.top,t=void 0===t||null===t||"auto"===t?i.max(i.abs(this.x-n.left),i.abs(this.y-n.top)):t,this.scrollTo(n.left,n.top,t,o)}},_transitionTime:function(e){if(e=e||0,this.scrollerStyle[r.style.transitionDuration]=e+"ms",!e&&r.isBadAndroid&&(this.scrollerStyle[r.style.transitionDuration]="0.001s"),this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTime(e)},_transitionTimingFunction:function(e){if(this.scrollerStyle[r.style.transitionTimingFunction]=e,this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTimingFunction(e)},_translate:function(e,t){if(this.options.useTransform?this.scrollerStyle[r.style.transform]="translate("+e+"px,"+t+"px)"+this.translateZ:(e=i.round(e),t=i.round(t),this.scrollerStyle.left=e+"px",this.scrollerStyle.top=t+"px"),this.x=e,this.y=t,this.indicators)for(var a=this.indicators.length;a--;)this.indicators[a].updatePosition()},_initEvents:function(t){var i=t?r.removeEvent:r.addEvent,a=this.options.bindToWrapper?this.wrapper:e;i(e,"orientationchange",this),i(e,"resize",this),this.options.click&&i(this.wrapper,"click",this,!0),this.options.disableMouse||(i(this.wrapper,"mousedown",this),i(a,"mousemove",this),i(a,"mousecancel",this),i(a,"mouseup",this)),r.hasPointer&&!this.options.disablePointer&&(i(this.wrapper,r.prefixPointerEvent("pointerdown"),this),i(a,r.prefixPointerEvent("pointermove"),this),i(a,r.prefixPointerEvent("pointercancel"),this),i(a,r.prefixPointerEvent("pointerup"),this)),r.hasTouch&&!this.options.disableTouch&&(i(this.wrapper,"touchstart",this),i(a,"touchmove",this),i(a,"touchcancel",this),i(a,"touchend",this)),i(this.scroller,"transitionend",this),i(this.scroller,"webkitTransitionEnd",this),i(this.scroller,"oTransitionEnd",this),i(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var t,i,a=e.getComputedStyle(this.scroller,null);return this.options.useTransform?(a=a[r.style.transform].split(")")[0].split(", "),t=+(a[12]||a[4]),i=+(a[13]||a[5])):(t=+a.left.replace(/[^-\d.]/g,""),i=+a.top.replace(/[^-\d.]/g,"")),{x:t,y:i}},_initIndicators:function(){function e(e){for(var t=r.indicators.length;t--;)e.call(r.indicators[t])}var t,i=this.options.interactiveScrollbars,a="string"!=typeof this.options.scrollbars,n=[],r=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(t={el:s("v",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:a,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(t.el),n.push(t)),this.options.scrollX&&(t={el:s("h",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:a,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(t.el),n.push(t))),this.options.indicators&&(n=n.concat(this.options.indicators));for(var c=n.length;c--;)this.indicators.push(new o(this,n[c]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){e(function(){this.fade()})}),this.on("scrollCancel",function(){e(function(){this.fade()})}),this.on("scrollStart",function(){e(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){e(function(){this.fade(1,!0)})})),this.on("refresh",function(){e(function(){this.refresh()})}),this.on("destroy",function(){e(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){r.addEvent(this.wrapper,"wheel",this),r.addEvent(this.wrapper,"mousewheel",this),r.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){r.removeEvent(this.wrapper,"wheel",this),r.removeEvent(this.wrapper,"mousewheel",this),r.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(e){if(this.enabled){e.preventDefault(),e.stopPropagation();var t,a,s,o,n=this;if(void 0===this.wheelTimeout&&n._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){n._execEvent("scrollEnd"),n.wheelTimeout=void 0},400),"deltaX"in e)1===e.deltaMode?(t=-e.deltaX*this.options.mouseWheelSpeed,a=-e.deltaY*this.options.mouseWheelSpeed):(t=-e.deltaX,a=-e.deltaY);else if("wheelDeltaX"in e)t=e.wheelDeltaX/120*this.options.mouseWheelSpeed,a=e.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in e)t=a=e.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in e))return;t=a=-e.detail/3*this.options.mouseWheelSpeed}if(t*=this.options.invertWheelDirection,a*=this.options.invertWheelDirection,this.hasVerticalScroll||(t=a,a=0),this.options.snap)return s=this.currentPage.pageX,o=this.currentPage.pageY,t>0?s--:0>t&&s++,a>0?o--:0>a&&o++,void this.goToPage(s,o);s=this.x+i.round(this.hasHorizontalScroll?t:0),o=this.y+i.round(this.hasVerticalScroll?a:0),s>0?s=0:s<this.maxScrollX&&(s=this.maxScrollX),o>0?o=0:o<this.maxScrollY&&(o=this.maxScrollY),this.scrollTo(s,o,0)}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var e,t,a,s,o,n,r=0,c=0,l=0,d=this.options.snapStepX||this.wrapperWidth,u=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(a=i.round(d/2),s=i.round(u/2);l>-this.scrollerWidth;){for(this.pages[r]=[],e=0,o=0;o>-this.scrollerHeight;)this.pages[r][e]={x:i.max(l,this.maxScrollX),y:i.max(o,this.maxScrollY),width:d,height:u,cx:l-a,cy:o-s},o-=u,e++;l-=d,r++}else for(n=this.options.snap,e=n.length,t=-1;e>r;r++)(0===r||n[r].offsetLeft<=n[r-1].offsetLeft)&&(c=0,t++),this.pages[c]||(this.pages[c]=[]),l=i.max(-n[r].offsetLeft,this.maxScrollX),o=i.max(-n[r].offsetTop,this.maxScrollY),a=l-i.round(n[r].offsetWidth/2),s=o-i.round(n[r].offsetHeight/2),this.pages[c][t]={x:l,y:o,width:n[r].offsetWidth,height:n[r].offsetHeight,cx:a,cy:s},l>this.maxScrollX&&c++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var e=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.x-this.startX),1e3),i.min(i.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,e)})},_nearestSnap:function(e,t){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var a=0,s=this.pages.length,o=0;if(i.abs(e-this.absStartX)<this.snapThresholdX&&i.abs(t-this.absStartY)<this.snapThresholdY)return this.currentPage;for(e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),t>0?t=0:t<this.maxScrollY&&(t=this.maxScrollY);s>a;a++)if(e>=this.pages[a][0].cx){e=this.pages[a][0].x;break}for(s=this.pages[a].length;s>o;o++)if(t>=this.pages[0][o].cy){t=this.pages[0][o].y;break}return a==this.currentPage.pageX&&(a+=this.directionX,0>a?a=0:a>=this.pages.length&&(a=this.pages.length-1),e=this.pages[a][0].x),o==this.currentPage.pageY&&(o+=this.directionY,0>o?o=0:o>=this.pages[0].length&&(o=this.pages[0].length-1),t=this.pages[0][o].y),{x:e,y:t,pageX:a,pageY:o}},goToPage:function(e,t,a,s){s=s||this.options.bounceEasing,e>=this.pages.length?e=this.pages.length-1:0>e&&(e=0),t>=this.pages[e].length?t=this.pages[e].length-1:0>t&&(t=0);var o=this.pages[e][t].x,n=this.pages[e][t].y;a=void 0===a?this.options.snapSpeed||i.max(i.max(i.min(i.abs(o-this.x),1e3),i.min(i.abs(n-this.y),1e3)),300):a,this.currentPage={x:o,y:n,pageX:e,pageY:t},this.scrollTo(o,n,a,s)},next:function(e,t){var i=this.currentPage.pageX,a=this.currentPage.pageY;i++,i>=this.pages.length&&this.hasVerticalScroll&&(i=0,a++),this.goToPage(i,a,e,t)},prev:function(e,t){var i=this.currentPage.pageX,a=this.currentPage.pageY;i--,0>i&&this.hasVerticalScroll&&(i=0,a--),this.goToPage(i,a,e,t)},_initKeys:function(t){var i,a={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(i in this.options.keyBindings)"string"==typeof this.options.keyBindings[i]&&(this.options.keyBindings[i]=this.options.keyBindings[i].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(i in a)this.options.keyBindings[i]=this.options.keyBindings[i]||a[i];r.addEvent(e,"keydown",this),this.on("destroy",function(){r.removeEvent(e,"keydown",this)})},_key:function(e){if(this.enabled){var t,a=this.options.snap,s=a?this.currentPage.pageX:this.x,o=a?this.currentPage.pageY:this.y,n=r.getTime(),c=this.keyTime||0,l=.25;switch(this.options.useTransition&&this.isInTransition&&(t=this.getComputedPosition(),this._translate(i.round(t.x),i.round(t.y)),this.isInTransition=!1),this.keyAcceleration=200>n-c?i.min(this.keyAcceleration+l,50):0,e.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?s+=a?1:this.wrapperWidth:o+=a?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?s-=a?1:this.wrapperWidth:o-=a?1:this.wrapperHeight;break;case this.options.keyBindings.end:s=a?this.pages.length-1:this.maxScrollX,o=a?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:s=0,o=0;break;case this.options.keyBindings.left:s+=a?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:o+=a?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:s-=a?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:o-=a?1:5+this.keyAcceleration>>0;break;default:return}if(a)return void this.goToPage(s,o);s>0?(s=0,this.keyAcceleration=0):s<this.maxScrollX&&(s=this.maxScrollX,this.keyAcceleration=0),o>0?(o=0,this.keyAcceleration=0):o<this.maxScrollY&&(o=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(s,o,0),this.keyTime=n}},_animate:function(e,t,i,a){function s(){var p,m,v,g=r.getTime();return g>=u?(o.isAnimating=!1,o._translate(e,t),void(o.resetPosition(o.options.bounceTime)||o._execEvent("scrollEnd"))):(g=(g-d)/i,v=a(g),p=(e-c)*v+c,m=(t-l)*v+l,o._translate(p,m),void(o.isAnimating&&n(s)))}var o=this,c=this.x,l=this.y,d=r.getTime(),u=d+i;this.isAnimating=!0,s()},handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(e);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(e);break;case"keydown":this._key(e);break;case"click":e._constructed||(e.preventDefault(),e.stopPropagation())}}},o.prototype={handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e)}},destroy:function(){this.options.interactive&&(r.removeEvent(this.indicator,"touchstart",this),r.removeEvent(this.indicator,r.prefixPointerEvent("pointerdown"),this),r.removeEvent(this.indicator,"mousedown",this),r.removeEvent(e,"touchmove",this),r.removeEvent(e,r.prefixPointerEvent("pointermove"),this),r.removeEvent(e,"mousemove",this),r.removeEvent(e,"touchend",this),r.removeEvent(e,r.prefixPointerEvent("pointerup"),this),r.removeEvent(e,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(t){var i=t.touches?t.touches[0]:t;t.preventDefault(),t.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=i.pageX,this.lastPointY=i.pageY,this.startTime=r.getTime(),this.options.disableTouch||r.addEvent(e,"touchmove",this),this.options.disablePointer||r.addEvent(e,r.prefixPointerEvent("pointermove"),this),this.options.disableMouse||r.addEvent(e,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(e){var t,i,a,s,o=e.touches?e.touches[0]:e;r.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,t=o.pageX-this.lastPointX,this.lastPointX=o.pageX,i=o.pageY-this.lastPointY,this.lastPointY=o.pageY,a=this.x+t,s=this.y+i,this._pos(a,s),e.preventDefault(),e.stopPropagation()},_end:function(t){if(this.initiated){if(this.initiated=!1,t.preventDefault(),t.stopPropagation(),r.removeEvent(e,"touchmove",this),r.removeEvent(e,r.prefixPointerEvent("pointermove"),this),r.removeEvent(e,"mousemove",this),this.scroller.options.snap){var a=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),s=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.scroller.x-a.x),1e3),i.min(i.abs(this.scroller.y-a.y),1e3)),300);(this.scroller.x!=a.x||this.scroller.y!=a.y)&&(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=a,this.scroller.scrollTo(a.x,a.y,s,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(e){e=e||0,this.indicatorStyle[r.style.transitionDuration]=e+"ms",!e&&r.isBadAndroid&&(this.indicatorStyle[r.style.transitionDuration]="0.001s")},transitionTimingFunction:function(e){this.indicatorStyle[r.style.transitionTimingFunction]=e},refresh:function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(r.addClass(this.wrapper,"iScrollBothScrollbars"),r.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(r.removeClass(this.wrapper,"iScrollBothScrollbars"),r.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=i.max(i.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=i.max(i.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var e=this.options.listenX&&i.round(this.sizeRatioX*this.scroller.x)||0,t=this.options.listenY&&i.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(e<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=i.max(this.indicatorWidth+e,8),this.indicatorStyle.width=this.width+"px"),e=this.minBoundaryX):e>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=i.max(this.indicatorWidth-(e-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",e=this.maxPosX+this.indicatorWidth-this.width):e=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),t<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=i.max(this.indicatorHeight+3*t,8),this.indicatorStyle.height=this.height+"px"),t=this.minBoundaryY):t>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=i.max(this.indicatorHeight-3*(t-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",t=this.maxPosY+this.indicatorHeight-this.height):t=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=e,this.y=t,this.scroller.options.useTransform?this.indicatorStyle[r.style.transform]="translate("+e+"px,"+t+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=e+"px",this.indicatorStyle.top=t+"px")},_pos:function(e,t){0>e?e=0:e>this.maxPosX&&(e=this.maxPosX),0>t?t=0:t>this.maxPosY&&(t=this.maxPosY),e=this.options.listenX?i.round(e/this.sizeRatioX):this.scroller.x,t=this.options.listenY?i.round(t/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(e,t)},fade:function(e,t){if(!t||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var i=e?250:500,a=e?0:300;e=e?"1":"0",this.wrapperStyle[r.style.transitionDuration]=i+"ms",this.fadeTimeout=setTimeout(function(e){this.wrapperStyle.opacity=e,this.visible=+e}.bind(this,e),a)}}},a.utils=r,"undefined"!=typeof module&&module.exports?module.exports=a:e.IScroll=a}(window,document,Math),!function(e,t){
function i(){var t=o.getBoundingClientRect().width;t/c>540&&(t=540*c);var i=t/10;o.style.fontSize=i+"px",d.rem=e.rem=i}var a,s=e.document,o=s.documentElement,n=s.querySelector('meta[name="viewport"]'),r=s.querySelector('meta[name="flexible"]'),c=0,l=0,d=t.flexible||(t.flexible={});if(n){console.warn("将根据已有的meta标签来设置缩放比例");var u=n.getAttribute("content").match(/initial\-scale=([\d\.]+)/);u&&(l=parseFloat(u[1]),c=parseInt(1/l))}else if(r){var p=r.getAttribute("content");if(p){var m=p.match(/initial\-dpr=([\d\.]+)/),v=p.match(/maximum\-dpr=([\d\.]+)/);m&&(c=parseFloat(m[1]),l=parseFloat((1/c).toFixed(2))),v&&(c=parseFloat(v[1]),l=parseFloat((1/c).toFixed(2)))}}if(!c&&!l){var g=(e.navigator.appVersion.match(/android/gi),e.navigator.appVersion.match(/iphone/gi)),h=e.devicePixelRatio;c=g?h>=3&&(!c||c>=3)?3:h>=2&&(!c||c>=2)?2:1:1,l=1/c}if(o.setAttribute("data-dpr",c),!n)if(n=s.createElement("meta"),n.setAttribute("name","viewport"),n.setAttribute("content","initial-scale="+l+", maximum-scale="+l+", minimum-scale="+l+", user-scalable=no"),o.firstElementChild)o.firstElementChild.appendChild(n);else{var f=s.createElement("div");f.appendChild(n),s.write(f.innerHTML)}e.addEventListener("resize",function(){clearTimeout(a),a=setTimeout(i,300)},!1),e.addEventListener("pageshow",function(e){e.persisted&&(clearTimeout(a),a=setTimeout(i,300))},!1),"complete"===s.readyState?s.body.style.fontSize=12*c+"px":s.addEventListener("DOMContentLoaded",function(){s.body.style.fontSize=12*c+"px"},!1),i(),d.dpr=e.dpr=c,d.refreshRem=i,d.rem2px=function(e){var t=parseFloat(e)*this.rem;return"string"==typeof e&&e.match(/rem$/)&&(t+="px"),t},d.px2rem=function(e){var t=parseFloat(e)/this.rem;return"string"==typeof e&&e.match(/px$/)&&(t+="rem"),t}}(window,window.lib||(window.lib={})),angular.module("shop").run(["$templateCache",function(e){e.put("app/anotherPay/anotherPay.html",'<div class="warpAnotherPay"><div class="pay_header"><img src="{{vm.orderDetail.curr_user_info.avatar}}"><p class="nickname" ng-if="vm.orderDetail.curr_user_info.is_order_user"><span>{{vm.orderDetail.curr_user_info.nickname}}</span> 发给朋友的代付邀请</p><p class="nickname" ng-if="!vm.orderDetail.curr_user_info.is_order_user"><span>{{vm.orderDetail.curr_user_info.nickname}}</span> 请你帮忙代付一笔订单</p></div><div class="pay_content"><div class="pay_money" ng-if="vm.orderDetail.order_status==\'待付款\'"><i class="pay_value">付款金额</i><p class="totalmoney">{{vm.orderDetail.dai_pay_total_amount| currency:\'￥\':\'2\'}}</p></div><dl class="pay_guide" ng-if="vm.orderDetail.order_status==\'待付款\'"><dt>好友代付说明</dt><dd><p>1、代付发起后{{vm.orderCancelMinute}}分钟内无人付款，订单将自动取消。</p><p>2、如果订单申请退款，已支付金额将原路退还代付人。</p><p style="font-weight:bold;color:red">3、付款前请您务必和好友再次确认，避免遇到诈骗行为。</p></dd></dl><div class="pay_money" ng-if="vm.orderDetail.order_status==\'已取消\'"><i class="pay_value colorGray">已取消</i><p class="totalmoney">{{vm.orderDetail.dai_pay_total_amount| currency:\'￥\':\'2\'}}</p></div><dl class="pay_guide" ng-if="vm.orderDetail.order_status==\'已取消\'"><dt>好友代付说明</dt><dd><p>1、代付发起后{{vm.orderCancelMinute}}分钟内无人付款，订单将自动取消。</p><p>2、如果订单申请退款，已支付金额将原路退还代付人。</p><p style="font-weight:bold;color:red">3、付款前请您务必和好友再次确认，避免遇到诈骗行为。</p></dd></dl><div class="pay_money" ng-if="vm.orderDetail.order_status==\'待发货\'"><i class="pay_value_blue">已付款</i><p class="totalmoney">{{vm.orderDetail.dai_pay_total_amount| currency:\'￥\':\'2\'}}</p></div><div class="Height15" ng-if="vm.orderDetail.order_status==\'待发货\'"></div><div class="pay_userinfo" ng-if="vm.orderDetail.order_status==\'待发货\'"><div class="dai_border">代付人信息</div><div class="warp_userinfo"><div class="userinfo_img"><img src="{{vm.orderDetail.pay_user_info.avatar}}"></div><ul class="warp_ul"><li class="li_color">代付人:<span class="span_color">{{vm.orderDetail.pay_user_info.nickname}}</span></li><li class="li_color">代付时间:<span class="span_color">{{vm.orderDetail.pay_user_info.pay_time| date:\'yyyy年MM月dd日 HH:mm\'}}</span></li><li class="li_status_color">代付成功</li></ul></div></div></div><div class="Height15"></div><div class="pay_order"><div class="pay_order_head"><div class="product_title">商品信息</div><div class="product_count">共{{vm.orderDetail.product_count}}件</div></div><div class="pay_order_goods"><a ui-sref="productDetail({id:item.product_id})" class="product_item" ng-repeat="item in vm.orderDetail.product_list"><img src="{{item.img_url}}"><h4>{{item.product_name}} {{item.show_property}}</h4><p><em>{{item.price| currency:\'￥\':\'2\'}}</em>{{item.count}}件</p></a></div><ul class="pay_order_list"><li id="username"><span>收货人姓名：</span> {{vm.orderDetail.receiver_name}}</li><li id="address"><span>收货人地址：</span>{{vm.orderDetail.receiver_address}}</li><li id="phonenum"><span>联系方式：</span> {{vm.orderDetail.receiver_phone}}</li></ul><ul class="pay_user_info" ng-show="(vm.orderDetail.curr_user_info||vm.orderDetail.pay_user_info)&&(vm.orderDetail.other_use_amount>0||vm.orderDetail.other_card_coupon_dis_amount>0)&&vm.orderDetail.order_status==\'待付款\'"><li ng-show="vm.orderDetail.other_use_amount>0"><span>代付人已支付余额</span> {{vm.orderDetail.other_use_amount| currency:\'￥\':\'2\'}}</li><li ng-show="vm.orderDetail.other_card_coupon_dis_amount>0"><span>储值卡已支付余额</span>{{vm.orderDetail.other_card_coupon_dis_amount| currency:\'￥\':\'2\'}}</li></ul></div><div class="pay_type" ng-if="!vm.orderDetail.curr_user_info.is_order_user&&vm.orderDetail.order_status==\'待付款\'&&!vm.orderDetail.pay_user_info"><div class="warp_pay_content"><div class="pay_account" ng-if="vm.needAmount>0 || vm.isAcountChecked"><div class="account_text">使用余额(共有{{vm.userInfo.account_amount}}元)</div><svg class="icon font18 floatR" aria-hidden="true" ng-click="vm.acountExtend=!vm.acountExtend" ng-show="vm.acountExtend"><use xlink:href="#icon-jiahao"></use></svg><svg class="icon font18 floatR" aria-hidden="true" ng-click="vm.acountExtend=!vm.acountExtend" ng-show="!vm.acountExtend"><use xlink:href="#icon-jianhao"></use></svg><div class="clear-both"></div><div ng-show="!vm.acountExtend" style="float: left; height: 20px; line-height: 20px; margin-top: 10px;" aria-hidden="false" class=""><label class="floatL account-score" for="leftmoney" ng-show="!vm.acountExtend" aria-hidden="false" style=""><input class="account-checkbox ng-pristine ng-untouched ng-valid" type="checkbox" id="leftmoney" ng-model="vm.isAcountChecked" ng-change="vf.acountChange()" style="margin-bottom:4px;" aria-checked="false" aria-invalid="false"> <span class="font16 ng-binding">可用{{vm.needAmount}}元</span></label></div><div class="font16 floatR ng-binding" ng-show="!vm.acountExtend" style="margin-top: 10px;" aria-hidden="false">抵{{vm.needAmount}}元</div><div class="clear-both"></div></div><div class="warp-card" ng-show="(vm.orderDetail.total_amount - vm.useAcount>0 )|| vm.cardAcount>0"><div class="account-item coupon-item"><check-coupon order-total-price="vm.totalPay" order-skus="vm.orderSkus" checked-coupon-info="checkedCouponInfo" order-type="vm.currOrderType" group-type="vm.groupType" show-name="vm.showName" check-amount="vf.checkAmount"></check-coupon></div></div><div class="account-item" ng-show="vm.orderDetail.order_status==\'待付款\'"><div class="total_account"><div class="floatL font16"><strong>支付总金额</strong></div><div class="floatR font16 red">{{vm.totalPay | currency:\'￥\':\'2\'}}</div><div class="clear-both"></div></div></div></div></div><div class="pay_fixbtn" ng-if="vm.orderDetail.curr_user_info.is_order_user"><div class="mod_btns" ng-if="vm.orderDetail.order_status==\'待付款\'&& !vm.orderDetail.pay_user_info"><a href="javascript:;" ng-click="vf.sendFriends()" class="mod_btn bg_12">发送给朋友</a></div><div class="mod_btns" ng-if="vm.orderDetail.order_status==\'已取消\'||vm.orderDetail.order_status==\'待发货\'"><a href="javascript:;" ng-click="vf.gotoOrderDetail()" class="mod_btn bg_12">查看订单详情</a></div><div class="mod_btns" ng-if="vm.orderDetail.order_status==\'待付款\' && vm.orderDetail.pay_user_info"><a href="javascript:;" class="mod_btn bg_12">{{vm.orderDetail.pay_user_info.nickname}}代付中(未完成)</a></div><div class="mod_btns" ng-if="vm.orderDetail.order_status==\'待付款\'&&vm.orderDetail.pay_user_info&&vm.orderDetail.other_card_coupon_dis_amount<=0&&vm.orderDetail.other_use_amount<=0"><a href="javascript:;" ng-click="vf.CancelUpdate()" class="mod_btn bg_12">取消代付</a></div></div><div class="pay_fixbtn" ng-if="vm.orderDetail.pay_user_info&&vm.orderDetail.pay_user_info.is_pay_user"><div class="mod_btns" ng-if="vm.orderDetail.order_status==\'已取消\'"><a href="javascript:;" class="mod_btn bg_12 colorGray">订单已取消</a></div><div class="mod_btns" ng-if="vm.orderDetail.order_status==\'待发货\'"><a href="javascript:;" ng-click="vf.gotoIndexPage()" class="mod_btn bg_12 themeBackground">逛逛商城</a></div><div class="mod_btns" ng-if="vm.orderDetail.order_status==\'待付款\' && vm.orderDetail.pay_user_info && !vm.orderDetail.pay_user_info.is_pay_user"><a href="javascript:;" class="mod_btn bg_12">{{vm.orderDetail.pay_user_info.nickname}}代付中(未完成)</a></div><div class="mod_btns" ng-if="vm.orderDetail.order_status==\'待付款\' && vm.orderDetail.pay_user_info && vm.orderDetail.pay_user_info.is_pay_user"><a href="javascript:;" ng-click="vf.paySubmit()" class="mod_btn bg_12 themeBackground">立即支付</a></div><div class="mod_btns" ng-if="vm.orderDetail.order_status==\'待付款\'&&vm.orderDetail.pay_user_info&&vm.orderDetail.pay_user_info.is_pay_user&&vm.orderDetail.other_card_coupon_dis_amount<=0&&vm.orderDetail.other_use_amount<=0"><a href="javascript:;" ng-click="vf.CancelUpdate()" class="mod_btn bg_12">取消代付</a></div></div><div class="pay_fixbtn" ng-if="!vm.orderDetail.curr_user_info.is_order_user&&!vm.orderDetail.pay_user_info.is_pay_user"><div class="mod_btns" ng-if="vm.orderDetail.order_status==\'已取消\'"><a href="javascript:;" class="mod_btn bg_12 colorGray">订单已取消</a></div><div class="mod_btns" ng-if="vm.orderDetail.order_status==\'待发货\'"><a href="javascript:;" ng-click="vf.gotoIndexPage()" class="mod_btn bg_12 themeBackground">逛逛商城</a></div><div class="mod_btns" ng-if="vm.orderDetail.order_status==\'待付款\' && vm.orderDetail.pay_user_info && !vm.orderDetail.pay_user_info.is_pay_user"><a href="javascript:;" class="mod_btn bg_12">{{vm.orderDetail.pay_user_info.nickname}}代付中(未完成)</a></div><div class="mod_btns" ng-if="vm.orderDetail.order_status==\'待付款\' && !vm.orderDetail.pay_user_info"><a href="javascript:;" ng-click="vf.paySubmit()" class="mod_btn bg_12 themeBackground">立即支付</a></div></div><div pay-panel="" parms="vm.payPanel" pay-scuss="vf.dealPayScuss" pay-error="vf.dealPayError" show-close="false"></div></div><div ng-show="vm.showShare" ng-style="{\'height\':vm.i_height+\'px\'}" style="width: 100%; background: #000; opacity: 0.7; position: fixed; top: 0; left: 0; z-index: 999999; text-align: right;" ng-click="vm.showShare=false">&nbsp;</div><div ng-show="vm.showShare" style="position: fixed; z-index: 1000000; right: 0; top: 0; width: 100%; text-align: right;" ng-click="vm.showShare=false"><img src="http://comeoncloud-static.oss-cn-hangzhou.aliyuncs.com/img/sharetip.png" width="100%"></div>'),e.put("app/bindPhone/bindPhone.html",'<div class="loginConfig-warp" ng-style="{\'background-image\':\'url(\'+vm.loginPageConfig.page_bgimg+\')\',\'height\':\'\'+vm.height+\'px\'}"><div class="wrapBindPhone regStyle" ng-if="vm.loginPageConfig.first_show==1"><div class="header-bar" ng-if="vm.regConfig.reg_show_head==1 && (sysConfig.malll.is_customize_mall_head == 0 || (sysConfig.malll.is_customize_mall_head==2 && !isPlus))"><go-back></go-back><div class="header-title">注册</div><a href="javascript:void(0);" class="btnBackHomeRight" ng-click="vf.goHome()"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shouye"></use></svg></a><div class="clear-both"></div></div><div customize-mall-head="" ng-if="vm.regConfig.reg_show_head==1 && !(sysConfig.malll.is_customize_mall_head == 0 || (sysConfig.malll.is_customize_mall_head==2 && !isPlus))"></div><div class="list" ng-style="{\'padding-top\':\'{{vm.regConfig.reg_dis_head}}%\'}"><label class="item item-input phone-item" ng-style="vm.borderColorStyle2" ng-class="{\'item1\':vm.regConfig.reg_def_border==1,\'item2\':vm.regConfig.reg_text_bgcolor_istmd==1}"><input type="number" placeholder="手机号" ng-maxlength="11" ng-model="vm.phone"></label> <label class="item item-input phoneInput" ng-style="vm.borderColorStyle2" ng-class="{\'item1\':vm.regConfig.reg_def_border==1,\'item2\':vm.regConfig.reg_text_bgcolor_istmd==1}"><input type="number" ng-maxlength="6" placeholder="验证码" ng-model="vm.code"> <a href="javascript:;" class="button button-small" ng-class="{\'button-positive themeBackgroundColor themeBorderColor\':!vm.isShowWait&&!vm.codeColor}" ng-style="vm.codeColor" ng-click="vf.getSMSCode()"><span ng-hide="vm.isShowWait">点击获取</span> <span ng-show="vm.isShowWait">{{vm.waitTime}}s</span></a></label> <label class="item item-input" ng-if="vm.regConfig.reg_show_pwd_border==1" ng-style="vm.borderColorStyle2" ng-class="{\'item1\':vm.regConfig.reg_def_border==1,\'item2\':vm.regConfig.reg_text_bgcolor_istmd==1}"><input type="password" placeholder="密码" ng-maxlength="30" ng-model="vm.password"></label></div><div class="wrapOpeate"><a href="javascript:;" class="button button-block button-positive" ng-style="vm.buttonStyle2" ng-class="{\'themeBackgroundColor themeBorderColor\': !vm.regConfig.reg_btn_color}" ng-click="vf.bindPhone()"><span ng-show="!vm.regConfig.reg_btn_text">注 册</span> <span ng-show="vm.regConfig.reg_btn_text">{{vm.regConfig.reg_btn_text}}</span></a></div><div class="wrapMore" ng-if="vm.regConfig.reg_show_login==1"><div class="more-left"><span class="to-link" ng-click="vf.goLogin()">去登陆</span></div><div class="more-right"><span class="to-link" ng-click="vf.goForgetPassword()">忘记密码</span></div></div></div><div class="wrapBindPhone loginStyle" ng-if="vm.loginPageConfig.first_show==0"><div class="header-bar" ng-if="vm.loginConfig.login_show_head==1 && (sysConfig.malll.is_customize_mall_head == 0 || (sysConfig.malll.is_customize_mall_head==2 && !isPlus))"><go-back></go-back><div class="header-title">登录</div><a href="javascript:void(0);" class="btnBackHomeRight" ng-click="vf.goHome()"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shouye"></use></svg></a><div class="clear-both"></div></div><div customize-mall-head="" ng-if="vm.loginConfig.login_show_head==1 && !(sysConfig.malll.is_customize_mall_head == 0 || (sysConfig.malll.is_customize_mall_head==2 && !isPlus))"></div><div class="list" ng-style="{\'padding-top\':vm.loginConfig.login_dis_head?vm.loginConfig.login_dis_head+\'%\':\'\'}"><label class="item item-input phoneInput" ng-class="{\'item1\':vm.loginConfig.login_def_border==\'1\',\'item2\':vm.loginConfig.login_text_bgcolor_istmd==1}" ng-style="vm.borderColorStyle"><input type="number" placeholder="请输入手机号" ng-maxlength="11" ng-model="vm.phone"></label> <label class="item item-input" ng-class="{\'item1\':vm.loginConfig.login_def_border==\'1\',\'item2\':vm.loginConfig.login_text_bgcolor_istmd==1}" ng-style="vm.borderColorStyle"><input type="password" placeholder="请输入密码" ng-model="vm.password"></label></div><div class="wrapOpeate"><a href="javascript:;" class="button button-block button-positive" ng-style="vm.buttonStyle" ng-class="{\'themeBackgroundColor themeBorderColor\': !vm.loginConfig.login_btn_color}" ng-click="vf.login()"><span ng-if="vm.loginConfig.login_btn_text">{{vm.loginConfig.login_btn_text}}</span> <span ng-if="!vm.loginConfig.login_btn_text">登录</span></a></div><div class="wrapMore" ng-if="vm.loginConfig.login_show_reg==1"><div class="more-left"><span class="to-link" ng-click="vf.goRegister()">点击注册</span></div><div class="more-right"><span class="to-link" ng-click="vf.goForgetPassword()">忘记密码</span></div></div><div class="OauthLine" ng-if="isPlus"><div class="OauthLine-text" ng-style="{\'background-color\':\'rgba(255,255,255,0)\'}">授权登陆</div><div class="OauthLine-line"></div></div><div class="OauthApp" id="divOauthApp" ng-if="isPlus"><div class="OauthApp-li" ng-click="vf.oAuthLogin(\'weixin\')"><img class="OauthApp-img" src="//static-files.socialcrmyun.com/img/weixin.png"></div></div></div></div>'),e.put("app/collectList/collectList.html",'<div class="header-bar" ng-if="(sysConfig.malll.is_customize_mall_head == 0 || (sysConfig.malll.is_customize_mall_head==2 && !isPlus))"><go-back></go-back><div class="header-title">我的收藏</div><div class="bug-car" ui-sref="shopBasket"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-gouwuche"></use></svg><div class="card_nums" ng-if="is_shownums">{{shop_nums}}</div></div><div class="clear-both"></div></div><div customize-mall-head="" ng-if="!(sysConfig.malll.is_customize_mall_head == 0 || (sysConfig.malll.is_customize_mall_head==2 && !isPlus))"></div><div class="product-list-search" ng-if="showmoresearch"><select class="select-box" ng-model="mycolor" ng-options="colorlist.prop_name for colorlist in colorlistData" ng-change="whichcolor(mycolor)"></select><select class="select-box" ng-model="mysize" ng-options="sizelist.prop_name for sizelist in sizelistData" ng-change="whichsize(mysize)"></select></div><div class="product-list" ng-if="!showLinks" scroll-bottom-bind="loadMoreData()"><div class="row row-wrap"><product-box wechat-click="goProductDetail(productItem)" ng-repeat="productItem in productListData" class="col-50"></product-box></div><div class="clear-both"></div><div class="nomoreorder" ng-if="nodata">没有更多收藏了额~</div><div class="nomoreorder" ng-if="!nodata">数据加载中~</div></div><div ng-if="showLinks" class="emptybasket"><div class="emptyicon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-yiguanzhu"></use></svg></div><h4 class="font20 color31">&nbsp;您还没有任何收藏</h4><div class="gotopro"><a href="#/productList" class="font16">去逛逛</a></div></div>'),e.put("app/couponDetail/couponDetail.html",'<div class="coupon-detail"><div class="shareimg" ng-click="vf.hideShareImg()"></div><div class="new-coupons"><div class="new-coupon" on-finish-render-filters="" ng-class="{\'invalida\':!vm.couponDetailData.valid||vm.couponState==1}"><div class="coupon-type" ng-if="vm.couponDetailData.cardcoupon_type==3" ng-class="{\'invalidc\':!vm.couponDetailData.valid||vm.couponState==1}">满减券</div><div class="coupon-type" ng-if="vm.couponDetailData.cardcoupon_type==2" ng-class="{\'invalidc\':!vm.couponDetailData.valid||vm.couponState==1}">免邮券</div><div class="coupon-type" ng-if="vm.couponDetailData.cardcoupon_type==1" ng-class="{\'invalidc\':!vm.couponDetailData.valid||vm.couponState==1}">现金券</div><div class="coupon-type" ng-if="vm.couponDetailData.cardcoupon_type==0" ng-class="{\'invalidc\':!vm.couponDetailData.valid||vm.couponState==1}">折扣券</div><div class="coupon-type" ng-if="vm.couponDetailData.cardcoupon_type==4" ng-class="{\'invalidc\':!vm.couponDetailData.valid||vm.couponState==1}">满送券</div><div class="coupon-content"><div class="coupon-left" ng-if="vm.couponDetailData.cardcoupon_type==0"><span class="big-word">{{vm.couponDetailData.discount}}</span> 折</div><div class="coupon-left" ng-if="vm.couponDetailData.cardcoupon_type==1">￥<span class="big-word">{{vm.couponDetailData.deductible_amount}}</span></div><div class="coupon-left" ng-if="vm.couponDetailData.cardcoupon_type==2"><span class="big-word">免邮</span></div><div class="coupon-left" ng-if="vm.couponDetailData.cardcoupon_type==3">￥<span class="big-word">{{vm.couponDetailData.buckle_sub_amount}}</span></div><div class="coupon-center"><div class="title">{{vm.couponDetailData.cardcoupon_name}}</div><div class="desc" ng-if="vm.couponDetailData.cardcoupon_type==0">使用无金额限制</div><div class="desc" ng-if="vm.couponDetailData.cardcoupon_type==1">使用无金额限制</div><div class="desc" ng-if="vm.couponDetailData.cardcoupon_type==2">满{{vm.couponDetailData.freefreight_amount}}元可用</div><div class="desc" ng-if="vm.couponDetailData.cardcoupon_type==3">满{{vm.couponDetailData.buckle_amount}}元可用</div><div class="desc" ng-if="vm.couponDetailData.cardcoupon_type==4">满{{vm.couponDetailData.buckle_amount}}送{{vm.couponDetailData.buckle_sub_amount}}</div><div ng-if="vm.couponDetailData.expire_time_type!=\'1\'" class="time">{{vm.couponDetailData.valid_from}}-{{vm.couponDetailData.valid_to}}</div><div ng-if="vm.couponDetailData.expire_time_type==\'1\'" class="time">领取后{{vm.couponDetailData.expire_day}}天过期</div></div><div class="coupon-right"></div><div class="clear-both"></div></div><div class="coupon-desc" ng-class="{\'invalidb\':!vm.couponDetailData.valid||vm.couponState==1}" ng-if="vm.couponDetailData.limit_type==\'\'">全商品：任意商品可使用</div><div class="coupon-desc" ng-class="{\'invalidb\':!vm.couponDetailData.valid||vm.couponState==1}" ng-if="vm.couponDetailData.limit_type==\'0\'">限商品：只限单个商品使用</div><div class="coupon-desc" ng-class="{\'invalidb\':!vm.couponDetailData.valid||vm.couponState==1}" ng-if="vm.couponDetailData.limit_type==\'1\'">限商品：只限{{vm.couponDetailData.product_tags}}商品使用</div><div class="big-white-circle-left"></div><div class="big-white-circle-right"></div><div class="small-white-circle-wrap"></div><img src="assets/images/yishiyong.png" class="invalid-img" ng-show="vm.couponState==1&&vm.couponDetailData.valid==true"> <img src="assets/images/yiguoqi.png" class="invalid-img" ng-show="vm.couponDetailData.valid==false&&vm.couponState==0"></div></div><div class="white-bar"></div><div class="more-info"><div class="title">更多说明</div><ul class="content"><li ng-if="vm.couponDetailData.limit_type==\'\'">●&nbsp;&nbsp; 任意商品可使用</li><li ng-if="vm.couponDetailData.limit_type==\'0\'">●&nbsp;&nbsp; 只限单个商品使用</li><li ng-if="vm.couponDetailData.limit_type==\'1\'">●&nbsp;&nbsp; 只限{{vm.couponDetailData.product_tags}}商品使用</li><li ng-if="vm.couponDetailData.cardcoupon_type==3">●&nbsp;&nbsp; 满{{vm.couponDetailData.buckle_amount}}元可用</li><li ng-if="vm.couponDetailData.expire_time_type!=\'1\'">●&nbsp;&nbsp; 使用日期：{{vm.couponDetailData.valid_from}}&nbsp;至&nbsp;{{vm.couponDetailData.valid_to}}</li><li ng-if="vm.couponDetailData.expire_time_type==\'1\'">●&nbsp;&nbsp; 使用日期：领取后{{vm.couponDetailData.expire_day}}天内</li><div class="clear-both"></div></ul><div class="clear-both"></div></div><div class="white-bar"></div><div class="btn-wrap"><a href="javascript:zcToUrl(\'/customize/comeoncloud/Index.aspx?key=MallHome\');" class="cp_bt letterSpacing4" ng-show="vm.couponDetailData.is_recivece == 1&&vm.overDue<0&&vm.couponState==0">去商城使用</a><div class="cp_bt invalida letterSpacing4" ng-show="vm.couponDetailData.is_recivece == 0||vm.overDue>0||vm.couponState==1">去商城使用</div><div class="bt-desc" ng-if="vm.couponState!=2">查看可购买商品并使用此券</div><div id="btnShowOfflineConfirm" ng-if="vm.showWrapOfflineConfirm" class="cp_bt mTop10 letterSpacing4" ng-show="vm.couponDetailData.is_recivece == 1&&vm.overDue<0&&vm.couponState==0" ng-click="vf.showOfflineConfirm()">线下核销</div><div id="wrapOfflineConfirm" ng-if="vm.showWrapOfflineConfirm" class="cp_bt mTop10"><input type="password" placeholder="请输入核销码进行核销" ng-model="vm.offlineConfirmCode"><div id="btnOfflineConfirm" ng-click="vf.offlineConfirm()">核销</div></div><div class="cp_bt mTop10 letterSpacing4" ng-if="vm.couponInfo.is_can_give && vm.couponState==0&& vm.couponDetailData" ng-click="vf.getCouponUrlBtn()">转赠给好友</div><div ng-if="vm.couponState==2"><div class="receive"><span class="floatL">看看是谁收了我的转赠</span></div><div class="receiveImg"><div class="oderlistcontent"><img class="orderlistimg receive-person" ng-src="{{vm.couponInfo.to_user_info.head_img_url}}"><div class="title"><span class="floatL ng-binding" style="width: 70%;overflow: hidden;" ng-bind="vm.couponInfo.to_user_info.nick_name"></span></div></div></div></div><div ng-if="vm.couponInfo.from_user_info!=null"><div class="receive"><span class="floatL">看看是谁给我的转赠</span></div><div class="receiveImg"><div class="oderlistcontent"><img class="orderlistimg receive-person" ng-src="{{vm.couponInfo.from_user_info.head_img_url}}"><div class="title"><span class="floatL ng-binding" style="width: 70%;overflow: hidden;" ng-bind="vm.couponInfo.from_user_info.nick_name"></span></div></div></div></div></div></div>'),e.put("app/createOrder/createOrder.html",'<div class="create-order"><div class="header-bar"><go-back></go-back><div class="header-title">订单信息</div><div class="bug-car" ui-sref="shopBasket"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-gouwuche"></use></svg><div class="card_nums" ng-if="is_shownums">{{shop_nums}}</div></div><div class="clear-both"></div></div><div class="order-item-title">寄送地址：</div><div class="order-item-title">支付方式 ：微信支付</div><div class="product-item-detail" ng-if="0"><div class="pay-img"><img src="assets/images/zhifubao.png"></div><div class="pay-txt">支付宝</div><div class="clear-both"></div></div><div class="order-item-title">商品：</div><div class="product-item-detail" ng-repeat="item in orderProducts"><div class="product-item-img"><img ng-src="{{item.img_url}}"></div><div class="product-item-txt"><div class="font14">{{item.title}}</div><div class="font14">{{item.properties}}</div><div class="font13">数量：{{item.num}}</div><div class="product-num-wrap" ng-if="groupType==undefined"><svg class="icon product-num-del" aria-hidden="true" ng-click="delNum(item)"><use xlink:href="#icon-jian"></use></svg><input type="input" class="product-num" ng-model="item.num" ng-change="checknum(item)" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}"><svg class="icon product-num-add" aria-hidden="true" ng-click="addNum(item)"><use xlink:href="#icon-jia"></use></svg></div><div class="product-item-price"><div class="line-through">{{item.quote_price * item.num|currency:"￥":2}}</div><div><span ng-show="item.price">{{item.price * item.num|currency:"￥":2}}</span> <span ng-show="item.score"><span ng-show="item.price">+</span> <span>{{item.score * item.num}}</span> <span>积分</span></span></div></div></div><div class="clear-both"></div></div><div style="margin:0 2px;border-bottom: 1px solid #ebebeb;"><check-coupon order-total-price="orderProducts.productsTotalPrice" order-skus="orderSkus" checked-coupon-info="checkedCouponInfo"></check-coupon></div><div class="order-item-title">预计产生的运费：{{freight|currency:"￥":2}}</div></div><div class="bt-wrap"><div class="submitorderL"><div class="allpaymoneyL"><strong>支付总金额</strong></div><div class="allpaymoneyR"><span class="red font18" ng-if="!checkedCouponInfo" ng-bind="orderProducts.productsTotalPrice | currency:\'￥\':\'2\'"></span><span class="red font18" ng-if="checkedCouponInfo.cardcoupon_type==3&&(orderProducts.productsTotalPrice>=checkedCouponInfo.buckle_amount)" ng-bind="orderProducts.productsTotalPrice - checkedCouponInfo.buckle_sub_amount | currency:\'￥\':\'2\'"></span><span class="red font18" ng-if="checkedCouponInfo.cardcoupon_type==0" ng-bind="orderProducts.productsTotalPrice*checkedCouponInfo.discount/10 | currency:\'￥\':\'2\'"></span><span class="red font18" ng-if="checkedCouponInfo.cardcoupon_type==1&&orderProducts.productsTotalPrice>=checkedCouponInfo.deductible_amount" ng-bind="orderProducts.productsTotalPrice - checkedCouponInfo.deductible_amount | currency:\'￥\':\'2\'"></span><span class="red font18" ng-if="checkedCouponInfo.cardcoupon_type==1&&orderProducts.productsTotalPrice<checkedCouponInfo.deductible_amount" ng-bind="orderProducts.productsTotalPrice - orderProducts.productsTotalPrice | currency:\'￥\':\'2\'"></span><span class="red font18" ng-if="checkedCouponInfo.cardcoupon_type==2" ng-bind="orderProducts.productsTotalPrice - freight | currency:\'￥\':\'2\'"></span></div></div><div class="submitorderR" ng-click="submitOrderAndPay()">确认</div></div>'),e.put("app/createOrder/createOrderNew.html",'<div class="create-order-new"><div class="header-bar" ng-if="(sysConfig.malll.is_customize_mall_head == 0 || (sysConfig.malll.is_customize_mall_head==2 && !isPlus))"><go-back></go-back><div class="header-title">订单信息</div><div class="bug-car" ui-sref="shopBasket"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-gouwuche"></use></svg><div class="card_nums" ng-if="vm.is_shownums">{{shop_nums}}</div></div><div class="clear-both"></div></div><div customize-mall-head="" ng-if="!(sysConfig.malll.is_customize_mall_head == 0 || (sysConfig.malll.is_customize_mall_head==2 && !isPlus))"></div><div ng-show="!vm.is_no_express" class="wrapAddress themeBorderColor" ng-style="{\'top\':\'44px\'}"><div class="order-item-title" ng-if="vm.isShowAddress">寄送地址：</div><div select-address="" isgivegift="{{vm.isShowAddress}}" address-info="addressData" customize="false" address-id="vm.addressId"></div></div><div ng-show="!vm.is_no_express" class="wrapAddressBlock" ng-style="{\'height\':!(sysConfig.malll.is_customize_mall_head == 0 || (sysConfig.malll.is_customize_mall_head==2 && !isPlus))?\'68px\':\'110px\'}">&nbsp;</div><div ng-show="vm.is_no_express && vm.is_need_name_phone"><div class="order-item-title"><span class="floatL">姓名 ：</span> <input class="floatL width200 mTop3" type="text" ng-model="addressData.consigneename"><div class="clear-both"></div></div><div class="order-item-title"><span class="floatL">手机 ：</span> <input class="floatL width200 mTop3" type="text" maxlength="11" ng-model="addressData.phone"><div class="clear-both"></div></div></div><div style="padding-left: 4px;margin:0 12px; margin-top:30px; border-bottom: 1px solid #ddd;" ng-show="vm.isNeedClaimArrivalTime == 1"><ul class="ulRow"><li class="claimArrivalTimeTitle"><span class="red">*</span>&nbsp;送达日期：</li><li><input readonly="" id="claimArrivalTimeInput" onfocus="this.blur();" class="claimArrivalTimeInput" type="text" placeholder="请选择送达日期"></li></ul><div class="Clear"></div></div><div ng-show="vm.groupConfig.is_show_name_phone"><div style="padding-left: 4px;margin:0 12px; margin-top:30px; border-bottom: 1px solid #ddd;"><ul class="ulRow"><li class="claimArrivalTimeTitle"><span class="red">*</span>&nbsp;{{vm.rname}}姓名：</li><li><input type="text" ng-model="vm.customCreaterName" placeholder="请输入{{vm.rname}}姓名"></li></ul><div class="Clear"></div></div><div style="padding-left: 4px;margin:0 12px; margin-top:30px; border-bottom: 1px solid #ddd;"><ul class="ulRow"><li class="claimArrivalTimeTitle"><span class="red">*</span>&nbsp;{{vm.rname}}手机：</li><li><input type="text" ng-model="vm.customCreaterPhone" placeholder="请输入{{vm.rname}}手机"></li></ul><div class="Clear"></div></div></div><div style="padding-left: 4px;margin:0 12px; margin-top:30px;border-bottom: 1px solid #ddd;"><ul class="ulRow"><li>留言：</li><li><input type="text" ng-model="vm.remark" placeholder="请输入留言内容"></li></ul><div class="Clear"></div></div><div class="product-item-detail" ng-repeat="itemSupplier in vm.orderProductsSort"><div class="order-item-title" ng-if="itemSupplier.supplier_name!=\'\'&&itemSupplier.supplier_name.length>0">{{itemSupplier.supplier_name}}</div><div ng-repeat="item in itemSupplier.product_list"><div class="product-item-img"><img ng-src="{{item.img_url}}?x-oss-process=image/resize,m_pad,h_100,w_100"></div><div class="product-item-txt"><div class="font14 width200 overflow_ellipsis">{{item.title}}</div><div class="font14">{{item.properties}}</div><div class="font13">数量：{{item.num}}</div><div class="product-num-wrap" ng-if="vm.groupType==undefined"><svg class="icon product-num-del" aria-hidden="true" ng-click="vf.delNum(item)"><use xlink:href="#icon-jian"></use></svg><input type="input" class="product-num" ng-model="item.num" ng-change="vf.checknum(item)" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}"><svg class="icon product-num-add" aria-hidden="true" ng-click="vf.addNum(item)"><use xlink:href="#icon-jia"></use></svg></div><div class="product-item-price"><div><span ng-show="item.price">{{item.price * item.num|currency:"￥":2}}</span> <span ng-show="item.score"><span ng-show="item.price">+</span> <span>{{item.score * item.num}}</span> <span>{{score_show_name}}</span></span></div></div></div><div class="clear-both"></div></div></div><div class="account-wrap"><div class="account-item"><div><div class="floatL font16">{{vm.totalnum}} 件商品</div><div class="floatR font16"><span ng-show="vm.realProductTotalPrice">{{vm.realProductTotalPrice|currency:"￥":2}}</span> <span ng-show="vm.realProductTotalScore"><span ng-show="vm.realProductTotalPrice">+</span> <span>{{vm.realProductTotalScore}}</span> <span>{{score_show_name}}</span></span></div><div class="clear-both"></div></div><div style="margin-top:12px;"><div class="floatL font16">运费</div><div class="floatR font16">{{vm.showFreight|currency:"￥":2}}</div><div class="clear-both"></div></div></div><div class="account-item" ng-if="vm.showScore==2 && vm.is_cashpay_only==0 && vm.userInfo.totalscore > 0&&vm.scorePayRedio!=0"><div class="floatL font16">使用{{score_show_name}}抵金额 (共有{{vm.userInfo.totalscore}}{{score_show_name}})</div><svg class="icon font18 floatR" aria-hidden="true" ng-click="vm.extend=!vm.extend" ng-show="vm.extend"><use xlink:href="#icon-jiahao"></use></svg><svg class="icon font18 floatR" aria-hidden="true" ng-click="vm.extend=!vm.extend" ng-show="!vm.extend"><use xlink:href="#icon-jianhao"></use></svg><div class="clear-both"></div><div ng-show="!vm.extend" style="float: left; height: 20px; line-height: 20px; margin-top: 10px;"><label class="floatL account-score" for="pointsid" ng-show="!vm.extend"><input class="account-checkbox" type="checkbox" id="pointsid" ng-model="vm.isChecked" ng-change="vf.acountChange()" style="margin-bottom:4px;"> <span class="font16">可用{{vm.scoreNeed}}{{score_show_name}}</span></label></div><div class="font16 floatR" ng-show="!vm.extend" style="margin-top: 10px;">抵{{vm.cashGet}}元</div><div class="clear-both"></div></div><div class="account-item" ng-if="vm.groupConfig.is_enable_account_amount_pay && vm.userInfo.account_amount > 0"><div class="floatL font16">使用{{vm.groupConfig.account_amount_pay_showname}} (共有{{vm.userInfo.account_amount}}元)</div><svg class="icon font18 floatR" aria-hidden="true" ng-click="vm.acountExtend=!vm.acountExtend" ng-show="vm.acountExtend"><use xlink:href="#icon-jiahao"></use></svg><svg class="icon font18 floatR" aria-hidden="true" ng-click="vm.acountExtend=!vm.acountExtend" ng-show="!vm.acountExtend"><use xlink:href="#icon-jianhao"></use></svg><div class="clear-both"></div><div ng-show="!vm.acountExtend" style="float: left; height: 20px; line-height: 20px; margin-top: 10px;"><label class="floatL account-score" for="leftmoney" ng-show="!vm.acountExtend"><input class="account-checkbox" type="checkbox" id="leftmoney" ng-model="vm.isAcountChecked" ng-change="vf.acountChange()" style="margin-bottom:4px;"> <span class="font16">可用{{vm.useAcount}}元</span></label></div><div class="font16 floatR" ng-show="!vm.acountExtend" style="margin-top: 10px;">抵{{vm.useAcount}}元</div><div class="clear-both"></div></div><div class="account-item coupon-item" ng-show="vm.is_cashpay_only==0"><check-coupon order-total-price="vm.realProductTotalPrice" order-skus="vm.orderSkus" checked-coupon-info="checkedCouponInfo" order-type="vm.currOrderType" group-type="vm.groupType"></check-coupon></div><div class="account-item"><div><div class="floatL font16"><strong>支付总金额</strong></div><div class="floatR font16 red" ng-show="vm.isCouponFreight">{{vm.totalPay | currency:\'￥\':\'2\'}}</div><div class="floatR font16 red" ng-show="!vm.isCouponFreight">{{vm.totalPay+vm.freight | currency:\'￥\':\'2\'}}</div><div class="clear-both"></div></div><div><div class="floatL font16"><strong>支付总{{score_show_name}}</strong></div><div class="floatR font16 red" ng-show="vm.isChecked">{{vm.scoreNeed + vm.realProductTotalScore}}分</div><div class="floatR font16 red" ng-show="!vm.isChecked">{{vm.realProductTotalScore}}分</div><div class="clear-both"></div></div><div style="margin-top:10px;" ng-if="vm.showCash==2"><div class="floatL font16">可获{{score_show_name}}</div><div class="floatR font16">{{vm.scoreGet}}分</div><div class="clear-both"></div><div class="getScoreMsg" ng-bind-html="vm.getScoreMsg" ng-if="vm.getScoreMsg"></div></div></div></div><div pay-panel="" parms="vm.payPanel" pay-scuss="vf.dealPayScuss" pay-error="vf.dealPayError" show-close="false"></div></div><div class="bt-wrap-new"><div class="submitorderL"><div class="allpaymoneyL"><strong>支付</strong></div><div class="allpaymoneyR"><span class="red font18"><span ng-show="vm.isCouponFreight">{{vm.totalPay | currency:\'￥\':\'2\'}}</span> <span ng-show="!vm.isCouponFreight">{{vm.totalPay+vm.freight | currency:\'￥\':\'2\'}}</span> <span ng-show="vm.isChecked && (vm.scoreNeed + vm.realProductTotalScore)">+{{vm.scoreNeed + vm.realProductTotalScore}}{{score_show_name}}</span> <span ng-show="!vm.isChecked && vm.realProductTotalScore">+{{vm.realProductTotalScore}}{{score_show_name}}</span></span></div></div><div class="submitorderR themeBackground" ng-if="!vm.isCanClick" ng-click="vf.submitOrderAndPay()">确认</div><div class="submitorderR bgGrayCCC" ng-if="vm.isCanClick">正在处理中...</div></div>'),
e.put("app/expressInfo/expressInfo.html",'<div class="header-bar"><go-back ng-click="vm.clear_history()"></go-back><div class="header-title">{{vm.title}}</div><div class="clear-both"></div></div><div class="logistics"><div class="compayn"><div class="erty"><div class="name">物流公司： <strong ng-bind="orderinfo.express_company_name"></strong></div><div class="id">运单编号： <span ng-bind="orderinfo.express_number"></span></div></div></div><div class="clear-both"></div><div class="clear-both"></div><div class="statu1"><span class="logisticstext">订单信息</span></div><div class="clear-both"></div><div class="statu2"><div class="oderlistcontent" ng-repeat="product in orderinfo.product_list"><img ng-src="{{product.img_url}}?x-oss-process=image/resize,m_pad,h_140,w_140" alt="" class="orderlistimg"><div class="title"><span class="floatL pdname" ng-bind="product.product_name"></span> <span class="floatR" ng-bind="product.price | currency:\'¥\':2"></span></div><div class="skus"><span class="floatL" ng-bind="product.show_property"></span> <span class="floatR" ng-bind="product.count | currency:\'X\':0"></span></div></div></div><div class="statu1"><span class="logisticstext">物流跟踪</span></div><div class="statu4" ng-if="hasExpressInfo"><ul><li ng-repeat="express in expressdata"><p ng-bind="express.context"></p><p ng-bind="express.time"></p></li></ul></div><div class="statu4" ng-if="!hasExpressInfo"><br><p>亲，目前暂无物流信息,请耐心等候~</p></div></div>'),e.put("app/getOthersCoupon/getOthersCoupon.html",'<div class="wrapGetOthersCoupon"><div class="new-coupons margintop"><div class="new-coupon" ng-class="{\'invalida\':!vm.cp_datas.valid}" ng-click="vf.goToDetail()"><div class="coupon-type" ng-if="vm.cp_datas.cardcoupon_type==3" ng-class="{\'invalidc\':!vm.cp_datas.valid}">满减券</div><div class="coupon-type" ng-if="vm.cp_datas.cardcoupon_type==2" ng-class="{\'invalidc\':!vm.cp_datas.valid}">免邮券</div><div class="coupon-type" ng-if="vm.cp_datas.cardcoupon_type==1" ng-class="{\'invalidc\':!vm.cp_datas.valid}">现金券</div><div class="coupon-type" ng-if="vm.cp_datas.cardcoupon_type==0" ng-class="{\'invalidc\':!vm.cp_datas.valid}">折扣券</div><div class="coupon-content"><div class="coupon-left" ng-if="vm.cp_datas.cardcoupon_type==0"><span class="big-word">{{vm.cp_datas.discount}}</span> 折</div><div class="coupon-left" ng-if="vm.cp_datas.cardcoupon_type==1">￥<span class="big-word">{{vm.cp_datas.deductible_amount}}</span></div><div class="coupon-left" ng-if="vm.cp_datas.cardcoupon_type==2"><span class="big-word">免邮</span></div><div class="coupon-left" ng-if="vm.cp_datas.cardcoupon_type==3">￥<span class="big-word">{{vm.cp_datas.buckle_sub_amount}}</span></div><div class="coupon-center"><div class="title">{{vm.cp_datas.cardcoupon_name}}</div><div class="desc" ng-if="vm.cp_datas.cardcoupon_type==0">使用无金额限制</div><div class="desc" ng-if="vm.cp_datas.cardcoupon_type==1">使用无金额限制</div><div class="desc" ng-if="vm.cp_datas.cardcoupon_type==2">满{{vm.cp_datas.freefreight_amount}}元可用</div><div class="desc" ng-if="vm.cp_datas.cardcoupon_type==3">满{{vm.cp_datas.buckle_amount}}元可用</div><div ng-if="vm.cp_datas.expire_time_type!=\'1\'" class="time">{{vm.cp_datas.valid_from}}-{{vm.cp_datas.valid_to}}</div><div ng-if="vm.cp_datas.expire_time_type==\'1\'" class="time">领取后{{vm.cp_datas.expire_day}}天过期</div></div><div class="coupon-right"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-youjiantou"></use></svg></div><div class="clear-both"></div></div><div class="coupon-desc" ng-class="{\'invalidb\':!vm.cp_datas.valid}" ng-if="vm.cp_datas.limit_type==\'\'">全商品：任意商品可使用</div><div class="coupon-desc" ng-class="{\'invalidb\':!vm.cp_datas.valid}" ng-if="vm.cp_datas.limit_type==\'0\'">限商品：只限单个商品使用</div><div class="coupon-desc" ng-class="{\'invalidb\':!vm.cp_datas.valid}" ng-if="vm.cp_datas.limit_type==\'1\'">限商品：只限{{vm.cp_datas.product_tags}}商品使用</div><div class="big-white-circle-left"></div><div class="big-white-circle-right"></div><div class="small-white-circle-wrap"></div><img src="assets/images/yiguoqi.png" ng-show="!vm.cp_datas.valid" ng-class="{\'invalid-img\':!vm.cp_datas.valid}"></div></div><div ng-show="vm.showalready" class="has_receive"><div class="lineheight30">不要贪心哟~</div><div>您已经领过了</div></div><div ng-show="vm.shownonum" class="has_receive"><div class="lineheight30">阿欧&nbsp;没抢到哦</div><div>手气不佳，攒人品下次再来吧</div></div><div class="getgifttitle clearfix" style="margin:10px 0 0 0"><span class="whogivetext">此转赠来自</span> <span class="whogiveimg"><img ng-src="{{vm.cp_datas.from_user_info.head_img_url}}"></span> <span class="whogivetext" ng-bind="vm.cp_datas.from_user_info.nick_name"></span></div><div ng-if="false"><div class="cp_bt" ng-show="vm.cp_datas.is_recivece == 0&&vm.overDue<0&&vm.shownonum!=true" ng-click="vf.getCouponBtn(vm.cp_datas.cardcoupon_id)">点&nbsp;击&nbsp;领&nbsp;券</div><div class="cp_bt invalida" ng-show="vm.overDue>0&&vm.cp_datas.is_recivece == 0||max_count>0&&vm.cp_datas.un_send_count == 0&&vm.cp_datas.is_recivece == 0">该&nbsp;券&nbsp;不&nbsp;能&nbsp;领&nbsp;取</div><div class="cp_bt invalida marginBottom10" ng-show="vm.cp_datas.is_recivece == 1&&vm.overDue<0">已&nbsp;经&nbsp;领&nbsp;取</div></div><div class="cp_bt marginBottom10" ng-click="vf.getCouponBtn()" ng-show="!vm.cp_datas.is_donation&&vm.overDue<0">点&nbsp;击&nbsp;接&nbsp;收</div><div class="cp_bt invalida marginBottom10" ng-show="vm.cp_datas.is_donation&&vm.overDue<0">已&nbsp;经&nbsp;转&nbsp;赠</div><div class="cp_bt marginTop10" ui-sref="mycoupons">查&nbsp;看&nbsp;优&nbsp;惠&nbsp;券</div></div>'),e.put("app/getcoupon/getcoupon.html",'<div class="lqcontent"><div class="new-coupons margintop"><div class="new-coupon" ng-class="{\'invalida\':!vm.cp_datas.valid}" ng-click="goToDetail();"><div class="coupon-type" ng-if="vm.cp_datas.cardcoupon_type==3" ng-class="{\'invalidc\':!vm.cp_datas.valid}">满减券</div><div class="coupon-type" ng-if="vm.cp_datas.cardcoupon_type==2" ng-class="{\'invalidc\':!vm.cp_datas.valid}">免邮券</div><div class="coupon-type" ng-if="vm.cp_datas.cardcoupon_type==1" ng-class="{\'invalidc\':!vm.cp_datas.valid}">现金券</div><div class="coupon-type" ng-if="vm.cp_datas.cardcoupon_type==0" ng-class="{\'invalidc\':!vm.cp_datas.valid}">折扣券</div><div class="coupon-type" ng-if="vm.cp_datas.cardcoupon_type==4" ng-class="{\'invalidc\':!vm.cp_datas.valid}">满送券</div><div class="coupon-content"><div class="coupon-left" ng-if="vm.cp_datas.cardcoupon_type==0"><span class="big-word">{{vm.cp_datas.discount}}</span> 折</div><div class="coupon-left" ng-if="vm.cp_datas.cardcoupon_type==1">￥<span class="big-word">{{vm.cp_datas.deductible_amount}}</span></div><div class="coupon-left" ng-if="vm.cp_datas.cardcoupon_type==2"><span class="big-word">免邮</span></div><div class="coupon-left" ng-if="vm.cp_datas.cardcoupon_type==3">￥<span class="big-word">{{vm.cp_datas.buckle_sub_amount}}</span></div><div class="coupon-center"><div class="title">{{vm.cp_datas.cardcoupon_name}}</div><div class="desc" ng-if="vm.cp_datas.cardcoupon_type==0">使用无金额限制</div><div class="desc" ng-if="vm.cp_datas.cardcoupon_type==1">使用无金额限制</div><div class="desc" ng-if="vm.cp_datas.cardcoupon_type==2">满{{vm.cp_datas.freefreight_amount}}元可用</div><div class="desc" ng-if="vm.cp_datas.cardcoupon_type==3">满{{vm.cp_datas.buckle_amount}}元减 {{vm.cp_datas.buckle_sub_amount}}元</div><div class="desc" ng-if="vm.cp_datas.cardcoupon_type==4">满{{vm.cp_datas.buckle_amount}}元送 {{vm.cp_datas.buckle_sub_amount}}</div><div ng-if="vm.cp_datas.expire_time_type!=\'1\'" class="time">{{vm.cp_datas.valid_from}}-{{vm.cp_datas.valid_to}}</div><div ng-if="vm.cp_datas.expire_time_type==\'1\'" class="time">领取后{{vm.cp_datas.expire_day}}天过期</div></div><div class="coupon-right"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-youjiantou"></use></svg></div><div class="clear-both"></div></div><div class="coupon-desc" ng-class="{\'invalidb\':!vm.cp_datas.valid}" ng-if="vm.cp_datas.limit_type==\'\'">全商品：任意商品可使用</div><div class="coupon-desc" ng-class="{\'invalidb\':!vm.cp_datas.valid}" ng-if="vm.cp_datas.limit_type==\'0\'">限商品：只限单个商品使用</div><div class="coupon-desc" ng-class="{\'invalidb\':!vm.cp_datas.valid}" ng-if="vm.cp_datas.limit_type==\'1\'">限商品：只限{{vm.cp_datas.product_tags}}商品使用</div><div class="big-white-circle-left"></div><div class="big-white-circle-right"></div><div class="small-white-circle-wrap"></div><img src="assets/images/yiguoqi.png" ng-show="!vm.cp_datas.valid" ng-class="{\'invalid-img\':!vm.cp_datas.valid}"></div></div><div ng-show="vm.showalready" class="has_receive"><div class="lineheight30">不要贪心哟~</div><div>您已经领过了</div></div><div ng-show="vm.shownonum" class="has_receive"><div class="lineheight30">阿欧&nbsp;没抢到哦</div><div>手气不佳，攒人品下次再来吧</div></div><div class="cp_bt" ng-show="vm.cp_datas.is_recivece == 0&&vm.overDue<0&&vm.shownonum!=true" ng-click="vm.getCouponBtn(vm.cp_datas.cardcoupon_id)">点&nbsp;击&nbsp;领&nbsp;券</div><div class="cp_bt invalida" ng-show="vm.overDue>0&&vm.cp_datas.is_recivece == 0||max_count>0&&vm.cp_datas.un_send_count == 0&&vm.cp_datas.is_recivece == 0">该&nbsp;券&nbsp;不&nbsp;能&nbsp;领&nbsp;取</div><div class="cp_bt invalida marginBottom10" ng-show="vm.cp_datas.is_recivece == 1&&vm.overDue<0">已&nbsp;经&nbsp;领&nbsp;取</div><div class="cp_bt marginTop10" ng-show="vm.cp_datas.is_recivece == 1&&vm.overDue<0" ui-sref="mycoupons">查&nbsp;看&nbsp;优&nbsp;惠&nbsp;券</div></div>'),e.put("app/giftorderlist/giftorderlist.html",'<div class="wrapGiftOrderList"><div class="order-list"><div class="header-bar"><go-back ng-click="clear_history()"></go-back><div class="header-title">我的礼单</div><div class="clear-both"></div></div><div class="orderlistnav"><span class="floatL" style="width:50%;" ng-class="{select:pageData.id==pageData.value[0]}" ui-sref="giftorderlist({ID:pageData.value[0]})">好友送我</span> <span class="floatL" style="width:50%;" ng-class="{select:pageData.id==pageData.value[1]}" ui-sref="giftorderlist({ID:pageData.value[1]})">我送好友</span><div class="BKline"></div></div><div class="the-list" ng-if="vm.showstatus == 0"><div class="the-order" ng-repeat="item in pageData.list" scroll-bottom-bind="loadMoreData()" ui-sref="orderDetail({orderID:item.order_id})"><div class="order-title"><div class="order-id">订单号：{{item.order_id}}</div><div class="order-time">{{item.order_time | date:\'yyyy/MM/dd HH:mm\'}}</div><div class="clear-both"></div></div><div class="order-content" ng-repeat="product in item.product_list track by $index"><div class="product-img"><img ng-src="{{product.img_url}}?x-oss-process=image/resize,m_pad,h_140,w_140"></div><div class="product-info"><div class="product-name">{{product.product_name}}</div><div class="product-sku">{{product.show_property}}</div></div><div class="product-prices"><div class="the-price">{{product.quote_price | currency:\'￥\'}}</div><div class="num">X{{product.count}}</div></div><div class="clear-both"></div></div><div class="bottom-wrap"><span class="btn-default" ng-if="item.order_status==\'待付款\'" ng-click="pageFunc.pay(item)">立即支付</span> <span class="btn-default" ng-if="item.order_status==\'已取消\'">已取消</span> <span class="btn-active" ng-if="item.order_status==\'待付款\'" ng-click="pageFunc.deleteorder(item)">取消订单</span> <span class="btn-default" ng-if="item.express_number" ui-sref="expressInfo({orderId:item.order_id})">查看物流</span> <span class="btn-active" ng-if="item.order_status==\'已发货\'" ng-click="pageFunc.confirm(item)">确认收货</span> <span class="btn-active" ng-if="item.is_cansendgift== true && item.is_pay == 1" ng-click="gotoGiveGiftBtn(item)">送给好友</span></div></div></div><div class="the-list" ng-if="vm.showstatus == 1"><div class="the-order" ng-repeat="item in pageData.list" scroll-bottom-bind="loadMoreData()" ui-sref="orderDetail({orderID:item.order_id})"><div class="order-title"><div class="order-id">订单号：{{item.order_id}}</div><div class="order-time">{{item.order_time | date:\'yyyy/MM/dd HH:mm\'}}</div><div class="clear-both"></div></div><div class="order-content" ng-repeat="product in item.product_list track by $index"><div class="product-img"><img ng-src="{{product.img_url}}?x-oss-process=image/resize,m_pad,h_140,w_140"></div><div class="product-info" ui-sref="orderDetail({orderID:item.order_id})"><div class="product-name">{{product.product_name}}</div><div class="product-sku">{{product.show_property}}</div></div><div class="product-prices"><div class="the-price">{{product.price | currency:\'￥\'}}</div><div class="old-price">{{product.quote_price | currency:\'￥\'}}</div><div class="num">X{{product.count}}</div></div><div class="clear-both"></div></div><div class="total-price">共{{item.product_count}}件商品，合计：{{item.total_amount | currency:\'￥\'}}</div><div class="bottom-wrap"><span class="btn-default" ng-if="item.order_status==\'待付款\'" ng-click="pageFunc.pay(item)">立即支付</span> <span class="btn-default" ng-if="item.order_status==\'已取消\'">已取消</span> <span class="btn-active" ng-if="item.order_status==\'待付款\'" ng-click="pageFunc.deleteorder($index)">取消订单</span> <span class="btn-default" ng-if="item.express_number" ui-sref="expressInfo({orderId:item.order_id})">查看物流</span> <span class="btn-active" ng-if="item.order_status==\'已发货\'" ng-click="pageFunc.confirm($index)">确认收货</span> <span class="btn-active" ng-if="item.is_cansendgift== true && item.is_pay == 1" ng-click="gotoGiveGiftBtn(item)">送给好友</span></div></div></div><div class="nomoreorder" ng-if="!nodata">数据加载中~</div><div class="nomoreorder" ng-if="nodata">没有更多订单了额~</div></div></div>'),e.put("app/home/home.html",'<div class="wrapHome"><div class="home"><div class="content"><sliderbox pic-size="640:300" slide-type="{{pdlist.MALLCONFIG.mallconfignew.slide_name}}"></sliderbox><product-box-list scroll-bottom-bind="pdlist.loadMoreData()"><product-box wechat-click="pdlist.goProductDetail(productItem.product_id)" ng-repeat="productItem in pdlist.productListData" class="col-50"></product-box></product-box-list></div></div><footer-bar ng-if="!searchMask&&!searchRelateMask"></footer-bar><hot-search ng-if="searchMask"></hot-search><relate-search ng-if="searchRelateMask"></relate-search><side-menu ng-show="sideMenus"></side-menu></div>'),e.put("app/housesDetail/housesDetail.html",'<div class="wrapHousesDetail"><div class="product-img" ng-if="sliderdata[0].datalist.length==1"><img class="img-detail" ng-src="{{sliderdata[0].datalist[0]}}"></div><div ng-if="sliderdata[0].datalist.length>1"><slider aspectratio="{{vm.mall_config.mallconfignew.product_img_ratio1}}:{{vm.mall_config.mallconfignew.product_img_ratio2}}" ng-repeat="slider in sliderdata"><slider-item ng-repeat="imgdata in slider.datalist"><img ng-src="{{imgdata}}" class="imgsize100"></slider-item></slider></div><div class="product-title"><div class="title-left" ng-bind="vm.productDetailData.title"></div><div class="title-right" ng-bind="vm.productDetailData.ex3"></div></div><div class="product-info"><div class="product-price"><div class="product-zhuzhai">住宅：<span>{{vm.productDetailData.price}}元/㎡起</span></div><div class="product-cellect"><span ng-show="!vm.productDetailData.is_collect" ng-click="vf.collect()"><svg class="icon collectKong" aria-hidden="true"><use xlink:href="#icon-weiguanzhu"></use></svg><span>收藏</span></span> <span ng-show="vm.productDetailData.is_collect" ng-click="vf.cancelCollect()"><svg class="icon collectKong" aria-hidden="true"><use xlink:href="#icon-shangchengicon12"></use></svg><span>收藏</span></span></div><div class="clear"></div></div><div class="product-tag"><a href="javascript:;" ng-repeat="item in vm.productDetailData.tags.split(\',\')">{{item}}</a></div><div class="product-content"><span class="content-left">地址：</span> <span class="content-right" ng-bind="vm.productDetailData.address"></span></div><div class="product-content"><span class="content-left">开盘：</span> <span class="content-right">{{vm.productDetailData.ex2 | FormatterTime:\'yyyy-MM-dd\'}}</span></div><div class="shouqi" ng-show="vm.isShow" ng-click="vm.isShow=false;">收起</div><div class="shouqi" ng-click="vm.isShow=true;" ng-show="!vm.isShow">展开</div><div ng-show="vm.isShow"><div class="product-content" ng-show="vm.productDetailData.ex4"><span class="content-left">附近学校：</span> <span class="content-right" ng-bind="vm.productDetailData.ex4"></span></div><div class="product-content" ng-show="vm.productDetailData.ex5"><span class="content-left">交房时间：</span> <span class="content-right" ng-bind="vm.productDetailData.ex5"></span></div><div class="product-content" ng-show="vm.productDetailData.ex6"><span class="content-left">装修情况：</span> <span class="content-right" ng-bind="vm.productDetailData.ex6"></span></div><div class="product-content" ng-show="vm.productDetailData.ex17"><span class="content-left">楼盘位置：</span> <span class="content-right" ng-bind="vm.productDetailData.ex17"></span></div><div class="product-content" ng-show="vm.productDetailData.ex7"><span class="content-left">开发商：</span> <span class="content-right" ng-bind="vm.productDetailData.ex7"></span></div><div class="product-content" ng-show="vm.productDetailData.ex8"><span class="content-left">产权年限：</span> <span class="content-right">{{vm.productDetailData.ex8}}年</span></div><div class="product-content" ng-show="vm.productDetailData.ex9"><span class="content-left">物业公司：</span> <span class="content-right" ng-bind="vm.productDetailData.ex9"></span></div><div class="product-content" ng-show="vm.productDetailData.ex10"><span class="content-left">建筑类型：</span> <span class="content-right" ng-bind="vm.productDetailData.ex10"></span></div><div class="product-content" ng-show="vm.productDetailData.ex11"><span class="content-left">车位比例：</span> <span class="content-right" ng-bind="vm.productDetailData.ex11">1 ：1</span></div><div class="product-content" ng-show="vm.productDetailData.ex12"><span class="content-left">规划户数：</span> <span class="content-right">{{vm.productDetailData.ex12}}户</span></div><div class="product-content" ng-show="vm.productDetailData.ex13"><span class="content-left">绿化率：</span> <span class="content-right">{{vm.productDetailData.ex13}}%</span></div><div class="product-content" ng-show="vm.productDetailData.ex14"><span class="content-left">会员佣金：</span> <span class="content-right">{{vm.productDetailData.ex14}}元</span></div><div class="product-content" ng-show="vm.productDetailData.ex15"><span class="content-left">会员优惠：</span> <span class="content-right" ng-bind="vm.productDetailData.ex15"></span></div><div class="product-content" ng-class="{\'mBottom50\':!vm.productDetailData.product_desc}"><span class="content-left">非会员优惠：</span> <span class="content-right" ng-bind="vm.productDetailData.ex16"></span></div></div></div><div class="line-height" ng-show="vm.productDetailData.product_desc" ng-class="{\'mBottom50\':!vm.productDetailData.product_desc}"></div><div class="product-desc" ng-show="vm.productDetailData.product_desc"><div class="desc-title">楼盘详情</div><div class="img-text-info" ng-bind-html="vm.productDetailData.product_desc"></div></div><div class="footer-buy" ng-show="sysConfig"><div class="footer-left" ng-click="addToShopCar()"><span class="yuyue">预约看房</span> <span class="line">|</span> <span class="customer">推荐购房客户</span></div><div class="footer-right" ng-click="buyNow()">咨询热线</div><div class="clear-both"></div></div></div>'),e.put("app/housesList/housesList.html",'<div class="houses-warp"><div class="header"><div class="menu-wrap"><svg class="icon mulu" ng-click="vf.goBack()" aria-hidden="true"><use xlink:href="#icon-fanhui"></use></svg></div><div class="search-wrap"><span class="the-logo"><svg class="icon fangdajing" aria-hidden="true"><use xlink:href="#icon-fangdajing"></use></svg></span> <span class="the-search"><input class="search-input" ng-click="vf.gotoSearchPage()" type="text" placeholder="搜索"></span></div></div><div class="sale-sku"><div class="sale-sku-item" ng-class="{currSelected:pdlist.selected==1}" ng-click="vf.sortByPrice(\'district\');pdlist.selected=1;">区域<svg class="icon sku-sort" aria-hidden="true"><use xlink:href="#icon-jiantouarrowdown"></use></svg></div><div class="sale-sku-item" ng-class="{currSelected:pdlist.selected==2}" ng-click="vf.sortByPrice(\'price\');pdlist.selected=2;">价格<svg class="icon sku-sort" aria-hidden="true"><use xlink:href="#icon-jiantouarrowdown"></use></svg></div><div class="sale-sku-item" ng-class="{currSelected:pdlist.selected==3}" ng-click="vf.sortByPrice(\'room_type\');pdlist.selected=3;">户型<svg class="icon sku-sort" aria-hidden="true"><use xlink:href="#icon-jiantouarrowdown"></use></svg></div><div class="clear"></div></div><div class="room-type" ng-show="vm.room_panpel"><div class="room-info"><div class="all" ng-click="vf.selectRoom({value:\'\'})">不限</div><div class="line-style" ng-repeat="item in vm.roomTypes"><label><span>{{item.text}}</span> <input class="ckBox" type="checkbox" name="room" ng-checked="vm.curSelectRoom.indexOf(item.value)>=0" ng-click="vf.selectRoom(item)"></label></div></div><div class="cencel"><button class="btn" ng-click="vf.searchRoom()">确定</button></div></div><div class="houses_price" ng-show="vm.price_panpel"><div class="prices-info"><div class="all" ng-click="vf.selectPrice({start_price:\'\',end_price:\'\'})">不限</div><div class="line-style" ng-click="vf.selectPrice(item)" ng-repeat="item in vm.prices">{{item.text}}</div></div><div class="cencel row"><div class="col-xs-3">自定义</div><div class="col-xs-2"><input type="number" ng-model="vm.min_price" placeholder="最低价"></div><div class="col-xs-1"><span>—</span></div><div class="col-xs-2"><input type="number" ng-model="vm.max_price" placeholder="最高价"></div><div class="col-xs-2"><span>元</span></div><div class="col-xs-2"><button class="btn" ng-click="vf.selectCancelPrice()">确定</button></div></div></div><div class="houses-district" ng-show="vm.district_panpel"><div class="district-info"><div class="province-warp" ng-style="{\'width\':vm.z_width+\'%\'}"><div class="province-style" ng-class="{\'Green\':province.selected}" ng-click="vf.getCitys(province)" ng-repeat="province in vm.provinceList">{{province.name}}</div></div><div class="city-warp" ng-style="{\'width\':vm.z_width+\'%\'}"><div class="city-style" ng-class="{\'Green\':city.selected}" ng-click="vf.getDistricts(city)" ng-repeat="city in vm.cityList">{{city.name}}</div></div><div class="district-warp" ng-style="{\'width\':vm.z_width+\'%\'}"><div class="all" ng-click="vf.selectDistrict( {name:\'不限\',code:\'\'})">不限</div><div class="district-style" ng-repeat="districe in vm.districeList"><label><span>{{districe.name}}</span> <input class="ckBox" type="checkbox" ng-checked="vm.curSelectDistrict.indexOf(item.value)>=0" ng-click="vf.selectDistrict(districe)"></label></div></div></div><div class="cencel row"><div class="col-xs-6"><button class="btn reset" ng-click="vf.selectResetDistrict()">重置</button></div><div class="col-xs-6"><button class="btn confim" ng-click="vf.selectConfirmDistrict()">确定</button></div></div></div><div class="houses-list"><div class="row repeat-div" ng-click="vf.gotoHousesDetail(mall.product_id)" ng-repeat="mall in vm.productListData track by $index" scroll-bottom-bind="vm.loadMoreData()"><div class="col-xs-4 img-wrap"><img class="product-img lazy" src="{{mall.img_url}}"></div><div class="col-xs-8 content-warp"><div class="nav-top"><div class="title" ng-bind="mall.title"></div><div class="province">{{mall.province}}<span ng-show="mall.city">&nbsp;-&nbsp;</span>{{mall.city}}</div></div><div class="price"><span>{{mall.price}}元/㎡</span></div><div class="clear"></div><div class="tags"><a href="javascript:;" ng-repeat="item in mall.tags.split(\',\')">{{item}}</a></div><div class="builds" ng-show="mall.ex1">建筑面积：{{mall.ex1}}㎡</div></div></div><div class="loadingTap"><span ng-show="vm.loadingTag">加载中~</span> <span ng-show="vm.loadingEndTag">没有更多了~</span></div></div></div>'),e.put("app/infoCenter/infoCenter.html",'<div class="info-center"><div class="info-head"><img class="person-img" ng-src="{{vm.userInfoData.head_img_url}}"><div class="person-text"><div class="person-name" ng-bind="vm.userInfoData.nickname"></div><div class="manage-btn" ui-sref="userMange">账号管理</div></div><div class="clear-both"></div></div><div class="my-orders"><div class="all-order-wrap"><div class="all-order">我的订单</div><div class="clear-both"></div></div><div class="sorts"><div class="sort" ui-sref="orderList"><svg class="icon sort-img" aria-hidden="true"><use xlink:href="#icon-quanbudingdan"></use></svg><br>全部订单</div><div class="sort" ui-sref="orderList({status:\'待付款\'})"><svg class="icon sort-img" aria-hidden="true"><use xlink:href="#icon-daifukuan"></use></svg><br>待付款</div><div class="sort" ui-sref="orderList({status:\'待发货\'})"><svg class="icon sort-img" aria-hidden="true"><use xlink:href="#icon-receive"></use></svg><br>待发货</div><div class="sort" ui-sref="orderList({status:\'待收货\'})"><svg class="icon sort-img" aria-hidden="true"><use xlink:href="#icon-daipingjia"></use></svg><br>待收货</div></div></div><div class="my-orders" ng-if="vm.uiset.btnstyle==1"><div class="sorts"><div class="sort borderright" ui-sref="collectList"><svg class="icon sort-img shoucang" aria-hidden="true"><use xlink:href="#icon-shoucang1"></use></svg><br>收藏的商品</div><div class="sort borderright" ui-sref="mycoupons"><svg class="icon sort-img youhuiquan" aria-hidden="true"><use xlink:href="#icon-youhuiquan"></use></svg><br>优惠券</div><div class="sort borderright" ui-sref="myscores"><svg class="icon sort-img jifen" aria-hidden="true"><use xlink:href="#icon-jifen2"></use></svg><br>积分</div></div></div><div ng-if="vm.uiset.btnstyle==2"><div class="my-orders" ui-sref="{{btn.navigation_link}}" ng-repeat="btn in vm.userInfoBtn"><div class="all-order-wrap2 no-bottom-border"><div class="all-order" ng-bind="btn.navigation_name"></div><div class="more"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-youjiantou"></use></svg></div><div class="clear-both"></div></div></div></div></div><footer-bar ng-if="vm.uiset.footerbar"></footer-bar>'),e.put("app/lockScoreList/lockScoreList.html",'<div class="wrapLockScoreList"><div class="header-bar"><go-back></go-back><div class="header-title">即将到账积分</div><a href="javascript:zcToUrl(\'/customize/comeoncloud/Index.aspx?key=MallHome\')" class="btnBackHomeRight"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shouye"></use></svg></a><div class="clear-both"></div></div><div class="wrapTotal">即将到账积分：<span class="themeColor font20">{{vm.lockScoreTotal}}</span></div><div class="wrapDataList"><div class="card" ng-repeat="item in vm.lockScoreList track by item.AutoId"><div class="item item-divider" ng-class="{\'themeBackgroundColor\':item.LockStatus == 0,\'black\':item.LockStatus != 0}"><span>商城下单获得积分</span> <span class="floatR" ng-if="item.LockStatus == 0">即将到账</span> <span class="floatR" ng-if="item.LockStatus == 1">已到账</span> <span class="floatR" ng-if="item.LockStatus == 2">已取消</span><div class="clear"></div></div><div class="item item-text-wrap" ng-click="vf.gotoOrderList()"><div>订单单号：{{item.ForeignkeyId}}</div><div>获得积分：{{item.Score | number:0}}</div><div>下单时间：{{item.LockTimeStr}}</div><div class="note"><span ng-if="item.LockStatus == 0">订单交易成功七天后，积分自动到账</span> <span ng-if="item.LockStatus == 1">积分已自动到账</span> <span ng-if="item.LockStatus == 2">订单已取消或者已申请退款，积分取消</span></div></div></div></div></div>'),e.put("app/main/main.html",'<div class="container"><div><acme-navbar creation-date="main.creationDate"></acme-navbar></div><div class="jumbotron text-center"><h1>\'Allo, \'Allo!</h1><p class="lead"><img src="assets/images/yeoman.png" alt="I\'m Yeoman"><br>Always a pleasure scaffolding your apps.</p><p class="animated infinite" ng-class="main.classAnimation"><button type="button" class="btn btn-lg btn-success" ng-click="main.showToastr()">Splendid Toastr</button></p><p>With ♥ thanks to the contributions of<acme-malarkey extra-values="[\'Yeoman\', \'Gulp\', \'Angular\']"></acme-malarkey></p></div><div class="row"><div class="col-sm-6 col-md-4" ng-repeat="awesomeThing in main.awesomeThings | orderBy:\'rank\'"><div class="thumbnail"><img class="pull-right" ng-src="assets/images/{{ awesomeThing.logo }}" alt="{{ awesomeThing.title }}"><div class="caption"><h3>{{ awesomeThing.title }}</h3><p>{{ awesomeThing.description }}</p><p><a ng-href="{{awesomeThing.url}}">{{ awesomeThing.url }}</a></p></div></div></div></div></div>'),e.put("app/mycoupons/mycoupons.html",'<div class="header-bar" ng-if="(sysConfig.malll.is_customize_mall_head == 0 || (sysConfig.malll.is_customize_mall_head==2 && !isPlus))"><go-back></go-back><div class="header-title"><span ng-if="couponTitle!=\'\'" ng-bind="couponTitle"></span> <span ng-if="couponTitle==\'\'">我的优惠券</span> <a href="/customize/comeoncloud/Index.aspx?key=MallHome" class="btnBackHomeRight"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shouye"></use></svg></a></div><div class="clear-both"></div></div><div customize-mall-head="" ng-if="!(sysConfig.malll.is_customize_mall_head == 0 || (sysConfig.malll.is_customize_mall_head==2 && !isPlus))"></div><div class="select-bar clearfix"><div class="select-btn-wrap" ng-class="{\'selected-btn-wrap themeColor themeBorderColor\':canuse==1}" ng-click="canUse()"><div class="select-btn">未使用</div></div><div class="select-btn-wrap" ng-class="{\'selected-btn-wrap themeColor themeBorderColor\':canuse==2}" ng-click="noCanUse()"><div class="select-btn">已使用</div></div><div class="select-btn-wrap" ng-class="{\'selected-btn-wrap themeColor themeBorderColor\':canuse==3}" ng-click="outDate()"><div class="select-btn">已过期</div></div><div class="select-btn-wrap" ng-class="{\'selected-btn-wrap themeColor themeBorderColor\':canuse==4}" ng-click="hasGiven()"><div class="select-btn">已转赠</div></div></div><div class="new-coupons" ng-if="!showEmpty"><div class="new-coupon" ng-repeat="item in couponData" on-finish-render-filters="" ng-class="{\'invalida\':!item.valid}" ng-click="goToCouponDetail(item)"><div class="coupon-type" ng-if="item.cardcoupon_type==3" ng-class="{\'invalidc\':!item.valid}">满减券</div><div class="coupon-type" ng-if="item.cardcoupon_type==2" ng-class="{\'invalidc\':!item.valid}">免邮券</div><div class="coupon-type" ng-if="item.cardcoupon_type==1" ng-class="{\'invalidc\':!item.valid}">现金券</div><div class="coupon-type" ng-if="item.cardcoupon_type==0" ng-class="{\'invalidc\':!item.valid}">折扣券</div><div class="coupon-type" ng-if="item.cardcoupon_type==4" ng-class="{\'invalidc\':!item.valid}">满送券</div><div class="coupon-content"><div class="coupon-left" ng-if="item.cardcoupon_type==0"><span class="big-word">{{item.discount}}</span> 折</div><div class="coupon-left" ng-if="item.cardcoupon_type==1">￥<span class="big-word">{{item.deductible_amount}}</span></div><div class="coupon-left" ng-if="item.cardcoupon_type==2"><span class="big-word">免邮</span></div><div class="coupon-left" ng-if="item.cardcoupon_type==3">￥<span class="big-word">{{item.buckle_sub_amount}}</span></div><div class="coupon-center"><div class="title">{{item.cardcoupon_name}}</div><div class="desc" ng-if="item.cardcoupon_type==0">使用无金额限制</div><div class="desc" ng-if="item.cardcoupon_type==1">使用无金额限制</div><div class="desc" ng-if="item.cardcoupon_type==2">满{{item.freefreight_amount}}元可用</div><div class="desc" ng-if="item.cardcoupon_type==3">满{{item.buckle_amount}}元减 {{item.buckle_sub_amount}}元</div><div class="desc" ng-if="item.cardcoupon_type==4">满{{item.buckle_amount}}送{{item.buckle_sub_amount}}</div><div class="time">{{item.valid_from}}-{{item.valid_to}}</div></div><div class="coupon-right"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-youjiantou"></use></svg></div><div class="clear-both"></div></div><div class="coupon-desc" ng-class="{\'invalidb\':!item.valid}" ng-if="item.limit_type==\'\'">全商品：任意商品可使用</div><div class="coupon-desc" ng-class="{\'invalidb\':!item.valid}" ng-if="item.limit_type==\'0\'">限商品：只限单个商品使用</div><div class="coupon-desc" ng-class="{\'invalidb\':!item.valid}" ng-if="item.limit_type==\'1\'">限商品：只限{{item.product_tags}}商品使用</div><div class="big-white-circle-left"></div><div class="big-white-circle-right"></div><div class="small-white-circle-wrap"></div><img src="assets/images/yiguoqi.png" ng-show="!item.valid" ng-class="{\'invalid-img\':!item.valid}"> <img src="assets/images/yishiyong.png" ng-show="item.cardcoupon_status" ng-class="{\'invalid-img\':item.cardcoupon_status}"></div></div><div ng-if="couponData.length===0" class="emptybasket"><div class="emptyicon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-youhuiquan"></use></svg></div><h4 class="font20">&nbsp;&nbsp;您当前没有<span ng-if="canuse==1">未使用</span><span ng-if="canuse==2">已使用</span><span ng-if="canuse==3">已过期</span><span ng-if="canuse==4">已转赠</span>的优惠券！</h4></div>'),
e.put("app/myscores/myscores.html",'<div class="header-bar" ng-if="(sysConfig.malll.is_customize_mall_head == 0 || (sysConfig.malll.is_customize_mall_head==2 && !isPlus))"><go-back></go-back><div class="header-title"><span ng-bind="pageData.type_name"></span>管理</div><a href="javascript:zcToUrl(\'/customize/comeoncloud/Index.aspx?key=MallHome\');" class="btnBackHomeRight"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shouye"></use></svg></a><div class="clear-both"></div></div><div customize-mall-head="" ng-if="!(sysConfig.malll.is_customize_mall_head == 0 || (sysConfig.malll.is_customize_mall_head==2 && !isPlus))"></div><div class="scorehead themeBackground"><div class="scroes"><span class="font38" ng-bind="pageData.total"></span>&nbsp;<span ng-bind="pageData.type_name"></span></div><a href="#/lockscores" class="scroerule" ng-if="pageData.lockScore">您还有&nbsp;{{pageData.lockScore}}&nbsp;积分即将到账</a></div><div class="scorenote"><ul class="scorenav"><li ng-class="{\'whichscore themeBackground\':pageData.show_type === \'\'}" ng-click="whichScoreBtn(\'\')"><span ng-bind="pageData.type_name"></span>历史</li><li ng-class="{\'whichscore themeBackground\':pageData.show_type === 1}" ng-click="whichScoreBtn(1)">收入</li><li ng-class="{\'whichscore themeBackground\':pageData.show_type === 0}" ng-click="whichScoreBtn(0)">支出</li></ul><div class="scoredetail" scroll-bottom-bind="loadMoreData()"><div ng-repeat="boxdata in pageData.list" class="onescore"><span class="font12">{{boxdata.title}}</span> <span class="font12" style="margin-left:10px;">{{boxdata.time | date:"yyyy-MM-dd HH:mm"}}</span> <span class="floatR fontblue">{{boxdata.score}}</span></div></div></div><div ng-if="pageData.nodata" style="text-align:center;"><h5>数据加载中~~</h5></div><div ng-if="!pageData.nodata" style="text-align:center;"><h5>没有更多<span ng-bind="pageData.type_name"></span>记录咯~</h5></div>'),e.put("app/oldSale/oldsale.html",'<div class="wrapSaleList"><div class="header-bar"><go-back ng-click="vm.clear_history()"></go-back><div class="header-title">{{vm.title}}</div><div class="clear-both"></div></div><shopslider aspectratio="640:230"><shop-slider-item ng-repeat="imgdata in vm.sliderdata"><img ng-src="{{imgdata.img_url}}" class="imgsize100"></shop-slider-item></shopslider><div class="row"><div class="col-sm-12"><div class="scroll-overflow" ng-if="vm.showscrollx" iscroll-x="" scroll-data="vm.scrollxyData"><table><tr><td class="sale-time-item" ng-repeat="scrollx in vm.scrollxyData"><a ng-href="{{scrollx.url}}" style="padding:10px 20px;">{{scrollx.count}}</a><div class="font14">冬装季末棉羽专场</div><div class="font16">正在疯抢</div></td></tr></table></div></div></div><div class="account-down red icon_middle_time"><svg class="icon font20 black icon-middle" aria-hidden="true"><use xlink:href="#icon-xianshitejia"></use></svg>&nbsp;还剩 {{vm.pageData.leftDay}} 天{{vm.pageData.leftHour}} 时 {{vm.pageData.leftMinus}} 分 {{vm.pageData.leftSecond}} 秒{{vm.pageData.leftName}}</div><div class="sale-sku"><div class="sale-sku-item" ng-show="0"><span class="circle"></span>&nbsp;显示有货</div><div class="sale-sku-item" ng-show="0"><svg class="icon font13" aria-hidden="true"><use xlink:href="#icon-alarm-clock"></use></svg>&nbsp;订阅开抢通知</div><div class="sale-sku-item gray78"><svg class="icon font13" aria-hidden="true"><use xlink:href="#icon-alarm-clock"></use></svg>&nbsp;已订阅</div><div class="sale-sku-item" ng-click="vm.tabClick(0)"><svg class="icon font13" aria-hidden="true"><use xlink:href="#icon-shangxiajian01"></use></svg>价格</div><div class="sale-sku-item" ng-click="vm.tabClick(1)"><svg class="icon font13" aria-hidden="true"><use xlink:href="#icon-shangxiajian01"></use></svg>折扣</div></div><div class="product-list-promotion" scroll-bottom-bind="vm.loadMoreData()"><div class="product" ng-repeat="dataBox in vm.saleProductList"><div product-box-sale=""></div></div></div></div>'),e.put("app/orderDetail/orderDetail.html",'<div class="order-detail"><div class="header-bar" ng-show="vm.isDefHead"><go-back></go-back><div class="header-title">订单详情</div><a href="/customize/comeoncloud/Index.aspx?key=MallHome" class="btnBackHomeRight"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shouye"></use></svg></a><div class="clear-both"></div></div><div customize-mall-head=""></div><div class="wrap-order-detail-body"><div class="module status" ng-if="vm.showorder_detail"><div class="seller-state" ng-class="{\'status1\':vm.orderData.order_status==\'已取消\',\'status2\':vm.orderData.order_status==\'待发货\',\'status3\':vm.orderData.order_status==\'待付款\',\'status4\':vm.orderData.order_status==\'已发货\',\'status5\':vm.orderData.order_status==\'交易成功\'}"><div class="state-cont"><p class="h">{{vm.showStatusNm}}</p><p class="sub" ng-if="vm.orderData.order_status==\'待付款\'">剩 <span ng-show="vm.leftDay != \'00\'">{{vm.leftDay | number}}天</span> <span ng-show="vm.leftHour != \'00\'">{{vm.leftHour | number}}小时</span> {{vm.leftMinus | number}}分钟 自动取消</p><p class="sub" ng-if="vm.orderData.order_status==\'已发货\'">剩 <span ng-show="vm.leftDay != \'00\'">{{vm.leftDay | number}}天</span> <span ng-show="vm.leftHour != \'00\'">{{vm.leftHour | number}}小时</span> {{vm.leftMinus | number}}分钟 自动确认</p></div></div></div><div class="vieworderdetail" ng-if="vm.showorder_detail"><div ng-hide="vm.orderData.is_no_express == 1&& vm.orderData.is_need_name_phone == 0"><div class="statu2 font16" ng-show="vm.orderData.order_type==0||vm.orderData.order_type==7||vm.orderData.order_type==1&&(vm.orderData.gift_order_type==0||vm.orderData.gift_order_type==\'\')"><div class="fontweight">收件人信息：</div><div class="fontweight">{{vm.orderData.receiver_name}}&nbsp;&nbsp;{{vm.orderData.receiver_phone}}</div><span class="address" ng-hide="vm.orderData.is_no_express == 1">{{vm.orderData.receiver_province}}{{vm.orderData.receiver_city}}{{vm.orderData.receiver_dist}}{{vm.orderData.receiver_address}}</span></div></div><div class="clear-both"></div><div>{{vm.orderData.supplier_name}}</div><div class="statu4"><span class="floatL"><span ng-if="vm.orderData.parent_order_id!=\'\'">子<span>订单号：{{vm.orderData.order_id}}</span> <span class="floatR">&nbsp;&nbsp;下单时间:{{vm.orderData.order_time | date:\'yyyy-MM-dd\'}}</span></span></span></div><div class="clear-both"></div><div class="statu6"><div class="oderlistcontent" style="min-height: 75px;" ng-repeat="item in vm.orderData.product_list track by $index"><div class="left" ui-sref="productDetail({id:item.product_id})"><img ng-src="{{item.img_url}}?x-oss-process=image/resize,m_pad,h_140,w_140" alt="" class="orderlistimg"></div><div class="right"><div><span>{{item.product_name}}</span></div><div><span>{{item.show_property}}</span></div><div class="skus"><span class="floatL" ng-show="item.price">{{item.price | currency:\'￥\'}}</span> <span class="floatL" ng-show="item.score"><span ng-show="item.price">+</span> {{item.score}}{{vm.score_show_name}}</span> <span class="floatR">X{{item.count}} <span class="apply-refund-bt" ng-if="vm.orderData.order_type==0&&vm.orderData.is_pay&&(item.refund_status<0)||vm.orderData.order_type==1&&vm.orderData.gift_order_type==1&&vm.orderData.is_pay&&(item.refund_status<0)" ui-sref="applyRefund({orderId:vm.orderData.order_id,orderDetailId:item.order_detail_id})">申请退款</span> <span class="apply-refund-bt" ng-if="vm.orderData.order_type==0&&vm.orderData.is_pay&&(item.refund_status>=0)&&(item.refund_status!=6)&&(item.refund_status!=7)||vm.orderData.order_type==1&&vm.orderData.gift_order_type==1&&vm.orderData.is_pay&&(item.refund_status>=0)&&(item.refund_status!=6)&&(item.refund_status!=7)" ui-sref="refundState({orderId:vm.orderData.order_id,orderDetailId:item.order_detail_id})">退款中</span> <span class="apply-refund-bt" ng-if="vm.orderData.order_type==0&&vm.orderData.is_pay&&(item.refund_status==6)||vm.orderData.order_type==1&&vm.orderData.gift_order_type==1&&vm.orderData.is_pay&&(item.refund_status==6)" ui-sref="refundState({orderId:vm.orderData.order_id,orderDetailId:item.order_detail_id})">退款成功</span> <span class="apply-refund-bt" ng-if="vm.orderData.order_type==0&&vm.orderData.is_pay&&(item.refund_status==7)||vm.orderData.order_type==1&&vm.orderData.gift_order_type==1&&vm.orderData.is_pay&&(item.refund_status==7)" ui-sref="refundState({orderId:vm.orderData.order_id,orderDetailId:item.order_detail_id})">退款关闭</span></span></div></div></div></div><div style="padding-top:5px;padding-bottom: 5px;clear: both;">留言： <span ng-bind="vm.orderData.buyer_memo"></span></div><div class="statu7"><div class="nums">共{{vm.orderData.product_count}}件产品</div><div class="detailed" ng-show="vm.orderData.order_type==0||vm.orderData.order_type==7||vm.orderData.order_type==1&&vm.orderData.gift_order_type==1"><span class="floatL">商品总价&nbsp;：</span> <span class="floatR"><span ng-show="vm.totalMoney">{{vm.totalMoney | currency:\'￥\'}}</span> <span ng-show="vm.totalScore"><span ng-show="vm.totalMoney">+</span> {{vm.totalScore}}{{vm.score_show_name}}</span></span></div><div class="detailed"><span class="floatL">运&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;费：</span> <span class="floatR">{{vm.orderData.freight | currency:\'¥\'}}</span></div><div class="clear-both"></div><div class="detailed" ng-show="vm.orderData.order_type==0||vm.orderData.order_type==7||vm.orderData.order_type==1&&vm.orderData.gift_order_type==1"><span class="floatL">使用{{vm.score_show_name}}&nbsp;：</span><span class="floatR">{{vm.orderData.use_score}}{{vm.score_show_name}}</span></div><div class="detailed" ng-show="vm.orderData.order_type==0||vm.orderData.order_type==7||vm.orderData.order_type==1&&vm.orderData.gift_order_type==1"><span class="floatL">使用余额&nbsp;：</span> <span class="floatR">{{vm.orderData.use_amount | currency:\'¥\'}}</span></div><div class="detailed" ng-show="vm.orderData.order_type==0||vm.orderData.order_type==7||vm.orderData.order_type==1&&vm.orderData.gift_order_type==1"><span class="floatL">{{vm.cardcoupon_show_name}}：</span> <span class="floatR" ng-if="vm.orderData.cardcoupon"><span class="red font12">{{vm.orderData.cardcoupon}}</span> 抵{{vm.orderData.cardcoupon_exchang_amount | currency:\'¥\'}}</span><span class="floatR" ng-if="!vm.orderData.cardcoupon">无</span></div><div class="clear-both"></div><div class="detailed" ng-if="vm.orderData.order_type!=1||(vm.orderData.order_type==1&&vm.orderData.gift_order_type==1)"><span class="floatL">实&nbsp;&nbsp;付&nbsp;&nbsp;款：</span> <span class="floatR">{{vm.orderData.total_amount | currency:\'￥\'}}</span></div><div class="detailed" ng-if="vm.orderData.pay_user_info.nickname"><span class="floatL">代付信息：</span> <span class="floatR">由好友&nbsp;{{vm.orderData.pay_user_info.nickname}}&nbsp;代付&nbsp;&nbsp;<a ui-sref="anotherPay({orderId:vm.orderData.order_id})">查看代付详情</a></span></div></div><div class="statu4" ng-show="vm.orderData.order_type==1&&vm.orderData.gift_order_type==0"><span class="floatL">看看是谁送我的礼品</span></div><div class="clear-both"></div><div class="statu6" ng-show="vm.orderData.order_type==1&&vm.orderData.gift_order_type==0&&vm.orderData.is_pay==1"><div class="oderlistcontent"><img ng-src="{{vm.giftDetailData.send_user_info.head_img_url}}" alt="" class="orderlistimg gift-person"><div class="title" style="padding-left: 65px"><span class="floatL" style="width: 70%;overflow: hidden;">{{vm.giftDetailData.send_user_info.nick_name}}</span></div></div></div><div class="statu4" ng-show="vm.orderData.order_type==1&&vm.orderData.gift_order_type==1&&vm.orderData.is_pay==1"><span class="floatL">看看都有谁收了我的礼品</span></div><div class="clear-both"></div><div class="statu6" ng-show="vm.orderData.order_type==1&&vm.orderData.gift_order_type==1"><div class="oderlistcontent" ng-repeat="receiver in vm.giftDetailData.receiver_list"><img ng-src="{{receiver.head_img_url}}" alt="" class="orderlistimg gift-person"><div class="title" style="padding-left: 65px"><span class="floatL" style="width: 70%;overflow: hidden;">{{receiver.receiver_name}}</span></div></div></div><div class="statu8 floatR" ng-show="vm.orderData.order_status==\'待付款\'&&vm.orderData.parent_order_id==\'\'" ng-click="vm.pay()">付款</div><div class="statu8 floatR" ng-show="vm.orderData.order_status==\'已发货\'&&!vm.isCanClick&&vm.orderData.is_main==0" ng-click="vm.confirm()">确认收货</div><a ng-href="#/orderReview/{{vm.orderData.order_id}}" class="statu8 floatR" ng-show="vm.orderData.order_status==\'交易成功\'&&vm.orderData.is_main==0">去评价</a><div ng-show="vm.orderData.order_type==7&&vm.orderData.is_pay==1"><div>考试状态:{{vm.orderData.exam_info.status_text}}</div><div ng-show="vm.orderData.exam_info.status==1"><a href="/app/exam/exam.aspx?id={{vm.orderData.exam_info.exam_id}}">去考试</a></div><div ng-show="vm.orderData.exam_info.status==4||vm.orderData.exam_info.status==5"><a href="/app/exam/exam.aspx?id={{vm.orderData.exam_info.exam_id}}">查看考试结果</a></div></div><div class="clear-both"></div><div ng-if="vm.orderData.order_type == 2"><a href="#/waitForGroupDetail/{{vm.orderData.groupbuy_parent_order_id}}" ng-if="vm.orderData.groupbuy_parent_order_id" class="btn btn-primary btn-block btn-warning mTop10 letterSpacing4">查看该团详情</a> <a href="#/waitForGroupDetail/{{vm.orderData.order_id}}" ng-if="!vm.orderData.groupbuy_parent_order_id && vm.orderData.order_status!=\'待付款\' && vm.orderData.order_status!=\'已取消\'" class="btn btn-primary btn-block btn-warning mTop10 letterSpacing4">查看该团详情</a></div><a href="#/groupGoodsList" ng-if="vm.orderData.order_type == 2" class="btn btn-primary btn-block btn-warning mTop10 letterSpacing4">查看我参与的团</a></div><div style="width:100%;height:26px;float:right"></div></div><div pay-panel="" parms="vm.payPanel" pay-scuss="vm.dealPayScuss" pay-error="vm.dealPayError" show-close="true"></div></div>'),e.put("app/orderList/orderList.html",'<div class="order-list"><div class="header-bar" ng-show="vm.isDefHead"><go-back ng-click="vm.clear_history()"></go-back><div class="header-title">{{vm.title}}</div><a href="/customize/comeoncloud/Index.aspx?key=MallHome" class="btnBackHomeRight"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shouye"></use></svg></a><div class="clear-both"></div></div><div customize-mall-head="" ng-if="!vm.isDefHead"></div><div class="wrap-order-list-body" ng-if="vm.pageData.status != \'待退款\'"><div class="orderlistnav row" style="border-top: 1px solid #dedede;"><div class="single col" ng-class="{select:vm.pageData.status == \'\'}" ng-click="vm.goStatusBtn(\'\')"><div class="all">全部</div><div class="" ng-bind="vm.allCount"></div></div><div class="single col" ng-class="{select:vm.pageData.status == \'待付款\'}" ng-click="vm.goStatusBtn(\'待付款\')"><div class="all">待付款</div><div class="" ng-bind="vm.waitPayCount"></div></div><div class="single col" ng-class="{select:vm.pageData.status == \'待发货\'}" ng-click="vm.goStatusBtn(\'待发货\')"><div class="all">待发货</div><div class="" ng-bind="vm.waitGoodCount">3</div></div><div class="single col" ng-class="{select:vm.pageData.status == \'待收货\'}" ng-click="vm.goStatusBtn(\'待收货\')"><div class="all">待收货</div><div class="" ng-bind="vm.waitReceiveCount"></div></div><div class="single col" ng-class="{select:vm.pageData.status == \'待评价\'}" ng-click="vm.goStatusBtn(\'待评价\')"><div class="all">待评价</div><div class="" ng-bind="vm.waitReviewCount"></div></div><div class="BKline"></div></div></div><div class="wrap-order-list-body"><div class="the-list" ng-style="{\'margin-top\':vm.pageData.status != \'待退款\'?\'20px\':\'-1px\'}"><div class="the-order" ng-repeat="item in vm.pageData.list" ng-show="(item.is_main==1&&item.is_pay==0)||(item.is_pay==1&&item.parent_order_id!=\'\')||(item.parent_order_id==\'\'&&item.is_main==0)" scroll-bottom-bind="vm.loadMoreData()"><div class="order-title"><div class="icon-tuan" ng-show="item.order_type==2"><svg class="icon order-icon themeColor" aria-hidden="true"><use xlink:href="#icon-tuangouyuan"></use></svg></div><div class="icon-yugou" ng-show="item.order_type==0&&item.is_appointment==1"><svg class="icon order-icon themeColor" aria-hidden="true"><use xlink:href="#icon-yugou"></use></svg></div><div ng-if="item.supplier_name!=null&&item.supplier_name!=\'\'"><span>{{item.supplier_name}}</span></div><div class="order-id" ui-sref="orderDetail({orderID:item.order_id})"><span ng-if="item.is_main==1">主</span><span ng-if="item.parent_order_id!=\'\'">子</span>订单号：{{item.order_id}}&nbsp;{{item.order_status}}</div><div class="order-time">{{item.order_time | date:\'yyyy/MM/dd HH:mm\'}}</div><div class="clear-both"></div></div><div class="order-content" ng-repeat="product in item.product_list track by $index"><div class="product-img"><img ng-src="{{product.img_url}}?x-oss-process=image/resize,m_pad,h_140,w_140"></div><div class="product-info" ng-if="item.order_type!=2" ui-sref="orderDetail({orderID:item.order_id})"><div class="product-name">{{product.product_name}}</div><div class="product-sku">{{product.show_property}}</div></div><div class="product-info" ng-if="item.order_type==2" ui-sref="waitForGroupDetail({goodsGroupId:item.order_id})"><div class="product-name">{{product.product_name}}</div><div class="product-sku">{{product.show_property}}</div></div><div class="product-prices"><div class="the-price">{{product.price | currency:\'￥\'}}</div><div class="old-price">{{product.quote_price | currency:\'￥\'}}</div><div class="num">X{{product.count}}</div></div><div class="clear-both"></div></div><div class="total-price">共{{item.product_count}}件商品，合计：{{item.total_amount | currency:\'￥\'}}</div><div class="bottom-wrap"><span class="btn-default" ng-if="item.order_status==\'待付款\'&&item.parent_order_id==\'\'" ng-click="vm.pageFunc.pay(item)">立即支付</span> <span class="btn-active" ng-if="item.order_status==\'已取消\'">已取消</span> <span class="btn-active" ng-if="item.order_status==\'待付款\'&&item.parent_order_id==\'\'" ng-click="vm.pageFunc.deleteorder($index)">取消订单</span> <span class="btn-default" ng-if="item.express_number" ui-sref="expressInfo({orderId:item.order_id})">查看物流</span> <span class="btn-default" ng-if="item.order_status==\'已发货\'" ng-click="vm.pageFunc.confirm($index)">确认收货</span> <a ng-href="#/orderReview/{{item.order_id}}" class="btn-default" ng-if="item.order_status==\'交易成功\' && item.review_score == 0">去评价</a></div></div></div><div class="nomoreorder" ng-if="!vm.nodata">数据加载中~</div><div class="nomoreorder" ng-if="vm.nodata">没有更多订单了额~</div></div><div pay-panel="" parms="vm.payPanel" pay-error="vm.pageFunc.dealPayError" show-close="true"></div></div>'),e.put("app/orderReview/orderReview.html",'<div class="wrapOrderReview"><div class="header-bar"><go-back></go-back><div class="header-title">订单评价</div><a href="/customize/comeoncloud/Index.aspx?key=MallHome" class="btnBackHomeRight"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shouye"></use></svg></a><div class="clear-both"></div></div><div class="wrapProductList list"><div ng-repeat="item in vm.order.product_list"><a class="item item-thumbnail-left item-icon-right" href="#/productDetail/{{item.product_id}}"><img src="{{item.img_url}}?x-oss-process=image/resize,m_pad,h_160,w_160"><h2>{{item.product_name}}</h2><span class="price"><span ng-if="item.price">￥{{item.price}}</span> <span ng-if="item.score"><span ng-if="item.price">+</span> {{item.score}}积分</span></span><svg class="icon iconRight" aria-hidden="true"><use xlink:href="#icon-youjiantou"></use></svg></a><div class="wrapOpeate"><div class="sku"><span>{{item.show_property}}</span></div><a href="javascript:;" class="button button-small" ng-show="item.review_score > 0" ng-click="item.showReviewPanel = !item.showReviewPanel">查看评价<svg class="icon" aria-hidden="true" ng-show="!item.showReviewPanel"><use xlink:href="#icon-arrowdown"></use></svg><svg class="icon" aria-hidden="true" ng-show="item.showReviewPanel"><use xlink:href="#icon-arrowup"></use></svg></a><a href="javascript:;" class="button button-small button-positive themeBackgroundColor themeBorderColor" ng-show="item.review_score == 0" ng-click="item.showReviewPanel = !item.showReviewPanel">填写评价<svg class="icon" aria-hidden="true" ng-show="!item.showReviewPanel"><use xlink:href="#icon-arrowdown"></use></svg><svg class="icon" aria-hidden="true" ng-show="item.showReviewPanel"><use xlink:href="#icon-arrowup"></use></svg></a></div><div class="wrapPostReview" ng-show="item.showReviewPanel"><div class="reviewScore row"><div class="scoreTitle col-20"><span>评分：</span></div><div class="scoreStars col-80"><svg class="icon" aria-hidden="true" ng-repeat="star in item.reviewStars track by $index" ng-click="vf.selectStar($index,item)"><use xlink:href="#icon-yishoucang" ng-if="star"></use><use xlink:href="#icon-shoucang" ng-if="!star"></use></svg></div></div><div><textarea ng-show="item.review_score == 0" placeholder="这次购买的商品满意吗？写点心得给其他顾客参考参考吧。长度在5-150字之间" ng-model="item.review_content"></textarea> <span style="padding: 6px;" ng-show="item.review_score > 0">{{item.review_content}}</span></div><div class="imgTitle" ng-show="!item.comment_img&&item.review_score == 0"><span>添加图片：</span> <span class="title-desc">(最多可上传3张图片)</span></div><div class="weui-cells weui-cells_form" ng-show="!item.comment_img&&item.review_score == 0"><div class="weui-cell" style="padding: 5px;"><div class="weui-cell__bd"><div class="weui-uploader"><div class="weui-uploader__bd"><ul class="weui-uploader__files"><li class="weui-uploader__file" ng-repeat="img in item.imgList track by $index" ng-style="{ \'margin\':\'5px\',\'background-image\':\'url(\'+img+\')\',\'position\':\'relative\' }"><input type="file" data-parent-index="{{$parent.$index}}" data-index="{{$index}}" onchange="angular.element(this).scope().vf.FileInputChange(this,1)" accept="image/jpeg;image/png;image/gif;" class="weui-uploader__input"></li></ul><div class="weui-uploader__input-box" style="margin:5px;position:relative;" ng-if="item.imgList.length<vm.maxImgCount"><input id="uploaderInput" type="file" data-parent-index="{{$parent.$index}}" onchange="angular.element(this).scope().vf.FileInputChange(this,0)" accept="image/jpeg;image/png;image/gif;" multiple="multiple" class="weui-uploader__input"></div></div></div></div></div></div><div class="weui-cells weui-cells_form" style="background-color:#f5f5f5 !important;" ng-show="item.comment_img&&item.imgList.length>0"><div class="weui-cell" style="padding: 5px;"><div class="weui-cell__bd"><div class="weui-uploader"><div class="weui-uploader__bd"><ul class="weui-uploader__files"><li class="weui-uploader__file" ng-repeat="img in item.imgList track by $index" ng-style="{ \'margin\':\'5px\',\'background-image\':\'url(\'+img+\')\',\'position\':\'relative\' }"></li></ul></div></div></div></div></div><div ng-show="item.review_score == 0"><a href="javascript:;" class="button button-block button-positive button-small themeBackgroundColor themeBorderColor" ng-click="vf.submitReview(item)" ng-show="!item.submited">发表评价</a> <a href="javascript:;" class="button button-block button-positive button-small" ng-show="item.submited">评价发表中...</a></div></div><div class="blockLine"></div></div></div></div>'),e.put("app/paySuccess/payError.html",'<div class="pay-success"><h1 class="error">付款失败!</h1><h3>订单金额: <span ng-bind="payMoney|currency:\'￥\':2"></span></h3><a class="btn btn-block btn-success" ui-sref="orderDetail({orderID:order_id})">查看订单</a> <a class="btn btn-block btn-success" ui-sref="home">继续购物</a></div>'),e.put("app/paySuccess/paySuccess.html",'<div class="pay-success"><h1 class="success">付款成功!</h1><h3>订单金额: <span ng-bind="payMoney|currency:\'￥\':2"></span></h3><a class="btn btn-block btn-success" ui-sref="orderDetail({orderID:order_id})">查看订单</a> <a class="btn btn-block btn-success" ui-sref="home">继续购物</a></div>'),e.put("app/productDetail/productDetail.html",'<div class="product-detail"><div class="header-bar" ng-if="vm.mall_config.is_customize_mall_head == 0 || (vm.mall_config.is_customize_mall_head==2 && !isPlus)"><go-back></go-back><div class="header-title">商品详情</div><div class="bug-car" ui-sref="shopBasket"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-gouwuche"></use></svg><div class="card_nums" ng-if="is_shownums" ng-bind="shop_nums" id="lblC">0</div></div><div class="clear-both"></div></div><div customize-mall-head="" ng-if="!(vm.mall_config.is_customize_mall_head == 0 || (vm.mall_config.is_customize_mall_head==2 && !isPlus))"></div><div class="product-img" ng-if="sliderdata[0].datalist.length==1"><img class="img-detail" ng-src="{{sliderdata[0].datalist[0]}}"></div><div ng-if="sliderdata[0].datalist.length>1"><slider aspectratio="{{MALLCONFIG.mallconfignew.product_img_ratio1}}:{{MALLCONFIG.mallconfignew.product_img_ratio2}}" ng-repeat="slider in sliderdata"><slider-item ng-repeat="imgdata in slider.datalist"><img ng-src="{{imgdata}}" class="imgsize100"></slider-item></slider></div><div class="product-info"><div class="product-name">{{productDetailData.title}}</div><div class="warp-price-info"><span ng-if="!vm.isShowPromotion"><span ng-show="productDetailData.price" class="product-price"><span class="font12">￥</span> {{productDetailData.price | currency:"":2}}</span></span> <span ng-if="vm.isShowPromotion"><span ng-show="productDetailData.promotion_price" class="product-price"><span class="font12">￥</span> {{productDetailData.promotion_price | currency:"":2}}</span></span> <span ng-show="productDetailData.score"><span ng-show="productDetailData.price">+</span> <span class="product-price" ng-bind="productDetailData.score"></span> <span>积分</span></span> &nbsp; <span class="rebateScore themeBackgroundColor" ng-if="productDetailData.rebate_score&&!vm.isComeoncloud">送 {{productDetailData.rebate_score}} 积分</span> &nbsp; <span class="old-price" ng-show="MALLCONFIG.mallconfignew.is_show_oldprice && productDetailData.price <= orderProduct.quote_price">{{orderProduct.quote_price | currency:"￥":2}}</span> <span class="product_sale" ng-if="vm.mall_config.is_show_product_sale">销量：{{productDetailData.sale_count}}</span></div><div ng-if="productDetailData.appointment_info.status==0"><div class="wrapPromotion appointmentbg"><span class="floatL">{{productDetailData.appointment_info.appointment_start_time|date:\'yyyy年-MM月-dd日 hh:mm:ss\'}}</span> &nbsp;开始预购<div class="clear"></div></div></div><div ng-if="productDetailData.appointment_info.status==1&&1==0"><div class="wrapPromotion appointmentbg"><span class="floatL">{{productDetailData.appointment_info.appointment_end_time|date:\'yyyy年-MM月-dd日 hh:mm:ss\'}}</span> &nbsp;结束预购<div class="clear"></div></div></div><div ng-show="productDetailData.is_appointment==1&&productDetailData.appointment_info.status==1"><div class="wrapPromotion appointmentbg"><span class="floatL top3">预购时间还剩<span ng-if="vm.leftDay1">{{vm.leftDay1}}天</span><span ng-if="vm.leftHour1">{{vm.leftHour1}}时</span>{{vm.leftMinus1}}分{{vm.leftSecond1}}秒结束</span> <span class="topleftdiscount themeBackgroundColor floatR">预购中</span><div class="clear"></div></div><div ng-if="productDetailData.appointment_info.status==1"><div class="font12 pLeft10 pTop4"><span class="floatL">注：购买后 <span class="top1">{{productDetailData.appointment_info.appointment_delivery_time|date:\'yyyy-MM-dd\' }}</span></span> &nbsp;前发货<div class="clear"></div></div></div></div></div><div class="blockLine"></div><div ng-if="vm.isShowPromotion"><div class="wrapPromotion"><span class="floatL"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shizhong"></use></svg>还剩<span ng-if="vm.leftDay">{{vm.leftDay}}天</span><span ng-if="vm.leftHour">{{vm.leftHour}}时</span>{{vm.leftMinus}}分{{vm.leftSecond}}秒结束</span> <span class="topleftdiscount themeBackgroundColor floatR">特卖中￥{{productDetailData.promotion_price| number:2}}</span><div class="clear"></div></div><div class="blockLine"></div></div><div class="product-info-more"><ul><li>商品介绍</li></ul></div><div class="img-text-info" ng-bind-html="mallConfig.mall_desc_top"></div><div class="img-text-info" ng-bind-html="productDetailData.product_desc"></div><div class="img-text-info" ng-bind-html="mallConfig.mall_desc_bottom"></div><div class="wrapReview" ng-show="vm.reviewList.length > 0"><div class="blockLine"></div><div class="product-info-more"><ul><li>商品评价</li></ul></div><div class="wrapReviewList"><div class="review" ng-repeat="item in vm.reviewList"><div class="title"><img class="floatL userAvatar" ng-src="{{item.pub_user.avatar}}" onerror="javascript:this.src=\'/img/userhead.png\';" alt=""> <span class="userName floatL">{{item.pub_user.name}}</span><div class="starList floatR"><svg class="icon" aria-hidden="true" ng-repeat="star in item.stars"><use xlink:href="#icon-yishoucang"></use></svg></div><div class="clear"></div></div><div>{{item.content}}</div><div class="weui-cells weui-cells_form" style="margin-bottom:0px;" ng-if="item.comment_img"><div class="weui-cell" style="padding: 0px;margin-bottom:0px;"><div class="weui-cell__bd" style="margin-bottom:0px;"><div class="weui-uploader" style="margin-bottom:0px;"><div class="weui-uploader__bd" style="margin-bottom:0px;"><ul class="weui-uploader__files" style="margin-bottom:0px;"><li class="weui-uploader__file" ng-repeat="img in item.comment_img.split(\',\') track by $index"><img ng-style="{\'margin\':\'5px 5px 0px 0px;\',\'width\':\'100%\',\'height\':\'100%\'}" ng-src="{{img}}"></li></ul></div></div></div></div></div><div class="showprops">{{item.showprops}}</div><div>{{item.time | date:\'yyyy-MM-dd\'}}</div></div></div></div></div><div class="footer-buy" ng-show="sysConfig"><div class="collection-wrap borderRightGrey width13P"><div class="collection-img themeColor" ng-click="goToOtherUrl()"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shouye"></use></svg></div><div class="collection-text font12">首页</div></div><div ng-show="vm.isSonghe" class="collection-wrap borderRightGrey width13P" ng-click="vm.showShare=true"><div class="collection-img themeColor"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-fenxiang"></use></svg></div><div class="collection-text font12">分享</div></div><div ng-show="!vm.isSonghe" class="collection-wrap borderRightGrey width13P" ng-click="vf.gotoKefu()"><div class="collection-img themeColor"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-liuyan"></use></svg></div><div class="collection-text font12">客服</div></div><div class="collection-wrap width13P" ng-click="addCollectFunc()" ng-if="!productDetailData.is_collect"><div class="collection-img"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shoucang2"></use></svg></div><div class="collection-text font12">收藏</div></div><div class="collection-wrap width13P" ng-click="delCollectFunc()" ng-if="productDetailData.is_collect"><div class="collection-img collect-yellow"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shoucang1"></use></svg></div><div class="collection-text font12">收藏</div></div><div class="shopping-car" ng-click="addToShopCar()">加入购物车</div><div class="buy-now themeBackground" ng-click="buyNow()" ng-show="productDetailData.is_appointment==0">立即购买</div><div class="buy-now themeBackground appointment" ng-click="buyNow()" ng-show="productDetailData.is_appointment==1&&productDetailData.appointment_info.status==1">立即预购</div><div class="buy-now themeBackground appointment" ng-show="productDetailData.is_appointment==1&&productDetailData.appointment_info.status==0">未到预购时间</div><div class="buy-now themeBackground appointment" ng-show="productDetailData.is_appointment==1&&productDetailData.appointment_info.status==2">预购时间已过</div><div class="clear-both"></div></div><div class="sku-page" ng-show="showSKU"><div class="sku-content"><div class="sku-div"><div class="sku-img-wrap"><img class="sku-img" ng-src="{{vm.sku_img}}"></div><div class="sku-txt"><div class="guanbi" ng-click="skuClose()"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-guanbi"></use></svg></div><div class="sku-price"><span ng-show="orderProduct.price">{{orderProduct.price | currency:"￥":2}}</span> <span ng-show="orderProduct.score"><span ng-show="orderProduct.price">+</span> {{orderProduct.score}} <span>积分</span></span></div><span class="rebateScore" ng-if="orderProduct.rebate_score">返利 {{orderProduct.rebate_score}} 积分</span><div ng-show="!vm.mall_config.is_show_stock">库存{{orderProduct.count}}件</div><div ng-show="vm.mall_config.is_show_stock"><div ng-show="orderProduct.count>0&&orderProduct.count>=vm.mall_config.is_show_stock_value">库存充足</div><div ng-show="orderProduct.count>0&&orderProduct.count<vm.mall_config.is_show_stock_value">库存紧张</div><div ng-show="orderProduct.count==0">无库存</div></div></div><div class="clear-both"></div></div><div id="sku-main-panel" class="sku-main-panel"><div class="sku-div" ng-repeat="propertyItem in productPropertyData" ng-init="skuIndex=$index"><div class="sku-name">{{propertyItem.name}}</div><span class="sku-value-label" ng-repeat="propertyValue in propertyItem.values" ng-click="selectSkuValue(skuIndex,$index)" ng-class="{\'sku-value-label-checked\':propertyValue.checked,\'sku-value-label-nocheck\':propertyValue.countnum==0}">{{propertyValue.value}}</span><div class="clear"></div></div><div class="clear"></div></div><div class="sku-div"><div class="buy-num-name">购买数量</div><div class="buy-num-wrap"><span class="buy-num-del" ng-click="delNum()"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-jian"></use></svg></span> <input type="input" class="buy-num" ng-model="orderProduct.num" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}" ng-change="checknum()"> <span class="buy-num-add" ng-click="addNum()"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-jianum"></use></svg></span></div><div class="clear-both"></div></div><div class="sure-bt btnBuySureConfirm themeBackground" ng-show="buynow&&Basket!=2" ng-click="buySure()">确&nbsp;定</div><div class="sure-bt btnCarSureConfirm themeBackground" ng-show="!buynow&&Basket!=2" ng-click="carSure()">确&nbsp;定</div><div class="sure-bt btnGiveGiftBtnConfirm themeBackground" ng-show="Basket==2" ng-click="giveGiftBtn()">送&nbsp;礼</div></div></div><div class="stock-page" ng-show="vm.showStock"><div class="stock-content"><div class="sku-div"><div class="sku-txt"><div class="guanbi" ng-click="stockClose()"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-guanbi"></use></svg></div><div class="stock-title">缺货登记表</div><div class="stock-desc">您选择的商品当前没有库存,请登记你所需要的商品规格。</div></div><div class="clear-both"></div></div><div id="stock-main-panel" class="stock-main-panel"><div class="sku-div" ng-repeat="propertyItem in vm.noStockPVList"><div class="sku-name">{{propertyItem.name}}</div><span class="sku-value-label" ng-class="{\'sku-value-label-checked\':propertyValue.selected,\'sku-value-label-nocheck\':!propertyValue.canSelect}" ng-repeat="propertyValue in propertyItem.values" ng-click="vf.selectNoStockPV(propertyValue)">{{propertyValue.value}}</span><div class="clear"></div></div><div class="clear"></div></div><div class="sku-div"><div class="buy-num-name">登记数量</div><div class="buy-num-wrap"><span class="buy-num-del" ng-click="stockDelNum()"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-jian"></use></svg></span> <input type="input" maxlength="5" class="buy-num" ng-model="stockProduct.num" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}" ng-change=""> <span class="buy-num-add" ng-click="stockAddNum()"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-jianum"></use></svg></span></div><div class="clear-both"></div></div><div class="sure-bt"><a ng-click="stockSubmit()">提&nbsp;交</a></div></div></div><div ng-show="vm.showShare" ng-style="{\'height\':vm.i_height+\'px\'}" style="width: 100%; background: #000; opacity: 0.7; position: fixed; top: 0; left: 0; z-index: 999999; text-align: right;" ng-click="vm.showShare=false">&nbsp;</div><div ng-show="vm.showShare" style="position: fixed; z-index: 1000000; right: 0; top: 0; width: 100%; text-align: right;" ng-click="vm.showShare=false"><img src="http://comeoncloud-static.oss-cn-hangzhou.aliyuncs.com/img/sharetip.png" width="100%"></div><div ng-show="vm.showWxPay" ng-style="{\'height\':vm.i_height+\'px\'}" style="width: 100%; background: #000; opacity: 0.7; position: fixed; top: 0; left: 0; z-index: 999999; text-align: right;" ng-click="vm.showWxPay=false">&nbsp;</div><div ng-show="vm.showWxPay" style="position: fixed; z-index: 1000000; right: 0; top: 0; width: 100%; text-align: right;" ng-click="vm.showWxPay=false"><img src="http://comeoncloud.comeoncloud.net/img/paytip.png" width="100%"></div>'),
e.put("app/productList/productList.html",'<div class="wrapProductList"><div class="product-list-wrap"><div class="header" ng-if="sysConfig.malll.is_customize_mall_head == 0 || (sysConfig.malll.is_customize_mall_head==2 && !isPlus)"><div class="menu-wrap" ng-click="showMenus()"><svg class="icon mulu" aria-hidden="true"><use xlink:href="#icon-mulu"></use></svg></div><div class="search-wrap"><span class="the-logo"><svg class="icon fangdajing" aria-hidden="true"><use xlink:href="#icon-fangdajing"></use></svg></span> <span class="the-search"><input type="text" ng-model="pdlist.pageData.searchInfo" id="searchInput" placeholder="{{pdlist.placeholder}}" class="search-input" ng-focus="pdlist.startSearch()" ng-blur="pdlist.nosearch()" ng-change="pdlist.checkSearchInfo()"><div class="clear-both"></div></span><div class="clear-both"></div></div><div class="cancel-btn" ng-if="pdlist.quxiao" ng-click="pdlist.cancelSearch()">取消</div><div class="search-btn" ng-if="pdlist.searchBtn" ng-click="pdlist.goSearch()">搜索</div><div class="clear-both"></div></div><div customize-mall-head="" ng-if="!(sysConfig.malll.is_customize_mall_head == 0 || (sysConfig.malll.is_customize_mall_head==2 && !isPlus))"></div><div class="sale-sku" ng-style="{\'top\':!(sysConfig.malll.is_customize_mall_head == 0 || (sysConfig.malll.is_customize_mall_head==2 && !isPlus))?\'44px\':\'50px\'}"><div class="sale-sku-item" ng-class="{currSelected:pdlist.selected==1}" ng-click="pdlist.sortByPrice(\'\');pdlist.selected=1;">默认</div><div class="sale-sku-item" ng-class="{currSelected:pdlist.selected==2}" ng-click="pdlist.sortByPrice(\'price_asc\');pdlist.selected=2;">价格↑</div><div class="sale-sku-item" ng-class="{currSelected:pdlist.selected==3}" ng-click="pdlist.sortByPrice(\'price_desc\');pdlist.selected=3;">价格↓</div><div class="sale-sku-item" ng-class="{currSelected:pdlist.selected==4}" ng-click="pdlist.sortByPrice(\'sales_volume\');pdlist.selected=4;">销量</div></div><div class="condition-mask" ng-show="pdlist.conditionSort" ng-click="pdlist.closeCondition()"></div><div class="content" ng-style="{\'margin-top\':!(sysConfig.malll.is_customize_mall_head == 0 || (sysConfig.malll.is_customize_mall_head==2 && !isPlus))?\'42px\':\'86px\'}"><product-box-list scroll-bottom-bind="pdlist.loadMoreData()"><product-box ng-click="pdlist.goProductDetail(productItem)" ng-repeat="productItem in pdlist.productListData track by $index" class="col-50"></product-box></product-box-list></div></div><side-menu ng-show="sideMenus"></side-menu><footer-bar ng-if="!pdlist.searchMask&&!pdlist.searchRelateMask"></footer-bar></div>'),e.put("app/receiveAddress/receiveAddress.html",'<div class="receive-address"><div class="header-bar"><go-back></go-back><div class="header-title">寄送地址</div><div class="clear-both"></div></div><div class="info-wrap"><input class="info-input margin-tp20 black" placeholder="姓名" ng-model="pageData.consigneename"> <input class="info-input margin-tp14" placeholder="手机号" ng-model="pageData.phone"><select class="info-input margin-tp14" ng-change="pageFunc.getCity()" ng-model="pageData.province" ng-options="province.name for province in pageData.provinceList"></select><select class="info-input margin-tp14" ng-change="pageFunc.getDistrict()" ng-model="pageData.city" ng-options="city.name for city in pageData.cityList"></select><select class="info-input margin-tp14" ng-model="pageData.district" ng-options="district.name for district in pageData.districtList"></select><textarea class="margin-tp14 addtext" placeholder="详细地址" ng-model="pageData.address"></textarea><div class="publicbtn margin-tp45 themeBackgroundColor" ng-click="pageFunc.addReceiveAddress()">确认寄送信息</div></div></div>'),e.put("app/receiveAddressList/receiveAddressList.html",'<div class="receive-address-list"><div class="header-bar"><go-back></go-back><div class="header-title">地址列表</div><div class="clear-both"></div></div><div class="receive-item">增加新地址<div class="edit-bt floatR" ui-sref="receiveAddress"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-edit"></use></svg>添加</div><div class="clear-both"></div></div><div class="receive-item" ng-repeat="item in pageData.list"><p ng-click="isGotoCreateBtn(item)">{{item.consigneename}} {{item.phone}}</p><p class="gray78" ng-click="isGotoCreateBtn(item)">{{item.province}} {{item.city}} {{item.dist}} {{item.address}}</p><div><svg class="icon red-select themeColor floatL" ng-show="item.isdefault==1" aria-hidden="true"><use xlink:href="#icon-iconfontxuanze"></use></svg><span class="gray78" ng-show="item.isdefault==1">&nbsp;&nbsp;默认地址</span><svg class="icon white-select floatL" ng-show="item.isdefault==0" aria-hidden="true" ng-click="pageFunc.setDefaultReceiveAdd(item)"><use xlink:href="#icon-iconfontxuanze"></use></svg><span class="gray78" ng-show="item.isdefault==0" ng-click="pageFunc.setDefaultReceiveAdd(item)">&nbsp;&nbsp;设为默认地址</span><div class="edit-bt floatR" ng-click="pageFunc.deleteReceiveAddress(item.address_id)"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-guanbi"></use></svg>删除</div><div class="edit-bt floatR" ui-sref="receiveAddressUpdata({addressId:item.address_id})"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-edit"></use></svg>编辑</div><div class="clear-both"></div></div></div></div>'),e.put("app/saleList/saleList.html",'<div class="wrapSaleList"><div class="header-bar"><go-back ng-click="vm.clear_history()"></go-back><div class="header-title">{{vm.title}}</div><div class="clear-both"></div></div><shopslider aspectratio="640:230"><shop-slider-item ng-repeat="imgdata in vm.sliderdata"><img ng-src="{{imgdata.img_url}}" class="imgsize100"></shop-slider-item></shopslider><div class="row wrapSaleTab"><div class="col-sm-12"><div class="scroll-overflow" ng-if="vm.showscrollx" iscroll-x="" scroll-data="vm.scrollxyData"><table id="sale"><tr><td class="sale-time-item" ng-class="{onthesale:(scrollx.isSelected==$index)}" ng-repeat="scrollx in vm.scrollxyData" ng-click="vm.clickWeek(scrollx,$index)"><div class="font14" ng-bind="scrollx.promotion_activity_name"></div><div class="font14">{{scrollx.promotion_activity_start_time | date:\'MM-dd HH:mm\'}}至{{scrollx.promotion_activity_stop_time | date:\'MM-dd HH:mm\'}}</div><div class="font16" ng-if="scrollx.status==0">正在疯抢</div><div class="font16" ng-if="scrollx.status==1">抢先看</div><div class="font16" ng-if="scrollx.status==2">已结束</div></td></tr></table></div></div></div><div class="account-down red icon_middle_time" ng-if="vm.stopCompare>0"><svg class="icon font20 black icon-middle" aria-hidden="true"><use xlink:href="#icon-xianshitejia"></use></svg>&nbsp;还剩 {{vm.pageData.leftDay}} 天{{vm.pageData.leftHour}} 时 {{vm.pageData.leftMinus}} 分 {{vm.pageData.leftSecond}} 秒{{vm.leftName}}</div><div class="account-down red icon_middle_time" ng-if="vm.stopCompare<0">该特卖场次已结束</div><div class="sale-sku"><div class="sale-sku-item" ng-show="0"><span class="circle"></span>&nbsp;显示有货</div><div class="sale-sku-item" ng-show="0"><svg class="icon font13" aria-hidden="true"><use xlink:href="#icon-alarm-clock"></use></svg>&nbsp;订阅开抢通知</div><div class="sale-sku-item gray78"><svg class="icon font13" aria-hidden="true"><use xlink:href="#icon-alarm-clock"></use></svg>&nbsp;已订阅</div><div class="sale-sku-item" ng-click="vm.tabClick(0)"><svg class="icon font13" aria-hidden="true"><use xlink:href="#icon-shangxiajian01"></use></svg>价格</div><div class="sale-sku-item" ng-click="vm.tabClick(1)"><svg class="icon font13" aria-hidden="true"><use xlink:href="#icon-shangxiajian01"></use></svg>折扣</div></div><product-box-list scroll-bottom-bind="vm.loadMoreData()"><sale-box style="width: 100%;" ng-repeat="dataBox in vm.saleProductList"></sale-box></product-box-list></div>'),e.put("app/searchPage/searchPage.html",'<div class="wrapSearchPage"><div class="header"><div class="searchLeft"><span class="the-logo"><svg class="icon fangdajing" aria-hidden="true"><use xlink:href="#icon-fangdajing"></use></svg></span> <span class="the-search"><input class="search-input" ng-model="vm.keywords" ng-change="vf.isHasValue()" ng-focus="vm.isSearch=true" type="text" placeholder="搜索"></span></div><div class="searchRight"><a href="javascript:;" ng-click="vf.goBack()" ng-show="!vm.isSearch" class="btn cancelStyle">取消</a> <a href="javascript:;" ng-click="vf.searchKey()" ng-show="vm.isSearch" class="btn searchStyle">搜索</a></div></div><div class="wrapTags"><div class="tagTitle">热门搜索</div><div class="tags"><a href="javascript:;" ng-repeat="item in vm.tags">{{item.tag_name}}</a></div></div><div class="historyTags">历史记录</div><div class="wrapContent"><div class="historyWrap" ng-repeat="value in vm.keyTexts">{{value}}</div></div><div class="clearHistory"><button class="btn" ng-click="vf.removeHistory()">清空搜索记录</button></div></div>'),e.put("app/shopBasket/shopBasket.html",'<div class="shopheader" ng-if="vm.defHead"><go-back></go-back><div class="header-title">购物车</div><div class="clear-both"></div></div><div customize-mall-head="" ng-if="!vm.defHead"></div><div class="addshoppro" ng-repeat="supplieritem in basketListDataGroup"><div ng-if="supplieritem.supplier_name!=\'\'"><div class="floatL selectbox" ng-click="slectemeBtnSupplier(supplieritem)"><svg class="icon noselect" ng-class="{\'selected\':supplieritem.selected == true}" aria-hidden="true"><use xlink:href="#icon-iconfontxuanze"></use></svg></div><span ng-click="slectemeBtnSupplier(supplieritem)">{{supplieritem.supplier_name}}</span><hr></div><div class="onepro" ng-repeat="item in supplieritem.product_list" style="border-bottom:none;"><div class="floatL selectbox" ng-click="slectemeBtn(item)"><svg class="icon noselect" ng-class="{\'selected\':item.selected == true}" aria-hidden="true"><use xlink:href="#icon-iconfontxuanze"></use></svg></div><div class="floatL proimg" ui-sref="productDetail({id:item.product_id})"><img ng-src="{{item.img_url}}" alt=""></div><div class="oneproinfo floatL"><div class="oneproinfotitle lineheight_30"><span class="floatL protitle" ui-sref="productDetail({id:item.product_id})">{{item.title}}</span> <span class="delbot" ng-click="delme(item,$event)">删除</span></div><div class="lineheight_30">{{item.properties}}</div><div class="editnumbot"><span class="floatL">数量</span><div class="floatL editbox"><svg class="icon editboxL" aria-hidden="true" ng-click="delnum(item,$event)"><use xlink:href="#icon-jian"></use></svg><div class="editnumbox"><input type="text" ng-model="item.count" ng-change="checknum(item)"></div><svg class="icon editboxR" aria-hidden="true" ng-click="addnum(item,$event)"><use xlink:href="#icon-jianum"></use></svg></div><div class="onepropri"><span ng-show="item.price">{{item.price * item.count | currency:\'￥\'}}</span> <span ng-show="item.score"><span ng-show="item.price">+</span> <span>{{item.score * item.count}}</span> <span>积分</span></span></div></div></div></div><div><hr></div><div class="clearboth"></div></div><div class="emptybasket" ng-if="showempty"><div class="emptyicon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-gouwuche"></use></svg></div><h4 class="font20">&nbsp;&nbsp;购物车空空如也！</h4><div class="font16 colora0">快来给自己挑点宝贝吧</div><div class="gotopro" ng-click="goHome()"><a href="" class="font16">去逛逛</a></div></div><div style="height:100px;width:100%;"></div><div class="shopbottom" ng-class="{\'btmZero\':!hasBottomNav}"><div class="lblRemark"><svg class="icon noselect" ng-class="{selected:selectedall == true}" aria-hidden="true" ng-click="selectedallBtn()"><use xlink:href="#icon-iconfontxuanze"></use></svg><span ng-click="selectedallBtn()">全选</span> &nbsp;合计：</div><div class="lblTotal"><span class="fontyellow"><span ng-show="productTotalPrice">{{productTotalPrice | currency:\'￥\'}}</span> <span ng-show="productTotalPrice"><br>不含运费</span> <span ng-show="productTotalScore"><br><span ng-show="productTotalPrice">+</span> <span>{{productTotalScore}}</span> <span>积分</span></span></span></div><div class="buybtn themeBackground" ng-click="goCreateOrder()">去结算</div></div>'),e.put("app/userMange/userMange.html",'<div ng-if="false"><div class="header-bar"><go-back></go-back><div class="header-title">用户信息</div><div class="more button button-small" ng-if="!vm.isShowEdit&&vm.isShowBtn" ng-click="vf.getUserField();vm.isShowEdit=true;">编辑</div><div class="more button button-small" ng-if="vm.isShowEdit&&vm.isShowBtn" ng-click="vf.beforeSubmitCheck()">保存更改</div><div class="clear-both"></div></div><form class="form-horizontal" ng-if="vm.isShowEdit" ng-submit="vf.beforeSubmitCheck()"><div class="editinfo inputedit" ng-repeat="item in vm.fieldList" ng-class="{mTop:$index==0}"><div class="info-one" ng-class="{marginTop20:$index==0}"><div class="onleft">{{item.field_name}}：</div><div class="more" ng-if="item.type==\'txt\'"><input type="text" ng-disabled="{{(item.read_only==1)}}" ng-class="{width100:item.type==\'txt\'}" ng-model="item.value" placeholder="{{item.field_name}}" ng-required="{{(item.no_null==1)}}" ng-change="vf.isPhoneChange(item)"></div><div class="more" ng-if="item.type==\'img\'" ng-required="{{(item.no_null==1)}}"><label class="addpicbtn label0 fileContainer" for="upLoadImg0"><svg class="icon font28 jia0" aria-hidden="true"><use xlink:href="#icon-jia"></use></svg><input class="userpic" ng-disabled="{{(item.read_only==1)}}" accept="image/*" type="file" id="upLoadImg0"></label></div><div class="more" ng-if="item.type==\'sex\'"><span><input class="radiobtn" ng-disabled="{{(item.read_only==1)}}" type="radio" id="rdoSexGender1" ng-model="item.value" name="rdoSexGender" value="1"> <span class="radio-male" for="rdoSexGender1">男</span> <input class="radiobtn" ng-disabled="{{(item.read_only==1)}}" type="radio" id="rdoSexGender2" ng-model="item.value" name="rdoSexGender" value="0"> <span class="radio-male" for="rdoSexGender2">女</span></span></div><div class="more" ng-if="item.type==\'date\'" ng-required="{{(item.no_null==1)}}"><input type="date" ng-disabled="{{(item.read_only==1)}}" ng-model="item.value" placeholder="{{item.field_name}}"></div><div class="more" ng-if="item.type==\'mult\'"><textarea class="Description" ng-disabled="{{(item.read_only==1)}}" rows="5" ng-model="item.value" placeholder="{{item.field_name}}" ng-required="{{(item.no_null==1)}}"></textarea></div><div class="clear-both"></div></div><div class="info-one" ng-if="(item.field==\'Phone\'&&vm.isPhoneNull)||(item.field==\'Phone\'&&vm.isShowCode)"><div class="onleft">验证码：</div><div class="more"><input class="checkcode" type="text" ng-model="vm.code" placeholder="验证码" ng-required="{{(vm.fieldList[vm.phoneIndex].no_null==1)}}"> <button type="button" class="button button-small button-positive getSMSCode" ng-if="vm.waitTime==0" ng-click="vf.getSMSCode(item.value)">发送验证码</button> <button type="button" class="button button-small button-positive getSMSCodeWait" ng-if="vm.waitTime!=0">等待({{vm.waitTime}})</button></div><div class="clear-both"></div></div></div></form><div class="editinfo" ng-if="!vm.isShowEdit" ng-repeat="item in vm.fieldList" ng-class="{mTop:$index==0}"><div class="info-one" ng-class="{marginTop20:$index==0}"><div class="onleft">{{item.field_name}}：</div><div class="more" ng-if="item.type==\'txt\'"><div class="showstyle" ng-class="{width100:item.type==\'txt\'}">{{item.value}}</div></div><div class="more" ng-if="item.type==\'img\'" ng-required="{{(item.no_null==1)}}"><label class="addpicbtn label0 fileContainer" for="upLoadImg0"><img class="" ng-src="{{item.value}}"></label></div><div class="more" ng-if="item.type==\'sex\'"><span><span class="" ng-if="item.value==1">男</span> <span class="" ng-if="item.value==0">女</span></span></div><div class="more" ng-if="item.type==\'date\'" ng-required="{{(item.no_null==1)}}"><div class="showstyle" ng-class="{width100:item.type==\'date\'}">{{item.value | date:\'yyyy-MM-dd\'}}</div></div><div class="more" ng-if="item.type==\'mult\'"><div class="Description borderNone">{{item.value}}</div></div><div class="clear-both"></div></div></div></div><div class="wrapUserManage"><div class="header-bar" ng-if="sysConfig.malll.is_customize_mall_head==2 && !isPlus"><go-back></go-back><div class="header-title">用户信息编辑</div><div class="clear-both"></div></div><div customize-mall-head="" ng-if="!(sysConfig.malll.is_customize_mall_head == 0 || (sysConfig.malll.is_customize_mall_head==2 && !isPlus))"></div><input type="file" style="display: none;" accept="image/*" class="fileimg" id="upLoadImg0"><div class="list mTop"><div ng-repeat="item in vm.fieldList"><label class="item item-input item-stacked-label margin0"><div class="header" ng-if="item.type==\'img\'"><div class="warp-img"><img src="{{item.value}}" ng-click="vf.updateImg($index)" class="img-circle"> <a ng-if="item.read_only==0" ng-click="vf.updateImg($index)"><br><br>更换头像</a></div></div><div ng-if="item.type!=\'img\'" class="item-no-img"><span class="input-label left-label" ng-bind="item.field_name"></span><svg class="icon icon-right" aria-hidden="true" role="button" tabindex="0"><use xlink:href="#icon-xiayibu"></use></svg><input class="bgWhite" ng-if="item.type==\'txt\'" ng-disabled="{{(item.read_only==1)}}" ng-required="{{(item.no_null==1)}}" type="text" ng-model="item.value" placeholder="{{item.field_name}}" ng-change="vf.isPhoneChange(item)"> <input class="bgWhite" ng-if="item.type==\'number\'" ng-disabled="{{(item.read_only==1)}}" ng-required="{{(item.no_null==1)}}" type="number" ng-model="item.value" placeholder="{{item.field_name}}"><div class="more" ng-if="item.type==\'img\'" ng-required="{{(item.no_null==1)}}"><label class="addpicbtn label0 fileContainer" for="upLoadImg0"><img class="" ng-src="{{item.value}}"></label></div><div class="more" ng-if="item.type==\'sex\'"><select class="item-select" ng-model="item.value" ng-disabled="{{(item.read_only==1)}}" ng-options="type.value as type.text for type in vm.sexTypes"><option value="">--请选择性别--</option></select></div><div class="more" ng-if="item.type==\'date\'"><input class="item-text" ng-disabled="{{(item.read_only==1)}}" type="date" ng-model="item.value"></div><div class="more" ng-if="item.type==\'mult\'"><textarea ng-class="{editable:item.read_only!=0}" class="Description" ng-disabled="{{(item.read_only==1)}}" ng-model="item.value" placeholder="{{item.field_name}}" ng-required="{{(item.no_null==1)}}"></textarea></div><div class="warp-border"></div></div></label> <label class="item item-input item-stacked-label margin0" ng-if="(item.field==\'Phone\' && vm.isPhoneNull)||(item.field==\'Phone\'&&vm.isShowCode)"><span class="input-label left-label">验证码</span><div class="editmore"><input class="checkcode" style="border:0px;background: #fff;" ng-disabled="{{(item.read_only==1)}}" type="text" ng-model="vm.code" placeholder="验证码" ng-required="{{(vm.fieldList[vm.phoneIndex].no_null==1)}}"> <button type="button" class="button button-small button-positive getSMSCode" ng-if="vm.waitTime==0" ng-click="vf.getSMSCode(item.value)">发送验证码</button> <button type="button" class="button button-small button-positive getSMSCodeWait" ng-if="vm.waitTime!=0">等待({{vm.waitTime}})</button></div><div class="warp-border"></div></label></div><div class="btn-save themeBackground" type="submit" ng-click="vf.beforeSubmitCheck()">保存更改</div></div></div>'),e.put("app/collectList/housesCollectList/housesCollectList.html",'<div class="wrapCollect"><div class="collectList"><div class="row repeat-div" ng-click="vf.gotoHousesDetail(mall.product_id)" ng-repeat="mall in vm.productListData track by $index" scroll-bottom-bind="vm.loadMoreData()"><div class="col-xs-4 img-wrap"><img class="product-img lazy" src="{{mall.img_url}}"></div><div class="col-xs-8 content-warp"><div class="nav-top"><div class="title" ng-bind="mall.title"></div><div class="province">{{mall.province}}<span ng-show="mall.city">&nbsp;-&nbsp;</span>{{mall.city}}</div></div><div class="price"><span>{{mall.price}}元/㎡</span></div><div class="clear"></div><div class="tags"><a href="javascript:;" ng-repeat="item in mall.tags.split(\',\')">{{item}}</a></div><div class="builds" ng-show="mall.ex1"><div class="area">建筑面积：{{mall.ex1}}㎡</div><div ng-show="1==1" class="room"><svg class="icon collectKong" aria-hidden="true"><use xlink:href="#icon-weiguanzhu"></use></svg><span>{{mall.category_name}}新房</span></div><div ng-show="1==2" class="room"><svg class="icon collectKong" aria-hidden="true"><use xlink:href="#icon-weiguanzhu"></use></svg><span>{{mall.category_name}}二手房</span></div></div></div></div><div class="loadingTap"><span ng-show="vm.loadingTag">加载中~</span> <span ng-show="vm.loadingEndTag">没有更多了~</span></div></div></div>'),e.put("app/components/AngularRenderEnd/renderEnd.html",""),e.put("app/components/checkCoupon/checkCoupon.html",'<div class="check_coupon_box"><div class="couponbox" ng-click="ccvm.openCouponCheckBox()"><div ng-if="!checkedCouponInfo.cardcoupon_name && ccvm.couponLoadDone" ng-class="{\'haveCoupon\':canuserCount>0}"><span class="couponSelectTip" ng-show="canuserCount>0">您有<span class="num" ng-bind="canuserCount">0</span>张{{cardcoupon_show_name}}可用，点击选择</span> <span ng-show="!canuserCount">没有可用{{cardcoupon_show_name}}</span></div><div ng-if="checkedCouponInfo.cardcoupon_name && ccvm.couponLoadDone" class="font16"><span class="title">已选{{cardcoupon_show_name}}: <span class="name" ng-bind="checkedCouponInfo.cardcoupon_name"></span></span><br><span class="error" ng-if="orderTotalPrice<checkedCouponInfo.buckle_amount">(订单金额低于<span ng-bind="checkedCouponInfo.buckle_amount"></span>元，无法使用该{{cardcoupon_show_name}})</span></div><div ng-if="!ccvm.couponLoadDone">{{cardcoupon_show_name}}信息加载中，请稍候...</div></div><div class="couponcheckbox" ng-if="ccvm.couponCheckBoxStatus"><div class="nocoupon" ng-if="ccvm.couponData.length<1">——您还没有{{cardcoupon_show_name}}——</div><div class="coupon" ng-if="!cp.cantuse" ng-class="{outdate:orderTotalPrice<cp.buckle_amount || cp.cantuse||orderTotalPrice<cp.freefreight_amount}" ng-click="ccvm.checkcoupon(cp)" ng-repeat="cp in ccvm.couponData"><div class="title" ng-bind="cp.cardcoupon_name"></div><div class="ischecked"><span class="checkicon" ng-class="{thisischecked:cp.checked}"><span class="icon"></span></span></div><div class="type"><span ng-if="cp.cardcoupon_type==0">折扣券</span> <span ng-if="cp.cardcoupon_type==1">现金券</span> <span ng-if="cp.cardcoupon_type==2">免邮券</span> <span ng-if="cp.cardcoupon_type==3">满减券</span> <span ng-if="cp.cardcoupon_type==4">满送券</span></div><div class="title"><div ng-if="cp.cardcoupon_type==0"><span class="big-word">{{cp.discount}}</span> 折</div><div ng-if="cp.cardcoupon_type==1">￥<span class="big-word">{{cp.deductible_amount}}</span></div><div ng-if="cp.cardcoupon_type==3">￥<span class="big-word">{{cp.buckle_sub_amount}}</span></div><div ng-if="cp.cardcoupon_type==4">￥<span class="big-word">{{cp.buckle_sub_amount}}</span></div></div><div class="rangetime">有效期: <span ng-bind="cp.valid_from | date:\'yyyy.MM.dd\'"></span> - <span ng-bind="cp.valid_to | date:\'yyyy.MM.dd\'"></span></div><div class="forbiddeninfp"><div ng-if="orderTotalPrice<cp.buckle_amount">使用限制:<span ng-bind="amountName"></span>满<span ng-bind="cp.buckle_amount"></span>元,才能使用</div><div ng-if="orderTotalPrice<cp.freefreight_amount">使用限制:<span ng-bind="amountName"></span>满<span ng-bind="cp.freefreight_amount"></span>元,才能使用</div><div ng-if="cp.cantuse">使用限制:特定商品使用优惠券</div></div></div><div class="btnbox"><span class="btn btn-warning btn-lg btn-block" ng-click="ccvm.confirmMyCheck()">确定</span></div></div></div>'),e.put("app/components/customizeMallHead/customizeMallHead.html",'<div class="warp-customizeMallHead themeBorderColor" ng-style="{\'background\':vm.customizeMallHeadConfig.background_color?vm.customizeMallHeadConfig.background_color:\'\'}" ng-if="vm.hasMallHead"><div class="header-buy"><div class="collection-rows" ng-if="vm.isPlus && ((vm.customizeMallHeadConfig.nav_left_type==0 && !vm.customizeMallHeadConfig.logo) || (vm.customizeMallHeadConfig.nav_left_type==1 && vm.toolBarLeftList.length==0))" ng-click="vf.goBack()"><div class="icon-ico" ng-bind-html="\'icon-fanhui\'|FormatterIcon:vm.customizeMallHeadConfig.search_color"></div></div><div class="logourl" ng-if="vm.customizeMallHeadConfig.nav_left_type==0 && vm.customizeMallHeadConfig.logo" ng-click="vf.goUrl(vm.customizeMallHeadConfig.logo_url)"><img ng-src="{{vm.customizeMallHeadConfig.logo}}" ng-if="vm.customizeMallHeadConfig.logo"></div><div class="collection-rows" ng-if="vm.customizeMallHeadConfig.nav_left_type==1 && vm.toolBarLeftList.length>0" ng-click="vf.iconToUrl(item)" ng-repeat="item in vm.toolBarLeftList"><div class="icon-img" ng-if="item.img"><img ng-src="{{item.img}}"></div><div ng-if="!item.img && item.ico" class="icon-ico" ng-style="{\'color\':item.ico_color?item.ico_color:\'\'}" ng-bind-html="item.ico |FormatterIcon:item.ico_color"></div><div class="badge badge-assertive" ng-if="item.num && item.num>0" ng-bind="item.num"></div></div><div class="keyword"><input type="text" ng-model="vm.keyword" ng-if="vm.customizeMallHeadConfig.show_search==1" ng-style="{\'border\':vm.customizeMallHeadConfig.search_color?\'1px solid \'+vm.customizeMallHeadConfig.search_color:\'\'}"><svg class="icon rightIco" ng-click="vf.toCustomizeUrl()" ng-if="vm.customizeMallHeadConfig.show_search==1" ng-style="{\'color\':vm.customizeMallHeadConfig.search_color?vm.customizeMallHeadConfig.search_color:\'\'}" aria-hidden="true"><use xlink:href="#icon-sousuo"></use></svg></div><div class="collection-rows" ng-click="vf.iconToUrl(item)" ng-repeat="item in vm.toolBarList"><div class="icon-img" ng-if="item.img"><img ng-src="{{item.img}}"></div><div ng-if="!item.img && item.ico" class="icon-ico" ng-bind-html="item.ico|FormatterIcon:item.ico_color"></div><div class="badge badge-assertive" ng-if="item.num && item.num>0" ng-bind="item.num"></div></div></div></div><div class="warp-goback-absolute" ng-style="{\'background\':vm.customizeMallHeadConfig.background_color?vm.customizeMallHeadConfig.background_color:\'\'}" ng-if="vm.isPlus && vm.hasMallHead && ((vm.customizeMallHeadConfig.nav_left_type==0 && vm.customizeMallHeadConfig.logo) || (vm.customizeMallHeadConfig.nav_left_type==1 && vm.toolBarLeftList.length>0))" ng-click="vf.goBack()"><div class="icon-ico" ng-bind-html="\'icon-fanhui\'|FormatterIcon:vm.customizeMallHeadConfig.search_color"></div></div><div class="warp-customizeMallHeadEmpty" ng-if="vm.hasMallHead"></div>'),e.put("app/components/footerBar/footerBar.html",'<div class="footer-bar" ng-if="bottom.list && bottom.style==0 && bottom.list.length>0"><div class="sousuo" ng-repeat="item in bottom.list" ng-style="{\'background-color\':item.bg_color,\'color\':item.color}"><div ng-show="item.img" class="imgdiv" ng-style="{\'height\':bottom.ico_size+\'px\'}" ng-click="goToBottomDetail(item,$index)"><img ng-src="{{item.img}}" ng-style="{\'height\':bottom.ico_size+\'px\',\'width\':bottom.ico_size+\'px\'}" alt=""></div><div class="bar-ico" ng-show="item.ico && !item.img" ng-click="goToBottomDetail(item,$index)"><svg class="icon" ng-style="{\'color\':item.color,\'font-size\':bottom.ico_size+\'px\'}" aria-hidden="true"><use xlink:href="{{getSvgIco(item)}}"></use></svg></div><div class="bar-text" ng-bind="item.title" ng-style="{\'color\':item.color,\'font-size\':bottom.size+\'px\'}" ng-click="goToBottomDetail(item,$index)"></div></div></div><div class="footer-weixin" ng-if="bottom.list && bottom.style==1 && bottom.list.length>0"><div class="footer-row"><div class="footer-first" ng-style="{\'background-color\':bottom.list[0].bg_color}" ng-click="vmFunc.GoBottomLink(bottom.list[0].url)"><div ng-show="item.img" class="imgdiv" ng-style="{\'height\':bottom.ico_size+\'px\'}" ng-click="goToBottomDetail(bottom.list[0],$index)"><img ng-src="{{bottom.list[0].img}}" ng-style="{\'height\':bottom.ico_size+\'px\',\'width\':bottom.ico_size+\'px\'}" alt=""></div><div class="bar-ico" ng-show="bottom.list[0].ico && !bottom.list[0].img" ng-click="goToBottomDetail(bottom.list[0],$index)"><svg class="icon" ng-style="{\'color\':bottom.list[0].color,\'font-size\':bottom.ico_size+\'px\'}" aria-hidden="true"><use xlink:href="{{getSvgIco(bottom.list[0])}}"></use></svg></div></div><div class="footer-other"><div class="footer-other-table" ng-if="bottom.list.length>1"><div class="footer-other-row"><div class="footer-other-cell" ng-if="$index>0" ng-repeat="menu in bottom.list track by $index" ng-style="{\'background-color\':menu.bg_color,\'color\':menu.color,\'font-size\':bottom.size+\'px\',width: (100/(bottom.list.length-1))+\'%\' }" ng-click="goToBottomDetail(menu,$index)" ng-bind="menu.title"></div></div></div></div></div></div>'),e.put("app/components/goBack/goBack.html",'<svg class="icon go-back" aria-hidden="true" ng-click="goBack()"><use xlink:href="#icon-fanhui"></use></svg>'),e.put("app/components/goRight/goRight.html",'<svg class="icon" aria-hidden="true"><use xlink:href="{{iconLink}}"></use></svg>'),e.put("app/components/hotSearch/hotSearch.html",'<div class="search-mask"></div>'),e.put("app/components/navbar/navbar.html",'<nav class="navbar navbar-static-top navbar-inverse"><div class="container-fluid"><div class="navbar-header"><a class="navbar-brand" href="https://github.com/Swiip/generator-gulp-angular"><span class="glyphicon glyphicon-home"></span> Gulp Angular</a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-6"><ul class="nav navbar-nav"><li class="active"><a ng-href="#">Home</a></li><li><a ng-href="#">About</a></li><li><a ng-href="#">Contact</a></li></ul><ul class="nav navbar-nav navbar-right acme-navbar-text"><li>Application was created {{ vm.relativeDate }}.</li></ul></div></div></nav>'),e.put("app/components/payPanel/payPanel.html",'<div class="wrapOrderPayChoice" ng-show="vm.payPanel.show"><div class="weui-mask_transparent actionsheet__mask"></div><div class="weui-skin_android"><div class="weui-mask"></div><div class="weui-actionsheet" ng-show="vm.hasAliPay || vm.hasWxPay"><div class="title"><span>请选择支付方式</span> <span ng-show="showClose" class="close" ng-click="vm.payPanel.show=false">x</span><div class="Clear"></div></div><div class="weui-actionsheet__menu" id="divPayChannels"><div class="weui-actionsheet__cell wxPay" ng-show="vm.hasWxPay && vm.hasWxPayApp && vm.hasWxPayAppSet" ng-click="vf.wxPay()"><div class="height30"><img class="weui-vcode-img" style="height:30px;" src="http://file-cdn.songhebao.com/img/pay/wx_logo.png"> <span class="txt">微信支付</span><svg class="icon rightIco floatR" aria-hidden="true"><use xlink:href="#icon-xiayibu"></use></svg><div class="Clear"></div></div></div><div class="weui-actionsheet__cell zfbPay" ng-show="vm.hasAliPay && vm.hasAliPayApp && vm.hasAliPayAppSet" ng-click="vf.aliPay()"><div class="height30"><img class="weui-vcode-img" style="height:30px;" src="http://file-cdn.songhebao.com/img/pay/zfb_logo.png"> <span class="txt">支付宝</span><svg class="icon rightIco floatR" aria-hidden="true"><use xlink:href="#icon-xiayibu"></use></svg><div class="Clear"></div></div></div><div class="weui-actionsheet__cell jdPay" ng-show="vm.hasJDPay" ng-click="vf.jdPay()"><div class="height30"><img class="weui-vcode-img" style="height:30px;" src="http://file-cdn.songhebao.com/img/pay/jdpay_logo.png"> <span class="txt">京东支付（网银在线）</span><svg class="icon rightIco floatR" aria-hidden="true"><use xlink:href="#icon-xiayibu"></use></svg><div class="Clear"></div></div></div><div class="weui-actionsheet__cell anotherPay" ng-click="vf.anotherPay()" ng-show="vm.hasDaiPay"><div class="height30"><img class="weui-vcode-img" style="height:35px;" src="http://static-files.socialcrmyun.com/img/pay/daifu.png"> <span class="txt">找人代付</span><svg class="icon rightIco floatR" aria-hidden="true"><use xlink:href="#icon-xiayibu"></use></svg><div class="Clear"></div></div></div></div></div><div class="weui-actionsheet" ng-show="!vm.hasAliPay&&!vm.hasWxPay"><div class="title"><span>该商户还未配置任何支付方式</span> <span class="close" ng-click="vm.payPanel.show=false">x</span><div class="Clear"></div></div></div></div></div>'),e.put("app/components/productBox/productBox.html",'<div class="product-wrap"><div class="product"><div class="img-wrap"><span class="img-span"><img class="product-img" ng-src="{{!productItem.img_url?\'\':productItem.img_url+img_last}}"></span></div><div class="clear-both"></div><div class="product-name"><span class="product_Name">{{productItem.title}}</span></div><div class="product-price"><strong ng-show="productItem.price">{{productItem.price | currency : "￥" : 2}}</strong> <span ng-show="productItem.score"><span ng-show="productItem.price">+</span> <strong>{{productItem.score}}</strong> <span>积分</span></span><br><span class="old-price" ng-bind="productItem.quote_price| currency:\'￥\'" ng-show="is_show_oldprice && productItem.price < productItem.quote_price"></span> <span class="old-price-empty" ng-show="is_show_oldprice && productItem.price >= productItem.quote_price">&nbsp;</span></div></div></div>'),
e.put("app/components/productBox/productBoxSale.html",'<div class="product-promotion" ng-click="goToDetail(dataBox)"><div class="nocopyimg"></div><span class="topleftdiscount">{{(dataBox.price/dataBox.quote_price) | number:1}}折</span> <img class="product-img" ng-src="{{dataBox.img_url}}"><div class="sold-out" ng-show="!dataBox.totalcount">已抢光</div><div class="product-name low-product-name"><span class="product_Name">{{dataBox.title}}</span></div><div class="product-price"><span class="line-through gray78 font12">{{dataBox.quote_price|currency:"￥":0}}</span><span class="red font18">{{dataBox.price|currency:"￥":0}}</span></div></div>'),e.put("app/components/productBox/saleBox.html",'<div class="product-wrap sale-wrap" ng-click="goToDetail(dataBox)"><div class="product-mask"></div><span class="topleftdiscount">{{(dataBox.promotion_price/dataBox.quote_price) | number:2}}折</span><div class="product"><div class="img-wrap"><span class="img-span"><img class="product-img" ng-src="{{dataBox.img_url? dataBox.img_url+img_last:\'\'}}"></span><div class="sold-out" ng-show="!dataBox.totalcount">已抢光</div></div><div class="clear-both"></div><div class="product-name"><span class="product_Name">{{dataBox.title}}</span></div><div class="product-price"><span class="line-through gray78 font12">{{dataBox.quote_price|currency:"￥":2}}</span> <span class="red font18">{{dataBox.promotion_price|currency:"￥":2}}</span></div></div></div>'),e.put("app/components/productBoxList/productBoxList.html",'<div class="product-list"><div class="row row-wrap" ng-transclude=""></div><div class="clear-both"></div><div class="loadingTap"><span ng-show="pdlist.loadingTag">加载中~</span> <span ng-show="pdlist.loadingEndTag">没有更多了~</span></div></div>'),e.put("app/components/relateSearch/relateSearch.html",'<div class="search-relate-mask"><ul></ul></div>'),e.put("app/components/selectAddress/selectAddress.html",'<div ng-click="selectAddressBtn()" class="select_address_box" ng-if="isgivegift==\'true\'"><div ng-transclude="" ng-if="customize"></div><div class="default" ng-if="!customize"><div ng-if="!addressInfo.consigneename" class="order-item-value">选择寄送地址<svg class="icon arrow" aria-hidden="true"><use xlink:href="icon-youjiantou"></use></svg><div class="clear-both"></div></div><div ng-if="addressInfo.consigneename" class="product-item-detail"><div class="address-item floatL">{{addressInfo.consigneename}} {{addressInfo.phone}}</div><div class="address-item floatL gray78">{{addressInfo.province}} {{addressInfo.city}} {{addressInfo.dist}} {{addressInfo.address}}</div><svg class="icon font18 gray78 floatR" aria-hidden="true"><use xlink:href="icon-xiayibu"></use></svg><div class="clear-both"></div></div></div></div>'),e.put("app/components/shopslider/shopslider.html",'<div class="wrapShopContainer"><div class="sliders" ng-transclude=""></div></div>'),e.put("app/components/sideMenu/sideMenu.html",'<div class="sideMenu" ng-show="sideMenus"><div id="wrapper"><div id="scroller"><ul on-finish-render-filters="" class="rootList"><li ng-if="!data.subList" class="dataItem" ng-repeat="data in leftnavdatas" ng-click="goList(data.navigation_link,data.navigation_type)"><span class="menuText">{{data.navigation_name}}</span></li><li ng-if="data.subList" class="borderBottom" ng-repeat="data in leftnavdatas" ng-mousedown="data.subListShow = !data.subListShow"><svg class="icon font18 gray34" aria-hidden="true" ng-hide="data.subListShow"><use xlink:href="#icon-jia"></use></svg><svg class="icon font18 gray34" aria-hidden="true" ng-show="data.subListShow"><use xlink:href="#icon-jian"></use></svg><span class="menuText">{{data.navigation_name}}</span><div class="clear-both"></div><ul class="subList" ng-show="data.subListShow"><li class="dataItem" ng-click="goList(data.navigation_link,data.navigation_type)"><span class="menuText">全部</span></li><li class="dataItem" ng-repeat="subData in data.subList" ng-click="goList(subData.navigation_link,subData.navigation_type)"><span class="menuText">{{subData.navigation_name}}</span></li></ul></li></ul></div></div></div><div class="sideMenuMask" ng-show="sideMenus" ng-click="showMenus()"></div>'),e.put("app/gift/getgift/getgift.html",'<div><div class="shareimg" ng-click="hideShareImg()"></div><div class="order-item-title">收礼地址：</div><div select-address="" isgivegift="true" address-info="vm.addressData" customize="false" address-id="vm.addressId"></div><div class="getgifttitle clearfix" style="margin:10px 0 0 0"><span class="whogivetext">此礼物来自</span> <span class="whogiveimg"><img ng-src="{{productDetailData.send_user_info.head_img_url}}" alt=""></span> <span class="whogivetext" ng-bind="productDetailData.send_user_info.nick_name"></span></div><div class="getgiftinfobox"><div class="giftimg"><img ng-src="{{productDetailData.product_img_url}}" alt=""></div><div class="gifttext"><div class="lineheight_30">{{productDetailData.product_name}}</div><div class="lineheight_30">{{productDetailData.product_properties}}</div><div class="lineheight_30">共 <span class="fontyellow">{{productDetailData.product_count}}</span> 份</div></div></div><div class="orderwords linehegiht_36 paddinLR" style="margin:20px 0 0 0"><span class="wordstext">买家留言：</span> <input type="text" placeholder="可填写您与卖家达成一致的要求(选填)" ng-model="pageData.defaultList.buyer_memo" class="wordsinput"></div><div class="givegiftbot paddinLR"><div class="centerbot" style="margin-top: 10px !important;" ng-if="productDetailData.is_get_gift != 1" ng-click="getGiftBtn()">立即领取</div><div class="centerbot shareother" ng-if="productDetailData.is_get_gift == 1">已经领取</div><div class="centerbot shareother" ng-if="productDetailData.is_get_gift != 1" ng-click="getGiftUrlBtn()">分享链接给别人</div><div class="centerbot" style="margin-top: 10px !important;" ng-if="productDetailData.is_get_gift == 1" ng-click="getGiftUrlBtn()">分享链接给别人</div><div class="centerbot shareother" ui-sref="home">我也要送礼</div></div></div>'),e.put("app/gift/giftdetail/giftdetail.html",'<div><div class="bgcolor"><div class="giftimg"><img src="assets/images/jiu.png" alt=""></div><div class="giftdes paddinLR">来自小伙伴的礼物</div><div class="giftinfo"><div class="floatL proimg"><img src="assets/images/jiu.png" alt=""></div><div class="oneproinfo floatL"><div class="lineheight_30">商品名称商品名称</div><div class="lineheight_30">颜色 尺寸(大小)</div><div class="lineheight_30">共<span class="fontyellow">1</span>份</div></div></div><div ng-if="false" class="emptybasket"><div class="emptyicon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-gouwuche"></use></svg></div><h4 class="font20">&nbsp;&nbsp;购物车空空如也！</h4><div class="font16 colora0">快来给自己挑点宝贝吧</div><div class="gotopro"><a href="" class="font16">去逛逛</a></div></div></div></div><div class="giftbot"><div class="giftbotL floatL">领礼物</div><div class="giftbotR floatR">我也送</div></div>'),e.put("app/gift/givegift/givegift.html",'<div><div class="shareimg" ng-click="hideShareImg()"></div><div class="bgcolor"><div class="giftimg"><img ng-src="{{productDetailData.product_img_url}}" alt=""></div><div class="giftinfo" style="margin-top:16px"><div class="floatL proimg"><img ng-src="{{productDetailData.product_img_url}}" alt=""></div><div class="oneproinfo floatL"><div class="lineheight_30">{{productDetailData.product_name}}</div><div class="lineheight_30">{{productDetailData.product_properties}}</div><div class="lineheight_30">共<span class="fontyellow">{{productDetailData.product_count}}</span>份</div></div></div><div class="givegiftbot paddinLR" ng-click="getGiftUrlBtn()"><div class="centerbot">喊好友来领取礼物</div></div><div class="givegiftbot paddinLR" ui-sref="home"><div class="centerbot">继续购物</div></div></div></div>'),e.put("app/gift/paygift/paygift.html",'<div class="pay-gift"><div class="create-order"><div class="header-bar"><go-back></go-back><div class="header-title">订单信息</div><div class="bug-car"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-gouwuche"></use></svg><div class="card_nums" ng-if="is_shownums">{{shop_nums}}</div></div><div class="clear-both"></div></div><div class="order-item-title">支付方式 ：微信支付</div><div class="product-item-detail" ng-if="0"><div class="pay-img"><img src="assets/images/zhifubao.png"></div><div class="pay-txt">支付宝</div><div class="clear-both"></div></div><div class="order-item-title">商品：</div><div class="product-item-detail" ng-repeat="item in giftProduct"><div class="product-item-img"><img ng-src="{{item.img_url}}"></div><div class="product-item-txt"><div class="font14">{{item.title}}</div><div class="font14">{{item.properties}}</div><div class="font13">数量：{{item.num}}</div><div class="product-num-wrap"><svg class="icon product-num-del" aria-hidden="true" ng-click="delNum(item)"><use xlink:href="#icon-jian"></use></svg><input type="input" class="product-num" ng-model="item.num" ng-change="checknum(item)" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}"><svg class="icon product-num-add" aria-hidden="true" ng-click="addNum(item)"><use xlink:href="#icon-jianum"></use></svg></div><div class="product-item-price"><div class="line-through">{{item.quote_price|currency:"￥":2}}</div><div>{{item.price|currency:"￥":2}}</div></div></div><div class="clear-both"></div></div><div class="order-item-title">预计产生的运费：{{freight|currency:"￥":2}}</div></div><div class="bt-wrap"><div class="submitorderL"><div class="allpaymoneyL"><strong>支付总金额</strong></div><div class="allpaymoneyR"><span class="red font18" ng-if="!checkedCouponInfo">{{giftProduct.productsTotalPrice | currency:\'￥\'}}</span><span class="red font18" ng-if="checkedCouponInfo.cardcoupon_type==3&&(orderProducts.productsTotalPrice>=checkedCouponInfo.buckle_amount)" ng-bind="orderProducts.productsTotalPrice - checkedCouponInfo.buckle_sub_amount | currency:\'￥\':\'2\'"></span><span class="red font18" ng-if="checkedCouponInfo.cardcoupon_type==0" ng-bind="orderProducts.productsTotalPrice*checkedCouponInfo.discount/10 | currency:\'￥\':\'2\'"></span><span class="red font18" ng-if="checkedCouponInfo.cardcoupon_type==1&&orderProducts.productsTotalPrice>=checkedCouponInfo.deductible_amount" ng-bind="orderProducts.productsTotalPrice - checkedCouponInfo.deductible_amount | currency:\'￥\':\'2\'"></span><span class="red font18" ng-if="checkedCouponInfo.cardcoupon_type==1&&orderProducts.productsTotalPrice<checkedCouponInfo.deductible_amount" ng-bind="orderProducts.productsTotalPrice - orderProducts.productsTotalPrice | currency:\'￥\':\'2\'"></span><span class="red font18" ng-if="checkedCouponInfo.cardcoupon_type==2&&checkedCouponInfo.freefreight_amount>=freight" ng-bind="orderProducts.productsTotalPrice - freight | currency:\'￥\':\'2\'"></span> <span class="red font18" ng-if="checkedCouponInfo.cardcoupon_type==2&&checkedCouponInfo.freefreight_amount<freight" ng-bind="orderProducts.productsTotalPrice - checkedCouponInfo.freefreight_amount | currency:\'￥\':\'2\'"></span></div></div><div class="submitorderR" ng-click="submitOrderAndPay()">确认</div></div></div>'),e.put("app/groupForGoods/groupForGoodsDetail/groupForGoodsDetail.html",'<div class="wrapGroupForGoodsDetail"><div class="header-bar" ng-if="(sysConfig.malll.is_customize_mall_head == 0 || (sysConfig.malll.is_customize_mall_head==2 && !isPlus))"><go-back></go-back><div class="header-title">拼团商品详情</div><div class="clear-both"></div></div><div customize-mall-head="" ng-if="!(sysConfig.malll.is_customize_mall_head == 0 || (sysConfig.malll.is_customize_mall_head==2 && !isPlus))"></div><slider aspectratio="{{vm.MALLCONFIG.mallconfignew.product_img_ratio1}}:{{vm.MALLCONFIG.mallconfignew.product_img_ratio2}}"><slider-item ng-repeat="imgdata in vm.goodsData.show_img_list"><img ng-src="{{imgdata}}" class="imgsize100"></slider-item></slider><div class="tm"><div class="td2"><div class="td2_name" ng-bind="vm.goodsData.title"></div><div class="td2_cx" ng-bind-html="vm.goodsData.product_desc"></div><div class="td2_info"><div class="td2_num">支付开团并邀请相应人数参团，人数不足自动退款，详见下方拼团玩法</div><div class="clear"></div></div></div><div class="wrapKT"><div class="kt" ng-show="vm.groupConfig.is_open_group" style="visibility: visible;" ng-repeat="item in vm.goodsData.group_buy_rule_list" ng-click="vm.createOrder(item)"><div class="kt_item"><div class="kt_price" ng-show="item.head_price != item.member_price">开团 ￥<b ng-bind="item.head_price"></b><i>/</i>件，参团 ￥<b ng-bind="item.member_price"></b><i>/</i>件</div><div class="kt_price" ng-show="item.head_price == item.member_price">成团价 ￥<b ng-bind="item.head_price"></b><i>/</i>件</div><div class="kt_btn"><b ng-bind="item.rule_name"></b></div></div></div><div class="kt" style="visibility: visible;" ng-click="vm.createOrder(1)"><div class="kt_item kt_item_buy"><div class="kt_price">￥<b ng-bind="vm.goodsData.price"></b><i>/</i>件</div><div class="kt_btn">单独购买</div></div></div></div></div><div class="step"><div class="step_hd">拼团玩法</div><div id="footItem" class="step_list"><div class="step_item step_item_on"><div class="step_num">1</div><div class="step_detail"><p class="step_tit selected">选择<br>心仪商品</p></div></div><div class="step_item"><div class="step_num">2</div><div class="step_detail"><p class="step_tit">支付开团<br>或参团</p></div></div><div class="step_item"><div class="step_num">3</div><div class="step_detail"><p class="step_tit">等待好友<br>参团支付</p></div></div><div class="step_item"><div class="step_num">4</div><div class="step_detail"><p class="step_tit">达到人数<br>团购成功</p></div></div></div></div><div class="footerBlock" ng-repeat="item in vm.goodsData.group_buy_rule_list">&nbsp;</div><div class="footerBlock">&nbsp;</div><footer-bar></footer-bar></div>'),e.put("app/groupForGoods/groupForGoodsList/groupForGoodsList.html",'<div class="wrapGroupForGoodsList"><div class="header-bar" ng-if="(sysConfig.malll.is_customize_mall_head == 0 || (sysConfig.malll.is_customize_mall_head==2 && !isPlus))"><go-back ng-click="vm.clear_history()"></go-back><div class="header-title">{{vm.title}}</div><div class="clear-both"></div></div><div customize-mall-head="" ng-if="!(sysConfig.malll.is_customize_mall_head == 0 || (sysConfig.malll.is_customize_mall_head==2 && !isPlus))"></div><div class="orderlistnav orderlistnavnew"><span class="floatL navselected" ng-class="{select:vm.pageData.status == \'\'}" ng-click="vm.goStatusBtn(\'\')">全部订单</span> <span class="floatL" ng-class="{select:vm.pageData.status == \'待付款\'}" ng-click="vm.goStatusBtn(\'待付款\')">待付款</span> <span class="floatL" ng-class="{select:vm.pageData.status == \'待收货\'}" ng-click="vm.goStatusBtn(\'待收货\')">待收货</span><div class="BKline"></div></div><div class="the-list"><div class="the-order the-order-new" ng-repeat="item in [0,1,2,3]" scroll-bottom-bind="vm.loadMoreData()"><div class="order-title bgGrey"><div class="order-id">2016-3-3 18:30:26</div><div class="clear-both"></div></div><div class="order-content bgWhite"><div class="product-img"><img ng-src="http://open-files.comeoncloud.net/www/hf/jubit/image/20160218/66E07C04CE814639881C4F34760466C9.png@140h_140w_1e_1c"></div><div class="product-info" ui-sref="orderDetail({orderID:item.order_id})"><div class="product-name">【浆果皇后】智利进口蓝莓2盒29.9元</div><div class="product-sku">数量：1</div></div><div class="product-prices"><div class="the-price red">￥39.99 /件</div></div><div class="clear-both"></div></div><div class="order-title"><div class="order-id font12">共1件商品，免运费</div><div class="order-time font12">实付：<span class="red font18">￥29.90</span></div><div class="clear-both"></div></div><div class="bottom-wrap"><div class="waitforpay">待支付</div><div class="newbtn">取消订单</div><div class="newbtn">去支付</div><div class="clear-both"></div></div></div></div><div class="nomoreorder" ng-if="!vm.nodata">数据加载中~</div><div class="nomoreorder" ng-if="vm.nodata">没有更多订单了额~</div></div>'),e.put("app/groupForGoods/groupGoodsList/groupGoodsList.html",'<div class="wrapGroupGoodsList"><div class="header-bar" ng-if="(sysConfig.malll.is_customize_mall_head == 0 || (sysConfig.malll.is_customize_mall_head==2 && !isPlus))"><go-back ng-click="vm.clear_history()"></go-back><div class="header-title">团购列表</div><a href="javascript:zcToUrl(\'/customize/comeoncloud/Index.aspx?key=MallHome\');" class="btnBackHomeRight"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shouye"></use></svg></a><div class="clear-both"></div></div><div customize-mall-head="" ng-if="!(sysConfig.malll.is_customize_mall_head == 0 || (sysConfig.malll.is_customize_mall_head==2 && !isPlus))"></div><div class="the-list"><div class="the-order the-order-new" ng-repeat="item in vm.dataList" scroll-bottom-bind="vm.loadMoreData()"><div class="order-title bgGrey"></div><div class="order-content bgWhite"><div class="product-img"><img ng-src="{{item.product_list[0].img_url}}"></div><div class="product-info" ui-sref="waitForGroupDetail({goodsGroupId:item.order_id})"><div class="product-name" ng-bind="item.product_list[0].product_name"></div><div class="product-sku"><div class="tuan_g_core"><div class="tuan_g_price"><span>成团价:</span> ￥<b ng-bind="item.group_buy_info.head_price"></b>/件</div><div class="tuan_g_btn"></div></div></div></div><div class="clear-both"></div></div><div class="order-title"></div><div class="bottom-wrap"><div class="waitforpay" ng-if="item.group_buy_info.group_buy_status==0">拼团中</div><div class="waitforpay" ng-if="item.group_buy_info.group_buy_status==1">团购成功</div><div class="waitforpay" ng-if="(item.group_buy_info.group_buy_status==2)&&vm.isOverDate">团购失败</div><div class="waitforpay" ng-if="(item.group_buy_info.group_buy_status==2)&&!vm.isOverDate">团购过期</div><div class="newbtn" ui-sref="orderDetail({orderID:item.order_id})">查看订单详情</div><div class="newbtn" ui-sref="waitForGroupDetail({goodsGroupId:item.order_id})">查看团详情</div><div class="clear-both"></div></div></div></div><div class="nomoreorder" ng-if="vm.nodata">没有更多订单了额~</div></div>'),e.put("app/groupForGoods/waitForGroupDetail/waitForGroupDetail.html",'<div class="wrapWaitForGroupDetail"><div ng-if="vm.isShowPage"><div class="success" ng-if="(vm.dataInfo.is_head==1)&&!vm.dataInfo.isOverDate"><div class="kaituan"><svg class="icon font26" aria-hidden="true"><use xlink:href="#icon-shixinduigoudaibiankuang"></use></svg><span ng-if="!vm.isGroupFull">开团成功</span></div><div class="jiaru" ng-if="!vm.isGroupFull">快去邀请好友加入吧</div><div class="jiaru" ng-if="vm.isGroupFull">团购成功</div></div><div class="success bgLightRed" ng-if="(vm.dataInfo.group_buy_status==2)"><div class="kaituan"><svg class="icon font26 red" aria-hidden="true"><use xlink:href="#icon-kulian"></use></svg></div><div class="jiaru">团购失败</div></div><div class="success" ng-if="(vm.dataInfo.is_head==0)&&(vm.dataInfo.group_buy_status==0)"><div class="kaituan"><svg class="icon font26" aria-hidden="true"><use xlink:href="#icon-shixinduigoudaibiankuang"></use></svg></div><div class="jiaru">拼团中</div></div><div class="success bgLightRed" ng-if="(vm.dataInfo.is_head==0)&&(vm.dataInfo.group_buy_status!=2)&&(vm.dataInfo.is_join==0)&&(vm.dataInfo.isOverDate||vm.isGroupFull)"><div class="kaituan"><svg class="icon font26 red" aria-hidden="true"><use xlink:href="#icon-kulian"></use></svg></div><div class="jiaru">来晚了一步</div></div><div class="goodsInfo" ui-sref="groupForGoodsDetail({goodsId:vm.dataInfo.product_id})"><div class="leftImg"><img class="imgStyle" ng-src="{{vm.dataInfo.product_img_url}}"></div><div class="rightInfo"><div class="topTitle" ng-bind="vm.dataInfo.product_name"></div><div class="bottomPrice">{{vm.dataInfo.people_count}}人团：<span class="red">￥<span class="red font16" ng-bind="vm.dataInfo.member_price"></span>/件</span></div></div><div class="clear-both"></div></div><div class="clickdetail" ng-show="vm.dataInfo.product_desc"><div class="showdetail" ng-click="vm.showdesc=!vm.showdesc">点击查看商品详情<svg class="icon arrowdown" aria-hidden="true" ng-if="!vm.showdesc"><use xlink:href="#icon-jiantouarrowdown"></use></svg><svg class="icon arrowup" aria-hidden="true" ng-if="vm.showdesc"><use xlink:href="#icon-h5iconuparrow"></use></svg></div><div class="describe" ng-bind-html="vm.dataInfo.product_desc" ng-if="vm.showdesc"></div></div><div class="groupinfo"><div class="one"><ul class="two"><li class="three" ng-repeat="item in vm.dataInfo.people_list"><div class="avterImgDiv" style="background-image:url({{item.head_img_url}});"><div class="tuangou" ng-if="$index==0"><svg class="icon tuangouyuan" aria-hidden="true"><use xlink:href="#icon-tuangouyuan"></use></svg></div></div></li></ul><div style="clear: both;"></div></div><div class="clear-both"></div><div class="peopleNeed" ng-if="vm.dataInfo.isOverDate&&!vm.isGroupFull">该团购已过期</div><div class="peopleNeed" ng-if="vm.isGroupFull">该团购人数已满</div><div class="peopleNeed" ng-if="!vm.dataInfo.isOverDate&&!vm.isGroupFull">还差<span class="red font16">{{vm.dataInfo.people_count-vm.dataInfo.pay_people_count}}</span>人，盼你如南方人盼暖气~</div><div class="hline" ng-if="!vm.dataInfo.isOverDate&&!vm.isGroupFull"><div class="totalLeft">剩余{{vm.pageData.leftDay}}天<div class="shi" ng-bind="vm.pageData.leftHour"></div>:<div class="shi" ng-bind="vm.pageData.leftMinus"></div>:<div class="shi" ng-bind="vm.pageData.leftSecond"></div>结束</div></div><div class="leadInfo" ng-repeat="item in vm.dataInfo.people_list"><svg class="icon arrowTop" aria-hidden="true"><use xlink:href="#icon-h5iconuparrow"></use></svg><div class="leadImg"><img ng-src="{{item.head_img_url}}"></div><div class="leadName">{{item.groupLeader+item.show_name}}</div><div class="time">{{item.pay_time | date:\'yyyy-MM-dd HH:mm:ss\'}}{{item.startGroup}}</div><div class="clear-both"></div></div><div class="partner" ng-if="!vm.isGroupFull"><div class="vline"></div><div class="leadImg"></div><div class="askPartner" ng-if="!vm.isGroupFull">还差{{vm.dataInfo.people_count-vm.dataInfo.pay_people_count}}人，分享出去让更多小伙伴来参团吧！</div><div class="askPartner" ng-if="vm.isGroupFull">团购人数已满</div><div class="clear-both"></div></div></div><div class="step"><div class="step_hd">拼团玩法</div><div id="footItem" class="step_list"><div class="step_item step_item_on"><div class="step_num">1</div><div class="step_detail"><p class="step_tit">选择<br>心仪商品</p></div></div><div class="step_item"><div class="step_num">2</div><div class="step_detail"><p class="step_tit">支付开团<br>或参团</p></div></div><div class="step_item"><div class="step_num" ng-class="{selectStep:vm.dataInfo.group_buy_status!=2&&!vm.isGroupFull}">3</div><div class="step_detail"><p class="step_tit" ng-class="{selectStepColor:vm.dataInfo.group_buy_status!=2&&!vm.isGroupFull}">等待好友<br>参团支付</p></div></div><div class="step_item"><div class="step_num" ng-class="{selectStep:vm.isGroupFull}">4</div><div class="step_detail"><p class="step_tit" ng-class="{selectStepColor:vm.isGroupFull}">达到人数<br>团购成功</p></div></div></div></div><div class="goback" ng-class="{pBottom140:(vm.dataInfo.is_head==0)&&!vm.isGroupFull&&!vm.dataInfo.isOverDate}"><span class="color2B53C8" ng-click="vm.goToGoodsList()">一起拼&nbsp;&nbsp;</span> | <span ui-sref="groupGoodsList">&nbsp;&nbsp;我的团</span></div><div class="footPart Height120" ng-if="!vm.showPayBtn&&(vm.dataInfo.is_head==1)&&!vm.isGroupFull&&!vm.dataInfo.isOverDate"><div class="rightBtn newbtn" ng-click="vm.joinGroup()">再来一份</div><div class="rightBtn newbtn mTop10" ng-click="vm.shadeShow=!vm.shadeShow">还差{{vm.dataInfo.people_count-vm.dataInfo.pay_people_count}}人组团成功</div><div class="clear-both"></div></div><div class="footPart" ng-if="!vm.showPayBtn&&(vm.dataInfo.is_head==1)&&(vm.isGroupFull||vm.dataInfo.isOverDate)&&vm.groupConfig.is_open_group"><div class="rightBtn newbtn" ng-click="vm.goToGoodsList()">再次开个团，点此回商品列表</div></div><div class="footPart" ng-if="!vm.showPayBtn&&(vm.dataInfo.is_head==0)&&(vm.isGroupFull||vm.dataInfo.isOverDate||vm.dataInfo.is_join==1)&&vm.groupConfig.is_open_group"><div class="rightBtn newbtn" ng-click="vm.goToGoodsList()">我也开个团，点此回商品列表</div></div><div class="footPart" ng-if="!vm.showPayBtn&&(vm.dataInfo.is_head==0)&&(vm.dataInfo.is_join==0)&&!vm.isGroupFull&&!vm.dataInfo.isOverDate"><div class="rightBtn newbtn" ng-click="vm.joinGroup()">我也参团</div><div class="rightBtn newbtn mTop10" ng-show="vm.groupConfig.is_open_group" ng-click="vm.goToGoodsList()">我也开个团，点此回商品列表</div></div><div class="footPart" ng-if="!vm.showPayBtn&&(vm.dataInfo.is_head==0)&&(vm.dataInfo.is_join!=0)&&!vm.isGroupFull&&!vm.dataInfo.isOverDate"><div class="rightBtn newbtn" ng-click="vm.joinGroup()">再来一份</div><div class="rightBtn newbtn mTop10" ng-show="vm.groupConfig.is_open_group" ng-click="vm.goToGoodsList()">我也开个团，点此回商品列表</div></div><div class="footPart" ng-if="vm.showPayBtn"><div class="rightBtn newbtn" ng-click="vm.goToPay()">继续支付</div><div class="rightBtn newbtn mTop10" ng-show="vm.groupConfig.is_open_group" ng-click="vm.goToGoodsList()">我也开个团，点此回商品列表</div></div><div class="weixinshareshade" ng-if="vm.shadeShow" ng-click="vm.shadeShow=!vm.shadeShow"></div></div><div class="center" ng-if="!vm.isShowPage">页面加载中，请稍后...</div></div>'),e.put("app/registerLogin/login/login.html",'<div class="header-bar"><go-back></go-back><div class="header-title">登录</div><div class="bug-car" ui-sref="shopBasket"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-gouwuche"></use></svg></div><div class="clear-both"></div></div><div class="info-wrap"><div class="info-prompt margin-tp20 logintitle">我是会员</div><form name="loginForm" novalidate="" ng-submit="loginSubmit()"><label class="texelabel toplabel" ng-class="{redborder:loginInfo.phoneerror}" for="phoneinputid"><input class="innerinput" ng-pattern="/^0?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/" name="phonenum" type="tel" required="" ng-model="loginInfo.username" ng-blur="checkerror(loginForm.phonenum)" ng-change="checkerror(loginForm.phonenum)" id="phoneinputid" placeholder="您的手机号码"> <span class="erroeicon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-iconfontgantanhao"></use></svg></span></label><div class="texelabel"><input class="innerinput" name="phonecode" type="tel" ng-pattern="/^[0-9]{6}$/" ng-model="loginInfo.password" required="" placeholder="请输入验证码"><div class="getcode" ng-if="loginInfo.phoneCodeTime<1" ng-click="getPhoneCode(loginForm.phonenum)">获取验证码</div><div class="getcode" ng-if="loginInfo.phoneCodeTime>0">获取验证码({{loginInfo.phoneCodeTime}}s)</div></div><label for="submitbtn" class="publicbtn margin-tp20">登录</label> <input type="submit" class="hidesubmitbtn" id="submitbtn" ng-disabled="loginForm.$invalid"></form><div class="info-prompt margin-tp45 logintitle" ui-sref="register">还没注册？</div><div class="info-prompt font16">享受超值折扣及返利，还有更多专属权利！</div><div class="publicbtn margin-tp14" ui-sref="article({id:414821})">即刻申请会员</div></div>'),e.put("app/registerLogin/register/register.html",'<div class="header-bar"><go-back></go-back><div class="header-title">注册</div><div class="bug-car" ui-sref="shopBasket"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-gouwuche"></use></svg></div><div class="clear-both"></div></div><div class="info-wrap"><div class="info-prompt margin-tp20 btnabovetitle">必填项目</div><input class="info-input margin-tp14" placeholder="昵称" ng-model="registerInfo.nickname"> <input class="info-input margin-tp14 width50p floatL no-right-radius" placeholder="手机号码" ng-model="registerInfo.phone"> <button class="margin-tp14 vertifycodebt floatR" ng-click="verificationcodeFunc()">获取验证码</button><div class="clear-both"></div><input class="info-input margin-tp14" placeholder="验证码" ng-model="registerInfo.smsvercode"> <input type="password" class="info-input margin-tp14" placeholder="密码" ng-model="registerInfo.password"> <input type="password" class="info-input margin-tp14" placeholder="重复密码" ng-model="registerInfo.passwordconfirm"><div class="info-prompt margin-tp20 btnabovetitle">如果继续此过程，表示您同意&nbsp;<a ui-sref="privacyDetail">条款条例</a></div><div class="publicbtn margin-tp14" ng-click="registerFunc()">立即注册</div></div>'),e.put("app/registerLogin/retrievePassword/retrievePassword.html",""),e.put("app/returnGoods/applyRefund/applyRefund.html",'<div class="header-bar"><go-back><div class="go-back" ng-click="goBack()" role="button" tabindex="0"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-fanhui"></use></svg></div></go-back><div class="header-title">申请退货</div><div class="clear-both"></div></div><div class="return-product-info-wrap no-bottom-border"><div class="return-product-info-item"><div class="infoname">商品名称</div><div class="infocontent">{{vm.orderData.product_name}}</div><div class="clear-both"></div></div><div class="return-product-info-item"><div class="infoname">商品总额</div><div class="infocontent"><span ng-show="vm.orderData.product_totalPrice">{{vm.orderData.product_totalPrice|currency:"￥":2}}</span> <span ng-show="vm.orderData.totalScore"><span ng-show="vm.orderData.product_totalPrice">+</span> {{vm.orderData.totalScore}}积分</span></div><div class="clear-both"></div></div><div class="return-product-info-item"><div class="infoname">订单编号</div><div class="infocontent">{{vm.orderData.order_id}}</div><div class="clear-both"></div></div><div class="return-product-info-item"><div class="infoname">交易时间</div><div class="infocontent">{{vm.orderData.order_time|date:"yyyy-MM-dd HH:mm:ss"}}</div><div class="clear-both"></div></div></div><div class="return-product-info-wrap"><div class="return-input-info margin-tp20"><div class="infoname"><span class="required">*</span>申请服务</div><div class="infocontent"><select class="selectStyle" ng-model="vm.applyService" ng-options="applyService.type for applyService in vm.applyServices"></select></div><div class="clear-both"></div></div><div class="return-input-info" ng-if="vm.applyService.type==\'仅退款\'"><div class="infoname"><span class="required">*</span>货物状态</div><div class="infocontent"><select class="selectStyle" ng-model="vm.goodsStatus" ng-options="goodsStatus.status for goodsStatus in vm.goodsStatuses"></select></div><div class="clear-both"></div></div><div class="return-input-info" ng-if="vm.goodsStatus.status==\'未收到货\'&&vm.applyService.type!=\'退货退款\'"><div class="infoname"><span class="required">*</span>退款原因</div><div class="infocontent"><select class="selectStyle" ng-model="vm.noGoodsReason" ng-options="noGoodsReason.reason for noGoodsReason in vm.noGoodsReasons"></select></div><div class="clear-both"></div></div><div class="return-input-info" ng-if="vm.applyService.type==\'退货退款\'|| vm.goodsStatus.status==\'已收到货\'"><div class="infoname"><span class="required">*</span>退货原因</div><div class="infocontent"><select class="selectStyle" ng-model="vm.theReason" ng-options="refundReason.reason for refundReason in vm.refundReasons"></select></div><div class="clear-both"></div></div><div class="return-input-info" ng-if="vm.applyService.type==\'退货退款\'|| vm.goodsStatus.status==\'已收到货\' || vm.goodsStatus.status==\'未收到货\'"><div class="infoname"><span class="required"></span>可退金额</div><span class="infocontent" ng-bind="vm.pageData.refundData.refund_amount+\'元\'"></span><div class="clear-both"></div><div class="infoname"><span class="required"></span>可退余额</div><span class="infocontent" ng-bind="vm.pageData.refundData.refund_account_amount+\'元\'"></span><div class="clear-both"></div><div class="infoname"><span class="required"></span>可退积分</div><span class="infocontent" ng-bind="vm.pageData.refundData.refund_score+\'积分\'"></span><div class="clear-both"></div></div></div><div class="return-input-info-wrap"><div class="return-input-info"><div class="infoname"><span class="required">*</span>手机号码</div><input type="tel" ng-model="vm.pageData.refundData.phone" class="infocontent" placeholder="填写手机号便于卖家联系您"><div class="clear-both"></div></div><div class="return-input-info"><div class="infoname">退货说明</div><input type="text" ng-model="vm.pageData.refundData.remark" class="infocontent" placeholder="最多可填200字"><div class="clear-both"></div></div><div class="return-input-info"><div class="infoname">图片举证</div><div type="text" class="infocontent">最多可上传3张图片</div><div class="clear-both"></div></div><div class="addpic"><div class="addpics"><div class="addpicFlex"><div class="addpicTable"><label class="addpicbtn label0 fileContainer" for="upLoadImg0"><svg class="icon font28 jia0" aria-hidden="true"><use xlink:href="#icon-jia"></use></svg><input accept="image/*" type="file" id="upLoadImg0"></label></div></div><div class="addpicFlex"><div class="addpicTable"><label class="addpicbtn label1 fileContainer" for="upLoadImg1"><svg class="icon font28 jia1" aria-hidden="true"><use xlink:href="#icon-jia"></use></svg><input accept="image/*" type="file" id="upLoadImg1"></label></div></div><div class="addpicFlex"><div class="addpicTable"><label class="addpicbtn label2 fileContainer" for="upLoadImg2"><svg class="icon font28 jia2" aria-hidden="true"><use xlink:href="#icon-jia"></use></svg><input accept="image/*" type="file" id="upLoadImg2"></label></div></div></div></div></div><div class="btn-wrap"><label for="submitbtn" class="bigbtn" ng-click="vf.submitRefund()">提交</label></div><div service-time=""></div>'),
e.put("app/returnGoods/refundDestination/refundDestination.html",'<div class="header-bar"><go-back><div class="go-back" ng-click="goBack()" role="button" tabindex="0"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-fanhui"></use></svg></div></go-back><div class="header-title">退款去向</div><div class="clear-both"></div></div><div class="return-product-info-wrap"><div class="refund-product-img"><img ng-src="{{pageData.orderData.head_img}}"></div><div class="refund-produc-brief"><p>{{pageData.orderData.product_name}}</p></div><div class="clear-both"></div></div><div class="return-input-info-wrap"><div class="refundDes"><div class="name">退款至微信</div><div class="vl">{{refundDetailData.refund_amount|currency:"￥":2}}</div><div class="clear-both"></div></div><div class="refundDes"><div class="state-circle-wrap"><div class="circle-item"><span class="small-circle bg-green"></span> <span class="state-barR bg-green"></span></div><div class="circle-item"><span class="state-barL" ng-class="{\'bg-green\':step>=2}"></span><svg class="icon big-circle" ng-class="{\'color-green\':step>=2,\'border-green\':step>=2}" aria-hidden="true"><use xlink:href="#icon-xuanzhong"></use></svg><span class="state-barR" ng-class="{\'bg-green\':step>=2}"></span></div><div class="circle-item"><span class="state-barL" ng-class="{\'bg-green\':step>=3}"></span> <span class="small-circle" ng-class="{\'bg-green\':step>=3}"></span></div></div><div class="state-txt-wrap"><div class="txt-item color-green">卖家退款</div><div class="txt-item" ng-class="{\'color-green\':step>=2}">银行受理</div><div class="txt-item" ng-class="{\'color-green\':step>=3}">确认到账</div></div></div><div class="refundDes"><div class="name">退款金额均会原路退回您的支付账户，请注意查收</div><div class="clear-both"></div></div><div class="refundDes"><div class="more" ui-sref="refundLog({orderDetailId:pageData.orderDetailId})">查看完整协商记录</div></div></div><div class="btn-wrap"><a for="submitbtn" class="bigbtn" href="#/orderDetail/{{pageData.orderId}}">查看订单详情</a></div>'),e.put("app/returnGoods/refundLog/refundLog.html",'<div class="header-bar"><go-back><div class="go-back" ng-click="goBack()" role="button" tabindex="0"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-fanhui"></use></svg></div></go-back><div class="header-title">协商记录</div><div class="clear-both"></div></div><div class="mainContent"></div>'),e.put("app/returnGoods/refundState/refundState.html",'<div class="wrapRefundState"><div class="header-bar"><go-back><div class="go-back" ng-click="goBack()" role="button" tabindex="0"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-fanhui"></use></svg></div></go-back><div class="header-title">退款处理中</div><div class="clear-both"></div></div><div class="refund-state" ng-if="refundDetailData.refund_status==0"><svg class="icon red" aria-hidden="true"><use xlink:href="#icon-gantanhao01"></use></svg>等待商家处理退款申请</div><div class="refund-state" ng-if="refundDetailData.refund_status==2"><svg class="icon red" aria-hidden="true"><use xlink:href="#icon-gantanhao01"></use></svg>商家不同意退款申请</div><div class="refund-state" ng-if="refundDetailData.refund_status==1&&refundDetailData.is_return_product==0"><svg class="icon red" aria-hidden="true"><use xlink:href="#icon-gantanhao01"></use></svg>商家同意退款申请</div><div class="refund-state" ng-if="refundDetailData.refund_status==1&&refundDetailData.is_return_product==1"><svg class="icon red" aria-hidden="true"><use xlink:href="#icon-gantanhao01"></use></svg>商家已同意退款，请退货给商家</div><div class="refund-state" ng-if="refundDetailData.refund_status==3"><svg class="icon red" aria-hidden="true"><use xlink:href="#icon-gantanhao01"></use></svg>已退货，等待商家确认收货</div><div class="refund-state" ng-if="refundDetailData.refund_status==4"><svg class="icon red" aria-hidden="true"><use xlink:href="#icon-gantanhao01"></use></svg>商家已确认收货</div><div class="refund-state" ng-if="refundDetailData.refund_status==5"><svg class="icon red" aria-hidden="true"><use xlink:href="#icon-gantanhao01"></use></svg>未收到货，拒绝退款</div><div class="refund-state" ng-if="refundDetailData.refund_status==6"><svg class="icon red" aria-hidden="true"><use xlink:href="#icon-gantanhao01"></use></svg>退款成功</div><div class="refund-state" ng-if="refundDetailData.refund_status==7"><svg class="icon red" aria-hidden="true"><use xlink:href="#icon-gantanhao01"></use></svg>关闭退货申请</div><div class="state-tip-wrap" ng-if="refundDetailData.refund_status==0"><div><div class="tipname">如卖家同意：</div><div class="tipcontent">申请将达成并退款给您</div><div class="clear-both"></div></div><div><div class="tipname">如卖家拒绝：</div><div class="tipcontent">您需要重新修改退款申请或申请维权</div><div class="clear-both"></div></div></div><div class="state-tip-wrap" ng-if="refundDetailData.refund_status==5||refundDetailData.refund_status==2"><div><div class="tipname">拒绝理由:</div><div class="tipcontent">{{refundDetailData.refund_refusereason}}</div><div class="clear-both"></div></div></div><div class="state-tip-wrap" ng-if="refundDetailData.refund_status==1&&refundDetailData.is_return_product==1"><div class="border-bt2"><div class="tipname">退货地址:</div><div class="tipcontent">{{refundDetailData.refund_address}}</div><div class="clear-both"></div></div><div class="btn-wrap2"><label for="submitbtn" class="bigbtn" ui-sref="returnLogistics({orderId:orderId,orderDetailId:orderDetailId})">填写退货物流信息</label></div></div><div class="state-tip-wrap" ng-if="refundDetailData.refund_status==1&&refundDetailData.is_return_product==0||refundDetailData.refund_status==3||refundDetailData.refund_status==4"><div><div class="tipname">如卖家确认：</div><div class="tipcontent">退款成功并退回您的支付账户</div><div class="clear-both"></div></div><div><div class="tipname">如卖家拒绝：</div><div class="tipcontent">您需要重新修改退货信息或申请维权</div><div class="clear-both"></div></div></div><div class="state-tip-wrap" ng-if="refundDetailData.refund_status==6"><div><div class="tipname">退款金额:</div><div class="tipcontent">{{refundDetailData.refund_amount|currency:"￥":2}}</div><div class="clear-both"></div></div><div><div class="tipname">退款余额:</div><div class="tipcontent">{{refundDetailData.refund_account_amount|currency:"￥":2}}</div><div class="clear-both"></div></div><div><div class="tipname">退款积分:</div><div class="tipcontent" ng-bind="refundDetailData.refund_score+\'积分\'"></div><div class="clear-both"></div></div><div class="border-bt2"><div class="tipname">退款时间:</div><div class="tipcontent">2015-10-10</div><div class="clear-both"></div></div><div class="btn-wrap2"><label for="submitbtn" class="bigbtn3" ui-sref="refundDestination({orderId:orderId,orderDetailId:orderDetailId})">查看退款去向</label></div></div><div class="return-product-info-wrap margin-tp20 border-tp"><div class="return-product-info-item"><div class="infoname">退款编号</div><div class="infocontent">{{refundDetailData.refund_id}}</div><div class="clear-both"></div></div><div class="return-product-info-item"><div class="infoname">申请时间</div><div class="infocontent">{{refundDetailData.time|date:"yyyy-MM-dd HH:MM:ss"}}</div><div class="clear-both"></div></div><div class="return-product-info-item"><div class="infoname">退款原因</div><div class="infocontent">{{refundDetailData.refund_reason}}</div><div class="clear-both"></div></div><div class="return-product-info-item"><div class="infoname">处理方式</div><div class="infocontent" ng-if="refundDetailData.is_return_product==1">我要退款，并退货</div><div class="infocontent" ng-if="refundDetailData.is_return_product==0">我要退款</div><div class="clear-both"></div></div><div class="return-product-info-item"><div class="infoname">退款金额</div><div class="infocontent">{{refundDetailData.refund_amount|currency:"￥":2}}</div><div class="clear-both"></div></div><div class="return-product-info-item"><div class="infoname">退还余额</div><div class="infocontent">{{refundDetailData.refund_account_amount|currency:"￥":2}}</div><div class="clear-both"></div></div><div class="return-product-info-item"><div class="infoname">退还积分</div><div class="infocontent" ng-bind="refundDetailData.refund_score+\'积分\'"></div><div class="clear-both"></div></div><span class="readmore"><a ui-sref="refundLog({orderDetailId:orderDetailId})">查看完整协商记录</a></span></div><div class="btn-wrap" ng-if="refundDetailData.refund_status==0"><label for="submitbtn" class="bigbtn" ui-sref="orderDetail({orderID:orderId})">订单详情</label></div><div class="btn-wrap" ng-if="refundDetailData.refund_status==2||refundDetailData.refund_status==5"><label for="submitbtn" class="bigbtn" ui-sref="applyRefund({orderId:orderId,orderDetailId:orderDetailId,update:1})">重新提交退货申请</label></div><div class="btn-wrap" ng-if="refundDetailData.refund_status==0||refundDetailData.refund_status==2||refundDetailData.refund_status==5"><label for="submitbtn" class="bigbtn2" ng-click="closeRefund()">关闭退款申请</label></div><a class="btn-wrap" ng-if="refundDetailData.refund_status==2||refundDetailData.refund_status==5" href="tel:02124099196"><label for="submitbtn" class="bigbtn" href="tel:02124099196">拨打客服电话</label></a></div>'),e.put("app/returnGoods/returnLogistics/returnLogistics.html",'<div class="header-bar"><go-back><div class="go-back" ng-click="goBack()" role="button" tabindex="0"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-fanhui"></use></svg></div></go-back><div class="header-title">填写退货物流</div><div class="clear-both"></div></div><div class="return-product-info-wrap"><div class="return-input-info"><div class="infoname">物流方式</div><div class="infocontent"><select ng-model="currentCompany.name" ng-options="company.name for company in expressCompany"></select></div><div class="clear-both"></div></div><div class="return-input-info"><div class="infoname">物流单号</div><input type="text" ng-model="logisticsInfo.express_number" class="infocontent" placeholder="请输入物流单号"><div class="clear-both"></div></div></div><div class="btn-wrap"><label for="submitbtn" class="bigbtn" ng-click="submitExpress()">提交</label></div>'),e.put("app/returnGoods/store/applyRefund.html",'<div class="header-bar"><go-back><div class="go-back" ng-click="goBack()" role="button" tabindex="0"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-fanhui"></use></svg></div></go-back><div class="header-title">申请退款</div><div class="clear-both"></div></div><div class="return-product-info-wrap no-bottom-border"><div class="return-product-info-item"><div class="infoname">商品名称</div><div class="infocontent">{{pageData.orderData.product_name}}</div><div class="clear-both"></div></div><div class="return-product-info-item"><div class="infoname">订单金额</div><div class="infocontent">{{pageData.orderData.product_totalPrice|currency:"￥":2}}</div><div class="clear-both"></div></div><div class="return-product-info-item"><div class="infoname">订单编号</div><div class="infocontent">{{pageData.orderData.order_id}}</div><div class="clear-both"></div></div><div class="return-product-info-item"><div class="infoname">交易时间</div><div class="infocontent">{{pageData.orderData.order_time|date:"yyyy-MM-dd HH:mm:ss"}}</div><div class="clear-both"></div></div></div><div class="return-product-info-wrap"><div class="return-input-info margin-tp20"><div class="infoname">退款原因</div><div class="infocontent"><select ng-model="theReason.reason" ng-options="refundReason.reason for refundReason in refundReasons"></select></div><div class="selectInput">（必填）</div><div class="clear-both"></div></div><div class="return-input-info"><div class="infoname">退款金额</div><input type="number" ng-model="pageData.refundData.refund_amount" class="infocontent" placeholder="最多可以退{{maxRefundAmount}}元"><div class="selectInput">（必填）</div><div class="clear-both"></div></div></div><div class="return-input-info-wrap"><div class="return-input-info"><div class="infoname">手机号码</div><input type="tel" ng-model="pageData.refundData.phone" class="infocontent" placeholder="填写手机号便于卖家联系您"><div class="selectInput">（必填）</div><div class="clear-both"></div></div><div class="return-input-info"><div class="infoname">备注信息</div><input type="text" ng-model="pageData.refundData.remark" class="infocontent" placeholder="最多可填200字"><div class="selectInput">（选填）</div><div class="clear-both"></div></div><div class="return-input-info"><div class="infoname">图片举证</div><div type="text" class="infocontent">最多可上传3张图片</div><div class="selectInput">（选填）</div><div class="clear-both"></div></div><div class="addpic"><div class="addpics"><label class="addpicbtn label0 fileContainer" for="upLoadImg0"><svg class="icon font28 jia0" aria-hidden="true"><use xlink:href="#icon-jia"></use></svg><input accept="image/*" type="file" id="upLoadImg0"></label> <label class="addpicbtn label1 fileContainer" for="upLoadImg1"><svg class="icon font28 jia1" aria-hidden="true"><use xlink:href="#icon-jia"></use></svg><input accept="image/*" type="file" id="upLoadImg1"></label> <label class="addpicbtn label2 fileContainer" for="upLoadImg2"><svg class="icon font28 jia2" aria-hidden="true"><use xlink:href="#icon-jia"></use></svg><input accept="image/*" type="file" id="upLoadImg2"></label></div></div></div><div class="btn-wrap"><label for="submitbtn" class="bigbtn" ng-click="submitRefund()">提交</label></div><div service-time=""></div>'),e.put("app/userMange/forgetPassword/forgetPassword.html",'<div class="wrapUserInfo"><div class="header-bar" ng-switch="vm.isLogin"><go-back></go-back><div class="header-title" ng-switch-when="1">修改密码</div><div class="header-title" ng-switch-default="">忘记密码</div></div><div><div class="empty"></div><div class="list"><label class="item item-input" ng-switch="vm.isLogin"><span class="sms-phone" ng-switch-when="1" ng-bind="vm.phone"></span> <input type="number" placeholder="手机号" ng-maxlength="11" ng-model="vm.phone" ng-switch-default=""></label> <label class="item item-input" ng-switch="vm.isLogin"><input type="number" placeholder="验证码" ng-maxlength="6" ng-model="vm.code" ng-switch-default=""> <a href="javascript:;" class="button button-small sms-code" ng-class="{\'button-positive themeBackgroundColor themeBorderColor\':!vm.isShowWait}" ng-click="vf.getSMSCode()"><span ng-hide="vm.isShowWait">点击获取</span> <span ng-show="vm.isShowWait">{{vm.waitTime}}s</span></a></label> <label class="item item-input"><input type="password" placeholder="新密码" ng-model="vm.password"></label></div><div class="wrapOpeate"><a href="javascript:;" class="button button-block button-positive themeBackgroundColor themeBorderColor" ng-click="vf.updatePassword()"><span>提交</span></a></div></div></div>'),e.put("app/userMange/userInfo/userInfo.html",'<div class="wrapUserInfo wrapColor238"><div class="header-bar"><go-back></go-back><div class="header-title">设置</div></div><div ng-if="vm.field"><div class="empty"></div><div class="list"><div class="item item-icon-right" ng-if="vm.field.avatar && vm.field.avatar.show"><span ng-bind="!vm.field.avatar.showname?\'头像\':vm.field.avatar.showname"></span><go-right icon-name="icon-arrowright" ng-if="vm.field.avatar.edit" ng-click="goUrl(\'#/userUpdate/avatar\')"></go-right></div><div class="item item-icon-right" ng-if="vm.field.truename && vm.field.truename.show"><span ng-bind="!vm.field.truename.showname?\'姓名\':vm.field.truename.showname"></span> <span class="item-note" ng-if="vm.user.truename" ng-bind="vm.user.truename"></span> <span class="item-note" ng-if="!vm.user.truename">未填写</span><go-right icon-name="icon-arrowright" ng-if="vm.field.truename.edit" ng-click="goUrl(\'#/userUpdate/truename\')"></go-right></div><div class="item item-icon-right" ng-if="vm.field.sex && vm.field.sex.show" ng-switch="vm.user.gender"><span ng-bind="!vm.field.sex.showname?\'性别\':vm.field.sex.showname"></span> <span class="item-note" ng-switch-when="0">女</span> <span class="item-note" ng-switch-when="1">男</span> <span class="item-note" ng-switch-default="">未填写</span><go-right icon-name="icon-arrowright" ng-if="vm.field.sex.edit" ng-click="goUrl(\'#/userUpdate/gender\')"></go-right></div><div class="item item-icon-right" ng-if="vm.field.phone && vm.field.phone.show"><span ng-bind="!vm.field.phone.showname?\'电话\':vm.field.phone.showname"></span> <span class="item-note" ng-bind="vm.user.phone" ng-if="vm.user.phone"></span> <span class="item-note" ng-if="!vm.user.phone">未填写</span><go-right icon-name="icon-arrowright" ng-if="vm.field.phone.edit" ng-click="goUrl(\'#/userUpdate/phone\')"></go-right></div><div class="item item-icon-right" ng-if="vm.field.email && vm.field.email.show"><span ng-bind="!vm.field.email.showname?\'邮箱\':vm.field.email.showname"></span> <span class="item-note" ng-bind="vm.user.email" ng-if="vm.user.email"></span> <span class="item-note" ng-if="!vm.user.email">未填写</span><go-right icon-name="icon-arrowright" ng-if="vm.field.email.edit" ng-click="goUrl(\'#/userUpdate/email\')"></go-right></div><div class="item item-icon-right" ng-if="vm.field.address && vm.field.address.show"><span ng-bind="!vm.field.address.showname?\'地址\':vm.field.address.showname"></span> <span class="item-note">详情</span><go-right icon-name="icon-arrowright" ng-if="vm.field.address.edit" ng-click="goUrl(\'#/receiveAddressList\')"></go-right></div></div><div class="empty"></div><div class="list"><div class="item item-icon-right" ng-if="vm.field[\'ex\'+i] && vm.field[\'ex\'+i].show" ng-repeat="i in [1,2,3,4,5]"><span ng-bind="!vm.field[\'ex\'+i].showname?\'Ex\'+i:vm.field[\'ex\'+i].showname"></span> <span class="item-note" ng-bind="vm.user[\'ex\'+i]" ng-if="vm.user[\'ex\'+i]"></span> <span class="item-note" ng-if="!vm.user[\'ex\'+i]">未填写</span><go-right icon-name="icon-arrowright" ng-if="vm.field[\'ex\'+i].edit" ng-click="goUrl(\'#/userUpdate/ex\'+i)"></go-right></div><div><div class="empty"></div><div class="list"><div class="item item-icon-right" ng-if="vm.field.identitycardphoto && vm.field.identitycardphoto.show"><span ng-bind="!vm.field.identitycardphoto.showname?\'实名认证\':vm.field.identitycardphoto.showname"></span> <span class="item-note" ng-if="vm.user.hasidentitycardphoto">完成</span> <span class="item-note" ng-if="!vm.user.hasidentitycardphoto">未完成</span><go-right icon-name="icon-arrowright" ng-if="vm.field.identitycardphoto.edit" ng-click="goUrl(\'#/userUpdate/identity_card_photo\')"></go-right></div><div class="item item-icon-right" ng-if="vm.field.businessintelligencecertificatephoto && vm.field.businessintelligencecertificatephoto.show"><span ng-bind="!vm.field.businessintelligencecertificatephoto.showname?\'公司资质\':vm.field.businessintelligencecertificatephoto.showname"></span> <span class="item-note" ng-if="vm.user.hasbusinessintelligencecertificatephoto">完成</span> <span class="item-note" ng-if="!vm.user.hasbusinessintelligencecertificatephoto">未完成</span><go-right icon-name="icon-arrowright" ng-if="vm.field.businessintelligencecertificatephoto.edit" ng-click="goUrl(\'#/userUpdate/business_intelligence_certificate_photo\')"></go-right></div><div class="item item-icon-right" ng-if="vm.field.invoicinginformation && vm.field.invoicinginformation.show"><span ng-bind="!vm.field.invoicinginformation.showname?\'开票资料\':vm.field.invoicinginformation.showname"></span> <span class="item-note" ng-if="vm.user.hasinvoicinginformation">已提交</span> <span class="item-note" ng-if="!vm.user.hasinvoicinginformation">未提交</span><go-right icon-name="icon-arrowright" ng-if="vm.field.invoicinginformation.edit" ng-click="goUrl(\'#/userUpdate/invoicinginformation\')"></go-right></div><div class="item item-icon-right" ng-if="vm.field.bankcard && vm.field.bankcard.show"><span ng-bind="!vm.field.bankcard.showname?\'我的银行卡\':vm.field.bankcard.showname"></span> <span class="item-note" ng-if="vm.user.hasbankcard">已绑定</span> <span class="item-note" ng-if="!vm.user.hasbankcard">未绑定</span><go-right icon-name="icon-arrowright" ng-if="vm.field.bankcard.edit" ng-click="goUrl(\'/app/wap/BankCardList.aspx\')"></go-right></div><div class="item item-icon-right" ng-if="vm.field.qrcode && vm.field.qrcode.show"><span ng-bind="!vm.field.qrcode.showname?\'我的二维码名片\':vm.field.qrcode.showname"></span> <span class="item-note" ng-if="vm.user.hasqrcode">已生成</span> <span class="item-note" ng-if="!vm.user.hasqrcode">推广生成</span><go-right icon-name="icon-arrowright" ng-if="vm.field.qrcode.edit" ng-click="goUrl(\'/App/Cation/Wap/Mall/Distribution/Index.aspx\')"></go-right></div><div class="item item-icon-right" ng-if="vm.field.forgetpassword && vm.field.forgetpassword.show"><span ng-bind="!vm.field.forgetpassword.showname?\'密码修改\':vm.field.forgetpassword.showname"></span><go-right icon-name="icon-arrowright" ng-if="vm.field.forgetpassword.edit" ng-click="goUrl(\'#/forgetPassword/1\')"></go-right></div></div><div class="wrapOpeate" ng-if="vm.field.loginout && vm.field.loginout.show" style="margin-top: 20px;"><a href="javascript:;" class="button button-block button-positive themeBackgroundColor themeBorderColor" ng-click="vf.loginOut()"><span>退出登录</span></a></div></div></div></div></div>'),e.put("app/userMange/userUpdate/userUpdate.html",'<div class="wrapUserInfo"><div class="header-bar"><go-back></go-back><div class="header-title" ng-bind="vm.title"></div></div><div ng-switch="vm.upt" ng-if="vm.user"><div class="empty"></div><div class="list"><label class="item item-icon-right" ng-switch-when="gender" ng-click="vm.user.gender = \'1\'">男<go-right icon-name="icon-dagou" ng-if="vm.user.gender == \'1\'"></go-right></label> <label class="item item-icon-right" ng-switch-when="gender" ng-click="vm.user.gender = \'0\'">女<go-right icon-name="icon-dagou" ng-if="vm.user.gender == \'0\'"></go-right></label><div class="item item-text-center" ng-switch-when="avatar" style="border: 0px;"><div class="uploader-box" ng-class="{\'uploader-box-empty\':!vm.user.avatar}" ng-style="{\'background-image\':!vm.user.avatar?\'\':\'url(\'+vm.user.avatar+\')\',\'background-size\': \'100%\'}"><input type="file" accept="image/jpeg;image/png;image/gif;" multiple="multiple" class="uploader-input" onchange="angular.element(this).scope().vf.upload(this,\'avatar\')"></div></div><div class="item item-text-center" ng-switch-when="identity_card_photo" style="border: 0px;"><div class="uploader-box-out"><div class="uploader-box" ng-class="{\'uploader-box-empty\':!vm.user.identity_card_photo_front}" ng-style="{\'background-image\':!vm.user.identity_card_photo_front?\'\':\'url(\'+vm.user.identity_card_photo_front+\')\',\'background-size\': \'100%\'}"><input type="file" accept="image/jpeg;image/png;image/gif;" multiple="multiple" class="uploader-input" onchange="angular.element(this).scope().vf.upload(this,\'identity_card_photo_front\')"></div><div class="uploader-box-text">身份证正面</div></div><div class="uploader-box-out"><div class="uploader-box" ng-class="{\'uploader-box-empty\':!vm.user.identity_card_photo_behind}" ng-style="{\'background-image\':!vm.user.identity_card_photo_behind?\'\':\'url(\'+vm.user.identity_card_photo_behind+\')\',\'background-size\': \'100%\'}"><input type="file" accept="image/jpeg;image/png;image/gif;" multiple="multiple" class="uploader-input" onchange="angular.element(this).scope().vf.upload(this,\'identity_card_photo_behind\')"></div><div class="uploader-box-text">身份证反面</div></div><div class="uploader-box-out"><div class="uploader-box" ng-class="{\'uploader-box-empty\':!vm.user.identity_card_photo_handheld}" ng-style="{\'background-image\':!vm.user.identity_card_photo_handheld?\'\':\'url(\'+vm.user.identity_card_photo_handheld+\')\',\'background-size\': \'100%\'}"><input type="file" accept="image/jpeg;image/png;image/gif;" multiple="multiple" class="uploader-input" onchange="angular.element(this).scope().vf.upload(this,\'identity_card_photo_handheld\')"></div><div class="uploader-box-text">身份证手持照</div></div></div><label class="item item-input" ng-switch-when="business_intelligence_certificate_photo"><input type="text" placeholder="公司的名称" ng-model="vm.user.intelligence_certificate_business"></label><div class="item item-text-center" ng-switch-when="business_intelligence_certificate_photo" style="border: 0px;"><div class="uploader-box-out"><div class="uploader-box" ng-class="{\'uploader-box-empty\':!vm.user.business_intelligence_certificate_photo1}" ng-style="{\'background-image\':!vm.user.business_intelligence_certificate_photo1?\'\':\'url(\'+vm.user.business_intelligence_certificate_photo1+\')\',\'background-size\': \'100%\'}"><input type="file" accept="image/jpeg;image/png;image/gif;" multiple="multiple" class="uploader-input" onchange="angular.element(this).scope().vf.upload(this,\'business_intelligence_certificate_photo1\')"></div><div class="uploader-box-text">三证合一</div></div><div class="uploader-box-out"><div class="uploader-box" ng-class="{\'uploader-box-empty\':!vm.user.business_intelligence_certificate_photo2}" ng-style="{\'background-image\':!vm.user.business_intelligence_certificate_photo2?\'\':\'url(\'+vm.user.business_intelligence_certificate_photo2+\')\',\'background-size\': \'100%\'}"><input type="file" accept="image/jpeg;image/png;image/gif;" multiple="multiple" class="uploader-input" onchange="angular.element(this).scope().vf.upload(this,\'business_intelligence_certificate_photo2\')"></div><div class="uploader-box-text">补充一</div></div><div class="uploader-box-out"><div class="uploader-box" ng-class="{\'uploader-box-empty\':!vm.user.business_intelligence_certificate_photo3}" ng-style="{\'background-image\':!vm.user.business_intelligence_certificate_photo3?\'\':\'url(\'+vm.user.business_intelligence_certificate_photo3+\')\',\'background-size\': \'100%\'}"><input type="file" accept="image/jpeg;image/png;image/gif;" multiple="multiple" class="uploader-input" onchange="angular.element(this).scope().vf.upload(this,\'business_intelligence_certificate_photo3\')"></div><div class="uploader-box-text">补充二</div></div></div><label class="item item-input" ng-switch-when="truename"><input type="text" placeholder="姓名" ng-model="vm.user.truename"></label> <label class="item item-input" ng-switch-when="phone" ng-if="vm.user.phone"><span class="sms-phone" ng-bind="vm.user.phone"></span></label> <label class="item item-input" ng-if="vm.canPost" ng-switch-when="phone"><input type="number" placeholder="新手机号" ng-model="vm.phone"></label> <label class="item item-input" ng-if="vm.canPost" ng-switch-when="phone"><input type="number" placeholder="验证码" ng-maxlength="6" ng-model="vm.code"> <a href="javascript:;" class="button button-small sms-code" ng-class="{\'button-positive themeBackgroundColor themeBorderColor\':!vm.isShowWait}" ng-click="vf.getSMSCode()"><span ng-hide="vm.isShowWait">点击获取</span> <span ng-show="vm.isShowWait">{{vm.waitTime}}s</span></a></label> <label class="item item-input" ng-switch-when="email"><input type="text" placeholder="邮箱地址" ng-model="vm.user.email"></label> <label class="item item-input" ng-switch-default=""><input type="text" placeholder="{{vm.placeholder}}" ng-model="vm.user[vm.upt]"></label></div><div class="wrapOpeate" ng-if="vm.canPost"><a href="javascript:;" class="button button-block button-positive themeBackgroundColor themeBorderColor" ng-click="vf.update()"><span ng-if="vm.upt == \'avatar\'||vm.upt == \'identity_card_photo\' || vm.upt == \'business_intelligence_certificate_photo\'">上传照片</span> <span ng-if="!(vm.upt == \'avatar\'||vm.upt == \'identity_card_photo\' || vm.upt == \'business_intelligence_certificate_photo\')">提 交</span></a></div></div><div ng-switch="vm.upt" ng-if="vm.userEx"><div class="empty"></div><div class="list"><label class="item item-input" ng-switch-when="invoicinginformation"><input type="text" placeholder="公司的名称" ng-model="vm.userEx.ex1"></label> <label class="item item-input" ng-switch-when="invoicinginformation"><input type="text" placeholder="信用代码" ng-model="vm.userEx.ex2"></label> <label class="item item-input" ng-switch-when="invoicinginformation"><input type="text" placeholder="开户银行" ng-model="vm.userEx.ex3"></label> <label class="item item-input" ng-switch-when="invoicinginformation"><input type="text" placeholder="银行帐号" ng-model="vm.userEx.ex4"></label> <label class="item item-input" ng-switch-when="invoicinginformation"><input type="text" placeholder="公司注册地址" ng-model="vm.userEx.ex5"></label> <label class="item item-input" ng-switch-when="invoicinginformation"><input type="text" placeholder="公司电话" ng-model="vm.userEx.ex6"></label> <label class="item item-input" ng-switch-when="invoicinginformation"><select class="item-select" ng-model="vm.userEx.value" ng-options="type for type in vm.invoicTypes"><option value="">--发票类型--</option></select></label><div class="item item-text-center" ng-if="vm.upt == \'invoicinginformation\' && vm.userEx.value==\'增值税专用发票\'" style="border: 0px;"><div class="uploader-box" ng-class="{\'uploader-box-empty\':!vm.userEx.ex7}" ng-style="{\'background-image\':!vm.userEx.ex7?\'\':\'url(\'+vm.userEx.ex7+\')\',\'background-size\': \'100%\'}"><input type="file" accept="image/jpeg;image/png;image/gif;" multiple="multiple" class="uploader-input" onchange="angular.element(this).scope().vf.upload(this,\'ex7\',true)"></div></div></div><div class="wrapOpeate"><a href="javascript:;" class="button button-block button-positive themeBackgroundColor themeBorderColor" ng-click="vf.updateEx()"><span>提 交</span></a></div></div></div>'),e.put("app/customize/meifan/MfOrderDetails/MfOrderDetails.html",'<div class="wrapMFOrderDetails"><div class="orderDetails"><div class="orderDetails_user"><ul><li><a class="item item-thumbnail-left" href="javascript:;"><div class="orderDetails_l"><img ng-src="{{vm.orderDetailsData.img_url}}"></div><div class="orderDetails_r"><h2>美帆游艇俱乐部{{vm.orderDetailsData.title}}<i>&times;1</i></h2><p>{{vm.orderDetailsData.summary}}</p><h3><small>￥</small>{{vm.orderDetailsData.amount}}<span>￥{{vm.orderDetailsData.pre_amount}}</span></h3><h4>共计一件商品 合计：￥{{vm.orderDetailsData.amount}}</h4></div><h5>{{vm.orderDetailsData.time}}</h5></a></li></ul></div><div class="orderDetails_message"><ul><li><span>下单时间：</span><em>{{vm.orderDetailsData.time}}</em></li><li><span>支付方式：</span><em>微信支付</em></li><li><span>支付状态：</span><em>已支付</em></li></ul></div></div></div>'),e.put("app/customize/meifan/MfOrderList/MfOrderList.html",'<div class="wrapMFOrderList"><div class="orderList"><div class="orderList_user"><ul><li ng-repeat="item in vm.orderListData"><a class="item item-thumbnail-left" href="javascript:;" ng-click="vf.goOrderDetails(item)"><div class="orderList_l"><img ng-src="{{item.img_url}}"></div><div class="orderList_r"><h2>美帆游艇俱乐部{{item.title}}<i>&times;1</i></h2><p>{{item.summary}}</p><h3><small>￥</small>{{item.amount}}<span>￥{{item.pre_amount}}</span></h3><h4>共计一件商品 合计：￥{{item.amount}}</h4></div><h5>{{item.time}}</h5></a></li></ul></div></div></div>'),e.put("app/customize/meifan/activeDetails/activeDetails.html",'<div class="wrapMfActiveDetails"><div class="activeDetails"><div class="activeDetails_title"><h2>{{vm.activeDetailsData.activity_name}}</h2><h3><span>{{vm.activeDetailsData.insert_date}}</span>上海美帆游艇俱乐部</h3></div><div class="activeDetails_explain" ng-bind-html="vm.activeDetailsData.description"></div><h4><a href="javascript:;" ng-click="vf.goActiveEntryForm(vm.activeDetailsData);">马上报名</a></h4></div></div>'),e.put("app/customize/meifan/activeEntryForm/activeEntryForm.html",'<div class="wrapMFActiveEntryForm"><div class="activeEntryForm"><div class="activeEntryForm_user"><a class="item item-thumbnail-left" href="javascript:;"><img ng-src="{{vm.activeDetailsData.activity_img}}"><h2>{{vm.activeDetailsData.activity_name}}</h2></a></div><div class="activeEntryForm_chart"><h3><span>报名表</span><i>(仅支持一次报名一个人，报名信息均必填)</i></h3><div class="activeEntryForm_se"><select ng-model="vm.currentGroup" ng-options="item.name for item in vm.groupList" ng-change="vf.calcAmount()"></select><select ng-model="vm.currentMember" ng-options="item.name for item in vm.memberTypeList" ng-change="vf.calcAmount()"></select></div></div><div class="activeEntryForm_message"><ul><li><i>*</i><span>报名人姓名：</span><input type="text" ng-model="vm.name"></li><li><i>*</i><span>报名人性别：</span> <label><input name="boy" type="radio" value="男" class="activeEntryForm_input" ng-model="vm.sex">男</label> <label><input name="boy" type="radio" value="女" class="activeEntryForm_input" ng-model="vm.sex">女</label></li><li><i>*</i><span>报名人出生日期：</span><input type="text" ng-model="vm.birthday"></li><li><i>*</i><span>联系人手机(默认当前注册号码)：</span><input type="text" class="activeEntryForm_phone" ng-model="vm.phone"></li><li><i>*</i><span>联系人邮箱：</span><input type="text" ng-model="vm.email"></li></ul></div><div class="activeEntryForm_remark"><h3>添加备注信息</h3><h4><textarea ng-model="vm.remark"></textarea></h4></div><div class="activeEntryForm_buy"><span ng-if="vm.activeDetailsData.is_need_pay==1">合计：￥{{vm.amount}}</span> <a href="javascript:;" ng-click="vf.submitData()">确认报名</a></div></div></div>'),
e.put("app/customize/meifan/activeList/activeList.html",'<div class="wrapMFActiveList"><div class="activeList"><ul><li ng-repeat="item in vm.activeListData" ng-click="vf.goActiveDetails(item)"><a href="javascript:;"><div class="activeList_pic"><img ng-src="{{item.activity_img}}"><div class="activeList_tit"><h3>{{item.activity_name}}</h3><h4>{{item.summary}}</h4><i></i> <input type="button" value="未开始" ng-if="item.status==\'0\'"> <input type="button" value="进行中" ng-if="item.status==\'1\'"> <input type="button" value="已结束" ng-if="item.status==\'2\'" class="activeList_btn"></div></div></a></li></ul></div></div>'),e.put("app/customize/meifan/applyDetails/applyDetails.html",'<div class="wrapMfApplyDetails"><div class="applyDetails"><div class="applyDetails_title"><h2>{{vm.applyDetailsData.activity_name}}</h2><h3><span>{{vm.applyDetailsData.insert_date}}</span>上海美帆游艇俱乐部</h3></div><div class="applyDetails_explain" ng-bind-html="vm.applyDetailsData.description"></div><h4><a href="javascript:;" ng-click="vf.goApplyEntryForm(vm.applyDetailsData)">马上报名</a></h4></div></div>'),e.put("app/customize/meifan/applyEntryForm/applyEntryForm.html",'<div class="wrapMFApplyEntryForm"><div class="applyEntryForm"><div class="applyEntryForm_user"><a class="item item-thumbnail-left" href="javascript:;"><img ng-src="{{vm.applyDetailsData.activity_img}}"><h2>{{vm.applyDetailsData.activity_name}}</h2></a></div><div class="applyEntryForm_chart"><h3><span>报名表</span><i>(仅支持一次报名一个人，报名信息均必填)</i></h3><div class="applyEntryForm_se"><select ng-model="vm.currentDate" ng-options="item.name for item in vm.dateList" ng-change="vf.calcAmount()"></select><select ng-model="vm.currentGroup" ng-options="item.name for item in vm.groupList" ng-change="vf.calcAmount()"></select><select ng-model="vm.currentMember" ng-options="item.name for item in vm.memberTypeList" ng-change="vf.calcAmount()"></select></div></div><div class="applyEntryForm_message"><ul><li><i>*</i><span>报名人姓名：</span><input type="text" ng-model="vm.name"></li><li><i>*</i><span>报名人性别：</span> <label><input name="boy" type="radio" value="男" class="applyEntryForm_input" ng-model="vm.sex">男</label> <label><input name="boy" type="radio" value="女" class="applyEntryForm_input" ng-model="vm.sex">女</label></li><li><i>*</i><span>报名人出生日期：</span><input type="text" ng-model="vm.birthday"></li><li><i>*</i><span>联系人手机(默认当前注册号码)：</span><input type="text" class="applyEntryForm_phone" ng-model="vm.phone"></li><li><i>*</i><span>联系人邮箱：</span><input type="text" ng-model="vm.email"></li></ul></div><div class="applyEntryForm_remark"><h3>添加备注信息</h3><h4><textarea ng-model="vm.remark"></textarea></h4></div><div class="applyEntryForm_buy"><span>合计：￥{{vm.amount}}</span> <a href="javascript:;" ng-click="vf.submitData()">确认报名</a></div></div></div>'),e.put("app/customize/meifan/applyList/applyList.html",'<div class="wrapMFApplyList"><div class="applyList"><ul><li ng-repeat="item in vm.applyListData" ng-click="vf.goApplyDetails(item)"><a href="javascript:;"><div class="activeList_pic"><img ng-src="{{item.activity_img}}"></div><h3>{{item.activity_name}}</h3><h4>{{item.summary}}</h4></a></li></ul></div></div>'),e.put("app/customize/meifan/cardDetails/cardDetails.html",'<div class="wrapMFcardDetails"><div class="cardDetails"><div class="cardDetails_user"><h2>{{vm.cardDetailsData.card_name}}&nbsp;&nbsp;&nbsp;&nbsp;{{vm.cardDetailsData.card_name_en}}</h2><p><i>￥</i>{{vm.cardDetailsData.amount}}<span>￥{{vm.cardDetailsData.pre_amount}}</span></p><div class="cardDetails_row"><div class="row row_first"><div class="col">会籍类型<i></i></div><div class="col">入会费<i></i></div><div class="col">手续费<i></i></div><div class="col">有效期限<i></i></div></div><div class="row"><div class="col">{{vm.cardDetailsData.card_name}}</div><div class="col">{{vm.cardDetailsData.amount}}</div><div class="col">{{vm.cardDetailsData.server_amount}}</div><div class="col">{{vm.cardDetailsData.valid_month}}</div></div></div></div><div class="cardDetails_member"><div class="bar bar-light"><h1 class="title">会员权益</h1></div><div class="cardDetails_text" ng-bind-html="vm.cardDetailsData.description"></div></div><div class="cardDetails_buy"><span>￥{{vm.cardDetailsData.server_amount+vm.cardDetailsData.amount}}</span> <i>￥{{vm.cardDetailsData.pre_amount}}</i> <a href="javascript:;" ng-click="vf.goCardPay(vm.cardDetailsData)">马上购买</a></div></div></div>'),e.put("app/customize/meifan/cardList/cardList.html",'<div class="wrapMFCardList"><div class="cardList"><ul><li class="cardList_personage" ng-repeat="item in vm.cardListData"><a href="javascript:;" ng-click="vf.goCardDetail(item)"><div class="cardList_view"><i><img ng-src="{{item.card_img}}"></i><h3>{{item.card_name}}</h3><p>{{item.card_name_en}}</p></div><span>￥{{item.amount}}</span></a></li></ul></div></div>'),e.put("app/customize/meifan/cardPay/cardPay.html",'<div class="wrapMFCardPay"><div class="cardPay"><div class="cardPay_top"><div class="cardPay_message"><h2>美帆会员({{vm.cardDetailsData.card_name}})</h2><h3><i>￥</i><span>{{vm.cardDetailsData.amount}}</span><em>￥{{vm.cardDetailsData.pre_amount}}</em>手续费({{vm.cardDetailsData.server_amount}})<small>&times;1</small></h3></div><div class="cardPay_shop"><ul><li><em>￥{{vm.cardDetailsData.server_amount+vm.cardDetailsData.amount}}</em><span>共一件商品 合计：</span></li><li><em class="cardPay_shop_line">{{vm.cardDetailsData.pre_amount-vm.cardDetailsData.amount}}</em><span>优惠：</span></li><li><em class="red">￥{{vm.cardDetailsData.server_amount+vm.cardDetailsData.amount}}</em><span>实际付款：</span></li></ul></div></div><div class="cardPay_way"><div class="bar"><h2 class="title">支付方式</h2></div><div class="cardPay_wx"><a href="javascript:;"><i></i> <span>微信支付</span></a></div></div><div class="cardPay_payment"><a href="javascript:;" ng-click="vf.pay()" id="btnPay">立即支付</a></div></div><div class="bg" id="propBg"></div><div class="cardPay_result" id="propDlg"><div class="cardPay_result_fail"><h4></h4><p><span id="payTimer">5</span>秒后将自动返回</p></div></div></div>'),e.put("app/customize/meifan/matchDetails/matchDetails.html",'<div class="wrapMfMatchDetails"><div class="matchDetails"><div class="matchDetails_title"><h2>{{vm.matchDetailsData.activity_name}}</h2><h3><span>{{vm.matchDetailsData.insert_date}}</span>上海美帆游艇俱乐部</h3></div><div class="matchDetails_explain" ng-bind-html="vm.matchDetailsData.description"></div><h4><a href="javascript:;" ng-click="vf.goMatchEntryForm(vm.matchDetailsData)">马上报名</a></h4></div></div>'),e.put("app/customize/meifan/matchEntryForm/matchEntryForm.html",'<div class="wrapMFMatchEntryForm"><div class="matchEntryForm"><div class="matchEntryForm_user"><a class="item item-thumbnail-left" href="javascript:;"><img ng-src="{{vm.matchDetailsData.activity_img}}"><h2>{{vm.matchDetailsData.activity_name}}</h2></a></div><div class="matchEntryForm_chart"><h3><span>报名表</span><i>(仅支持一次报名一个人，报名信息均必填)</i></h3><div class="matchEntryForm_se"><select ng-model="vm.currentDate" ng-options="item.name for item in vm.dateList" ng-change="vf.calcAmount()"></select><select ng-model="vm.currentGroup" ng-options="item.name for item in vm.groupList" ng-change="vf.calcAmount()"></select><select ng-model="vm.currentMember" ng-options="item.name for item in vm.memberTypeList" ng-change="vf.calcAmount()"></select></div></div><div class="matchEntryForm_message"><ul><li><i>*</i><span>报名人姓名：</span><input type="text" ng-model="vm.name"></li><li><i>*</i><span>报名人性别：</span> <label><input name="boy" type="radio" value="男" class="matchEntryForm_input" ng-model="vm.sex">男</label> <label><input name="boy" type="radio" value="女" class="matchEntryForm_input" ng-model="vm.sex">女</label></li><li><i>*</i><span>报名人出生日期：</span><input type="text" ng-model="vm.birthday"></li><li><i>*</i><span>联系人手机(默认当前注册号码)：</span><input type="text" class="matchEntryForm_phone" ng-model="vm.phone"></li><li><i>*</i><span>联系人邮箱：</span><input type="text" ng-model="vm.email"></li></ul></div><div class="matchEntryForm_remark"><h3>添加备注信息</h3><h4><textarea ng-model="vm.remark"></textarea></h4></div><div class="matchEntryForm_buy"><span ng-if="vm.matchDetailsData.is_need_pay==1">合计：￥{{vm.amount}}</span> <a href="javascript:;" ng-click="vf.submitData()">确认报名</a></div></div></div>'),e.put("app/customize/meifan/mfPay/mfPay.html",'<div class="wrapMFPay"><div class="mfPay"><div class="mfPay_top"><div class="mfPay_message"><h2>{{vm.orderData.activity_name}}</h2><h3><em>时间：{{vm.orderData.date_range}}</em><p><i>￥</i><span>{{vm.orderData.amount}}</span></p></h3></div><div class="mfPay_shop"><ul><li><em>￥{{vm.orderData.amount}}</em><span>共一件商品 合计：</span></li><li><em>无</em><span>优惠：</span></li><li><em class="red">￥{{vm.orderData.amount}}</em><span>实际付款：</span></li></ul></div></div><div class="mfPay_way"><div class="bar"><h2 class="title">支付方式</h2></div><div class="mfPay_wx"><a href="javascript:;"><i></i> <span>微信支付</span></a></div></div><div class="mfPay_payment"><a href="javascript:;" ng-click="vf.pay()" id="btnPay">立即支付</a></div></div><div class="bg" id="propBg"></div><div class="mfPay_result" id="propDlg"><div class="mfPay_result_fail"><h4></h4><p><span id="payTimer">5</span>秒后将自动返回</p></div></div></div>'),e.put("app/customize/meifan/myActiveMessage/myActiveMessage.html",'<div class="wrapMFMyActiveMessage"><div class="myActiveMessage"><div class="myActiveMessage_user"><a href="javascript:;" class="myActiveMessage_lj"><h3><svg class="icon time"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-shizhong"></use></svg><span>{{vm.myActiveMessageData.date_range}}</span><em>{{vm.myActiveMessageData.group_type}}</em> <i class="red" ng-if="vm.myActiveMessageData.status==\'0\'">未开始</i> <i class="red" ng-if="vm.myActiveMessageData.status==\'1\'">进行中</i> <i ng-if="vm.myActiveMessageData.status==\'2\'">已结束</i></h3><div class="myActiveMessage_use item item-thumbnail-left"><img ng-src="{{vm.myActiveMessageData.activity_img}}"><h4>{{vm.myActiveMessageData.activity_name}}</h4><h5>姓名：{{vm.myActiveMessageData.name}}</h5><p>价格：<span>￥{{vm.myActiveMessageData.amount}}</span></p></div></a></div><div class="myActiveMessage_message"><h2>报名信息</h2><ul><li><span>报名人姓名：</span><em>{{vm.myActiveMessageData.name}}</em></li><li><span>报名人性别：</span><em>{{vm.myActiveMessageData.sex}}</em></li><li><span>报名人出生日期：</span><em>{{vm.myActiveMessageData.birthday}}</em></li><li><span>联系人手机(默认当前注册号码)：</span><em>{{vm.myActiveMessageData.phone}}</em></li><li><span>联系人邮箱：</span><em>{{vm.myActiveMessageData.email}}</em></li><li><span>备注信息：</span><em>{{vm.myActiveMessageData.remark}}</em></li></ul></div></div></div>'),e.put("app/customize/meifan/myApplyList/myApplyList.html",'<div class="wrapMyApplyList"><div class="myApplyList"><div class="myApplyList_tab"><h2 id="tab"><a href="javascript:;" class="active" ng-click="vf.myTrainSelect();">培训</a> <a href="javascript:;" ng-click="vf.myGameSelect();">比赛</a> <a href="javascript:;" ng-click="vf.myActiveSelect();">活动</a></h2><div class="mfApplyList_tabCon" id="tabCon"><ul class="current"><li ng-repeat="item in vm.myTrainListData" ng-click="vf.goMyTrainMessage(item)"><a href="javascript:;" class="mfApplyList_lj"><h3><svg class="icon time"><use xlink:href="#icon-shizhong"></use></svg><span>{{item.date_range}}</span><em>{{item.group_type}}</em> <i class="red" ng-if="item.status==\'0\'">未开始</i> <i class="red" ng-if="item.status==\'1\'">进行中</i> <i ng-if="item.status==\'2\'">已结束</i></h3><div class="mfApplyList_use item item-thumbnail-left"><img ng-src="{{item.activity_img}}"><h4>{{item.activity_name}}</h4><h5>姓名：{{item.name}}</h5><p>价格：<span>￥{{item.amount}}</span></p></div></a></li></ul><ul><li ng-repeat="item in vm.myGameListData" ng-click="vf.goMyGameMessage(item)"><a href="javascript:;" class="mfApplyList_lj"><h3><svg class="icon time"><use xlink:href="#icon-shizhong"></use></svg><span>{{item.date_range}}</span><em>{{item.group_type}}</em> <i class="red" ng-if="item.status==\'0\'">未开始</i> <i class="red" ng-if="item.status==\'1\'">进行中</i> <i ng-if="item.status==\'2\'">已结束</i></h3><div class="mfApplyList_use item item-thumbnail-left"><img ng-src="{{item.activity_img}}"><h4>{{item.activity_name}}</h4><h5>姓名：{{item.name}}</h5><p>价格：<span>￥{{item.amount}}</span></p></div></a></li></ul><ul><li ng-repeat="item in vm.myActiveListData" ng-click="vf.goMyActiveMessage(item)"><a href="javascript:;" class="mfApplyList_lj"><h3><svg class="icon time"><use xlink:href="#icon-shizhong"></use></svg><span>{{item.date_range}}</span><em>{{item.group_type}}</em> <i class="red" ng-if="item.status==\'0\'">未开始</i> <i class="red" ng-if="item.status==\'1\'">进行中</i> <i ng-if="item.status==\'2\'">已结束</i></h3><div class="mfApplyList_use item item-thumbnail-left"><img ng-src="{{item.activity_img}}"><h4>{{item.activity_name}}</h4><h5>姓名：{{item.name}}</h5><p>价格：<span>￥{{item.amount}}</span></p></div></a></li></ul></div></div></div></div>'),e.put("app/customize/meifan/myCardDetails/myCardDetails.html",'<div class="wrapMyCardDetails"><div class="myCardDetails"><ul><li class="myCardDetails_personage"><a href="javascript:;"><div class="myCardDetails_view"><i><img ng-src="{{vm.myCardDetailsData.card_img}}"></i><h3>{{vm.myCardDetailsData.card_name}}</h3><p>{{vm.myCardDetailsData.card_name_en}}</p></div><span>会员卡号：{{vm.myCardDetailsData.card_number}}</span></a></li></ul><div class="myCardDetails_message"><ul><li><span>绑卡人：</span><em class="myCardDetails_bule">{{vm.myCardDetailsData.bind_name}}</em></li><li><span>开卡时间：</span><em>{{vm.myCardDetailsData.create_date}}</em></li><li><span>到期时间：</span><em>{{vm.myCardDetailsData.expire_date}}</em></li><li><span>剩余天数：</span><em class="myCardDetails_bule">{{vm.myCardDetailsData.over_days}}天</em></li></ul></div><div class="myCardDetails_member"><div class="bar bar-light"><h1 class="title">会员权益</h1></div><div class="myCardDetails_text" ng-bind-html="vm.myCardDetailsData.description"></div></div></div></div>'),e.put("app/customize/meifan/myCardList/myCardList.html",'<div class="wrapMyCardList"><div class="myCardList"><ul><li class="myCardList_personage" ng-repeat="item in vm.myCardListData"><a href="#/meifan/myCardDetails/{{item.card_id}}"><div class="myCardList_view"><i><img ng-src="{{item.card_img}}"></i><h3>{{item.card_name}}</h3><p>{{item.card_name_en}}</p></div><span>会员卡号：{{item.card_number}}</span></a></li></ul></div></div>'),e.put("app/customize/meifan/myGameDetails/myGameDetails.html",'<div class="wrapMyGameDetails"><div class="myGameDetails"><div class="myGameDetails_tit"><h2>{{vm.myGameDetailsData.activity_name}}<i></i></h2><h3>日期：{{vm.myGameDetailsData.date_range}}</h3><h3>组别：{{vm.myGameDetailsData.group_type}}</h3></div><div class="myGameDetails_grade"><h4>比赛成绩单</h4><div class="myGameDetails_text" ng-bind-html="vm.myGameDetailsData.comment"></div></div></div></div>'),e.put("app/customize/meifan/matchList/matchList.html",'<div class="wrapMFMatchList"><div class="matchList"><ul><li ng-repeat="item in vm.matchListData" ng-click="vf.goMatchDetails(item)"><p><img ng-src="{{item.activity_img}}"></p><span>{{item.activity_name}}</span> <a href="javascript:;" class="btn" ng-if="item.status==\'0\'">报名</a> <a href="javascript:;" class="btn" ng-if="item.status==\'1\'">进行中</a> <a href="javascript:;" class="btn btnMatchList" ng-if="item.status==\'2\'">已结束</a></li></ul></div></div>'),e.put("app/customize/meifan/myGameList/myGameList.html",'<div class="wrapMFMyGameList"><div class="myGameList"><h2>已报名赛事</h2><ul><li ng-repeat="item in vm.myGameListData" ng-click="vf.goMyGameDetails(item)"><p><img ng-src="{{item.activity_img}}"></p><span>{{item.activity_name}}</span><h3><em>姓名：</em>{{item.name}}</h3><h3><em>价格：</em><i>￥{{item.amount}}</i></h3><a href="javascript:;" class="btn" ng-if="item.status==\'0\'">未开始</a> <a href="javascript:;" class="btn" ng-if="item.status==\'1\'">已开始</a> <a href="javascript:;" class="btn btnGameList" ng-if="item.status==\'2\'">已结束</a></li></ul></div></div>'),e.put("app/customize/meifan/myGameMessage/myGameMessage.html",'<div class="wrapMFMyGameMessage"><div class="myGameMessage"><div class="myGameMessage_user"><a href="javascript:;" class="myGameMessage_lj"><h3><svg class="icon time"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-shizhong"></use></svg><span>{{vm.myGameMessageData.date_range}}</span><em>{{vm.myGameMessageData.group_type}}</em> <i class="red" ng-if="vm.myGameMessageData.status==\'0\'">未开始</i> <i class="red" ng-if="vm.myGameMessageData.status==\'1\'">进行中</i> <i ng-if="vm.myGameMessageData.status==\'2\'">已结束</i></h3><div class="myGameMessage_use item item-thumbnail-left"><img ng-src="{{vm.myGameMessageData.activity_img}}"><h4>{{vm.myGameMessageData.activity_name}}</h4><h5>姓名：{{vm.myGameMessageData.name}}</h5><p>价格：<span>￥{{vm.myGameMessageData.amount}}</span></p></div></a></div><div class="myGameMessage_message"><h2>报名信息</h2><ul><li><span>报名人姓名：</span><em>{{vm.myGameMessageData.name}}</em></li><li><span>报名人性别：</span><em>{{vm.myGameMessageData.sex}}</em></li><li><span>报名人出生日期：</span><em>{{vm.myGameMessageData.birthday}}</em></li><li><span>联系人手机(默认当前注册号码)：</span><em>{{vm.myGameMessageData.phone}}</em></li><li><span>联系人邮箱：</span><em>{{vm.myGameMessageData.email}}</em></li><li><span>备注信息：</span><em>{{vm.myGameMessageData.remark}}</em></li></ul></div></div></div>'),e.put("app/customize/meifan/myTrainDetails/myTrainDetails.html",'<div class="wrapMyTrainDetails"><div class="myTrainDetails"><div class="myTrainDetails_tit"><h2>{{vm.myTrainDetailsData.activity_name}}<i></i></h2><h3>日期：{{vm.myTrainDetailsData.date_range}}</h3><h3>组别：{{vm.myTrainDetailsData.group_type}}</h3></div><div class="myTrainDetails_main"><span><i></i>课程要点</span><p ng-bind-html="vm.myTrainDetailsData.main_points"></p></div><div class="myTrainDetails_main"><span><i></i>教练评语</span><p ng-bind-html="vm.myTrainDetailsData.comment"></p></div></div></div>'),e.put("app/customize/meifan/myTrainList/myTrainList.html",'<div class="wrapMyTrainList"><div class="myTrainList"><h2>我的培训</h2><div class="myTrainList_course"><ul><li ng-repeat="item in vm.myTrainListData" ng-click="vf.goMyTrainDetails(item)"><a href="javascript:;" class="myTrainList_lj"><h3><svg class="icon time"><use xlink:href="#icon-shizhong"></use></svg><span>{{item.date_range}}</span><em>{{item.group_type}}</em> <i class="red" ng-if="item.status==\'0\'">未开始</i> <i class="red" ng-if="item.status==\'1\'">进行中</i> <i ng-if="item.status==\'2\'">已结束</i></h3><div class="myTrainList_use item item-thumbnail-left"><img ng-src="{{item.activity_img}}"><h4>{{item.activity_name}}</h4><h5>姓名：{{item.name}}</h5><p>价格：<span>￥{{item.amount}}</span></p></div></a></li></ul></div></div></div>'),e.put("app/customize/meifan/myTrainMessage/myTrainMessage.html",'<div class="wrapMFMyTrainMessage"><div class="myTrainMessage"><div class="myTrainMessage_user"><a href="javascript:;" class="myTrainMessage_lj"><h3><svg class="icon time"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-shizhong"></use></svg><span>{{vm.myTrainMessageData.date_range}}</span><em>{{vm.myTrainMessageData.group_type}}</em> <i class="red" ng-if="vm.myTrainMessageData.status==\'0\'">未开始</i> <i class="red" ng-if="vm.myTrainMessageData.status==\'1\'">进行中</i> <i ng-if="vm.myTrainMessageData.status==\'2\'">已结束</i></h3><div class="myTrainMessage_use item item-thumbnail-left"><img ng-src="{{vm.myTrainMessageData.activity_img}}"><h4>{{vm.myTrainMessageData.activity_name}}</h4><h5>姓名：{{vm.myTrainMessageData.name}}</h5><p>价格：<span>￥{{vm.myTrainMessageData.amount}}</span></p></div></a></div><div class="myTrainMessage_message"><h2>报名信息</h2><ul><li><span>报名人姓名：</span><em>{{vm.myTrainMessageData.name}}</em></li><li><span>报名人性别：</span><em>{{vm.myTrainMessageData.sex}}</em></li><li><span>报名人出生日期：</span><em>{{vm.myTrainMessageData.birthday}}</em></li><li><span>联系人手机(默认当前注册号码)：</span><em>{{vm.myTrainMessageData.phone}}</em></li><li><span>联系人邮箱：</span><em>{{vm.myTrainMessageData.email}}</em></li><li><span>备注信息：</span><em>{{vm.myTrainMessageData.remark}}</em></li></ul></div></div></div>')}]);