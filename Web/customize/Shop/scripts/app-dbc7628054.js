!function(){"use strict";angular.module("shop",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ui.router","toastr","clientapi"])}(),function(){"use strict";function e(e,t,i,o,a,s,n,r){function c(){l(),d()}function d(){"gender"==_.upt&&(_.title="性别"),"avatar"==_.upt&&(_.title="头像"),"truename"==_.upt&&(_.title="姓名"),"phone"==_.upt&&(_.title="手机"),"email"==_.upt&&(_.title="邮箱"),"identity_card_photo"==_.upt&&(_.title="实名认证"),"business_intelligence_certificate_photo"==_.upt&&(_.title="公司资质"),r.setPageTitle(_.title)}function l(){r.getUserInfo(function(){t.userInfo.phone&&(t.userInfo.phone=Number(t.userInfo.phone)),_.user=t.userInfo,"songhe"==_.user.websiteowner&&_.user.member_level>=10&&_.limit.indexOf(_.upt)>=0?_.canPost=!1:_.canPost=!0})}function u(e,t){return e.files.length?(_.upKey=t,_.layerIndex=layer.open({type:2,shadeClose:!1}),void zcUpload(e.files[0],800,800,p,v,g)):void zcAlert("请选择文件")}function p(e){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total),i=t.toString()+"%";$('.layermbox[index="'+_.layerIndex+'"] .layermcont div').text(i)}}function v(t){layer.close(_.layerIndex);var i=angular.fromJson(t.target.responseText);0==i.errcode&&i.file_url_list&&i.file_url_list.length>0?(e.$apply(function(){_.user[_.upKey]=i.file_url_list[0]}),_.upKey=""):(_.upKey="",zcAlert(i.errmsg))}function g(e){layer.close(_.layerIndex)}function m(){if(!_.isShowWait){var e={phone:_.phone};if(!e.phone)return void zcAlert("请输入手机号");if(e.phone==_.user.phone)return void zcAlert("新手机号等于原手机");e.check_user=1,e.limit_user=2,_.isShowWait=!0,_.layerIndex=layer.open({type:2,content:"发送中"}),n.getSMSCode(e).then(function(e){layer.close(_.layerIndex),e.status?(_.isShowWait=!0,h()):(_.isShowWait=!1,zcAlert(e.msg))})["catch"](function(e){layer.close(_.layerIndex),console.log("验证码失败",e),_.isShowWait=!1})}}function h(){_.waitTime=60,_.waitForSMSCodeTimer=a(function(){_.waitTime<=0||!_.isShowWait?(a.cancel(_.waitForSMSCodeTimer),_.isShowWait=!1,_.waitTime=0):_.waitTime--},1e3,0)}function f(){if(!_.canPost)return void zcAlert("禁止提交");var e={};if("gender"==_.upt){if(e.gender=_.user.gender,!e.gender)return void zcAlert("请设置性别")}else if("avatar"==_.upt){if(e.avatar=_.user.avatar,!e.avatar)return void zcAlert("请设置头像")}else if("truename"==_.upt){if(e.truename=_.user.truename,!e.truename)return void zcAlert("请设置姓名")}else if("phone"==_.upt){if(e.phone=_.phone,!e.phone)return void zcAlert("请设置手机");if(e.phone==_.user.phone)return void zcAlert("新手机号等于原手机");if(e.code=_.code,!e.code)return void zcAlert("请输入验证码");e.check_code=1}else if("email"==_.upt){if(e.email=_.user.email,!e.email)return void zcAlert("请设置邮箱")}else if("identity_card_photo"==_.upt){if(e.identity_card_photo_front=_.user.identity_card_photo_front,!e.identity_card_photo_front)return void zcAlert("请上传身份证正面照片");if(e.identity_card_photo_behind=_.user.identity_card_photo_behind,!e.identity_card_photo_behind)return void zcAlert("请上传身份证反面照片");if(e.identity_card_photo_handheld=_.user.identity_card_photo_handheld,!e.identity_card_photo_handheld)return void zcAlert("请上传手持身份证照片")}else if("business_intelligence_certificate_photo"==_.upt){if(!_.user.business_intelligence_certificate_photo1)return void zcAlert("请上传公司资质照片");e.business_intelligence_certificate_photo1=_.user.business_intelligence_certificate_photo1,_.user.business_intelligence_certificate_photo2&&(e.business_intelligence_certificate_photo2=_.user.business_intelligence_certificate_photo2),_.user.business_intelligence_certificate_photo3&&(e.business_intelligence_certificate_photo3=_.user.business_intelligence_certificate_photo3),_.user.business_intelligence_certificate_photo4&&(e.business_intelligence_certificate_photo4=_.user.business_intelligence_certificate_photo4),_.user.business_intelligence_certificate_photo5&&(e.business_intelligence_certificate_photo5=_.user.business_intelligence_certificate_photo5)}if(0==Object.keys(e).length)return void zcAlert("请完善信息");var t={data:angular.toJson(e)};_.layerIndex=layer.open({type:2,content:"提交中"}),s.commPost(s.commUrl.updateInfo,t).then(function(e){layer.close(_.layerIndex),e.isSuccess?zcBack():zcAlert("保存失败",e.msg)})["catch"](function(e){layer.close(_.layerIndex)})}var _=e.vm={upt:i.upt,limit:["phone","truename"],title:"设置",isShowWait:!1,waitForSMSCodeTimer:!1,waitTime:60,user:!1,canPost:!1,upKey:"",phone:"",code:"",layerIndex:!1};e.vf={init:c,upload:u,getSMSCode:m,waitForSMSCode:h,update:f};c()}e.$inject=["$scope","$rootScope","$stateParams","$timeout","$interval","sAPI","nAPI","commService"],angular.module("shop").controller("userUpdateCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a){function s(){r(),c(),n()}function n(){a.setPageTitle("设置")}function r(){a.getUserInfo(function(){l.user=t.userInfo},function(){},!0)}function c(){o.commPost(o.commUrl.getUserInfoFieldsUrl,{}).then(function(e){e.status&&(l.field=e.result)})}function d(){a.delAllCookie(),o.loginOut().then(function(e){t.goUrl("#/bindPhone/")})}var l=e.vm={user:!1,field:!1};e.vf={init:s,loginOut:d};s()}e.$inject=["$scope","$rootScope","$timeout","sAPI","commService"],angular.module("shop").controller("userInfoCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n,r){function c(){"1"==g.isLogin&&l(),d()}function d(){var e="1"==g.isLogin?"修改密码":"忘记密码";r.setPageTitle(e)}function l(){r.getUserInfo(function(){g.phone=Number(t.userInfo.phone),g.id=t.userInfo.id})}function u(){var e={phone:g.phone,code:g.code,pwd:g.password};return e.phone?e.code?e.pwd?(g.layerIndex=layer.open({type:2,content:"提交中"}),void s.commPost(s.commUrl.updatePassword,e).then(function(e){layer.close(g.layerIndex),e.status?zcAlert(e.msg,"",3,function(){zcBack()}):zcAlert(e.msg)})["catch"](function(e){layer.close(g.layerIndex)})):void zcAlert("请输入新密码"):void zcAlert("请输入验证码"):void zcAlert("请输入手机号")}function p(){if(!g.isShowWait){var e={phone:g.phone};if(!e.phone)return void zcAlert("请输入手机号");g.isShowWait=!0,g.layerIndex=layer.open({type:2,content:"发送中"}),n.getSMSCode(e).then(function(e){layer.close(g.layerIndex),e.status?(g.isShowWait=!0,v()):(g.isShowWait=!1,alert(e.msg))})["catch"](function(e){layer.close(g.layerIndex),console.log("验证码失败",e),g.isShowWait=!1})}}function v(){g.waitTime=60,g.waitForSMSCodeTimer=a(function(){g.waitTime<=0||!g.isShowWait?(a.cancel(g.waitForSMSCodeTimer),g.isShowWait=!1,g.waitTime=0):g.waitTime--},1e3,0)}var g=e.vm={isLogin:i.isLogin,isShowWait:!1,waitForSMSCodeTimer:!1,layerIndex:!1,waitTime:60,id:0,phone:"",code:"",password:""};e.vf={init:c,getSMSCode:p,waitForSMSCode:v,updatePassword:u};c()}e.$inject=["$scope","$rootScope","$stateParams","$timeout","$interval","sAPI","nAPI","commService"],angular.module("shop").controller("forgetPasswordCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a,s){function n(t,i){e.imgData=[],console.log(["e",t]);for(var o=t.target.files.length,a=0;o>a;a++)e.imgData.push(t.target.files[a]);var n=parseInt(i.substring(i.length-1,i.length));console.log(["labelindex",n]),s.show("图片上传中"),setTimeout(function(){console.log(e.imgData),r(n)},200)}function r(t){var o=new XMLHttpRequest;o.open("POST",i.mainsiteurl+"/serv/api/common/file.ashx?action=add",!0);var a=new FormData;console.log(["$scope.imgData",e.imgData]);for(var n=0;n<e.imgData.length;n++)console.log("$scope.imgData[i]",e.imgData[n]),a.append("file",e.imgData[n]);o.send(a),o.onreadystatechange=function(i){if(console.log(["xhr.responseText",o.responseText]),4==o.readyState)if(200==o.status){console.log(["JSON.parse(xhr.responseText)",JSON.parse(o.responseText)]);var a=JSON.parse(o.responseText);e.imgURLs[t]=a.file_url_list[0],s.hide(),c(e.imgURLs,t)}else s.hide(),console.log(["JSON.parse(xhr.responseText)",JSON.parse(o.responseText)])}}function c(e,t){$(".jia"+t).remove(),$(".label"+t).prepend('<img src="'+e[t]+'">')}function d(e){s.show(e),setTimeout(function(){s.hide()},600)}console.log("applyRefund.......");var l={};e.pageData=l,t.orderId&&(l.orderId=t.orderId),t.orderDetailId&&(l.orderDetailId=t.orderDetailId),l.refundData={order_detail_id:l.orderDetailId,refund_reason:"",refund_amount:"",phone:"",remark:"",is_return_product:"",imagelist:[]},a.orderDetail("/mall/order.ashx",{action:"get",order_id:l.orderId},function(e){console.log(["获取订单详情成功",e]),l.orderData=e,l.orderData.product_name=l.orderData.product_list[0].product_name,l.orderData.product_name.length>17&&(l.orderData.product_name=l.orderData.product_name.substring(0,16)+"..."),l.orderData.product_totalPrice=l.orderData.product_list[0].price*l.orderData.product_list[0].count,"已发货"==l.orderData.order_status||"交易成功"==l.orderData.order_status?l.refundData.is_return_product=1:l.refundData.is_return_product=0},function(e){console.log(["获取订单详情失败",e])}),a.getmaxrefundamount({order_detail_id:l.orderDetailId},function(t){console.log(["获取商品最大退款金额成功",t]),0==t.errcode&&(e.maxRefundAmount=t.max_refund_amount)},function(e){console.log(["获取商品最大退款金额失败",e])}),e.refundReasons=[{reason:"请选择退款原因"},{reason:"买/卖双方协商一致"},{reason:"买错/多买/不想要"},{reason:"商品质量问题"},{reason:"未收到货品"},{reason:"其他"}],e.theReason={reason:""},e.theReason.reason=e.refundReasons[0],$("#upLoadImg0")[0].addEventListener("change",function(e){n(e,"#upLoadImg0")},!1),$("#upLoadImg1")[0].addEventListener("change",function(e){n(e,"#upLoadImg1")},!1),$("#upLoadImg2")[0].addEventListener("change",function(e){n(e,"#upLoadImg2")},!1),e.imgURLs=[],e.submitRefund=function(){return l.refundData.refund_reason=e.theReason.reason.reason,l.refundData.imagelist=e.imgURLs,console.log(["提交的信息",l.refundData]),"请选择退款原因"==l.refundData.refund_reason?void d("请选择退货原因"):""==l.refundData.refund_amount?void d("请输入退款金额"):parseInt(l.refundData.refund_amount)>e.maxRefundAmount?void d("退款金额不得大于最大退款金额"):/^0?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/.test(l.refundData.phone)?void(1==t.update?a.refundUpdate({data:JSON.stringify(l.refundData)},function(e){0===e.errcode?(console.log(["更新退款申请成功",e]),i.gobackpagetwice=!0,o.go("refundState",{orderDetailId:l.orderDetailId,orderId:l.orderId})):(console.log(["更新退款申请失败",e]),d(e.errmsg))},function(e){console.log(["更新退款申请请求失败",e]),d(e.errmsg)}):a.refundApply({data:JSON.stringify(l.refundData)},function(e){0===e.errcode?(console.log(["提交退款申请成功",e]),i.gobackpagetwice=!0,o.go("refundState",{orderDetailId:l.orderDetailId,orderId:l.orderId})):(console.log(["提交退款申请失败",e]),d(e.errmsg))},function(e){console.log(["提交退款申请请求失败",e]),d(e.errmsg)})):void d("请输入正确的电话号码")}}e.$inject=["$scope","$stateParams","$rootScope","$state","mAPI","wLoading"],angular.module("shop").controller("applyRefundCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a,s){t.orderDetailId&&(e.orderDetailId=t.orderDetailId),t.orderId&&(e.orderId=t.orderId),e.logisticsInfo={order_detail_id:e.orderDetailId,express_company_name:"",express_number:""},e.expressCompany=[{name:"请选择物流公司"},{name:"EMS"},{name:"顺丰"},{name:"申通"},{name:"圆通"},{name:"中通"},{name:"汇通"},{name:"韵达"},{name:"天天"},{name:"德邦"},{name:"全峰"},{name:"能达"},{name:"优速"}],e.currentCompany={name:""},e.currentCompany.name=e.expressCompany[0],e.submitExpress=function(){return console.log(e.currentCompany.name.name),"请选择物流公司"==e.currentCompany.name.name?(s.show("请选择物流公司"),void setTimeout(function(){s.hide()},600)):(e.logisticsInfo.express_company_name=e.currentCompany.name.name,""==e.logisticsInfo.express_number?(s.show("请填写物流单号"),void setTimeout(function(){s.hide()},600)):(console.log(["要提交的物流信息",e.logisticsInfo]),void a.submitExpressInfo({order_detail_id:e.orderDetailId,express_company_name:e.logisticsInfo.express_company_name,express_number:e.logisticsInfo.express_number},function(t){console.log(["提交物流信息成功",t]),0==t.errcode?o.go("refundState",{orderId:e.orderId,orderDetailId:e.orderDetailId}):(s.show(t.errmsg),setTimeout(function(){s.hide()},600))},function(e){console.log(["提交物流信息失败",e])})))}}e.$inject=["$scope","$stateParams","$rootScope","$state","mAPI","wLoading"],angular.module("shop").controller("returnLogisticsCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n){console.log("refundStateCtrl........."),t.orderDetailId&&(e.orderDetailId=t.orderDetailId),t.orderId&&(e.orderId=t.orderId),a.refundDetail({order_detail_id:e.orderDetailId},function(t){console.log(["获取退款详情成功",t]),e.refundDetailData=t},function(e){console.log(["获取退款详情失败",e])}),e.closeRefund=function(){var t=s.confirm({title:"友情提示",template:"确定关闭退款申请？",cssClass:"borderradius5px",cancelText:"取消",cancelType:"button button-clear button-positive",okText:"确认",okType:"button button-clear button-positive"});t.then(function(t){t?a.refundClose({order_detail_id:e.orderDetailId},function(e){console.log(["关闭退款申请成功",e]),0==e.errcode&&(n.show("关闭退货申请成功"),setTimeout(function(){n.hide(),location.reload()},600))},function(e){console.log(["关闭退款申请失败",e])}):console.log("取消删除地址")})}}e.$inject=["$scope","$stateParams","$rootScope","$state","mAPI","wPopup","wLoading"],angular.module("shop").controller("refundStateCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a){t.orderDetailId&&(e.orderDetailId=t.orderDetailId),a.refundLog({order_detail_id:e.orderDetailId},function(t){console.log(["获取协商记录成功",t]),e.refundLogData=t.list,angular.forEach(e.refundLogData,function(e,t){e.time=new Date(parseInt(e.time)).toLocaleString(),$(".mainContent").append('<div class="logContent"><span class="user">'+e.role+'</span><span class="time">'+e.time+"</span><h5>"+e.title+'</h5><div class="content">'+e.content+"</div></div>")})},function(e){console.log(["获取协商记录失败",e])})}e.$inject=["$scope","$stateParams","$rootScope","$state","mAPI"],angular.module("shop").controller("refundLogCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a){console.log("refundDestinationCtrl.........");var s={};e.pageData=s,t.orderId&&(s.orderId=t.orderId),t.orderDetailId&&(s.orderDetailId=t.orderDetailId),a.orderDetail("/mall/order.ashx",{action:"get",order_id:s.orderId},function(e){console.log(["获取订单详情成功",e]),s.orderData=e,angular.forEach(s.orderData.product_list,function(e,t){e.order_detail_id==s.orderDetailId&&(s.orderData.head_img=e.img_url,s.orderData.product_name=e.product_name)})},function(e){console.log(["获取订单详情失败",e])}),a.refundDetail({order_detail_id:s.orderDetailId},function(t){console.log(["获取退款详情成功",t]),e.refundDetailData=t},function(e){console.log(["获取退款详情失败",e])}),e.step=1,a.weixintransferInfoNew({order_detail_id:s.orderDetailId},function(t){if(console.log(["获取退款成功去处成功",t]),0==t.errcode)switch(e.refundDestinationDate=t,e.refundDestinationDate.refund_status){case"PROCESSING":e.step=2;break;case"SUCCESS":e.step=3;break;default:e.step=1}console.log(["$scope.step",e.step])},function(e){console.log(["获取退款成功去处失败",e])})}e.$inject=["$scope","$stateParams","$rootScope","$state","mAPI"],angular.module("shop").controller("refundDestinationCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n){function r(){h.theReason=h.refundReasons[0],h.applyService=h.applyServices[0],h.goodsStatus=h.goodsStatuses[0],h.noGoodsReason=h.noGoodsReasons[0],$("#upLoadImg0")[0].addEventListener("change",function(e){l(e,"#upLoadImg0")},!1),$("#upLoadImg1")[0].addEventListener("change",function(e){l(e,"#upLoadImg1")},!1),$("#upLoadImg2")[0].addEventListener("change",function(e){l(e,"#upLoadImg2")},!1),h.imgURLs=[],c(),m()}function c(){a.orderDetail("/mall/order.ashx",{action:"get",order_id:h.pageData.orderId},function(e){console.log(["获取订单详情成功",e]),h.orderData=e,h.currProductList=h.orderData.product_list,"待发货"==h.orderData.order_status&&(h.applyServices=[],h.applyServices.push({type:"仅退款"}),h.applyService=h.applyServices[0],console.log(["vm.applyServices",h.applyServices]));for(var t=0;t<h.currProductList.length;t++)if(h.currProductList[t].order_detail_id==h.currId){h.orderData.product_name=h.currProductList[t].product_name,h.orderData.product_name.length>17&&(h.orderData.product_name=h.orderData.product_name.substring(0,16)+"..."),h.orderData.product_totalPrice=h.currProductList[t].price*h.currProductList[t].count,h.orderData.totalScore=h.currProductList[t].score*h.currProductList[t].count;break}},function(e){console.log(["获取订单详情失败",e])})}function d(){a.getmaxrefundamount({order_detail_id:h.pageData.orderDetailId},function(e){console.log(["获取商品最大退款金额成功",e]),0==e.errcode&&(h.maxRefundAmount=e.max_refund_amount)},function(e){console.log(["获取商品最大退款金额失败",e])})}function l(e,t){h.imgData=[],console.log(["e",e]);for(var i=e.target.files.length,o=0;i>o;o++)h.imgData.push(e.target.files[o]);var a=parseInt(t.substring(t.length-1,t.length));console.log(["labelindex",a]),n.show("图片上传中"),setTimeout(function(){console.log(h.imgData),u(a)},200)}function u(e){var t=new XMLHttpRequest;t.open("POST",i.mainsiteurl+"/serv/api/common/file.ashx?action=add",!0);var o=new FormData;console.log(["vm.imgData",h.imgData]);for(var a=0;a<h.imgData.length;a++)console.log("vm.imgData[i]",h.imgData[a]),o.append("file",h.imgData[a]);t.send(o),t.onreadystatechange=function(i){if(console.log(["xhr.responseText",t.responseText]),4==t.readyState)if(200==t.status){console.log(["JSON.parse(xhr.responseText)",JSON.parse(t.responseText)]);var o=JSON.parse(t.responseText);h.imgURLs[e]=o.file_url_list[0],n.hide(),p(h.imgURLs,e)}else n.hide(),console.log(["JSON.parse(xhr.responseText)",JSON.parse(t.responseText)])}}function p(e,t){$(".jia"+t).remove(),$(".viewImg"+t).remove(),$(".label"+t).prepend('<img class="viewImg'+t+'" src="'+e[t]+'">')}function v(){if(h.pageData.refundData.product_status=h.goodsStatus.status,"未收到货"==h.goodsStatus.status&&"退货退款"!=h.applyService.type?h.pageData.refundData.refund_reason=h.noGoodsReason.reason:h.pageData.refundData.refund_reason=h.theReason.reason,"退货退款"==h.applyService.type)h.pageData.refundData.is_return_product=1;else if("仅退款"==h.applyService.type&&(h.pageData.refundData.is_return_product=0,"请选择货物状态"==h.pageData.refundData.product_status))return void g("请选择货物状态");return h.pageData.refundData.imagelist=h.imgURLs,console.log(["提交的信息",h.pageData.refundData]),"请选择退款原因"==h.pageData.refundData.refund_reason||"请选择退货原因"==h.pageData.refundData.refund_reason?void g("请选择退货原因"):/^0?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/.test(h.pageData.refundData.phone)?void(1==t.update?a.refundUpdate({data:JSON.stringify(h.pageData.refundData)},function(e){0===e.errcode?(console.log(["更新退款申请成功",e]),i.gobackpagetwice=!0,o.go("refundState",{orderDetailId:h.pageData.orderDetailId,orderId:h.pageData.orderId})):(console.log(["更新退款申请失败",e]),g(e.errmsg))},function(e){console.log(["更新退款申请请求失败",e]),g(e.errmsg)}):a.refundApply({data:JSON.stringify(h.pageData.refundData)},function(e){0===e.errcode?(console.log(["提交退款申请成功",e]),i.gobackpagetwice=!0,o.go("refundState",{orderDetailId:h.pageData.orderDetailId,orderId:h.pageData.orderId})):(console.log(["提交退款申请失败",e]),g(e.errmsg))},function(e){console.log(["提交退款申请请求失败",e]),g(e.errmsg)})):void g("请输入正确的电话号码")}function g(e){n.show(e),setTimeout(function(){n.hide()},600)}function m(){var e={action:"getmaxrefundinfo",order_detail_id:t.orderDetailId};s.getMaxRefundInfo(e).then(function(e){0==e.errcode&&(h.pageData.refundData.refund_amount=e.max_refund_amount,h.pageData.refundData.refund_score=e.max_refund_score,h.pageData.refundData.refund_account_amount=e.max_refund_account_amount)})["catch"](function(e){})}var h=e.vm={pageData:{orderId:t.orderId,orderDetailId:t.orderDetailId,refundData:{order_detail_id:t.orderDetailId,refund_reason:"",refund_amount:"",phone:"",remark:"",imagelist:[],is_return_product:"",product_status:"",refund_score:0,refund_account_amount:0}},maxRefundAmount:0,applyServices:[{type:"退货退款"},{type:"仅退款"}],applyService:{},refundReasons:[{reason:"请选择退货原因"},{reason:"质量问题"},{reason:"商品成分描述不符"},{reason:"收到商品少件/破损等"},{reason:"产地/批号/规格等描述不符"},{reason:"假冒品牌"},{reason:"卖家发错货"},{reason:"拍错/多拍/不喜欢"},{reason:"三无产品"},{reason:"生产日期/保质期描述不符"},{reason:"其他"}],theReason:{},goodsStatuses:[{status:"请选择货物状态"},{status:"未收到货"},{status:"已收到货"}],goodsStatus:{},noGoodsReasons:[{reason:"请选择退款原因"},{reason:"快递一直未送到"},{reason:"空包裹/少货"},{reason:"多拍/拍错/不想要"},{reason:"快递无跟踪记录"},{reason:"未按约定时间发货"},{reason:"其他"}],noGoodsReason:{},imgURLs:[],imgData:[],orderData:{},refundInfo:{},currProductList:[],currId:t.orderDetailId};e.vf={getOrderDatail:c,getMaxRefundAmount:d,getFile:l,upLoadImg:u,viewImg:p,submitRefund:v,getMaxRefundInfo:m,init:r};r()}e.$inject=["$scope","$stateParams","$rootScope","$state","mAPI","nAPI","wLoading"],angular.module("shop").controller("applyRefundCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a,s){e.registerInfo={phone:"",smscontent:"",password:"",passwordconfirm:"",smsvercode:"",nickname:""};var n=/^0?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/,r=/^[0-9]{6}$/;e.registerInfo.smscontent=encodeURIComponent("您的验证码为{{SMSVERCODE}}"),e.verificationcodeFunc=function(){if(!n.test(e.registerInfo.phone)){var t="请输入正确的手机号码";return void alert(t)}$(".vertifycodebt").attr("disabled","disabled").text("重新获取验证码(60s)");var i=60;e.timer=setInterval(function(){i--,$(".vertifycodebt").text("重新获取验证码("+i+"s)"),0>=i&&(clearInterval(e.timer),$(".vertifycodebt").text("获取验证码").removeAttr("disabled"))},1e3),a.verificationcode("/common/smsvercode.ashx",{phone:e.registerInfo.phone,smscontent:e.registerInfo.smscontent},function(e,t,i,o){if(0===e.errcode){console.log(["获取验证码成功",e]);var a="验证码已发送,如果没收到，请60秒后再点击获取";alert(a)}else console.log(["获取验证码失败",e]),alert(e.errmsg)},function(e,t,i,o){console.log(["获取验证码请求失败",e])})},e.registerFunc=function(){if(""===e.registerInfo.nickname){var t="昵称不能为空";return void alert(t)}if(!n.test(e.registerInfo.phone)){var t="请输入正确的手机号码";return void alert(t)}if(!r.test(e.registerInfo.smsvercode)){var t="请输入6位验证码";return void alert(t)}if(""===e.registerInfo.password){var t="密码不能为空";return void alert(t)}if(e.registerInfo.password!=e.registerInfo.passwordconfirm){var t="重复密码与密码不同";return void alert(t)}a.register("/user/registerbyphone.ashx",{username:e.registerInfo.phone,password:e.registerInfo.password,passwordconfirm:e.registerInfo.passwordconfirm,smsvercode:e.registerInfo.smsvercode,nickname:e.registerInfo.nickname},function(e,t,i,o){0===e.errcode?(console.log(["注册成功",e]),alert(e.errmsg,function(){s.go("login")})):(console.log(["注册失败",e]),alert(e.errmsg))},function(e,t,i,o){console.log(["注册请求失败",e])})}}e.$inject=["$scope","$timeout","webDevTec","toastr","mAPI","$state"],angular.module("shop").controller("registerCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n){function r(e,t,i){var o=new Date;o.setDate(o.getDate()+i),document.cookie=e+"="+escape(t)+(null==i?"":";expires="+o.toGMTString())+";path=/;domain="}function c(){e.loginInfo.phoneCodeTime--,e.loginInfo.phoneCodeTime>0&&i(c,1e3)}e.loginInfo={username:"",password:"",phoneCodeTime:0,phoneerror:!1};e.loginFunc=function(){s.login("/user/login.ashx",{username:e.loginInfo.username,password:e.loginInfo.password},function(e){if(0===e.errcode){if(console.log(["登录成功",e]),r("ASP.NET_SessionId",e.session_id,1),s.currentUserInfo("/user/info.ashx",{action:"currentuserinfo"},function(e){console.log(["获取用户信息成功",e])},function(e){console.log(["获取用户信息失败",e])}),1==t.favourite&&(t.favourite=2),window.sessionStorage.removeItem("loginBasketProducts"),window.sessionStorage.getItem("basketProducts")&&(window.sessionStorage.setItem("loginBasketProducts",window.sessionStorage.getItem("basketProducts")),window.sessionStorage.removeItem("basketProducts")),window.sessionStorage.removeItem("orderProducts"),window.sessionStorage.getItem("buyProducts"))return window.sessionStorage.setItem("orderProducts",window.sessionStorage.getItem("buyProducts")),void window.sessionStorage.removeItem("buyProducts");history.go(-1)}else console.log(["登录失败",e]),alert(e.errmsg)},function(e){console.log(["登录请求失败",e])})},e.loginSubmit=function(){s.loginsms({phone:e.loginInfo.username,sms_vercode:e.loginInfo.password},function(e){console.log(["登录成功",e]),0===e.errcode?history.length>2?history.go(-1):n.go("home"):alert(e.errmsg)},function(e){console.log(["登录失败",e]),alert("网络连接错误")})},e.getPhoneCode=function(t){t.$error.required||t.$error.pattern||(e.loginInfo.phoneCodeTime=60,c(),s.verificationcode("/common/smsvercode.ashx",{phone:e.loginInfo.username,smscontent:encodeURIComponent("您的验证码为{{SMSVERCODE}}")},function(e,t,i,o){if(0===e.errcode){console.log(["获取验证码成功",e]);var a="验证码已发送,如果没收到，请60秒后再点击获取";alert(a)}else console.log(["获取验证码失败",e]),alert(e.errmsg)},function(e,t,i,o){console.log(["获取验证码请求失败",e])}))},e.checkerror=function(t){e.loginInfo.phoneerror=t.$error.required||t.$error.pattern,console.log(e.loginInfo.phoneerror)}}e.$inject=["$scope","$rootScope","$timeout","webDevTec","toastr","mAPI","$state"],angular.module("shop").controller("loginCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n,r,c,d,l){function u(){p(),m(),b()}function p(){n.getGroupBuyDetail({order_id:w.goodsGroupId}).then(function(t){if(t.status){if(w.dataInfo=t.result,w.dataInfo.product_desc=s.trustAsHtml(w.dataInfo.product_desc),null!=w.dataInfo.pay_order_id&&""!=w.dataInfo.pay_order_id&&(w.showPayBtn=!0),w.dataInfo.people_count==w.dataInfo.pay_people_count?w.isGroupFull=!0:w.isGroupFull=!1,1==w.dataInfo.group_buy_status&&(w.isGroupFull=!0),w.dataInfo&&w.dataInfo.people_list&&w.dataInfo.people_list.length>0){var o=w.dataInfo.people_list[0].user_id;window.localStorage.setItem("sale_id",o);for(var n=0;n<w.dataInfo.people_list.length;n++)0==n?"1"==w.dataInfo.ex10?(w.dataInfo.people_list[n].startGroup="参团",w.dataInfo.people_list[n].groupLeader="团员"):(w.dataInfo.people_list[n].startGroup="开团",w.dataInfo.people_list[n].groupLeader="团长"):(w.dataInfo.people_list[n].startGroup="参团",w.dataInfo.people_list[n].groupLeader="团员")}g();var u=location.href;r.title="「一起拼」我买了“"+w.dataInfo.product_name+"”，你来一起拼吧！",r.desc="我买了“"+w.dataInfo.product_name+"”，一起拼吧，拼到就是赚到！",l.getUserInfo(function(){i.userInfo&&(r.link=i.mainsiteurl+"/customize/shop/?v=1.0&sale_id="+i.userInfo.userid+"&ngroute="+u.substring(u.indexOf("#")+1,u.length)+"#"+u.substring(u.indexOf("#")+1,u.length))},function(){}),r.imgUrl=w.dataInfo.product_img_url,c.share(r),w.isShowPage=!0}else d.alert(t.msg),a(function(){e.go("groupGoodsList")},3e3)})["catch"](function(e){d.alert(e.msg)})}function v(){w.orderProduct.properties=w.dataInfo.product_properties,w.orderProduct.sku_id=w.dataInfo.sku_id,w.orderProduct.order_id=w.goodsGroupId,w.orderProduct.price=w.dataInfo.member_price,w.orderProduct.title=w.dataInfo.title,w.orderProduct.num=1,w.orderProduct.grouptype="member",w.orderProduct.img_url=w.dataInfo.product_img_url,w.orderProduct.score=w.dataInfo.score,w.orderProduct.product_id=w.dataInfo.product_id,w.orderProduct.is_cashpay_only=w.dataInfo.is_cashpay_only,w.orderProduct.is_no_express=w.dataInfo.is_no_express,window.sessionStorage.setItem("orderProducts",JSON.stringify([w.orderProduct])),e.go("createOrder")}function g(){var e=0;w.dataInfo.end_time-(new Date).getTime()>0?(e=w.dataInfo.end_time-(new Date).getTime(),w.dataInfo.isOverDate=!1):w.dataInfo.isOverDate=!0;var t=parseInt(e/1e3/60/60/24,10),i=parseInt(e/1e3/60/60%24,10),o=parseInt(e/1e3/60%60,10),a=parseInt(e/1e3%60,10);w.pageData.leftDay=f(t),w.pageData.leftHour=f(i),w.pageData.leftMinus=f(o),w.pageData.leftSecond=f(a)}function m(){w.pageData.interval=t(function(){g()},1e3,0)}function h(){t.cancel(w.pageData.interval)}function f(e){return 10>e&&(e="0"+e),e}function _(){null==w.groupConfig.groubuy_index_url||""==w.groupConfig.groubuy_index_url?zcToUrl("/customize/comeoncloud/Index.aspx?key=MallHome"):zcToUrl(w.groupConfig.groubuy_index_url)}function y(){var e=encodeURIComponent("http://"+window.location.host+"/customize/shop/Index.aspx?v=1.0&ngroute=groupGoodsList#/groupGoodsList"),t="/customize/shop/wxpay.aspx?order_id="+w.dataInfo.pay_order_id+"&return_url_success="+e+"&return_url_fail=";zcToUrl(t)}function b(){n.getGroupByConfig().then(function(e){e.status?w.groupConfig=e.result.malll:d.alert(e.msg)})["catch"](function(e){d.alert("获取请求失败")})}var w=this;window.sessionStorage.removeItem("orderProducts"),w.goodsGroupId=o.goodsGroupId,w.isGroupFull=!1,w.dataInfo={},w.orderProduct={},w.shadeShow=!1,w.showdesc=!1,w.showPayBtn=!1,w.groupConfig=[],w.isShowPage=!1,w.pageData={interval:{},leftDay:"",leftHour:"",leftMinus:"",leftSecond:""},w.getGroupBuyDetail=p,w.joinGroup=v,w.timer=g,w.startInterval=m,w.closeInterval=h,w.goToGoodsList=_,w.goToPay=y,w.getGroupByConfig=b,w.init=u,u()}e.$inject=["$state","$interval","$rootScope","$stateParams","$timeout","$sce","nAPI","shopInfo","wxAPI","wPopup","commService"],angular.module("shop").controller("waitForGroupDetailCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a){function s(){n()}function n(){c.dataloading=!0;var o={pageindex:c.pageIndex,pagesize:c.pageSize,order_status:"",order_from_time:"",order_to_time:"",order_type:2};i.odList(o).then(function(i){if(i){console.log(["获取我的团列表成功",i]),0==i.totalcount&&(c.noOrder=!0),c.dataList=c.dataList.concat(i.list);for(var o=0;o<c.dataList.length;o++){var a=c.dataList[o].group_buy_info.end_time-(new Date).getTime();a>0?c.isOverDate=!1:c.isOverDate=!0}i.list&&(i.list.length>=c.pageSize?(c.pageIndex++,t(function(){c.dataloading=!1})):t(function(){c.dataloading=!0,c.nodata=!0}),e.$broadcast("scroll.infiniteScrollComplete"))}else console.log(["获取订单列表失败",i])})["catch"](function(e){console.log(["获取订单列表请求失败",e])})}function r(){c.dataloading||(console.log("到底"),n())}var c=this;c.dataloading=!1,c.pageIndex=1,c.pageSize=10,c.dataList=[],c.isOverDate=!1,c.loadMoreData=r,c.loadData=n,c.init=s,s()}e.$inject=["$scope","$timeout","nAPI","wxAPI","wPopup"],angular.module("shop").controller("groupGoodsListCtrl",e)}(),function(){"use strict";function e(){var e=this;e.title="团购列表"}angular.module("shop").controller("groupForGoodsListCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n,r,c,d){function l(){p(),u()}function u(){s.getGroupByConfig().then(function(e){e.status?(g.groupConfig=e.result.malll,console.log("团购配置",g.groupConfig)):c.alert(e.msg)})["catch"](function(e){c.alert("获取请求失败")})}function p(){s.pdDetail(g.goodsId).then(function(e){console.log("拼团商品详情",e),g.goodsData=e,g.goodsData.product_desc=i.trustAsHtml(g.goodsData.product_desc);var t=location.href;n.title=g.goodsData.title,n.desc=g.goodsData.product_summary,n.link=o.mainsiteurl+"/customize/shop/?v=1.0&ngroute="+t.substring(t.indexOf("#")+1,t.length)+"#"+t.substring(t.indexOf("#")+1,t.length),n.imgUrl=g.goodsData.img_url,console.log(["shopInfo",n]),r.share(n)})["catch"](function(e){console.log("拼团商品详情失败",e)})}function v(t){if(g.goodsData.skus[0].count<=0){var i=c.alert({title:"提示信息",template:"当前商品没有了哦，请看看其他商品"});return void i.then(function(e){})}if(1!=t){if(t.people_count>g.goodsData.skus[0].count){var i=c.alert({title:"提示信息",template:"当前商品不够组团，请看看其他商品或者单个购买哦"});return void i.then(function(e){})}g.orderProduct.rule_id=t.rule_id,g.orderProduct.price=t.head_price,g.orderProduct.grouptype="leader"}else g.orderProduct.price=g.goodsData.skus[0].price;g.orderProduct.properties=g.goodsData.skus[0].properties,g.orderProduct.sku_id=g.goodsData.skus[0].sku_id,g.orderProduct.title=g.goodsData.title,g.orderProduct.totalcount=g.goodsData.skus[0].count,g.orderProduct.num=1,g.orderProduct.product_id=g.goodsData.product_id,g.orderProduct.img_url=g.goodsData.img_url,g.orderProduct.is_cashpay_only=g.goodsData.skus[0].is_cashpay_only,g.orderProduct.is_no_express=g.goodsData.is_no_express,console.log(["团长下订单的数据",g.orderProduct]),window.sessionStorage.setItem("orderProducts",JSON.stringify([g.orderProduct])),d.bindHongwareSubmitAction(function(){e.go("createOrder")})}var g=this;window.sessionStorage.removeItem("orderProducts"),g.goodsId=t.goodsId,g.MALLCONFIG=a,g.goodsData={},g.orderProduct={},g.sliderdata=["https://imagecdn.yqphh.com/3/2016/03/pex0zqlj7y41lblb.jpg","https://imagecdn.yqphh.com/3/2016/02/5hptms3yv4okrvof.jpg","https://imagecdn.yqphh.com/3/2016/02/9ptt6l8naeg6m53x.jpg","https://imagecdn.yqphh.com/3/2016/02/wmomcart0pw9t9bl.jpg"],g.getGoodsDetail=p,g.createOrder=v,g.groupConfig=[],g.init=l,l()}e.$inject=["$state","$stateParams","$sce","$rootScope","MALLCONFIG","nAPI","shopInfo","wxAPI","wPopup","commService"],angular.module("shop").controller("groupForGoodsDetailCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n,r,c){
function d(){var t=navigator.userAgent.toLowerCase();console.log(["浏览器agent",t]),"micromessenger"==t.match(/MicroMessenger/i)?(console.log("是微信浏览器"),e.chat=!0):(e.chat=!1,console.log("不是微信浏览器"))}function l(e){return isNaN(e)?void 0:-1!=(e+"").indexOf(".")?!0:!1}function u(e,t){return 1e6*e/t/1e6}function p(){e.totalnum=0,e.giftProduct.productsTotalPrice=0,angular.forEach(e.giftProduct,function(t,i){e.giftProduct.productsTotalPrice+=t.price*parseInt(t.num),e.totalnum+=parseInt(t.num)}),console.log(e.giftProduct.productsTotalPrice),console.log(e.toscorescale),e.cangetscore=Math.floor(e.giftProduct.productsTotalPrice*e.toscorescale),console.log(e.cangetscore),v()}function v(){var t=[];e.getfreightdata={},angular.forEach(e.giftProduct,function(i,o){var a={sku_id:i.sku_id,count:i.num};t.push(a),e.getfreightdata={receiver_province_code:g.defaultList.province_code,receiver_city_code:g.defaultList.city_code,receiver_dist_code:g.defaultList.dist_code,skus:t}});var o=s.freight(e.getfreightdata);o.then(function(t){e.freight=t.freight,console.log(["获取运费成功",t]),e.giftProduct.productsTotalPrice+=e.freight})["catch"](function(e){}),0==e.noselectcou&&void 0!=e.coupon_id&&null!=e.coupon_id?console.log("我选择了优惠券"):(console.log("我没有选择优惠券"),1==e.usepoints&&(console.log(g.defaultList.use_score),void 0==g.defaultList.use_score||0==g.defaultList.use_score?(e.usepoints=!1,n.show("输入的积分要大于0"),i(function(){n.hide()},700)):parseInt(g.defaultList.use_score)>e.userinfo.totalscore&&1==e.usepoints?e.userinfo.totalscore*e.tomoneyscale>e.giftProduct.productsTotalPrice?l(u(e.giftProduct.productsTotalPrice,e.tomoneyscale))?(g.defaultList.use_score=Math.floor(u(e.giftProduct.productsTotalPrice,e.tomoneyscale)),e.giftProduct.productsTotalPrice-=Math.floor(u(e.giftProduct.productsTotalPrice,e.tomoneyscale)),e.cangetscore=0,0==g.defaultList.use_score?(e.usepoints=!1,g.defaultList.use_score="",n.show("您未达到使用积分的最低条件"),i(function(){n.hide()},700)):(n.show("您最多可以使用"+g.defaultList.use_score+"积分"),i(function(){n.hide()},700))):(g.defaultList.use_score=u(e.giftProduct.productsTotalPrice,e.tomoneyscale),e.giftProduct.productsTotalPrice=0,e.cangetscore=0):(g.defaultList.use_score=e.userinfo.totalscore,n.show("您最多可以使用"+e.userinfo.totalscore+"积分"),i(function(){n.hide()},700),e.giftProduct.productsTotalPrice-=g.defaultList.use_score*e.tomoneyscale,e.cangetscore=Math.floor(e.giftProduct.productsTotalPrice*e.toscorescale)):Math.floor(g.defaultList.use_score*e.tomoneyscale)>=e.giftProduct.productsTotalPrice?l(u(e.giftProduct.productsTotalPrice,e.tomoneyscale))?(g.defaultList.use_score=Math.floor(u(e.giftProduct.productsTotalPrice,e.tomoneyscale)),e.giftProduct.productsTotalPrice=e.giftProduct.productsTotalPrice-Math.floor(e.giftProduct.productsTotalPrice),e.cangetscore=Math.floor(e.giftProduct.productsTotalPrice*e.toscorescale),0==g.defaultList.use_score&&(e.usepoints=!1,g.defaultList.use_score="",n.show("您未达到使用积分的最低条件"),i(function(){n.hide()},700))):(g.defaultList.use_score=u(e.giftProduct.productsTotalPrice,e.tomoneyscale),e.giftProduct.productsTotalPrice=0,e.cangetscore=0):(g.defaultList.use_score=parseInt(g.defaultList.use_score),e.giftProduct.productsTotalPrice-=g.defaultList.use_score*e.tomoneyscale,e.cangetscore=Math.floor(e.giftProduct.productsTotalPrice*e.toscorescale))))}e.chat=!0,d(),e.usepoints=!1,e.noshowcoupon=!1,e.showcard=!1,e.pullshow=function(){1==e.showcard?($("#pullshow").css("transform","rotate(0deg)"),e.showcard=!1):($("#pullshow").css("transform","rotate(90deg)"),e.showcard=!0)},s.tomoney().then(function(t){console.log(t),e.tomoneyscale=t.amount/t.score,console.log(e.tomoneyscale)})["catch"](function(e){}),s.toscore().then(function(t){console.log(t),isNaN(t.score/t.amount)?e.isNaNShow=!1:(e.isNaNShow=!0,e.toscorescale=t.score/t.amount),console.log(e.toscorescale),p()})["catch"](function(e){}),s.getuserinfo().then(function(t){console.log(t),e.userinfo=t})["catch"](function(e){console.log(e)}),e.delNum=function(t){t.num>1&&(t.num--,e.giftProduct.productsTotalPrice-=t.price)},e.addNum=function(t){t.num<t.count&&(t.num++,e.giftProduct.productsTotalPrice+=t.price)},e.noselectcou=!1,e.selectcouBtn=function(t){console.log(t),e.noselectcou=!1,t.select=!0;for(var i in e.couponlist)e.couponlist[i].cardcoupon_id!=t.cardcoupon_id&&(e.couponlist[i].select=!1);e.coupon_id=t.cardcoupon_id,p()},e.notselectcouBtn=function(){e.noselectcou=!0;for(var t in e.couponlist)e.couponlist[t].select=!1;p()},e.selectpointsBtn=function(){e.usepoints=!e.usepoints,p()},e.checkpoints=function(){1==isNaN(parseInt(g.defaultList.use_score))&&(g.defaultList.use_score=""),1==e.usepoints&&p()};var g=e.pageData={defaultList:[],isChoose:!1,selectId:a.selectId},g=e.pageData={defaultList:[],isChoose:!1,selectId:a.selectId};e.pageFunc={};e.giftProduct=window.sessionStorage.getItem("giftorder"),e.giftProduct=JSON.parse(e.giftProduct),console.log(["$scope.giftProduct",e.giftProduct]),s.formatSku(e.giftProduct),e.freight=0,e.submitOrderAndPay=function(){var t=[];angular.forEach(e.giftProduct,function(e,i){var o={sku_id:e.sku_id,count:e.num};t.push(o)});var i="";i=1==e.chat?"WEIXIN":"ALIPAY",e.saleid=window.localStorage.getItem("Saleid")?window.localStorage.getItem("Saleid"):"",1!=e.usepoints&&(g.defaultList.use_score=0),0==e.noselectcou&&void 0!=e.coupon_id&&null!=e.coupon_id&&(g.defaultList.cardcoupon_id=e.coupon_id);var a={buyer_memo:g.defaultList.buyer_memo,cardcoupon_id:g.defaultList.cardcoupon_id,use_score:parseInt(g.defaultList.use_score),pay_type:i,skus:t,sale_id:e.saleid};n.show("数据请求中...");var d=JSON.stringify(a);console.log(["提交订单的数据",a]),s.giveGiftOrder({data:d}).then(function(t){console.log(t),0===t.errcode?(console.log(["提交订单成功",t]),console.log(["订单付款方式",a.pay_type]),console.log(["订单id",t.order_id]),console.log(["订单的价格",e.giftProduct.productsTotalPrice]),e.orderId=t.order_id,0==e.giftProduct.productsTotalPrice?(n.show("数据请求中..."),n.hide(),o.go("givegift",{orderID:t.order_id})):r(a.pay_type,t.order_id)):(n.hide(),c.alert(t.errmsg))})["catch"](function(e){c.alert(e.errmsg),console.log(["提交订单失败",e])})}}e.$inject=["$scope","$rootScope","$timeout","$state","$stateParams","nAPI","wLoading","giftpay","wPopup"],angular.module("shop").controller("paygiftCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a){console.log(i.orderID),o.getGiftOrderDetail({order_id:i.orderID}).then(function(o){console.log(["获得的商品详情",o]),e.productDetailData=o,e.url=location.href.split("#")[0]+"&ngroute=/getgift/"+i.orderID+"#/getgift/"+i.orderID,a.share({title:t.userInfo.nickname+"送来的礼品："+e.productDetailData.product_name,desc:"小小礼品，不成敬意，请笑纳！",link:e.url,imgUrl:o.product_img_url})}).then(function(e){console.log(e)}),e.getGiftUrlBtn=function(){$(".shareimg").css("display","block")},e.hideShareImg=function(){$(".shareimg").css("display","none")}}e.$inject=["$scope","$rootScope","$stateParams","nAPI","wxAPI"],angular.module("shop").controller("givegiftCtrl",e)}(),function(){"use strict";function e(e,t,i,o){}e.$inject=["$scope","$rootScope","$timeout","$state"],angular.module("shop").controller("giftdetailCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n,r,c,d,l,u){var p=this;p.addressId=a.addressId,p.addressData="",t.orderID=a.giftID,u.getUserInfo(function(){},function(){zcToUrl("#/bindPhone/")}),s.getGiftOrderDetail({order_id:a.giftID}).then(function(i){console.log(["获得的商品详情",i]),e.productDetailData=i,e.url=l.location.href.split("#")[0]+"&ngroute=/getgift/"+t.orderID+"#/getgift/"+t.orderID,d.share({title:t.userInfo.nickname+"送来的礼品："+e.productDetailData.product_name,desc:"小小礼品，不成敬意，请笑纳！",link:e.url,imgUrl:i.product_img_url})})["catch"](function(e){console.log(["报错",e])}),e.getGiftUrlBtn=function(){$(".shareimg").css("display","block")},e.hideShareImg=function(){$(".shareimg").css("display","none")},e.gotoaddlist=function(){o.go("receiveAddressList"),t.fromCreatorder=3};var v=e.pageData={defaultList:[],isChoose:!1,selectId:a.selectId};e.pageFunc={};e.getGiftBtn=function(){if(void 0==v.defaultList.buyer_memo&&(v.defaultList.buyer_memo=""),!p.addressData)return r.show("请选择寄送的地址"),void i(function(){r.hide()},600);var e={order_id:a.giftID,receiver_province:p.addressData.province,receiver_province_code:p.addressData.province_code,receiver_city:p.addressData.city,receiver_city_code:p.addressData.city_code,receiver_dist:p.addressData.dist,receiver_dist_code:p.addressData.dist_code,receiver_name:p.addressData.consigneename,receiver_phone:p.addressData.phone,buyer_memo:p.addressData.buyer_memo,receiver_address:p.addressData.address};r.show("数据请求中...");var t=JSON.stringify(e);console.log(["提交订单的数据",e]),s.getGiftOrder({data:t}).then(function(e){console.log(["领取礼品成功",e]),r.hide();var t=c.confirm({title:"友情提示",template:"领取礼品成功，即将跳转到个人中心",cssClass:"borderradius5px",cancelText:"取消",cancelType:"button button-clear button-positive",okText:"确认",okType:"button button-clear button-positive"});t.then(function(e){e&&zcToUrl("/customize/comeoncloud/Index.aspx?key=PersonalCenter")})})["catch"](function(e){r.hide(),c.alert(e.errmsg),console.log(["领取礼品失败",e])})}}e.$inject=["$scope","$rootScope","$timeout","$state","$stateParams","nAPI","$q","wLoading","wPopup","wxAPI","$window","commService"],angular.module("shop").controller("getgiftCtrl",e)}(),function(){"use strict";function e(e){return{link:function(t,i,o){var a=e(o.wechatClick),s=0,n=0,r=0,c=0;i[0].addEventListener("touchstart",function(e){s=e.touches[0].clientX,n=e.touches[0].clientY}),i[0].addEventListener("touchmove",function(e){r=e.touches[0].clientX,c=e.touches[0].clientY}),i[0].addEventListener("touchend",function(e){console.log(["touchmove event",e]),0==r&&0==c&&a(t),s=0,n=0,r=0,c=0})}}}e.$inject=["$parse"],angular.module("shop").directive("wechatClick",e)}(),function(){"use strict";function e(){function e(){return t}var t=[{title:"AngularJS",url:"https://angularjs.org/",description:"HTML enhanced for web apps!",logo:"angular.png"},{title:"BrowserSync",url:"http://browsersync.io/",description:"Time-saving synchronised browser testing.",logo:"browsersync.png"},{title:"GulpJS",url:"http://gulpjs.com/",description:"The streaming build system.",logo:"gulp.png"},{title:"Jasmine",url:"http://jasmine.github.io/",description:"Behavior-Driven JavaScript.",logo:"jasmine.png"},{title:"Karma",url:"http://karma-runner.github.io/",description:"Spectacular Test Runner for JavaScript.",logo:"karma.png"},{title:"Protractor",url:"https://github.com/angular/protractor",description:"End to end test framework for AngularJS applications built on top of WebDriverJS.",logo:"protractor.png"},{title:"Bootstrap",url:"http://getbootstrap.com/",description:"Bootstrap is the most popular HTML, CSS, and JS framework for developing responsive, mobile first projects on the web.",logo:"bootstrap.png"},{title:"Sass (Node)",url:"https://github.com/sass/node-sass",description:"Node.js binding to libsass, the C version of the popular stylesheet preprocessor, Sass.",logo:"node-sass.png"}];this.getTec=e}angular.module("shop").service("webDevTec",e)}(),function(){"use strict";function e(e,t,i,o,a){function s(e,t){for(var i=0;i<t.length;i++)t[i].pre_id==e.category_id&&(s(t[i],t),e.subList||(e.subList=[]),e.subList.push(t[i]))}return{templateUrl:"app/components/sideMenu/sideMenu.html",link:function(e,n,r,c){e.sideMenus=0,e.showMenus=function(){0==e.sideMenus?(e.sideMenus=1,$("html").addClass("sidebar-move")):(e.sideMenus=0,$("html").removeClass("sidebar-move"))},null==t.mallconfignew.nav_group_name||""==t.mallconfignew.nav_group_name?a.pdCatrgory().then(function(t){console.log(["左侧导航商品分类",t]);for(var i in t.list)t.list[i].navigation_name=t.list[i].category_name,t.list[i].navigation_link=t.list[i].category_id,t.list[i].navigation_type=1,t.list[i].subListShow=!0;for(var o=[],i=0;i<t.list.length;i++)t.list[i].pre_id||(s(t.list[i],t.list),o.push(t.list[i]));console.log("rootList",o);var a={category_name:"全部",navigation_name:"全部",category_id:"",navigation_link:"",isme:!0,navigation_type:1,pre_id:0};o.unshift(a),e.leftnavdatas=o}):i.getNavList(t.mallconfignew.nav_group_name).then(function(t){console.log(["左侧导航",t]);for(var i in t)t[i].navigation_type=2;e.leftnavdatas=t}),e.$on("ngRepeatFinished",function(e){new IScroll("#wrapper",{mouseWheel:!0,click:!0})}),$(".sideMenuMask")[0].addEventListener("touchmove",function(e){e.preventDefault()}),e.goList=function(t,i){e.sideMenus=!e.sideMenus,2==i?zcToUrl(t):window.plus?zcToUrl("/customize/shop/?v=1.0&ngroute=/productList%3fcatID%3d"+t+"#/productList?catID="+t):o.go("productList",{catID:t})}}}}e.$inject=["$timeout","MALLCONFIG","nAPI","$state","sAPI"],angular.module("shop").directive("sideMenu",e)}(),function(){"use strict";function e(e){return{restrict:"E",templateUrl:"app/components/slider/slider.html",transclude:!0,link:function(e,t,i,o){function a(){var e=0;if(i.aspectratio)if(i.aspectratio.match(":")){var o=i.aspectratio.split(":");e=Number(o[1])/Number(o[0])}else e=Number(i.aspectratio);e>0&&t.find(".sliders").css({height:t.find(".sliders").parent().width()*e})}e.$on("ngRepeatFinished",function(){return t.find(".sliderlist").length<=0?void t.hide():(a(),t.show(),void t.find(".sliders").touchSlider({animatetime:300,automatic:!1,timeinterval:4e3,sliderpoint:!0,sliderpointwidth:8,sliderpointcolor:"#fff",sliderpointbgcolor:"#ccc"}))})}}}function t(e){return{restrict:"E",template:'<div class="sliderlist"  ng-transclude></div>',transclude:!0,link:function(t,i,o,a){t.$last===!0&&e(function(){t.$emit("ngRepeatFinished")})}}}e.$inject=["$timeout"],t.$inject=["$timeout"],angular.module("shop").directive("shopslider",e).directive("shopSliderItem",t)}(),function(){"use strict";function e(e,t,i,o,a,s,n,r){return{restrict:"A",scope:{addressInfo:"=",customize:"=",addressId:"=",isgivegift:"@"},transclude:!0,templateUrl:"app/components/selectAddress/selectAddress.html",link:function(e,o,c,d){function l(){e.addressListPr=t.addressList().then(function(t){e.addressListData=t.list,e.addressListData&&e.addressListData.length>0&&(e.hasAddress=!0),console.log(["$scope.addressListData",e.addressListData]),e.addressId?angular.forEach(e.addressListData,function(t,i){t.address_id==e.addressId&&(e.addressInfo=t)}):angular.forEach(e.addressListData,function(t,i){1==t.isdefault&&(e.addressInfo=t)}),console.log(["$scope.addressInfo",e.addressInfo]),void 0==e.addressInfo&&(e.addressInfo=e.addressListData[0])})["catch"](function(e){i.alert(JSON.stringify(e))})}function u(){var t=GetParm("selectAddress"),i=null;if(t.indexOf("#")>-1&&(t=t.substring(0,t.indexOf("#"))),t=Base64.decode(decodeURIComponent(t)))try{i=JSON.parse(t)}catch(o){i=null}i?e.addressInfo={address_id:-1,consigneename:i.name,phone:i.mobilePhone,address:i.memberAddress,province:i.province,province_code:i.provinceCode,city:i.city,city_code:i.cityCode,dist:i.district,dist_code:i.areaCode,isdefault:1}:l()}"false"==e.isgivegift?e.isgivegift=!1:e.isgivegift=!0,console.log("$state.current.name",a.current.name),e.customize||(e.customize=!1),u(),e.selectAddressBtn=function(){r.getSysConfig(function(){r.getUserInfo(function(){var e=n.sysConfig;if(e.is_union_hongware){var t=e.address_select_url,i="http://"+window.location.host+"/customize/shop/";i+="?v=1.0";var o,r=window.location.href;r.indexOf("#")>-1&&(o=r.substring(r.indexOf("#")+1)),o&&(i+="&ngroute="+o+"#"+o);var c={orgCode:e.hongwei_orgcode,callbackUrl:i,openID:n.userInfo.wxOpenId,appID:e.wx_appid};t=HONGWAREDOMAIN+"/hfive/2016/store.html?action="+Base64.encode(JSON.stringify(c))+"#!/addressList",zcToUrl(t)}else{var d=angular.toJson(a.params);a.go("receiveAddressList",{siteName:a.current.name,siteparams:s.encodeURIComponent(d)})}},function(e){})},function(e){})}}}}e.$inject=["$q","nAPI","wPopup","$stateParams","$state","$window","$rootScope","commService"],angular.module("shop").directive("selectAddress",e)}(),function(){"use strict";function e(){return{templateUrl:"app/components/relateSearch/relateSearch.html",link:function(e,t,i,o){}}}angular.module("shop").directive("relateSearch",e)}(),function(){"use strict";function e(){return{templateUrl:"app/components/productBoxList/productBoxList.html",transclude:!0,link:function(e,t,i,o){}}}angular.module("shop").directive("productBoxList",e)}(),function(){"use strict";function e(e,t,i,o){return{templateUrl:"app/components/productBox/saleBox.html",link:function(e,t,i,o){},controller:["$scope","$state",function(e,t){e.goToDetail=function(e){e.isOnTheSale&&e.totalcount&&t.go("productDetail",{id:e.product_id})}}]}}e.$inject=["$timeout","$rootScope","$state","$window"],angular.module("shop").directive("saleBox",e)}(),function(){"use strict";function e(){return{templateUrl:"app/components/productBox/productBoxSale.html",link:function(e,t,i,o){},controller:["$scope","$state",function(e,t){e.goToDetail=function(e){e.isOnTheSale&&e.totalcount&&t.go("productDetail",{id:e.product_id})}}]}}angular.module("shop").directive("productBoxSale",e)}(),function(){"use strict";function e(e,t,i,o){return{controller:["$scope","$rootScope","$element","$attrs","$transclude",function(e,t,i,o,a){e.is_show_oldprice=t.mallConfig.is_show_oldprice,e.img_last=t.img_last}],templateUrl:"app/components/productBox/productBox.html",link:function(e,t,i,o){}}}e.$inject=["$timeout","$rootScope","$state","$window"],angular.module("shop").directive("productBox",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n){return{restrict:"A",scope:{parms:"=",payScuss:"=",payError:"=",showClose:"=",showDaiPay:"="},templateUrl:"app/components/payPanel/payPanel.html",link:function(e,i,o,r){function c(){n.pay(g.payPanel.payOrderId).then(function(e){s.getSysConfig(function(){a.sysConfig.mall_order_pay_success_url?zcToUrl(a.sysConfig.mall_order_pay_success_url):d(e)},function(){d(e)})})["catch"](function(e){"function"==typeof m.payError?m.payError(e):zcToUrl("#/orderDetail/"+g.payPanel.payOrderId+"/")})}function d(e){"function"==typeof m.payScuss?m.payScuss(e):zcToUrl("#/orderDetail/"+g.payPanel.payOrderId)}function l(){zcToUrl("/app/wap/pay/MallOrderAliPay.aspx?order_id="+g.payPanel.payOrderId)}function u(){window.location.href="/customize/Shop/JDPay.aspx?order_id="+g.payPanel.payOrderId}function p(){g.payPanel.payOrderId&&t.go("anotherPay",{orderId:g.payPanel.payOrderId})}function v(){s.getSysConfig(function(){g.hasAliPay=a.sysConfig.has_ali_pay,g.hasWxPay=a.sysConfig.has_wx_pay,g.hasDaiPay=g.payPanel.daiPay,g.hasJDPay=a.sysConfig.has_jd_pay},function(){})}var g=e.vm={payPanel:e.parms,hasAliPay:!1,hasWxPay:!1,hasDaiPay:!1,hasJDPay:!1},m=e.vf={wxPay:c,aliPay:l,anotherPay:p,jdPay:u,payScuss:e.payScuss,payError:e.payError};v()}}}e.$inject=["$q","$state","nAPI","$window","$rootScope","commService","wxAPI"],angular.module("shop").directive("payPanel",e)}(),function(){"use strict";function e(){function e(e){var t=this;t.relativeDate=e(t.creationDate).fromNow()}e.$inject=["moment"];var t={restrict:"E",templateUrl:"app/components/navbar/navbar.html",scope:{creationDate:"="},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("shop").directive("acmeNavbar",e)}(),function(){"use strict";function e(e){function t(t,i,o,a){var s,n=e(i[0],{typeSpeed:40,deleteSpeed:40,pauseDelay:800,loop:!0,postfix:" "});i.addClass("acme-malarkey"),angular.forEach(t.extraValues,function(e){n.type(e).pause()["delete"]()}),s=t.$watch("vm.contributors",function(){angular.forEach(a.contributors,function(e){n.type(e.login).pause()["delete"]()})}),t.$on("$destroy",function(){s()})}function i(e,t){function i(){return o().then(function(){e.info("Activated Contributors View")})}function o(){return t.getContributors(10).then(function(e){return a.contributors=e,a.contributors})}var a=this;a.contributors=[],i()}i.$inject=["$log","githubContributor"];var o={restrict:"E",scope:{extraValues:"="},template:"&nbsp;",link:t,controller:i,controllerAs:"vm"};return o}e.$inject=["malarkey"],angular.module("shop").directive("acmeMalarkey",e)}(),function(){"use strict";function e(e,t,i){return{link:function(e,o,a,s){o[0].offsetTop<angular.element(t).height()&&i(function(){o.attr("src",o.attr("data-src"))}),angular.element(t).bind("scroll",function(e){var t=o[0].offsetTop+o[0].clientHeight-e.currentTarget.innerHeight-e.currentTarget.scrollY;150>t&&o.attr("src",o.attr("data-src"))}),e.$on("$viewContentLoading",function(e,i){angular.element(t).unbind("scroll")})}}}e.$inject=["$parse","$window","$timeout"],angular.module("shop").directive("lazyLoad",e)}(),function(){"use strict";function e(){return{templateUrl:"app/components/goRight/goRight.html",scope:{iconName:"@"},controller:["$scope","$element","$attrs","$transclude",function(e,t,i,o){e.iconLink="#"+e.iconName}],link:function(e,t,i,o){}}}angular.module("shop").directive("goRight",e)}(),function(){"use strict";function e(){return{templateUrl:"app/components/hotSearch/hotSearch.html",link:function(e,t,i,o){}}}angular.module("shop").directive("hotSearch",e)}(),function(){"use strict";function e(){return{templateUrl:"app/components/goBack/goBack.html",link:function(e,t,i,o){e.goBack=function(){zcBack()}}}}angular.module("shop").directive("goBack",e)}(),function(){"use strict";function e(e,t){function i(i){function a(e){return e.data}function s(t){e.error("XHR Failed for getContributors.\n"+angular.toJson(t.data,!0))}return i||(i=30),t.get(o+"/contributors?per_page="+i).then(a)["catch"](s)}var o="https://api.github.com/repos/Swiip/generator-gulp-angular",a={apiHost:o,getContributors:i};return a}e.$inject=["$log","$http"],angular.module("shop").factory("githubContributor",e)}(),function(){"use strict";function e(e,t,i,o){return{templateUrl:"app/components/footerBar/footerBar.html",link:function(t,a,s,n){t.bottomList=[],console.log("接口地址",e.mainsiteurl),t.getShopNums=function(){},t.getShopNums(),t.goToOtherUrl=function(e){zcToUrl("/customize/comeoncloud/Index.aspx?key="+e)},t.$on("getShopNums",function(e,i){t.getShopNums()}),t.getBottomNavList=function(){var e=GetParm("key");e||(e="MallHome"),i.getBottomNavList({key:e,property:"foottool_list",key_type:void 0==o.mallconfignew.foottool?"":o.mallconfignew.foottool}).then(function(e){if(console.log("底部导航成功",e),e.status&&(e.result.size||(e.result.size=14),e.result.ico_size||(e.result.ico_size=24),e.result.style||(e.result.style=0),t.bottom=e.result,t.bottom.list&&t.bottom.list.length>0))for(var i=0;i<t.bottom.list.length;i++)""!=$.trim(t.bottom.list[i].url)&&window.location.href.indexOf(t.bottom.list[i].url)>=0&&ExistsParm(window.location.href,t.bottom.list[i].url)&&(t.bottom.list[i].bg_color=t.bottom.list[i].active_bg_color,t.bottom.list[i].color=t.bottom.list[i].active_color)})["catch"](function(e){console.log("底部导航失败",e)})},t.getBottomNavList(),t.goToBottomDetail=function(e,t){return""==$.trim(e.url)?void alert("即将推出，敬请期待"):void zcToUrl(e.url)},t.getSvgIco=function(e){return e.ico?"#"+e.ico.replace("iconfont ",""):""}}}}e.$inject=["$rootScope","mAPI","nAPI","MALLCONFIG"],angular.module("shop").directive("footerBar",e)}(),function(){"use strict";function e(e,t){function i(t,i,o,a){function s(e){return e?e=e.match(",")?e.split(","):[e]:[]}function n(){a.couponCheckBoxStatus=!1}function r(){if(a.couponCheckBoxStatus=!0,t.checkedCouponInfo="")for(var e=0;e<a.couponData.length;e++)a.couponData[e].checked=!1}function c(e){console.log(["@@@@",e]);var i=e[0],o=(e[1],e[2]);angular.forEach(i,function(e,i){if(2==t.orderType){if("leader"!=t.groupType)return"member"==t.groupType?void(e.cantuse=!0):void(e.cantuse=!0);if(!e.is_can_use_groupbuy)return void(e.cantuse=!0)}else if(!e.is_can_use_shop)return void(e.cantuse=!0);if(0!=e.product_id&&(e.cantuse=!0,(2==o.length&&o[1].parent_product_id||1==o.length)&&e.product_id==o[0].product_id))return void(e.cantuse=!1);if(""!=e.product_tags){e.cantuse=!0;var a=!1,n=s(e.product_tags);if(2==o.length&&o[1].parent_product_id||1==o.length){for(var r=0;r<n.length;r++)if(o[0].tags&&o[0].tags.match(n[r])){a=!0;break}}else angular.forEach(o,function(e,t){if(!(t>0)||a){for(var i=!1,o=s(e.tags),r=0;r<n.length;r++){for(var c=0;c<o.length;c++)if(n[r]===o[c]){i=!0;break}if(i)break}a=i?!0:!1}});a&&(e.cantuse=!1)}}),console.log("cps",i),t.canuserCount=0;for(var a=0;a<i.length;a++)t.orderTotalPrice<i[a].buckle_amount||t.orderTotalPrice<i[a].freefreight_amount||i[a].cantuse||(t.canuserCount++,console.log("couponData"),console.log(i[a]))}function d(e){if(!(t.orderTotalPrice<e.buckle_amount||t.orderTotalPrice<e.freefreight_amount||e.cantuse)){if(2==t.orderType){if(!e.is_can_use_groupbuy)return}else if(!e.is_can_use_shop)return;if(e.checked)e.checked=!1,t.checkedCouponInfo="";else{for(var i=0;i<a.couponData.length;i++)a.couponData[i].checked=!1;e.checked=!0,t.checkedCouponInfo=e}console.log(t.checkedCouponInfo),"function"==typeof t.checkAmount&&t.checkAmount(t.checkedCouponInfo)}}t.amountName="购买金额",o.amountName&&(t.amountName=o.amountName);var l=[];a.couponCheckBoxStatus=!1,a.checkcoupon=d,a.confirmMyCheck=n,a.openCouponCheckBox=r;var u=e(function(e,i){l[0]=t.$watch("ccvm.couponData",function(t,i){t.length>0&&e(t)})}),p=e(function(e,i){l[1]=t.$watch("orderProductsTags",function(t,i){e(s(t))})}),v=e(function(e,i){l[2]=t.$watch("orderSkus",function(t,i){t.length>0&&e(t)})});e.all([u,p,v]).then(c),t.$on("$destroy",function(){for(var e=0;e<l.length;e++)l[e]()})}function o(e,t){function i(e){for(var t,i=new Date,o=[],a=[],s=[],n=[],t=0;t<e.length;t++)e[t].valid_from=new Date(e[t].valid_from),e[t].valid_to=new Date(e[t].valid_to),e[t].outdate=!1,e[t].checked=!1,e[t].cantuse=!1,0==e[t].cardcoupon_status?o.push(e[t]):a.push(e[t]);for(var t=0;t<o.length;t++){var r=o[t].valid_to.getTime()-i.getTime();r>0?s.push(o[t]):(o[t].outdate=!0,n.push(o[t]))}return e=s.concat(a,n),s}function o(){for(var e=[],i=0;i<a.couponData.length;i++)1==a.couponData[i].is_store_card&&e.push(a.couponData[i]);a.couponData=e,t.canuserCount=a.couponData.length}t.cardcoupon_show_name="优惠券",location.hostname.match("www.youzhengjia.com")&&(t.cardcoupon_show_name="助学券"),t.showName&&(t.cardcoupon_show_name=t.showName);var a=this;a.couponData=[],a.couponLoadDone=!1,e.couponList({is_can_use:""}).then(function(e){a.couponData=i(e.list),t.showName&&"储值卡"==t.showName&&o(),a.couponLoadDone=!0})}o.$inject=["nAPI","$scope"];var a={restrict:"AE",scope:{orderTotalPrice:"=",orderSkus:"=",checkedCouponInfo:"=",orderProductsTags:"=",orderType:"=",groupType:"=",showName:"=",checkAmount:"="},templateUrl:"app/components/checkCoupon/checkCoupon.html",link:i,controller:o,controllerAs:"ccvm"};return a}e.$inject=["$q","$timeout"],angular.module("shop").directive("checkCoupon",e)}(),function(){"use strict";function e(e){return{restrict:"A",link:function(t,i,o){t.$last===!0&&e(function(){t.$emit("ngRepeatFinished")})}}}e.$inject=["$timeout"],angular.module("shop").directive("onFinishRenderFilters",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n,r){function c(){r.getUserInfo(function(){d()},function(){window.location.href="#/bindPhone/"})}function d(){s.getUserField({mapping_type:D.mapping_type}).then(function(e){if(console.log("用户字段",e),e.status){for(var t=0;t<e.result.field_list.length;t++)"Phone"==e.result.field_list[t].field&&(D.phoneIndex=t,e.result.field_list[t].oldvalue=e.result.field_list[t].value,""==e.result.field_list[t].value?D.isPhoneNull=!0:D.isPhoneNull=!1,b(e.result.field_list[t])),"img"==e.result.field_list[t].type&&(D.imgIndex=t,D.imgURLs[0]=e.result.field_list[t].value,o(function(){void 0!=$("#upLoadImg0")[0]&&($("#upLoadImg0")[0].addEventListener("change",function(e){g(e,"#upLoadImg0")},!1),null!=D.fieldList[D.imgIndex].value&&($(".jia0").remove(),$(".label0").prepend('<img src="'+D.fieldList[D.imgIndex].value+'">')))},200)),"date"==e.result.field_list[t].type&&(e.result.field_list[t].value=new Date(e.result.field_list[t].value)),1==e.result.field_list[t].read_only&&D.readCount++;D.readCount==e.result.field_list.length&&(D.isAllReadable=!0),D.fieldList=e.result.field_list,D.isShowBtn=e.result.can_edit,D.mapping_type=e.result.mapping_type,D.id=e.result.id}})["catch"](function(e){console.log("用户字段失败",e)})}function l(e){return _(e)?void s.getSMSCode({phone:e}).then(function(e){console.log("验证码",e),e.status?u():(n.show(e.msg),o(function(){n.hide()},1e3))})["catch"](function(e){console.log("验证码失败",e)}):(n.show("您的手机格式不正确"),void o(function(){n.hide()},1e3))}function u(){D.waitTime=60,i(function(){D.waitTime<=0||!D.isShowEdit?(i.cancel(u),D.isShowCode=!1,D.waitTime=0):D.waitTime--},1e3,0)}function p(){s.postUserInfoWithoutCode(D.userFieldData).then(function(e){e.status?(n.show("保存成功"),o(function(){n.hide()},1e3),D.isShowEdit=!1,d()):(console.log("保存失败",e.msg),n.show(e.msg),o(function(){n.hide()},1e3))})["catch"](function(e){console.log("保存失败",e.msg),n.show(e.msg),o(function(){n.hide()},1e3)})}function v(){if(D.userFieldData={},D.userFieldData.mapping_type=D.mapping_type,0==D.id)return n.show("请先登录"),void o(function(){n.hide()},1e3);D.userFieldData.AutoID=D.id,console.log(D.userFieldData);for(var e=0;e<D.fieldList.length;e++)if(1!=D.fieldList[e].read_only){if(console.log(D.fieldList[e]),"email"==D.fieldList[e].field&&!y(D.fieldList[e].value))return n.show("邮箱格式不正确"),void o(function(){n.hide()},1e3);if("date"==D.fieldList[e].type&&("object"==typeof D.fieldList[e].value?D.fieldList[e].value=D.fieldList[e].value.format("yyyy-MM-dd"):D.fieldList[e].value=D.fieldList[e].value),"Phone"==D.fieldList[e].field&&(D.userFieldData[D.fieldList[e].field]=D.fieldList[e].value,""!=D.fieldList[e].value&&D.fieldList[e].oldvalue!=D.fieldList[e].value)){if(""==D.code)return n.show("验证码为空"),void o(function(){n.hide()},1e3);D.userFieldData.code=D.code,w()}if(D.userFieldData[D.fieldList[e].field]=D.fieldList[e].value,"img"==D.fieldList[e].type&&(D.fieldList[e].value=D.imgURLs[0],D.userFieldData[D.fieldList[e].field]=D.imgURLs[0]),1==D.fieldList[e].no_null&&(""==D.fieldList[e].value||void 0==D.fieldList[e].value))return n.show("请填写"+D.fieldList[e].field_name),void o(function(){n.hide()},1e3)}console.log(D.userFieldData),p()}function g(t,i){e.imgData=[],console.log(["e",t]);for(var o=t.target.files.length,a=0;o>a;a++)e.imgData.push(t.target.files[a]);n.show("图片上传中"),setTimeout(function(){console.log(e.imgData),m()},200)}function m(){var i=new XMLHttpRequest;i.open("POST",t.mainsiteurl+"/serv/api/common/file.ashx?action=add",!0);var o=new FormData;console.log(["$scope.imgData",e.imgData]);for(var a=0;a<e.imgData.length;a++)console.log("$scope.imgData[i]",e.imgData[a]),o.append("file",e.imgData[a]);i.send(o),i.onreadystatechange=function(e){if(console.log(["xhr.responseText",i.responseText]),4==i.readyState)if(200==i.status){console.log(["JSON.parse(xhr.responseText)",JSON.parse(i.responseText)]);var t=JSON.parse(i.responseText);D.imgURLs[0]=t.file_url_list[0],n.hide(),h(D.imgURLs)}else n.hide(),console.log(["JSON.parse(xhr.responseText)",JSON.parse(i.responseText)])}}function h(e){$(".jia0").remove(),$("img").remove(),$(".label0").prepend('<img src="'+e[0]+'">')}function f(){window.location.href=history.go(-1)}function _(e){var t=/(^(([0\+]\d{2,3}-)?(0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$)|(^0{0,1}1[3|4|5|6|7|8|9][0-9]{9}$)/;return t.test(e)?!0:!1}function y(e){var t=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;return t.test(e)?!0:!1}function b(e){"Phone"==e.field&&(""!=e.oldvalue&&""!=e.value&&e.oldvalue!=e.value?D.isShowCode=!0:D.isShowCode=!1)}function w(){for(var e=0,t=0;t<D.fieldList.length;t++)if("Phone"==D.fieldList[t].field){if(e=t,""==D.fieldList[t].value)return n.show("请填写手机号"),void o(function(){n.hide()},1e3);if(!_(D.fieldList[t].value))return n.show("您的手机格式不正确"),void o(function(){n.hide()},1e3);break}s.checkPhoneCode({phone:D.fieldList[e].value,code:D.code}).then(function(e){e.status||(n.show(e.msg),o(function(){n.hide()},1e3))})["catch"](function(e){console.log("检查验证码错误",e)})}var D=e.vm={imgURLs:[],waitTime:0,code:"",imgIndex:0,isPhoneNull:!1,isShowCode:!1,isShowEdit:!1,userFieldData:{},fieldList:{},isShowBtn:!1,mapping_type:2,isAllReadable:!1,readCount:0,id:0};e.vf={getUserField:d,getSMSCode:l,checkPhoneCode:w,waitForSMSCode:u,getFile:g,upLoadImg:m,viewImg:h,isPhone:_,isEmail:y,isPhoneChange:b,postUserInfoWithoutCode:p,goBackPage:f,
beforeSubmitCheck:v,init:c};r.setPageTitle("用户信息"),c()}e.$inject=["$scope","$rootScope","$interval","$timeout","$filter","nAPI","wLoading","commService"],angular.module("shop").controller("userMangeCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n,r,c){function d(e){"undefined"==typeof t.userInfo?r.getuserinfo({}).then(function(i){t.userInfo=i,e()})["catch"](function(e){}):t.sysConfig.is_union_hongware?t.userInfo.is_bind_hongware?e():r.getuserinfo({}).then(function(i){t.userInfo=i,e()})["catch"](function(e){}):e()}function l(){var e=t.sysConfig;if(e.is_union_hongware&&!t.userInfo.is_bind_hongware){var i,o="http://"+window.location.host+"/customize/shop/?v=1.0&ngroute=/shopBasket#/shopBasket",a={orgCode:e.hongwei_orgcode,callbackUrl:o,openID:t.userInfo.wxOpenId,appID:e.wx_appid};i=HONGWAREDOMAIN+"/hfive/2016/store.html?action="+Base64.encode(JSON.stringify(a))+"#!/register",window.location.href=i}else u()}function u(){i.basketList("/mall/shoppingcart.ashx",{action:"list"},function(i){function o(e){return function(t,i){var o=t[e],a=i[e];return o>a?1:a>o?-1:0}}console.log(["获取购物篮列表成功",i]),0==i.list.length?e.showempty=!0:e.showempty=!1,e.productTotalPrice=0,e.productTotalScore=0,e.freight=0,t.totalnums=0,e.basketListData=i.list,e.basketListData.sort(o("supplier_name"));for(var a=[],s=0;s<e.basketListData.length;s++)a.push(e.basketListData[s].supplier_name);Array.prototype.unique=function(){for(var e=[],t={},i=0;i<this.length;i++)t[this[i]]||(e.push(this[i]),t[this[i]]=1);return e},a=a.unique();for(var n=[],s=0;s<a.length;s++){for(var r={supplier_name:a[s],selected:!1,product_list:[]},c=0;c<e.basketListData.length;c++)e.basketListData[c].supplier_name==a[s]&&r.product_list.push(e.basketListData[c]);n.push(r)}e.basketListDataGroup=n},function(e){console.log(["获取购物篮列表失败",e])})}function p(e){o.show(e),setTimeout(function(){o.hide()},600)}console.log("shopBasketController"),"undefined"==typeof t.sysConfig?r.getConfig().then(function(e){e.status&&(t.sysConfig=e.result,d(function(){l()}))})["catch"](function(e){}):d(function(){l()}),e.productTotalScore=0,e.selectMenu=4,e.hasBottomNav=!1,e.orderProducts=[],e.addnum=function(o,a){a.stopPropagation(),o.count++,console.log(o.count),i.basketeditnum("/mall/shoppingcart.ashx",{action:"update",sku_id:o.sku_id,count:o.count},function(i,a,s,n){console.log(i),0==i.errcode?(t.$broadcast("getShopNums",{}),1==o.selected&&(e.productTotalPrice+=o.price,e.productTotalScore+=o.score)):(o.count=o.max_count,t.$broadcast("getShopNums",{}),p(i.errmsg))},function(e,t,i,o){console.log(e)})},e.delnum=function(o,a){a.stopPropagation(),console.log(o.count),o.count>1?(o.count--,i.basketeditnum("/mall/shoppingcart.ashx",{action:"update",sku_id:o.sku_id,count:o.count},function(i,a,s,n){console.log(i),0==i.errcode&&(t.$broadcast("getShopNums",{}),1==o.selected&&(e.productTotalPrice-=o.price,e.productTotalScore-=o.score))},function(e,t,i,o){console.log(e)})):(o.count=1,t.$broadcast("getShopNums",{}))},e.checknum=function(o){console.log(o),o.count>1?i.basketeditnum("/mall/shoppingcart.ashx",{action:"update",sku_id:o.sku_id,count:o.count},function(a,s,n,r){0==a.errcode?(e.caleProductTotalPrice(),t.$broadcast("getShopNums",{})):(p(a.errmsg),o.count=o.max_count,i.basketeditnum("/mall/shoppingcart.ashx",{action:"update",sku_id:o.sku_id,count:o.count},function(i,o,a,s){t.totalnums=0,e.caleProductTotalPrice(),t.$broadcast("getShopNums",{})},function(e,t,i,o){})),console.log(a)},function(e,t,i,o){console.log(e)}):(o.count=1,i.basketeditnum("/mall/shoppingcart.ashx",{action:"update",sku_id:o.sku_id,count:o.count},function(i,o,a,s){e.caleProductTotalPrice(),t.$broadcast("getShopNums",{})},function(e,t,i,o){}))},e.delme=function(o,s){s.stopPropagation();var n=a.confirm({title:"友情提示",template:"确认要删除这个商品吗？",cssClass:"borderradius5px",cancelText:"取消",cancelType:"button button-clear button-positive",okText:"确认",okType:"button button-clear button-positive"});n.then(function(a){a?(console.log(o),i.basketdel("/mall/shoppingcart.ashx",{action:"delete",cart_ids:o.cart_id},function(i,o,a,s){console.log("删除物品成功"),e.selectedall=!1,t.$broadcast("getShopNums",{}),u()},function(e,t,i,o){console.log("删除物品失败")})):console.log("取消取消订单")})},e.slectemeBtn=function(t){t.selected=!t.selected,console.log(t.selected);var i=!0;e.basketListData.filter(function(e){e.selected||(i=!1)});for(var o=0;o<e.basketListDataGroup.length;o++)if(t.supplier_name==e.basketListDataGroup[o].supplier_name)if(t.selected)e.basketListDataGroup[o].selected=!0;else{for(var a=!1,s=0;s<e.basketListDataGroup[o].product_list.length;s++)e.basketListDataGroup[o].product_list[s].selected&&(a=!0);e.basketListDataGroup[o].selected=a}e.selectedall=i,e.caleProductTotalPrice()},e.slectemeBtnSupplier=function(t){t.selected=!t.selected;for(var i=0;i<t.product_list.length;i++)t.product_list[i].selected=t.selected;for(var o=!0,i=0;i<e.basketListData.length;i++)if(!e.basketListData[i].selected){o=!1;break}e.selectedall=o,e.caleProductTotalPrice()},e.selectedall=!1,e.selectedallBtn=function(){0!=e.basketListData.length&&(e.selectedall=!e.selectedall,angular.forEach(e.basketListDataGroup,function(t){t.selected=e.selectedall;for(var i=0;i<t.product_list.length;i++)t.product_list[i].selected=e.selectedall;e.caleProductTotalPrice()}))},e.caleProductTotalPrice=function(){e.productTotalPrice=0,e.productTotalScore=0;for(var t=0;t<e.basketListData.length;t++){var i=e.basketListData[t];1==i.selected&&(e.productTotalPrice+=i.price*i.count,e.productTotalScore+=i.score*i.count)}},e.goCreateOrder=function(){e.orderProducts=[];for(var t=e.basketListData,i=0;i<t.length;i++)1==t[i].selected&&e.orderProducts.push({title:t[i].title,properties:t[i].properties,img_url:t[i].img_url,count:t[i].max_count,price:t[i].price,score:t[i].score,num:t[i].count,product_id:t[i].product_id,quote_price:t[i].quote_price,sku_id:t[i].sku_id,tags:t[i].tags,is_cashpay_only:t[i].is_cashpay_only,is_no_express:t[i].is_no_express});0!=e.orderProducts.length?(window.sessionStorage.setItem("orderProducts",JSON.stringify(e.orderProducts)),s.go("createOrder")):p("请至少选择一种商品哦")},e.goHome=function(){t.isSonghe?window.location.href="/customize/comeoncloud/Index.aspx?key=shophome":window.location.href="/customize/comeoncloud/Index.aspx?key=MallHome"}}e.$inject=["$scope","$rootScope","mAPI","wLoading","wPopup","$state","MALLCONFIG","nAPI","commService"],angular.module("shop").controller("shopBasketController",e)}(),function(){"use strict";function e(e,t,i,o,a,s){function n(){(""==y.MALLCONFIG.mallconfignew.product_img_ratio1||""==y.MALLCONFIG.mallconfignew.product_img_ratio2)&&(y.MALLCONFIG.mallconfignew.product_img_ratio1=1,y.MALLCONFIG.mallconfignew.product_img_ratio2=1),c(),d(),o(function(){$("#sale").width()<screen.width&&($("#sale").css("width",screen.width),console.log("正常"))},1e3)}function r(){window.sessionStorage.removeItem("orderStatu")}function c(){var e={action:"listbytype",slide_type:"promotion"};a.getSlideByType(e).then(function(e){console.log(["slide获取数据成功",e]),y.sliderdata=e.list})["catch"](function(e){console.log(["slide获取数据失败",e])})}function d(){var e={action:"list",pageindex:1,pagesize:10};a.getSaleList(e).then(function(e){console.log(["获取限时特卖活动列表成功",e]),y.scrollxyData=e.list,y.currSelectSale=e.list[0],l(e.list[0]);for(var t=0;t<y.scrollxyData.length;t++)y.scrollxyData[0].isSelected=0,v(y.scrollxyData[t]);v(e.list[0])})["catch"](function(e){console.log(["获取限时特卖活动列表失败",e])})}function l(e){v(e),y.dataloading=!0,y.activityId=e.promotion_activity_id;var t={promotion_activity_id:e.promotion_activity_id,pageindex:y.pageindex,pagesize:y.pagesize,price_sort:y.pageData.priceRank,discount_sort:y.pageData.discountRank};a.getSaleProductList(t).then(function(e){console.log(["获取限时特卖活动商品列表成功",e]),g(),y.saleProductList=y.saleProductList.concat(e.list);for(var t=0;t<y.saleProductList.length;t++)y.saleProductList[t].isOnTheSale=y.isProOnTheSale;console.log("123",y.saleProductList),y.pageindex++,o(function(){y.dataloading=!1}),e.list.length<y.pagesize&&(y.loadingEndTag=!0,y.loadingTag=!1)})["catch"](function(e){console.log(["获取限时特卖活动商品列表失败",e])})}function u(){console.log("加载更多。。。。"),y.dataloading||(console.log("到底"),l(y.currSelectSale))}function p(e){0==e?(y.pageindex=1,y.pagesize=5,y.dataloading=!1,y.loadingEndTag=!1,y.loadingTag=!0,y.saleProductList=[],y.pageData.priceAdd%2==0?y.pageData.priceRank="price_asc":y.pageData.priceRank="price_desc",l(y.currSelectSale),y.pageData.priceAdd++):1==e&&(y.pageindex=1,y.pagesize=5,y.dataloading=!1,y.loadingEndTag=!1,y.loadingTag=!0,y.saleProductList=[],y.pageData.discountAdd%2==0?y.pageData.discountRank="discount_asc":y.pageData.discountRank="discount_desc",l(y.currSelectSale),y.pageData.discountAdd++)}function v(e){var t=new Date,i=t.getTime();y.startCompare=e.promotion_activity_start_time-i,y.stopCompare=e.promotion_activity_stop_time-i;for(var o=0;o<y.scrollxyData.length;o++)e.promotion_activity_id==y.scrollxyData[o].promotion_activity_id&&(y.startCompare<0&&y.stopCompare>0?(y.leftName="结束",y.isProOnTheSale=!0,y.scrollxyData[o].status=0,y.diffTime=e.promotion_activity_stop_time):y.startCompare>0?(y.leftName="开抢",y.isProOnTheSale=!1,y.scrollxyData[o].status=1,y.diffTime=e.promotion_activity_start_time):y.stopCompare<0&&(y.leftName="活动已结束",y.isProOnTheSale=!1,y.scrollxyData[o].status=2));m()}function g(){var e=0;e=y.diffTime-(new Date).getTime()>0?y.diffTime-(new Date).getTime():(new Date).getTime()-y.diffTime;var t=parseInt(e/1e3/60/60/24,10),i=parseInt(e/1e3/60/60%24,10),o=parseInt(e/1e3/60%60,10),a=parseInt(e/1e3%60,10);y.pageData.leftDay=f(t),y.pageData.leftHour=f(i),y.pageData.leftMinus=f(o),y.pageData.leftSecond=f(a)}function m(){y.pageData.interval=i(function(){g(),console.log("倒计时循环")},1e3,0)}function h(){i.cancel(y.pageData.interval)}function f(e){return 10>e&&(e="0"+e),e}function _(e,t){y.pageindex=1,y.pagesize=5,y.dataloading=!1,y.loadingEndTag=!1,y.loadingTag=!0,y.saleProductList=[],y.currSelectSale=e;for(var i=0;i<y.scrollxyData.length;i++)y.scrollxyData[i].isSelected=-8,e.promotion_activity_id==y.scrollxyData[i].promotion_activity_id&&(0==y.scrollxyData[i].status&&(y.scrollxyData[i].status=3),y.scrollxyData[i].isSelected=t);l(e)}var y=this;y.title="限时特卖",y.sliderdata=[],y.currSelectSale=[],y.MALLCONFIG=s,y.pageindex=1,y.pagesize=5,y.dataloading=!1,y.loadingEndTag=!1,y.loadingTag=!0,y.saleProductList=[],y.showscrollx=!0,y.scrollxyData=[{count:111,url:"http://wap.baidu.com"},{count:112,url:"http://wap.baidu.com"},{count:113,url:"http://wap.baidu.com"},{count:114,url:"http://wap.baidu.com"},{count:115,url:"http://wap.baidu.com"},{count:116,url:"http://wap.baidu.com"},{count:117,url:"http://wap.baidu.com"},{count:118,url:"http://wap.baidu.com"},{count:119,url:"http://wap.baidu.com"},{count:120,url:"http://wap.baidu.com"},{count:111,url:"http://wap.baidu.com"},{count:112,url:"http://wap.baidu.com"},{count:113,url:"http://wap.baidu.com"},{count:114,url:"http://wap.baidu.com"},{count:115,url:"http://wap.baidu.com"},{count:116,url:"http://wap.baidu.com"},{count:117,url:"http://wap.baidu.com"},{count:118,url:"http://wap.baidu.com"},{count:119,url:"http://wap.baidu.com"},{count:120,url:"http://wap.baidu.com"}],y.isProOnTheSale=!1,y.leftName="",y.startCompare=0,y.stopCompare=0,y.diffTime=0,y.screenWidth=0,y.pageData={interval:{},leftDay:"",leftHour:"",leftMinus:"",leftSecond:"",priceAdd:0,discountAdd:0,priceRank:"",discountRank:""},y.clearHistory=r,y.getSaleSlide=c,y.getSaleList=d,y.getSaleProductList=l,y.tabClick=p,y.judgeTime=v,y.timer=g,y.startInterval=m,y.closeInterval=h,y.loadMoreData=u,y.clickWeek=_,n()}e.$inject=["$scope","$filter","$interval","$timeout","nAPI","MALLCONFIG"],angular.module("shop").controller("saleListCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n,r,c){function d(e){i.show(e),setTimeout(function(){i.hide()},600)}var l=t.pageData={action:"list",list:"",singleAction:"get",address_id:"",deleteAction:"delete",setAction:"setdefault"},u=t.pageFunc={};u.receiveAddressListFunc=function(){e.receiveAddressList("/mall/deliveraddress.ashx",{action:l.action},function(e,i,o,a){e?(console.log(["获取地址成功",e]),l.list=e.list,1==e.list.length&&(u.setDefaultReceiveAdd(e.list[0]),t.isone=!0)):console.log(["获取地址失败",e])},function(e,t,i,o){console.log(["获取地址请求失败",e])})},t.isGotoCreateBtn=function(e){if(console.log(n.siteName),console.log(e),void 0!=n.siteName){var t=r.decodeURIComponent(n.siteparams);t=angular.fromJson(t),console.log(t),t.addressId=e.address_id,s.go(n.siteName,t)}else console.log("不是从创建订单过来的,我还是呆在这边吧")},u.deleteReceiveAddress=function(t){var i=o.confirm({title:"友情提示",template:"确认要删除这个地址吗？",cssClass:"borderradius5px",cancelText:"取消",cancelType:"button button-clear button-positive",okText:"确认",okType:"button button-clear button-positive"});i.then(function(i){i?e.deleteReceiveAddress("/mall/deliveraddress.ashx",{action:l.deleteAction,address_id:t},function(e,t,i,o){0==e.errcode?(d("删除收货地址成功"),u.receiveAddressListFunc()):(console.log(["删除收货地址失败",e]),d("删除收货地址失败"))},function(e,t,i,o){console.log(["请求删除收货地址失败",e]),d("删除收货地址失败")}):console.log("取消删除地址")})},u.setDefaultReceiveAdd=function(i){e.deleteReceiveAddress("/mall/deliveraddress.ashx",{action:l.setAction,address_id:i.address_id},function(e,o,a,s){0==e.errcode?(console.log(["设置默认收货地址成功",e]),i.isdefault=1,1==t.isone?console.log("只有一个收获地址"):u.receiveAddressListFunc(),l.list.length>1&&d("设置默认收货地址成功")):(console.log(["设置默认收货地址失败",e]),d("设置默认收货地址失败"))},function(e,t,i,o){console.log(["请求设置默认收货地址失败",e]),d("设置默认收货地址失败")})},u.init=function(){c.getUserInfo(function(){u.receiveAddressListFunc()},function(){window.location.href="#/bindPhone/"})},u.init()}e.$inject=["mAPI","$scope","wLoading","wPopup","$rootScope","$state","$stateParams","$window","commService"],angular.module("shop").controller("receiveAddressListController",e)}(),function(){"use strict";function e(e,t,i,o,a,s){function n(){t.receiveAddressList("/mall/deliveraddress.ashx",{action:"list"},function(e,t,i,o){e?(console.log(["获取地址成功",e.list.length]),e.list.length>=1&&history.go(-1)):console.log(["获取地址失败",e.list.length])},function(e,t,i,o){console.log(["获取地址请求失败",e])})}var r=e.pageData={id:i.addressId,action:"add",getAction:"get",updateAction:"update",proAction:"provinces",cityAction:"cities",disAction:"districts",consigneename:"",address:"",zip_code:"",phone:"",isdefault:"",data:"",provinceList:[],province:null,cityList:[{code:"0",name:"请选择城市"}],city:"",districtList:[{code:"0",name:"请选择区"}],district:""},c=e.pageFunc={};c.addReceiveAddress=function(){return 0==c.allCheck()?!1:void(void 0==r.id?s.apiPost("/serv/api/mall/deliveraddress.ashx",{action:r.action,consigneename:r.consigneename,address:r.address,province:r.province.name,province_code:r.province.code,city:r.city.name,city_code:r.city.code,dist:r.district.name,dist_code:r.district.code,zip_code:r.zip_code,phone:r.phone,isdefault:r.isdefault},function(e,t,i,a){if(0==e.errcode){console.log(["新增收货地址成功",e]);var s="新增收货地址成功";history.go(-1)}else if(10010==e.errcode)console.log("请先登录"),popUp(e.errmsg,function(){o.go("login")});else{console.log(["新增收货失败",e]);var s="新增收货失败";popUp(s,function(){})}},function(e,t,i,o){console.log(["请求新增收货地址失败",e]);var a="请求新增收货地址失败";popUp(a,function(){})}):s.apiPost("/serv/api/mall/deliveraddress.ashx",{action:r.updateAction,address_id:r.id,consigneename:r.consigneename,address:r.address,province:r.province.name,province_code:r.province.code,city:r.city.name,city_code:r.city.code,dist:r.district.name,dist_code:r.district.code,zip_code:r.zip_code,phone:r.phone,isdefault:r.isdefault},function(e,t,i,o){if(0==e.errcode){console.log(["修改收货地址成功",e]);var a="修改收货地址成功";n(),c.clearAll()}else{console.log(["修改收货失败",e]);var a="修改收货失败";popUp(a,function(){})}},function(e,t,i,o){console.log(["请求修改收货地址失败",e]);var a="请求修改收货地址失败";popUp(a,function(){})}))},c.getCity=function(){var e={code:"0",name:"请选择所属城市"},i={code:"0",name:"请选择所属区"};t.getCity("/mall/area.ashx",{action:r.cityAction,province_code:r.province.code},function(t,o,a,s){t?(r.cityList=t.list,r.cityList.unshift(e),r.city=r.cityList[0],r.districtList=[],r.districtList.unshift(i),r.district=r.districtList[0]):console.log(["获取城市失败",t])},function(e,t,i,o){})},c.getDistrict=function(){var e={code:"0",name:"请选择所属区"};t.getDistrict("/mall/area.ashx",{action:r.disAction,city_code:r.city.code},function(t,i,o,a){t&&(r.districtList=t.list,r.districtList.unshift(e),r.district=r.districtList[0])},function(e,t,i,o){})},c.getSingleReceiveAddress=function(){t.getSingleReceiveAddress("/mall/deliveraddress.ashx",{action:r.getAction,address_id:r.id},function(i,o,a,s){console.log(i),i?(console.log(["获取单个收货地址成功",i]),r.consigneename=i.consigneename,r.phone=i.phone,r.address=i.address,r.zip_code=i.zip_code,r.isdefault=i.isdefault,e.provincecode=i.province_code,e.citycode=i.city_code,e.distcode=i.dist_code,t.getProvince("/mall/area.ashx",{action:"provinces"},function(t,i,o,a){console.log(t);for(var s in t.list)t.list[s].code==e.provincecode&&(r.province.name=t.list[s].name,r.province.code=t.list[s].code)},function(e,t,i,o){console.log(["请求获取省份失败",e])}),e.provincecode=i.province_code,t.getCity("/mall/area.ashx",{action:"cities",province_code:e.provincecode},function(t,i,o,a){console.log(t);for(var s in t.list)t.list[s].code==e.citycode&&(r.city.name=t.list[s].name,r.city.code=t.list[s].code);r.cityList=r.cityList.concat(t.list)},function(e,t,i,o){console.log(["请求获取省份失败",e])}),t.getDistrict("/mall/area.ashx",{action:"districts",city_code:e.citycode},function(t,i,o,a){console.log(t);for(var s in t.list)t.list[s].code==e.distcode&&(r.district.name=t.list[s].name,r.district.code=t.list[s].code);r.districtList=r.districtList.concat(t.list)},function(e,t,i,o){console.log(["请求获取省份失败",e])})):console.log(["获取单个收货地址失败",i])},function(e,t,i,o){console.log(["请求获取单个收货地址失败",e])})},c.allCheck=function(){if(""==r.consigneename){console.log("姓名为空");var e=a.alert({title:"友情提示",template:"姓名不能为空",okText:"知道了",okType:"button button-clear button-positive"});return e.then(function(e){}),!1}if(""==r.address){console.log("地址为空");var e=a.alert({title:"友情提示",template:"地址不能为空",okText:"知道了",okType:"button button-clear button-positive"});return e.then(function(e){}),!1}if(""==r.phone){console.log("手机号为空");var e=a.alert({title:"友情提示",template:"手机号不能为空",okText:"知道了",okType:"button button-clear button-positive"});return e.then(function(e){}),!1}if("0"==r.province.code){console.log("没有填写省份");var e=a.alert({title:"友情提示",template:"您选择省份",okText:"知道了",okType:"button button-clear button-positive"});return e.then(function(e){}),!1}if("0"==r.city.code){console.log("没有填写城市");var e=a.alert({title:"友情提示",template:"您选择城市",okText:"知道了",okType:"button button-clear button-positive"});return e.then(function(e){}),!1}if("0"==r.district.code){console.log("没有填写区");var e=a.alert({title:"友情提示",template:"您选择区域",okText:"知道了",okType:"button button-clear button-positive"});return e.then(function(e){}),!1}return!0},c.isPhone=function(e){var t=/(^(([0\+]\d{2,3}-)?(0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$)|(^0{0,1}1[3|4|5|6|7|8|9][0-9]{9}$)/;return t.test(e)?!0:!1},c.clearAll=function(){r.consigneename="",r.address="",r.province.name="请选择省份",r.province.code="0",r.city.name="请选择市",r.city.code="0",r.district.name="请选择区",r.district.code="0",r.zip_code="",r.phone="",r.isdefault=""},c.init=function(){var e={code:"0",name:"请选择省份"};r.city=r.cityList[0],r.district=r.districtList[0],t.getProvince("/mall/area.ashx",{action:r.proAction},function(t,i,o,a){t?(r.provinceList=t.list,r.provinceList.unshift(e),r.province=r.provinceList[0]):console.log(["获取省份失败",t])},function(e,t,i,o){console.log(["请求获取省份失败",e])}),void 0!=r.id&&c.getSingleReceiveAddress()},c.init()}e.$inject=["$scope","mAPI","$stateParams","$state","wPopup","nAPI"],angular.module("shop").controller("receiveAddressController",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n,r,c,d,l,u,p){function v(){i.pdCatrgory().then(function(e){var t={category_name:"全部",category_id:"",isme:!0};e.list.unshift(t),f.catDate=e.list,sessionStorage.setItem("catDate",JSON.stringify(f.catDate))})}function g(){f.dataloading=!0;i.pdList({action:"list",pageindex:f.pageindex,pagesize:f.pagesize,keyword:f.keywordID,category_id:f.catID,tags:f.tagID,color_name:f.colorID,size_name:f.sizeID,sort:f.updownID,is_group_buy:0}).then(function(e){f.productListData=f.productListData.concat(e.list),console.log(["more productListDate",e.list]),f.pageindex++,o(function(){f.dataloading=!1}),e.list.length<f.pagesize&&(f.loadingEndTag=!0,f.loadingTag=!1)})["catch"](function(e){console.log(["error",f.productListDate])})}function m(){g(),p.getUserInfo(function(){u.getMallHomeShareConfig({}).then(function(e){console.log("sdata",e),r.title=e.result.title,r.desc=e.result.desc,r.imgUrl=e.result.img_url,r.link=location.origin+"/customize/shop/?v=1.0&sale_id="+t.userInfo.userid+"&ngroute="+location.hash.substring(1)+"#"+location.hash.substring(1),p.setPageTitle(r.title),c.share(r)})},function(){})}var h=GetParm("sale_id");""!=h&&window.sessionStorage.setItem("sale_id",h);var f=this;e.selectMenu=2,f.keywordID=n.keywordID?n.keywordID:"",f.catID=n.catID?n.catID:"",f.tagID=n.tagID?n.tagID:"",f.updownID=n.updownID?n.updownID:"",f.colorID=n.colorID?n.colorID:"",f.sizeID=n.sizeID?n.sizeID:"",f.navName=n.navName?n.navName:"全部商品",p.setPageTitle(f.navName),f.selected=1,f.MALLCONFIG=l,console.log("=========",f.MALLCONFIG),(""==f.MALLCONFIG.mallconfignew.product_img_ratio1||null==f.MALLCONFIG.mallconfignew.product_img_ratio1||""==f.MALLCONFIG.mallconfignew.product_img_ratio2||null==f.MALLCONFIG.mallconfignew.product_img_ratio2)&&(f.MALLCONFIG.mallconfignew.product_img_ratio1=1,f.MALLCONFIG.mallconfignew.product_img_ratio2=1),f.pageData={},f.productListData=[],f.pageindex=1,f.pagesize=10,f.dataloading=!1,f.loadingEndTag=!1,f.loadingTag=!0,f.show=0;var _=sessionStorage.getItem("catDate");_?f.catDate=JSON.parse(_):(f.catDate="",v()),f.tagchangge=function(e){f.show=e},f.navswitch=function(e){f.catID=e.category_id,f.pageindex=1,f.productListData=[],g();for(var t in f.catDate)f.catDate[t].category_id==e.category_id?f.catDate[t].isme=!0:f.catDate[t].isme=!1};var y=window.sessionStorage.getItem("productListStorage");window.sessionStorage.removeItem("productListStorage"),y=JSON.parse(y),console.log(["跳回来productListStorageData",y]),y&&(f.productListData=y.data,f.pageindex=y.pageindex,f.pagesize=y.pagesize),f.goProductDetail=function(e){e.access_level>l.mallconfignew.access_level?l.mallconfignew.is_member?zcToUrl(l.mallconfignew.nopms_url):zcToUrl(l.mallconfignew.apply_url):window.plus?zcToUrl("/customize/shop/?v=1.0&ngroute=/productDetail/"+e.product_id+"#/productDetail/"+e.product_id):a.go("productDetail",{id:e.product_id})},f.loadMoreData=function(){console.log("加载更多。。。。"),f.dataloading||(console.log("到底"),g())},f.searchMask=0,f.pageData.searchInfo="",f.pageData.searchInfo=f.keywordID,f.searchBtn=0,f.searchRelateMask=0,f.conditionSort=0,f.placeholder="搜索商品",f.startSearch=function(){$(".product-list-wrap .header .search-wrap").css("width","72%"),f.sideMenus=0,f.pageData.searchInfo?(f.quxiao=0,f.searchMask=0,f.searchBtn=1,f.searchRelateMask=1):(f.quxiao=1,f.searchMask=1,f.searchBtn=0,f.searchRelateMask=0)},f.cancelSearch=function(){$(".product-list-wrap .header .search-wrap").css("width","86%"),f.pageData.searchInfo=f.keywordID,f.placeholder="搜索商品",f.quxiao=0,f.searchMask=0},f.nosearch=function(){$(".product-list-wrap .header .search-wrap").css("width","86%"),f.placeholder="搜索商品",f.quxiao=0,f.searchMask=0,f.searchRelateMask=0},f.checkSearchInfo=function(){f.pageData.searchInfo?(f.quxiao=0,f.searchMask=0,f.searchBtn=1,f.searchRelateMask=1):(f.quxiao=1,f.searchMask=1,f.searchBtn=0,f.searchRelateMask=0)},f.goSearch=function(){$(".product-list-wrap .header .search-wrap").css("width","86%"),f.quxiao=1,f.searchMask=1,f.searchBtn=0,f.searchRelateMask=0,console.log(["vm.pageData.searchInfo",f.pageData.searchInfo]),f.placeholder="搜索商品",f.searchBtn=0,f.searchMask=0,f.searchRelateMask=0,o(function(){window.plus?zcToUrl("/customize/shop/?v=1.0&ngroute=/productList%3fkeywordID%3d"+f.pageData.searchInfo+"#/productList?keywordID="+f.pageData.searchInfo):a.go("productList",{keywordID:f.pageData.searchInfo})})};var b=[{prop_id:"",prop_name:"默认排序"},{prop_id:"price_asc",prop_name:"价格最低"},{prop_id:"price_desc",prop_name:"价格最高"},{prop_id:"time_asc",prop_name:"最新上架"},{prop_id:"time_desc",prop_name:"最早上架"}];f.showSelectSort=function(){1==f.conditionSort?f.conditionSort=0:(f.conditionSort=1,f.conditionListData=[],f.conditionListData=b)},f.showSelectColor=function(){if(2==f.conditionSort)f.conditionSort=0;else{f.conditionSort=2;i.colorList().then(function(e){f.conditionListData=[],f.conditionListData=e.list,console.log(["获取颜色列表成功",e])})["catch"](function(e){})}},f.showSelectSize=function(){if(3==f.conditionSort)f.conditionSort=0;else{f.conditionSort=3;i.sizeList().then(function(e){f.conditionListData=[],f.conditionListData=e.list,console.log(["获取尺码列表成功",e])})["catch"](function(e){})}},f.closeCondition=function(){f.conditionSort=0},e.$on("ngRepeatFinished",function(e){new IScroll("#wrapper1",{mouseWheel:!0,click:!0})}),f.sortByPrice=function(e){f.updownID=e,f.productListData=[],f.pageindex=1,f.pagesize=10,f.dataloading=!1,f.loadingEndTag=!1,f.loadingTag=!0,g()},f.goSearchProductList=function(e,t,i){1==e?(f.updownID=i,f.productListData=[],f.pageindex=1,f.pagesize=10,f.dataloading=!1,f.loadingEndTag=!1,f.loadingTag=!0,f.conditionSort=0,g()):2==e?window.plus?zcToUrl("/customize/shop/?v=1.0&ngroute=/productList%3fcolorID%3d"+t+"#/productList?colorID="+t):a.go("productList",{colorID:t}):3==e&&(window.plus?zcToUrl("/customize/shop/?v=1.0&ngroute=/productList%3fsizeID%3d"+t+"#/productList?sizeID="+t):a.go("productList",{sizeID:t}))},m()}e.$inject=["$scope","$rootScope","nAPI","$timeout","$state","$q","$stateParams","shopInfo","wxAPI","$window","MALLCONFIG","sAPI","commService"],angular.module("shop").controller("productListController",e)}(),function(){"use strict";function e(e){return function(t,i){t=angular.copy(t),i=angular.copy(i);for(var o=e(t),a=0;a<t.length;a++)for(var s=0;s<t[a].values.length;s++){var n=t[a].values[s].p_id+":"+t[a].values[s].v_id;t[a].values[s].countnum=0;for(var r=0;r<i.length;r++)if(o.length>0){for(var c=0,d=0;d<o.length;d++)(o[d].pi===a||i[r].properties.match(o[d].matchtext))&&c++;c===o.length&&i[r].properties.match(n)&&(t[a].values[s].countnum+=i[r].count)}else i[r].properties.match(n)&&(t[a].values[s].countnum+=i[r].count)}return{skucheckdata:t,checkedsku:o}}}function t(){return function(e){for(var t=[],i=0;i<e.length;i++)for(var o=0;o<e[i].values.length;o++){var a=e[i].values[o].p_id+":"+e[i].values[o].v_id+":"+e[i].name+":"+e[i].values[o].value;e[i].values[o].checked&&t.push({pi:i,vi:o,matchtext:a,p_id:e[i].values[o].p_id,v_id:e[i].values[o].v_id,name:e[i].name,value:e[i].values[o].value})}return t}}e.$inject=["getCheckedSku"],angular.module("shop").factory("checkSkuNum",e).factory("getCheckedSku",t)}(),function(){"use strict";function e(e,t,i,o,a,s,n,r,c,d,l,u,p,v,g,m,h,f,_){function y(){for(var t=0;t<e.productDetailData.skus.length;t++){var i=e.productDetailData.skus[t];0==i.count&&F.noStockSkuList.push(i)}if(e.productPropertyData)for(var t=0;t<e.productPropertyData.length;t++){var o={},a=e.productPropertyData[t];o.name=a.name,o.values=[];for(var s=0;s<a.values.length;s++)a.values[s].p_name=a.name,a.values[s].selected=!1,a.values[s].canSelect=!0,b(a.values[s],F.noStockSkuList)&&o.values.push(a.values[s]);F.noStockPVList.push(o)}}function b(e,t){for(var i=0;i<t.length;i++)if(w(t[i],e))return!0;return!1}function w(e,t){var i=t.p_id+":"+t.v_id+":"+t.p_name+":"+t.value;return e.properties.indexOf(i)>-1?!0:!1}function D(e){if(0==e.selected){for(var t=[],i=0;i<F.noStockSkuList.length;i++)w(F.noStockSkuList[i],e)&&t.push(F.noStockSkuList[i]);for(var i=0;i<F.noStockPVList.length;i++){var o=F.noStockPVList[i].values;if(F.noStockPVList[i].name==e.name)k(o[a]);else for(var a=0;a<o.length;a++)b(o[a],t)?o[a].canSelect=!0:(o[a].selected=!1,o[a].canSelect=!1)}e.selected=!0}else for(var i=0;i<F.noStockPVList.length;i++){var o=F.noStockPVList[i].values;if(F.noStockPVList[i].name==e.name)for(var a=0;a<o.length;a++)o[a].selected=!1}}function k(e){for(var t=0;t<e.values.length;t++)e.values[t].selected=!1}function x(){r.addToCar({action:"add",sku_id:e.orderProduct.sku_id,count:e.orderProduct.num}).then(function(t){if(0===t.errcode)e.skuClose(),u.show("加入购物车成功"),o.shop_nums=0,I(),s(function(){u.hide()},1e3);else{var i=p.alert({title:"提示信息",template:t.errmsg});i.then(function(e){})}})["catch"](function(e){var t=p.alert({title:"提示信息",template:e.errmsg});t.then(function(e){})})}function I(){c.basketList("/mall/shoppingcart.ashx",{action:"list"},function(t){if(t.list&&0==t.list.length)e.is_shownums=!1;else{e.is_shownums=!0;for(var i in t.list)o.shop_nums+=t.list[i].count;console.log(["cal",isNaN(o.shop_nums)]),isNaN(o.shop_nums)&&window.location.reload()}})}function S(){var t=GetParm("actionkey");if(t){var i=window.localStorage.getItem(t);if(i){var a=JSON.parse(i);"undefined"!=typeof a&&"addToBasket"==a.action&&"undefined"!=typeof a.data&&"undefined"!=typeof a.data.sku_id&&"undefined"!=typeof a.data.count&&a.data.count&&(e.orderProduct.sku_id=a.data.sku_id,e.orderProduct.num=a.data.count,window.localStorage.removeItem(t),r.getuserinfo({}).then(function(e){o.userInfo=e,x()})["catch"](function(e){}))}}}function P(){console.log("use skus 7"),e.orderProduct.properties=e.productDetailData.skus[0].properties,e.orderProduct.sku_id=e.productDetailData.skus[0].sku_id,e.orderProduct.price=e.productDetailData.skus[0].price,e.orderProduct.score=e.productDetailData.skus[0].score,e.orderProduct.totalcount=e.productDetailData.skus[0].count,e.orderProduct.is_cashpay_only=e.productDetailData.skus[0].is_cashpay_only,e.orderProduct.product_id=e.productDetailData.product_id,e.orderProduct.tags=e.productDetailData.tags,e.orderProduct.is_no_express=e.productDetailData.is_no_express}function L(){e.orderProduct.img_url=e.productDetailData.img_url,e.orderProduct.quote_price=e.productDetailData.quote_price,e.orderProduct.title=e.productDetailData.title,e.orderProduct.count=e.productDetailData.totalcount,e.orderProduct.price=e.productDetailData.price,e.orderProduct.score=e.productDetailData.score,e.orderProduct.product_id=e.productDetailData.product_id,e.orderProduct.is_cashpay_only=e.productDetailData.is_cashpay_only,e.orderProduct.is_no_express=e.productDetailData.is_no_express,e.orderProduct.tags=e.productDetailData.tags}function C(){f.getProductReviewList(F.productId,{}).then(function(e){F.reviewList=e.result.list,F.reviewList.length;for(var t=0;t<F.reviewList.length;t++){F.reviewList[t].stars=[];for(var i=0;i<F.reviewList[t].review_score;i++)F.reviewList[t].stars.push(i);F.reviewList[t].commentList=[],F.reviewList[t].comment_img&&F.reviewList[t].commentList.push(F.reviewList[t].comment_img.split(","))}})}function T(){var t=0;e.productDetailData.promotion_stop_time-(new Date).getTime()>0?t=e.productDetailData.promotion_stop_time-(new Date).getTime():B();var i=parseInt(t/1e3/60/60/24,10),o=parseInt(t/1e3/60/60%24,10),a=parseInt(t/1e3/60%60,10),s=parseInt(t/1e3%60,10);F.leftDay=O(i),F.leftHour=O(o),F.leftMinus=O(a),F.leftSecond=O(s)}function A(){var t=0;t=new Date(e.productDetailData.appointment_info.appointment_end_time)-(new Date).getTime();var i=parseInt(t/1e3/60/60/24,10),o=parseInt(t/1e3/60/60%24,10),a=parseInt(t/1e3/60%60,10),s=parseInt(t/1e3%60,10);F.leftDay1=O(i),F.leftHour1=O(o),F.leftMinus1=O(a),F.leftSecond1=O(s),0==F.leftDay1&&0==F.leftHour1&&0==F.leftMinus1&&0==F.leftSecond1&&location.reload()}function M(){F.interval=_(function(){T()},1e3,0)}function B(){F.isShowPromotion=!1,_.cancel(F.interval)}function O(e){return 0>e&&(e=0),e}function z(){F.interval1=_(function(){A()},1e3,0)}function R(){return window.plus||G()?F.isLogin?!1:(window.location.href="#/bindPhone/",!0):!0}function N(){var e=navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)?(console.log("是微信浏览器"),F.chat=!0):F.chat=!1,F.chat}function G(){var e=N();return e?!0:(F.showWxPay=!0,
!1)}function U(){y(),C(),F.mall_config=o.groupConfig,console.log("vm.mall_config",F.mall_config),e.productDetailData.is_promotion_product&&e.productDetailData.promotion_stock>0&&e.productDetailData.promotion_stop_time-(new Date).getTime()>0&&e.productDetailData.promotion_start_time-(new Date).getTime()<0&&(F.isShowPromotion=!0,M()),1==e.productDetailData.is_appointment&&new Date(e.productDetailData.appointment_info.appointment_end_time).getTime()>(new Date).getTime()&&z(),$("#loadingToast").hide(),I()}var E=e.vf={setOrderProductNoSKU:P,setOrderProductHasSKU:L,loadProductReviewList:C,getNoStockPVAndSkus:y,selectNoStockPV:D},F=e.vm={showStock:!1,sku_img:"",reviewList:[],productId:i.id,isShowPromotion:!1,i_height:document.body.scrollHeight,isLogin:!0,showShare:!1,isSonghe:o.isSonghe,noStockPVList:[],noStockSkuList:[],mall_config:"",chat:!1},j=GetParm("sale_id");j.indexOf("#")>-1&&(j=j.substring(0,j.indexOf("#"))),""!=j&&window.localStorage.setItem("sale_id",j),window.sessionStorage.removeItem("orderProducts"),e.orderProduct={},e.stockProduct={},e.selectAll=!1,e.orderProduct.num=1,e.stockProduct.num=1,e.noSKU=!1,e.buynow=!1,e.isHasGift=!1,o.shop_nums=0,e.MALLCONFIG=m,e.productId=i.id,console.log(["$scope.MALLCONFIG",e.MALLCONFIG]),h.setPageTitle("商品详情"),console.log("strat getDetail"),$("#loadingToast").show();var H=r.pdDetail(e.productId).then(function(t){console.log(" getDetail",t),e.productDetailData=t,F.sku_img=e.productDetailData.img_url,h.setPageTitle(t.title),e.productDetailData.product_desc=n.trustAsHtml(e.productDetailData.product_desc),e.leftProductCount=e.productDetailData.totalcount,e.productDetailData.totalcount=0,console.log("use skus 1"),angular.forEach(e.productDetailData.skus,function(t,i){e.productDetailData.totalcount+=t.count}),E.setOrderProductHasSKU(),v.title=e.productDetailData.title,""==e.productDetailData.product_summary?v.desc=e.productDetailData.title:v.desc=e.productDetailData.product_summary,h.getUserInfo(function(){F.isLogin=!0,v.link=location.origin+"/customize/shop/?v=1.0&sale_id="+o.userInfo.userid+"&ngroute="+location.hash.substring(1)+"#"+location.hash.substring(1),v.imgUrl=e.productDetailData.img_url,v.timeline_s=function(){var e={id:F.productId,type:"ShareProduct"};f.shareAddScore(e)},console.log(["shopInfo",v]),g.share(v)},function(e){F.isLogin=!1}),console.log("use skus 7:1 ,",e.productDetailData),P(),U(),setTimeout(function(){var e=[];$.each($("img"),function(t,i){i.src&&(e.push(i.src),$(i).click(function(t){wx.previewImage({current:this.src,urls:e})}))})},2e3)})["catch"](function(e){console.log(" getDetail catch",e),e.access_level>m.mallconfignew.access_level&&(m.mallconfignew.is_member||m.mallconfignew.is_login===!1?window.location.href=m.mallconfignew.nopms_url:window.location.href=m.mallconfignew.apply_url)});a.resolve(H).then(function(){"undefined"!=typeof e.productDetailData&&(e.sliderdata=[],e.picsData={},e.picsData.datalist=e.productDetailData.show_img_list,e.picsData.ratio="640:700",e.sliderdata[0]=e.picsData)});var W=r.pdProperty(e.productId).then(function(t){e.productPropertyData=t.list,e.productStockPropertyData=t.list,angular.forEach(e.productStockPropertyData,function(e,t){angular.forEach(e.values,function(e,t){e.checked=!1})}),"undefined"==typeof e.productPropertyData||0==e.productPropertyData.length?e.noSKU=!0:angular.forEach(e.productPropertyData,function(e,t){angular.forEach(e.values,function(e,t){e.checked=!1})})})["catch"](function(){});a.all([H,W]).then(function(){if(!e.noSKU){console.log("use skus 2");var t=l(e.productPropertyData,e.productDetailData.skus);e.productPropertyData=t.skucheckdata}S()})["catch"](function(){}),"undefined"==typeof o.sysConfig&&r.getConfig().then(function(e){e.status&&(o.sysConfig=e.result)})["catch"](function(e){}),e.selectSkuValue=function(t,i){if(console.log(["cpi, cvi",t,i]),e.productPropertyData[t].values[i].countnum<=0)return void(F.isSonghe||(F.showStock=!0));e.productPropertyData[t].values[i].sku_img?F.sku_img=e.productPropertyData[t].values[i].sku_img:F.sku_img=e.productDetailData.img_url,console.log(e.productDetailData.img_url);for(var o=0;o<e.productPropertyData.length;o++)for(var a=0;a<e.productPropertyData[o].values.length;a++)o==t&&(a==i&&0==e.productPropertyData[o].values[a].checked?e.productPropertyData[o].values[a].checked=!0:e.productPropertyData[o].values[a].checked=!1);console.log("use skus 3");var s=l(e.productPropertyData,e.productDetailData.skus);if(console.log(["checkresult",s]),e.productPropertyData=s.skucheckdata,e.orderProduct.count=e.orderProduct.totalcount,e.selectAll=!1,s.checkedsku.length>0&&s.checkedsku.length===s.skucheckdata.length){for(var n=[],r=0;r<s.checkedsku.length;r++)n.push(s.checkedsku[r].matchtext);var c=[];console.log("use skus 4");for(var r=0;r<e.productDetailData.skus.length;r++)e.productDetailData.skus[r].properties==n.join(";")&&c.push(e.productDetailData.skus[r]);console.log("matchtext",n),console.log("matchskulist[0]",c[0]),e.orderProduct=angular.extend(e.orderProduct,c[0]),e.orderProduct.num>e.orderProduct.count&&(e.orderProduct.num=e.orderProduct.count),e.selectAll=!0}},e.selectStockValue=function(t,i){for(var o=0;o<e.productStockPropertyData.length;o++)for(var a=0;a<e.productStockPropertyData[o].values.length;a++)o==t&&(a==i&&0==e.productStockPropertyData[o].values[a].checked?e.productStockPropertyData[o].values[a].checked=!0:e.productStockPropertyData[o].values[a].checked=!1);var s=checkStockNum(e.productStockPropertyData,e.productDetailData.skus);if(e.productStockPropertyData=s.skucheckdata,console.log(["checkStockresult.skucheckdata",e.productStockPropertyData]),console.log(["checkStockresult.checkedsku",s.checkedsku]),s.checkedsku.length>0&&s.checkedsku.length===s.skucheckdata.length){for(var n=[],r=0;r<s.checkedsku.length;r++)n.push(s.checkedsku[r].matchtext);var c=[];console.log("use skus 4");for(var r=0;r<e.productDetailData.skus.length;r++)e.productDetailData.skus[r].properties==n.join(";")&&c.push(e.productDetailData.skus[r]);console.log("matchtext",n),console.log("matchskulist[0]",c[0]),e.stockProduct.props=c[0].properties,e.stockProduct.sku_id=c[0].sku_id}},e.delNum=function(){if(e.orderProduct.num<=0){var t=p.alert({title:"提示信息",template:"不能再少了哦"});t.then(function(e){})}else e.orderProduct.num=e.orderProduct.num-1},e.stockDelNum=function(){if(e.stockProduct.num<=1){var t=p.alert({title:"提示信息",template:"不能再少了哦"});t.then(function(e){})}else e.stockProduct.num=e.stockProduct.num-1},e.addNum=function(){if(e.orderProduct.num>=e.orderProduct.count){var t=p.alert({title:"提示信息",template:"不能再多了哦"});t.then(function(e){}),e.orderProduct.num=e.orderProduct.count}else e.orderProduct.num=e.orderProduct.num+1},e.stockAddNum=function(){e.stockProduct.num=e.stockProduct.num+1},e.stockSubmit=function(){for(var t=[],i=0;i<F.noStockPVList.length;i++){for(var o=0,a=0;a<F.noStockPVList[i].values.length;a++)if(F.noStockPVList[i].values[a].selected){var n=F.noStockPVList[i].values[a].p_id+":"+F.noStockPVList[i].values[a].v_id+":"+F.noStockPVList[i].values[a].p_name+":"+F.noStockPVList[i].values[a].value;t.push(n),o+=1}if(0==o){var r=p.alert({title:"提示信息",template:"请选择商品规格"});return void r.then(function(e){})}}var n=t.join(";");""!=n&&(e.stockProduct.props=n,e.stockProduct.product_id=e.productDetailData.product_id,e.stockProduct.product_name=e.productDetailData.title,console.log(["$scope.stockProduct",e.stockProduct]),f.stockSubmit(e.stockProduct).then(function(e){console.log(["result",e]),e.status&&(u.show("提交成功"),s(function(){u.hide()},1e3))}))},e.checknum=function(){if(e.orderProduct.num>e.orderProduct.count){e.orderProduct.num=e.orderProduct.count;var t=p.alert({title:"提示信息",template:"您所填写的商品数量超过库存"});t.then(function(e){})}if(e.orderProduct.num<1)if(""===e.orderProduct.num);else{e.orderProduct.num=1;var t=p.alert({title:"提示信息",template:"请选择至少选择一件商品"});t.then(function(e){})}},e.buySure=function(){if(0==e.leftProductCount){var i=p.alert({title:"提示信息",template:"当前商品已经没有了哦，请看看其他商品"});return void i.then(function(e){})}if(0==e.orderProduct.num){var i=p.alert({title:"提示信息",template:"请选择至少选择一件商品"});return void i.then(function(e){})}if(e.selectAll);else{if(!e.noSKU){var i=p.alert({title:"提示信息",template:"请选择商品规格"});return void i.then(function(e){})}P()}e.orderProduct.sale_id=GetParm("sale_id"),window.sessionStorage.setItem("orderProducts",JSON.stringify([e.orderProduct])),e.submitAction(function(){t.go("createOrder")},!1)},e.showSkuPage=function(){e.productDetailData.properties="",e.showSKU=1,e.noSKU&&(console.log("use skus 5"),e.orderProduct.totalcount=e.productDetailData.skus[0].count)},e.addToShopCar=function(){R()||($(".btnGiveGiftBtnConfirm").hide(),$(".btnCarSureConfirm").show(),$(".btnBuySureConfirm").hide(),e.buynow=!1,e.Basket=1,e.showSkuPage())},e.buyNow=function(){R()||($(".btnGiveGiftBtnConfirm").hide(),$(".btnCarSureConfirm").hide(),$(".btnBuySureConfirm").show(),e.buynow=!0,e.Basket=1,e.showSkuPage())},e.carSure=function(){if(0==e.leftProductCount){var t=p.alert({title:"提示信息",template:"当前商品已经没有了哦，请看看其他商品"});return void t.then(function(e){})}if(0==e.orderProduct.num){var t=p.alert({title:"提示信息",template:"请选择至少选择一件商品"});return void t.then(function(e){})}if(e.selectAll);else{if(!e.noSKU){var t=p.alert({title:"提示信息",template:"请选择商品规格"});return void t.then(function(e){})}console.log("use skus 6"),e.orderProduct.sku_id=e.productDetailData.skus[0].sku_id}e.submitAction(function(){x()},!0)},$(".sku-page")[0]&&$(".sku-page")[0].addEventListener("touchmove",function(e){e.preventDefault()}),e.showSKU=0,e.showSku=function(){e.showSKU=1},e.skuClose=function(){e.showSKU=0},e.stockClose=function(){F.showStock=0,e.stockProduct.num=1},e.addCollectFunc=function(){if(!R()){r.addCollect(e.productId).then(function(t){0==t.errcode&&(e.productDetailData.is_collect=1)})["catch"](function(e){})}},e.delCollectFunc=function(){if(G()){r.delCollect(e.productId).then(function(t){0==t.errcode&&(e.productDetailData.is_collect=0)})["catch"](function(e){})}},o.shop_nums=0,console.log(["r",o.shop_nums]),e.showGiftBtn=function(){R()||e.showGiftBuy()},e.showGiftBuy=function(){$(".btnGiveGiftBtnConfirm").show(),$(".btnCarSureConfirm").hide(),$(".btnBuySureConfirm").hide(),e.Basket=2,e.showSkuPage()},e.giveGiftBtn=function(){if(0==e.leftProductCount){var i=p.alert({title:"提示信息",template:"当前商品已经没有了哦，请看看其他商品"});return void i.then(function(e){})}if(e.selectAll);else{if(!e.noSKU){var i=p.alert({title:"提示信息",template:"请选择商品规格"});return void i.then(function(e){})}P()}E.setOrderProductHasSKU(),e.orderProduct.grouptype="givegift",window.sessionStorage.setItem("orderProducts",JSON.stringify([e.orderProduct])),e.submitAction(function(){t.go("createOrder")},!1)},e.goToOtherUrl=function(){o.isSonghe?window.location.href="/customize/comeoncloud/Index.aspx?key=shophome":window.location.href="/customize/comeoncloud/Index.aspx?key=MallHome"},e.getRights=function(){r.getRights().then(function(e){if(e.status)for(var t=0;t<e.result.length;t++);})["catch"](function(e){})},e.getRights(),e.submitAction=function(t,i){h.getUserInfo(function(){var a=o.sysConfig;if(a.is_union_hongware)if(o.userInfo.is_bind_hongware)t();else{var s,n="http://"+window.location.host+"/customize/shop/";if(i){var r={action:"addToBasket",data:{sku_id:e.orderProduct.sku_id,count:e.orderProduct.num}},c=CreateGUID();window.localStorage.setItem(c,JSON.stringify(r)),n+="?v=1.0&actionkey="+c+"&ngroute=/productDetail/"+e.productId+"#/productDetail/"+e.productId}else n+="?v=1.0&ngroute=/createOrder#/createOrder";var d={orgCode:a.hongwei_orgcode,callbackUrl:n,openID:o.userInfo.wxOpenId,appID:a.wx_appid};s=HONGWAREDOMAIN+"/hfive/2016/store.html?action="+Base64.encode(JSON.stringify(d))+"#!/register",window.location.href=s}else t()},function(){})}}e.$inject=["$scope","$state","$stateParams","$rootScope","$q","$timeout","$sce","nAPI","mAPI","getCheckedSku","checkSkuNum","wLoading","wPopup","shopInfo","wxAPI","MALLCONFIG","commService","sAPI","$interval"],angular.module("shop").controller("productDetailController",e)}(),function(){"use strict";function e(e,t){e.payMoney=t.totalPrice,e.order_id=t.orderid}e.$inject=["$scope","$stateParams"],angular.module("shop").controller("paySuccessCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n,r){function c(){v()}function d(e,t,o){f.responseCount=0,f.upFileCount=e.files.length;var a=$(e).attr("data-parent-index");if(1==t){var s=$(e).attr("data-index");f.startIndex=Number(s)}else if(f.startIndex=f.order.product_list[a].imgList.length,f.startIndex+f.upFileCount>f.maxImgCount)return void alert("最多上传"+f.maxImgCount+"张");var n=i.mainsiteurl+"/serv/api/common/file.ashx?action=add";e.files.length>0&&(f.loadingLayer=layer.open({type:2}));for(var r=0;r<e.files.length;r++){var c=new FormData,d=new XMLHttpRequest;d.parentIndex=a,d.fileIndex=f.startIndex+r,d.open("POST",n,!0),c.append("file",e.files[r]),d.send(c),d.onreadystatechange=function(e){4==this.readyState&&(f.responseCount++,200==this.status?_.sendsuccess(this.fileIndex,a,JSON.parse(this.responseText)):_.senderror(this.responseText))}}}function l(e,t,i){return 0!=i.errcode?(alert(i.errmsg),void layer.close(f.loadingLayer)):(f.order.product_list[t].imgList[e]=i.file_url_list[0],void(f.responseCount>=f.upFileCount&&(layer.close(f.loadingLayer),_.sendend())))}function u(){t.$apply(),console.log(f.imgList)}function p(e){layer.close(f.loadingLayer),alert("网络连接异常")}function v(){r.getOrderInfo({order_id:f.orderId,has_review_info:1}).then(function(e){f.order=e,g()})}function g(){for(var e=[],t=0;t<f.order.product_list.length;t++){f.order.product_list[t].showReviewPanel=!1,f.order.product_list[t].reviewScoreTmp=f.order.product_list[t].review_score,f.order.product_list[t].reviewStars=[];for(var i=0;5>i;i++)f.order.product_list[t].reviewStars.push(i+1<=f.order.product_list[t].review_score);for(var o=!0,i=0;i<e.length;i++)if(e[i].order_detail_id==f.order.product_list[t].order_detail_id){o=!1;break}o&&e.push(f.order.product_list[t]),f.order.product_list[t].comment_img?f.order.product_list[t].imgList=f.order.product_list[t].comment_img.split(","):f.order.product_list[t].imgList=[]}f.order.product_list=e}function m(e,t){if(!(t.reviewScore>0)){t.reviewScoreTmp=e+1;for(var i=0;5>i;i++)t.reviewStars[i]=e>=i}}function h(e){if(!e.submited){if(e.reviewScoreTmp<=0)return void alert("您尚未对商品评分");if(e.review_content.length<5||e.review_content.length>150)return void alert("长度必须在5-150字之间");e.submited=!0;var t=e.imgList.join(",");r.addOrderProductReview(f.orderId,e.product_id,{title:"订单商品评价",content:e.review_content,score:e.reviewScoreTmp,comment_img:e.imgList.join(","),order_detail_id:e.order_detail_id}).then(function(i){i.status?(e.comment_img=t,e.review_score=e.reviewScoreTmp):(alert(i.msg),e.submited=!1)})["catch"](function(t){alert(t.msg),e.submited=!1})}}var f=t.vm={orderId:e.orderId,order:{},reviewStars:[!1,!1,!1,!1,!1],reviewScore:0,startIndex:0,responseCount:0,upFileCount:0,loadingLayer:!1,maxImgCount:3},_=t.vf={init:c,loadData:v,selectStar:m,processProduct:g,submitReview:h,FileInputChange:d,sendsuccess:l,sendend:u,senderror:p};c()}e.$inject=["$stateParams","$scope","$rootScope","mAPI","nAPI","$timeout","commService","sAPI"],angular.module("shop").controller("orderReviewController",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n,r,c,d,l,u){function p(e){console.log(["获取订单列表请求失败",e])}function v(t){if(t){console.log(["获取订单列表成功",t]),0==t.totalcount&&(m.noOrder=!0);for(var i in t.list){t.list[i].allprice=0;for(var o in t.list[i].product_list)t.list[i].allprice+=t.list[i].product_list[o].price,null!=t.list[i].product_list[o].parent_product_id?t.list[i].depositprice=t.list[i].product_list[o].price:t.list[i].titlename=t.list[i].product_list[o].product_name,"待退款"==h.status&&(t.list[i].order_status="待退款")}h.list=h.list.concat(t.list),t.list&&(t.list.length>=h.pageSize?(h.pageIndex++,r(function(){m.dataloading=!1})):r(function(){m.dataloading=!0,m.nodata=!0}),e.$broadcast("scroll.infiniteScrollComplete"))}else console.log(["获取订单列表失败",t])}function g(e){var t={pageindex:1,pagesize:10,order_status:e,order_from_time:"",order_to_time:"",order_type:"0,2"};"待评价"==t.order_status&&(t.order_status="交易成功",t.has_review=0),a.odList(t).then(function(t){switch(e){case"":m.allCount=t.totalcount;break;case"待付款":m.waitPayCount=t.totalcount;break;case"待发货":m.waitGoodCount=t.totalcount;break;case"待收货":m.waitReceiveCount=t.totalcount;break;case"待评价":m.waitReviewCount=t.totalcount}})["catch"](function(e){console.log(["获取订单列表请求失败",e])})}console.log("orderListController");var m=this;m.payPanel={show:!1,payOrderId:0},m.dataloading=!1,m.from_time="",m.to_time="",m.noOrder=!1,void 0==i.status&&(i.status=""),m.clear_history=function(){window.sessionStorage.removeItem("orderStatu")};var h=m.pageData={offLineAction:"GetOffLineOrder",status:i.status,pageIndex:1,pageSize:10,allCount:0,waitPayCount:0,waitGoodCount:0,waitReceiveCount:0,waitReviewCount:0,list:[]};if(u.setPageTitle("订单管理"),!h.status){var f=window.sessionStorage.getItem("orderStatu");null==f||""==f||(h.status=f)}var _=$(".wrap-order-list-body").dropload({autoLoad:!1,scrollArea:window,loadUpFn:function(e){return void r(function(){s.reload()},1e3)}});_.lock("down");var y=m.pageFunc={};m.goStatusBtn=function(e){window.sessionStorage.setItem("orderStatu",e),m.nodata=!1,h.status=e,h.pageIndex=1,h.list=[],y.loadData()},y.loadData=function(){m.dataloading=!0,""==h.status?m.title="全部订单":m.title=h.status;var e={pageindex:h.pageIndex,pagesize:h.pageSize,order_status:h.status,order_from_time:m.from_time,order_to_time:m.to_time,order_type:"0,2",is_show_main:""};void 0==h.status&&(h.status=""),(""==h.status||"待付款"==h.status)&&(e.is_show_main="1"),"待评价"==e.order_status&&(e.order_status="交易成功",e.has_review=0),"待退款"==e.order_status&&(e.order_status="退款退货"),a.odList(e).then(v)["catch"](p)},m.loadMoreData=function(){m.dataloading||(console.log("到底"),y.loadData())},y.init=function(){y.loadData(),g(""),g("待付款"),g("待发货"),g("待收货"),g("待评价")},y.init(),y.pay=function(e){m.payPanel.show=!0,m.payPanel.payOrderId=e.order_id},y.dealPayError=function(e){alert(e.errmsg),m.payPanel.show=!1},y.confirm=function(e){var t=c.confirm({title:"友情提示",template:"您确定收到商品了吗？",cssClass:"borderradius5px",cancelText:"取消",cancelType:"button button-clear button-positive",okText:"确认",okType:"button button-clear button-positive"});t.then(function(t){t?o.confirmreceipt({action:"receiptconfirm",order_id:m.pageData.list[e].order_id},function(t){console.log(["确认订单成功",t]),0==t.errcode?m.pageData.list[e].order_status="交易成功":(l.show(t.errmsg),setTimeout(function(){l.hide()},600))},function(e){console.log(["确认订单失败",e])}):console.log("取消确认收货")})},y.deleteorder=function(e){var t=c.confirm({title:"友情提示",template:"您确定要取消订单么？",cssClass:"borderradius5px",cancelText:"取消",cancelType:"button button-clear button-positive",okText:"确认",okType:"button button-clear button-positive"});t.then(function(t){t?o.confirmreceipt({action:"cancel",order_id:m.pageData.list[e].order_id},function(t){console.log(["取消订单成功",t]),0==t.errcode&&(m.pageData.list[e].order_status="已取消")},function(e){console.log(["取消订单失败",e])}):console.log("不要取消订单")})}}e.$inject=["$scope","$rootScope","$stateParams","mAPI","nAPI","$state","$sce","$timeout","wPopup","wxAPI","wLoading","commService"],angular.module("shop").controller("orderListController",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n,r,c,d,l,u){function p(){r.applyReturnMoney(O.orderData.order_id).then(v)["catch"](g)}function v(e){O.orderData.ex11=1,d.alert("申请成功")}function g(e){d.alert("申请失败，再申请试试")}function m(){r.applyReturnDeposit(O.orderData.order_id).then(h)["catch"](f)}function h(e){O.orderData.ex10=1,d.alert("申请成功")}function f(e){d.alert("申请失败，再申请试试")}function _(){O.orderData.ex14?O.tipconnet=O.orderData.ex14:O.tipconnet="工作人员处理中，请稍后...";var t=d.confirm({template:'<div class="retitle fontgold">'+O.tipconnet+"</div>",cancelText:"申诉",cancelType:"contact",okText:"确定",okType:"contact"});t.then(function(t){if(t)console.log("确定了");else{console.log("取消了"),e.appeal={};var i=d.show({template:'<textarea rows="3" cols="20" ng-model="appeal.content" placeholder="请输入申诉理由"></textarea>',scope:e,buttons:[{text:"取消",type:"contact"},{text:"确定",type:"contact",onTap:function(t){r.appealContent(O.orderData.order_id,e.appeal.content).then(y)["catch"](b)}}]});i.then(function(e){console.log("Tapped!",e)})}})}function y(e){d.alert("申诉成功")}function b(e){d.alert("申请失败，再联系客服或重新申诉")}function w(){return r.odDetail(i.orderID).then(k)["catch"](D)}function D(e){var t=s.defer();return console.log(e),d.alert(e.errmsg),t.resolve("ok"),t.promise()}function k(e){var t=s.defer();if(e){console.log(["获取订单详情成功",e]);var i=e.ex2-e.ex1;switch(e.days=parseInt(i/1e3/60/60/24,10)+1,O.showorder_detail=!0,O.orderData=e,O.orderData.order_status){case"待付款":O.showStatusNm="等待买家付款";break;case"待发货":O.showStatusNm="等待卖家发货";break;case"已发货":O.showStatusNm="卖家已发货";break;case"已取消":O.showStatusNm="交易关闭";break;case"交易成功":O.showStatusNm="交易成功"}angular.forEach(O.orderData.product_list,function(e,t){e.parent_product_id?O.sproducts.push(e):O.mainproducts.push(e),O.totalMoney+=e.count*e.price,O.totalScore+=e.count*e.score}),n.exchangerate("/mall/score.ashx",{action:"exchangerate"},function(e){0===e.errcode&&(console.log(["获取积分兑换比例成功",e]),O.exchangerateData=e,O.scoreCostMoney=parseInt(O.orderData.use_score*O.exchangerateData.amount/O.exchangerateData.score))},function(e){console.log(["获取积分兑换比例请求成功",e])}),1==e.order_type&&r.getGiftOrderDetail({order_id:e.order_id}).then(function(e){console.log(["获得送礼商品详情",e]),O.giftDetailData=e})["catch"](function(e){console.log(["报错",e])}),C()}else console.log(["获取订单详情失败",e]);return t.resolve("ok"),t.promise}function x(){O.payPanel.show=!0,O.payPanel.payOrderId=i.orderID}function I(){O.orderData.order_status="待发货",O.orderData.is_pay=1,O.payPanel.show=!1}function S(e){alert(e.errmsg),O.payPanel.show=!1}function P(){var e=d.confirm({title:"友情提示",template:"您确定收到商品了吗？",cssClass:"borderradius5px",cancelText:"取消",cancelType:"button button-clear button-positive",okText:"确认",okType:"button button-clear button-positive"});console.log(O.order_id),e.then(function(e){e?(O.isCanClick=!0,n.confirmreceipt({action:"receiptconfirm",order_id:O.orderData.order_id},function(e){console.log(e),0==e.errcode?d.alert("您已确认收货"):d.alert(e.errmsg),O.loadData()},function(e){d.alert(e.errmsg),console.log(e)})):console.log("取消确认收货")})}function L(){"待付款"==O.orderData.order_status?O.diffTime=O.orderData.order_time+72e5:"已发货"==O.orderData.order_status&&(O.diffTime=O.orderData.delivery_time+6048e5);var e=0;O.diffTime-(new Date).getTime()>0?e=O.diffTime-(new Date).getTime():T();var t=parseInt(e/1e3/60/60/24,10),i=parseInt(e/1e3/60/60%24,10),o=parseInt(e/1e3/60%60,10);O.leftDay=A(t),O.leftHour=A(i),O.leftMinus=A(o)}function C(){O.interval=o(function(){L(),console.log("倒计时循环")},1e3,0)}function T(){"待付款"==O.orderData.order_status?M():"已发货"==O.orderData.order_status&&B(),o.cancel(O.interval)}function A(e){return 10>e&&(e="0"+e),e}function M(){n.confirmreceipt({action:"cancel",order_id:O.orderData.order_id},function(e){console.log(["取消订单成功",e]),0==e.errcode&&(O.orderData.order_status="已取消",O.showStatusNm="交易关闭")},function(e){console.log(["取消订单失败",e])})}function B(){n.confirmreceipt({action:"receiptconfirm",order_id:O.orderData.order_id},function(e){console.log(["确认订单成功",e]),0==e.errcode&&(O.orderData.order_status="交易成功",O.showStatusNm="交易成功")},function(e){console.log(["确认订单失败",e])})}console.log("orderDetailController"),console.log(i.orderID);var O=this;O.payPanel={show:!1,payOrderId:0},O.showorder_detail=!1,O.isCanClick=!1,O.orderData={},O.loadData=w,O.pay=x,O.totalMoney=0,O.totalScore=0,O.mainproducts=[],O.sproducts=[],O.leftDay=0,O.leftHour=0,O.showStatusNm="",O.dealPayScuss=I,O.dealPayError=S,O.confirm=P,O.scoreCostMoney=0,O.checkReturn=m,O.seeReturn=_,O.tipconnet="",O.score_show_name="积分",O.cardcoupon_show_name="优惠券",location.hostname.match("www.youzhengjia.com")&&(O.score_show_name="学习值",O.cardcoupon_show_name="助学券"),O.returnMoney=p,u.setPageTitle("订单详情"),O.loadData();var z=$(".wrap-order-detail-body").dropload({autoLoad:!1,scrollArea:window,loadUpFn:function(e){return void a(function(){t.reload()},1e3)}});z.lock("down")}e.$inject=["$scope","$state","$stateParams","$interval","$timeout","$q","mAPI","nAPI","wLoading","wPopup","wxAPI","commService"],angular.module("shop").controller("orderDetailController",e)}(),function(){"use strict";function e(e,t,i,o,a){function s(){r(),c(),p(""),g()}function n(){window.sessionStorage.removeItem("orderStatu")}function r(){var e={action:"listbytype",slide_type:"promotion"};a.getSlideByType(e).then(function(e){console.log(["slide获取数据成功",e]),_.sliderdata=e.list})["catch"](function(e){console.log(["slide获取数据失败",e])})}function c(){var e={action:"list",pageindex:1,pagesize:10};a.getSaleList(e).then(function(e){console.log(["获取限时特卖活动列表成功",e]),_.activityListData=e.list,_.activityListOne=e.list[0],_.activityListTwo=e.list[1],_.activityListThree=e.list[2];for(var t=0;3>t;t++)_.pageData.isNextSale==t+1&&(_.activityId=e.list[t].promotion_activity_id,_.week=t+2,d(e.list[t].promotion_activity_id,t+2))})["catch"](function(e){console.log(["获取限时特卖活动列表失败",e])})}function d(e,t){switch(p(t),_.dataloading=!0,_.activityId=e,t){case 2:1==_.pageData.isOnTheSale&&(_.isProOnTheSale=!0);break;case 4:2==_.pageData.isOnTheSale&&(_.isProOnTheSale=!0);break;case 6:3==_.pageData.isOnTheSale&&(_.isProOnTheSale=!0)}var i={promotion_activity_id:e,pageindex:_.pageindex,pagesize:_.pagesize};a.getSaleProductList(i).then(function(e){console.log(["获取限时特卖活动商品列表成功",e]),v(),console.log(["$scope.pageindex",_.pageindex]),_.saleProductList=_.saleProductList.concat(e.list);for(var t=0;t<_.saleProductList.length;t++)_.saleProductList[t].isOnTheSale=_.isProOnTheSale;console.log("123",_.saleProductList),_.pageindex++,o(function(){_.dataloading=!1}),e.list.length<_.pagesize&&(_.loadingEndTag=!0,_.loadingTag=!1)})["catch"](function(e){console.log(["获取限时特卖活动商品列表失败",e])})}function l(){console.log("加载更多。。。。"),_.dataloading||(console.log("到底"),d(_.activityId,_.week))}function u(e){0==e?(_.pageindex=1,_.pageData.priceAdd%2==0?_.pageData.priceRank="price_asc":_.pageData.priceRank="price_desc",_.pageData.priceAdd++):1==e&&(_.pageindex=1,_.pageData.discountAdd%2==0?_.pageData.discountRank="discount_asc":_.pageData.discountRank="discount_desc",_.pageData.discountAdd++)}function p(e){var i=new Date,o=i.getDay(),a=i.getHours(),s=new Date(t("date")(i,"yyyy/MM/dd")).getTime();if(""!=e)switch(e){case 2:o=2,s=new Date(_.pageData.tuesdayDate.replace(/-/g,"/")).getTime();break;case 4:o=4,s=new Date(_.pageData.thursdayDate.replace(/-/g,"/")).getTime();break;case 6:o=6,s=new Date(_.pageData.saturdayDate.replace(/-/g,"/")).getTime()}switch(o){case 1:_.pageData.tuesdayDate=t("date")(s+864e5,"yyyy/MM/dd"),_.pageData.latestDate=_.pageData.tuesdayDate+" 10:00:00",_.pageData.startTimeStamp=new Date(_.pageData.tuesdayDate+" 10:00:00"),_.pageData.stopTimeStamp=new Date(t("date")(s+1728e5,"yyyy/MM/dd")+" 10:00:00"),_.pageData.tuesdayDate=_.pageData.tuesdayDate,_.pageData.thursdayDate=t("date")(s+2592e5,"yyyy/MM/dd"),_.pageData.saturdayDate=t("date")(s+432e6,"yyyy/MM/dd"),_.pageData.leftName="距离活动开始",_.pageData.isNextSale=1;break;case 2:_.pageData.tuesdayDate=t("date")(s,"yyyy/MM/dd"),_.pageData.latestDate=_.pageData.tuesdayDate,_.pageData.startTimeStamp=new Date(_.pageData.tuesdayDate+" 10:00:00"),_.pageData.stopTimeStamp=new Date(t("date")(s+864e5,"yyyy/MM/dd")+" 10:00:00"),_.pageData.tuesdayDate=_.pageData.tuesdayDate,""==e||s==new Date(t("date")(i,"yyyy/MM/dd")).getTime()?(_.pageData.thursdayDate=t("date")(s+1728e5,"yyyy/MM/dd"),_.pageData.saturdayDate=t("date")(s+3456e5,"yyyy/MM/dd"),10>a?(pageData.leftName="开抢",pageData.latestDate=pageData.latestDate+" 10:00:00"):(_.pageData.isOnTheSale=1,_.pageData.leftName="结束",_.pageData.latestDate=t("date")(s+864e5,"yyyy/MM/dd")+" 00:00:00")):(_.pageData.leftName="开抢",_.pageData.latestDate=t("date")(s+864e5,"yyyy/MM/dd")+" 00:00:00"),_.pageData.isNextSale=1;break;case 3:_.pageData.tuesdayDate=t("date")(s+5184e5,"yyyy/MM/dd"),_.pageData.thursdayDate=t("date")(s+864e5,"yyyy/MM/dd"),_.pageData.latestDate=_.pageData.thursdayDate+" 10:00:00",_.pageData.startTimeStamp=new Date(_.pageData.thursdayDate+" 10:00:00"),_.pageData.stopTimeStamp=new Date(t("date")(s+1728e5,"yyyy/MM/dd")+" 10:00:00"),_.pageData.thursdayDate=_.pageData.thursdayDate,_.pageData.saturdayDate=t("date")(s+2592e5,"yyyy/MM/dd"),_.pageData.leftName="距离活动开始",_.pageData.isNextSale=2;break;case 4:""==e&&(_.pageData.tuesdayDate=t("date")(s+432e6,"yyyy/MM/dd"),_.pageData.saturdayDate=t("date")(s+1728e5,"yyyy/MM/dd")),_.pageData.thursdayDate=t("date")(s,"yyyy/MM/dd"),""==e||s==new Date(t("date")(i,"yyyy/MM/dd")).getTime()?10>a?(_.pageData.leftName="开抢",_.pageData.latestDate=_.pageData.thursdayDate+" 10:00:00"):(_.pageData.isOnTheSale=2,_.pageData.leftName="结束",_.pageData.latestDate=t("date")(s+864e5,"yyyy/MM/dd")+" 00:00:00"):(_.pageData.leftName="开抢",_.pageData.latestDate=t("date")(s+864e5,"yyyy/MM/dd")+" 00:00:00"),_.pageData.startTimeStamp=new Date(_.pageData.thursdayDate+" 10:00:00"),_.pageData.stopTimeStamp=new Date(t("date")(s+864e5,"yyyy/MM/dd")+" 10:00:00"),_.pageData.thursdayDate=_.pageData.thursdayDate,_.pageData.isNextSale=2;break;case 5:_.pageData.tuesdayDate=t("date")(s+3456e5,"yyyy/MM/dd"),_.pageData.thursdayDate=t("date")(s+5184e5,"yyyy/MM/dd"),_.pageData.saturdayDate=t("date")(s+864e5,"yyyy/MM/dd"),_.pageData.latestDate=_.pageData.saturdayDate+" 10:00:00",_.pageData.startTimeStamp=new Date(_.pageData.saturdayDate+" 10:00:00"),_.pageData.stopTimeStamp=new Date(t("date")(s+1728e5,"yyyy/MM/dd")+" 10:00:00"),_.pageData.saturdayDate=_.pageData.saturdayDate,_.pageData.leftName="距离活动开始",_.pageData.isNextSale=3;break;case 6:""==e&&(_.pageData.tuesdayDate=t("date")(s+2592e5,"yyyy/MM/dd"),_.pageData.thursdayDate=t("date")(s+432e6,"yyyy/MM/dd")),_.pageData.saturdayDate=t("date")(s,"yyyy/MM/dd"),_.pageData.latestDate=_.pageData.saturdayDate,_.pageData.startTimeStamp=new Date(_.pageData.saturdayDate+" 10:00:00"),_.pageData.stopTimeStamp=new Date(t("date")(s+864e5,"yyyy/MM/dd")+" 10:00:00"),_.pageData.saturdayDate=_.pageData.saturdayDate,""==e||s==new Date(t("date")(i,"yyyy/MM/dd")).getTime()?10>a?(_.pageData.leftName="开抢",_.pageData.latestDate=_.pageData.latestDate+" 10:00:00"):(_.pageData.isOnTheSale=3,_.pageData.leftName="结束",_.pageData.latestDate=t("date")(s+864e5,"yyyy/MM/dd")+" 00:00:00"):(_.pageData.leftName="开抢",_.pageData.latestDate=t("date")(s+864e5,"yyyy/MM/dd")+" 00:00:00"),_.pageData.isNextSale=3;break;case 0:_.pageData.tuesdayDate=t("date")(s+1728e5,"yyyy/MM/dd"),_.pageData.latestDate=_.pageData.tuesdayDate+" 10:00:00",_.pageData.startTimeStamp=new Date(_.pageData.latestDate),_.pageData.stopTimeStamp=new Date(t("date")(s+2592e5,"yyyy/MM/dd")+" 10:00:00"),_.pageData.tuesdayDate=_.pageData.tuesdayDate,_.pageData.thursdayDate=t("date")(s+3456e5,"yyyy/MM/dd"),_.pageData.saturdayDate=t("date")(s+5184e5,"yyyy/MM/dd"),_.pageData.leftName="距离活动开始",_.pageData.isNextSale=1}}function v(){_.pageData.latestTime=new Date(_.pageData.latestDate),_.pageData.latestTime=_.pageData.latestTime.getTime();var e=new Date(_.pageData.latestDate)-new Date,t=parseInt(e/1e3/60/60/24,10),i=parseInt(e/1e3/60/60%24,10),o=parseInt(e/1e3/60%60,10),a=parseInt(e/1e3%60,10);_.pageData.leftDay=h(t),_.pageData.leftHour=h(i),_.pageData.leftMinus=h(o),_.pageData.leftSecond=h(a)}function g(){_.pageData.interval=i(function(){v()},1e3,0)}function m(){i.cancel(_.pageData.interval)}function h(e){return 10>e&&(e="0"+e),e}function f(e,t){_.pageindex=1,_.pagesize=5,_.dataloading=!1,_.loadingEndTag=!1,_.loadingTag=!0,_.saleProductList=[],_.activityId=e,_.week=t,d(e,t)}var _=this;_.title="限时特卖",_.sliderdata=[],_.activityListData=[],_.activityListOne=[],_.activityListTwo=[],_.activityListThree=[],_.activityId=1,_.week=0,_.pageindex=1,_.pagesize=5,_.dataloading=!1,_.loadingEndTag=!1,_.loadingTag=!0,_.saleProductList=[],_.showscrollx=!0,_.scrollxyData=[{count:111,url:"http://wap.baidu.com"},{count:112,url:"http://wap.baidu.com"},{
count:113,url:"http://wap.baidu.com"},{count:114,url:"http://wap.baidu.com"},{count:115,url:"http://wap.baidu.com"},{count:116,url:"http://wap.baidu.com"},{count:117,url:"http://wap.baidu.com"},{count:118,url:"http://wap.baidu.com"},{count:119,url:"http://wap.baidu.com"},{count:120,url:"http://wap.baidu.com"},{count:111,url:"http://wap.baidu.com"},{count:112,url:"http://wap.baidu.com"},{count:113,url:"http://wap.baidu.com"},{count:114,url:"http://wap.baidu.com"},{count:115,url:"http://wap.baidu.com"},{count:116,url:"http://wap.baidu.com"},{count:117,url:"http://wap.baidu.com"},{count:118,url:"http://wap.baidu.com"},{count:119,url:"http://wap.baidu.com"},{count:120,url:"http://wap.baidu.com"}],_.isProOnTheSale=!1,_.pageData={interval:{},tuesdayDate:"",thursdayDate:"",saturdayDate:"",latestDate:"",latestTime:"",leftDay:"",leftHour:"",leftMinus:"",leftSecond:"",leftName:"",isOnTheSale:0,isNextSale:0,priceAdd:0,discountAdd:0,priceRank:"",discountRank:"",startTimeStamp:"",stopTimeStamp:""},_.clearHistory=n,_.getSaleSlide=r,_.getSaleList=c,_.getSaleProductList=d,_.tabClick=u,_.judgeTime=p,_.timer=v,_.startInterval=g,_.closeInterval=m,_.loadMoreData=l,_.clickWeek=f,s()}e.$inject=["$scope","$filter","$interval","$timeout","nAPI"],angular.module("shop").controller("oldSaleCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n,r){function c(){a.userInfo().then(function(e){1==d.is_amount&&e.account_amount?d.total=e.account_amount:0==d.is_amount&&e.totalscore&&(d.total=e.totalscore)}),l.loadData(),r.getTotalLockScore().then(function(e){e.status&&(d.lockScore=e.result)})}var d=t.pageData={show_type:"",dataloading:!1,nodata:!0,pageindex:1,pagesize:7,is_amount:e.is_amount,list:[],type_name:"积分",total:0,lockScore:0};d.is_amount||(d.is_amount=0),1==d.is_amount?(d.type_name="余额",n.setPageTitle("余额管理")):n.setPageTitle("积分管理");var l=t.pageFunc={};l.loadData=function(){d.nodata=!0,a.getScorereCord({pageindex:d.pageindex,pagesize:d.pagesize,score_type:d.show_type,is_amount:d.is_amount}).then(function(e){d.list=d.list.concat(e.list),e.list.length>=d.pagesize?(d.pageindex++,s(function(){d.dataloading=!1})):s(function(){d.dataloading=!0,d.nodata=!1})})},t.loadMoreData=function(){d.dataloading||l.loadData()},t.whichScoreBtn=function(e){d.pageindex=1,d.list=[],d.show_type=e,l.loadData()},n.getUserInfo(function(){c()},function(){zcToUrl("#/bindPhone/")})}e.$inject=["$stateParams","$scope","$rootScope","mAPI","nAPI","$timeout","commService","sAPI"],angular.module("shop").controller("myscoresCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n,r){function c(e){var t,i=new Date,o=[],a=[],s=[],n=[],r=[],c=[];for(t in e){e[t].valid_tos=new Date(e[t].valid_to);e[t].valid_tos.getTime()-i.getTime()}for(t in e)e[t].valid_from2=new Date(e[t].valid_from),e[t].valid_to2=new Date(e[t].valid_to),e[t].outdate=!1,e[t].checked=!1,e[t].cantuse=!1,0===e[t].cardcoupon_status?o.push(e[t]):1===e[t].cardcoupon_status?a.push(e[t]):2===e[t].cardcoupon_status&&r.push(e[t]);for(t in o){var d=o[t].valid_to2.getTime()-i.getTime();d>0?s.push(o[t]):(o[t].outdate=!0,c.push(o[t]))}e=a.concat(c);var l={arr1:o,arr2:a,arr3:s,arr4:c,arr5:n,arr6:r};return l}r.setPageTitle("我的优惠券"),e.showEmpty=!1,e.couponTitle=n.mallconfignew.my_cardcoupons_title,e.canuse=1,e.canUse=function(){e.canuse=1,d(e.canuse)},e.noCanUse=function(){e.canuse=2,d(e.canuse)},e.outDate=function(){e.canuse=3,d(e.canuse)},e.hasGiven=function(){e.canuse=4,d(e.canuse)},e.couponData=[];var d=function(t){s.show("数据请求中..."),a.couponList({pagesize:1e3,is_can_use:0,is_notshow_storevalue:1}).then(function(i){s.hide(),console.log(["获取优惠券列表成功",i]),1==t?(e.couponData=c(i.list).arr3,console.log(["可用",e.couponData])):2==t?(e.couponData=c(i.list).arr2,console.log(["已使用",e.couponData])):3==t?(e.couponData=c(i.list).arr4,console.log(["已过期",e.couponData])):4==t&&(e.couponData=c(i.list).arr6,console.log(["已转赠",e.couponData]));var o=new Date,a=o.getTime();angular.forEach(e.couponData,function(e,t){e.valid_from=e.valid_from.split(" ")[0],e.valid_from=e.valid_from.replace(/\//g,"."),e.valid_to=e.valid_to.split(" ")[0],e.valid_to=e.valid_to.replace(/\//g,".");var i=parseInt(e.valid_to_timestamp)-parseInt(a);i>0?e.valid=!0:e.valid=!1,1==e.cardcoupon_status&&(e.valid=!1),null===e.limit_type&&(e.limit_type="")})})["catch"](function(t){e.couponData=[],console.log(["优惠券失败",t]),s.hide()})};r.getUserInfo(function(){d(e.canuse)},function(){zcToUrl("#/bindPhone/")}),e.goToCouponDetail=function(e){window.localStorage.setItem("couponDetail",JSON.stringify(e)),o.go("couponDetail",{couponId:e.main_cardcoupon_id,cpstate:e.cardcoupon_status})},e.$on("ngRepeatFinished",function(e){for(var t=0;100>t;t++)$(".small-white-circle-wrap").append("<div style='width: 2px;height: 2px;border-radius: 2px;background: #fff;float: left;margin:0 0 0 8px;'></div>")})}e.$inject=["$scope","$rootScope","mAPI","$state","nAPI","wLoading","MALLCONFIG","commService"],angular.module("shop").controller("mycouponsCtrl",e)}(),function(){"use strict";function e(e,t,i){function o(){s(),e(function(){n.classAnimation="rubberBand"},4e3)}function a(){i.info('Fork <a href="https://github.com/Swiip/generator-gulp-angular" target="_blank"><b>generator-gulp-angular</b></a>'),n.classAnimation=""}function s(){n.awesomeThings=t.getTec(),angular.forEach(n.awesomeThings,function(e){e.rank=Math.random()})}var n=this;n.awesomeThings=[],n.classAnimation="",n.creationDate=1447635943477,n.showToastr=a,o()}e.$inject=["$timeout","webDevTec","toastr"],angular.module("shop").controller("MainController",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n,r){function c(){d()}function d(){r.getLockScoreList().then(function(e){e.status&&(u.lockScoreList=e.result)}),r.getTotalLockScore().then(function(e){e.status&&(u.lockScoreTotal=e.result)})}function l(){window.location.href="#/orderList"}var u=t.vm={lockScoreList:[],lockScoreTotal:0};t.vf={init:c,loadData:d,gotoOrderList:l};c()}e.$inject=["$stateParams","$scope","$rootScope","mAPI","nAPI","$timeout","commService","sAPI"],angular.module("shop").controller("lockScoreListCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a,s){t.selectMenu=5;var n=this;n.userInfoData={},n.userInfoBtn=[],n.uiset=a[s.current.name],o.navigation("personal").then(function(e){n.userInfoBtn=e}),o.userInfo().then(function(e){console.log(e),n.userInfoData=e})}e.$inject=["$scope","$rootScope","mAPI","nAPI","SHOP_UI","$state"],angular.module("shop").controller("infoCenterController",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n,r,c,d,l){function u(){v.dataloading=!0;i.pdList({action:"list",pageindex:v.pageindex,pagesize:v.pagesize,keyword:"",category_id:"",tags:"",color_name:"",size_name:"",sort:""}).then(function(e){v.productListData=v.productListData.concat(e.list),console.log(["more productListDate",e.list]),v.pageindex++,s(function(){v.dataloading=!1}),e.list.length<v.pagesize&&(v.loadingEndTag=!0,v.loadingTag=!1),l.getUserInfo(function(){c.link=location.origin+"/customize/shop/?v=1.0&sale_id="+t.userInfo.userid+"&ngroute="+location.hash.substring(1)+"#"+location.hash.substring(1),console.log(["shopInfo",c]),n.share(c)},function(e){})})["catch"](function(t){console.log(["error",e.productListDate])})}t.isSonghe?zcToUrl("/customize/comeoncloud/Index.aspx?key=shophome"):zcToUrl("/customize/comeoncloud/Index.aspx?key=MallHome");var p=GetParm("sale_id");""!=p&&window.sessionStorage.setItem("sale_id",p);var v=this;v.pageData={},v.productListData=[],v.pageindex=1,v.pagesize=10,v.dataloading=!1,v.loadingEndTag=!1,v.loadingTag=!0,v.MALLCONFIG=d,l.setPageTitle(v.MALLCONFIG.mallconfignew.mall_name),console.log("=========",v.MALLCONFIG);var g=window.sessionStorage.getItem("productListStorage");window.sessionStorage.removeItem("productListStorage"),g=JSON.parse(g),console.log(["跳回来productListStorageData",g]),g&&(v.productListData=g.data,v.pageindex=g.pageindex,v.pagesize=g.pagesize),v.goProductDetail=function(e){a.go("productDetail",{id:e})},u(),v.loadMoreData=function(){console.log("加载更多。。。。"),v.dataloading||(console.log("到底"),u())},e.sliderdata=[],e.goProductDetail=function(e){var t={data:v.productListData,pageindex:v.pageindex,pagesize:v.pagesize};console.log(["跳之前productListStorageData",t]),window.sessionStorage.setItem("productListStorage",JSON.stringify(t)),a.go("productDetail",{id:e})},t.selectMenu=1,e.placeholder="搜索商品",e.quxiao=0,e.searchMask=0,v.pageData.searchInfo="",e.searchBtn=0,e.searchRelateMask=0,e.startSearch=function(){e.placeholder="搜索双肩包",e.sideMenus=0,v.pageData.searchInfo?(e.quxiao=0,e.searchMask=0,e.searchBtn=1,e.searchRelateMask=1):(e.quxiao=1,e.searchMask=1,e.searchBtn=0,e.searchRelateMask=0)},e.cancelSearch=function(){e.placeholder="搜索商品",e.quxiao=0,e.searchMask=0},e.checkSearchInfo=function(){v.pageData.searchInfo?(e.quxiao=0,e.searchMask=0,e.searchBtn=1,e.searchRelateMask=1):(e.quxiao=1,e.searchMask=1,e.searchBtn=0,e.searchRelateMask=0)},e.goSearch=function(){console.log(["vm.pageData.searchInfo",v.pageData.searchInfo]),e.placeholder="搜索商品",e.searchBtn=0,e.searchMask=0,e.searchRelateMask=0,a.go("productList",{keywordID:v.pageData.searchInfo})}}e.$inject=["$scope","$rootScope","nAPI","mAPI","$state","$timeout","wxAPI","$http","shopInfo","MALLCONFIG","commService"],angular.module("shop").controller("homeController",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n,r,c){var d=this;d.showstatus=s.ID,e.dataloading=!1,e.nodata=!1;var l=e.pageData={id:s.ID,pageIndex:1,pageSize:5,hasMoreOrder:!0,list:[],value:[0,1]},u=e.pageFunc={};u.loadData=function(){e.dataloading=!0;var t="",o={pageindex:l.pageIndex,pagesize:l.pageSize,order_status:t,order_type:1,gift_order_type:l.id};a.odList(o).then(function(t){console.log(["获取订单列表成功",t.list]),l.list=l.list.concat(t.list),void 0==l.id&&(l.id=l.value[0]),t.list&&(t.list.length>=l.pageSize?(console.log("还有"),l.pageIndex++,i(function(){e.dataloading=!1})):i(function(){console.log("没了"),e.dataloading=!0,e.nodata=!0}))})["catch"](function(e){console.log(["获取订单列表请求失败",e])})},e.loadMoreData=function(){console.log("加载更多"),e.dataloading||(console.log("到底"),u.loadData())},u.init=function(){u.loadData()},u.init(),u.pay=function(e){n(e.pay_type,e.order_id,e.total_amount)},u.confirm=function(e){var t=r.confirm({title:"友情提示",template:"您确定收到商品了吗？",cssClass:"borderradius5px",cancelText:"取消",cancelType:"button button-clear button-positive",okText:"确认",okType:"button button-clear button-positive"});t.then(function(t){t?a.confirmreceipt({action:"receiptconfirm",order_id:e.order_id},function(e){},function(e){console.log(["确认订单失败",e])}).then(function(t){console.log(["确认订单成功",t]),0==t.errcode?(e.order_status="交易成功",o.reload()):r.show(t.errmsg)}):console.log("取消确认收货")})},u.deleteorder=function(e){var t=r.confirm({title:"友情提示",template:"您确定要取消订单么？",cssClass:"borderradius5px",cancelText:"取消",cancelType:"button button-clear button-positive",okText:"确认",okType:"button button-clear button-positive"});t.then(function(t){t?a.confirmreceipt({action:"cancel",order_id:e.order_id},function(t){console.log(["取消订单成功",t]),0==t.errcode&&(e.order_status="已取消")},function(e){console.log(["取消订单失败",e])}):console.log("不取消订单")})},e.gotoGiveGiftBtn=function(e){o.go("givegift",{orderID:e.order_id})},e.clear_history=function(){window.sessionStorage.removeItem("orderStatu")}}e.$inject=["$scope","$rootScope","$timeout","$state","nAPI","$stateParams","payment","wPopup","$sce"],angular.module("shop").controller("giftorderlistCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n,r,c,d){function l(e){var t=layer.open({type:2});o.show("正在领取中..."),i.reciveCoupon(e).then(function(i){layer.close(t),o.hide(),0==i.errcode&&(o.show("领 取 成 功"),s(function(){o.hide(),p(e)},500),u.what_btn=2)})["catch"](function(e){layer.close(t),o.hide(),1==e.errcode?(u.what_btn=1,u.showalready=!0):2==e.errcode?(u.what_btn=1,u.shownonum=!0):20002==e.errcode?o.show("该优惠券仅代言人能够领取<br><a href=\"zcToUrl('/customize/comeoncloud/Index.aspx?key=MallHome');\">点击链接成为代言人</a>"):20004==e.errcode?zcToUrl("/Error/NoPmsMobile.htm"):o.show(e.errmsg)})}var u=this;u.cp_ids=[],u.cp_datas=[],u.what_btn=0,e.cp_ids.indexOf(",")?u.cp_ids=e.cp_ids.split(","):u.cp_ids[0]=e.cp_ids,d.setPageTitle("领取优惠券");var p=function(e){i.getCouponInfo(e).then(function(t){console.log(["获取优惠券详细信息接口",t]),t.valid_to=t.valid_to.split(" ")[0],t.couponId=e,u.cp_datas=t,u.overDue=(new Date).getTime()-parseInt(t.valid_to_timestamp),console.log(["vm.overDue",u.overDue]),null==t.limit_type&&(t.limit_type=""),t.valid_from=t.valid_from.split(" ")[0],t.valid_from=t.valid_from.replace(/\//g,"."),t.valid_to=t.valid_to.split(" ")[0],t.valid_to=t.valid_to.replace(/\//g,".");var i=parseInt(t.valid_to_timestamp)-parseInt((new Date).getTime());i>0?t.valid=!0:t.valid=!1,r.title=t.cardcoupon_name,r.imgUrl="http://open-files.comeoncloud.net/img/ico/cardsharelogo.png",r.desc="先领券，再购物！",r.link=location.href,console.log(["shopInfo",r]),c.share(r)})["catch"](function(e){return 20004==e.errcode?void zcToUrl("/error/commonmsg.aspx?msg=只有指定渠道才能领取。"):void a.alert(e.errmsg)})};d.getUserInfo(function(){for(var e in u.cp_ids)""==u.cp_ids[e]||null==u.cp_ids[e]||p(u.cp_ids[e])},function(){zcToUrl("#/bindPhone/")}),u.getCouponBtn=function(e){l(e)},u.goback=function(){history.go(-1)},s(function(){for(var e=0;100>e;e++)console.log("hi"),$(".small-white-circle-wrap").append("<div style='width: 2px;height: 2px;border-radius: 2px;background: #fff;float: left;margin:0 0 0 8px;'></div>")}),n.goToDetail=function(){window.localStorage.setItem("couponDetail",JSON.stringify(u.cp_datas)),t.go("couponDetail",{couponId:u.cp_datas.couponId})}}e.$inject=["$stateParams","$state","nAPI","wLoading","wPopup","$timeout","$scope","shopInfo","wxAPI","commService"],angular.module("shop").controller("getcouponCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n){console.log(i.orderId);var r=this;r.title="快递信息",e.goBack=function(){history.length>2?history.go(-1):t.go("home")},e.orderinfo={},e.expressdata=[];({action:"get",order_id:i.orderId});e.hasExpressInfo=!1,s.odDetail(i.orderId).then(function(t){console.log(["获取订单详情成功",t]);var i={express_company_code:t.express_company_code,express_number:t.express_number};return e.orderinfo=t,n.expressInfo(i)}).then(function(t){console.log(["获取物流信息失败",t]),0===t.errcode?(console.log(["获取物流信息成功",t]),e.expressdata=t.express_info,e.hasExpressInfo=!0):e.hasExpressInfo=!1})}e.$inject=["$scope","$state","$stateParams","$rootScope","$http","nAPI","sAPI"],angular.module("shop").controller("expressInfoCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n,r,c,d){function l(){e.cp_ids.indexOf(",")?m.cp_ids=e.cp_ids.split(","):m.cp_ids[0]=e.cp_ids;for(var t in m.cp_ids)""==m.cp_ids[t]||null==m.cp_ids[t]||u(m.cp_ids[t],m.userCoupinId);s(function(){for(var e=0;100>e;e++)console.log("hi"),$(".small-white-circle-wrap").append("<div style='width: 2px;height: 2px;border-radius: 2px;background: #fff;float: left;margin:0 0 0 8px;'></div>")})}function u(e,t){i.getGiveCouponInfo(e,t).then(function(t){console.log(["获取优惠券详细信息接口",t]),t.valid_to=t.valid_to.split(" ")[0],t.couponId=e,m.cp_datas=t,m.overDue=(new Date).getTime()-parseInt(t.valid_to_timestamp),console.log(["vm.overDue",m.overDue]),null==t.limit_type&&(t.limit_type=""),t.valid_from=t.valid_from.split(" ")[0],t.valid_from=t.valid_from.replace(/\//g,"."),t.valid_to=t.valid_to.split(" ")[0],t.valid_to=t.valid_to.replace(/\//g,".");var i=parseInt(t.valid_to_timestamp)-parseInt((new Date).getTime());i>0?t.valid=!0:t.valid=!1})["catch"](function(e){a.alert(e.errmsg)})}function p(){v(m.userCoupinId)}function v(e){i.reciveOthersCoupon(e).then(function(e){e.status?(o.show("接 收 成 功"),s(function(){o.hide()},500),m.what_btn=2,t.go("mycoupons")):(o.show(e.msg),s(function(){o.hide()},500))})["catch"](function(e){1==e.errcode?(m.what_btn=1,m.showalready=!0):2==e.errcode&&(m.what_btn=1,m.shownonum=!0),o.show(e.msg),s(function(){o.hide()},500)})}function g(){window.localStorage.setItem("couponDetail",JSON.stringify(m.cp_datas)),t.go("couponDetail",{couponId:m.cp_datas.couponId})}var m=n.vm={cp_ids:[],cp_datas:[],what_btn:0,userCoupinId:e.userCoupinId,overDue:0};n.vf={getOneCoupon:u,getCouponBtn:p,goToDetail:g,init:l};d.getUserInfo(function(){l()},function(){zcToUrl("#/bindPhone/")})}e.$inject=["$stateParams","$state","nAPI","wLoading","wPopup","$timeout","$scope","shopInfo","wxAPI","commService"],angular.module("shop").controller("getOthersCouponCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n,r,c,d,l,u,p,v){function g(){function t(e){return function(t,i){var o=t[e],a=i[e];return o>a?1:a>o?-1:0}}if(E.init({trigger:"#claimArrivalTimeInput",type:"date",minDate:(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate()}),F.isNeedClaimArrivalTime=a.sysConfig.is_claim_mall_order_arrival_time,F.orderProducts=JSON.parse(window.sessionStorage.getItem("orderProducts")),!F.orderProducts)return void history.go(-1);console.log(["vm.orderProducts",F.orderProducts]),F.orderProducts&&1==F.orderProducts.length&&void 0!=F.orderProducts[0].grouptype&&(F.groupType=F.orderProducts[0].grouptype),h(),layer.open({type:2}),angular.forEach(F.orderProducts,function(e,t){e.is_cashpay_only&&(F.is_cashpay_only=1),0==e.is_no_express&&(F.is_no_express=0);var i={sku_id:e.sku_id,count:e.num,product_id:e.product_id,tags:e.tags};F.orderSkus.push(i);var o=f(e.product_id);null==o&&v.getSync("/serv/api/mall/Product.ashx",{action:"GetBaseInfo",product_id:e.product_id},function(e){e.isSuccess&&(o=e.returnObj,F.currOrderProductList.push(o),F.orderProducts[t].supplier_name=o.supplier_name)}),1==o.is_need_name_phone&&(F.is_need_name_phone=1)}),e.$watch("addressData",function(){void 0!=e.addressData?k():N()}),F.orderProducts.sort(t("supplier_name"));for(var i=0;i<F.orderProducts.length;i++)U.push(F.orderProducts[i].supplier_name);Array.prototype.unique=function(){for(var e=[],t={},i=0;i<this.length;i++)t[this[i]]||(e.push(this[i]),t[this[i]]=1);return e},U=U.unique();for(var o=[],i=0;i<U.length;i++){for(var s={supplier_name:U[i],product_list:[]},n=0;n<F.orderProducts.length;n++)F.orderProducts[n].supplier_name==U[i]&&s.product_list.push(F.orderProducts[n]);o.push(s)}F.orderProductsSort=o,layer.closeAll(),"givegift"==F.groupType&&(F.is_no_express=1,F.is_need_name_phone=1),m(),_(),y(F.orderProducts),A(),1==F.is_no_express&&j.getUserInfo(function(){"undefined"==typeof e.addressData&&(e.addressData={}),e.addressData.consigneename=F.userInfo.truename,e.addressData.phone=F.userInfo.phone})}function m(){var e=navigator.userAgent.toLowerCase();console.log(["浏览器agent",e]),"micromessenger"==e.match(/MicroMessenger/i)?(console.log("是微信浏览器"),F.chat=!0):F.chat=!1}function h(){switch(F.groupType){case"":F.currOrderType=0;break;case"givegift":F.currOrderType=1;break;case"leader":F.currOrderType=2;break;case"member":F.currOrderType=2;case"Course":F.currOrderType=7}}function f(e){if(0==F.currOrderProductList.length)return null;for(var t=0;t<F.currOrderProductList.length;t++)if(F.currOrderProductList[t].product_id==e)return F.currOrderProductList[t];return null}function _(){l.basketList("/mall/shoppingcart.ashx",{action:"list"},function(e){if(0==e.list.length)F.is_shownums=!1;else{F.is_shownums=!0;for(var t=0;t<e.list.length;t++)a.shop_nums+=e.list[t].count}})}function y(e){for(var t=0;t<e.length;t++){var i="",o=[];if(null!=e[t].properties)if(""===e[t].properties);else{o=e[t].properties.split(";");for(var a=0;a<o.length;a++){var s=[];s=o[a].split(":"),i+=s[s.length-2]+":"+s[s.length-1]+";"}e[t].properties=i.substring(0,i.length-1)}else e[t].properties=""}}function b(t){return void 0==e.addressData?(d.show("请选择寄送地址~"),void setTimeout(function(){d.hide()},600)):void(1!=t.num&&(t.num--,k()))}function w(t){if(void 0==e.addressData)return d.show("请选择寄送地址~"),void setTimeout(function(){d.hide()},600);if(t.num++,t.num>t.count){var i=c.alert({title:"提示信息",template:"不能再多了哦"});i.then(function(e){}),t.num=t.count}else k()}function D(t){if(void 0==e.addressData)return d.show("请选择寄送地址~"),setTimeout(function(){d.hide()},600),void(t.num>t.count&&(t.num=t.count));if(t.num>t.count){t.num=t.count;var i=c.alert({title:"提示信息",template:"您所填写的商品数量超过库存"});i.then(function(e){}),k()}else if(t.num<1)if(""===t.num)t.num=1,k();else{t.num=1;var i=c.alert({title:"提示信息",template:"至少要选择一个"});i.then(function(e){}),k()}else k()}function k(){T(),F.totalPay=F.orderProducts.productsTotalPrice,x()}function x(){var t=[];angular.forEach(F.orderProducts,function(i,o){var a={sku_id:i.sku_id,count:i.num};t.push(a),F.getfreightdata={receiver_province_code:e.addressData.province_code,receiver_city_code:e.addressData.city_code,receiver_dist_code:e.addressData.dist_code,skus:t}});var i=n.freight(F.getfreightdata);i.then(function(e){F.freight=e.freight,F.showFreight=e.freight,F.freight_remark=e.errmsg,N()})["catch"](function(e){return 0!=e.errcode?void alert(e.errmsg):void 0})}function I(e){var t=/^1\d{10}$/;return t.test(e)?!0:!1}function S(){if(F.currOrderId="","givegift"!=F.groupType&&void 0==e.addressData)return d.show("请选择寄送地址~"),void setTimeout(function(){d.hide()},600);if("undefined"==typeof e.addressData&&(e.addressData={consigneename:"",phone:""}),e.addressData.consigneename=p.trim(e.addressData.consigneename),e.addressData.phone=p.trim(e.addressData.phone),1==F.is_no_express&&1==F.is_need_name_phone){if(""==e.addressData.consigneename)return void alert("请输入姓名");if(""==e.addressData.phone)return void alert("请输入手机")}else 1==F.is_no_express&&0==F.is_need_name_phone&&(e.addressData.consigneename="",e.addressData.phone="");if(1===F.isNeedClaimArrivalTime&&(F.claimArrivalTime=$("#claimArrivalTimeInput").val(),""==F.claimArrivalTime))return void alert("请输入送达日期");if(F.groupConfig.is_show_name_phone){if(!F.customCreaterPhone)return void alert("请输入"+F.rname+"手机");if(!I(F.customCreaterPhone))return void alert("手机号格式错误！");if(!F.customCreaterName)return void alert("请输入"+F.rname+"姓名")}var t=F.totalPay;F.isCouponFreight||(t+=F.freight);var o=C();F.isCanClick=!0,n.odSubmit(o).then(function(o){return 0!=o.errcode?(F.isCanClick=!1,c.alert(o.errmsg),void i(function(){F.isCanClick=!1},1500)):(F.currOrderId=o.order_id,0>=t?void L(o):e.checkedCouponInfo&&t<=e.checkedCouponInfo.deductible_amount?t>0?(F.payPanel.payOrderId=o.order_id,void(F.payPanel.show=!0)):void 0:(F.payPanel.payOrderId=o.order_id,void(F.payPanel.show=!0)))}).then(function(e){})["catch"](function(e){P(e)})}function P(e){if(void 0!=e.msg)c.alert(e.msg),i(function(){F.isCanClick=!1},1500);else{if("chooseWXPay:cancel"==e.errMsg){if(window.sessionStorage.removeItem("orderProducts"),"leader"==F.groupType||"member"==F.groupType)return void(F.currOrderId?t.go("orderDetail",{orderID:F.currOrderId}):window.history.go(-1));t.go("orderList")}else c.alert(JSON.stringify(e.errmsg));i(function(){F.isCanClick=!1},1500)}}function L(e){if(window.sessionStorage.removeItem("orderProducts"),a.sysConfig.mall_order_pay_success_url){var i=a.sysConfig.mall_order_pay_success_url.replace(/{order_id}/g,e.order_id);return void zcToUrl(i)}switch(F.groupType){case"":break;case"givegift":return void t.go("givegift",{orderID:F.currOrderId});case"leader":return void t.go("waitForGroupDetail",{goodsGroupId:F.currOrderId});case"member":}if(U&&U.length>=1){if(U.length>1)return void t.go("orderList");if(""!=U[0])return void t.go("orderList")}t.go("orderDetail",{orderID:F.currOrderId})}function C(){var t=[];angular.forEach(F.orderProducts,function(e,i){var o={sku_id:e.sku_id,count:e.num};t.push(o)});var i="WEIXIN",o=0,a=0;F.isChecked&&(o=F.scoreNeed),F.isAcountChecked&&F.userInfo.account_amount>0&&(a=F.useAcount);var s=window.localStorage.getItem("sale_id");(""==s||void 0==s)&&(s=0);var n={},r=!0;switch("undefined"==typeof e.addressData&&(r=!1),n={receiver_province:r?e.addressData.province:"",receiver_province_code:r?e.addressData.province_code:"",receiver_city:r?e.addressData.city:"",receiver_city_code:r?e.addressData.city_code:"",receiver_dist:r?e.addressData.dist:"",receiver_dist_code:r?e.addressData.dist_code:"",receiver_name:r?e.addressData.consigneename:"",receiver_phone:r?e.addressData.phone:"",receiver_address:r?e.addressData.address:"",pay_type:i,use_score:o+F.realProductTotalScore,use_amount:a,skus:t,sale_id:s,buyer_memo:F.remark,is_no_express:F.is_no_express,is_need_name_phone:F.is_need_name_phone,cardcoupon_id:"0",claim_arrival_time:F.claimArrivalTime,custom_creater_name:F.customCreaterName,custom_creater_phone:F.customCreaterPhone,freight_remark:F.freight_remark},F.groupType){case"":n.order_type=0;break;case"givegift":n.order_type=1;break;case"leader":n.order_type=2,n.sale_id=void 0,n.rule_id=F.orderProducts[0].rule_id,n.groupbuy_type="leader";break;case"member":n.order_type=2,n.sale_id=void 0,n.order_id=F.orderProducts[0].order_id,n.groupbuy_parent_orderid=F.orderProducts[0].order_id,n.groupbuy_type="member";break;case"Course":n.order_type=7}return e.checkedCouponInfo&&(n.cardcoupon_id=e.checkedCouponInfo.cardcoupon_id),n}function T(){F.totalnum=0,F.orderProducts.productsTotalPrice=0,F.orderProducts.productsTotalScore=0,angular.forEach(F.orderProducts,function(e,t){var i=parseInt(e.num);F.orderProducts.productsTotalPrice+=e.price*i,"undefined"!=typeof e.score&&(F.orderProducts.productsTotalScore+=e.score*i),F.totalnum+=i}),F.orderProducts.productsTotalPrice=p.toFixed(F.orderProducts.productsTotalPrice)}function A(){T(),F.totalPay=F.orderProducts.productsTotalPrice,F.realProductTotalPrice=F.orderProducts.productsTotalPrice,F.realProductTotalScore=F.orderProducts.productsTotalScore}function M(){F.isChecked?B():O()}function B(){var e=F.orderProducts.productsTotalPrice,t=0;if(t=Math.ceil(F.score/F.cash*e),t>F.userInfo.totalscore){F.scoreNeed=F.userInfo.totalscore,F.cashGet=F.userInfo.totalscore*F.cash/F.score;var i=G(e,F.cashGet);F.isAcountChecked?F.userInfo.account_amount>i?(F.useAcount=i,F.totalPay=0):(F.useAcount=F.userInfo.account_amount,F.totalPay=G(i,F.userInfo.account_amount)):(F.userInfo.account_amount>e?F.useAcount=e:F.useAcount=F.userInfo.account_amount,F.totalPay=i)}else F.scoreNeed=t,F.cashGet=e,F.userInfo.account_amount>e?F.useAcount=e:F.useAcount=F.userInfo.account_amount,F.totalPay=0,F.isAcountChecked=!1;R()}function O(){var e=F.orderProducts.productsTotalPrice,t=0;t=Math.ceil(F.score/F.cash*e),t>F.userInfo.totalscore?(F.scoreNeed=F.userInfo.totalscore,F.cashGet=F.userInfo.totalscore*F.cash/F.score):(F.scoreNeed=t,F.cashGet=e),F.isAcountChecked?F.userInfo.account_amount>e?(F.useAcount=e,F.totalPay=0):(F.useAcount=F.userInfo.account_amount,F.totalPay=e-F.userInfo.account_amount,F.totalPay=G(e,F.userInfo.account_amount)):(F.userInfo.account_amount>e?F.useAcount=e:F.useAcount=F.userInfo.account_amount,F.totalPay=e),R()}function z(){n.tomoney().then(function(e){0==e.errcode?0!=e.amount?(F.showScore=2,F.score=e.score,F.cash=e.amount,M()):(F.showScore=1,F.totalPay=F.orderProducts.productsTotalPrice):(alert("获取失败"),F.totalPay=F.orderProducts.productsTotalPrice)})["catch"](function(e){alert(e.msg)})}function R(){F.scoreGet=0,F.getScoreMsg="";var e=C(),t={sku_list:JSON.stringify(F.orderSkus),use_score:e.use_score,use_amount:e.use_amount,cardcoupon_id:e.cardcoupon_id,total_pay:F.totalPay,order_type:e.order_type,groupbuy_type:e.groupbuy_type};v.calcSkuListRebateScore(t).then(function(e){F.scoreGet=e.result.score,0==e.result.rate?F.showCash=1:F.showCash=2})["catch"](function(e){20005==e.errcode&&(F.getScoreMsg="( 全额付款才可获得积分 )")})}function N(e){p.getUserInfo(function(){F.userInfo=a.userInfo,F.customCreaterName||(F.customCreaterName=a.userInfo.truename),F.customCreaterPhone||(F.customCreaterPhone=a.userInfo.phone),(null==a.groupConfig.account_amount_pay_showname||""==a.groupConfig.account_amount_pay_showname)&&(a.groupConfig.account_amount_pay_showname="余额"),a.score_show_name=a.groupConfig.score_show_name,F.groupConfig=a.groupConfig,F.rname=a.groupConfig.rname,F.totalPay=F.orderProducts.productsTotalPrice,z(),"function"==typeof e&&e()},function(){})}function G(e,t){var i,o,a;try{i=e.toString().split(".")[1].length}catch(s){i=0}try{o=t.toString().split(".")[1].length}catch(s){o=0}return a=Math.pow(10,Math.max(i,o)),(e*a-t*a)/a}(o.$$absUrl.match("localhost")||o.$$absUrl.match("192.168."))&&n.login({username:"WXUser201512231014329G7MC",password:"GLFPIDYNLQEZ"}).then(function(e){})["catch"](function(e){}),a.score_show_name="",a.shop_nums=0,a.isWhere="";var U=[],E=new LCalendar,F=e.vm={addressId:s.addressId,extend:!1,acountExtend:!1,userInfo:{},scoreNeed:0,cashGet:0,useAcount:0,totalPay:0,scoreGet:0,isChecked:!1,isAcountChecked:!1,showScore:1,showCash:1,chat:!0,is_shownums:!1,groupType:"",orderProducts:{},orderProductsSort:{},realProductTotalPrice:0,realProductTotalScore:0,freight:0,showFreight:0,isCouponFreight:0,orderSkus:[],totalnum:0,getfreightdata:{},remark:"",freight_remark:"",score:0,cash:1,scoreWill:0,cashWill:1,oldPrice:0,isFirstTime:0,isCanClick:!1,groupConfig:{},isShowAddress:!0,is_cashpay_only:0,is_no_express:1,is_need_name_phone:0,currOrderId:"",currOrderType:0,currOrderProductList:[],claimArrivalTime:"",isNeedClaimArrivalTime:0,rname:"下单人",customCreaterName:"",customCreaterPhone:"",payPanel:{show:!1,payOrderId:0,daiPay:!0}},j=e.vf={is_weixin:m,getShopNums:_,formatSku:y,delNum:b,addNum:w,checknum:D,recalcmoney:k,togetfreight:x,submitOrderAndPay:S,productPrice:A,acountChange:M,getScoreCash:z,getCashScore:R,getUserInfo:N,init:g,dealPayScuss:L,dealPayError:P};p.getSysConfig(function(){g()},function(){}),e.$watch("checkedCouponInfo",function(){if(1==F.isFirstTime&&(F.oldPrice=F.orderProducts.productsTotalPrice),F.isFirstTime++,F.isCouponFreight=0,void 0!=e.checkedCouponInfo){if(""==e.checkedCouponInfo)return void k();F.orderProducts.productsTotalPrice=F.oldPrice,3==e.checkedCouponInfo.cardcoupon_type?F.orderProducts.productsTotalPrice=F.orderProducts.productsTotalPrice-e.checkedCouponInfo.buckle_sub_amount:0==e.checkedCouponInfo.cardcoupon_type?F.orderProducts.productsTotalPrice=F.orderProducts.productsTotalPrice*e.checkedCouponInfo.discount/10:1==e.checkedCouponInfo.cardcoupon_type?F.orderProducts.productsTotalPrice=F.orderProducts.productsTotalPrice-e.checkedCouponInfo.deductible_amount:2==e.checkedCouponInfo.cardcoupon_type&&(F.isCouponFreight=1)}else 0!=F.oldPrice&&(F.orderProducts.productsTotalPrice=F.oldPrice);F.orderProducts.productsTotalPrice<0&&(F.orderProducts.productsTotalPrice=0),F.freight<0&&(F.freight=0),F.orderProducts.productsTotalPrice=p.toFixed(F.orderProducts.productsTotalPrice),M()})}e.$inject=["$scope","$state","$timeout","$location","$rootScope","$stateParams","nAPI","wxAPI","wPopup","wLoading","mAPI","giftpay","commService","sAPI"],angular.module("shop").controller("createOrderController",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n,r,c,d){function l(){if(d.setPageTitle("优惠券详情"),m.couponInfo=JSON.parse(window.localStorage.getItem("couponDetail")),!m.couponInfo)return void zcToUrl("/customize/shop/?v=1.0#/mycoupons");var e="/sharecoupon/"+m.couponInfo.main_cardcoupon_id+"/"+m.couponInfo.cardcoupon_id+"#/sharecoupon/"+m.couponInfo.main_cardcoupon_id+"/"+m.couponInfo.cardcoupon_id,t="http://"+location.hostname+"/customize/shop/?ngroute="+e;n.share({title:"优惠券转赠",desc:"小小礼品，不成敬意，请笑纳！",link:t,imgUrl:"http://open-files.comeoncloud.net/img/ico/cardsharelogo.png"})}function u(){$("#btnShowOfflineConfirm").fadeOut("fast",function(){$("#wrapOfflineConfirm").fadeIn()})}function p(){m.offlineConfirmCode?(o.show("正在核销"),setTimeout(function(){c.offlineConfirm({hexiao_code:m.offlineConfirmCode,cardcoupon_id:m.couponDetailData.cardcoupon_id}).then(function(e){return o.hide(),console.log(e),"undefined"!=typeof e.errcode&&-1==e.errcode?(o.show("核销失败"),void setTimeout(function(){o.hide()},2e3)):void(e.status?r.go("couponDetail",{couponId:m.couponDetailData.cardcoupon_id,cpstate:1}):(o.show(e.msg),setTimeout(function(){o.hide()},2e3)))})},1e3)):(o.show("请输入核销码"),setTimeout(function(){o.hide()},600))}function v(){return""!=m.couponDetailData.weixin_card_id?(alert("该卡券已同步到微信，请到微信卡包转增"),!1):void $(".shareimg").css("display","block")}function g(){$(".shareimg").css("display","none")}var m=s.vm={showWrapOfflineConfirm:t.location.href.match("jikuwifi")?!1:!0,
couponId:e.couponId,couponState:e.cpstate,offlineConfirmCode:"",couponDetailData:{},couponInfo:{}};s.vf={getCouponUrlBtn:v,hideShareImg:g,init:l,showOfflineConfirm:u,offlineConfirm:p};l(),i.getGiveCouponInfo(m.couponId,m.couponInfo.cardcoupon_id).then(function(e){console.log(["获取卡券详情成功",e]),m.couponDetailData=e,e.valid_to=e.valid_to.split(" ")[0],m.overDue=(new Date).getTime()-parseInt(e.valid_to_timestamp),console.log(["vm.overDue",m.overDue]),e.valid_from=e.valid_from.split(" ")[0],e.valid_from=e.valid_from.replace(/\//g,"."),e.valid_to=e.valid_to.split(" ")[0],e.valid_to=e.valid_to.replace(/\//g,".");var t=parseInt(e.valid_to_timestamp)-parseInt((new Date).getTime());t>0?e.valid=!0:e.valid=!1,null===e.limit_type&&(e.limit_type=""),a(function(){for(var e=0;100>e;e++)console.log("hi"),$(".small-white-circle-wrap").append("<div style='width: 2px;height: 2px;border-radius: 2px;background: #fff;float: left;margin:0 0 0 8px;'></div>")})})["catch"](function(e){console.log(["获取卡券详情失败",e])})}e.$inject=["$stateParams","$window","nAPI","wLoading","$timeout","$scope","wxAPI","$state","sAPI","commService"],angular.module("shop").controller("couponDetailCtrl",e)}(),function(){"use strict";function e(e,t,i){function o(t,i){console.log(i),t.errMsg&&t.errMsg.match("chooseWXPay")&&(t.errMsg.match("chooseWXPay:ok")?e.go("paySuccess",i):e.go("payError",i))}var a={dealPayInfo:o};return a}function t(e,t,i){function o(e,t,o){"undefined"!=typeof i.uri&&i.uri&&(e=i.uri+e),$.ajax({type:"get",url:e,dataType:"json",async:!1,data:t,success:function(e){o(e)}})}function a(e){var i={action:"get",express_company_code:"",express_number:""};return i=angular.extend(i,e),t(function(e,t){P("/serv/api/mall/express.ashx",i,e,t)})}function s(e){var i={action:"list",pageindex:1,pagesize:1e4};return i=angular.extend(i,e),t(function(e,t){P("/serv/api/mall/category.ashx",i,e,t)})}function n(e){var i={action:"hexiao"};return i=angular.extend(i,e),t(function(e,t){P("/serv/api/mall/cardcoupon.ashx",i,e,t)})}function r(e){var i={key:"MallHome",property:"shareinfo"};return i=angular.extend(i,e),t(function(e,t){P("/serv/api/component/getkeyconfig.ashx",i,e,t)})}function c(e){var i={action:"CalcSkuListRebateScore"};return i=angular.extend(i,e),t(function(e,t){P("/serv/api/mall/order.ashx",i,e,t)})}function d(e){var i={action:"GetLockScoreList"};return i=angular.extend(i,e),t(function(e,t){P("/serv/api/Score/GetLockScoreList.ashx",i,e,t)})}function l(e){var i={action:"GetTotalLockScore"};return i=angular.extend(i,e),t(function(e,t){P("/serv/api/Score/GetTotalLockScore.ashx",i,e,t)})}function u(e){var i={action:"Get"};return i=angular.extend(i,e),t(function(e,t){P("/serv/api/mall/order.ashx",i,e,t)})}function p(e,i,o){var a={type:"OrderComment",for_id:e,ex_id:i};return a=angular.extend(a,o),t(function(e,t){L("/Serv/API/Review/Add.ashx",a,e,t)})}function v(e,i){var o={rows:1e3,page:1,ex_id:e,type:"OrderComment",status:"1"};return o=angular.extend(o,i),t(function(e,t){P("/Serv/API/Review/List.ashx",o,e,t)})}function g(e){var i={};return i=angular.extend(i,e),t(function(e,t){L("/serv/api/mall/stock/add.ashx",i,e,t)})}function m(e){var i={};return i=angular.extend(i,e),t(function(e,t){L("/Serv/API/User/BindOpenIdPhone.ashx",i,e,t)})}function h(e){var i={};return i=angular.extend(i,e),t(function(e,t){L("/Serv/API/User/Login.ashx",i,e,t)})}function f(){var e={};return t(function(t,i){L("/Serv/API/User/LoginOut.ashx",e,t,i)})}function _(e,i){var o={};return o=angular.extend(o,i),t(function(t,i){L("/Serv/API/User/"+e+"/OAuthCheck.ashx",o,t,i)})}function y(e,i){var o={};return o=angular.extend(o,i),t(function(t,i){L("/Serv/API/User/"+e+"/OAuthBindPhone.ashx",o,t,i)})}function b(e,i){var o={};return o=angular.extend(o,i),t(function(t,i){L(e,o,t,i)})}function w(e){var i={type:e.type,id:e.id};return i=angular.extend(i,e),t(function(e,t){L("/Serv/API/Score/Add.ashx",i,e,t)})}function D(e){var i={action:"BuildAlipayRequest",order_id:e};return t(function(e,t){L("/serv/api/mall/payment.ashx",i,e,t)})}function k(e){var i={action:"Get",order_id:e.order_id,is_replace_pay:e.is_replace_pay};return t(function(e,t){L("/serv/api/mall/order.ashx",i,e,t)})}function x(e){return t(function(t,i){L("/Serv/API/Mall/Order.ashx?action=update",e,t,i)})}function I(e){return t(function(t,i){L("/Serv/API/Mall/Order.ashx?action=CancelUpdate",e,t,i)})}var S={expressInfo:a,pdCatrgory:s,offlineConfirm:n,getMallHomeShareConfig:r,getSync:o,calcSkuListRebateScore:c,getLockScoreList:d,getTotalLockScore:l,getOrderInfo:u,addOrderProductReview:p,getProductReviewList:v,shareAddScore:w,stockSubmit:g,bindPhone:m,getOrderDetail:k,aliPay:D,UpdateOrder:x,CancelUpdate:I,login:h,loginOut:f,oAuthCheck:_,oAuthBindPhone:y,commPost:b};S.commUrl={getUserInfoFieldsUrl:"/Serv/API/Config/GetUserInfoFields.ashx",updatePassword:"/Serv/API/Common/UpdatePassword.ashx",updateInfo:"/Serv/API/User/Update.ashx"};var P=(e.apiUri,e.apiGet),L=e.apiPost;return S}function i(e,t,i,o){return function(a,s){function n(t){function i(){WeixinJSBridge.invoke("getBrandWCPayRequest",t,function(t){"get_brand_wcpay_request:ok"==t.err_msg&&e.go("givegift",{orderID:s})})}"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",i,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",i),document.attachEvent("onWeixinJSBridgeReady",i)):i()}i.show("数据请求中..."),t.odPay_wx(s).then(function(e){0==e.errcode?(console.log(["微信支付成功",e]),i.hide(),n(e.pay_req)):(i.hide(),o.alert(e.errmsg),console.log(["微信支付失败",e]))})["catch"](function(e){i.hide(),console.log(["微信支付请求失败",e])})}}function o(e,t,i,o){return function(a,s,n){function r(e){function i(){WeixinJSBridge.invoke("getBrandWCPayRequest",e,function(e){"get_brand_wcpay_request:ok"==e.err_msg&&t.go("paySuccess",{totalPrice:n,orderid:s})})}"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",i,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",i),document.attachEvent("onWeixinJSBridgeReady",i)):i()}e.alert(data.errmsg),i.show("数据请求中..."),console.log("微信支付"),o.odPay_wx(s).then(function(t){0==t.errcode?(console.log(["微信支付成功",t]),i.hide(),r(t.pay_req)):(i.hide(),e.alert(t.errmsg),console.log(["微信支付失败",t]))})["catch"](function(e){i.hide(),console.log(["微信支付请求失败",e])})}}function a(e,t,i){function o(i,o){"undefined"==typeof e.sysConfig?t.getConfig().then(function(t){t.status&&(e.sysConfig=t.result,i())})["catch"](function(e){o(e)}):i()}function a(i,a,s){"undefined"==typeof e.userInfo||s?t.getuserinfo({}).then(function(t){e.userInfo=t,i()})["catch"](function(e){a(e)}):o(function(){e.sysConfig.is_union_hongware?e.userInfo.is_bind_hongware?i():t.getuserinfo({}).then(function(t){e.userInfo=t,i()})["catch"](function(e){}):i()},function(){})}function s(e){var t=$("body");document.title=e;var i=$('<iframe style="position:relative;width:0px;height:0px;" src="/favicon.ico"></iframe>');i.on("load",function(){setTimeout(function(){i.off("load").remove()},0)}).appendTo(t)}function n(t){o(function(){a(function(){var i=e.sysConfig;if(i.is_union_hongware)if(e.userInfo.is_bind_hongware)t();else{var o,a="http://"+window.location.host+"/customize/shop/";a+="?v=1.0&ngroute=/createOrder#/createOrder";var s={orgCode:i.hongwei_orgcode,callbackUrl:a,openID:e.userInfo.wxOpenId,appID:i.wx_appid};o=HONGWAREDOMAIN+"/hfive/2016/store.html?action="+Base64.encode(JSON.stringify(s))+"#!/register",zcToUrl(o)}else t()},function(){})},function(){})}function r(e){return"undefined"==typeof e&&(e=0),(isNaN(e)||!e)&&(e=0),e=parseFloat(e)}function c(e){return e=r(e),parseFloat(e.toFixed(2))}function d(e){return"undefined"==typeof e?"":null==e?"":e.replace(/(^\s*)|(\s*$)/g,"")}function l(){var e=new Date;e.setTime(-1e3);for(var t=document.cookie,i=t.split("; "),o=0;o<i.length;o++){var a=i[o].split("=");document.cookie=a[0]+"=''; expires="+e.toGMTString()}}return{getSysConfig:o,getUserInfo:a,setPageTitle:s,bindHongwareSubmitAction:n,toFixed:c,numberNullProc:r,delAllCookie:l,trim:d}}e.$inject=["$state","wPopup","giftpay"],t.$inject=["nAPI","$q","CLIENTAPI_CONFIG"],i.$inject=["$state","nAPI","wLoading","wPopup"],o.$inject=["wPopup","$state","wLoading","nAPI"],a.$inject=["$rootScope","nAPI","$q"],angular.module("shop").factory("shopAPI",e).factory("sAPI",t).factory("giftpay",i).factory("payment",o).factory("commService",a)}(),function(){"use strict";function e(e,t,i,o,a,s){function n(){o.basketList("/mall/shoppingcart.ashx",{action:"list"},function(i){if(console.log(["获取购物篮列表成功",i]),0==i.list.length)e.is_shownums=!1;else{e.is_shownums=!0;for(var o in i.list)t.shop_nums+=i.list[o].count,console.log(t.shop_nums)}})}function r(){e.dataloading=!0,o.collectionList("/mall/collect.ashx",{action:"list",pageindex:e.pageindex,pagesize:e.pagesize},function(t){return console.log(["获取收藏的商品列表成功",t]),0==t.list.length?(e.showLinks=!0,void(e.nodata=!1)):(e.showLinks=!1,e.productListData=e.productListData.concat(t.list),void(t.list.length>=e.pagesize?(e.pageindex++,i(function(){e.dataloading=!1})):i(function(){e.dataloading=!0,e.nodata=!0})))},function(e){console.log(["获取商品列表请求失败",e])})}e.MALLCONFIG=s,e.productListData=[],e.pageindex=1,e.pagesize=6,e.dataloading=!1,t.shop_nums=0,n(),r(),e.loadMoreData=function(){e.dataloading||(console.log("到底"),r())},e.goProductDetail=function(e){var t=e.product_id;return"Course"==e.product_type?void zcToUrl("/Customize/YouZheng/Course/Detail.aspx?id="+t):void a.go("productDetail",{id:t})}}e.$inject=["$scope","$rootScope","$timeout","mAPI","$state","MALLCONFIG"],angular.module("shop").controller("collectListCtrl",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n,r,c,d,l){function u(){var e={};L.order_id&&(e.order_id=L.order_id),L.is_order_user&&(e.is_replace_pay=L.is_order_user),l.getOrderDetail(e).then(function(e){L.orderDetail=e,L.totalPay=e.total_amount,L.noFreightTotalPrice=e.total_amount,L.userInfo.id&&(L.needAmount=b(L.userInfo.account_amount,e.total_amount)),L.currOrderType=e.order_type,angular.forEach(L.orderDetail.product_list,function(e,t){var i={sku_id:e.sku_id,count:e.count,product_id:e.product_id,tags:e.tags};L.orderSkus.push(i)}),c.title="请帮我付款",c.desc="体现你我真感情的时刻到了！我看上了商城好货,请帮我付款！！！",c.link=window.location.hostname+"/customize/shop/index.aspx?v=1.0&ngroute=/anotherPay/"+L.order_id+"?isOrderUser=1#/anotherPay/"+L.order_id+"?isOrderUser=1",c.imgUrl=L.orderDetail.product_list[0].img_url,d.share(c)})["catch"](function(e){alert("请求失败")})}function p(){L.showShare=!0}function v(){o.go("orderDetail",{orderID:L.order_id})}function g(){var e={order_id:L.order_id,use_amount:L.useAcount,cardcoupon_id:L.cardcoupon_id};L.isAcountChecked||(e.use_amount=0),L.cardAcount<=0&&(e.cardcoupon_id=0),l.UpdateOrder({data:JSON.stringify(e)}).then(function(t){return console.log("data",t),t.status?t.result.total_amount>0?(L.payPanel.payOrderId=e.order_id,void(L.payPanel.show=!0)):(alert("代付完成"),void u()):void alert(t.msg)})["catch"](function(e){})}function m(){var e={order_id:L.order_id};l.CancelUpdate(e).then(function(e){return console.log("data",e),e.status?(alert("取消代付成功"),void u()):void alert("取消代付失败")})["catch"](function(e){alert("取消代付失败")})}function h(){L.payPanel.show=!1,u()}function f(){L.payPanel.show=!1,u()}function _(){zcToUrl("/customize/comeoncloud/Index.aspx?key=MallHome")}function y(){r.getUserInfo(function(){L.userInfo=i.userInfo,L.orderDetail.order_id&&(L.needAmount=b(L.userInfo.account_amount,L.orderDetail.total_amount)),i.score_show_name=i.groupConfig.score_show_name},function(){})}function b(e,t){var i=e-t;return i>0?t:e}function w(){D()}function D(){L.isAcountChecked?L.useAcount=L.needAmount:L.useAcount=0,I(),S()}function k(){s.getGroupByConfig().then(function(e){e.status?e.result.malll.order_cancel_minute&&"0"!=e.result.malll.order_cancel_minute?L.orderCancelMinute=e.result.malll.order_cancel_minute:L.orderCancelMinute=240:wPopup.alert(e.msg)})["catch"](function(e){wPopup.alert("获取请求失败")})}function x(e){e?(L.cardcoupon_id=e.cardcoupon_id,L.cardAcount=e.deductible_amount):L.cardAcount=0,I(),S()}function I(){if(!L.isAcountChecked){var e=L.orderDetail.total_amount-L.useAcount-L.cardAcount;L.needAmount=b(L.userInfo.account_amount,e)}}function S(){L.totalPay=L.orderDetail.total_amount-L.useAcount-L.cardAcount,L.totalPay<0&&(L.totalPay=0)}function P(){y(),u(),k(),r.setPageTitle("代付详情")}var L=t.vm={order_id:e.orderId,is_order_user:e.isOrderUser,orderDetail:{},showShare:!1,i_height:document.body.scrollHeight,acountExtend:!1,userInfo:{},cashGet:0,isChecked:!1,isAcountChecked:!1,scoreNeed:0,needAmount:0,useAcount:0,cardAcount:0,totalPay:0,noFreightTotalPrice:0,btnIsShow:0,orderCancelMinute:"",cardcoupon_id:0,score:0,cash:1,groupType:"",showName:"储值卡",currOrderType:"",orderSkus:[],payPanel:{show:!1,payOrderId:0}};t.vf={getOrderInfo:u,sendFriends:p,gotoOrderDetail:v,acountChange:w,checkAmount:x,gotoIndexPage:_,paySubmit:g,CancelUpdate:m,dealPayScuss:h,dealPayError:f};P()}e.$inject=["$stateParams","$scope","$rootScope","$state","mAPI","nAPI","$timeout","commService","shopInfo","wxAPI","sAPI"],angular.module("shop").controller("anotherPayController",e)}(),function(){"use strict";function e(e,t,i,o,a,s,n,r,c){function d(){l(0,!0)}function l(e,t){n.getUserInfo(function(){t&&(b.id=i.userInfo.id),t&&(b.phone=i.userInfo.phone),t&&(b.unionid=i.userInfo.unionid),(!t||b.id&&b.phone)&&s(function(){b.backUserCenter?zcToUrl("/customize/comeoncloud/Index.aspx?key=PersonalCenter"):zcBack()},1e3*e)},function(){})}function u(){zcToUrl("/customize/comeoncloud/Index.aspx?key=MallHome")}function p(){return b.phone?b.password?(b.loginLayer=layer.open({type:2,content:"登录中"}),void r.login({username:b.phone,password:b.password}).then(function(e){layer.close(b.loginLayer),0==e.errcode&&(zcAlert("登录成功"),l(2))})["catch"](function(e){layer.close(b.loginLayer),zcAlert(e.errmsg)})):void alert("请输入密码"):void alert("请输入手机号")}function v(e){if(window.plus){var t=plus.webview.getLaunchWebview();t.evalJS("loginOAuth('"+e+"');")}else zcAlert("暂时仅支持app授权")}function g(e){b.userInfo=e.userInfo,b.oauthId=e.id;var t={};"weixin"==b.oauthId&&(t.openid=b.userInfo.openid,t.unionid=b.userInfo.unionid,t.city=b.userInfo.city,t.country=b.userInfo.country,t.headimgurl=b.userInfo.headimgurl,t.nickname=b.userInfo.nickname,t.language=b.userInfo.language,t.province=b.userInfo.province,t.privilege=angular.toJson(b.userInfo.privilege)),b.loginLayer=layer.open({type:2,content:"登录中"}),r.oAuthCheck(b.oauthId,t).then(function(e){layer.close(b.loginLayer),e.status?(zcAlert("登录成功"),l(2)):b.unionid=t.unionid})["catch"](function(e){layer.close(b.loginLayer)})}function m(){if(!b.phone)return void alert("请输入手机号");if(!b.code)return void alert("请输入验证码");var e=b.isreg?"注册":"绑定";if(b.unionid){var t={};"weixin"==b.oauthId&&(t.phone=b.phone,t.code=b.code,t.openid=b.userInfo.openid,t.unionid=b.userInfo.unionid,t.city=b.userInfo.city,t.country=b.userInfo.country,t.headimgurl=b.userInfo.headimgurl,t.nickname=b.userInfo.nickname,t.language=b.userInfo.language,t.province=b.userInfo.province,t.privilege=angular.toJson(b.userInfo.privilege)),console.log("开始"+e),b.loginLayer=layer.open({type:2,content:e+"中"}),r.oAuthBindPhone(b.oauthId,t).then(function(t){layer.close(b.loginLayer),t.status?(zcAlert(e+"成功"),l(2)):zcAlert(t.msg)})["catch"](function(e){layer.close(b.loginLayer),zcAlert(e.msg)})}else console.log("开始"+e),b.loginLayer=layer.open({type:2,content:e+"中"}),r.bindPhone({phone:b.phone,code:b.code,password:b.password}).then(function(t){layer.close(b.loginLayer),t.status?(zcAlert(e+"成功"),l(2)):zcAlert(t.msg)})["catch"](function(e){layer.close(b.loginLayer),zcAlert(e.msg)})}function h(){if(!b.isShowWait){if(!b.phone)return void alert("请输入手机号");b.isShowWait=!0,a.getSMSCode({phone:b.phone}).then(function(e){console.log("验证码",e),e.status?(b.isShowWait=!0,f()):(b.isShowWait=!1,alert(e.msg))})["catch"](function(e){console.log("验证码失败",e),b.isShowWait=!1})}}function f(){b.waitTime=60,b.waitForSMSCodeTimer=c(function(){b.waitTime<=0||!b.isShowWait?(c.cancel(b.waitForSMSCodeTimer),b.isShowWait=!1,b.waitTime=0):b.waitTime--},1e3,0)}function _(){i.goUrl("#/forgetPassword/")}function y(){b.isreg=!0}var b=t.vm={isShowWait:!1,waitTime:60,isreg:!1,oauthId:"",unionid:"",id:"",userInfo:{},phone:"",password:"",code:"",loginLayer:-1,backUserCenter:e.backUserCenter};t.vf={init:d,getSMSCode:h,waitForSMSCode:f,bindPhone:m,login:p,goHome:u,goForgetPassword:_,goRegister:y,oAuthLogin:v,oAuthResult:g}}e.$inject=["$stateParams","$scope","$rootScope","mAPI","nAPI","$timeout","commService","sAPI","$interval"],angular.module("shop").controller("bindPhoneController",e)}(),function(){"use strict";function e(e,i,o,a,s,n,r,c){t(e),window.location.href.indexOf("songhe")>-1?e.isSonghe=!0:e.isSonghe=!1;var d=navigator.userAgent.toLowerCase();e.isQQBrowser=d.indexOf("mqqbrowser")>=0,e.isWeixinBrowser=d.indexOf("micromessenger")>=0,e.isPlus=d.indexOf("html5plus")>=0,angular.element("title").html(a.title),window.alert=function(e){c.show(e),setTimeout(function(){c.hide()},1200)},"$$$MallConfig$$$"!=MALLCONFIG?(e.mallConfig=MALLCONFIG.mallconfignew,e.websiteVersion=MALLCONFIG.mallconfignew.website_version,MALLCONFIG.mallconfignew.product_img_ratio1&&MALLCONFIG.mallconfignew.product_img_ratio2?e.scale=Number(MALLCONFIG.mallconfignew.product_img_ratio1)/Number(MALLCONFIG.mallconfignew.product_img_ratio2):e.scale=1):e.scale=1,e.img_width=angular.element(s).width(),e.img_height=parseInt(e.img_width/e.scale),e.img_last="?x-oss-process=image/resize,m_pad,h_"+e.img_height+",w_"+e.img_width,r.getuserinfo({}).then(function(t){e.userInfo=t})["catch"](function(e){}),r.getConfig().then(function(t){t.status&&(e.groupConfig=t.result.malll,e.sysConfig=t.result)})["catch"](function(e){}),location.hostname.match("localhost")||location.hostname.match("192.168.")?e.mainsiteurl="http://localhost:28241":e.mainsiteurl=location.origin,s.location.href.match("localhost")||s.location.href.match("192.168.1")||e.$on("$stateChangeStart",function(e,t,i,o,a){n.mycenternochange||($("html").removeClass("sidebar-move"),"home"==t.name?zcToUrl("/customize/comeoncloud/Index.aspx?key=MallHome"):"infoCenter"==t.name&&zcToUrl("/customize/comeoncloud/Index.aspx?key=PersonalCenter"))})}function t(e){e.goUrl=function(e){e&&(0==e.indexOf("#")?window.location.hash=e:zcToUrl(e))}}e.$inject=["$rootScope","$location","$log","shopInfo","$window","SHOP_UI","nAPI","wLoading"],angular.module("shop").run(e)}(),function(){"use strict";function e(){this.$get=function(){return 0},this.setrouter=!0,this.router=i}function t(e,t,i){if(console.log(["SHOP_CONFIGProvider",i]),i.setrouter)for(var o in i.router)e.state(o,i.router[o]);t.otherwise("/home")}t.$inject=["$stateProvider","$urlRouterProvider","SHOP_CONFIGProvider"],angular.module("shop").provider("SHOP_CONFIG",e).config(t);var i={home:{url:"/home",templateUrl:"app/home/home.html",controller:"homeController",controllerAs:"pdlist"},productList:{url:"/productList?catID&navName&keywordID&colorID&sizeID&updownID&tagID",templateUrl:"app/productList/productList.html",controller:"productListController",controllerAs:"pdlist"},productDetail:{url:"/productDetail/:id",templateUrl:"app/productDetail/productDetail.html",controller:"productDetailController",controllerAs:"productDetail"},groupForGoodsDetail:{url:"/groupForGoodsDetail/:goodsId",templateUrl:"app/groupForGoods/groupForGoodsDetail/groupForGoodsDetail.html",controller:"groupForGoodsDetailCtrl",controllerAs:"vm"},groupForGoodsList:{url:"/groupForGoodsList",templateUrl:"app/groupForGoods/groupForGoodsList/groupForGoodsList.html",controller:"groupForGoodsListCtrl",controllerAs:"vm"},groupGoodsList:{url:"/groupGoodsList",templateUrl:"app/groupForGoods/groupGoodsList/groupGoodsList.html",controller:"groupGoodsListCtrl",controllerAs:"vm"},waitForGroupDetail:{url:"/waitForGroupDetail/:goodsGroupId",templateUrl:"app/groupForGoods/waitForGroupDetail/waitForGroupDetail.html",controller:"waitForGroupDetailCtrl",controllerAs:"vm"},saleList:{url:"/saleList",templateUrl:"app/saleList/saleList.html",controller:"saleListCtrl",controllerAs:"vm"},orderList:{url:"/orderList?status",templateUrl:"app/orderList/orderList.html",controller:"orderListController",controllerAs:"vm"},orderDetail:{url:"/orderDetail/:orderID",templateUrl:"app/orderDetail/orderDetail.html",controller:"orderDetailController",controllerAs:"vm"},orderReview:{url:"/orderReview/:orderId",templateUrl:"app/orderReview/orderReview.html",controller:"orderReviewController"},createOrder:{url:"/createOrder?addressId",templateUrl:"app/createOrder/createOrderNew.html",controller:"createOrderController"},shopBasket:{url:"/shopBasket",templateUrl:"app/shopBasket/shopBasket.html",controller:"shopBasketController",controllerAs:"shopBasket"},paySuccess:{url:"/paySuccess/:totalPrice/:orderid",templateUrl:"app/paySuccess/paySuccess.html",controller:"paySuccessCtrl"},payError:{url:"/payError/:totalPrice/:orderid",templateUrl:"app/paySuccess/payError.html",controller:"paySuccessCtrl"},receiveAddress:{url:"/receiveAddress",templateUrl:"app/receiveAddress/receiveAddress.html",controller:"receiveAddressController"},receiveAddressUpdata:{url:"/receiveAddress/:addressId",templateUrl:"app/receiveAddress/receiveAddress.html",controller:"receiveAddressController"},receiveAddressList:{url:"/receiveAddressList?siteName&siteparams",templateUrl:"app/receiveAddressList/receiveAddressList.html",controller:"receiveAddressListController"},infoCenter:{url:"/infoCenter",templateUrl:"app/infoCenter/infoCenter.html",controller:"infoCenterController",controllerAs:"vm"},applyRefund:{url:"/applyRefund/:orderId/:orderDetailId/:update",templateUrl:"app/returnGoods/applyRefund/applyRefund.html",controller:"applyRefundCtrl"},refundState:{url:"/refundState/:orderId/:orderDetailId",templateUrl:"app/returnGoods/refundState/refundState.html",controller:"refundStateCtrl"},returnLogistics:{url:"/returnLogistics/:orderId/:orderDetailId",templateUrl:"app/returnGoods/returnLogistics/returnLogistics.html",controller:"returnLogisticsCtrl"},refundDestination:{url:"/refundDestination/:orderId/:orderDetailId",templateUrl:"app/returnGoods/refundDestination/refundDestination.html",controller:"refundDestinationCtrl"},refundLog:{url:"/refundLog/:orderDetailId",templateUrl:"app/returnGoods/refundLog/refundLog.html",controller:"refundLogCtrl"},collectList:{url:"/collectList",templateUrl:"app/collectList/collectList.html",controller:"collectListCtrl"},userMange:{url:"/userMange",templateUrl:"app/userMange/userMange.html",controller:"userMangeCtrl"},myscores:{url:"/myscores",templateUrl:"app/myscores/myscores.html",controller:"myscoresCtrl"},lockscores:{url:"/lockscores",templateUrl:"app/lockScoreList/lockScoreList.html",controller:"lockScoreListCtrl"},myamounts:{url:"/myscores/:is_amount",templateUrl:"app/myscores/myscores.html",controller:"myscoresCtrl"},mycoupons:{url:"/mycoupons",templateUrl:"app/mycoupons/mycoupons.html",controller:"mycouponsCtrl"},getcoupon:{url:"/getcoupon/:cp_ids",templateUrl:"app/getcoupon/getcoupon.html",controller:"getcouponCtrl",controllerAs:"vm"},sharecoupon:{url:"/sharecoupon/:cp_ids/:userCoupinId",templateUrl:"app/getOthersCoupon/getOthersCoupon.html",controller:"getOthersCouponCtrl"},couponDetail:{url:"/couponDetail/:couponId/:cpstate",templateUrl:"app/couponDetail/couponDetail.html",controller:"couponDetailCtrl"},expressInfo:{url:"/expressInfo/:orderId",templateUrl:"app/expressInfo/expressInfo.html",controller:"expressInfoCtrl",controllerAs:"vm"},paygift:{url:"/paygift",templateUrl:"app/gift/paygift/paygift.html",controller:"paygiftCtrl",controllerAs:"vm"},givegift:{url:"/givegift/:orderID",templateUrl:"app/gift/givegift/givegift.html",controller:"givegiftCtrl",controllerAs:"vm"},getgift:{url:"/getgift/:giftID?addressId",templateUrl:"app/gift/getgift/getgift.html",controller:"getgiftCtrl",controllerAs:"vm"},giftorderlist:{url:"/giftorderlist/:ID",templateUrl:"app/giftorderlist/giftorderlist.html",controller:"giftorderlistCtrl",controllerAs:"vm"},bindPhone:{url:"/bindPhone/:backUserCenter",templateUrl:"app/bindPhone/bindPhone.html",controller:"bindPhoneController"},anotherPay:{url:"/anotherPay/:orderId?isOrderUser",templateUrl:"app/anotherPay/anotherPay.html",controller:"anotherPayController"},userInfo:{url:"/userInfo",templateUrl:"app/userMange/userInfo/userInfo.html",controller:"userInfoCtrl"},forgetPassword:{url:"/forgetPassword/:isLogin",templateUrl:"app/userMange/forgetPassword/forgetPassword.html",controller:"forgetPasswordCtrl"},userUpdate:{url:"/userUpdate/:upt",templateUrl:"app/userMange/userUpdate/userUpdate.html",controller:"userUpdateCtrl"}}}(),function(){"use strict";function e(){var e={infoCenter:{footerbar:!0,btnstyle:1}};return e}"$$$MallConfig$$$"===MALLCONFIG&&(MALLCONFIG={mallconfignew:{mall_name:"至云玩微信商城——好玩，研究微信的商城",mall_desc:"至云玩微信商城——好玩，研究微信的商城",mall_logo:"http://open-files.comeoncloud.net/www/comeoncloud/jubit/image/20151201/603267469092451AA2434FEC5BC163E0.png",product_img_ratio1:"600",product_img_ratio2:"600",nav_group_name:null,slide_name:"333",foottool:"",is_member:!1,is_show_oldprice:!1,is_show_stock:!0,access_level:0,apply_url:"/App/Member/Wap/PhoneVerify.aspx",nopms_url:"/error/nopms.htm",website_version:"高级分销版",my_cardcoupons_title:""}}),angular.module("shop").constant("malarkey",malarkey).constant("moment",moment).constant("MALLCONFIG",MALLCONFIG).constant("SHOP_UI",e()).constant("CLIENTAPI_CONFIG",{uri:"http://dev1.comeoncloud.net",debug:!1,wxdebug:!1}).constant("shopInfo",{title:MALLCONFIG.mallconfignew.mall_name,desc:MALLCONFIG.mallconfignew.mall_desc,imgUrl:MALLCONFIG.mallconfignew.mall_logo,link:""})}(),function(){"use strict";function e(e,t){e.debugEnabled(!0),t.allowHtml=!0,t.timeOut=3e3,t.positionClass="toast-top-right",t.preventDuplicates=!0,t.progressBar=!0}e.$inject=["$logProvider","toastrConfig"],angular.module("shop").config(e)}(),/*! iScroll v5.1.3 ~ (c) 2008-2014 Matteo Spinelli ~ http://cubiq.org/license */
function(e,t,i){function o(e,i){this.wrapper="string"==typeof e?t.querySelector(e):e,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var o in i)this.options[o]=i[o];this.translateZ=this.options.HWCompositing&&r.hasPerspective?" translateZ(0)":"",this.options.useTransition=r.hasTransition&&this.options.useTransition,this.options.useTransform=r.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?r.ease[this.options.bounceEasing]||r.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function a(e,i,o){var a=t.createElement("div"),s=t.createElement("div");return o===!0&&(a.style.cssText="position:absolute;z-index:9999",s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),s.className="iScrollIndicator","h"==e?(o===!0&&(a.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",s.style.height="100%"),a.className="iScrollHorizontalScrollbar"):(o===!0&&(a.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",s.style.width="100%"),a.className="iScrollVerticalScrollbar"),a.style.cssText+=";overflow:hidden",i||(a.style.pointerEvents="none"),a.appendChild(s),a}function s(i,o){this.wrapper="string"==typeof o.el?t.querySelector(o.el):o.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=i,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var a in o)this.options[a]=o[a];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(r.addEvent(this.indicator,"touchstart",this),r.addEvent(e,"touchend",this)),this.options.disablePointer||(r.addEvent(this.indicator,r.prefixPointerEvent("pointerdown"),this),r.addEvent(e,r.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(r.addEvent(this.indicator,"mousedown",this),r.addEvent(e,"mouseup",this))),this.options.fade&&(this.wrapperStyle[r.style.transform]=this.scroller.translateZ,this.wrapperStyle[r.style.transitionDuration]=r.isBadAndroid?"0.001s":"0ms",this.wrapperStyle.opacity="0")}var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)},r=function(){function o(e){return n===!1?!1:""===n?e:n+e.charAt(0).toUpperCase()+e.substr(1)}var a={},s=t.createElement("div").style,n=function(){for(var e,t=["t","webkitT","MozT","msT","OT"],i=0,o=t.length;o>i;i++)if(e=t[i]+"ransform",e in s)return t[i].substr(0,t[i].length-1);return!1}();a.getTime=Date.now||function(){return(new Date).getTime()},a.extend=function(e,t){for(var i in t)e[i]=t[i]},a.addEvent=function(e,t,i,o){e.addEventListener(t,i,!!o)},a.removeEvent=function(e,t,i,o){e.removeEventListener(t,i,!!o)},a.prefixPointerEvent=function(t){return e.MSPointerEvent?"MSPointer"+t.charAt(9).toUpperCase()+t.substr(10):t},a.momentum=function(e,t,o,a,s,n){var r,c,d=e-t,l=i.abs(d)/o;return n=void 0===n?6e-4:n,r=e+l*l/(2*n)*(0>d?-1:1),c=l/n,a>r?(r=s?a-s/2.5*(l/8):a,d=i.abs(r-e),c=d/l):r>0&&(r=s?s/2.5*(l/8):0,d=i.abs(e)+r,c=d/l),{destination:i.round(r),duration:c}};var r=o("transform");return a.extend(a,{hasTransform:r!==!1,hasPerspective:o("perspective")in s,hasTouch:"ontouchstart"in e,hasPointer:e.PointerEvent||e.MSPointerEvent,hasTransition:o("transition")in s}),a.isBadAndroid=/Android /.test(e.navigator.appVersion)&&!/Chrome\/\d/.test(e.navigator.appVersion),a.extend(a.style={},{transform:r,transitionTimingFunction:o("transitionTimingFunction"),transitionDuration:o("transitionDuration"),transitionDelay:o("transitionDelay"),transformOrigin:o("transformOrigin")}),a.hasClass=function(e,t){var i=new RegExp("(^|\\s)"+t+"(\\s|$)");return i.test(e.className)},a.addClass=function(e,t){if(!a.hasClass(e,t)){var i=e.className.split(" ");i.push(t),e.className=i.join(" ")}},a.removeClass=function(e,t){if(a.hasClass(e,t)){var i=new RegExp("(^|\\s)"+t+"(\\s|$)","g");e.className=e.className.replace(i," ")}},a.offset=function(e){for(var t=-e.offsetLeft,i=-e.offsetTop;e=e.offsetParent;)t-=e.offsetLeft,i-=e.offsetTop;return{left:t,top:i}},a.preventDefaultException=function(e,t){for(var i in t)if(t[i].test(e[i]))return!0;return!1},a.extend(a.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),a.extend(a.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(e){return i.sqrt(1- --e*e)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(e){var t=4;return(e-=1)*e*((t+1)*e+t)+1}},bounce:{style:"",fn:function(e){return(e/=1)<1/2.75?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},elastic:{style:"",fn:function(e){var t=.22,o=.4;return 0===e?0:1==e?1:o*i.pow(2,-10*e)*i.sin((e-t/4)*(2*i.PI)/t)+1}}}),a.tap=function(e,i){var o=t.createEvent("Event");o.initEvent(i,!0,!0),o.pageX=e.pageX,o.pageY=e.pageY,e.target.dispatchEvent(o)},a.click=function(e){var i,o=e.target;/(SELECT|INPUT|TEXTAREA)/i.test(o.tagName)||(i=t.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,e.view,1,o.screenX,o.screenY,o.clientX,o.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),i._constructed=!0,o.dispatchEvent(i))},a}();o.prototype={version:"5.1.3",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(e){e.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(e){if((1==r.eventType[e.type]||0===e.button)&&this.enabled&&(!this.initiated||r.eventType[e.type]===this.initiated)){!this.options.preventDefault||r.isBadAndroid||r.preventDefaultException(e.target,this.options.preventDefaultException)||e.preventDefault();var t,o=e.touches?e.touches[0]:e;this.initiated=r.eventType[e.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=r.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,t=this.getComputedPosition(),this._translate(i.round(t.x),i.round(t.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=o.pageX,this.pointY=o.pageY,this._execEvent("beforeScrollStart")}},_move:function(e){if(this.enabled&&r.eventType[e.type]===this.initiated){this.options.preventDefault&&e.preventDefault();var t,o,a,s,n=e.touches?e.touches[0]:e,c=n.pageX-this.pointX,d=n.pageY-this.pointY,l=r.getTime();if(this.pointX=n.pageX,this.pointY=n.pageY,this.distX+=c,this.distY+=d,a=i.abs(this.distX),s=i.abs(this.distY),!(l-this.endTime>300&&10>a&&10>s)){if(this.directionLocked||this.options.freeScroll||(a>s+this.options.directionLockThreshold?this.directionLocked="h":s>=a+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)e.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);d=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)e.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);c=0}c=this.hasHorizontalScroll?c:0,d=this.hasVerticalScroll?d:0,t=this.x+c,o=this.y+d,(t>0||t<this.maxScrollX)&&(t=this.options.bounce?this.x+c/3:t>0?0:this.maxScrollX),(o>0||o<this.maxScrollY)&&(o=this.options.bounce?this.y+d/3:o>0?0:this.maxScrollY),this.directionX=c>0?-1:0>c?1:0,this.directionY=d>0?-1:0>d?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(t,o),l-this.startTime>300&&(this.startTime=l,this.startX=this.x,this.startY=this.y)}}},_end:function(e){if(this.enabled&&r.eventType[e.type]===this.initiated){this.options.preventDefault&&!r.preventDefaultException(e.target,this.options.preventDefaultException)&&e.preventDefault();var t,o,a=(e.changedTouches?e.changedTouches[0]:e,r.getTime()-this.startTime),s=i.round(this.x),n=i.round(this.y),c=i.abs(s-this.startX),d=i.abs(n-this.startY),l=0,u="";if(this.isInTransition=0,this.initiated=0,this.endTime=r.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(s,n),!this.moved)return this.options.tap&&r.tap(e,this.options.tap),this.options.click&&r.click(e),void this._execEvent("scrollCancel");if(this._events.flick&&200>a&&100>c&&100>d)return void this._execEvent("flick");if(this.options.momentum&&300>a&&(t=this.hasHorizontalScroll?r.momentum(this.x,this.startX,a,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:s,duration:0},o=this.hasVerticalScroll?r.momentum(this.y,this.startY,a,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:n,duration:0},s=t.destination,n=o.destination,l=i.max(t.duration,o.duration),this.isInTransition=1),this.options.snap){var p=this._nearestSnap(s,n);this.currentPage=p,l=this.options.snapSpeed||i.max(i.max(i.min(i.abs(s-p.x),1e3),i.min(i.abs(n-p.y),1e3)),300),s=p.x,n=p.y,this.directionX=0,this.directionY=0,u=this.options.bounceEasing}return s!=this.x||n!=this.y?((s>0||s<this.maxScrollX||n>0||n<this.maxScrollY)&&(u=r.ease.quadratic),void this.scrollTo(s,n,l,u)):void this._execEvent("scrollEnd")}}},_resize:function(){var e=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){e.refresh()},this.options.resizePolling)},resetPosition:function(e){var t=this.x,i=this.y;return e=e||0,!this.hasHorizontalScroll||this.x>0?t=0:this.x<this.maxScrollX&&(t=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),t==this.x&&i==this.y?!1:(this.scrollTo(t,i,e,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=r.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},off:function(e,t){if(this._events[e]){var i=this._events[e].indexOf(t);i>-1&&this._events[e].splice(i,1)}},_execEvent:function(e){if(this._events[e]){var t=0,i=this._events[e].length;if(i)for(;i>t;t++)this._events[e][t].apply(this,[].slice.call(arguments,1))}},scrollBy:function(e,t,i,o){e=this.x+e,t=this.y+t,i=i||0,this.scrollTo(e,t,i,o)},scrollTo:function(e,t,i,o){o=o||r.ease.circular,this.isInTransition=this.options.useTransition&&i>0,!i||this.options.useTransition&&o.style?(this._transitionTimingFunction(o.style),this._transitionTime(i),this._translate(e,t)):this._animate(e,t,i,o.fn)},scrollToElement:function(e,t,o,a,s){if(e=e.nodeType?e:this.scroller.querySelector(e)){var n=r.offset(e);n.left-=this.wrapperOffset.left,n.top-=this.wrapperOffset.top,o===!0&&(o=i.round(e.offsetWidth/2-this.wrapper.offsetWidth/2)),a===!0&&(a=i.round(e.offsetHeight/2-this.wrapper.offsetHeight/2)),n.left-=o||0,n.top-=a||0,n.left=n.left>0?0:n.left<this.maxScrollX?this.maxScrollX:n.left,n.top=n.top>0?0:n.top<this.maxScrollY?this.maxScrollY:n.top,t=void 0===t||null===t||"auto"===t?i.max(i.abs(this.x-n.left),i.abs(this.y-n.top)):t,this.scrollTo(n.left,n.top,t,s)}},_transitionTime:function(e){if(e=e||0,this.scrollerStyle[r.style.transitionDuration]=e+"ms",!e&&r.isBadAndroid&&(this.scrollerStyle[r.style.transitionDuration]="0.001s"),this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTime(e)},_transitionTimingFunction:function(e){if(this.scrollerStyle[r.style.transitionTimingFunction]=e,this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTimingFunction(e)},_translate:function(e,t){if(this.options.useTransform?this.scrollerStyle[r.style.transform]="translate("+e+"px,"+t+"px)"+this.translateZ:(e=i.round(e),t=i.round(t),this.scrollerStyle.left=e+"px",this.scrollerStyle.top=t+"px"),this.x=e,this.y=t,this.indicators)for(var o=this.indicators.length;o--;)this.indicators[o].updatePosition()},_initEvents:function(t){var i=t?r.removeEvent:r.addEvent,o=this.options.bindToWrapper?this.wrapper:e;i(e,"orientationchange",this),i(e,"resize",this),this.options.click&&i(this.wrapper,"click",this,!0),this.options.disableMouse||(i(this.wrapper,"mousedown",this),i(o,"mousemove",this),i(o,"mousecancel",this),i(o,"mouseup",this)),r.hasPointer&&!this.options.disablePointer&&(i(this.wrapper,r.prefixPointerEvent("pointerdown"),this),i(o,r.prefixPointerEvent("pointermove"),this),i(o,r.prefixPointerEvent("pointercancel"),this),i(o,r.prefixPointerEvent("pointerup"),this)),r.hasTouch&&!this.options.disableTouch&&(i(this.wrapper,"touchstart",this),i(o,"touchmove",this),i(o,"touchcancel",this),i(o,"touchend",this)),i(this.scroller,"transitionend",this),i(this.scroller,"webkitTransitionEnd",this),i(this.scroller,"oTransitionEnd",this),i(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var t,i,o=e.getComputedStyle(this.scroller,null);return this.options.useTransform?(o=o[r.style.transform].split(")")[0].split(", "),t=+(o[12]||o[4]),i=+(o[13]||o[5])):(t=+o.left.replace(/[^-\d.]/g,""),i=+o.top.replace(/[^-\d.]/g,"")),{x:t,y:i}},_initIndicators:function(){function e(e){for(var t=r.indicators.length;t--;)e.call(r.indicators[t])}var t,i=this.options.interactiveScrollbars,o="string"!=typeof this.options.scrollbars,n=[],r=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(t={el:a("v",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:o,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(t.el),n.push(t)),this.options.scrollX&&(t={el:a("h",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:o,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(t.el),n.push(t))),this.options.indicators&&(n=n.concat(this.options.indicators));for(var c=n.length;c--;)this.indicators.push(new s(this,n[c]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){e(function(){this.fade()})}),this.on("scrollCancel",function(){e(function(){this.fade()})}),this.on("scrollStart",function(){e(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){e(function(){this.fade(1,!0)})})),this.on("refresh",function(){e(function(){this.refresh()})}),this.on("destroy",function(){e(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){r.addEvent(this.wrapper,"wheel",this),r.addEvent(this.wrapper,"mousewheel",this),r.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){r.removeEvent(this.wrapper,"wheel",this),r.removeEvent(this.wrapper,"mousewheel",this),r.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(e){if(this.enabled){e.preventDefault(),e.stopPropagation();var t,o,a,s,n=this;if(void 0===this.wheelTimeout&&n._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){n._execEvent("scrollEnd"),n.wheelTimeout=void 0},400),"deltaX"in e)1===e.deltaMode?(t=-e.deltaX*this.options.mouseWheelSpeed,o=-e.deltaY*this.options.mouseWheelSpeed):(t=-e.deltaX,o=-e.deltaY);else if("wheelDeltaX"in e)t=e.wheelDeltaX/120*this.options.mouseWheelSpeed,o=e.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in e)t=o=e.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in e))return;t=o=-e.detail/3*this.options.mouseWheelSpeed}if(t*=this.options.invertWheelDirection,o*=this.options.invertWheelDirection,this.hasVerticalScroll||(t=o,o=0),this.options.snap)return a=this.currentPage.pageX,s=this.currentPage.pageY,t>0?a--:0>t&&a++,o>0?s--:0>o&&s++,void this.goToPage(a,s);a=this.x+i.round(this.hasHorizontalScroll?t:0),s=this.y+i.round(this.hasVerticalScroll?o:0),a>0?a=0:a<this.maxScrollX&&(a=this.maxScrollX),s>0?s=0:s<this.maxScrollY&&(s=this.maxScrollY),this.scrollTo(a,s,0)}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var e,t,o,a,s,n,r=0,c=0,d=0,l=this.options.snapStepX||this.wrapperWidth,u=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(o=i.round(l/2),a=i.round(u/2);d>-this.scrollerWidth;){for(this.pages[r]=[],e=0,s=0;s>-this.scrollerHeight;)this.pages[r][e]={x:i.max(d,this.maxScrollX),y:i.max(s,this.maxScrollY),width:l,height:u,cx:d-o,cy:s-a},s-=u,e++;d-=l,r++}else for(n=this.options.snap,e=n.length,t=-1;e>r;r++)(0===r||n[r].offsetLeft<=n[r-1].offsetLeft)&&(c=0,t++),this.pages[c]||(this.pages[c]=[]),d=i.max(-n[r].offsetLeft,this.maxScrollX),s=i.max(-n[r].offsetTop,this.maxScrollY),o=d-i.round(n[r].offsetWidth/2),a=s-i.round(n[r].offsetHeight/2),this.pages[c][t]={x:d,y:s,width:n[r].offsetWidth,height:n[r].offsetHeight,cx:o,cy:a},d>this.maxScrollX&&c++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var e=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.x-this.startX),1e3),i.min(i.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,e)})},_nearestSnap:function(e,t){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var o=0,a=this.pages.length,s=0;if(i.abs(e-this.absStartX)<this.snapThresholdX&&i.abs(t-this.absStartY)<this.snapThresholdY)return this.currentPage;for(e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),t>0?t=0:t<this.maxScrollY&&(t=this.maxScrollY);a>o;o++)if(e>=this.pages[o][0].cx){e=this.pages[o][0].x;break}for(a=this.pages[o].length;a>s;s++)if(t>=this.pages[0][s].cy){t=this.pages[0][s].y;break}return o==this.currentPage.pageX&&(o+=this.directionX,0>o?o=0:o>=this.pages.length&&(o=this.pages.length-1),e=this.pages[o][0].x),s==this.currentPage.pageY&&(s+=this.directionY,0>s?s=0:s>=this.pages[0].length&&(s=this.pages[0].length-1),t=this.pages[0][s].y),{x:e,y:t,pageX:o,pageY:s}},goToPage:function(e,t,o,a){a=a||this.options.bounceEasing,e>=this.pages.length?e=this.pages.length-1:0>e&&(e=0),t>=this.pages[e].length?t=this.pages[e].length-1:0>t&&(t=0);var s=this.pages[e][t].x,n=this.pages[e][t].y;o=void 0===o?this.options.snapSpeed||i.max(i.max(i.min(i.abs(s-this.x),1e3),i.min(i.abs(n-this.y),1e3)),300):o,this.currentPage={x:s,y:n,pageX:e,pageY:t},this.scrollTo(s,n,o,a)},next:function(e,t){var i=this.currentPage.pageX,o=this.currentPage.pageY;i++,i>=this.pages.length&&this.hasVerticalScroll&&(i=0,o++),this.goToPage(i,o,e,t)},prev:function(e,t){var i=this.currentPage.pageX,o=this.currentPage.pageY;i--,0>i&&this.hasVerticalScroll&&(i=0,o--),this.goToPage(i,o,e,t)},_initKeys:function(t){var i,o={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(i in this.options.keyBindings)"string"==typeof this.options.keyBindings[i]&&(this.options.keyBindings[i]=this.options.keyBindings[i].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(i in o)this.options.keyBindings[i]=this.options.keyBindings[i]||o[i];r.addEvent(e,"keydown",this),this.on("destroy",function(){r.removeEvent(e,"keydown",this)})},_key:function(e){if(this.enabled){var t,o=this.options.snap,a=o?this.currentPage.pageX:this.x,s=o?this.currentPage.pageY:this.y,n=r.getTime(),c=this.keyTime||0,d=.25;switch(this.options.useTransition&&this.isInTransition&&(t=this.getComputedPosition(),this._translate(i.round(t.x),i.round(t.y)),this.isInTransition=!1),this.keyAcceleration=200>n-c?i.min(this.keyAcceleration+d,50):0,e.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?a+=o?1:this.wrapperWidth:s+=o?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?a-=o?1:this.wrapperWidth:s-=o?1:this.wrapperHeight;break;case this.options.keyBindings.end:a=o?this.pages.length-1:this.maxScrollX,s=o?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:a=0,s=0;break;case this.options.keyBindings.left:a+=o?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:s+=o?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:a-=o?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:s-=o?1:5+this.keyAcceleration>>0;break;default:return}if(o)return void this.goToPage(a,s);a>0?(a=0,this.keyAcceleration=0):a<this.maxScrollX&&(a=this.maxScrollX,this.keyAcceleration=0),s>0?(s=0,this.keyAcceleration=0):s<this.maxScrollY&&(s=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(a,s,0),this.keyTime=n}},_animate:function(e,t,i,o){function a(){var p,v,g,m=r.getTime();return m>=u?(s.isAnimating=!1,s._translate(e,t),void(s.resetPosition(s.options.bounceTime)||s._execEvent("scrollEnd"))):(m=(m-l)/i,g=o(m),p=(e-c)*g+c,v=(t-d)*g+d,s._translate(p,v),void(s.isAnimating&&n(a)))}var s=this,c=this.x,d=this.y,l=r.getTime(),u=l+i;this.isAnimating=!0,a()},handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(e);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(e);break;case"keydown":this._key(e);break;case"click":e._constructed||(e.preventDefault(),e.stopPropagation())}}},s.prototype={handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e)}},destroy:function(){this.options.interactive&&(r.removeEvent(this.indicator,"touchstart",this),r.removeEvent(this.indicator,r.prefixPointerEvent("pointerdown"),this),r.removeEvent(this.indicator,"mousedown",this),r.removeEvent(e,"touchmove",this),r.removeEvent(e,r.prefixPointerEvent("pointermove"),this),r.removeEvent(e,"mousemove",this),r.removeEvent(e,"touchend",this),r.removeEvent(e,r.prefixPointerEvent("pointerup"),this),r.removeEvent(e,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(t){var i=t.touches?t.touches[0]:t;t.preventDefault(),t.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=i.pageX,this.lastPointY=i.pageY,this.startTime=r.getTime(),this.options.disableTouch||r.addEvent(e,"touchmove",this),this.options.disablePointer||r.addEvent(e,r.prefixPointerEvent("pointermove"),this),this.options.disableMouse||r.addEvent(e,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(e){var t,i,o,a,s=e.touches?e.touches[0]:e;r.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,t=s.pageX-this.lastPointX,this.lastPointX=s.pageX,i=s.pageY-this.lastPointY,this.lastPointY=s.pageY,o=this.x+t,a=this.y+i,this._pos(o,a),e.preventDefault(),e.stopPropagation()},_end:function(t){if(this.initiated){if(this.initiated=!1,t.preventDefault(),t.stopPropagation(),r.removeEvent(e,"touchmove",this),r.removeEvent(e,r.prefixPointerEvent("pointermove"),this),r.removeEvent(e,"mousemove",this),this.scroller.options.snap){var o=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),a=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.scroller.x-o.x),1e3),i.min(i.abs(this.scroller.y-o.y),1e3)),300);(this.scroller.x!=o.x||this.scroller.y!=o.y)&&(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=o,this.scroller.scrollTo(o.x,o.y,a,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(e){e=e||0,this.indicatorStyle[r.style.transitionDuration]=e+"ms",!e&&r.isBadAndroid&&(this.indicatorStyle[r.style.transitionDuration]="0.001s")},transitionTimingFunction:function(e){this.indicatorStyle[r.style.transitionTimingFunction]=e},refresh:function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(r.addClass(this.wrapper,"iScrollBothScrollbars"),r.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(r.removeClass(this.wrapper,"iScrollBothScrollbars"),r.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=i.max(i.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=i.max(i.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var e=this.options.listenX&&i.round(this.sizeRatioX*this.scroller.x)||0,t=this.options.listenY&&i.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(e<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=i.max(this.indicatorWidth+e,8),this.indicatorStyle.width=this.width+"px"),e=this.minBoundaryX):e>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=i.max(this.indicatorWidth-(e-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",e=this.maxPosX+this.indicatorWidth-this.width):e=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),t<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=i.max(this.indicatorHeight+3*t,8),this.indicatorStyle.height=this.height+"px"),t=this.minBoundaryY):t>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=i.max(this.indicatorHeight-3*(t-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",t=this.maxPosY+this.indicatorHeight-this.height):t=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=e,this.y=t,this.scroller.options.useTransform?this.indicatorStyle[r.style.transform]="translate("+e+"px,"+t+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=e+"px",this.indicatorStyle.top=t+"px")},_pos:function(e,t){0>e?e=0:e>this.maxPosX&&(e=this.maxPosX),0>t?t=0:t>this.maxPosY&&(t=this.maxPosY),e=this.options.listenX?i.round(e/this.sizeRatioX):this.scroller.x,t=this.options.listenY?i.round(t/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(e,t)},fade:function(e,t){if(!t||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var i=e?250:500,o=e?0:300;e=e?"1":"0",this.wrapperStyle[r.style.transitionDuration]=i+"ms",this.fadeTimeout=setTimeout(function(e){this.wrapperStyle.opacity=e,this.visible=+e}.bind(this,e),o)}}},o.utils=r,"undefined"!=typeof module&&module.exports?module.exports=o:e.IScroll=o}(window,document,Math),angular.module("shop").run(["$templateCache",function(e){
e.put("app/anotherPay/anotherPay.html",'<div class="warpAnotherPay"><div class="pay_header"><img src="{{vm.orderDetail.curr_user_info.avatar}}"><p class="nickname" ng-if="vm.orderDetail.curr_user_info.is_order_user"><span>{{vm.orderDetail.curr_user_info.nickname}}</span> 发给朋友的代付邀请</p><p class="nickname" ng-if="!vm.orderDetail.curr_user_info.is_order_user"><span>{{vm.orderDetail.curr_user_info.nickname}}</span> 请你帮忙代付一笔订单</p></div><div class="pay_content"><div class="pay_money" ng-if="vm.orderDetail.order_status==\'待付款\'"><i class="pay_value">付款金额</i><p class="totalmoney">{{vm.orderDetail.total_amount| currency:\'￥\':\'2\'}}</p></div><dl class="pay_guide" ng-if="vm.orderDetail.order_status==\'待付款\'"><dt>好友代付说明</dt><dd><p>1、代付发起后{{vm.orderCancelMinute}}分钟内无人付款，订单将自动取消。</p><p>2、如果订单申请退款，已支付金额将原路退还代付人。</p><p style="font-weight:bold;color:red">3、付款前请您务必和好友再次确认，避免遇到诈骗行为。</p></dd></dl><div class="pay_money" ng-if="vm.orderDetail.order_status==\'已取消\'"><i class="pay_value colorGray">已取消</i><p class="totalmoney">{{vm.orderDetail.total_amount| currency:\'￥\':\'2\'}}</p></div><dl class="pay_guide" ng-if="vm.orderDetail.order_status==\'已取消\'"><dt>好友代付说明</dt><dd><p>1、代付发起后{{vm.orderCancelMinute}}分钟内无人付款，订单将自动取消。</p><p>2、如果订单申请退款，已支付金额将原路退还代付人。</p><p style="font-weight:bold;color:red">3、付款前请您务必和好友再次确认，避免遇到诈骗行为。</p></dd></dl><div class="pay_money" ng-if="vm.orderDetail.order_status==\'待发货\'"><i class="pay_value_blue">已付款</i><p class="totalmoney">{{vm.orderDetail.pay_user_info.dai_pay_totalamount| currency:\'￥\':\'2\'}}</p></div><div class="Height15" ng-if="vm.orderDetail.order_status==\'待发货\'"></div><div class="pay_userinfo" ng-if="vm.orderDetail.order_status==\'待发货\'"><div class="dai_border">代付人信息</div><div class="warp_userinfo"><div class="userinfo_img"><img src="{{vm.orderDetail.pay_user_info.avatar}}"></div><ul class="warp_ul"><li class="li_color">代付人:<span class="span_color">{{vm.orderDetail.pay_user_info.nickname}}</span></li><li class="li_color">代付时间:<span class="span_color">{{vm.orderDetail.pay_user_info.pay_time| date:\'yyyy年MM月dd日 HH:mm\'}}</span></li><li class="li_status_color">代付成功</li></ul></div></div></div><div class="Height15"></div><div class="pay_order"><div class="pay_order_head"><div class="product_title">商品信息</div><div class="product_count">共{{vm.orderDetail.product_count}}件</div></div><div class="pay_order_goods"><a ui-sref="productDetail({id:item.product_id})" class="product_item" ng-repeat="item in vm.orderDetail.product_list"><img src="{{item.img_url}}"><h4>{{item.product_name}} {{item.show_property}}</h4><p><em>{{item.price| currency:\'￥\':\'2\'}}</em>{{item.count}}件</p></a></div><ul class="pay_order_list"><li id="username"><span>收货人姓名：</span> {{vm.orderDetail.receiver_name}}</li><li id="address"><span>收货人地址：</span>{{vm.orderDetail.receiver_address}}</li><li id="phonenum"><span>联系方式：</span> {{vm.orderDetail.receiver_phone}}</li></ul></div><div class="pay_type" ng-if="!vm.orderDetail.curr_user_info.is_order_user&&vm.orderDetail.order_status==\'待付款\'&&!vm.orderDetail.pay_user_info"><div class="warp_pay_content"><div class="pay_account" ng-if="vm.needAmount>0 || vm.isAcountChecked"><div class="account_text">使用余额(共有{{vm.userInfo.account_amount}}元)</div><svg class="icon font18 floatR" aria-hidden="true" ng-click="vm.acountExtend=!vm.acountExtend" ng-show="vm.acountExtend"><use xlink:href="#icon-jiahao"></use></svg><svg class="icon font18 floatR" aria-hidden="true" ng-click="vm.acountExtend=!vm.acountExtend" ng-show="!vm.acountExtend"><use xlink:href="#icon-jianhao"></use></svg><div class="clear-both"></div><div ng-show="!vm.acountExtend" style="float: left; height: 20px; line-height: 20px; margin-top: 10px;" aria-hidden="false" class=""><label class="floatL account-score" for="leftmoney" ng-show="!vm.acountExtend" aria-hidden="false" style=""><input class="account-checkbox ng-pristine ng-untouched ng-valid" type="checkbox" id="leftmoney" ng-model="vm.isAcountChecked" ng-change="vf.acountChange()" style="margin-bottom:4px;" aria-checked="false" aria-invalid="false"> <span class="font16 ng-binding">可用{{vm.needAmount}}元</span></label></div><div class="font16 floatR ng-binding" ng-show="!vm.acountExtend" style="margin-top: 10px;" aria-hidden="false">抵{{vm.needAmount}}元</div><div class="clear-both"></div></div>{{checkedCouponInfo}}<div class="warp-card" ng-show="(vm.orderDetail.total_amount - vm.useAcount>0 )|| vm.cardAcount>0"><div class="account-item coupon-item"><check-coupon order-total-price="vm.totalPay" order-skus="vm.orderSkus" order-type="vm.currOrderType" group-type="vm.groupType" show-name="vm.showName" check-amount="vf.checkAmount"></check-coupon></div></div><div class="account-item" ng-show="vm.orderDetail.order_status==\'待付款\'"><div class="total_account"><div class="floatL font16"><strong>支付总金额</strong></div><div class="floatR font16 red">{{vm.totalPay | currency:\'￥\':\'2\'}}</div><div class="clear-both"></div></div></div></div></div><div class="pay_fixbtn"><div class="mod_btns" ng-if="vm.orderDetail.curr_user_info.is_order_user&&vm.orderDetail.order_status==\'待付款\'&&!vm.orderDetail.pay_user_info"><a href="javascript:;" ng-click="vf.sendFriends()" class="mod_btn bg_12">发送给朋友</a></div><div class="mod_btns" ng-if="!vm.orderDetail.curr_user_info.is_order_user&&vm.orderDetail.order_status==\'待付款\'&&!vm.orderDetail.pay_user_info" "=""><a href="javascript:;" ng-click="vf.paySubmit()" class="mod_btn bg_12 themeBackground">立即支付</a></div><div class="mod_btns" ng-if="vm.orderDetail.order_status==\'已取消\'&&!vm.orderDetail.curr_user_info.is_order_user"><a href="javascript:;" class="mod_btn bg_12 colorGray">订单已取消</a></div><div class="mod_btns" ng-if="(vm.orderDetail.order_status==\'已取消\'||vm.orderDetail.order_status==\'待发货\')&&vm.orderDetail.curr_user_info.is_order_user"><a href="javascript:;" ng-click="vf.gotoOrderDetail()" class="mod_btn bg_12">查看订单详情</a></div><div class="mod_btns" ng-if="vm.orderDetail.order_status==\'待发货\'&&!vm.orderDetail.curr_user_info.is_order_user"><a href="javascript:;" ng-click="vf.gotoIndexPage()" class="mod_btn bg_12 themeBackground">逛逛商城</a></div><div class="mod_btns" ng-if="vm.orderDetail.pay_user_info&&!vm.orderDetail.pay_user_info.is_pay_user&&vm.orderDetail.total_amount>0"><a href="javascript:;" class="mod_btn bg_12">{{vm.orderDetail.pay_user_info.nickname}}正在代付</a></div><div class="mod_btns" ng-if="(vm.orderDetail.pay_user_info&&vm.orderDetail.pay_user_info.is_pay_user&&vm.orderDetail.total_amount>0)||(vm.orderDetail.pay_user_info&&!vm.orderDetail.pay_user_info.is_pay_user&&vm.orderDetail.total_amount>0)"><a href="javascript:;" ng-click="vf.CancelUpdate()" class="mod_btn bg_12">取消代付订单</a></div></div><div pay-panel="" parms="vm.payPanel" pay-scuss="vf.dealPayScuss" pay-error="vf.dealPayError" show-close="false"></div></div><div ng-show="vm.showShare" ng-style="{\'height\':vm.i_height+\'px\'}" style="width: 100%; background: #000; opacity: 0.7; position: fixed; top: 0; left: 0; z-index: 999999; text-align: right;" ng-click="vm.showShare=false">&nbsp;</div><div ng-show="vm.showShare" style="position: fixed; z-index: 1000000; right: 0; top: 0; width: 100%; text-align: right;" ng-click="vm.showShare=false"><img src="http://comeoncloud-static.oss-cn-hangzhou.aliyuncs.com/img/sharetip.png" width="100%"></div>'),e.put("app/bindPhone/bindPhone.html",'<div class="wrapBindPhone" ng-if="(vm.id && !vm.phone) || vm.unionid || vm.isreg" ng-switch="vm.isreg"><div class="header-bar"><go-back></go-back><div class="header-title" ng-switch-when="true">注册</div><div class="header-title" ng-switch-default="">绑定手机号</div><a href="javascript:void(0);" class="btnBackHomeRight" ng-click="vf.goHome()"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shouye"></use></svg></a><div class="clear-both"></div></div><div class="list"><label class="item item-input"><input type="number" placeholder="手机号" ng-maxlength="11" ng-model="vm.phone"></label> <label class="item item-input phoneInput"><input type="number" ng-maxlength="6" placeholder="验证码" ng-model="vm.code"> <a href="javascript:;" class="button button-small" ng-class="{\'button-positive themeBackgroundColor themeBorderColor\':!vm.isShowWait}" ng-click="vf.getSMSCode()"><span ng-hide="vm.isShowWait">点击获取</span> <span ng-show="vm.isShowWait">{{vm.waitTime}}s</span></a></label> <label class="item item-input"><input type="password" placeholder="密码" ng-maxlength="30" ng-model="vm.password"></label></div><div class="wrapOpeate"><a href="javascript:;" class="button button-block button-positive themeBackgroundColor themeBorderColor" ng-click="vf.bindPhone()"><span ng-switch-when="true">注 册</span> <span ng-switch-default="">绑 定</span></a></div></div><div class="wrapBindPhone" ng-if="!vm.id && !vm.unionid && !vm.isreg"><div class="header-bar"><go-back></go-back><div class="header-title">登录</div><a href="javascript:void(0);" class="btnBackHomeRight" ng-click="vf.goHome()"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shouye"></use></svg></a><div class="clear-both"></div></div><div class="list"><label class="item item-input phoneInput"><input type="number" placeholder="请输入手机号" ng-maxlength="11" ng-model="vm.phone"></label> <label class="item item-input"><input type="password" placeholder="请输入密码" ng-model="vm.password"></label></div><div class="wrapOpeate"><a href="javascript:;" class="button button-block button-positive themeBackgroundColor themeBorderColor" ng-click="vf.login()"><span>登录</span></a></div><div class="wrapMore"><div class="more-left"><span class="to-link" ng-click="vf.goRegister()">点击注册</span></div><div class="more-right"><span class="to-link" ng-click="vf.goForgetPassword()">忘记密码</span></div></div><div class="OauthLine" ng-if="isPlus"><div class="OauthLine-text">授权登陆</div><div class="OauthLine-line"></div></div><div class="OauthApp" id="divOauthApp" ng-if="isPlus"><div class="OauthApp-li" ng-click="vf.oAuthLogin(\'weixin\')"><img class="OauthApp-img" src="//static-files.socialcrmyun.com/img/weixin.png"></div></div></div>'),e.put("app/collectList/collectList.html",'<div class="header-bar"><go-back></go-back><div class="header-title">我的收藏</div><div class="bug-car" ui-sref="shopBasket"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-gouwuche"></use></svg><div class="card_nums" ng-if="is_shownums">{{shop_nums}}</div></div><div class="clear-both"></div></div><div class="product-list-search" ng-if="showmoresearch"><select class="select-box" ng-model="mycolor" ng-options="colorlist.prop_name for colorlist in colorlistData" ng-change="whichcolor(mycolor)"></select><select class="select-box" ng-model="mysize" ng-options="sizelist.prop_name for sizelist in sizelistData" ng-change="whichsize(mysize)"></select></div><div class="product-list" ng-if="!showLinks" scroll-bottom-bind="loadMoreData()"><div class="row row-wrap"><product-box wechat-click="goProductDetail(productItem)" ng-repeat="productItem in productListData" class="col-50"></product-box></div><div class="clear-both"></div><div class="nomoreorder" ng-if="nodata">没有更多收藏了额~</div><div class="nomoreorder" ng-if="!nodata">数据加载中~</div></div><div ng-if="showLinks" class="emptybasket"><div class="emptyicon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-yiguanzhu"></use></svg></div><h4 class="font20 color31">&nbsp;您还没有任何收藏</h4><div class="gotopro"><a href="javascript:zcToUrl(\'#/productList\')" class="font16">去逛逛</a></div></div>'),e.put("app/couponDetail/couponDetail.html",'<div class="coupon-detail"><div class="shareimg" ng-click="vf.hideShareImg()"></div><div class="new-coupons"><div class="new-coupon" on-finish-render-filters="" ng-class="{\'invalida\':!vm.couponDetailData.valid||vm.couponState==1}"><div class="coupon-type" ng-if="vm.couponDetailData.cardcoupon_type==3" ng-class="{\'invalidc\':!vm.couponDetailData.valid||vm.couponState==1}">满减券</div><div class="coupon-type" ng-if="vm.couponDetailData.cardcoupon_type==2" ng-class="{\'invalidc\':!vm.couponDetailData.valid||vm.couponState==1}">免邮券</div><div class="coupon-type" ng-if="vm.couponDetailData.cardcoupon_type==1" ng-class="{\'invalidc\':!vm.couponDetailData.valid||vm.couponState==1}">现金券</div><div class="coupon-type" ng-if="vm.couponDetailData.cardcoupon_type==0" ng-class="{\'invalidc\':!vm.couponDetailData.valid||vm.couponState==1}">折扣券</div><div class="coupon-type" ng-if="vm.couponDetailData.cardcoupon_type==4" ng-class="{\'invalidc\':!vm.couponDetailData.valid||vm.couponState==1}">满送券</div><div class="coupon-content"><div class="coupon-left" ng-if="vm.couponDetailData.cardcoupon_type==0"><span class="big-word">{{vm.couponDetailData.discount}}</span> 折</div><div class="coupon-left" ng-if="vm.couponDetailData.cardcoupon_type==1">￥<span class="big-word">{{vm.couponDetailData.deductible_amount}}</span></div><div class="coupon-left" ng-if="vm.couponDetailData.cardcoupon_type==2"><span class="big-word">免邮</span></div><div class="coupon-left" ng-if="vm.couponDetailData.cardcoupon_type==3">￥<span class="big-word">{{vm.couponDetailData.buckle_sub_amount}}</span></div><div class="coupon-center"><div class="title">{{vm.couponDetailData.cardcoupon_name}}</div><div class="desc" ng-if="vm.couponDetailData.cardcoupon_type==0">使用无金额限制</div><div class="desc" ng-if="vm.couponDetailData.cardcoupon_type==1">使用无金额限制</div><div class="desc" ng-if="vm.couponDetailData.cardcoupon_type==2">满{{vm.couponDetailData.freefreight_amount}}元可用</div><div class="desc" ng-if="vm.couponDetailData.cardcoupon_type==3">满{{vm.couponDetailData.buckle_amount}}元可用</div><div class="desc" ng-if="vm.couponDetailData.cardcoupon_type==4">满{{vm.couponDetailData.buckle_amount}}送{{vm.couponDetailData.buckle_sub_amount}}</div><div ng-if="vm.couponDetailData.expire_time_type!=\'1\'" class="time">{{vm.couponDetailData.valid_from}}-{{vm.couponDetailData.valid_to}}</div><div ng-if="vm.couponDetailData.expire_time_type==\'1\'" class="time">领取后{{vm.couponDetailData.expire_day}}天过期</div></div><div class="coupon-right"></div><div class="clear-both"></div></div><div class="coupon-desc" ng-class="{\'invalidb\':!vm.couponDetailData.valid||vm.couponState==1}" ng-if="vm.couponDetailData.limit_type==\'\'">全商品：任意商品可使用</div><div class="coupon-desc" ng-class="{\'invalidb\':!vm.couponDetailData.valid||vm.couponState==1}" ng-if="vm.couponDetailData.limit_type==\'0\'">限商品：只限单个商品使用</div><div class="coupon-desc" ng-class="{\'invalidb\':!vm.couponDetailData.valid||vm.couponState==1}" ng-if="vm.couponDetailData.limit_type==\'1\'">限商品：只限{{vm.couponDetailData.product_tags}}商品使用</div><div class="big-white-circle-left"></div><div class="big-white-circle-right"></div><div class="small-white-circle-wrap"></div><img src="assets/images/yishiyong.png" class="invalid-img" ng-show="vm.couponState==1&&vm.couponDetailData.valid==true"> <img src="assets/images/yiguoqi.png" class="invalid-img" ng-show="vm.couponDetailData.valid==false&&vm.couponState==0"></div></div><div class="white-bar"></div><div class="more-info"><div class="title">更多说明</div><ul class="content"><li ng-if="vm.couponDetailData.limit_type==\'\'">●&nbsp;&nbsp; 任意商品可使用</li><li ng-if="vm.couponDetailData.limit_type==\'0\'">●&nbsp;&nbsp; 只限单个商品使用</li><li ng-if="vm.couponDetailData.limit_type==\'1\'">●&nbsp;&nbsp; 只限{{vm.couponDetailData.product_tags}}商品使用</li><li ng-if="vm.couponDetailData.cardcoupon_type==3">●&nbsp;&nbsp; 满{{vm.couponDetailData.buckle_amount}}元可用</li><li ng-if="vm.couponDetailData.expire_time_type!=\'1\'">●&nbsp;&nbsp; 使用日期：{{vm.couponDetailData.valid_from}}&nbsp;至&nbsp;{{vm.couponDetailData.valid_to}}</li><li ng-if="vm.couponDetailData.expire_time_type==\'1\'">●&nbsp;&nbsp; 使用日期：领取后{{vm.couponDetailData.expire_day}}天内</li><div class="clear-both"></div></ul><div class="clear-both"></div></div><div class="white-bar"></div><div class="btn-wrap"><a href="javascript:zcToUrl(\'/customize/comeoncloud/Index.aspx?key=MallHome\');" class="cp_bt letterSpacing4" ng-show="vm.couponDetailData.is_recivece == 1&&vm.overDue<0&&vm.couponState==0">去商城使用</a><div class="cp_bt invalida letterSpacing4" ng-show="vm.couponDetailData.is_recivece == 0||vm.overDue>0||vm.couponState==1">去商城使用</div><div class="bt-desc" ng-if="vm.couponState!=2">查看可购买商品并使用此券</div><div id="btnShowOfflineConfirm" ng-if="vm.showWrapOfflineConfirm" class="cp_bt mTop10 letterSpacing4" ng-show="vm.couponDetailData.is_recivece == 1&&vm.overDue<0&&vm.couponState==0" ng-click="vf.showOfflineConfirm()">线下核销</div><div id="wrapOfflineConfirm" ng-if="vm.showWrapOfflineConfirm" class="cp_bt mTop10"><input type="password" placeholder="请输入核销码进行核销" ng-model="vm.offlineConfirmCode"><div id="btnOfflineConfirm" ng-click="vf.offlineConfirm()">核销</div></div><div class="cp_bt mTop10 letterSpacing4" ng-if="vm.couponInfo.is_can_give && vm.couponState==0&&vm.couponDetailData.weixin_card_id=\'\'" ng-click="vf.getCouponUrlBtn()">转赠给好友</div><div style="background:#B0B0B0" class="cp_bt mTop10 letterSpacing4" ng-if="vm.couponDetailData.weixin_card_id!=\'\'" ng-click="vf.getCouponUrlBtn()">转赠给好友</div><div ng-if="vm.couponState==2"><div class="receive"><span class="floatL">看看是谁收了我的转赠</span></div><div class="receiveImg"><div class="oderlistcontent"><img class="orderlistimg receive-person" ng-src="{{vm.couponInfo.to_user_info.head_img_url}}"><div class="title"><span class="floatL ng-binding" style="width: 70%;overflow: hidden;" ng-bind="vm.couponInfo.to_user_info.nick_name"></span></div></div></div></div><div ng-if="vm.couponInfo.from_user_info!=null"><div class="receive"><span class="floatL">看看是谁给我的转赠</span></div><div class="receiveImg"><div class="oderlistcontent"><img class="orderlistimg receive-person" ng-src="{{vm.couponInfo.from_user_info.head_img_url}}"><div class="title"><span class="floatL ng-binding" style="width: 70%;overflow: hidden;" ng-bind="vm.couponInfo.from_user_info.nick_name"></span></div></div></div></div></div></div>'),e.put("app/createOrder/createOrder.html",'<div class="create-order"><div class="header-bar"><go-back></go-back><div class="header-title">订单信息</div><div class="bug-car" ui-sref="shopBasket"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-gouwuche"></use></svg><div class="card_nums" ng-if="is_shownums">{{shop_nums}}</div></div><div class="clear-both"></div></div><div class="order-item-title">寄送地址：</div><div select-address="" address-info="addressData" customize="false" address-id="vm.addressId"></div><div class="order-item-title">支付方式 ：微信支付</div><div class="product-item-detail" ng-if="0"><div class="pay-img"><img src="assets/images/zhifubao.png"></div><div class="pay-txt">支付宝</div><div class="clear-both"></div></div><div class="order-item-title">商品：</div><div class="product-item-detail" ng-repeat="item in orderProducts"><div class="product-item-img"><img ng-src="{{item.img_url}}"></div><div class="product-item-txt"><div class="font14">{{item.title}}</div><div class="font14">{{item.properties}}</div><div class="font13">数量：{{item.num}}</div><div class="product-num-wrap" ng-if="groupType==undefined"><svg class="icon product-num-del" aria-hidden="true" ng-click="delNum(item)"><use xlink:href="#icon-jian"></use></svg><input type="input" class="product-num" ng-model="item.num" ng-change="checknum(item)" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}"><svg class="icon product-num-add" aria-hidden="true" ng-click="addNum(item)"><use xlink:href="#icon-jia"></use></svg></div><div class="product-item-price"><div class="line-through">{{item.quote_price * item.num|currency:"￥":2}}</div><div><span ng-show="item.price">{{item.price * item.num|currency:"￥":2}}</span> <span ng-show="item.score"><span ng-show="item.price">+</span> <span>{{item.score * item.num}}</span> <span>积分</span></span></div></div></div><div class="clear-both"></div></div><div style="margin:0 2px;border-bottom: 1px solid #ebebeb;"><check-coupon order-total-price="orderProducts.productsTotalPrice" order-skus="orderSkus" checked-coupon-info="checkedCouponInfo"></check-coupon></div><div class="order-item-title">预计产生的运费：{{freight|currency:"￥":2}}</div></div><div class="bt-wrap"><div class="submitorderL"><div class="allpaymoneyL"><strong>支付总金额</strong></div><div class="allpaymoneyR"><span class="red font18" ng-if="!checkedCouponInfo" ng-bind="orderProducts.productsTotalPrice | currency:\'￥\':\'2\'"></span><span class="red font18" ng-if="checkedCouponInfo.cardcoupon_type==3&&(orderProducts.productsTotalPrice>=checkedCouponInfo.buckle_amount)" ng-bind="orderProducts.productsTotalPrice - checkedCouponInfo.buckle_sub_amount | currency:\'￥\':\'2\'"></span><span class="red font18" ng-if="checkedCouponInfo.cardcoupon_type==0" ng-bind="orderProducts.productsTotalPrice*checkedCouponInfo.discount/10 | currency:\'￥\':\'2\'"></span><span class="red font18" ng-if="checkedCouponInfo.cardcoupon_type==1&&orderProducts.productsTotalPrice>=checkedCouponInfo.deductible_amount" ng-bind="orderProducts.productsTotalPrice - checkedCouponInfo.deductible_amount | currency:\'￥\':\'2\'"></span><span class="red font18" ng-if="checkedCouponInfo.cardcoupon_type==1&&orderProducts.productsTotalPrice<checkedCouponInfo.deductible_amount" ng-bind="orderProducts.productsTotalPrice - orderProducts.productsTotalPrice | currency:\'￥\':\'2\'"></span><span class="red font18" ng-if="checkedCouponInfo.cardcoupon_type==2" ng-bind="orderProducts.productsTotalPrice - freight | currency:\'￥\':\'2\'"></span></div></div><div class="submitorderR" ng-click="submitOrderAndPay()">确认</div></div>'),e.put("app/createOrder/createOrderNew.html",'<div class="create-order-new"><div class="header-bar"><go-back></go-back><div class="header-title">订单信息</div><div class="bug-car" ui-sref="shopBasket"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-gouwuche"></use></svg><div class="card_nums" ng-if="vm.is_shownums">{{shop_nums}}</div></div><div class="clear-both"></div></div><div ng-show="!vm.is_no_express" class="wrapAddress themeBorderColor"><div class="order-item-title" ng-if="vm.isShowAddress">寄送地址：</div><div select-address="" isgivegift="{{vm.isShowAddress}}" address-info="addressData" customize="false" address-id="vm.addressId"></div></div><div ng-show="!vm.is_no_express" class="wrapAddressBlock">&nbsp;</div><div ng-show="vm.is_no_express && vm.is_need_name_phone"><div class="order-item-title"><span class="floatL">姓名 ：</span> <input class="floatL width200 mTop3" type="text" ng-model="addressData.consigneename"><div class="clear-both"></div></div><div class="order-item-title"><span class="floatL">手机 ：</span> <input class="floatL width200 mTop3" type="text" maxlength="11" ng-model="addressData.phone"><div class="clear-both"></div></div></div><div style="padding-left: 4px;margin:0 12px; margin-top:30px; border-bottom: 1px solid #ddd;" ng-show="vm.isNeedClaimArrivalTime == 1"><ul class="ulRow"><li class="claimArrivalTimeTitle"><span class="red">*</span>&nbsp;送达日期：</li><li><input readonly="readonly" id="claimArrivalTimeInput" class="claimArrivalTimeInput" type="text" placeholder="请选择送达日期"></li></ul><div class="Clear"></div></div><div ng-show="vm.groupConfig.is_show_name_phone"><div style="padding-left: 4px;margin:0 12px; margin-top:30px; border-bottom: 1px solid #ddd;"><ul class="ulRow"><li class="claimArrivalTimeTitle"><span class="red">*</span>&nbsp;{{vm.rname}}姓名：</li><li><input type="text" ng-model="vm.customCreaterName" placeholder="请输入{{vm.rname}}姓名"></li></ul><div class="Clear"></div></div><div style="padding-left: 4px;margin:0 12px; margin-top:30px; border-bottom: 1px solid #ddd;"><ul class="ulRow"><li class="claimArrivalTimeTitle"><span class="red">*</span>&nbsp;{{vm.rname}}手机：</li><li><input type="text" ng-model="vm.customCreaterPhone" placeholder="请输入{{vm.rname}}手机"></li></ul><div class="Clear"></div></div></div><div style="padding-left: 4px;margin:0 12px; margin-top:30px;border-bottom: 1px solid #ddd;"><ul class="ulRow"><li>留言：</li><li><input type="text" ng-model="vm.remark" placeholder="请输入留言内容"></li></ul><div class="Clear"></div></div><div class="product-item-detail" ng-repeat="itemSupplier in vm.orderProductsSort"><div class="order-item-title" ng-if="itemSupplier.supplier_name!=\'\'&&itemSupplier.supplier_name.length>0">{{itemSupplier.supplier_name}}</div><div ng-repeat="item in itemSupplier.product_list"><div class="product-item-img"><img ng-src="{{item.img_url}}?x-oss-process=image/resize,m_pad,h_100,w_100"></div><div class="product-item-txt"><div class="font14 width200 overflow_ellipsis">{{item.title}}</div><div class="font14">{{item.properties}}</div><div class="font13">数量：{{item.num}}</div><div class="product-num-wrap" ng-if="vm.groupType==undefined"><svg class="icon product-num-del" aria-hidden="true" ng-click="vf.delNum(item)"><use xlink:href="#icon-jian"></use></svg><input type="input" class="product-num" ng-model="item.num" ng-change="vf.checknum(item)" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}"><svg class="icon product-num-add" aria-hidden="true" ng-click="vf.addNum(item)"><use xlink:href="#icon-jia"></use></svg></div><div class="product-item-price"><div><span ng-show="item.price">{{item.price * item.num|currency:"￥":2}}</span> <span ng-show="item.score"><span ng-show="item.price">+</span> <span>{{item.score * item.num}}</span> <span>{{score_show_name}}</span></span></div></div></div><div class="clear-both"></div></div></div><div class="account-wrap"><div class="account-item"><div><div class="floatL font16">{{vm.totalnum}} 件商品</div><div class="floatR font16"><span ng-show="vm.realProductTotalPrice">{{vm.realProductTotalPrice|currency:"￥":2}}</span> <span ng-show="vm.realProductTotalScore"><span ng-show="vm.realProductTotalPrice">+</span> <span>{{vm.realProductTotalScore}}</span> <span>{{score_show_name}}</span></span></div><div class="clear-both"></div></div><div style="margin-top:12px;"><div class="floatL font16">运费</div><div class="floatR font16">{{vm.showFreight|currency:"￥":2}}</div><div class="clear-both"></div></div></div><div class="account-item" ng-if="vm.showScore==2 && vm.is_cashpay_only==0 && vm.userInfo.totalscore > 0"><div class="floatL font16">使用{{score_show_name}}抵金额 (共有{{vm.userInfo.totalscore}}{{score_show_name}})</div><svg class="icon font18 floatR" aria-hidden="true" ng-click="vm.extend=!vm.extend" ng-show="vm.extend"><use xlink:href="#icon-jiahao"></use></svg><svg class="icon font18 floatR" aria-hidden="true" ng-click="vm.extend=!vm.extend" ng-show="!vm.extend"><use xlink:href="#icon-jianhao"></use></svg><div class="clear-both"></div><div ng-show="!vm.extend" style="float: left; height: 20px; line-height: 20px; margin-top: 10px;"><label class="floatL account-score" for="pointsid" ng-show="!vm.extend"><input class="account-checkbox" type="checkbox" id="pointsid" ng-model="vm.isChecked" ng-change="vf.acountChange()" style="margin-bottom:4px;"> <span class="font16">可用{{vm.scoreNeed}}{{score_show_name}}</span></label></div><div class="font16 floatR" ng-show="!vm.extend" style="margin-top: 10px;">抵{{vm.cashGet}}元</div><div class="clear-both"></div></div><div class="account-item" ng-if="vm.groupConfig.is_enable_account_amount_pay && vm.userInfo.account_amount > 0"><div class="floatL font16">使用{{vm.groupConfig.account_amount_pay_showname}} (共有{{vm.userInfo.account_amount}}元)</div><svg class="icon font18 floatR" aria-hidden="true" ng-click="vm.acountExtend=!vm.acountExtend" ng-show="vm.acountExtend"><use xlink:href="#icon-jiahao"></use></svg><svg class="icon font18 floatR" aria-hidden="true" ng-click="vm.acountExtend=!vm.acountExtend" ng-show="!vm.acountExtend"><use xlink:href="#icon-jianhao"></use></svg><div class="clear-both"></div><div ng-show="!vm.acountExtend" style="float: left; height: 20px; line-height: 20px; margin-top: 10px;"><label class="floatL account-score" for="leftmoney" ng-show="!vm.acountExtend"><input class="account-checkbox" type="checkbox" id="leftmoney" ng-model="vm.isAcountChecked" ng-change="vf.acountChange()" style="margin-bottom:4px;"> <span class="font16">可用{{vm.useAcount}}元</span></label></div><div class="font16 floatR" ng-show="!vm.acountExtend" style="margin-top: 10px;">抵{{vm.useAcount}}元</div><div class="clear-both"></div></div><div class="account-item coupon-item" ng-show="vm.is_cashpay_only==0"><check-coupon order-total-price="vm.realProductTotalPrice" order-skus="vm.orderSkus" checked-coupon-info="checkedCouponInfo" order-type="vm.currOrderType" group-type="vm.groupType"></check-coupon></div><div class="account-item"><div><div class="floatL font16"><strong>支付总金额</strong></div><div class="floatR font16 red" ng-show="vm.isCouponFreight">{{vm.totalPay | currency:\'￥\':\'2\'}}</div><div class="floatR font16 red" ng-show="!vm.isCouponFreight">{{vm.totalPay+vm.freight | currency:\'￥\':\'2\'}}</div><div class="clear-both"></div></div><div><div class="floatL font16"><strong>支付总{{score_show_name}}</strong></div><div class="floatR font16 red" ng-show="vm.isChecked">{{vm.scoreNeed + vm.realProductTotalScore}}分</div><div class="floatR font16 red" ng-show="!vm.isChecked">{{vm.realProductTotalScore}}分</div><div class="clear-both"></div></div><div style="margin-top:10px;" ng-if="vm.showCash==2"><div class="floatL font16">可获{{score_show_name}}</div><div class="floatR font16">{{vm.scoreGet}}分</div><div class="clear-both"></div><div class="getScoreMsg" ng-bind-html="vm.getScoreMsg" ng-if="vm.getScoreMsg"></div></div></div></div><div pay-panel="" parms="vm.payPanel" pay-scuss="vf.dealPayScuss" pay-error="vf.dealPayError" show-close="false"></div></div><div class="bt-wrap-new"><div class="submitorderL"><div class="allpaymoneyL"><strong>支付</strong></div><div class="allpaymoneyR"><span class="red font18"><span ng-show="vm.isCouponFreight">{{vm.totalPay | currency:\'￥\':\'2\'}}</span> <span ng-show="!vm.isCouponFreight">{{vm.totalPay+vm.freight | currency:\'￥\':\'2\'}}</span> <span ng-show="vm.isChecked && (vm.scoreNeed + vm.realProductTotalScore)">+{{vm.scoreNeed + vm.realProductTotalScore}}{{score_show_name}}</span> <span ng-show="!vm.isChecked && vm.realProductTotalScore">+{{vm.realProductTotalScore}}{{score_show_name}}</span></span></div></div><div class="submitorderR themeBackground" ng-if="!vm.isCanClick" ng-click="vf.submitOrderAndPay()">确认</div><div class="submitorderR bgGrayCCC" ng-if="vm.isCanClick">正在处理中...</div></div>'),e.put("app/expressInfo/expressInfo.html",'<div class="header-bar"><go-back ng-click="vm.clear_history()"></go-back><div class="header-title">{{vm.title}}</div><div class="clear-both"></div></div><div class="logistics"><div class="compayn"><div class="erty"><div class="name">物流公司： <strong ng-bind="orderinfo.express_company_name"></strong></div><div class="id">运单编号： <span ng-bind="orderinfo.express_number"></span></div></div></div><div class="clear-both"></div><div class="clear-both"></div><div class="statu1"><span class="logisticstext">订单信息</span></div><div class="clear-both"></div><div class="statu2"><div class="oderlistcontent" ng-repeat="product in orderinfo.product_list"><img ng-src="{{product.img_url}}?x-oss-process=image/resize,m_pad,h_140,w_140" alt="" class="orderlistimg"><div class="title"><span class="floatL pdname" ng-bind="product.product_name"></span> <span class="floatR" ng-bind="product.price | currency:\'¥\':2"></span></div><div class="skus"><span class="floatL" ng-bind="product.show_property"></span> <span class="floatR" ng-bind="product.count | currency:\'X\':0"></span></div></div></div><div class="statu1"><span class="logisticstext">物流跟踪</span></div><div class="statu4" ng-if="hasExpressInfo"><ul><li ng-repeat="express in expressdata"><p ng-bind="express.context"></p><p ng-bind="express.time"></p></li></ul></div><div class="statu4" ng-if="!hasExpressInfo"><br><p>亲，目前暂无物流信息,请耐心等候~</p></div></div>'),
e.put("app/getOthersCoupon/getOthersCoupon.html",'<div class="wrapGetOthersCoupon"><div class="new-coupons margintop"><div class="new-coupon" ng-class="{\'invalida\':!vm.cp_datas.valid}" ng-click="vf.goToDetail()"><div class="coupon-type" ng-if="vm.cp_datas.cardcoupon_type==3" ng-class="{\'invalidc\':!vm.cp_datas.valid}">满减券</div><div class="coupon-type" ng-if="vm.cp_datas.cardcoupon_type==2" ng-class="{\'invalidc\':!vm.cp_datas.valid}">免邮券</div><div class="coupon-type" ng-if="vm.cp_datas.cardcoupon_type==1" ng-class="{\'invalidc\':!vm.cp_datas.valid}">现金券</div><div class="coupon-type" ng-if="vm.cp_datas.cardcoupon_type==0" ng-class="{\'invalidc\':!vm.cp_datas.valid}">折扣券</div><div class="coupon-content"><div class="coupon-left" ng-if="vm.cp_datas.cardcoupon_type==0"><span class="big-word">{{vm.cp_datas.discount}}</span> 折</div><div class="coupon-left" ng-if="vm.cp_datas.cardcoupon_type==1">￥<span class="big-word">{{vm.cp_datas.deductible_amount}}</span></div><div class="coupon-left" ng-if="vm.cp_datas.cardcoupon_type==2"><span class="big-word">免邮</span></div><div class="coupon-left" ng-if="vm.cp_datas.cardcoupon_type==3">￥<span class="big-word">{{vm.cp_datas.buckle_sub_amount}}</span></div><div class="coupon-center"><div class="title">{{vm.cp_datas.cardcoupon_name}}</div><div class="desc" ng-if="vm.cp_datas.cardcoupon_type==0">使用无金额限制</div><div class="desc" ng-if="vm.cp_datas.cardcoupon_type==1">使用无金额限制</div><div class="desc" ng-if="vm.cp_datas.cardcoupon_type==2">满{{vm.cp_datas.freefreight_amount}}元可用</div><div class="desc" ng-if="vm.cp_datas.cardcoupon_type==3">满{{vm.cp_datas.buckle_amount}}元可用</div><div ng-if="vm.cp_datas.expire_time_type!=\'1\'" class="time">{{vm.cp_datas.valid_from}}-{{vm.cp_datas.valid_to}}</div><div ng-if="vm.cp_datas.expire_time_type==\'1\'" class="time">领取后{{vm.cp_datas.expire_day}}天过期</div></div><div class="coupon-right"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-youjiantou"></use></svg></div><div class="clear-both"></div></div><div class="coupon-desc" ng-class="{\'invalidb\':!vm.cp_datas.valid}" ng-if="vm.cp_datas.limit_type==\'\'">全商品：任意商品可使用</div><div class="coupon-desc" ng-class="{\'invalidb\':!vm.cp_datas.valid}" ng-if="vm.cp_datas.limit_type==\'0\'">限商品：只限单个商品使用</div><div class="coupon-desc" ng-class="{\'invalidb\':!vm.cp_datas.valid}" ng-if="vm.cp_datas.limit_type==\'1\'">限商品：只限{{vm.cp_datas.product_tags}}商品使用</div><div class="big-white-circle-left"></div><div class="big-white-circle-right"></div><div class="small-white-circle-wrap"></div><img src="assets/images/yiguoqi.png" ng-show="!vm.cp_datas.valid" ng-class="{\'invalid-img\':!vm.cp_datas.valid}"></div></div><div ng-show="vm.showalready" class="has_receive"><div class="lineheight30">不要贪心哟~</div><div>您已经领过了</div></div><div ng-show="vm.shownonum" class="has_receive"><div class="lineheight30">阿欧&nbsp;没抢到哦</div><div>手气不佳，攒人品下次再来吧</div></div><div class="getgifttitle clearfix" style="margin:10px 0 0 0"><span class="whogivetext">此转赠来自</span> <span class="whogiveimg"><img ng-src="{{vm.cp_datas.from_user_info.head_img_url}}"></span> <span class="whogivetext" ng-bind="vm.cp_datas.from_user_info.nick_name"></span></div><div ng-if="false"><div class="cp_bt" ng-show="vm.cp_datas.is_recivece == 0&&vm.overDue<0&&vm.shownonum!=true" ng-click="vf.getCouponBtn(vm.cp_datas.cardcoupon_id)">点&nbsp;击&nbsp;领&nbsp;券</div><div class="cp_bt invalida" ng-show="vm.overDue>0&&vm.cp_datas.is_recivece == 0||max_count>0&&vm.cp_datas.un_send_count == 0&&vm.cp_datas.is_recivece == 0">该&nbsp;券&nbsp;不&nbsp;能&nbsp;领&nbsp;取</div><div class="cp_bt invalida marginBottom10" ng-show="vm.cp_datas.is_recivece == 1&&vm.overDue<0">已&nbsp;经&nbsp;领&nbsp;取</div></div><div class="cp_bt marginBottom10" ng-click="vf.getCouponBtn()" ng-show="!vm.cp_datas.is_donation&&vm.overDue<0">点&nbsp;击&nbsp;接&nbsp;收</div><div class="cp_bt invalida marginBottom10" ng-show="vm.cp_datas.is_donation&&vm.overDue<0">已&nbsp;经&nbsp;转&nbsp;赠</div><div class="cp_bt marginTop10" ui-sref="mycoupons">查&nbsp;看&nbsp;优&nbsp;惠&nbsp;券</div></div>'),e.put("app/getcoupon/getcoupon.html",'<div class="lqcontent"><div class="new-coupons margintop"><div class="new-coupon" ng-class="{\'invalida\':!vm.cp_datas.valid}" ng-click="goToDetail();"><div class="coupon-type" ng-if="vm.cp_datas.cardcoupon_type==3" ng-class="{\'invalidc\':!vm.cp_datas.valid}">满减券</div><div class="coupon-type" ng-if="vm.cp_datas.cardcoupon_type==2" ng-class="{\'invalidc\':!vm.cp_datas.valid}">免邮券</div><div class="coupon-type" ng-if="vm.cp_datas.cardcoupon_type==1" ng-class="{\'invalidc\':!vm.cp_datas.valid}">现金券</div><div class="coupon-type" ng-if="vm.cp_datas.cardcoupon_type==0" ng-class="{\'invalidc\':!vm.cp_datas.valid}">折扣券</div><div class="coupon-type" ng-if="vm.cp_datas.cardcoupon_type==4" ng-class="{\'invalidc\':!vm.cp_datas.valid}">满送券</div><div class="coupon-content"><div class="coupon-left" ng-if="vm.cp_datas.cardcoupon_type==0"><span class="big-word">{{vm.cp_datas.discount}}</span> 折</div><div class="coupon-left" ng-if="vm.cp_datas.cardcoupon_type==1">￥<span class="big-word">{{vm.cp_datas.deductible_amount}}</span></div><div class="coupon-left" ng-if="vm.cp_datas.cardcoupon_type==2"><span class="big-word">免邮</span></div><div class="coupon-left" ng-if="vm.cp_datas.cardcoupon_type==3">￥<span class="big-word">{{vm.cp_datas.buckle_sub_amount}}</span></div><div class="coupon-center"><div class="title">{{vm.cp_datas.cardcoupon_name}}</div><div class="desc" ng-if="vm.cp_datas.cardcoupon_type==0">使用无金额限制</div><div class="desc" ng-if="vm.cp_datas.cardcoupon_type==1">使用无金额限制</div><div class="desc" ng-if="vm.cp_datas.cardcoupon_type==2">满{{vm.cp_datas.freefreight_amount}}元可用</div><div class="desc" ng-if="vm.cp_datas.cardcoupon_type==3">满{{vm.cp_datas.buckle_amount}}元减 {{vm.cp_datas.buckle_sub_amount}}元</div><div class="desc" ng-if="vm.cp_datas.cardcoupon_type==4">满{{vm.cp_datas.buckle_amount}}元送 {{vm.cp_datas.buckle_sub_amount}}</div><div ng-if="vm.cp_datas.expire_time_type!=\'1\'" class="time">{{vm.cp_datas.valid_from}}-{{vm.cp_datas.valid_to}}</div><div ng-if="vm.cp_datas.expire_time_type==\'1\'" class="time">领取后{{vm.cp_datas.expire_day}}天过期</div></div><div class="coupon-right"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-youjiantou"></use></svg></div><div class="clear-both"></div></div><div class="coupon-desc" ng-class="{\'invalidb\':!vm.cp_datas.valid}" ng-if="vm.cp_datas.limit_type==\'\'">全商品：任意商品可使用</div><div class="coupon-desc" ng-class="{\'invalidb\':!vm.cp_datas.valid}" ng-if="vm.cp_datas.limit_type==\'0\'">限商品：只限单个商品使用</div><div class="coupon-desc" ng-class="{\'invalidb\':!vm.cp_datas.valid}" ng-if="vm.cp_datas.limit_type==\'1\'">限商品：只限{{vm.cp_datas.product_tags}}商品使用</div><div class="big-white-circle-left"></div><div class="big-white-circle-right"></div><div class="small-white-circle-wrap"></div><img src="assets/images/yiguoqi.png" ng-show="!vm.cp_datas.valid" ng-class="{\'invalid-img\':!vm.cp_datas.valid}"></div></div><div ng-show="vm.showalready" class="has_receive"><div class="lineheight30">不要贪心哟~</div><div>您已经领过了</div></div><div ng-show="vm.shownonum" class="has_receive"><div class="lineheight30">阿欧&nbsp;没抢到哦</div><div>手气不佳，攒人品下次再来吧</div></div><div class="cp_bt" ng-show="vm.cp_datas.is_recivece == 0&&vm.overDue<0&&vm.shownonum!=true" ng-click="vm.getCouponBtn(vm.cp_datas.cardcoupon_id)">点&nbsp;击&nbsp;领&nbsp;券</div><div class="cp_bt invalida" ng-show="vm.overDue>0&&vm.cp_datas.is_recivece == 0||max_count>0&&vm.cp_datas.un_send_count == 0&&vm.cp_datas.is_recivece == 0">该&nbsp;券&nbsp;不&nbsp;能&nbsp;领&nbsp;取</div><div class="cp_bt invalida marginBottom10" ng-show="vm.cp_datas.is_recivece == 1&&vm.overDue<0">已&nbsp;经&nbsp;领&nbsp;取</div><div class="cp_bt marginTop10" ng-show="vm.cp_datas.is_recivece == 1&&vm.overDue<0" ui-sref="mycoupons">查&nbsp;看&nbsp;优&nbsp;惠&nbsp;券</div></div>'),e.put("app/giftorderlist/giftorderlist.html",'<div class="wrapGiftOrderList"><div class="order-list"><div class="header-bar"><go-back ng-click="clear_history()"></go-back><div class="header-title">我的礼单</div><div class="clear-both"></div></div><div class="orderlistnav"><span class="floatL" style="width:50%;" ng-class="{select:pageData.id==pageData.value[0]}" ui-sref="giftorderlist({ID:pageData.value[0]})">好友送我</span> <span class="floatL" style="width:50%;" ng-class="{select:pageData.id==pageData.value[1]}" ui-sref="giftorderlist({ID:pageData.value[1]})">我送好友</span><div class="BKline"></div></div><div class="the-list" ng-if="vm.showstatus == 0"><div class="the-order" ng-repeat="item in pageData.list" scroll-bottom-bind="loadMoreData()" ui-sref="orderDetail({orderID:item.order_id})"><div class="order-title"><div class="order-id">订单号：{{item.order_id}}</div><div class="order-time">{{item.order_time | date:\'yyyy/MM/dd HH:mm\'}}</div><div class="clear-both"></div></div><div class="order-content" ng-repeat="product in item.product_list track by $index"><div class="product-img"><img ng-src="{{product.img_url}}?x-oss-process=image/resize,m_pad,h_140,w_140"></div><div class="product-info"><div class="product-name">{{product.product_name}}</div><div class="product-sku">{{product.show_property}}</div></div><div class="product-prices"><div class="the-price">{{product.quote_price | currency:\'￥\'}}</div><div class="num">X{{product.count}}</div></div><div class="clear-both"></div></div><div class="bottom-wrap"><span class="btn-default" ng-if="item.order_status==\'待付款\'" ng-click="pageFunc.pay(item)">立即支付</span> <span class="btn-default" ng-if="item.order_status==\'已取消\'">已取消</span> <span class="btn-active" ng-if="item.order_status==\'待付款\'" ng-click="pageFunc.deleteorder(item)">取消订单</span> <span class="btn-default" ng-if="item.express_number" ui-sref="expressInfo({orderId:item.order_id})">查看物流</span> <span class="btn-active" ng-if="item.order_status==\'已发货\'" ng-click="pageFunc.confirm(item)">确认收货</span> <span class="btn-active" ng-if="item.is_cansendgift== true && item.is_pay == 1" ng-click="gotoGiveGiftBtn(item)">送给好友</span></div></div></div><div class="the-list" ng-if="vm.showstatus == 1"><div class="the-order" ng-repeat="item in pageData.list" scroll-bottom-bind="loadMoreData()" ui-sref="orderDetail({orderID:item.order_id})"><div class="order-title"><div class="order-id">订单号：{{item.order_id}}</div><div class="order-time">{{item.order_time | date:\'yyyy/MM/dd HH:mm\'}}</div><div class="clear-both"></div></div><div class="order-content" ng-repeat="product in item.product_list track by $index"><div class="product-img"><img ng-src="{{product.img_url}}?x-oss-process=image/resize,m_pad,h_140,w_140"></div><div class="product-info" ui-sref="orderDetail({orderID:item.order_id})"><div class="product-name">{{product.product_name}}</div><div class="product-sku">{{product.show_property}}</div></div><div class="product-prices"><div class="the-price">{{product.price | currency:\'￥\'}}</div><div class="old-price">{{product.quote_price | currency:\'￥\'}}</div><div class="num">X{{product.count}}</div></div><div class="clear-both"></div></div><div class="total-price">共{{item.product_count}}件商品，合计：{{item.total_amount | currency:\'￥\'}}</div><div class="bottom-wrap"><span class="btn-default" ng-if="item.order_status==\'待付款\'" ng-click="pageFunc.pay(item)">立即支付</span> <span class="btn-default" ng-if="item.order_status==\'已取消\'">已取消</span> <span class="btn-active" ng-if="item.order_status==\'待付款\'" ng-click="pageFunc.deleteorder($index)">取消订单</span> <span class="btn-default" ng-if="item.express_number" ui-sref="expressInfo({orderId:item.order_id})">查看物流</span> <span class="btn-active" ng-if="item.order_status==\'已发货\'" ng-click="pageFunc.confirm($index)">确认收货</span> <span class="btn-active" ng-if="item.is_cansendgift== true && item.is_pay == 1" ng-click="gotoGiveGiftBtn(item)">送给好友</span></div></div></div><div class="nomoreorder" ng-if="!nodata">数据加载中~</div><div class="nomoreorder" ng-if="nodata">没有更多订单了额~</div></div></div>'),e.put("app/home/home.html",'<div class="wrapHome"><div class="home"><div class="content"><sliderbox pic-size="640:300" slide-type="{{pdlist.MALLCONFIG.mallconfignew.slide_name}}"></sliderbox><product-box-list scroll-bottom-bind="pdlist.loadMoreData()"><product-box wechat-click="pdlist.goProductDetail(productItem.product_id)" ng-repeat="productItem in pdlist.productListData" class="col-50"></product-box></product-box-list></div></div><footer-bar ng-if="!searchMask&&!searchRelateMask"></footer-bar><hot-search ng-if="searchMask"></hot-search><relate-search ng-if="searchRelateMask"></relate-search><side-menu ng-show="sideMenus"></side-menu></div>'),e.put("app/infoCenter/infoCenter.html",'<div class="info-center"><div class="info-head"><img class="person-img" ng-src="{{vm.userInfoData.head_img_url}}"><div class="person-text"><div class="person-name" ng-bind="vm.userInfoData.nickname"></div><div class="manage-btn" ui-sref="userMange">账号管理</div></div><div class="clear-both"></div></div><div class="my-orders"><div class="all-order-wrap"><div class="all-order">我的订单</div><div class="clear-both"></div></div><div class="sorts"><div class="sort" ui-sref="orderList"><svg class="icon sort-img" aria-hidden="true"><use xlink:href="#icon-quanbudingdan"></use></svg><br>全部订单</div><div class="sort" ui-sref="orderList({status:\'待付款\'})"><svg class="icon sort-img" aria-hidden="true"><use xlink:href="#icon-daifukuan"></use></svg><br>待付款</div><div class="sort" ui-sref="orderList({status:\'待发货\'})"><svg class="icon sort-img" aria-hidden="true"><use xlink:href="#icon-receive"></use></svg><br>待发货</div><div class="sort" ui-sref="orderList({status:\'待收货\'})"><svg class="icon sort-img" aria-hidden="true"><use xlink:href="#icon-daipingjia"></use></svg><br>待收货</div></div></div><div class="my-orders" ng-if="vm.uiset.btnstyle==1"><div class="sorts"><div class="sort borderright" ui-sref="collectList"><svg class="icon sort-img shoucang" aria-hidden="true"><use xlink:href="#icon-shoucang1"></use></svg><br>收藏的商品</div><div class="sort borderright" ui-sref="mycoupons"><svg class="icon sort-img youhuiquan" aria-hidden="true"><use xlink:href="#icon-youhuiquan"></use></svg><br>优惠券</div><div class="sort borderright" ui-sref="myscores"><svg class="icon sort-img jifen" aria-hidden="true"><use xlink:href="#icon-jifen2"></use></svg><br>积分</div></div></div><div ng-if="vm.uiset.btnstyle==2"><div class="my-orders" ui-sref="{{btn.navigation_link}}" ng-repeat="btn in vm.userInfoBtn"><div class="all-order-wrap2 no-bottom-border"><div class="all-order" ng-bind="btn.navigation_name"></div><div class="more"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-youjiantou"></use></svg></div><div class="clear-both"></div></div></div></div></div><footer-bar ng-if="vm.uiset.footerbar"></footer-bar>'),e.put("app/lockScoreList/lockScoreList.html",'<div class="wrapLockScoreList"><div class="header-bar"><go-back></go-back><div class="header-title">即将到账积分</div><a href="javascript:zcToUrl(\'/customize/comeoncloud/Index.aspx?key=MallHome\')" class="btnBackHomeRight"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shouye"></use></svg></a><div class="clear-both"></div></div><div class="wrapTotal">即将到账积分：<span class="themeColor font20">{{vm.lockScoreTotal}}</span></div><div class="wrapDataList"><div class="card" ng-repeat="item in vm.lockScoreList track by item.AutoId"><div class="item item-divider" ng-class="{\'themeBackgroundColor\':item.LockStatus == 0,\'black\':item.LockStatus != 0}"><span>商城下单获得积分</span> <span class="floatR" ng-if="item.LockStatus == 0">即将到账</span> <span class="floatR" ng-if="item.LockStatus == 1">已到账</span> <span class="floatR" ng-if="item.LockStatus == 2">已取消</span><div class="clear"></div></div><div class="item item-text-wrap" ng-click="vf.gotoOrderList()"><div>订单单号：{{item.ForeignkeyId}}</div><div>获得积分：{{item.Score | number:0}}</div><div>下单时间：{{item.LockTimeStr}}</div><div class="note"><span ng-if="item.LockStatus == 0">订单交易成功七天后，积分自动到账</span> <span ng-if="item.LockStatus == 1">积分已自动到账</span> <span ng-if="item.LockStatus == 2">订单已取消或者已申请退款，积分取消</span></div></div></div></div></div>'),e.put("app/main/main.html",'<div class="container"><div><acme-navbar creation-date="main.creationDate"></acme-navbar></div><div class="jumbotron text-center"><h1>\'Allo, \'Allo!</h1><p class="lead"><img src="assets/images/yeoman.png" alt="I\'m Yeoman"><br>Always a pleasure scaffolding your apps.</p><p class="animated infinite" ng-class="main.classAnimation"><button type="button" class="btn btn-lg btn-success" ng-click="main.showToastr()">Splendid Toastr</button></p><p>With ♥ thanks to the contributions of<acme-malarkey extra-values="[\'Yeoman\', \'Gulp\', \'Angular\']"></acme-malarkey></p></div><div class="row"><div class="col-sm-6 col-md-4" ng-repeat="awesomeThing in main.awesomeThings | orderBy:\'rank\'"><div class="thumbnail"><img class="pull-right" ng-src="assets/images/{{ awesomeThing.logo }}" alt="{{ awesomeThing.title }}"><div class="caption"><h3>{{ awesomeThing.title }}</h3><p>{{ awesomeThing.description }}</p><p><a ng-href="{{awesomeThing.url}}">{{ awesomeThing.url }}</a></p></div></div></div></div></div>'),e.put("app/mycoupons/mycoupons.html",'<div class="header-bar"><go-back></go-back><div class="header-title"><span ng-if="couponTitle!=\'\'" ng-bind="couponTitle"></span> <span ng-if="couponTitle==\'\'">我的优惠券</span> <a href="/customize/comeoncloud/Index.aspx?key=MallHome" class="btnBackHomeRight"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shouye"></use></svg></a></div><div class="clear-both"></div></div><div class="select-bar clearfix"><div class="select-btn-wrap" ng-class="{\'selected-btn-wrap themeColor themeBorderColor\':canuse==1}" ng-click="canUse()"><div class="select-btn">未使用</div></div><div class="select-btn-wrap" ng-class="{\'selected-btn-wrap themeColor themeBorderColor\':canuse==2}" ng-click="noCanUse()"><div class="select-btn">已使用</div></div><div class="select-btn-wrap" ng-class="{\'selected-btn-wrap themeColor themeBorderColor\':canuse==3}" ng-click="outDate()"><div class="select-btn">已过期</div></div><div class="select-btn-wrap" ng-class="{\'selected-btn-wrap themeColor themeBorderColor\':canuse==4}" ng-click="hasGiven()"><div class="select-btn">已转赠</div></div></div><div class="new-coupons" ng-if="!showEmpty"><div class="new-coupon" ng-repeat="item in couponData" on-finish-render-filters="" ng-class="{\'invalida\':!item.valid}" ng-click="goToCouponDetail(item)"><div class="coupon-type" ng-if="item.cardcoupon_type==3" ng-class="{\'invalidc\':!item.valid}">满减券</div><div class="coupon-type" ng-if="item.cardcoupon_type==2" ng-class="{\'invalidc\':!item.valid}">免邮券</div><div class="coupon-type" ng-if="item.cardcoupon_type==1" ng-class="{\'invalidc\':!item.valid}">现金券</div><div class="coupon-type" ng-if="item.cardcoupon_type==0" ng-class="{\'invalidc\':!item.valid}">折扣券</div><div class="coupon-type" ng-if="item.cardcoupon_type==4" ng-class="{\'invalidc\':!item.valid}">满送券</div><div class="coupon-content"><div class="coupon-left" ng-if="item.cardcoupon_type==0"><span class="big-word">{{item.discount}}</span> 折</div><div class="coupon-left" ng-if="item.cardcoupon_type==1">￥<span class="big-word">{{item.deductible_amount}}</span></div><div class="coupon-left" ng-if="item.cardcoupon_type==2"><span class="big-word">免邮</span></div><div class="coupon-left" ng-if="item.cardcoupon_type==3">￥<span class="big-word">{{item.buckle_sub_amount}}</span></div><div class="coupon-center"><div class="title">{{item.cardcoupon_name}}</div><div class="desc" ng-if="item.cardcoupon_type==0">使用无金额限制</div><div class="desc" ng-if="item.cardcoupon_type==1">使用无金额限制</div><div class="desc" ng-if="item.cardcoupon_type==2">满{{item.freefreight_amount}}元可用</div><div class="desc" ng-if="item.cardcoupon_type==3">满{{item.buckle_amount}}元减 {{item.buckle_sub_amount}}元</div><div class="desc" ng-if="item.cardcoupon_type==4">满{{item.buckle_amount}}送{{item.buckle_sub_amount}}</div><div class="time">{{item.valid_from}}-{{item.valid_to}}</div></div><div class="coupon-right"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-youjiantou"></use></svg></div><div class="clear-both"></div></div><div class="coupon-desc" ng-class="{\'invalidb\':!item.valid}" ng-if="item.limit_type==\'\'">全商品：任意商品可使用</div><div class="coupon-desc" ng-class="{\'invalidb\':!item.valid}" ng-if="item.limit_type==\'0\'">限商品：只限单个商品使用</div><div class="coupon-desc" ng-class="{\'invalidb\':!item.valid}" ng-if="item.limit_type==\'1\'">限商品：只限{{item.product_tags}}商品使用</div><div class="big-white-circle-left"></div><div class="big-white-circle-right"></div><div class="small-white-circle-wrap"></div><img src="assets/images/yiguoqi.png" ng-show="!item.valid" ng-class="{\'invalid-img\':!item.valid}"> <img src="assets/images/yishiyong.png" ng-show="item.cardcoupon_status" ng-class="{\'invalid-img\':item.cardcoupon_status}"></div></div><div ng-if="couponData.length===0" class="emptybasket"><div class="emptyicon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-youhuiquan"></use></svg></div><h4 class="font20">&nbsp;&nbsp;您当前没有<span ng-if="canuse==1">未使用</span><span ng-if="canuse==2">已使用</span><span ng-if="canuse==3">已过期</span><span ng-if="canuse==4">已转赠</span>的优惠券！</h4></div>'),e.put("app/myscores/myscores.html",'<div class="header-bar"><go-back></go-back><div class="header-title"><span ng-bind="pageData.type_name"></span>管理</div><a href="javascript:zcToUrl(\'/customize/comeoncloud/Index.aspx?key=MallHome\');" class="btnBackHomeRight"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shouye"></use></svg></a><div class="clear-both"></div></div><div class="scorehead themeBackground"><div class="scroes"><span class="font38" ng-bind="pageData.total"></span>&nbsp;<span ng-bind="pageData.type_name"></span></div><a href="javascript:zcToUrl(\'#/lockscores\');" class="scroerule" ng-if="pageData.lockScore">您还有&nbsp;{{pageData.lockScore}}&nbsp;积分即将到账</a></div><div class="scorenote"><ul class="scorenav"><li ng-class="{\'whichscore themeBackground\':pageData.show_type === \'\'}" ng-click="whichScoreBtn(\'\')"><span ng-bind="pageData.type_name"></span>历史</li><li ng-class="{\'whichscore themeBackground\':pageData.show_type === 1}" ng-click="whichScoreBtn(1)">收入</li><li ng-class="{\'whichscore themeBackground\':pageData.show_type === 0}" ng-click="whichScoreBtn(0)">支出</li></ul><div class="scoredetail" scroll-bottom-bind="loadMoreData()"><div ng-repeat="boxdata in pageData.list" class="onescore"><span class="font12">{{boxdata.title}}</span> <span class="font12" style="margin-left:10px;">{{boxdata.time | date:"yyyy-MM-dd HH:mm"}}</span> <span class="floatR fontblue">{{boxdata.score}}</span></div></div></div><div ng-if="pageData.nodata" style="text-align:center;"><h5>数据加载中~~</h5></div><div ng-if="!pageData.nodata" style="text-align:center;"><h5>没有更多<span ng-bind="pageData.type_name"></span>记录咯~</h5></div>'),e.put("app/oldSale/oldsale.html",'<div class="wrapSaleList"><div class="header-bar"><go-back ng-click="vm.clear_history()"></go-back><div class="header-title">{{vm.title}}</div><div class="clear-both"></div></div><shopslider aspectratio="640:230"><shop-slider-item ng-repeat="imgdata in vm.sliderdata"><img ng-src="{{imgdata.img_url}}" class="imgsize100"></shop-slider-item></shopslider><div class="row"><div class="col-sm-12"><div class="scroll-overflow" ng-if="vm.showscrollx" iscroll-x="" scroll-data="vm.scrollxyData"><table><tr><td class="sale-time-item" ng-repeat="scrollx in vm.scrollxyData"><a ng-href="{{scrollx.url}}" style="padding:10px 20px;">{{scrollx.count}}</a><div class="font14">冬装季末棉羽专场</div><div class="font16">正在疯抢</div></td></tr></table></div></div></div><div class="account-down red icon_middle_time"><svg class="icon font20 black icon-middle" aria-hidden="true"><use xlink:href="#icon-xianshitejia"></use></svg>&nbsp;还剩 {{vm.pageData.leftDay}} 天{{vm.pageData.leftHour}} 时 {{vm.pageData.leftMinus}} 分 {{vm.pageData.leftSecond}} 秒{{vm.pageData.leftName}}</div><div class="sale-sku"><div class="sale-sku-item" ng-show="0"><span class="circle"></span>&nbsp;显示有货</div><div class="sale-sku-item" ng-show="0"><svg class="icon font13" aria-hidden="true"><use xlink:href="#icon-alarm-clock"></use></svg>&nbsp;订阅开抢通知</div><div class="sale-sku-item gray78"><svg class="icon font13" aria-hidden="true"><use xlink:href="#icon-alarm-clock"></use></svg>&nbsp;已订阅</div><div class="sale-sku-item" ng-click="vm.tabClick(0)"><svg class="icon font13" aria-hidden="true"><use xlink:href="#icon-shangxiajian01"></use></svg>价格</div><div class="sale-sku-item" ng-click="vm.tabClick(1)"><svg class="icon font13" aria-hidden="true"><use xlink:href="#icon-shangxiajian01"></use></svg>折扣</div></div><div class="product-list-promotion" scroll-bottom-bind="vm.loadMoreData()"><div class="product" ng-repeat="dataBox in vm.saleProductList"><div product-box-sale=""></div></div></div></div>'),e.put("app/orderDetail/orderDetail.html",'<div class="order-detail"><div class="header-bar"><go-back></go-back><div class="header-title">订单详情</div><a href="/customize/comeoncloud/Index.aspx?key=MallHome" class="btnBackHomeRight"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shouye"></use></svg></a><div class="clear-both"></div></div><div class="wrap-order-detail-body"><div class="module status" ng-if="vm.showorder_detail"><div class="seller-state" ng-class="{\'status1\':vm.orderData.order_status==\'已取消\',\'status2\':vm.orderData.order_status==\'待发货\',\'status3\':vm.orderData.order_status==\'待付款\',\'status4\':vm.orderData.order_status==\'已发货\',\'status5\':vm.orderData.order_status==\'交易成功\'}"><div class="state-cont"><p class="h">{{vm.showStatusNm}}</p><p class="sub" ng-if="vm.orderData.order_status==\'待付款\'">剩 <span ng-show="vm.leftDay != \'00\'">{{vm.leftDay | number}}天</span> <span ng-show="vm.leftHour != \'00\'">{{vm.leftHour | number}}小时</span> {{vm.leftMinus | number}}分钟 自动取消</p><p class="sub" ng-if="vm.orderData.order_status==\'已发货\'">剩 <span ng-show="vm.leftDay != \'00\'">{{vm.leftDay | number}}天</span> <span ng-show="vm.leftHour != \'00\'">{{vm.leftHour | number}}小时</span> {{vm.leftMinus | number}}分钟 自动确认</p></div></div></div><div class="vieworderdetail" ng-if="vm.showorder_detail"><div ng-hide="vm.orderData.is_no_express == 1&& vm.orderData.is_need_name_phone == 0"><div class="statu2 font16" ng-show="vm.orderData.order_type==0||vm.orderData.order_type==7||vm.orderData.order_type==1&&(vm.orderData.gift_order_type==0||vm.orderData.gift_order_type==\'\')"><div class="fontweight">收件人信息：</div><div class="fontweight">{{vm.orderData.receiver_name}}&nbsp;&nbsp;{{vm.orderData.receiver_phone}}</div><span class="address" ng-hide="vm.orderData.is_no_express == 1">{{vm.orderData.receiver_province}}{{vm.orderData.receiver_city}}{{vm.orderData.receiver_dist}}{{vm.orderData.receiver_address}}</span></div></div><div class="clear-both"></div><div>{{vm.orderData.supplier_name}}</div><div class="statu4"><span class="floatL"><span ng-if="vm.orderData.parent_order_id!=\'\'">子<span>订单号：{{vm.orderData.order_id}}</span> <span class="floatR">&nbsp;&nbsp;下单时间:{{vm.orderData.order_time | date:\'yyyy-MM-dd\'}}</span></span></span></div><div class="clear-both"></div><div class="statu6"><div class="oderlistcontent" style="min-height: 75px;" ng-repeat="item in vm.orderData.product_list track by $index"><div class="left" ui-sref="productDetail({id:item.product_id})"><img ng-src="{{item.img_url}}?x-oss-process=image/resize,m_pad,h_140,w_140" alt="" class="orderlistimg"></div><div class="right"><div><span>{{item.product_name}}</span></div><div><span>{{item.show_property}}</span></div><div class="skus"><span class="floatL" ng-show="item.price">{{item.price | currency:\'￥\'}}</span> <span class="floatL" ng-show="item.score"><span ng-show="item.price">+</span> {{item.score}}{{vm.score_show_name}}</span> <span class="floatR">X{{item.count}} <span class="apply-refund-bt" ng-if="vm.orderData.order_type==0&&vm.orderData.is_pay&&(item.refund_status<0)||vm.orderData.order_type==1&&vm.orderData.gift_order_type==1&&vm.orderData.is_pay&&(item.refund_status<0)" ui-sref="applyRefund({orderId:vm.orderData.order_id,orderDetailId:item.order_detail_id})">申请退款</span> <span class="apply-refund-bt" ng-if="vm.orderData.order_type==0&&vm.orderData.is_pay&&(item.refund_status>=0)&&(item.refund_status!=6)&&(item.refund_status!=7)||vm.orderData.order_type==1&&vm.orderData.gift_order_type==1&&vm.orderData.is_pay&&(item.refund_status>=0)&&(item.refund_status!=6)&&(item.refund_status!=7)" ui-sref="refundState({orderId:vm.orderData.order_id,orderDetailId:item.order_detail_id})">退款中</span> <span class="apply-refund-bt" ng-if="vm.orderData.order_type==0&&vm.orderData.is_pay&&(item.refund_status==6)||vm.orderData.order_type==1&&vm.orderData.gift_order_type==1&&vm.orderData.is_pay&&(item.refund_status==6)" ui-sref="refundState({orderId:vm.orderData.order_id,orderDetailId:item.order_detail_id})">退款成功</span> <span class="apply-refund-bt" ng-if="vm.orderData.order_type==0&&vm.orderData.is_pay&&(item.refund_status==7)||vm.orderData.order_type==1&&vm.orderData.gift_order_type==1&&vm.orderData.is_pay&&(item.refund_status==7)" ui-sref="refundState({orderId:vm.orderData.order_id,orderDetailId:item.order_detail_id})">退款关闭</span></span></div></div></div></div><div style="padding-top:5px;padding-bottom: 5px;clear: both;">留言： <span ng-bind="vm.orderData.buyer_memo"></span></div><div class="statu7"><div class="nums">共{{vm.orderData.product_count}}件产品</div><div class="detailed" ng-show="vm.orderData.order_type==0||vm.orderData.order_type==7||vm.orderData.order_type==1&&vm.orderData.gift_order_type==1"><span class="floatL">商品总价&nbsp;：</span> <span class="floatR"><span ng-show="vm.totalMoney">{{vm.totalMoney | currency:\'￥\'}}</span> <span ng-show="vm.totalScore"><span ng-show="vm.totalMoney">+</span> {{vm.totalScore}}{{vm.score_show_name}}</span></span></div><div class="detailed"><span class="floatL">运&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;费：</span> <span class="floatR">{{vm.orderData.freight | currency:\'¥\'}}</span></div><div class="clear-both"></div><div class="detailed" ng-show="vm.orderData.order_type==0||vm.orderData.order_type==7||vm.orderData.order_type==1&&vm.orderData.gift_order_type==1"><span class="floatL">使用{{vm.score_show_name}}&nbsp;：</span><span class="floatR">{{vm.orderData.use_score}}{{vm.score_show_name}}</span></div><div class="detailed" ng-show="vm.orderData.order_type==0||vm.orderData.order_type==7||vm.orderData.order_type==1&&vm.orderData.gift_order_type==1"><span class="floatL">使用余额&nbsp;：</span> <span class="floatR">{{vm.orderData.use_amount | currency:\'¥\'}}</span></div><div class="detailed" ng-show="vm.orderData.order_type==0||vm.orderData.order_type==7||vm.orderData.order_type==1&&vm.orderData.gift_order_type==1"><span class="floatL">{{vm.cardcoupon_show_name}}：</span> <span class="floatR" ng-if="vm.orderData.cardcoupon"><span class="red font12">{{vm.orderData.cardcoupon}}</span> 抵{{vm.orderData.cardcoupon_exchang_amount | currency:\'¥\'}}</span><span class="floatR" ng-if="!vm.orderData.cardcoupon">无</span></div><div class="clear-both"></div><div class="detailed" ng-if="vm.orderData.order_type!=1||(vm.orderData.order_type==1&&vm.orderData.gift_order_type==1)"><span class="floatL">实&nbsp;&nbsp;付&nbsp;&nbsp;款：</span> <span class="floatR">{{vm.orderData.total_amount | currency:\'￥\'}}</span></div><div class="detailed" ng-if="vm.orderData.pay_user_info.nickname"><span class="floatL">代付信息：</span> <span class="floatR">由好友&nbsp;{{vm.orderData.pay_user_info.nickname}}&nbsp;代付&nbsp;&nbsp;<a ui-sref="anotherPay({orderId:vm.orderData.order_id})">查看代付详情</a></span></div></div><div class="statu4" ng-show="vm.orderData.order_type==1&&vm.orderData.gift_order_type==0"><span class="floatL">看看是谁送我的礼品</span></div><div class="clear-both"></div><div class="statu6" ng-show="vm.orderData.order_type==1&&vm.orderData.gift_order_type==0&&vm.orderData.is_pay==1"><div class="oderlistcontent"><img ng-src="{{vm.giftDetailData.send_user_info.head_img_url}}" alt="" class="orderlistimg gift-person"><div class="title" style="padding-left: 65px"><span class="floatL" style="width: 70%;overflow: hidden;">{{vm.giftDetailData.send_user_info.nick_name}}</span></div></div></div><div class="statu4" ng-show="vm.orderData.order_type==1&&vm.orderData.gift_order_type==1&&vm.orderData.is_pay==1"><span class="floatL">看看都有谁收了我的礼品</span></div><div class="clear-both"></div><div class="statu6" ng-show="vm.orderData.order_type==1&&vm.orderData.gift_order_type==1"><div class="oderlistcontent" ng-repeat="receiver in vm.giftDetailData.receiver_list"><img ng-src="{{receiver.head_img_url}}" alt="" class="orderlistimg gift-person"><div class="title" style="padding-left: 65px"><span class="floatL" style="width: 70%;overflow: hidden;">{{receiver.receiver_name}}</span></div></div></div><div class="statu8 floatR" ng-show="vm.orderData.order_status==\'待付款\'&&vm.orderData.parent_order_id==\'\'" ng-click="vm.pay()">付款</div><div class="statu8 floatR" ng-show="vm.orderData.order_status==\'已发货\'&&!vm.isCanClick&&vm.orderData.is_main==0" ng-click="vm.confirm()">确认收货</div><a ng-href="#/orderReview/{{vm.orderData.order_id}}" class="statu8 floatR" ng-show="vm.orderData.order_status==\'交易成功\'&&vm.orderData.is_main==0">去评价</a><div ng-show="vm.orderData.order_type==7&&vm.orderData.is_pay==1"><div>考试状态:{{vm.orderData.exam_info.status_text}}</div><div ng-show="vm.orderData.exam_info.status==1"><a href="/app/exam/exam.aspx?id={{vm.orderData.exam_info.exam_id}}">去考试</a></div><div ng-show="vm.orderData.exam_info.status==4||vm.orderData.exam_info.status==5"><a href="/app/exam/exam.aspx?id={{vm.orderData.exam_info.exam_id}}">查看考试结果</a></div></div><div class="clear-both"></div><div ng-if="vm.orderData.order_type == 2"><a href="#/waitForGroupDetail/{{vm.orderData.groupbuy_parent_order_id}}" ng-if="vm.orderData.groupbuy_parent_order_id" class="btn btn-primary btn-block btn-warning mTop10 letterSpacing4">查看该团详情</a> <a href="#/waitForGroupDetail/{{vm.orderData.order_id}}" ng-if="!vm.orderData.groupbuy_parent_order_id && vm.orderData.order_status!=\'待付款\' && vm.orderData.order_status!=\'已取消\'" class="btn btn-primary btn-block btn-warning mTop10 letterSpacing4">查看该团详情</a></div><a href="#/groupGoodsList" ng-if="vm.orderData.order_type == 2" class="btn btn-primary btn-block btn-warning mTop10 letterSpacing4">查看我参与的团</a></div><div style="width:100%;height:26px;float:right"></div></div><div pay-panel="" parms="vm.payPanel" pay-scuss="vm.dealPayScuss" pay-error="vm.dealPayError" show-close="true"></div></div>'),
e.put("app/orderList/orderList.html",'<div class="order-list"><div class="header-bar"><go-back ng-click="vm.clear_history()"></go-back><div class="header-title">{{vm.title}}</div><a href="/customize/comeoncloud/Index.aspx?key=MallHome" class="btnBackHomeRight"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shouye"></use></svg></a><div class="clear-both"></div><div class="wrap-order-list-body" ng-if="vm.pageData.status != \'待退款\'"><div class="orderlistnav row" style="border-top: 1px solid #dedede;"><div class="single col" ng-class="{select:vm.pageData.status == \'\'}" ng-click="vm.goStatusBtn(\'\')"><div class="all">全部</div><div class="" ng-bind="vm.allCount"></div></div><div class="single col" ng-class="{select:vm.pageData.status == \'待付款\'}" ng-click="vm.goStatusBtn(\'待付款\')"><div class="all">待付款</div><div class="" ng-bind="vm.waitPayCount"></div></div><div class="single col" ng-class="{select:vm.pageData.status == \'待发货\'}" ng-click="vm.goStatusBtn(\'待发货\')"><div class="all">待发货</div><div class="" ng-bind="vm.waitGoodCount">3</div></div><div class="single col" ng-class="{select:vm.pageData.status == \'待收货\'}" ng-click="vm.goStatusBtn(\'待收货\')"><div class="all">待收货</div><div class="" ng-bind="vm.waitReceiveCount"></div></div><div class="single col" ng-class="{select:vm.pageData.status == \'待评价\'}" ng-click="vm.goStatusBtn(\'待评价\')"><div class="all">待评价</div><div class="" ng-bind="vm.waitReviewCount"></div></div><div class="BKline"></div></div></div></div><div class="wrap-order-list-body"><div class="the-list" ng-style="{\'margin-top\':vm.pageData.status != \'待退款\'?\'80px\':\'-1px\'}"><div class="the-order" ng-repeat="item in vm.pageData.list" ng-show="(item.is_main==1&&item.is_pay==0)||(item.is_pay==1&&item.parent_order_id!=\'\')||(item.parent_order_id==\'\'&&item.is_main==0)" scroll-bottom-bind="vm.loadMoreData()"><div class="order-title"><div class="icon-tuan" ng-show="item.order_type==2"><svg class="icon order-icon themeColor" aria-hidden="true"><use xlink:href="#icon-tuangouyuan"></use></svg></div><div class="icon-yugou" ng-show="item.order_type==0&&item.is_appointment==1"><svg class="icon order-icon themeColor" aria-hidden="true"><use xlink:href="#icon-yugou"></use></svg></div><div ng-if="item.supplier_name!=null&&item.supplier_name!=\'\'"><span>{{item.supplier_name}}</span></div><div class="order-id" ui-sref="orderDetail({orderID:item.order_id})"><span ng-if="item.is_main==1">主</span><span ng-if="item.parent_order_id!=\'\'">子</span>订单号：{{item.order_id}}&nbsp;{{item.order_status}}</div><div class="order-time">{{item.order_time | date:\'yyyy/MM/dd HH:mm\'}}</div><div class="clear-both"></div></div><div class="order-content" ng-repeat="product in item.product_list track by $index"><div class="product-img"><img ng-src="{{product.img_url}}?x-oss-process=image/resize,m_pad,h_140,w_140"></div><div class="product-info" ng-if="item.order_type!=2" ui-sref="orderDetail({orderID:item.order_id})"><div class="product-name">{{product.product_name}}</div><div class="product-sku">{{product.show_property}}</div></div><div class="product-info" ng-if="item.order_type==2" ui-sref="waitForGroupDetail({goodsGroupId:item.order_id})"><div class="product-name">{{product.product_name}}</div><div class="product-sku">{{product.show_property}}</div></div><div class="product-prices"><div class="the-price">{{product.price | currency:\'￥\'}}</div><div class="old-price">{{product.quote_price | currency:\'￥\'}}</div><div class="num">X{{product.count}}</div></div><div class="clear-both"></div></div><div class="total-price">共{{item.product_count}}件商品，合计：{{item.total_amount | currency:\'￥\'}}</div><div class="bottom-wrap"><span class="btn-default" ng-if="item.order_status==\'待付款\'&&item.parent_order_id==\'\'" ng-click="vm.pageFunc.pay(item)">立即支付</span> <span class="btn-default" ng-if="item.order_status==\'已取消\'">已取消</span> <span class="btn-active" ng-if="item.order_status==\'待付款\'&&item.parent_order_id==\'\'" ng-click="vm.pageFunc.deleteorder($index)">取消订单</span> <span class="btn-default" ng-if="item.express_number" ui-sref="expressInfo({orderId:item.order_id})">查看物流</span> <span class="btn-active" ng-if="item.order_status==\'已发货\'" ng-click="vm.pageFunc.confirm($index)">确认收货</span> <a ng-href="#/orderReview/{{item.order_id}}" class="btn-active" ng-if="item.order_status==\'交易成功\' && item.review_score == 0">去评价</a></div></div></div><div class="nomoreorder" ng-if="!vm.nodata">数据加载中~</div><div class="nomoreorder" ng-if="vm.nodata">没有更多订单了额~</div></div><div pay-panel="" parms="vm.payPanel" pay-error="vm.pageFunc.dealPayError" show-close="true"></div></div>'),e.put("app/orderReview/orderReview.html",'<div class="wrapOrderReview"><div class="header-bar"><go-back></go-back><div class="header-title">订单评价</div><a href="/customize/comeoncloud/Index.aspx?key=MallHome" class="btnBackHomeRight"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shouye"></use></svg></a><div class="clear-both"></div></div><div class="wrapProductList list"><div ng-repeat="item in vm.order.product_list"><a class="item item-thumbnail-left item-icon-right" href="#/productDetail/{{item.product_id}}"><img src="{{item.img_url}}?x-oss-process=image/resize,m_pad,h_160,w_160"><h2>{{item.product_name}}</h2><span class="price"><span ng-if="item.price">￥{{item.price}}</span> <span ng-if="item.score"><span ng-if="item.price">+</span> {{item.score}}积分</span></span><svg class="icon iconRight" aria-hidden="true"><use xlink:href="#icon-youjiantou"></use></svg></a><div class="wrapOpeate"><div class="sku"><span>{{item.show_property}}</span></div><a href="javascript:;" class="button button-small" ng-show="item.review_score > 0" ng-click="item.showReviewPanel = !item.showReviewPanel">查看评价<svg class="icon" aria-hidden="true" ng-show="!item.showReviewPanel"><use xlink:href="#icon-arrowdown"></use></svg><svg class="icon" aria-hidden="true" ng-show="item.showReviewPanel"><use xlink:href="#icon-arrowup"></use></svg></a><a href="javascript:;" class="button button-small button-positive themeBackgroundColor themeBorderColor" ng-show="item.review_score == 0" ng-click="item.showReviewPanel = !item.showReviewPanel">填写评价<svg class="icon" aria-hidden="true" ng-show="!item.showReviewPanel"><use xlink:href="#icon-arrowdown"></use></svg><svg class="icon" aria-hidden="true" ng-show="item.showReviewPanel"><use xlink:href="#icon-arrowup"></use></svg></a></div><div class="wrapPostReview" ng-show="item.showReviewPanel"><div class="reviewScore row"><div class="scoreTitle col-20"><span>评分：</span></div><div class="scoreStars col-80"><svg class="icon" aria-hidden="true" ng-repeat="star in item.reviewStars track by $index" ng-click="vf.selectStar($index,item)"><use xlink:href="#icon-yishoucang" ng-if="star"></use><use xlink:href="#icon-shoucang" ng-if="!star"></use></svg></div></div><div><textarea ng-show="item.review_score == 0" placeholder="这次购买的商品满意吗？写点心得给其他顾客参考参考吧。长度在5-150字之间" ng-model="item.review_content"></textarea> <span style="padding: 6px;" ng-show="item.review_score > 0">{{item.review_content}}</span></div><div class="imgTitle" ng-show="!item.comment_img&&item.review_score == 0"><span>添加图片：</span> <span class="title-desc">(最多可上传3张图片)</span></div><div class="weui-cells weui-cells_form" ng-show="!item.comment_img&&item.review_score == 0"><div class="weui-cell" style="padding: 5px;"><div class="weui-cell__bd"><div class="weui-uploader"><div class="weui-uploader__bd"><ul class="weui-uploader__files"><li class="weui-uploader__file" ng-repeat="img in item.imgList track by $index" ng-style="{ \'margin\':\'5px\',\'background-image\':\'url(\'+img+\')\',\'position\':\'relative\' }"><input type="file" data-parent-index="{{$parent.$index}}" data-index="{{$index}}" onchange="angular.element(this).scope().vf.FileInputChange(this,1)" accept="image/jpeg;image/png;image/gif;" class="weui-uploader__input"></li></ul><div class="weui-uploader__input-box" style="margin:5px;position:relative;" ng-if="item.imgList.length<vm.maxImgCount"><input id="uploaderInput" type="file" data-parent-index="{{$parent.$index}}" onchange="angular.element(this).scope().vf.FileInputChange(this,0)" accept="image/jpeg;image/png;image/gif;" multiple="multiple" class="weui-uploader__input"></div></div></div></div></div></div><div class="weui-cells weui-cells_form" style="background-color:#f5f5f5 !important;" ng-show="item.comment_img&&item.imgList.length>0"><div class="weui-cell" style="padding: 5px;"><div class="weui-cell__bd"><div class="weui-uploader"><div class="weui-uploader__bd"><ul class="weui-uploader__files"><li class="weui-uploader__file" ng-repeat="img in item.imgList track by $index" ng-style="{ \'margin\':\'5px\',\'background-image\':\'url(\'+img+\')\',\'position\':\'relative\' }"></li></ul></div></div></div></div></div><div ng-show="item.review_score == 0"><a href="javascript:;" class="button button-block button-positive button-small themeBackgroundColor themeBorderColor" ng-click="vf.submitReview(item)" ng-show="!item.submited">发表评价</a> <a href="javascript:;" class="button button-block button-positive button-small" ng-show="item.submited">评价发表中...</a></div></div><div class="blockLine"></div></div></div></div>'),e.put("app/paySuccess/payError.html",'<div class="pay-success"><h1 class="error">付款失败!</h1><h3>订单金额: <span ng-bind="payMoney|currency:\'￥\':2"></span></h3><a class="btn btn-block btn-success" ui-sref="orderDetail({orderID:order_id})">查看订单</a> <a class="btn btn-block btn-success" ui-sref="home">继续购物</a></div>'),e.put("app/paySuccess/paySuccess.html",'<div class="pay-success"><h1 class="success">付款成功!</h1><h3>订单金额: <span ng-bind="payMoney|currency:\'￥\':2"></span></h3><a class="btn btn-block btn-success" ui-sref="orderDetail({orderID:order_id})">查看订单</a> <a class="btn btn-block btn-success" ui-sref="home">继续购物</a></div>'),e.put("app/productDetail/productDetail.html",'<div class="product-detail"><div class="header-bar"><go-back></go-back><div class="header-title">商品详情</div><div class="bug-car" ui-sref="shopBasket"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-gouwuche"></use></svg><div class="card_nums" ng-if="is_shownums" ng-bind="shop_nums" id="lblC">0</div></div><div class="clear-both"></div></div><div class="product-img" ng-if="sliderdata[0].datalist.length==1"><img class="img-detail" src="{{sliderdata[0].datalist[0]}}"></div><div ng-if="sliderdata[0].datalist.length>1"><slider aspectratio="{{MALLCONFIG.mallconfignew.product_img_ratio1}}:{{MALLCONFIG.mallconfignew.product_img_ratio2}}" ng-repeat="slider in sliderdata"><slider-item ng-repeat="imgdata in slider.datalist"><img ng-src="{{imgdata}}" class="imgsize100"></slider-item></slider></div><div class="product-info"><div class="product-name">{{productDetailData.title}}</div><div class="warp-price-info"><span ng-if="!vm.isShowPromotion"><span ng-show="productDetailData.price" class="product-price"><span class="font12">￥</span> {{productDetailData.price | currency:"":2}}</span></span> <span ng-if="vm.isShowPromotion"><span ng-show="productDetailData.promotion_price" class="product-price"><span class="font12">￥</span> {{productDetailData.promotion_price | currency:"":2}}</span></span> <span ng-show="productDetailData.score"><span ng-show="productDetailData.price">+</span> <span class="product-price" ng-bind="productDetailData.score"></span> <span>积分</span></span> &nbsp; <span class="rebateScore themeBackgroundColor" ng-if="productDetailData.rebate_score">返利 {{productDetailData.rebate_score}} 积分</span> &nbsp; <span class="old-price" ng-show="MALLCONFIG.mallconfignew.is_show_oldprice && productDetailData.price <= orderProduct.quote_price">{{orderProduct.quote_price | currency:"￥":2}}</span> <span class="product_sale" ng-if="vm.mall_config.is_show_product_sale">销量：{{productDetailData.sale_count}}</span></div><div ng-if="productDetailData.appointment_info.status==0"><div class="wrapPromotion appointmentbg"><span class="floatL">{{productDetailData.appointment_info.appointment_start_time|date:\'yyyy年-MM月-dd日 hh:mm:ss\'}}</span> &nbsp;开始预购<div class="clear"></div></div></div><div ng-if="productDetailData.appointment_info.status==1&&1==0"><div class="wrapPromotion appointmentbg"><span class="floatL">{{productDetailData.appointment_info.appointment_end_time|date:\'yyyy年-MM月-dd日 hh:mm:ss\'}}</span> &nbsp;结束预购<div class="clear"></div></div></div><div ng-show="productDetailData.is_appointment==1&&productDetailData.appointment_info.status==1"><div class="wrapPromotion appointmentbg"><span class="floatL top3">预购时间还剩<span ng-if="vm.leftDay1">{{vm.leftDay1}}天</span><span ng-if="vm.leftHour1">{{vm.leftHour1}}时</span>{{vm.leftMinus1}}分{{vm.leftSecond1}}秒结束</span> <span class="topleftdiscount themeBackgroundColor floatR">预购中</span><div class="clear"></div></div><div ng-if="productDetailData.appointment_info.status==1"><div class="font12 pLeft10 pTop4"><span class="floatL">注：购买后 <span class="top1">{{productDetailData.appointment_info.appointment_delivery_time|date:\'yyyy-MM-dd\' }}</span></span> &nbsp;前发货<div class="clear"></div></div></div></div></div><div class="blockLine"></div><div ng-if="vm.isShowPromotion"><div class="wrapPromotion"><span class="floatL"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shizhong"></use></svg>还剩<span ng-if="vm.leftDay">{{vm.leftDay}}天</span><span ng-if="vm.leftHour">{{vm.leftHour}}时</span>{{vm.leftMinus}}分{{vm.leftSecond}}秒结束</span> <span class="topleftdiscount themeBackgroundColor floatR">特卖中￥{{productDetailData.promotion_price| number:2}}</span><div class="clear"></div></div><div class="blockLine"></div></div><div class="product-info-more"><ul><li>商品介绍</li></ul></div><div class="img-text-info" ng-bind-html="mallConfig.mall_desc_top"></div><div class="img-text-info" ng-bind-html="productDetailData.product_desc"></div><div class="img-text-info" ng-bind-html="mallConfig.mall_desc_bottom"></div><div class="wrapReview" ng-show="vm.reviewList.length > 0"><div class="blockLine"></div><div class="product-info-more"><ul><li>商品评价</li></ul></div><div class="wrapReviewList"><div class="review" ng-repeat="item in vm.reviewList"><div class="title"><img class="floatL userAvatar" src="{{item.pub_user.avatar}}" onerror="javascript:this.src=\'http://open-files.comeoncloud.net/www/guicai/jubit/image/20160325/A12476F2D0CD4B8FA037267F393BF69E.png\';" alt=""> <span class="userName floatL">{{item.pub_user.name}}</span><div class="starList floatR"><svg class="icon" aria-hidden="true" ng-repeat="star in item.stars"><use xlink:href="#icon-yishoucang"></use></svg></div><div class="clear"></div></div><div>{{item.content}}</div><div class="weui-cells weui-cells_form" style="margin-bottom:0px;" ng-if="item.comment_img"><div class="weui-cell" style="padding: 0px;margin-bottom:0px;"><div class="weui-cell__bd" style="margin-bottom:0px;"><div class="weui-uploader" style="margin-bottom:0px;"><div class="weui-uploader__bd" style="margin-bottom:0px;"><ul class="weui-uploader__files" style="margin-bottom:0px;"><li class="weui-uploader__file" ng-repeat="img in item.comment_img.split(\',\') track by $index"><img ng-style="{\'margin\':\'5px 5px 0px 0px;\',\'width\':\'100%\',\'height\':\'100%\'}" src="{{img}}"></li></ul></div></div></div></div></div><div class="showprops">{{item.showprops}}</div><div>{{item.time | date:\'yyyy-MM-dd\'}}</div></div></div></div></div><div class="footer-buy" ng-show="sysConfig"><div class="collection-wrap borderRightGrey width13P"><div class="collection-img themeColor" ng-click="goToOtherUrl()"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shouye"></use></svg></div><div class="collection-text font12">首页</div></div><div class="collection-wrap borderRightGrey width13P" ng-click="vm.showShare=true"><div class="collection-img themeColor"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-fenxiang"></use></svg></div><div class="collection-text font12">分享</div></div><div class="collection-wrap width13P" ng-click="addCollectFunc()" ng-if="!productDetailData.is_collect"><div class="collection-img"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shoucang2"></use></svg></div><div class="collection-text font12">收藏</div></div><div class="collection-wrap width13P" ng-click="delCollectFunc()" ng-if="productDetailData.is_collect"><div class="collection-img collect-yellow"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shoucang1"></use></svg></div><div class="collection-text font12">收藏</div></div><div class="shopping-car" ng-click="addToShopCar()" ng-show="productDetailData.is_appointment==0">加入购物车</div><div class="buy-now themeBackground" ng-click="buyNow()" ng-show="productDetailData.is_appointment==0">立即购买</div><div class="buy-now themeBackground appointment" ng-click="buyNow()" ng-show="productDetailData.is_appointment==1&&productDetailData.appointment_info.status==1">立即预购</div><div class="buy-now themeBackground appointment" ng-show="productDetailData.is_appointment==1&&productDetailData.appointment_info.status==0">未到预购时间</div><div class="buy-now themeBackground appointment" ng-show="productDetailData.is_appointment==1&&productDetailData.appointment_info.status==2">预购时间已过</div><div class="clear-both"></div></div><div class="sku-page" ng-show="showSKU"><div class="sku-content"><div class="sku-div"><div class="sku-img-wrap"><img class="sku-img" ng-src="{{vm.sku_img}}"></div><div class="sku-txt"><div class="guanbi" ng-click="skuClose()"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-guanbi"></use></svg></div><div class="sku-price"><span ng-show="orderProduct.price">{{orderProduct.price | currency:"￥":2}}</span> <span ng-show="orderProduct.score"><span ng-show="orderProduct.price">+</span> {{orderProduct.score}} <span>积分</span></span></div><span class="rebateScore" ng-if="orderProduct.rebate_score">返利 {{orderProduct.rebate_score}} 积分</span><div ng-show="!vm.mall_config.is_show_stock">库存{{orderProduct.count}}件</div><div ng-show="vm.mall_config.is_show_stock"><div ng-show="orderProduct.count>0&&orderProduct.count>=vm.mall_config.is_show_stock_value">库存充足</div><div ng-show="orderProduct.count>0&&orderProduct.count<vm.mall_config.is_show_stock_value">库存紧张</div><div ng-show="orderProduct.count==0">无库存</div></div></div><div class="clear-both"></div></div><div id="sku-main-panel" class="sku-main-panel"><div class="sku-div" ng-repeat="propertyItem in productPropertyData" ng-init="skuIndex=$index"><div class="sku-name">{{propertyItem.name}}</div><span class="sku-value-label" ng-repeat="propertyValue in propertyItem.values" ng-click="selectSkuValue(skuIndex,$index)" ng-class="{\'sku-value-label-checked\':propertyValue.checked,\'sku-value-label-nocheck\':propertyValue.countnum==0}">{{propertyValue.value}}</span><div class="clear"></div></div><div class="clear"></div></div><div class="sku-div"><div class="buy-num-name">购买数量</div><div class="buy-num-wrap"><span class="buy-num-del" ng-click="delNum()"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-jian"></use></svg></span> <input type="input" class="buy-num" ng-model="orderProduct.num" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}" ng-change="checknum()"> <span class="buy-num-add" ng-click="addNum()"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-jianum"></use></svg></span></div><div class="clear-both"></div></div><div class="sure-bt btnBuySureConfirm themeBackground" ng-show="buynow&&Basket!=2" ng-click="buySure()">确&nbsp;定</div><div class="sure-bt btnCarSureConfirm themeBackground" ng-show="!buynow&&Basket!=2" ng-click="carSure()">确&nbsp;定</div><div class="sure-bt btnGiveGiftBtnConfirm themeBackground" ng-show="Basket==2" ng-click="giveGiftBtn()">送&nbsp;礼</div></div></div><div class="stock-page" ng-show="vm.showStock"><div class="stock-content"><div class="sku-div"><div class="sku-txt"><div class="guanbi" ng-click="stockClose()"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-guanbi"></use></svg></div><div class="stock-title">缺货登记表</div><div class="stock-desc">您选择的商品当前没有库存,请登记你所需要的商品规格。</div></div><div class="clear-both"></div></div><div class="sku-div" ng-repeat="propertyItem in vm.noStockPVList"><div class="sku-name">{{propertyItem.name}}</div><span class="sku-value-label" ng-class="{\'sku-value-label-checked\':propertyValue.selected,\'sku-value-label-nocheck\':!propertyValue.canSelect}" ng-repeat="propertyValue in propertyItem.values" ng-click="vf.selectNoStockPV(propertyValue)">{{propertyValue.value}}</span></div><div class="sku-div"><div class="buy-num-name">登记数量</div><div class="buy-num-wrap"><span class="buy-num-del" ng-click="stockDelNum()"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-jian"></use></svg></span> <input type="input" maxlength="5" class="buy-num" ng-model="stockProduct.num" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}" ng-change=""> <span class="buy-num-add" ng-click="stockAddNum()"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-jianum"></use></svg></span></div><div class="clear-both"></div></div><div class="sure-bt"><a ng-click="stockSubmit()">提&nbsp;交</a></div></div></div><div ng-show="vm.showShare" ng-style="{\'height\':vm.i_height+\'px\'}" style="width: 100%; background: #000; opacity: 0.7; position: fixed; top: 0; left: 0; z-index: 999999; text-align: right;" ng-click="vm.showShare=false">&nbsp;</div><div ng-show="vm.showShare" style="position: fixed; z-index: 1000000; right: 0; top: 0; width: 100%; text-align: right;" ng-click="vm.showShare=false"><img src="http://comeoncloud-static.oss-cn-hangzhou.aliyuncs.com/img/sharetip.png" width="100%"></div><div ng-show="vm.showWxPay" ng-style="{\'height\':vm.i_height+\'px\'}" style="width: 100%; background: #000; opacity: 0.7; position: fixed; top: 0; left: 0; z-index: 999999; text-align: right;" ng-click="vm.showWxPay=false">&nbsp;</div><div ng-show="vm.showWxPay" style="position: fixed; z-index: 1000000; right: 0; top: 0; width: 100%; text-align: right;" ng-click="vm.showWxPay=false"><img src="http://comeoncloud.comeoncloud.net/img/paytip.png" width="100%"></div>'),e.put("app/productList/productList.html",'<div class="wrapProductList"><div class="product-list-wrap"><div class="header"><div class="menu-wrap" ng-click="showMenus()"><svg class="icon mulu" aria-hidden="true"><use xlink:href="#icon-mulu"></use></svg></div><div class="search-wrap"><span class="the-logo"><svg class="icon fangdajing" aria-hidden="true"><use xlink:href="#icon-fangdajing"></use></svg></span> <span class="the-search"><input type="text" ng-model="pdlist.pageData.searchInfo" id="searchInput" placeholder="{{pdlist.placeholder}}" class="search-input" ng-focus="pdlist.startSearch()" ng-blur="pdlist.nosearch()" ng-change="pdlist.checkSearchInfo()"><div class="clear-both"></div></span><div class="clear-both"></div></div><div class="cancel-btn" ng-if="pdlist.quxiao" ng-click="pdlist.cancelSearch()">取消</div><div class="search-btn" ng-if="pdlist.searchBtn" ng-click="pdlist.goSearch()">搜索</div><div class="clear-both"></div></div><div class="sale-sku"><div class="sale-sku-item" ng-class="{currSelected:pdlist.selected==1}" ng-click="pdlist.sortByPrice(\'\');pdlist.selected=1;">默认</div><div class="sale-sku-item" ng-class="{currSelected:pdlist.selected==2}" ng-click="pdlist.sortByPrice(\'price_asc\');pdlist.selected=2;">价格↑</div><div class="sale-sku-item" ng-class="{currSelected:pdlist.selected==3}" ng-click="pdlist.sortByPrice(\'price_desc\');pdlist.selected=3;">价格↓</div><div class="sale-sku-item" ng-class="{currSelected:pdlist.selected==4}" ng-click="pdlist.sortByPrice(\'sales_volume\');pdlist.selected=4;">销量</div></div><div class="condition-mask" ng-show="pdlist.conditionSort" ng-click="pdlist.closeCondition()"></div><div class="content"><product-box-list scroll-bottom-bind="pdlist.loadMoreData()"><product-box ng-click="pdlist.goProductDetail(productItem)" ng-repeat="productItem in pdlist.productListData track by $index" class="col-50"></product-box></product-box-list></div></div><side-menu ng-show="sideMenus"></side-menu><footer-bar ng-if="!pdlist.searchMask&&!pdlist.searchRelateMask"></footer-bar></div>'),e.put("app/receiveAddress/receiveAddress.html",'<div class="receive-address"><div class="header-bar"><go-back></go-back><div class="header-title">寄送地址</div><div class="clear-both"></div></div><div class="info-wrap"><input class="info-input margin-tp20 black" placeholder="姓名" ng-model="pageData.consigneename"> <input class="info-input margin-tp14" placeholder="手机号" ng-model="pageData.phone"><select class="info-input margin-tp14" ng-change="pageFunc.getCity()" ng-model="pageData.province" ng-options="province.name for province in pageData.provinceList"></select><select class="info-input margin-tp14" ng-change="pageFunc.getDistrict()" ng-model="pageData.city" ng-options="city.name for city in pageData.cityList"></select><select class="info-input margin-tp14" ng-model="pageData.district" ng-options="district.name for district in pageData.districtList"></select><textarea class="margin-tp14 addtext" placeholder="详细地址" ng-model="pageData.address"></textarea><div class="publicbtn margin-tp45 themeBackgroundColor" ng-click="pageFunc.addReceiveAddress()">确认寄送信息</div></div></div>'),e.put("app/receiveAddressList/receiveAddressList.html",'<div class="receive-address-list"><div class="header-bar"><go-back></go-back><div class="header-title">地址列表</div><div class="clear-both"></div></div><div class="receive-item">增加新地址<div class="edit-bt floatR" ui-sref="receiveAddress"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-edit"></use></svg>添加</div><div class="clear-both"></div></div><div class="receive-item" ng-repeat="item in pageData.list"><p ng-click="isGotoCreateBtn(item)">{{item.consigneename}} {{item.phone}}</p><p class="gray78" ng-click="isGotoCreateBtn(item)">{{item.province}} {{item.city}} {{item.dist}} {{item.address}}</p><div><svg class="icon red-select themeColor floatL" ng-show="item.isdefault==1" aria-hidden="true"><use xlink:href="#icon-iconfontxuanze"></use></svg><span class="gray78" ng-show="item.isdefault==1">&nbsp;&nbsp;默认地址</span><svg class="icon white-select floatL" ng-show="item.isdefault==0" aria-hidden="true" ng-click="pageFunc.setDefaultReceiveAdd(item)"><use xlink:href="#icon-iconfontxuanze"></use></svg><span class="gray78" ng-show="item.isdefault==0" ng-click="pageFunc.setDefaultReceiveAdd(item)">&nbsp;&nbsp;设为默认地址</span><div class="edit-bt floatR" ng-click="pageFunc.deleteReceiveAddress(item.address_id)"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-guanbi"></use></svg>删除</div><div class="edit-bt floatR" ui-sref="receiveAddressUpdata({addressId:item.address_id})"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-edit"></use></svg>编辑</div><div class="clear-both"></div></div></div></div>'),e.put("app/saleList/saleList.html",'<div class="wrapSaleList"><div class="header-bar"><go-back ng-click="vm.clear_history()"></go-back><div class="header-title">{{vm.title}}</div><div class="clear-both"></div></div><shopslider aspectratio="640:230"><shop-slider-item ng-repeat="imgdata in vm.sliderdata"><img ng-src="{{imgdata.img_url}}" class="imgsize100"></shop-slider-item></shopslider><div class="row wrapSaleTab"><div class="col-sm-12"><div class="scroll-overflow" ng-if="vm.showscrollx" iscroll-x="" scroll-data="vm.scrollxyData"><table id="sale"><tr><td class="sale-time-item" ng-class="{onthesale:(scrollx.isSelected==$index)}" ng-repeat="scrollx in vm.scrollxyData" ng-click="vm.clickWeek(scrollx,$index)"><div class="font14" ng-bind="scrollx.promotion_activity_name"></div><div class="font14">{{scrollx.promotion_activity_start_time | date:\'MM-dd HH:mm\'}}至{{scrollx.promotion_activity_stop_time | date:\'MM-dd HH:mm\'}}</div><div class="font16" ng-if="scrollx.status==0">正在疯抢</div><div class="font16" ng-if="scrollx.status==1">抢先看</div><div class="font16" ng-if="scrollx.status==2">已结束</div></td></tr></table></div></div></div><div class="account-down red icon_middle_time" ng-if="vm.stopCompare>0"><svg class="icon font20 black icon-middle" aria-hidden="true"><use xlink:href="#icon-xianshitejia"></use></svg>&nbsp;还剩 {{vm.pageData.leftDay}} 天{{vm.pageData.leftHour}} 时 {{vm.pageData.leftMinus}} 分 {{vm.pageData.leftSecond}} 秒{{vm.leftName}}</div><div class="account-down red icon_middle_time" ng-if="vm.stopCompare<0">该特卖场次已结束</div><div class="sale-sku"><div class="sale-sku-item" ng-show="0"><span class="circle"></span>&nbsp;显示有货</div><div class="sale-sku-item" ng-show="0"><svg class="icon font13" aria-hidden="true"><use xlink:href="#icon-alarm-clock"></use></svg>&nbsp;订阅开抢通知</div><div class="sale-sku-item gray78"><svg class="icon font13" aria-hidden="true"><use xlink:href="#icon-alarm-clock"></use></svg>&nbsp;已订阅</div><div class="sale-sku-item" ng-click="vm.tabClick(0)"><svg class="icon font13" aria-hidden="true"><use xlink:href="#icon-shangxiajian01"></use></svg>价格</div><div class="sale-sku-item" ng-click="vm.tabClick(1)"><svg class="icon font13" aria-hidden="true"><use xlink:href="#icon-shangxiajian01"></use></svg>折扣</div></div><product-box-list scroll-bottom-bind="vm.loadMoreData()"><sale-box style="width: 100%;" ng-repeat="dataBox in vm.saleProductList"></sale-box></product-box-list></div>'),e.put("app/shopBasket/shopBasket.html",'<div class="shopheader"><go-back></go-back><div class="header-title">购物车</div><div class="clear-both"></div></div><div class="addshoppro" ng-repeat="supplieritem in basketListDataGroup"><div ng-if="supplieritem.supplier_name!=\'\'"><div class="floatL selectbox" ng-click="slectemeBtnSupplier(supplieritem)"><svg class="icon noselect" ng-class="{\'selected\':supplieritem.selected == true}" aria-hidden="true"><use xlink:href="#icon-iconfontxuanze"></use></svg></div><span ng-click="slectemeBtnSupplier(supplieritem)">{{supplieritem.supplier_name}}</span><hr></div><div class="onepro" ng-repeat="item in supplieritem.product_list" style="border-bottom:none;"><div class="floatL selectbox" ng-click="slectemeBtn(item)"><svg class="icon noselect" ng-class="{\'selected\':item.selected == true}" aria-hidden="true"><use xlink:href="#icon-iconfontxuanze"></use></svg></div><div class="floatL proimg" ui-sref="productDetail({id:item.product_id})"><img ng-src="{{item.img_url}}" alt=""></div><div class="oneproinfo floatL"><div class="oneproinfotitle lineheight_30"><span class="floatL protitle" ui-sref="productDetail({id:item.product_id})">{{item.title}}</span> <span class="delbot" ng-click="delme(item,$event)">删除</span></div><div class="lineheight_30">{{item.properties}}</div><div class="editnumbot"><span class="floatL">数量</span><div class="floatL editbox"><svg class="icon editboxL" aria-hidden="true" ng-click="delnum(item,$event)"><use xlink:href="#icon-jian"></use></svg><div class="editnumbox"><input type="text" ng-model="item.count" ng-change="checknum(item)"></div><svg class="icon editboxR" aria-hidden="true" ng-click="addnum(item,$event)"><use xlink:href="#icon-jianum"></use></svg></div><div class="onepropri"><span ng-show="item.price">{{item.price * item.count | currency:\'￥\'}}</span> <span ng-show="item.score"><span ng-show="item.price">+</span> <span>{{item.score * item.count}}</span> <span>积分</span></span></div></div></div></div><div><hr></div><div class="clearboth"></div></div><div class="emptybasket" ng-if="showempty"><div class="emptyicon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-gouwuche"></use></svg></div><h4 class="font20">&nbsp;&nbsp;购物车空空如也！</h4><div class="font16 colora0">快来给自己挑点宝贝吧</div><div class="gotopro" ng-click="goHome()"><a href="" class="font16">去逛逛</a></div></div><div style="height:100px;width:100%;"></div><div class="shopbottom" ng-class="{\'btmZero\':!hasBottomNav}"><div class="lblRemark"><svg class="icon noselect" ng-class="{selected:selectedall == true}" aria-hidden="true" ng-click="selectedallBtn()"><use xlink:href="#icon-iconfontxuanze"></use></svg><span ng-click="selectedallBtn()">全选</span> &nbsp;合计：</div><div class="lblTotal"><span class="fontyellow"><span ng-show="productTotalPrice">{{productTotalPrice | currency:\'￥\'}}</span> <span ng-show="productTotalPrice"><br>不含运费</span> <span ng-show="productTotalScore"><br><span ng-show="productTotalPrice">+</span> <span>{{productTotalScore}}</span> <span>积分</span></span></span></div><div class="buybtn themeBackground" ng-click="goCreateOrder()">去结算</div></div>'),
e.put("app/userMange/userMange.html",'<div ng-if="false"><div class="header-bar"><go-back></go-back><div class="header-title">用户信息</div><div class="more button button-small" ng-if="!vm.isShowEdit&&vm.isShowBtn" ng-click="vf.getUserField();vm.isShowEdit=true;">编辑</div><div class="more button button-small" ng-if="vm.isShowEdit&&vm.isShowBtn" ng-click="vf.beforeSubmitCheck()">保存更改</div><div class="clear-both"></div></div><form class="form-horizontal" ng-if="vm.isShowEdit" ng-submit="vf.beforeSubmitCheck()"><div class="editinfo inputedit" ng-repeat="item in vm.fieldList" ng-class="{mTop:$index==0}"><div class="info-one" ng-class="{marginTop20:$index==0}"><div class="onleft">{{item.field_name}}：</div><div class="more" ng-if="item.type==\'txt\'"><input type="text" ng-disabled="{{(item.read_only==1)}}" ng-class="{width100:item.type==\'txt\'}" ng-model="item.value" placeholder="{{item.field_name}}" ng-required="{{(item.no_null==1)}}" ng-change="vf.isPhoneChange(item)"></div><div class="more" ng-if="item.type==\'img\'" ng-required="{{(item.no_null==1)}}"><label class="addpicbtn label0 fileContainer" for="upLoadImg0"><svg class="icon font28 jia0" aria-hidden="true"><use xlink:href="#icon-jia"></use></svg><input class="userpic" ng-disabled="{{(item.read_only==1)}}" accept="image/*" type="file" id="upLoadImg0"></label></div><div class="more" ng-if="item.type==\'sex\'"><span><input class="radiobtn" ng-disabled="{{(item.read_only==1)}}" type="radio" id="rdoSexGender1" ng-model="item.value" name="rdoSexGender" value="1"> <span class="radio-male" for="rdoSexGender1">男</span> <input class="radiobtn" ng-disabled="{{(item.read_only==1)}}" type="radio" id="rdoSexGender2" ng-model="item.value" name="rdoSexGender" value="0"> <span class="radio-male" for="rdoSexGender2">女</span></span></div><div class="more" ng-if="item.type==\'date\'" ng-required="{{(item.no_null==1)}}"><input type="date" ng-disabled="{{(item.read_only==1)}}" ng-model="item.value" placeholder="{{item.field_name}}"></div><div class="more" ng-if="item.type==\'mult\'"><textarea class="Description" ng-disabled="{{(item.read_only==1)}}" rows="5" ng-model="item.value" placeholder="{{item.field_name}}" ng-required="{{(item.no_null==1)}}"></textarea></div><div class="clear-both"></div></div><div class="info-one" ng-if="(item.field==\'Phone\'&&vm.isPhoneNull)||(item.field==\'Phone\'&&vm.isShowCode)"><div class="onleft">验证码：</div><div class="more"><input class="checkcode" type="text" ng-model="vm.code" placeholder="验证码" ng-required="{{(vm.fieldList[vm.phoneIndex].no_null==1)}}"> <button type="button" class="button button-small button-positive getSMSCode" ng-if="vm.waitTime==0" ng-click="vf.getSMSCode(item.value)">发送验证码</button> <button type="button" class="button button-small button-positive getSMSCodeWait" ng-if="vm.waitTime!=0">等待({{vm.waitTime}})</button></div><div class="clear-both"></div></div></div></form><div class="editinfo" ng-if="!vm.isShowEdit" ng-repeat="item in vm.fieldList" ng-class="{mTop:$index==0}"><div class="info-one" ng-class="{marginTop20:$index==0}"><div class="onleft">{{item.field_name}}：</div><div class="more" ng-if="item.type==\'txt\'"><div class="showstyle" ng-class="{width100:item.type==\'txt\'}">{{item.value}}</div></div><div class="more" ng-if="item.type==\'img\'" ng-required="{{(item.no_null==1)}}"><label class="addpicbtn label0 fileContainer" for="upLoadImg0"><img class="" ng-src="{{item.value}}"></label></div><div class="more" ng-if="item.type==\'sex\'"><span><span class="" ng-if="item.value==1">男</span> <span class="" ng-if="item.value==0">女</span></span></div><div class="more" ng-if="item.type==\'date\'" ng-required="{{(item.no_null==1)}}"><div class="showstyle" ng-class="{width100:item.type==\'date\'}">{{item.value | date:\'yyyy-MM-dd\'}}</div></div><div class="more" ng-if="item.type==\'mult\'"><div class="Description borderNone">{{item.value}}</div></div><div class="clear-both"></div></div></div></div><div class="wrapUserManage"><div class="header-bar"><go-back></go-back><div class="header-title">用户信息</div><div class="more button button-small" ng-if="!vm.isShowEdit&&vm.isShowBtn&&!vm.isAllReadable" ng-click="vf.getUserField();vm.isShowEdit=true;">编辑</div><div class="more button button-small" type="submit" ng-if="vm.isShowEdit&&vm.isShowBtn" ng-click="vf.beforeSubmitCheck()">保存更改</div><div class="clear-both"></div></div><form class="" ng-if="vm.isShowEdit"><div class="list" ng-class="{mTop:$index==0}" ng-repeat="item in vm.fieldList"><label class="item item-input item-stacked-label margin0"><span class="input-label" ng-bind="item.field_name"></span> <input ng-class="{bgWhite:item.read_only==1,editable:item.read_only!=1}" ng-if="item.type==\'txt\'" type="text" ng-disabled="{{(item.read_only==1)}}" ng-model="item.value" placeholder="{{item.field_name}}" ng-required="{{(item.no_null==1)}}" ng-change="vf.isPhoneChange(item)"><div class="editmore" ng-if="item.type==\'img\'" ng-required="{{(item.no_null==1)}}"><label class="addpicbtn label0 fileContainer" for="upLoadImg0"><svg class="icon font28 jia0" aria-hidden="true"><use xlink:href="#icon-jia"></use></svg><input class="userpic" ng-disabled="{{(item.read_only==1)}}" accept="image/*" type="file" id="upLoadImg0"></label></div><div class="editmore" ng-if="item.type==\'sex\'"><span><input class="radiobtn" ng-disabled="{{(item.read_only==1)}}" type="radio" id="rdoSexGender1" ng-model="item.value" name="rdoSexGender" value="1"> <span class="radio-male" for="rdoSexGender1">男</span> <input class="radiobtn" ng-disabled="{{(item.read_only==1)}}" type="radio" id="rdoSexGender2" ng-model="item.value" name="rdoSexGender" value="0"> <span class="radio-male" for="rdoSexGender2">女</span></span></div><div class="editmore" ng-if="item.type==\'date\'" ng-required="{{(item.no_null==1)}}"><input ng-class="{editable:item.read_only!=1}" type="date" ng-disabled="{{(item.read_only==1)}}" ng-model="item.value" placeholder="{{item.field_name}}"></div><div class="editmore" ng-if="item.type==\'mult\'"><textarea ng-class="{editable:item.read_only!=0}" class="Description" ng-disabled="{{(item.read_only==1)}}" rows="5" ng-model="item.value" placeholder="{{item.field_name}}" ng-required="{{(item.no_null==1)}}"></textarea></div></label> <label class="item item-input item-stacked-label margin0" ng-if="(item.field==\'Phone\'&&vm.isPhoneNull)||(item.field==\'Phone\'&&vm.isShowCode)"><span class="input-label">验证码</span><div class="editmore"><input class="checkcode" type="text" ng-model="vm.code" placeholder="验证码" ng-required="{{(vm.fieldList[vm.phoneIndex].no_null==1)}}"> <button type="button" class="button button-small button-positive getSMSCode" ng-if="vm.waitTime==0" ng-click="vf.getSMSCode(item.value)">发送验证码</button> <button type="button" class="button button-small button-positive getSMSCodeWait" ng-if="vm.waitTime!=0">等待({{vm.waitTime}})</button></div></label></div></form><div class="list mTop" ng-if="!vm.isShowEdit"><label class="item item-input item-stacked-label margin0" ng-repeat="item in vm.fieldList"><span class="input-label" ng-bind="item.field_name"></span> <input class="bgWhite" ng-if="item.type==\'txt\'&&item.value!=\'\'" type="text" disabled="" placeholder="{{item.value}}"> <input class="bgWhite" ng-if="item.type==\'txt\'&&item.value==\'\'" type="text" disabled="" placeholder="无"><div class="more" ng-if="item.type==\'img\'" ng-required="{{(item.no_null==1)}}"><label class="addpicbtn label0 fileContainer" for="upLoadImg0"><img class="" ng-src="{{item.value}}"></label></div><div class="more" ng-if="item.type==\'sex\'"><span><span class="" ng-if="item.value==1">男</span> <span class="" ng-if="item.value==0&&item.value!=\'\'">女</span> <span class="" ng-if="item.value==\'\'">未填</span></span></div><div class="more" ng-if="item.type==\'date\'" ng-required="{{(item.no_null==1)}}"><div class="showstyle" ng-class="{width100:item.type==\'date\'}">{{item.value | date:\'yyyy-MM-dd\'}}</div></div><div class="more" ng-if="item.type==\'mult\'"><div class="Description borderNone">{{item.value}}</div></div></label></div></div>'),e.put("app/components/AngularRenderEnd/renderEnd.html",""),e.put("app/components/checkCoupon/checkCoupon.html",'<div class="check_coupon_box"><div class="couponbox" ng-click="ccvm.openCouponCheckBox()"><div ng-if="!checkedCouponInfo.cardcoupon_name && ccvm.couponLoadDone" ng-class="{\'haveCoupon\':canuserCount>0}"><span class="couponSelectTip" ng-show="canuserCount>0">您有<span class="num" ng-bind="canuserCount">0</span>张{{cardcoupon_show_name}}可用，点击选择</span> <span ng-show="!canuserCount">没有可用{{cardcoupon_show_name}}</span></div><div ng-if="checkedCouponInfo.cardcoupon_name && ccvm.couponLoadDone" class="font16"><span class="title">已选{{cardcoupon_show_name}}: <span class="name" ng-bind="checkedCouponInfo.cardcoupon_name"></span></span><br><span class="error" ng-if="orderTotalPrice<checkedCouponInfo.buckle_amount">(订单金额低于<span ng-bind="checkedCouponInfo.buckle_amount"></span>元，无法使用该{{cardcoupon_show_name}})</span></div><div ng-if="!ccvm.couponLoadDone">{{cardcoupon_show_name}}信息加载中，请稍候...</div></div><div class="couponcheckbox" ng-if="ccvm.couponCheckBoxStatus"><div class="nocoupon" ng-if="ccvm.couponData.length<1">——您还没有{{cardcoupon_show_name}}——</div><div class="coupon" ng-if="!cp.cantuse" ng-class="{outdate:orderTotalPrice<cp.buckle_amount || cp.cantuse||orderTotalPrice<cp.freefreight_amount}" ng-click="ccvm.checkcoupon(cp)" ng-repeat="cp in ccvm.couponData"><div class="title" ng-bind="cp.cardcoupon_name"></div><div class="ischecked"><span class="checkicon" ng-class="{thisischecked:cp.checked}"><span class="icon"></span></span></div><div class="type"><span ng-if="cp.cardcoupon_type==0">折扣券</span> <span ng-if="cp.cardcoupon_type==1">现金券</span> <span ng-if="cp.cardcoupon_type==2">免邮券</span> <span ng-if="cp.cardcoupon_type==3">满减券</span> <span ng-if="cp.cardcoupon_type==4">满送券</span></div><div class="title"><div ng-if="cp.cardcoupon_type==0"><span class="big-word">{{cp.discount}}</span> 折</div><div ng-if="cp.cardcoupon_type==1">￥<span class="big-word">{{cp.deductible_amount}}</span></div><div ng-if="cp.cardcoupon_type==3">￥<span class="big-word">{{cp.buckle_sub_amount}}</span></div><div ng-if="cp.cardcoupon_type==4">￥<span class="big-word">{{cp.buckle_sub_amount}}</span></div></div><div class="rangetime">有效期: <span ng-bind="cp.valid_from | date:\'yyyy.MM.dd\'"></span> - <span ng-bind="cp.valid_to | date:\'yyyy.MM.dd\'"></span></div><div class="forbiddeninfp"><div ng-if="orderTotalPrice<cp.buckle_amount">使用限制:<span ng-bind="amountName"></span>满<span ng-bind="cp.buckle_amount"></span>元,才能使用</div><div ng-if="orderTotalPrice<cp.freefreight_amount">使用限制:<span ng-bind="amountName"></span>满<span ng-bind="cp.freefreight_amount"></span>元,才能使用</div><div ng-if="cp.cantuse">使用限制:特定商品使用优惠券</div></div></div><div class="btnbox"><span class="btn btn-warning btn-lg btn-block" ng-click="ccvm.confirmMyCheck()">确定</span></div></div></div>'),e.put("app/components/footerBar/footerBar.html",'<div class="footer-bar" ng-if="bottom.list && bottom.style==0 && bottom.list.length>0"><div class="sousuo" ng-repeat="item in bottom.list" ng-style="{\'background-color\':item.bg_color,\'color\':item.color}"><div ng-show="item.img" class="imgdiv" ng-style="{\'height\':bottom.ico_size+\'px\'}" ng-click="goToBottomDetail(item,$index)"><img ng-src="{{item.img}}" ng-style="{\'height\':bottom.ico_size+\'px\',\'width\':bottom.ico_size+\'px\'}" alt=""></div><div class="bar-ico" ng-show="item.ico && !item.img" ng-click="goToBottomDetail(item,$index)"><svg class="icon" ng-style="{\'color\':item.color,\'font-size\':bottom.ico_size+\'px\'}" aria-hidden="true"><use xlink:href="{{getSvgIco(item)}}"></use></svg></div><div class="bar-text" ng-bind="item.title" ng-style="{\'color\':item.color,\'font-size\':bottom.size+\'px\'}" ng-click="goToBottomDetail(item,$index)"></div></div></div><div class="footer-weixin" ng-if="bottom.list && bottom.style==1 && bottom.list.length>0"><div class="footer-row"><div class="footer-first" ng-style="{\'background-color\':bottom.list[0].bg_color}" ng-click="vmFunc.GoBottomLink(bottom.list[0].url)"><div ng-show="item.img" class="imgdiv" ng-style="{\'height\':bottom.ico_size+\'px\'}" ng-click="goToBottomDetail(bottom.list[0],$index)"><img ng-src="{{bottom.list[0].img}}" ng-style="{\'height\':bottom.ico_size+\'px\',\'width\':bottom.ico_size+\'px\'}" alt=""></div><div class="bar-ico" ng-show="bottom.list[0].ico && !bottom.list[0].img" ng-click="goToBottomDetail(bottom.list[0],$index)"><svg class="icon" ng-style="{\'color\':bottom.list[0].color,\'font-size\':bottom.ico_size+\'px\'}" aria-hidden="true"><use xlink:href="{{getSvgIco(bottom.list[0])}}"></use></svg></div></div><div class="footer-other"><div class="footer-other-table" ng-if="bottom.list.length>1"><div class="footer-other-row"><div class="footer-other-cell" ng-if="$index>0" ng-repeat="menu in bottom.list track by $index" ng-style="{\'background-color\':menu.bg_color,\'color\':menu.color,\'font-size\':bottom.size+\'px\',width: (100/(bottom.list.length-1))+\'%\' }" ng-click="goToBottomDetail(menu,$index)" ng-bind="menu.title"></div></div></div></div></div></div>'),e.put("app/components/goBack/goBack.html",'<svg class="icon go-back" aria-hidden="true" ng-click="goBack()"><use xlink:href="#icon-fanhui"></use></svg>'),e.put("app/components/goRight/goRight.html",'<svg class="icon" aria-hidden="true"><use xlink:href="{{iconLink}}"></use></svg>'),e.put("app/components/hotSearch/hotSearch.html",'<div class="search-mask"></div>'),e.put("app/components/navbar/navbar.html",'<nav class="navbar navbar-static-top navbar-inverse"><div class="container-fluid"><div class="navbar-header"><a class="navbar-brand" href="https://github.com/Swiip/generator-gulp-angular"><span class="glyphicon glyphicon-home"></span> Gulp Angular</a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-6"><ul class="nav navbar-nav"><li class="active"><a ng-href="#">Home</a></li><li><a ng-href="#">About</a></li><li><a ng-href="#">Contact</a></li></ul><ul class="nav navbar-nav navbar-right acme-navbar-text"><li>Application was created {{ vm.relativeDate }}.</li></ul></div></div></nav>'),e.put("app/components/payPanel/payPanel.html",'<div class="wrapOrderPayChoice" ng-show="vm.payPanel.show"><div class="weui-mask_transparent actionsheet__mask"></div><div class="weui-skin_android"><div class="weui-mask"></div><div class="weui-actionsheet" ng-show="vm.hasAliPay || vm.hasWxPay"><div class="title"><span>下单成功，请选择支付方式</span> <span ng-show="showClose" class="close" ng-click="vm.payPanel.show=false">x</span><div class="Clear"></div></div><div class="weui-actionsheet__menu" id="divPayChannels"><div class="weui-actionsheet__cell wxPay" ng-show="vm.hasWxPay" ng-click="vf.wxPay()"><div class="height30"><img class="weui-vcode-img" style="height:30px;" src="http://file-cdn.songhebao.com/img/pay/wx_logo.png"> <span class="txt">微信支付</span><svg class="icon rightIco floatR" aria-hidden="true"><use xlink:href="#icon-xiayibu"></use></svg><div class="Clear"></div></div></div><div class="weui-actionsheet__cell zfbPay" ng-show="vm.hasAliPay" ng-click="vf.aliPay()"><div class="height30"><img class="weui-vcode-img" style="height:30px;" src="http://file-cdn.songhebao.com/img/pay/zfb_logo.png"> <span class="txt">支付宝</span><svg class="icon rightIco floatR" aria-hidden="true"><use xlink:href="#icon-xiayibu"></use></svg><div class="Clear"></div></div></div><div class="weui-actionsheet__cell jdPay" ng-show="vm.hasJDPay" ng-click="vf.jdPay()"><div class="height30"><img class="weui-vcode-img" style="height:30px;" src="http://file-cdn.songhebao.com/img/pay/jdpay_logo.png"> <span class="txt">京东支付（网银在线）</span><svg class="icon rightIco floatR" aria-hidden="true"><use xlink:href="#icon-xiayibu"></use></svg><div class="Clear"></div></div></div><div class="weui-actionsheet__cell anotherPay" ng-click="vf.anotherPay()" ng-show="vm.hasDaiPay"><div class="height30"><img class="weui-vcode-img" style="height:35px;" src="http://static-files.socialcrmyun.com/img/pay/daifu.png"> <span class="txt">找人代付</span><svg class="icon rightIco floatR" aria-hidden="true"><use xlink:href="#icon-xiayibu"></use></svg><div class="Clear"></div></div></div></div></div><div class="weui-actionsheet" ng-show="!vm.hasAliPay&&!vm.hasWxPay"><div class="title"><span>该商户还未配置任何支付方式</span> <span class="close" ng-click="vm.payPanel.show=false">x</span><div class="Clear"></div></div></div></div></div>'),e.put("app/components/productBox/productBox.html",'<div class="product-wrap"><div class="product"><div class="img-wrap"><span class="img-span"><img class="product-img" ng-src="{{!productItem.img_url?\'\':productItem.img_url+img_last}}"></span></div><div class="clear-both"></div><div class="product-name"><span class="product_Name">{{productItem.title}}</span></div><div class="product-price"><strong ng-show="productItem.price">{{productItem.price | currency : "￥" : 2}}</strong> <span ng-show="productItem.score"><span ng-show="productItem.price">+</span> <strong>{{productItem.score}}</strong> <span>积分</span></span><br><span class="old-price" ng-bind="productItem.quote_price| currency:\'￥\'" ng-show="is_show_oldprice && productItem.price < productItem.quote_price"></span> <span class="old-price-empty" ng-show="is_show_oldprice && productItem.price >= productItem.quote_price">&nbsp;</span></div></div></div>'),e.put("app/components/productBox/productBoxSale.html",'<div class="product-promotion" ng-click="goToDetail(dataBox)"><div class="nocopyimg"></div><span class="topleftdiscount">{{(dataBox.price/dataBox.quote_price) | number:1}}折</span> <img class="product-img" ng-src="{{dataBox.img_url}}"><div class="sold-out" ng-show="!dataBox.totalcount">已抢光</div><div class="product-name low-product-name"><span class="product_Name">{{dataBox.title}}</span></div><div class="product-price"><span class="line-through gray78 font12">{{dataBox.quote_price|currency:"￥":0}}</span><span class="red font18">{{dataBox.price|currency:"￥":0}}</span></div></div>'),e.put("app/components/productBox/saleBox.html",'<div class="product-wrap sale-wrap" ng-click="goToDetail(dataBox)"><div class="product-mask"></div><span class="topleftdiscount">{{(dataBox.promotion_price/dataBox.quote_price) | number:2}}折</span><div class="product"><div class="img-wrap"><span class="img-span"><img class="product-img" ng-src="{{dataBox.img_url? dataBox.img_url+img_last:\'\'}}"></span><div class="sold-out" ng-show="!dataBox.totalcount">已抢光</div></div><div class="clear-both"></div><div class="product-name"><span class="product_Name">{{dataBox.title}}</span></div><div class="product-price"><span class="line-through gray78 font12">{{dataBox.quote_price|currency:"￥":2}}</span> <span class="red font18">{{dataBox.promotion_price|currency:"￥":2}}</span></div></div></div>'),e.put("app/components/productBoxList/productBoxList.html",'<div class="product-list"><div class="row row-wrap" ng-transclude=""></div><div class="clear-both"></div><div class="loadingTap"><span ng-show="pdlist.loadingTag">加载中~</span> <span ng-show="pdlist.loadingEndTag">没有更多了~</span></div></div>'),e.put("app/components/relateSearch/relateSearch.html",'<div class="search-relate-mask"><ul></ul></div>'),e.put("app/components/selectAddress/selectAddress.html",'<div ng-click="selectAddressBtn()" class="select_address_box" ng-if="isgivegift==\'true\'"><div ng-transclude="" ng-if="customize"></div><div class="default" ng-if="!customize"><div ng-if="!addressInfo.consigneename" class="order-item-value">选择寄送地址<svg class="icon arrow" aria-hidden="true"><use xlink:href="icon-youjiantou"></use></svg><div class="clear-both"></div></div><div ng-if="addressInfo.consigneename" class="product-item-detail"><div class="address-item floatL">{{addressInfo.consigneename}} {{addressInfo.phone}}</div><div class="address-item floatL gray78">{{addressInfo.province}} {{addressInfo.city}} {{addressInfo.dist}} {{addressInfo.address}}</div><svg class="icon font18 gray78 floatR" aria-hidden="true"><use xlink:href="icon-xiayibu"></use></svg><div class="clear-both"></div></div></div></div>'),e.put("app/components/shopslider/shopslider.html",'<div class="wrapShopContainer"><div class="sliders" ng-transclude=""></div></div>'),e.put("app/components/sideMenu/sideMenu.html",'<div class="sideMenu" ng-show="sideMenus"><div id="wrapper"><div id="scroller"><ul on-finish-render-filters="" class="rootList"><li ng-if="!data.subList" class="dataItem" ng-repeat="data in leftnavdatas" ng-click="goList(data.navigation_link,data.navigation_type)"><span class="menuText">{{data.navigation_name}}</span></li><li ng-if="data.subList" class="borderBottom" ng-repeat="data in leftnavdatas" ng-mousedown="data.subListShow = !data.subListShow"><svg class="icon font18 gray34" aria-hidden="true" ng-hide="data.subListShow"><use xlink:href="#icon-jia"></use></svg><svg class="icon font18 gray34" aria-hidden="true" ng-show="data.subListShow"><use xlink:href="#icon-jian"></use></svg><span class="menuText">{{data.navigation_name}}</span><div class="clear-both"></div><ul class="subList" ng-show="data.subListShow"><li class="dataItem" ng-click="goList(data.navigation_link,data.navigation_type)"><span class="menuText">全部</span></li><li class="dataItem" ng-repeat="subData in data.subList" ng-click="goList(subData.navigation_link,subData.navigation_type)"><span class="menuText">{{subData.navigation_name}}</span></li></ul></li></ul></div></div></div><div class="sideMenuMask" ng-show="sideMenus" ng-click="showMenus()"></div>'),e.put("app/gift/getgift/getgift.html",'<div><div class="shareimg" ng-click="hideShareImg()"></div><div class="order-item-title">收礼地址：</div><div select-address="" isgivegift="true" address-info="vm.addressData" customize="false" address-id="vm.addressId"></div><div class="getgifttitle clearfix" style="margin:10px 0 0 0"><span class="whogivetext">此礼物来自</span> <span class="whogiveimg"><img ng-src="{{productDetailData.send_user_info.head_img_url}}" alt=""></span> <span class="whogivetext" ng-bind="productDetailData.send_user_info.nick_name"></span></div><div class="getgiftinfobox"><div class="giftimg"><img ng-src="{{productDetailData.product_img_url}}" alt=""></div><div class="gifttext"><div class="lineheight_30">{{productDetailData.product_name}}</div><div class="lineheight_30">{{productDetailData.product_properties}}</div><div class="lineheight_30">共 <span class="fontyellow">{{productDetailData.product_count}}</span> 份</div></div></div><div class="orderwords linehegiht_36 paddinLR" style="margin:20px 0 0 0"><span class="wordstext">买家留言：</span> <input type="text" placeholder="可填写您与卖家达成一致的要求(选填)" ng-model="pageData.defaultList.buyer_memo" class="wordsinput"></div><div class="givegiftbot paddinLR"><div class="centerbot" style="margin-top: 10px !important;" ng-if="productDetailData.is_get_gift != 1" ng-click="getGiftBtn()">立即领取</div><div class="centerbot shareother" ng-if="productDetailData.is_get_gift == 1">已经领取</div><div class="centerbot shareother" ng-if="productDetailData.is_get_gift != 1" ng-click="getGiftUrlBtn()">分享链接给别人</div><div class="centerbot" style="margin-top: 10px !important;" ng-if="productDetailData.is_get_gift == 1" ng-click="getGiftUrlBtn()">分享链接给别人</div><div class="centerbot shareother" ui-sref="home">我也要送礼</div></div></div>'),e.put("app/gift/giftdetail/giftdetail.html",'<div><div class="bgcolor"><div class="giftimg"><img src="assets/images/jiu.png" alt=""></div><div class="giftdes paddinLR">来自小伙伴的礼物</div><div class="giftinfo"><div class="floatL proimg"><img src="assets/images/jiu.png" alt=""></div><div class="oneproinfo floatL"><div class="lineheight_30">商品名称商品名称</div><div class="lineheight_30">颜色 尺寸(大小)</div><div class="lineheight_30">共<span class="fontyellow">1</span>份</div></div></div><div ng-if="false" class="emptybasket"><div class="emptyicon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-gouwuche"></use></svg></div><h4 class="font20">&nbsp;&nbsp;购物车空空如也！</h4><div class="font16 colora0">快来给自己挑点宝贝吧</div><div class="gotopro"><a href="" class="font16">去逛逛</a></div></div></div></div><div class="giftbot"><div class="giftbotL floatL">领礼物</div><div class="giftbotR floatR">我也送</div></div>'),e.put("app/gift/givegift/givegift.html",'<div><div class="shareimg" ng-click="hideShareImg()"></div><div class="bgcolor"><div class="giftimg"><img ng-src="{{productDetailData.product_img_url}}" alt=""></div><div class="giftinfo" style="margin-top:16px"><div class="floatL proimg"><img ng-src="{{productDetailData.product_img_url}}" alt=""></div><div class="oneproinfo floatL"><div class="lineheight_30">{{productDetailData.product_name}}</div><div class="lineheight_30">{{productDetailData.product_properties}}</div><div class="lineheight_30">共<span class="fontyellow">{{productDetailData.product_count}}</span>份</div></div></div><div class="givegiftbot paddinLR" ng-click="getGiftUrlBtn()"><div class="centerbot">喊好友来领取礼物</div></div><div class="givegiftbot paddinLR" ui-sref="home"><div class="centerbot">继续购物</div></div></div></div>'),e.put("app/gift/paygift/paygift.html",'<div class="pay-gift"><div class="create-order"><div class="header-bar"><go-back></go-back><div class="header-title">订单信息</div><div class="bug-car"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-gouwuche"></use></svg><div class="card_nums" ng-if="is_shownums">{{shop_nums}}</div></div><div class="clear-both"></div></div><div class="order-item-title">支付方式 ：微信支付</div><div class="product-item-detail" ng-if="0"><div class="pay-img"><img src="assets/images/zhifubao.png"></div><div class="pay-txt">支付宝</div><div class="clear-both"></div></div><div class="order-item-title">商品：</div><div class="product-item-detail" ng-repeat="item in giftProduct"><div class="product-item-img"><img ng-src="{{item.img_url}}"></div><div class="product-item-txt"><div class="font14">{{item.title}}</div><div class="font14">{{item.properties}}</div><div class="font13">数量：{{item.num}}</div><div class="product-num-wrap"><svg class="icon product-num-del" aria-hidden="true" ng-click="delNum(item)"><use xlink:href="#icon-jian"></use></svg><input type="input" class="product-num" ng-model="item.num" ng-change="checknum(item)" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[[\\D0]/g,\'\')}else{this.value=this.value.replace(/[^0-9]/g,\'\')}"><svg class="icon product-num-add" aria-hidden="true" ng-click="addNum(item)"><use xlink:href="#icon-jianum"></use></svg></div><div class="product-item-price"><div class="line-through">{{item.quote_price|currency:"￥":2}}</div><div>{{item.price|currency:"￥":2}}</div></div></div><div class="clear-both"></div></div><div class="order-item-title">预计产生的运费：{{freight|currency:"￥":2}}</div></div><div class="bt-wrap"><div class="submitorderL"><div class="allpaymoneyL"><strong>支付总金额</strong></div><div class="allpaymoneyR"><span class="red font18" ng-if="!checkedCouponInfo">{{giftProduct.productsTotalPrice | currency:\'￥\'}}</span><span class="red font18" ng-if="checkedCouponInfo.cardcoupon_type==3&&(orderProducts.productsTotalPrice>=checkedCouponInfo.buckle_amount)" ng-bind="orderProducts.productsTotalPrice - checkedCouponInfo.buckle_sub_amount | currency:\'￥\':\'2\'"></span><span class="red font18" ng-if="checkedCouponInfo.cardcoupon_type==0" ng-bind="orderProducts.productsTotalPrice*checkedCouponInfo.discount/10 | currency:\'￥\':\'2\'"></span><span class="red font18" ng-if="checkedCouponInfo.cardcoupon_type==1&&orderProducts.productsTotalPrice>=checkedCouponInfo.deductible_amount" ng-bind="orderProducts.productsTotalPrice - checkedCouponInfo.deductible_amount | currency:\'￥\':\'2\'"></span><span class="red font18" ng-if="checkedCouponInfo.cardcoupon_type==1&&orderProducts.productsTotalPrice<checkedCouponInfo.deductible_amount" ng-bind="orderProducts.productsTotalPrice - orderProducts.productsTotalPrice | currency:\'￥\':\'2\'"></span><span class="red font18" ng-if="checkedCouponInfo.cardcoupon_type==2&&checkedCouponInfo.freefreight_amount>=freight" ng-bind="orderProducts.productsTotalPrice - freight | currency:\'￥\':\'2\'"></span> <span class="red font18" ng-if="checkedCouponInfo.cardcoupon_type==2&&checkedCouponInfo.freefreight_amount<freight" ng-bind="orderProducts.productsTotalPrice - checkedCouponInfo.freefreight_amount | currency:\'￥\':\'2\'"></span></div></div><div class="submitorderR" ng-click="submitOrderAndPay()">确认</div></div></div>'),e.put("app/groupForGoods/groupForGoodsDetail/groupForGoodsDetail.html",'<div class="wrapGroupForGoodsDetail"><div class="header-bar"><go-back></go-back><div class="header-title">拼团商品详情</div><div class="clear-both"></div></div><slider aspectratio="{{vm.MALLCONFIG.mallconfignew.product_img_ratio1}}:{{vm.MALLCONFIG.mallconfignew.product_img_ratio2}}"><slider-item ng-repeat="imgdata in vm.goodsData.show_img_list"><img ng-src="{{imgdata}}" class="imgsize100"></slider-item></slider><div class="tm"><div class="td2"><div class="td2_name" ng-bind="vm.goodsData.title"></div><div class="td2_cx" ng-bind-html="vm.goodsData.product_desc"></div><div class="td2_info"><div class="td2_num">支付开团并邀请相应人数参团，人数不足自动退款，详见下方拼团玩法</div><div class="clear"></div></div></div><div class="wrapKT"><div class="kt" ng-show="vm.groupConfig.is_open_group" style="visibility: visible;" ng-repeat="item in vm.goodsData.group_buy_rule_list" ng-click="vm.createOrder(item)"><div class="kt_item"><div class="kt_price" ng-show="item.head_price != item.member_price">开团 ￥<b ng-bind="item.head_price"></b><i>/</i>件，参团 ￥<b ng-bind="item.member_price"></b><i>/</i>件</div><div class="kt_price" ng-show="item.head_price == item.member_price">成团价 ￥<b ng-bind="item.head_price"></b><i>/</i>件</div><div class="kt_btn"><b ng-bind="item.rule_name"></b></div></div></div><div class="kt" style="visibility: visible;" ng-click="vm.createOrder(1)"><div class="kt_item kt_item_buy"><div class="kt_price">￥<b ng-bind="vm.goodsData.price"></b><i>/</i>件</div><div class="kt_btn">单独购买</div></div></div></div></div><div class="step"><div class="step_hd">拼团玩法</div><div id="footItem" class="step_list"><div class="step_item step_item_on"><div class="step_num">1</div><div class="step_detail"><p class="step_tit selected">选择<br>心仪商品</p></div></div><div class="step_item"><div class="step_num">2</div><div class="step_detail"><p class="step_tit">支付开团<br>或参团</p></div></div><div class="step_item"><div class="step_num">3</div><div class="step_detail"><p class="step_tit">等待好友<br>参团支付</p></div></div><div class="step_item"><div class="step_num">4</div><div class="step_detail"><p class="step_tit">达到人数<br>团购成功</p></div></div></div></div><div class="footerBlock" ng-repeat="item in vm.goodsData.group_buy_rule_list">&nbsp;</div><div class="footerBlock">&nbsp;</div><footer-bar></footer-bar></div>'),e.put("app/groupForGoods/groupForGoodsList/groupForGoodsList.html",'<div class="wrapGroupForGoodsList"><div class="header-bar"><go-back ng-click="vm.clear_history()"></go-back><div class="header-title">{{vm.title}}</div><div class="clear-both"></div></div><div class="orderlistnav orderlistnavnew"><span class="floatL navselected" ng-class="{select:vm.pageData.status == \'\'}" ng-click="vm.goStatusBtn(\'\')">全部订单</span> <span class="floatL" ng-class="{select:vm.pageData.status == \'待付款\'}" ng-click="vm.goStatusBtn(\'待付款\')">待付款</span> <span class="floatL" ng-class="{select:vm.pageData.status == \'待收货\'}" ng-click="vm.goStatusBtn(\'待收货\')">待收货</span><div class="BKline"></div></div><div class="the-list"><div class="the-order the-order-new" ng-repeat="item in [0,1,2,3]" scroll-bottom-bind="vm.loadMoreData()"><div class="order-title bgGrey"><div class="order-id">2016-3-3 18:30:26</div><div class="clear-both"></div></div><div class="order-content bgWhite"><div class="product-img"><img ng-src="http://open-files.comeoncloud.net/www/hf/jubit/image/20160218/66E07C04CE814639881C4F34760466C9.png@140h_140w_1e_1c"></div><div class="product-info" ui-sref="orderDetail({orderID:item.order_id})"><div class="product-name">【浆果皇后】智利进口蓝莓2盒29.9元</div><div class="product-sku">数量：1</div></div><div class="product-prices"><div class="the-price red">￥39.99 /件</div></div><div class="clear-both"></div></div><div class="order-title"><div class="order-id font12">共1件商品，免运费</div><div class="order-time font12">实付：<span class="red font18">￥29.90</span></div><div class="clear-both"></div></div><div class="bottom-wrap"><div class="waitforpay">待支付</div><div class="newbtn">取消订单</div><div class="newbtn">去支付</div><div class="clear-both"></div></div></div></div><div class="nomoreorder" ng-if="!vm.nodata">数据加载中~</div><div class="nomoreorder" ng-if="vm.nodata">没有更多订单了额~</div></div>'),
e.put("app/groupForGoods/groupGoodsList/groupGoodsList.html",'<div class="wrapGroupGoodsList"><div class="header-bar"><go-back ng-click="vm.clear_history()"></go-back><div class="header-title">团购列表</div><a href="javascript:zcToUrl(\'/customize/comeoncloud/Index.aspx?key=MallHome\');" class="btnBackHomeRight"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shouye"></use></svg></a><div class="clear-both"></div></div><div class="the-list"><div class="the-order the-order-new" ng-repeat="item in vm.dataList" scroll-bottom-bind="vm.loadMoreData()"><div class="order-title bgGrey"></div><div class="order-content bgWhite"><div class="product-img"><img ng-src="{{item.product_list[0].img_url}}"></div><div class="product-info" ui-sref="waitForGroupDetail({goodsGroupId:item.order_id})"><div class="product-name" ng-bind="item.product_list[0].product_name"></div><div class="product-sku"><div class="tuan_g_core"><div class="tuan_g_price"><span>成团价:</span> ￥<b ng-bind="item.group_buy_info.head_price"></b>/件</div><div class="tuan_g_btn"></div></div></div></div><div class="clear-both"></div></div><div class="order-title"></div><div class="bottom-wrap"><div class="waitforpay" ng-if="item.group_buy_info.group_buy_status==0">拼团中</div><div class="waitforpay" ng-if="item.group_buy_info.group_buy_status==1">团购成功</div><div class="waitforpay" ng-if="(item.group_buy_info.group_buy_status==2)&&vm.isOverDate">团购失败</div><div class="waitforpay" ng-if="(item.group_buy_info.group_buy_status==2)&&!vm.isOverDate">团购过期</div><div class="newbtn" ui-sref="orderDetail({orderID:item.order_id})">查看订单详情</div><div class="newbtn" ui-sref="waitForGroupDetail({goodsGroupId:item.order_id})">查看团详情</div><div class="clear-both"></div></div></div></div><div class="nomoreorder" ng-if="vm.nodata">没有更多订单了额~</div></div>'),e.put("app/groupForGoods/waitForGroupDetail/waitForGroupDetail.html",'<div class="wrapWaitForGroupDetail"><div ng-if="vm.isShowPage"><div class="success" ng-if="(vm.dataInfo.is_head==1)&&!vm.dataInfo.isOverDate"><div class="kaituan"><svg class="icon font26" aria-hidden="true"><use xlink:href="#icon-shixinduigoudaibiankuang"></use></svg><span ng-if="!vm.isGroupFull">开团成功</span></div><div class="jiaru" ng-if="!vm.isGroupFull">快去邀请好友加入吧</div><div class="jiaru" ng-if="vm.isGroupFull">团购成功</div></div><div class="success bgLightRed" ng-if="(vm.dataInfo.group_buy_status==2)"><div class="kaituan"><svg class="icon font26 red" aria-hidden="true"><use xlink:href="#icon-kulian"></use></svg></div><div class="jiaru">团购失败</div></div><div class="success" ng-if="(vm.dataInfo.is_head==0)&&(vm.dataInfo.group_buy_status==0)"><div class="kaituan"><svg class="icon font26" aria-hidden="true"><use xlink:href="#icon-shixinduigoudaibiankuang"></use></svg></div><div class="jiaru">拼团中</div></div><div class="success bgLightRed" ng-if="(vm.dataInfo.is_head==0)&&(vm.dataInfo.group_buy_status!=2)&&(vm.dataInfo.is_join==0)&&(vm.dataInfo.isOverDate||vm.isGroupFull)"><div class="kaituan"><svg class="icon font26 red" aria-hidden="true"><use xlink:href="#icon-kulian"></use></svg></div><div class="jiaru">来晚了一步</div></div><div class="goodsInfo" ui-sref="groupForGoodsDetail({goodsId:vm.dataInfo.product_id})"><div class="leftImg"><img class="imgStyle" ng-src="{{vm.dataInfo.product_img_url}}"></div><div class="rightInfo"><div class="topTitle" ng-bind="vm.dataInfo.product_name"></div><div class="bottomPrice">{{vm.dataInfo.people_count}}人团：<span class="red">￥<span class="red font16" ng-bind="vm.dataInfo.member_price"></span>/件</span></div></div><div class="clear-both"></div></div><div class="clickdetail" ng-show="vm.dataInfo.product_desc"><div class="showdetail" ng-click="vm.showdesc=!vm.showdesc">点击查看商品详情<svg class="icon arrowdown" aria-hidden="true" ng-if="!vm.showdesc"><use xlink:href="#icon-jiantouarrowdown"></use></svg><svg class="icon arrowup" aria-hidden="true" ng-if="vm.showdesc"><use xlink:href="#icon-h5iconuparrow"></use></svg></div><div class="describe" ng-bind-html="vm.dataInfo.product_desc" ng-if="vm.showdesc"></div></div><div class="groupinfo"><div class="one"><ul class="two"><li class="three" ng-repeat="item in vm.dataInfo.people_list"><div class="avterImgDiv" style="background-image:url({{item.head_img_url}});"><div class="tuangou" ng-if="$index==0"><svg class="icon tuangouyuan" aria-hidden="true"><use xlink:href="#icon-tuangouyuan"></use></svg></div></div></li></ul><div style="clear: both;"></div></div><div class="clear-both"></div><div class="peopleNeed" ng-if="vm.dataInfo.isOverDate&&!vm.isGroupFull">该团购已过期</div><div class="peopleNeed" ng-if="vm.isGroupFull">该团购人数已满</div><div class="peopleNeed" ng-if="!vm.dataInfo.isOverDate&&!vm.isGroupFull">还差<span class="red font16">{{vm.dataInfo.people_count-vm.dataInfo.pay_people_count}}</span>人，盼你如南方人盼暖气~</div><div class="hline" ng-if="!vm.dataInfo.isOverDate&&!vm.isGroupFull"><div class="totalLeft">剩余{{vm.pageData.leftDay}}天<div class="shi" ng-bind="vm.pageData.leftHour"></div>:<div class="shi" ng-bind="vm.pageData.leftMinus"></div>:<div class="shi" ng-bind="vm.pageData.leftSecond"></div>结束</div></div><div class="leadInfo" ng-repeat="item in vm.dataInfo.people_list"><svg class="icon arrowTop" aria-hidden="true"><use xlink:href="#icon-h5iconuparrow"></use></svg><div class="leadImg"><img ng-src="{{item.head_img_url}}"></div><div class="leadName">{{item.groupLeader+item.show_name}}</div><div class="time">{{item.pay_time | date:\'yyyy-MM-dd HH:mm:ss\'}}{{item.startGroup}}</div><div class="clear-both"></div></div><div class="partner" ng-if="!vm.isGroupFull"><div class="vline"></div><div class="leadImg"></div><div class="askPartner" ng-if="!vm.isGroupFull">还差{{vm.dataInfo.people_count-vm.dataInfo.pay_people_count}}人，分享出去让更多小伙伴来参团吧！</div><div class="askPartner" ng-if="vm.isGroupFull">团购人数已满</div><div class="clear-both"></div></div></div><div class="step"><div class="step_hd">拼团玩法</div><div id="footItem" class="step_list"><div class="step_item step_item_on"><div class="step_num">1</div><div class="step_detail"><p class="step_tit">选择<br>心仪商品</p></div></div><div class="step_item"><div class="step_num">2</div><div class="step_detail"><p class="step_tit">支付开团<br>或参团</p></div></div><div class="step_item"><div class="step_num" ng-class="{selectStep:vm.dataInfo.group_buy_status!=2&&!vm.isGroupFull}">3</div><div class="step_detail"><p class="step_tit" ng-class="{selectStepColor:vm.dataInfo.group_buy_status!=2&&!vm.isGroupFull}">等待好友<br>参团支付</p></div></div><div class="step_item"><div class="step_num" ng-class="{selectStep:vm.isGroupFull}">4</div><div class="step_detail"><p class="step_tit" ng-class="{selectStepColor:vm.isGroupFull}">达到人数<br>团购成功</p></div></div></div></div><div class="goback" ng-class="{pBottom140:(vm.dataInfo.is_head==0)&&!vm.isGroupFull&&!vm.dataInfo.isOverDate}"><span class="color2B53C8" ng-click="vm.goToGoodsList()">一起拼&nbsp;&nbsp;</span> | <span ui-sref="groupGoodsList">&nbsp;&nbsp;我的团</span></div><div class="footPart Height120" ng-if="!vm.showPayBtn&&(vm.dataInfo.is_head==1)&&!vm.isGroupFull&&!vm.dataInfo.isOverDate"><div class="rightBtn newbtn" ng-click="vm.joinGroup()">再来一份</div><div class="rightBtn newbtn mTop10" ng-click="vm.shadeShow=!vm.shadeShow">还差{{vm.dataInfo.people_count-vm.dataInfo.pay_people_count}}人组团成功</div><div class="clear-both"></div></div><div class="footPart" ng-if="!vm.showPayBtn&&(vm.dataInfo.is_head==1)&&(vm.isGroupFull||vm.dataInfo.isOverDate)&&vm.groupConfig.is_open_group"><div class="rightBtn newbtn" ng-click="vm.goToGoodsList()">再次开个团，点此回商品列表</div></div><div class="footPart" ng-if="!vm.showPayBtn&&(vm.dataInfo.is_head==0)&&(vm.isGroupFull||vm.dataInfo.isOverDate||vm.dataInfo.is_join==1)&&vm.groupConfig.is_open_group"><div class="rightBtn newbtn" ng-click="vm.goToGoodsList()">我也开个团，点此回商品列表</div></div><div class="footPart" ng-if="!vm.showPayBtn&&(vm.dataInfo.is_head==0)&&(vm.dataInfo.is_join==0)&&!vm.isGroupFull&&!vm.dataInfo.isOverDate"><div class="rightBtn newbtn" ng-click="vm.joinGroup()">我也参团</div><div class="rightBtn newbtn mTop10" ng-show="vm.groupConfig.is_open_group" ng-click="vm.goToGoodsList()">我也开个团，点此回商品列表</div></div><div class="footPart" ng-if="!vm.showPayBtn&&(vm.dataInfo.is_head==0)&&(vm.dataInfo.is_join!=0)&&!vm.isGroupFull&&!vm.dataInfo.isOverDate"><div class="rightBtn newbtn" ng-click="vm.joinGroup()">再来一份</div><div class="rightBtn newbtn mTop10" ng-show="vm.groupConfig.is_open_group" ng-click="vm.goToGoodsList()">我也开个团，点此回商品列表</div></div><div class="footPart" ng-if="vm.showPayBtn"><div class="rightBtn newbtn" ng-click="vm.goToPay()">继续支付</div><div class="rightBtn newbtn mTop10" ng-show="vm.groupConfig.is_open_group" ng-click="vm.goToGoodsList()">我也开个团，点此回商品列表</div></div><div class="weixinshareshade" ng-if="vm.shadeShow" ng-click="vm.shadeShow=!vm.shadeShow"></div></div><div class="center" ng-if="!vm.isShowPage">页面加载中，请稍后...</div></div>'),e.put("app/registerLogin/login/login.html",'<div class="header-bar"><go-back></go-back><div class="header-title">登录</div><div class="bug-car" ui-sref="shopBasket"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-gouwuche"></use></svg></div><div class="clear-both"></div></div><div class="info-wrap"><div class="info-prompt margin-tp20 logintitle">我是会员</div><form name="loginForm" novalidate="" ng-submit="loginSubmit()"><label class="texelabel toplabel" ng-class="{redborder:loginInfo.phoneerror}" for="phoneinputid"><input class="innerinput" ng-pattern="/^0?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/" name="phonenum" type="tel" required="" ng-model="loginInfo.username" ng-blur="checkerror(loginForm.phonenum)" ng-change="checkerror(loginForm.phonenum)" id="phoneinputid" placeholder="您的手机号码"> <span class="erroeicon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-iconfontgantanhao"></use></svg></span></label><div class="texelabel"><input class="innerinput" name="phonecode" type="tel" ng-pattern="/^[0-9]{6}$/" ng-model="loginInfo.password" required="" placeholder="请输入验证码"><div class="getcode" ng-if="loginInfo.phoneCodeTime<1" ng-click="getPhoneCode(loginForm.phonenum)">获取验证码</div><div class="getcode" ng-if="loginInfo.phoneCodeTime>0">获取验证码({{loginInfo.phoneCodeTime}}s)</div></div><label for="submitbtn" class="publicbtn margin-tp20">登录</label> <input type="submit" class="hidesubmitbtn" id="submitbtn" ng-disabled="loginForm.$invalid"></form><div class="info-prompt margin-tp45 logintitle" ui-sref="register">还没注册？</div><div class="info-prompt font16">享受超值折扣及返利，还有更多专属权利！</div><div class="publicbtn margin-tp14" ui-sref="article({id:414821})">即刻申请会员</div></div>'),e.put("app/registerLogin/register/register.html",'<div class="header-bar"><go-back></go-back><div class="header-title">注册</div><div class="bug-car" ui-sref="shopBasket"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-gouwuche"></use></svg></div><div class="clear-both"></div></div><div class="info-wrap"><div class="info-prompt margin-tp20 btnabovetitle">必填项目</div><input class="info-input margin-tp14" placeholder="昵称" ng-model="registerInfo.nickname"> <input class="info-input margin-tp14 width50p floatL no-right-radius" placeholder="手机号码" ng-model="registerInfo.phone"> <button class="margin-tp14 vertifycodebt floatR" ng-click="verificationcodeFunc()">获取验证码</button><div class="clear-both"></div><input class="info-input margin-tp14" placeholder="验证码" ng-model="registerInfo.smsvercode"> <input type="password" class="info-input margin-tp14" placeholder="密码" ng-model="registerInfo.password"> <input type="password" class="info-input margin-tp14" placeholder="重复密码" ng-model="registerInfo.passwordconfirm"><div class="info-prompt margin-tp20 btnabovetitle">如果继续此过程，表示您同意&nbsp;<a ui-sref="privacyDetail">条款条例</a></div><div class="publicbtn margin-tp14" ng-click="registerFunc()">立即注册</div></div>'),e.put("app/registerLogin/retrievePassword/retrievePassword.html",""),e.put("app/returnGoods/applyRefund/applyRefund.html",'<div class="header-bar"><go-back><div class="go-back" ng-click="goBack()" role="button" tabindex="0"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-fanhui"></use></svg></div></go-back><div class="header-title">申请退货</div><div class="clear-both"></div></div><div class="return-product-info-wrap no-bottom-border"><div class="return-product-info-item"><div class="infoname">商品名称</div><div class="infocontent">{{vm.orderData.product_name}}</div><div class="clear-both"></div></div><div class="return-product-info-item"><div class="infoname">商品总额</div><div class="infocontent"><span ng-show="vm.orderData.product_totalPrice">{{vm.orderData.product_totalPrice|currency:"￥":2}}</span> <span ng-show="vm.orderData.totalScore"><span ng-show="vm.orderData.product_totalPrice">+</span> {{vm.orderData.totalScore}}积分</span></div><div class="clear-both"></div></div><div class="return-product-info-item"><div class="infoname">订单编号</div><div class="infocontent">{{vm.orderData.order_id}}</div><div class="clear-both"></div></div><div class="return-product-info-item"><div class="infoname">交易时间</div><div class="infocontent">{{vm.orderData.order_time|date:"yyyy-MM-dd HH:mm:ss"}}</div><div class="clear-both"></div></div></div><div class="return-product-info-wrap"><div class="return-input-info margin-tp20"><div class="infoname"><span class="required">*</span>申请服务</div><div class="infocontent"><select class="selectStyle" ng-model="vm.applyService" ng-options="applyService.type for applyService in vm.applyServices"></select></div><div class="clear-both"></div></div><div class="return-input-info" ng-if="vm.applyService.type==\'仅退款\'"><div class="infoname"><span class="required">*</span>货物状态</div><div class="infocontent"><select class="selectStyle" ng-model="vm.goodsStatus" ng-options="goodsStatus.status for goodsStatus in vm.goodsStatuses"></select></div><div class="clear-both"></div></div><div class="return-input-info" ng-if="vm.goodsStatus.status==\'未收到货\'&&vm.applyService.type!=\'退货退款\'"><div class="infoname"><span class="required">*</span>退款原因</div><div class="infocontent"><select class="selectStyle" ng-model="vm.noGoodsReason" ng-options="noGoodsReason.reason for noGoodsReason in vm.noGoodsReasons"></select></div><div class="clear-both"></div></div><div class="return-input-info" ng-if="vm.applyService.type==\'退货退款\'|| vm.goodsStatus.status==\'已收到货\'"><div class="infoname"><span class="required">*</span>退货原因</div><div class="infocontent"><select class="selectStyle" ng-model="vm.theReason" ng-options="refundReason.reason for refundReason in vm.refundReasons"></select></div><div class="clear-both"></div></div><div class="return-input-info" ng-if="vm.applyService.type==\'退货退款\'|| vm.goodsStatus.status==\'已收到货\' || vm.goodsStatus.status==\'未收到货\'"><div class="infoname"><span class="required"></span>可退金额</div><span class="infocontent" ng-bind="vm.pageData.refundData.refund_amount+\'元\'"></span><div class="clear-both"></div><div class="infoname"><span class="required"></span>可退余额</div><span class="infocontent" ng-bind="vm.pageData.refundData.refund_account_amount+\'元\'"></span><div class="clear-both"></div><div class="infoname"><span class="required"></span>可退积分</div><span class="infocontent" ng-bind="vm.pageData.refundData.refund_score+\'积分\'"></span><div class="clear-both"></div></div></div><div class="return-input-info-wrap"><div class="return-input-info"><div class="infoname"><span class="required">*</span>手机号码</div><input type="tel" ng-model="vm.pageData.refundData.phone" class="infocontent" placeholder="填写手机号便于卖家联系您"><div class="clear-both"></div></div><div class="return-input-info"><div class="infoname">退货说明</div><input type="text" ng-model="vm.pageData.refundData.remark" class="infocontent" placeholder="最多可填200字"><div class="clear-both"></div></div><div class="return-input-info"><div class="infoname">图片举证</div><div type="text" class="infocontent">最多可上传3张图片</div><div class="clear-both"></div></div><div class="addpic"><div class="addpics"><div class="addpicFlex"><div class="addpicTable"><label class="addpicbtn label0 fileContainer" for="upLoadImg0"><svg class="icon font28 jia0" aria-hidden="true"><use xlink:href="#icon-jia"></use></svg><input accept="image/*" type="file" id="upLoadImg0"></label></div></div><div class="addpicFlex"><div class="addpicTable"><label class="addpicbtn label1 fileContainer" for="upLoadImg1"><svg class="icon font28 jia1" aria-hidden="true"><use xlink:href="#icon-jia"></use></svg><input accept="image/*" type="file" id="upLoadImg1"></label></div></div><div class="addpicFlex"><div class="addpicTable"><label class="addpicbtn label2 fileContainer" for="upLoadImg2"><svg class="icon font28 jia2" aria-hidden="true"><use xlink:href="#icon-jia"></use></svg><input accept="image/*" type="file" id="upLoadImg2"></label></div></div></div></div></div><div class="btn-wrap"><label for="submitbtn" class="bigbtn" ng-click="vf.submitRefund()">提交</label></div><div service-time=""></div>'),e.put("app/returnGoods/refundDestination/refundDestination.html",'<div class="header-bar"><go-back><div class="go-back" ng-click="goBack()" role="button" tabindex="0"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-fanhui"></use></svg></div></go-back><div class="header-title">退款去向</div><div class="clear-both"></div></div><div class="return-product-info-wrap"><div class="refund-product-img"><img ng-src="{{pageData.orderData.head_img}}"></div><div class="refund-produc-brief"><p>{{pageData.orderData.product_name}}</p></div><div class="clear-both"></div></div><div class="return-input-info-wrap"><div class="refundDes"><div class="name">退款至微信</div><div class="vl">{{refundDetailData.refund_amount|currency:"￥":2}}</div><div class="clear-both"></div></div><div class="refundDes"><div class="state-circle-wrap"><div class="circle-item"><span class="small-circle bg-green"></span> <span class="state-barR bg-green"></span></div><div class="circle-item"><span class="state-barL" ng-class="{\'bg-green\':step>=2}"></span><svg class="icon big-circle" ng-class="{\'color-green\':step>=2,\'border-green\':step>=2}" aria-hidden="true"><use xlink:href="#icon-xuanzhong"></use></svg><span class="state-barR" ng-class="{\'bg-green\':step>=2}"></span></div><div class="circle-item"><span class="state-barL" ng-class="{\'bg-green\':step>=3}"></span> <span class="small-circle" ng-class="{\'bg-green\':step>=3}"></span></div></div><div class="state-txt-wrap"><div class="txt-item color-green">卖家退款</div><div class="txt-item" ng-class="{\'color-green\':step>=2}">银行受理</div><div class="txt-item" ng-class="{\'color-green\':step>=3}">确认到账</div></div></div><div class="refundDes"><div class="name">退款金额均会原路退回您的支付账户，请注意查收</div><div class="clear-both"></div></div><div class="refundDes"><div class="more" ui-sref="refundLog({orderDetailId:pageData.orderDetailId})">查看完整协商记录</div></div></div><div class="btn-wrap"><a for="submitbtn" class="bigbtn" href="#/orderDetail/{{pageData.orderId}}">查看订单详情</a></div>'),e.put("app/returnGoods/refundLog/refundLog.html",'<div class="header-bar"><go-back><div class="go-back" ng-click="goBack()" role="button" tabindex="0"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-fanhui"></use></svg></div></go-back><div class="header-title">协商记录</div><div class="clear-both"></div></div><div class="mainContent"></div>'),e.put("app/returnGoods/refundState/refundState.html",'<div class="wrapRefundState"><div class="header-bar"><go-back><div class="go-back" ng-click="goBack()" role="button" tabindex="0"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-fanhui"></use></svg></div></go-back><div class="header-title">退款处理中</div><div class="clear-both"></div></div><div class="refund-state" ng-if="refundDetailData.refund_status==0"><svg class="icon red" aria-hidden="true"><use xlink:href="#icon-gantanhao01"></use></svg>等待商家处理退款申请</div><div class="refund-state" ng-if="refundDetailData.refund_status==2"><svg class="icon red" aria-hidden="true"><use xlink:href="#icon-gantanhao01"></use></svg>商家不同意退款申请</div><div class="refund-state" ng-if="refundDetailData.refund_status==1&&refundDetailData.is_return_product==0"><svg class="icon red" aria-hidden="true"><use xlink:href="#icon-gantanhao01"></use></svg>商家同意退款申请</div><div class="refund-state" ng-if="refundDetailData.refund_status==1&&refundDetailData.is_return_product==1"><svg class="icon red" aria-hidden="true"><use xlink:href="#icon-gantanhao01"></use></svg>商家已同意退款，请退货给商家</div><div class="refund-state" ng-if="refundDetailData.refund_status==3"><svg class="icon red" aria-hidden="true"><use xlink:href="#icon-gantanhao01"></use></svg>已退货，等待商家确认收货</div><div class="refund-state" ng-if="refundDetailData.refund_status==4"><svg class="icon red" aria-hidden="true"><use xlink:href="#icon-gantanhao01"></use></svg>商家已确认收货</div><div class="refund-state" ng-if="refundDetailData.refund_status==5"><svg class="icon red" aria-hidden="true"><use xlink:href="#icon-gantanhao01"></use></svg>未收到货，拒绝退款</div><div class="refund-state" ng-if="refundDetailData.refund_status==6"><svg class="icon red" aria-hidden="true"><use xlink:href="#icon-gantanhao01"></use></svg>退款成功</div><div class="refund-state" ng-if="refundDetailData.refund_status==7"><svg class="icon red" aria-hidden="true"><use xlink:href="#icon-gantanhao01"></use></svg>关闭退货申请</div><div class="state-tip-wrap" ng-if="refundDetailData.refund_status==0"><div><div class="tipname">如卖家同意：</div><div class="tipcontent">申请将达成并退款给您</div><div class="clear-both"></div></div><div><div class="tipname">如卖家拒绝：</div><div class="tipcontent">您需要重新修改退款申请或申请维权</div><div class="clear-both"></div></div></div><div class="state-tip-wrap" ng-if="refundDetailData.refund_status==5||refundDetailData.refund_status==2"><div><div class="tipname">拒绝理由:</div><div class="tipcontent">{{refundDetailData.refund_refusereason}}</div><div class="clear-both"></div></div></div><div class="state-tip-wrap" ng-if="refundDetailData.refund_status==1&&refundDetailData.is_return_product==1"><div class="border-bt2"><div class="tipname">退货地址:</div><div class="tipcontent">{{refundDetailData.refund_address}}</div><div class="clear-both"></div></div><div class="btn-wrap2"><label for="submitbtn" class="bigbtn" ui-sref="returnLogistics({orderId:orderId,orderDetailId:orderDetailId})">填写退货物流信息</label></div></div><div class="state-tip-wrap" ng-if="refundDetailData.refund_status==1&&refundDetailData.is_return_product==0||refundDetailData.refund_status==3||refundDetailData.refund_status==4"><div><div class="tipname">如卖家确认：</div><div class="tipcontent">退款成功并退回您的支付账户</div><div class="clear-both"></div></div><div><div class="tipname">如卖家拒绝：</div><div class="tipcontent">您需要重新修改退货信息或申请维权</div><div class="clear-both"></div></div></div><div class="state-tip-wrap" ng-if="refundDetailData.refund_status==6"><div><div class="tipname">退款金额:</div><div class="tipcontent">{{refundDetailData.refund_amount|currency:"￥":2}}</div><div class="clear-both"></div></div><div><div class="tipname">退款余额:</div><div class="tipcontent">{{refundDetailData.refund_account_amount|currency:"￥":2}}</div><div class="clear-both"></div></div><div><div class="tipname">退款积分:</div><div class="tipcontent" ng-bind="refundDetailData.refund_score+\'积分\'"></div><div class="clear-both"></div></div><div class="border-bt2"><div class="tipname">退款时间:</div><div class="tipcontent">2015-10-10</div><div class="clear-both"></div></div><div class="btn-wrap2"><label for="submitbtn" class="bigbtn3" ui-sref="refundDestination({orderId:orderId,orderDetailId:orderDetailId})">查看退款去向</label></div></div><div class="return-product-info-wrap margin-tp20 border-tp"><div class="return-product-info-item"><div class="infoname">退款编号</div><div class="infocontent">{{refundDetailData.refund_id}}</div><div class="clear-both"></div></div><div class="return-product-info-item"><div class="infoname">申请时间</div><div class="infocontent">{{refundDetailData.time|date:"yyyy-MM-dd HH:MM:ss"}}</div><div class="clear-both"></div></div><div class="return-product-info-item"><div class="infoname">退款原因</div><div class="infocontent">{{refundDetailData.refund_reason}}</div><div class="clear-both"></div></div><div class="return-product-info-item"><div class="infoname">处理方式</div><div class="infocontent" ng-if="refundDetailData.is_return_product==1">我要退款，并退货</div><div class="infocontent" ng-if="refundDetailData.is_return_product==0">我要退款</div><div class="clear-both"></div></div><div class="return-product-info-item"><div class="infoname">退款金额</div><div class="infocontent">{{refundDetailData.refund_amount|currency:"￥":2}}</div><div class="clear-both"></div></div><div class="return-product-info-item"><div class="infoname">退还余额</div><div class="infocontent">{{refundDetailData.refund_account_amount|currency:"￥":2}}</div><div class="clear-both"></div></div><div class="return-product-info-item"><div class="infoname">退还积分</div><div class="infocontent" ng-bind="refundDetailData.refund_score+\'积分\'"></div><div class="clear-both"></div></div><span class="readmore"><a ui-sref="refundLog({orderDetailId:orderDetailId})">查看完整协商记录</a></span></div><div class="btn-wrap" ng-if="refundDetailData.refund_status==0"><label for="submitbtn" class="bigbtn" ui-sref="orderDetail({orderID:orderId})">订单详情</label></div><div class="btn-wrap" ng-if="refundDetailData.refund_status==2||refundDetailData.refund_status==5"><label for="submitbtn" class="bigbtn" ui-sref="applyRefund({orderId:orderId,orderDetailId:orderDetailId,update:1})">重新提交退货申请</label></div><div class="btn-wrap" ng-if="refundDetailData.refund_status==0||refundDetailData.refund_status==2||refundDetailData.refund_status==5"><label for="submitbtn" class="bigbtn2" ng-click="closeRefund()">关闭退款申请</label></div><a class="btn-wrap" ng-if="refundDetailData.refund_status==2||refundDetailData.refund_status==5" href="tel:02124099196"><label for="submitbtn" class="bigbtn" href="tel:02124099196">拨打客服电话</label></a></div>'),e.put("app/returnGoods/returnLogistics/returnLogistics.html",'<div class="header-bar"><go-back><div class="go-back" ng-click="goBack()" role="button" tabindex="0"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-fanhui"></use></svg></div></go-back><div class="header-title">填写退货物流</div><div class="clear-both"></div></div><div class="return-product-info-wrap"><div class="return-input-info"><div class="infoname">物流方式</div><div class="infocontent"><select ng-model="currentCompany.name" ng-options="company.name for company in expressCompany"></select></div><div class="clear-both"></div></div><div class="return-input-info"><div class="infoname">物流单号</div><input type="text" ng-model="logisticsInfo.express_number" class="infocontent" placeholder="请输入物流单号"><div class="clear-both"></div></div></div><div class="btn-wrap"><label for="submitbtn" class="bigbtn" ng-click="submitExpress()">提交</label></div>'),e.put("app/returnGoods/store/applyRefund.html",'<div class="header-bar"><go-back><div class="go-back" ng-click="goBack()" role="button" tabindex="0"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-fanhui"></use></svg></div></go-back><div class="header-title">申请退款</div><div class="clear-both"></div></div><div class="return-product-info-wrap no-bottom-border"><div class="return-product-info-item"><div class="infoname">商品名称</div><div class="infocontent">{{pageData.orderData.product_name}}</div><div class="clear-both"></div></div><div class="return-product-info-item"><div class="infoname">订单金额</div><div class="infocontent">{{pageData.orderData.product_totalPrice|currency:"￥":2}}</div><div class="clear-both"></div></div><div class="return-product-info-item"><div class="infoname">订单编号</div><div class="infocontent">{{pageData.orderData.order_id}}</div><div class="clear-both"></div></div><div class="return-product-info-item"><div class="infoname">交易时间</div><div class="infocontent">{{pageData.orderData.order_time|date:"yyyy-MM-dd HH:mm:ss"}}</div><div class="clear-both"></div></div></div><div class="return-product-info-wrap"><div class="return-input-info margin-tp20"><div class="infoname">退款原因</div><div class="infocontent"><select ng-model="theReason.reason" ng-options="refundReason.reason for refundReason in refundReasons"></select></div><div class="selectInput">（必填）</div><div class="clear-both"></div></div><div class="return-input-info"><div class="infoname">退款金额</div><input type="number" ng-model="pageData.refundData.refund_amount" class="infocontent" placeholder="最多可以退{{maxRefundAmount}}元"><div class="selectInput">（必填）</div><div class="clear-both"></div></div></div><div class="return-input-info-wrap"><div class="return-input-info"><div class="infoname">手机号码</div><input type="tel" ng-model="pageData.refundData.phone" class="infocontent" placeholder="填写手机号便于卖家联系您"><div class="selectInput">（必填）</div><div class="clear-both"></div></div><div class="return-input-info"><div class="infoname">备注信息</div><input type="text" ng-model="pageData.refundData.remark" class="infocontent" placeholder="最多可填200字"><div class="selectInput">（选填）</div><div class="clear-both"></div></div><div class="return-input-info"><div class="infoname">图片举证</div><div type="text" class="infocontent">最多可上传3张图片</div><div class="selectInput">（选填）</div><div class="clear-both"></div></div><div class="addpic"><div class="addpics"><label class="addpicbtn label0 fileContainer" for="upLoadImg0"><svg class="icon font28 jia0" aria-hidden="true"><use xlink:href="#icon-jia"></use></svg><input accept="image/*" type="file" id="upLoadImg0"></label> <label class="addpicbtn label1 fileContainer" for="upLoadImg1"><svg class="icon font28 jia1" aria-hidden="true"><use xlink:href="#icon-jia"></use></svg><input accept="image/*" type="file" id="upLoadImg1"></label> <label class="addpicbtn label2 fileContainer" for="upLoadImg2"><svg class="icon font28 jia2" aria-hidden="true"><use xlink:href="#icon-jia"></use></svg><input accept="image/*" type="file" id="upLoadImg2"></label></div></div></div><div class="btn-wrap"><label for="submitbtn" class="bigbtn" ng-click="submitRefund()">提交</label></div><div service-time=""></div>'),e.put("app/userMange/forgetPassword/forgetPassword.html",'<div class="wrapUserInfo"><div class="header-bar" ng-switch="vm.isLogin"><go-back></go-back><div class="header-title" ng-switch-when="1">修改密码</div><div class="header-title" ng-switch-default="">忘记密码</div></div><div><div class="empty"></div><div class="list"><label class="item item-input" ng-switch="vm.isLogin"><span class="sms-phone" ng-switch-when="1" ng-bind="vm.phone"></span> <input type="number" placeholder="手机号" ng-maxlength="11" ng-model="vm.phone" ng-switch-default=""></label> <label class="item item-input" ng-switch="vm.isLogin"><input type="number" placeholder="验证码" ng-maxlength="6" ng-model="vm.code" ng-switch-default=""> <a href="javascript:;" class="button button-small sms-code" ng-class="{\'button-positive themeBackgroundColor themeBorderColor\':!vm.isShowWait}" ng-click="vf.getSMSCode()"><span ng-hide="vm.isShowWait">点击获取</span> <span ng-show="vm.isShowWait">{{vm.waitTime}}s</span></a></label> <label class="item item-input"><input type="password" placeholder="新密码" ng-model="vm.password"></label></div><div class="wrapOpeate"><a href="javascript:;" class="button button-block button-positive themeBackgroundColor themeBorderColor" ng-click="vf.updatePassword()"><span>提交</span></a></div></div></div>'),e.put("app/userMange/userInfo/userInfo.html",'<div class="wrapUserInfo wrapColor238"><div class="header-bar"><go-back></go-back><div class="header-title">设置</div></div><div ng-if="vm.field"><div class="empty"></div><div class="list"><div class="item item-icon-right" ng-if="vm.field.avatar && vm.field.avatar.show">头像<go-right icon-name="icon-arrowright" ng-if="vm.field.avatar.edit" ng-click="goUrl(\'#/userUpdate/avatar\')"></go-right></div><div class="item item-icon-right" ng-if="vm.field.truename && vm.field.truename.show">姓名 <span class="item-note" ng-bind="vm.user.truename"></span><go-right icon-name="icon-arrowright" ng-if="vm.field.truename.edit" ng-click="goUrl(\'#/userUpdate/truename\')"></go-right></div><div class="item item-icon-right" ng-if="vm.field.sex && vm.field.sex.show" ng-switch="vm.user.gender">性别 <span class="item-note" ng-switch-when="0">女</span> <span class="item-note" ng-switch-when="1">男</span> <span class="item-note" ng-switch-default=""></span><go-right icon-name="icon-arrowright" ng-if="vm.field.sex.edit" ng-click="goUrl(\'#/userUpdate/gender\')"></go-right></div><div class="item item-icon-right" ng-if="vm.field.phone && vm.field.phone.show">电话 <span class="item-note" ng-bind="vm.user.phone"></span><go-right icon-name="icon-arrowright" ng-if="vm.field.phone.edit" ng-click="goUrl(\'#/userUpdate/phone\')"></go-right></div><div class="item item-icon-right" ng-if="vm.field.email && vm.field.email.show">邮箱 <span class="item-note" ng-bind="vm.user.email"></span><go-right icon-name="icon-arrowright" ng-if="vm.field.email.edit" ng-click="goUrl(\'#/userUpdate/email\')"></go-right></div><div class="item item-icon-right" ng-if="vm.field.address && vm.field.address.show">地址 <span class="item-note">详情</span><go-right icon-name="icon-arrowright" ng-if="vm.field.address.edit" ng-click="goUrl(\'#/receiveAddressList\')"></go-right></div></div><div class="empty"></div><div class="list"><div class="item item-icon-right" ng-if="vm.field.identitycardphoto && vm.field.identitycardphoto.show" ng-switch="vm.user.hasidentitycardphoto">实名认证 <span class="item-note" ng-switch-when="true">完成</span> <span class="item-note" ng-switch-default="">未完成</span><go-right icon-name="icon-arrowright" ng-if="vm.field.identitycardphoto.edit" ng-click="goUrl(\'#/userUpdate/identity_card_photo\')"></go-right></div><div class="item item-icon-right" ng-if="vm.field.businessintelligencecertificatephoto && vm.field.businessintelligencecertificatephoto.show" ng-switch="vm.user.hasbusinessintelligencecertificatephoto">公司资质 <span class="item-note" ng-switch-when="true">完成</span> <span class="item-note" ng-switch-default="">未完成</span><go-right icon-name="icon-arrowright" ng-if="vm.field.businessintelligencecertificatephoto.edit" ng-click="goUrl(\'#/userUpdate/business_intelligence_certificate_photo\')"></go-right></div><div class="item item-icon-right" ng-if="vm.field.bankcard && vm.field.bankcard.show" ng-switch="vm.user.hasbankcard">我的银行卡 <span class="item-note" ng-switch-when="true">已绑定</span> <span class="item-note" ng-switch-default="">未绑定</span><go-right icon-name="icon-arrowright" ng-if="vm.field.bankcard.edit" ng-click="goUrl(\'/app/wap/BankCardList.aspx\')"></go-right></div><div class="item item-icon-right" ng-if="vm.field.qrcode && vm.field.qrcode.show" ng-switch="vm.user.hasqrcode">我的二维码名片 <span class="item-note" ng-switch-when="true">已生成</span> <span class="item-note" ng-switch-default="">推广生成</span><go-right icon-name="icon-arrowright" ng-if="vm.field.qrcode.edit" ng-click="goUrl(\'/App/Cation/Wap/Mall/Distribution/Index.aspx\')"></go-right></div><div class="item item-icon-right" ng-if="vm.field.forgetpassword && vm.field.forgetpassword.show">密码修改<go-right icon-name="icon-arrowright" ng-if="vm.field.forgetpassword.edit" ng-click="goUrl(\'#/forgetPassword/1\')"></go-right></div></div><div class="wrapOpeate" ng-if="vm.field.loginout && vm.field.loginout.show" style="margin-top: 20px;"><a href="javascript:;" class="button button-block button-positive themeBackgroundColor themeBorderColor" ng-click="vf.loginOut()"><span>退出登录</span></a></div></div></div>'),
e.put("app/userMange/userUpdate/userUpdate.html",'<div class="wrapUserInfo"><div class="header-bar"><go-back></go-back><div class="header-title" ng-bind="vm.title"></div></div><div ng-switch="vm.upt" ng-if="vm.user"><div class="empty"></div><div class="list"><label class="item item-icon-right" ng-switch-when="gender" ng-click="vm.user.gender = \'1\'">男<go-right icon-name="icon-dagou" ng-if="vm.user.gender == \'1\'"></go-right></label> <label class="item item-icon-right" ng-switch-when="gender" ng-click="vm.user.gender = \'0\'">女<go-right icon-name="icon-dagou" ng-if="vm.user.gender == \'0\'"></go-right></label><div class="item item-text-center" ng-switch-when="avatar" style="border: 0px;"><div class="uploader-box" ng-class="{\'uploader-box-empty\':!vm.user.avatar}" ng-style="{\'background-image\':!vm.user.avatar?\'\':\'url(\'+vm.user.avatar+\')\',\'background-size\': \'100%\'}"><input type="file" accept="image/jpeg;image/png;image/gif;" multiple="multiple" class="uploader-input" onchange="angular.element(this).scope().vf.upload(this,\'avatar\')"></div></div><div class="item item-text-center" ng-switch-when="identity_card_photo" style="border: 0px;"><div class="uploader-box-out"><div class="uploader-box" ng-class="{\'uploader-box-empty\':!vm.user.identity_card_photo_front}" ng-style="{\'background-image\':!vm.user.identity_card_photo_front?\'\':\'url(\'+vm.user.identity_card_photo_front+\')\',\'background-size\': \'100%\'}"><input type="file" accept="image/jpeg;image/png;image/gif;" multiple="multiple" class="uploader-input" onchange="angular.element(this).scope().vf.upload(this,\'identity_card_photo_front\')"></div><div class="uploader-box-text">身份证正面</div></div><div class="uploader-box-out"><div class="uploader-box" ng-class="{\'uploader-box-empty\':!vm.user.identity_card_photo_behind}" ng-style="{\'background-image\':!vm.user.identity_card_photo_behind?\'\':\'url(\'+vm.user.identity_card_photo_behind+\')\',\'background-size\': \'100%\'}"><input type="file" accept="image/jpeg;image/png;image/gif;" multiple="multiple" class="uploader-input" onchange="angular.element(this).scope().vf.upload(this,\'identity_card_photo_behind\')"></div><div class="uploader-box-text">身份证反面</div></div><div class="uploader-box-out"><div class="uploader-box" ng-class="{\'uploader-box-empty\':!vm.user.identity_card_photo_handheld}" ng-style="{\'background-image\':!vm.user.identity_card_photo_handheld?\'\':\'url(\'+vm.user.identity_card_photo_handheld+\')\',\'background-size\': \'100%\'}"><input type="file" accept="image/jpeg;image/png;image/gif;" multiple="multiple" class="uploader-input" onchange="angular.element(this).scope().vf.upload(this,\'identity_card_photo_handheld\')"></div><div class="uploader-box-text">身份证手持照</div></div></div><div class="item item-text-center" ng-switch-when="business_intelligence_certificate_photo" style="border: 0px;"><div class="uploader-box-out"><div class="uploader-box" ng-class="{\'uploader-box-empty\':!vm.user.business_intelligence_certificate_photo1}" ng-style="{\'background-image\':!vm.user.business_intelligence_certificate_photo1?\'\':\'url(\'+vm.user.business_intelligence_certificate_photo1+\')\',\'background-size\': \'100%\'}"><input type="file" accept="image/jpeg;image/png;image/gif;" multiple="multiple" class="uploader-input" onchange="angular.element(this).scope().vf.upload(this,\'business_intelligence_certificate_photo1\')"></div><div class="uploader-box-text">三证合一</div></div><div class="uploader-box-out"><div class="uploader-box" ng-class="{\'uploader-box-empty\':!vm.user.business_intelligence_certificate_photo2}" ng-style="{\'background-image\':!vm.user.business_intelligence_certificate_photo2?\'\':\'url(\'+vm.user.business_intelligence_certificate_photo2+\')\',\'background-size\': \'100%\'}"><input type="file" accept="image/jpeg;image/png;image/gif;" multiple="multiple" class="uploader-input" onchange="angular.element(this).scope().vf.upload(this,\'business_intelligence_certificate_photo2\')"></div><div class="uploader-box-text">补充一</div></div><div class="uploader-box-out"><div class="uploader-box" ng-class="{\'uploader-box-empty\':!vm.user.business_intelligence_certificate_photo3}" ng-style="{\'background-image\':!vm.user.business_intelligence_certificate_photo3?\'\':\'url(\'+vm.user.business_intelligence_certificate_photo3+\')\',\'background-size\': \'100%\'}"><input type="file" accept="image/jpeg;image/png;image/gif;" multiple="multiple" class="uploader-input" onchange="angular.element(this).scope().vf.upload(this,\'business_intelligence_certificate_photo3\')"></div><div class="uploader-box-text">补充二</div></div></div><label class="item item-input" ng-switch-when="truename"><input type="text" placeholder="姓名" ng-model="vm.user.truename"></label> <label class="item item-input" ng-switch-when="phone"><span class="sms-phone" ng-bind="vm.user.phone"></span></label> <label class="item item-input" ng-if="vm.canPost" ng-switch-when="phone"><input type="number" placeholder="新手机号" ng-model="vm.phone"></label> <label class="item item-input" ng-if="vm.canPost" ng-switch-when="phone"><input type="number" placeholder="验证码" ng-maxlength="6" ng-model="vm.code"> <a href="javascript:;" class="button button-small sms-code" ng-class="{\'button-positive themeBackgroundColor themeBorderColor\':!vm.isShowWait}" ng-click="vf.getSMSCode()"><span ng-hide="vm.isShowWait">点击获取</span> <span ng-show="vm.isShowWait">{{vm.waitTime}}s</span></a></label> <label class="item item-input" ng-switch-when="email"><input type="text" placeholder="邮箱地址" ng-model="vm.user.email"></label></div><div class="wrapOpeate" ng-if="vm.canPost"><a href="javascript:;" class="button button-block button-positive themeBackgroundColor themeBorderColor" ng-click="vf.update()"><span ng-if="vm.upt == \'avatar\'||vm.upt == \'identity_card_photo\' || vm.upt == \'business_intelligence_certificate_photo\'">上传照片</span> <span ng-if="!(vm.upt == \'avatar\'||vm.upt == \'identity_card_photo\' || vm.upt == \'business_intelligence_certificate_photo\')">提 交</span></a></div></div></div>')}]);