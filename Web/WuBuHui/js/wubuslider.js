(function(e){e.fn.touchSlider=function(t){function d(){function e(){v(),setTimeout(m),wubuslidersettime=setTimeout(e,i.timeinterval)}wubuslidersettime=setTimeout(e,i.timeinterval)}function v(t,s){if(a.notouch||!a.leftrighttouch){a.leftrighttouch||(a.notouch=!1);return}var t=typeof t=="number"?t:0,s=typeof s=="number"?s:0;if(t!==0){a.notouch=!0,e(n[a.index])[0].addEventListener("webkitTransitionEnd",u,!1);function u(){e(n[a.index])[0].removeEventListener("webkitTransitionEnd",u,!1),a.notouch=!1}}e(n[a.index]).css({transform:"translate3d("+(0+s)+"px,"+0+"px,"+0+"px)",transition:t+"s ease-out"}),(t===0||a.direction>=0)&&e(n[a.prevpic]).css({transform:"translate3d("+(-o+s)+"px,"+0+"px,"+0+"px)",transition:t+"s ease-out"}),(t===0||a.direction<=0)&&e(n[a.nextpic]).css({transform:"translate3d("+(o+s)+"px,"+0+"px,"+0+"px)",transition:t+"s ease-out"}),t!=0&&i.sliderpoint&&a.direction!=0&&(e(".currentsliderpoint").css({"background-color":i.sliderpointbgcolor}).removeClass("currentsliderpoint"),typeof r=="undefined"?e(p[a.index]).addClass("currentsliderpoint").css({"background-color":i.sliderpointcolor}):e(p[a.index>1?a.index-2:a.index]).addClass("currentsliderpoint").css({"background-color":i.sliderpointcolor}))}function m(){a.init(a.index+1),v(i.animatetime/1e3)}function g(){a.init(a.index-1),v(i.animatetime/1e3)}function y(){a.init(),v(i.animatetime/2e3)}function b(e){i.automatic&&clearTimeout(wubuslidersettime);var t=e.originalEvent.changedTouches[0];a.start[0]=t.clientX,a.start[1]=t.clientY,a.starttime=e.timeStamp,v()}function w(e){if(a.notouch)return;var t=e.originalEvent.changedTouches[0];a.now[0]=t.clientX,a.now[1]=t.clientY,a.nowtime=e.timeStamp;var n=a.now[0]-a.start[0],r=a.now[1]-a.start[1],i=a.nowtime-a.starttime;if(i<800&&!a.leftrighttouch)if(Math.abs(n)>6&&Math.abs(r)<20)e.preventDefault(),a.leftrighttouch=!0;else if(Math.abs(n)<20&&Math.abs(r)>20){a.notouch=!0;if(navigator.userAgent.match(/Android/i)){try{clearTimeout(clearnotoucht)}catch(e){}clearnotoucht=setTimeout(s,500);function s(){a.notouch=!1}}return}var o=n;v(0,o)}function E(t){var r=t.originalEvent.changedTouches[0];a.end[0]=r.clientX,a.end[1]=r.clientY,a.endtime=t.timeStamp;var s=a.end[0]-a.start[0],o=a.end[1]-a.start[1],u=a.endtime-a.starttime;if(u<250&&Math.abs(s)<8&&Math.abs(o)<8){typeof e(n[a.index]).attr("href")=="string"&&(window.location.href=e(n[a.index]).attr("href"));return}a.init(),s>30&&a.leftrighttouch?g():s<-30&&a.leftrighttouch?m():Math.abs(s)<=10?(v(),a.notouch=!0):y(),a.leftrighttouch=!1,i.automatic&&d()}var n=e(this).children();if(n.size()==1)return;if(n.size()==2){e(this).append(n.clone()),n=e(this).children();var r=!0}var i={circulate:!1,automatic:!1,sliderpoint:!0,sliderpointwidth:8,sliderpointcolor:"#aaa",sliderpointbgcolor:"#eee",timeinterval:3e3,animatetime:300};if(typeof t!="undefined")for(arg in t)typeof i[arg]==typeof t[arg]&&(i[arg]=t[arg]);var s=n.size(),o=e(this).width(),u=e(this).height(),a={index:0,notouch:!1,leftrighttouch:!1,starttime:0,nowtime:0,endtime:0,start:[0,0],now:[0,0],end:[0,0],direction:0,init:function(e){typeof e=="number"?e<0?(this.direction=-1,this.index=s-1):e>=s?(this.direction=1,this.index=0):(this.direction=e>this.index?1:-1,this.index=e):this.direction=0;var t=a.index-1;this.prevpic=t>=0?t:s-1;var n=a.index+1;this.nextpic=n<s?n:0}};a.init(),e(this).css({position:"relative"}).find("a").click(function(e){e.preventDefault()}),n.each(function(t){var n=t==0?0:1;e(this).css({width:o,transform:"translate3d("+o*n+"px,"+0+"px,"+0+"px)",transition:"0s ease-out",position:"absolute"})});if(i.sliderpoint){e(this).append(e("<ul class='pointlist'><li class='currentsliderpoint'></li></ul>"));var f=Math.ceil(i.sliderpointwidth/5),l=f*2+i.sliderpointwidth,c=l*s;if(typeof r=="undefined")for(var h=1;h<s;h++)e(".pointlist").append(e("<li></li>"));else{var c=l*2;e(".pointlist").append(e("<li></li>"))}var p=e(this).find(".pointlist").find("li");e(this).find(".pointlist").css({width:c,height:l,position:"absolute",transform:"translate3d(0,"+(u/2-i.sliderpointwidth)+"px,1px)",padding:0,top:0,left:0,right:0,bottom:0,margin:"auto"}),p.css({"list-style":"none",width:i.sliderpointwidth,height:i.sliderpointwidth,"border-radius":i.sliderpointwidth,margin:f,"float":"left","background-color":i.sliderpointbgcolor,transition:i.animatetime/1e3+"s ease-out"}),e(".currentsliderpoint").css({"background-color":i.sliderpointcolor})}return e(this).bind("touchstart",function(e){b(e)}),e(this).bind("touchmove",function(e){w(e)}),e(this).bind("touchend",function(e){E(e)}),i.automatic&&d(),e(this)}})(typeof jQuery!="undefined"?jQuery:window.Zepto);